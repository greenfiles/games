!function(t){function e(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.src=p.p+""+t+"."+x+".hot-update.js",e.appendChild(i)}function i(t){if("undefined"==typeof XMLHttpRequest)return t(new Error("No browser support"));try{var e=new XMLHttpRequest,i=p.p+""+x+".hot-update.json";e.open("GET",i,!0),e.timeout=1e4,e.send(null)}catch(n){return t(n)}e.onreadystatechange=function(){if(4===e.readyState)if(0===e.status)t(new Error("Manifest request to "+i+" timed out."));else if(404===e.status)t();else if(200!==e.status&&304!==e.status)t(new Error("Manifest request to "+i+" failed."));else{try{var n=JSON.parse(e.responseText)}catch(r){return void t(r)}t(null,n)}}}function n(t){function e(t,e){"ready"===S&&s("prepare"),C++,p.e(t,function(){function i(){C--,"prepare"===S&&(M[t]||l(t),0===C&&0===E&&c())}try{e.call(null,n)}finally{i()}})}var i=I[t];if(!i)return p;var n=function(e){return i.hot.active?I[e]?(I[e].parents.indexOf(t)<0&&I[e].parents.push(t),i.children.indexOf(e)<0&&i.children.push(e)):w=[t]:w=[],p(e)};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&(f?Object.defineProperty(n,r,function(t){return{configurable:!0,enumerable:!0,get:function(){return p[t]},set:function(e){p[t]=e}}}(r)):n[r]=p[r]);return f?Object.defineProperty(n,"e",{enumerable:!0,value:e}):n.e=e,n}function r(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(t,i){if("undefined"==typeof t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var n=0;n<t.length;n++)e._acceptedDependencies[t[n]]=i;else e._acceptedDependencies[t]=i},decline:function(t){if("undefined"==typeof t)e._selfDeclined=!0;else if("number"==typeof t)e._declinedDependencies[t]=!0;else for(var i=0;i<t.length;i++)e._declinedDependencies[t[i]]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var i=e._disposeHandlers.indexOf(t);i>=0&&e._disposeHandlers.splice(i,1)},check:a,apply:u,status:function(t){return t?void T.push(t):S},addStatusHandler:function(t){T.push(t)},removeStatusHandler:function(t){var e=T.indexOf(t);e>=0&&T.splice(e,1)},data:b[t]};return e}function s(t){S=t;for(var e=0;e<T.length;e++)T[e].call(null,t)}function o(t){var e=+t+""===t;return e?+t:t}function a(t,e){if("idle"!==S)throw new Error("check() is only allowed in idle status");"function"==typeof t?(_=!1,e=t):(_=t,e=e||function(t){if(t)throw t}),s("check"),i(function(t,i){if(t)return e(t);if(!i)return s("idle"),void e(null,null);P={},A={},M={};for(var n=0;n<i.c.length;n++)A[i.c[n]]=!0;y=i.h,s("prepare"),g=e,v={};var r=0;l(r),"prepare"===S&&0===C&&0===E&&c()})}function h(t,e){if(A[t]&&P[t]){P[t]=!1;for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(v[i]=e[i]);0===--E&&0===C&&c()}}function l(t){A[t]?(P[t]=!0,E++,e(t)):M[t]=!0}function c(){s("ready");var t=g;if(g=null,t)if(_)u(_,t);else{var e=[];for(var i in v)Object.prototype.hasOwnProperty.call(v,i)&&e.push(o(i));t(null,e)}}function u(e,i){function n(t){for(var e=[t],i={},n=e.slice();n.length>0;){var s=n.pop(),t=I[s];if(t&&!t.hot._selfAccepted){if(t.hot._selfDeclined)return new Error("Aborted because of self decline: "+s);if(0===s)return;for(var o=0;o<t.parents.length;o++){var a=t.parents[o],h=I[a];if(h.hot._declinedDependencies[s])return new Error("Aborted because of declined dependency: "+s+" in "+a);e.indexOf(a)>=0||(h.hot._acceptedDependencies[s]?(i[a]||(i[a]=[]),r(i[a],[s])):(delete i[a],e.push(a),n.push(a)))}}}return[e,i]}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];t.indexOf(n)<0&&t.push(n)}}if("ready"!==S)throw new Error("apply() is only allowed in ready status");"function"==typeof e?(i=e,e={}):e&&"object"==typeof e?i=i||function(t){if(t)throw t}:(e={},i=i||function(t){if(t)throw t});var a={},h=[],l={};for(var c in v)if(Object.prototype.hasOwnProperty.call(v,c)){var u=o(c),d=n(u);if(!d){if(e.ignoreUnaccepted)continue;return s("abort"),i(new Error("Aborted because "+u+" is not accepted"))}if(d instanceof Error)return s("abort"),i(d);l[u]=v[u],r(h,d[0]);for(var u in d[1])Object.prototype.hasOwnProperty.call(d[1],u)&&(a[u]||(a[u]=[]),r(a[u],d[1][u]))}for(var f=[],m=0;m<h.length;m++){var u=h[m];I[u]&&I[u].hot._selfAccepted&&f.push({module:u,errorHandler:I[u].hot._selfAccepted})}s("dispose");for(var g=h.slice();g.length>0;){var u=g.pop(),_=I[u];if(_){for(var T={},E=_.hot._disposeHandlers,C=0;C<E.length;C++){var M=E[C];M(T)}b[u]=T,_.hot.active=!1,delete I[u];for(var C=0;C<_.children.length;C++){var P=I[_.children[C]];if(P){var A=P.parents.indexOf(u);A>=0&&P.parents.splice(A,1)}}}}for(var u in a)if(Object.prototype.hasOwnProperty.call(a,u))for(var _=I[u],O=a[u],C=0;C<O.length;C++){var R=O[C],A=_.children.indexOf(R);A>=0&&_.children.splice(A,1)}s("apply"),x=y;for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(t[u]=l[u]);var k=null;for(var u in a)if(Object.prototype.hasOwnProperty.call(a,u)){for(var _=I[u],O=a[u],D=[],m=0;m<O.length;m++){var R=O[m],M=_.hot._acceptedDependencies[R];D.indexOf(M)>=0||D.push(M)}for(var m=0;m<D.length;m++){var M=D[m];try{M(a)}catch(L){k||(k=L)}}}for(var m=0;m<f.length;m++){var B=f[m],u=B.module;w=[u];try{p(u)}catch(L){if("function"==typeof B.errorHandler)try{B.errorHandler(L)}catch(L){k||(k=L)}else k||(k=L)}}return k?(s("fail"),i(k)):(s("idle"),void i(null,h))}function p(e){if(I[e])return I[e].exports;var i=I[e]={exports:{},id:e,loaded:!1,hot:r(e),parents:w,children:[]};return t[e].call(i.exports,i,i.exports,n(e)),i.loaded=!0,i.exports}var d=this.webpackHotUpdate;this.webpackHotUpdate=function(t,e){h(t,e),d&&d(t,e)};var f=!1;try{Object.defineProperty({},"x",{get:function(){}}),f=!0}catch(m){}var g,v,y,_=!0,x="ee1581a65f8c56e0d4ac",b={},w=[],T=[],S="idle",E=0,C=0,M={},P={},A={},I={};return p.m=t,p.c=I,p.p="",p.h=function(){return x},n(0)(0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){function n(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}function r(){var t=d.getJson("legoconfig").config;t.CONTENT_URL&&""!==t.CONTENT_URL&&(window.loadFromLegoUrl=t.CONTENT_URL),s()}function s(){m=new l,window.app=m,window.Easings=a.instance,window.EasingsGame=h.instance,window.perlin=u.noise;var t=document.getElementById("container");t.appendChild(m.view),t.style.background="black",m.view.style.position="absolute",m.view.style.top=0,m.view.style.left=0,TrackMan.useModule([TrackMan.Modules.BasicTracking,TrackMan.Modules.GameTracking],function(t,e){t.trackPage(),m.initTrackMan(t,e)}),window.addEventListener("resize",function(){setTimeout(o,100),setTimeout(o,200)}),setTimeout(o,100),setTimeout(o,200)}function o(){document.getElementById("container");c.instance.iOS&&c.instance.iOS_version<7||window.scrollTo(0,0),m.resize(window.innerWidth,window.innerHeight)}if(window.ASSET_URL="assets/",config={app:"com/walker/app/WalkerApp"},window.console||(window.console={log:function(t){}}),window.console.log||(window.console.log=function(t){}),window.DEVICE_SCALE=window.devicePixelRatio||1,n()){if(!window.app){var a=(i(3),i(4),i(5)),h=i(11),l=(i(12),i(13),i(14),i(6),i(16)),c=i(25),u=i(151);new Date,window.Trackman;TrackMan.Log=!0;var p=i(18),d=i(20),f=new p;f.addJson(ASSET_URL+"json/lego-config.json","legoconfig"),f.onComplete.addOnce(r),f.load(),window.loadFromLegoUrl=!1;var m}}else{var g=i(2);new g(document.body)}},function(t,e,i){var n;n=function(t,e,i){var n=function(t){this.domElement=t||document.body;var e={message:'<p>Uh-oh! It looks like you need to update your browser before you\'ll be able to play this game</p><p>In the meantime, check out <a href="#brand_url">this</a> or <a href="#cbeebies_games_url">this</a>.',brand_url:"http://www.someurl.tld/",games_url:"http://www.someurl.tld/",enabled:!0},i=e.message;i=i.replace("#brand_url",e.brand_url),i=i.replace("#games_url",e.games_url),this.active=!1,this.checkDevice(navigator.userAgent),this.checkCanvas(),this.checkCookies()};n.prototype.constructor=n,n.prototype={checkDevice:function(t){for(var e=[/(Mobile\/8C148)/,/(Mobile\/8C148a)/,/(Mobile\/8A293)/,/(Mobile\/8A306)/,/(Mobile\/8A400)/,/(Mobile\/8B117)/,/(Mobile\/8E128)/,/(Mobile\/8E200)/,/(Mobile\/8E303)/,/(Mobile\/8E401)/,/(Mobile\/8E600)/,/(Mobile\/8E501)/,/(Mobile\/8G4)/,/(Mobile\/8H7)/,/(Mobile\/8J2)/,/(Mobile\/8K2)/,/(Mobile\/8L1)/,/(Mobile\/9A334)/,/(Mobile\/10A523)/,/(Mobile\/9A405)/],i=0;i<e.length;i++)if(t.match(e[i])){var n=ASSET_URL+"img/unsupported.jpg";return this.createBigImage(n),!1}if(/iP[ao]d|iPhone/i.test(t)){var r=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1;if(r<6){var n=ASSET_URL+"img/unsupported.jpg";return this.createBigImage(n),!1}}},checkCanvas:function(){if(!this.hasCanvasSupport()){var t=ASSET_URL+"img/unsupported.jpg";return this.createBigImage(t),!1}return!0},hasCanvasSupport:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},checkCookies:function(){if(!this.cookiesEnabled()){var t=ASSET_URL+"img/cookies.jpg";this.createBigImage(t)}},cookiesEnabled:function(){var t=!!navigator.cookieEnabled;return"undefined"!=typeof navigator.cookieEnabled||t||(document.cookie="testcookie",t=document.cookie.indexOf("testcookie")!=-1),t},createBigImage2:function(t){var e=document.createElement("div");e.style.backgroundPosition="50% 50%",e.style.backgroundColor="#3b3b3b",e.style.backgroundRepeat="no-repeat",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.bottom="0",e.style.right="0",e.style.zIndex=1e5,e.height="100%",e.width="100%",e.style.backgroundImage="url("+t+")",this.domElement.appendChild(e),this.active=!0},createBigImage:function(t){var e=new Image;e.style.backgroundPosition="50% 50%",e.style.backgroundColor="#3b3b3b",e.style.backgroundRepeat="no-repeat",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.bottom="0",e.style.right="0",e.style.zIndex=1e5,e.src=t,this.domElement.appendChild(e),window.onresize=function(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,n=t/750;n>1&&(n=1),e.width=750*n,e.height=500*n,e.style.left=t/2-750*n/2+"px",e.style.top=i/2-500*n/2+"px"},window.onresize(),this.active=!0}},i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e){(window._gsQueue||(window._gsQueue=[])).push(function(){_gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){"use strict";var n=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;for(var i,n,s=r.length;--s>-1;)if(n=this.vars[r[s]])for(i=n.length;--i>-1;)"{self}"===n[i]&&(n=this.vars[r[s]]=n.concat(),n[i]=this);this.vars.tweens instanceof Array&&this.add(this.vars.tweens,0,this.vars.align,this.vars.stagger)},r=["onStartParams","onUpdateParams","onCompleteParams","onReverseCompleteParams","onRepeatParams"],s=[],o=function(t){var e,i={};for(e in t)i[e]=t[e];return i},a=n.prototype=new e;return n.version="1.8.0",a.constructor=n,a.kill()._gc=!1,a.to=function(t,e,n,r){return this.add(new i(t,e,n),r)},a.from=function(t,e,n,r){return this.add(i.from(t,e,n),r)},a.fromTo=function(t,e,n,r,s){return this.add(i.fromTo(t,e,n,r),s)},a.staggerTo=function(t,e,r,s,a,h,l,c){var u=new n({onComplete:h,onCompleteParams:l,onCompleteScope:c});s=s||0;for(var p=0;t.length>p;p++)null!=r.startAt&&(r.startAt=o(r.startAt)),u.add(new i(t[p],e,o(r)),p*s);return this.add(u,a)},a.staggerFrom=function(t,e,i,n,r,s,o,a){return null==i.immediateRender&&(i.immediateRender=!0),i.runBackwards=!0,this.staggerTo(t,e,i,n,r,s,o,a)},a.staggerFromTo=function(t,e,i,n,r,s,o,a,h){return n.startAt=i,i.immediateRender&&(n.immediateRender=!0),this.staggerTo(t,e,n,r,s,o,a,h)},a.call=function(t,e,n,r){return this.add(i.delayedCall(0,t,e,n),r)},a.set=function(t,e,n){return e.immediateRender=!1,this.add(new i(t,0,e),n)},n.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var r=new n(t),s=r._timeline;null==e&&(e=!0),s._remove(r,!0),r._startTime=0,r._rawPrevTime=r._time=r._totalTime=s._time;for(var o,a=s._first;a;)o=a._next,e&&a instanceof i&&a.target===a.vars.onComplete||r.add(a,a._startTime-a._delay),a=o;return s.add(r,0),r},a.add=function(r,s,o,a){if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,r)),r instanceof t);else{if(r instanceof Array){o=o||"normal",a=a||0;var h,l,c=s,u=r.length;for(h=0;u>h;h++)(l=r[h])instanceof Array&&(l=new n({tweens:l})),this.add(l,c),"string"!=typeof l&&"function"!=typeof l&&("sequence"===o?c=l._startTime+l.totalDuration()/l._timeScale:"start"===o&&(l._startTime-=l.delay())),c+=a;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,s);if("function"!=typeof r)throw"Cannot add "+r+" into the TimelineLite/Max: it is neither a tween, timeline, function, nor a String.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,s),this._gc&&!this._paused&&this._time===this._duration&&this._time<this.duration())for(var p=this;p._gc&&p._timeline;)p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._enabled(!0,!1),p=p._timeline;return this},a.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},a.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},a.insert=a.insertMultiple=function(t,e,i,n){return this.add(t,e||0,i,n)},a.appendMultiple=function(t,e,i,n){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,n)},a.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},a.removeLabel=function(t){return delete this._labels[t],this},a.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},a._parseTimeOrLabel=function(e,i,n,r){var s;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r instanceof Array)for(s=r.length;--s>-1;)r[s]instanceof t&&r[s].timeline===this&&this.remove(r[s]);if("string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,n);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(s=e.indexOf("="),-1===s)return null==this._labels[e]?n?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,n):this.duration()}return Number(e)+i},a.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},a.stop=function(){return this.paused(!0)},a.gotoAndPlay=function(t,i){return e.prototype.play.call(this,t,i)},a.gotoAndStop=function(t,e){return this.pause(t,e)},a.render=function(t,e,i){this._gc&&this._enabled(!0,!1),this._active=!this._paused;var n,r,o,a,h=this._dirty?this.totalDuration():this._totalDuration,l=this._time,c=this._startTime,u=this._timeScale,p=this._paused;if(t>=h?(this._totalTime=this._time=h,this._reversed||this._hasPausedChild()||(r=!0,a="onComplete",0===this._duration&&(0===t||0>this._rawPrevTime)&&this._rawPrevTime!==t&&(i=!0)),this._rawPrevTime=t,t=h+1e-6):0>=t?(this._totalTime=this._time=0,(0!==l||0===this._duration&&this._rawPrevTime>0)&&(a="onReverseComplete",r=this._reversed),0>t?(this._active=!1,0===this._duration&&this._rawPrevTime>=0&&(i=!0)):this._initted||(i=!0),this._rawPrevTime=t,t=-1e-6):this._totalTime=this._time=this._rawPrevTime=t,this._time!==l||i){if(this._initted||(this._initted=!0),0===l&&this.vars.onStart&&0!==this._time&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||s)),this._time>l)for(n=this._first;n&&(o=n._next,!this._paused||p);)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,!1):n.render((t-n._startTime)*n._timeScale,e,!1)),n=o;else for(n=this._last;n&&(o=n._prev,!this._paused||p);)(n._active||l>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,!1):n.render((t-n._startTime)*n._timeScale,e,!1)),n=o;this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s)),a&&(this._gc||(c===this._startTime||u!=this._timeScale)&&(0===this._time||h>=this.totalDuration())&&(r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),e||this.vars[a]&&this.vars[a].apply(this.vars[a+"Scope"]||this,this.vars[a+"Params"]||s)))}},a._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof n&&t._hasPausedChild())return!0;t=t._next}return!1},a.getChildren=function(t,e,n,r){r=r||-9999999999;for(var s=[],o=this._first,a=0;o;)r>o._startTime||(o instanceof i?e!==!1&&(s[a++]=o):(n!==!1&&(s[a++]=o),t!==!1&&(s=s.concat(o.getChildren(!0,e,n)),a=s.length))),o=o._next;return s},a.getTweensOf=function(t,e){for(var n=i.getTweensOf(t),r=n.length,s=[],o=0;--r>-1;)(n[r].timeline===this||e&&this._contains(n[r]))&&(s[o++]=n[r]);return s},a._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},a.shiftChildren=function(t,e,i){i=i||0;for(var n=this._first;n;)n._startTime>=i&&(n._startTime+=t),n=n._next;if(e)for(var r in this._labels)this._labels[r]>=i&&(this._labels[r]+=t);return this._uncache(!0)},a._kill=function(t,e){if(null==t&&null==e)return this._enabled(!1,!1);for(var i=null==e?this.getChildren(!0,!0,!1):this.getTweensOf(e),n=i.length,r=!1;--n>-1;)i[n]._kill(t,e)&&(r=!0);return r},a.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},a.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return this},a._enabled=function(t,i){if(t===this._gc)for(var n=this._first;n;)n._enabled(t,!0),n=n._next;return e.prototype._enabled.call(this,t,i)},a.progress=function(t){return arguments.length?this.totalTime(this.duration()*t,!1):this._time/this.duration()},a.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},a.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,n=0,r=this._first,s=-999999999999;r;)e=r._next,s>r._startTime&&this._sortChildren?this.add(r,r._startTime-r._delay):s=r._startTime,0>r._startTime&&(n-=r._startTime,this.shiftChildren(-r._startTime,!1,-9999999999)),i=r._startTime+(r._dirty?r.totalDuration():r._totalDuration)/r._timeScale,i>n&&(n=i),r=e;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},a.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},a.rawTime=function(){return this._paused||0!==this._totalTime&&this._totalTime!==this._totalDuration?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},n},!0)}),window._gsDefine&&_gsQueue.pop()()},function(t,e,i){var n,r;(function(i){var s="undefined"!=typeof t&&t.exports&&"undefined"!=typeof i?i:this||window;(s._gsQueue||(s._gsQueue=[])).push(function(){"use strict";s._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},r=function(t,e,n){i.call(this,t,e,n),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=r.prototype.render},s=1e-10,o=i._internals,a=o.isSelector,h=o.isArray,l=r.prototype=i.to({},.1,{}),c=[];r.version="1.17.0",l.constructor=r,l.kill()._gc=!1,r.killTweensOf=r.killDelayedCallsTo=i.killTweensOf,r.getTweensOf=i.getTweensOf,r.lagSmoothing=i.lagSmoothing,r.ticker=i.ticker,r.render=i.render,l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},l.updateTo=function(t,e){var n,r=this.ratio,s=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(n in t)this.vars[n]=t[n];if(this._initted||s)if(e)this._initted=!1,s&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._time;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._time>0||s){this._initted=!1,this._init();for(var a,h=1/(1-r),l=this._firstPT;l;)a=l.s+l.c,l.c*=h,l.s=a-l.c,l=l._next}return this},l.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,r,a,h,l,c,u,p,d=this._dirty?this.totalDuration():this._totalDuration,f=this._time,m=this._totalTime,g=this._cycle,v=this._duration,y=this._rawPrevTime;if(t>=d?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(n=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===v&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>y||y===s)&&y!==t&&(i=!0,y>s&&(r="onReverseComplete")),this._rawPrevTime=p=!e||t||y===t?t:s)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===v&&y>0)&&(r="onReverseComplete",n=this._reversed),0>t&&(this._active=!1,0===v&&(this._initted||!this.vars.lazy||i)&&(y>=0&&(i=!0),this._rawPrevTime=p=!e||t||y===t?t:s)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(h=v+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=v-this._time),this._time>v?this._time=v:0>this._time&&(this._time=0)),this._easeType?(l=this._time/v,c=this._easeType,u=this._easePower,(1===c||3===c&&l>=.5)&&(l=1-l),3===c&&(l*=2),1===u?l*=l:2===u?l*=l*l:3===u?l*=l*l*l:4===u&&(l*=l*l*l*l),this.ratio=1===c?1-l:2===c?l:.5>this._time/v?l/2:1-l/2):this.ratio=this._ease.getRatio(this._time/v)),f===this._time&&!i&&g===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=f,this._totalTime=m,this._rawPrevTime=y,this._cycle=g,o.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/v):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==f&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===v)&&(e||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==m||n)&&this._callback("onUpdate")),this._cycle!==g&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===v&&this._rawPrevTime===s&&p!==s&&(this._rawPrevTime=0))},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new r(t,e,i)},r.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new r(t,e,n)},r.staggerTo=r.allTo=function(t,e,s,o,l,u,p){o=o||0;var d,f,m,g,v=s.delay||0,y=[],_=function(){s.onComplete&&s.onComplete.apply(s.onCompleteScope||this,arguments),l.apply(p||s.callbackScope||this,u||c)};for(h(t)||("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=n(t))),t=t||[],0>o&&(t=n(t),t.reverse(),o*=-1),d=t.length-1,m=0;d>=m;m++){f={};for(g in s)f[g]=s[g];f.delay=v,m===d&&l&&(f.onComplete=_),y[m]=new r(t[m],e,f),v+=o}return y},r.staggerFrom=r.allFrom=function(t,e,i,n,s,o,a){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,r.staggerTo(t,e,i,n,s,o,a)},r.staggerFromTo=r.allFromTo=function(t,e,i,n,s,o,a,h){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,r.staggerTo(t,e,n,s,o,a,h)},r.delayedCall=function(t,e,i,n,s){return new r(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:s,overwrite:0})},r.set=function(t,e){return new r(t,0,e)},r.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var u=function(t,e){for(var n=[],r=0,s=t._first;s;)s instanceof i?n[r++]=s:(e&&(n[r++]=s),n=n.concat(u(s,e)),r=n.length),s=s._next;return n},p=r.getAllTweens=function(e){return u(t._rootTimeline,e).concat(u(t._rootFramesTimeline,e))};r.killAll=function(t,i,n,r){null==i&&(i=!0),null==n&&(n=!0);var s,o,a,h=p(0!=r),l=h.length,c=i&&n&&r;for(a=0;l>a;a++)o=h[a],(c||o instanceof e||(s=o.target===o.vars.onComplete)&&n||i&&!s)&&(t?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},r.killChildTweensOf=function(t,e){if(null!=t){var s,l,c,u,p,d=o.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=n(t)),h(t))for(u=t.length;--u>-1;)r.killChildTweensOf(t[u],e);else{s=[];for(c in d)for(l=d[c].target.parentNode;l;)l===t&&(s=s.concat(d[c].tweens)),l=l.parentNode;for(p=s.length,u=0;p>u;u++)e&&s[u].totalTime(s[u].totalDuration()),s[u]._enabled(!1,!1)}}};var d=function(t,i,n,r){i=i!==!1,n=n!==!1,r=r!==!1;for(var s,o,a=p(r),h=i&&n&&r,l=a.length;--l>-1;)o=a[l],(h||o instanceof e||(s=o.target===o.vars.onComplete)&&n||i&&!s)&&o.paused(t)};return r.pauseAll=function(t,e,i){d(!0,t,e,i)},r.resumeAll=function(t,e,i){d(!1,t,e,i)},r.globalTimeScale=function(e){var n=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||s,n._startTime=r-(r-n._startTime)*n._timeScale/e,n=t._rootFramesTimeline,r=i.ticker.frame,n._startTime=r-(r-n._startTime)*n._timeScale/e,n._timeScale=t._rootTimeline._timeScale=e,e):n._timeScale},l.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},l.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},r},!0),s._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,n,r=this.vars;for(n in r)i=r[n],l(i)&&-1!==i.join("").indexOf("{self}")&&(r[n]=this._swapSelfInParams(i));l(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=1e-10,o=i._internals,a=n._internals={},h=o.isSelector,l=o.isArray,c=o.lazyTweens,u=o.lazyRender,p=[],d=s._gsDefine.globals,f=function(t){var e,i={};for(e in t)i[e]=t[e];return i},m=a.pauseCallback=function(t,e,i,n){var s,o=t._timeline,a=o._totalTime,h=t._startTime,l=0>t._rawPrevTime||0===t._rawPrevTime&&o._reversed,c=l?0:r,u=l?r:0;if(e||!this._forcingPlayhead){for(o.pause(h),s=t._prev;s&&s._startTime===h;)s._rawPrevTime=u,s=s._prev;for(s=t._next;s&&s._startTime===h;)s._rawPrevTime=c,s=s._next;e&&e.apply(n||o.vars.callbackScope||o,i||p),(this._forcingPlayhead||!o._paused)&&o.seek(a)}},g=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},v=n.prototype=new e;return n.version="1.17.0",v.constructor=n,v.kill()._gc=v._forcingPlayhead=!1,v.to=function(t,e,n,r){var s=n.repeat&&d.TweenMax||i;return e?this.add(new s(t,e,n),r):this.set(t,n,r)},v.from=function(t,e,n,r){return this.add((n.repeat&&d.TweenMax||i).from(t,e,n),r)},v.fromTo=function(t,e,n,r,s){var o=r.repeat&&d.TweenMax||i;return e?this.add(o.fromTo(t,e,n,r),s):this.set(t,r,s)},v.staggerTo=function(t,e,r,s,o,a,l,c){var u,p=new n({onComplete:a,onCompleteParams:l,callbackScope:c,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],h(t)&&(t=g(t)),s=s||0,0>s&&(t=g(t),t.reverse(),s*=-1),u=0;t.length>u;u++)r.startAt&&(r.startAt=f(r.startAt)),p.to(t[u],e,f(r),u*s);return this.add(p,o)},v.staggerFrom=function(t,e,i,n,r,s,o,a){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,n,r,s,o,a)},v.staggerFromTo=function(t,e,i,n,r,s,o,a,h){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,n,r,s,o,a,h)},v.call=function(t,e,n,r){return this.add(i.delayedCall(0,t,e,n),r)},v.set=function(t,e,n){return n=this._parseTimeOrLabel(n,0,!0),null==e.immediateRender&&(e.immediateRender=n===this._time&&!this._paused),this.add(new i(t,0,e),n)},n.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var r,s,o=new n(t),a=o._timeline;for(null==e&&(e=!0),a._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=a._time,r=a._first;r;)s=r._next,e&&r instanceof i&&r.target===r.vars.onComplete||o.add(r,r._startTime-r._delay),r=s;return a.add(o,0),o},v.add=function(r,s,o,a){var h,c,u,p,d,f;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&l(r)){for(o=o||"normal",a=a||0,h=s,c=r.length,u=0;c>u;u++)l(p=r[u])&&(p=new n({tweens:p})),this.add(p,h),"string"!=typeof p&&"function"!=typeof p&&("sequence"===o?h=p._startTime+p.totalDuration()/p._timeScale:"start"===o&&(p._startTime-=p.delay())),h+=a;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,s);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,s),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(d=this,f=d.rawTime()>r._startTime;d._timeline;)f&&d._timeline.smoothChildTiming?d.totalTime(d._totalTime,!0):d._gc&&d._enabled(!0,!1),
d=d._timeline;return this},v.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&l(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},v._remove=function(t,i){e.prototype._remove.call(this,t,i);var n=this._last;return n?this._time>n._startTime+n._totalDuration/n._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},v.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},v.insert=v.insertMultiple=function(t,e,i,n){return this.add(t,e||0,i,n)},v.appendMultiple=function(t,e,i,n){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,n)},v.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},v.addPause=function(t,e,n,r){var s=i.delayedCall(0,m,["{self}",e,n,r],this);return s.data="isPause",this.add(s,t)},v.removeLabel=function(t){return delete this._labels[t],this},v.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},v._parseTimeOrLabel=function(e,i,n,r){var s;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&l(r)))for(s=r.length;--s>-1;)r[s]instanceof t&&r[s].timeline===this&&this.remove(r[s]);if("string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,n);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(s=e.indexOf("="),-1===s)return null==this._labels[e]?n?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,n):this.duration()}return Number(e)+i},v.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},v.stop=function(){return this.paused(!0)},v.gotoAndPlay=function(t,e){return this.play(t,e)},v.gotoAndStop=function(t,e){return this.pause(t,e)},v.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,s,o,a,h,l=this._dirty?this.totalDuration():this._totalDuration,p=this._time,d=this._startTime,f=this._timeScale,m=this._paused;if(t>=l)this._totalTime=this._time=l,this._reversed||this._hasPausedChild()||(s=!0,a="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===r)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>r&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=l+1e-4;else if(1e-7>t)if(this._totalTime=this._time=0,(0!==p||0===this._duration&&this._rawPrevTime!==r&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(a="onReverseComplete",s=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=s=!0,a="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,0===t&&s)for(n=this._first;n&&0===n._startTime;)n._duration||(s=!1),n=n._next;t=0,this._initted||(h=!0)}else this._totalTime=this._time=this._rawPrevTime=t;if(this._time!==p&&this._first||i||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&t>0&&(this._active=!0),0===p&&this.vars.onStart&&0!==this._time&&(e||this._callback("onStart")),this._time>=p)for(n=this._first;n&&(o=n._next,!this._paused||m);)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=o;else for(n=this._last;n&&(o=n._prev,!this._paused||m);)(n._active||p>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=o;this._onUpdate&&(e||(c.length&&u(),this._callback("onUpdate"))),a&&(this._gc||(d===this._startTime||f!==this._timeScale)&&(0===this._time||l>=this.totalDuration())&&(s&&(c.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this._callback(a)))}},v._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof n&&t._hasPausedChild())return!0;t=t._next}return!1},v.getChildren=function(t,e,n,r){r=r||-9999999999;for(var s=[],o=this._first,a=0;o;)r>o._startTime||(o instanceof i?e!==!1&&(s[a++]=o):(n!==!1&&(s[a++]=o),t!==!1&&(s=s.concat(o.getChildren(!0,e,n)),a=s.length))),o=o._next;return s},v.getTweensOf=function(t,e){var n,r,s=this._gc,o=[],a=0;for(s&&this._enabled(!0,!0),n=i.getTweensOf(t),r=n.length;--r>-1;)(n[r].timeline===this||e&&this._contains(n[r]))&&(o[a++]=n[r]);return s&&this._enabled(!1,!0),o},v.recent=function(){return this._recent},v._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},v.shiftChildren=function(t,e,i){i=i||0;for(var n,r=this._first,s=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(n in s)s[n]>=i&&(s[n]+=t);return this._uncache(!0)},v._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),n=i.length,r=!1;--n>-1;)i[n]._kill(t,e)&&(r=!0);return r},v.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},v.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},v._enabled=function(t,i){if(t===this._gc)for(var n=this._first;n;)n._enabled(t,!0),n=n._next;return e.prototype._enabled.call(this,t,i)},v.totalTime=function(){this._forcingPlayhead=!0;var e=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,e},v.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},v.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,n=0,r=this._last,s=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>s&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):s=r._startTime,0>r._startTime&&!r._paused&&(n-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),s=0),i=r._startTime+r._totalDuration/r._timeScale,i>n&&(n=i),r=e;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},v.paused=function(e){if(!e)for(var i=this._first,n=this._time;i;)i._startTime===n&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},v.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},v.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},n},!0),s._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var n=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},r=1e-10,s=e._internals,o=s.lazyTweens,a=s.lazyRender,h=new i(null,null,1,0),l=n.prototype=new t;return l.constructor=n,l.kill()._gc=!1,n.version="1.17.0",l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},l.addCallback=function(t,i,n,r){return this.add(e.delayedCall(0,t,n,r),i)},l.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),n=i.length,r=this._parseTimeOrLabel(e);--n>-1;)i[n]._startTime===r&&i[n]._enabled(!1,!1);return this},l.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},l.tweenTo=function(t,i){i=i||{};var n,r,s,o={ease:h,useFrames:this.usesFrames(),immediateRender:!1};for(r in i)o[r]=i[r];return o.time=this._parseTimeOrLabel(t),n=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,s=new e(this,n,o),o.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&n===s.duration()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),i.onStart&&s._callback("onStart")},s},l.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=i.immediateRender!==!1;var n=this.tweenTo(e,i);return n.duration(Math.abs(n.vars.time-t)/this._timeScale||.001)},l.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,s,h,l,c,u,p=this._dirty?this.totalDuration():this._totalDuration,d=this._duration,f=this._time,m=this._totalTime,g=this._startTime,v=this._timeScale,y=this._rawPrevTime,_=this._paused,x=this._cycle;if(t>=p)this._locked||(this._totalTime=p,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(s=!0,l="onComplete",c=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>y||y===r)&&y!==t&&this._first&&(c=!0,y>r&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=d,t=d+1e-4);else if(1e-7>t)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==f||0===d&&y!==r&&(y>0||0>t&&y>=0)&&!this._locked)&&(l="onReverseComplete",s=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(c=s=!0,l="onReverseComplete"):y>=0&&this._first&&(c=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=d||!e||t||this._rawPrevTime===t?t:r,0===t&&s)for(n=this._first;n&&0===n._startTime;)n._duration||(s=!1),n=n._next;t=0,this._initted||(c=!0)}else 0===d&&0>y&&(c=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(u=d+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=d-this._time),this._time>d?(this._time=d,t=d+1e-4):0>this._time?this._time=t=0:t=this._time));if(this._cycle!==x&&!this._locked){var b=this._yoyo&&0!==(1&x),w=b===(this._yoyo&&0!==(1&this._cycle)),T=this._totalTime,S=this._cycle,E=this._rawPrevTime,C=this._time;if(this._totalTime=x*d,x>this._cycle?b=!b:this._totalTime+=d,this._time=f,this._rawPrevTime=0===d?y-1e-4:y,this._cycle=x,this._locked=!0,f=b?0:d,this.render(f,e,0===d),e||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),w&&(f=b?d+1e-4:-1e-4,this.render(f,!0,!1)),this._locked=!1,this._paused&&!_)return;this._time=C,this._totalTime=T,this._cycle=S,this._rawPrevTime=E}if(!(this._time!==f&&this._first||i||c))return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&t>0&&(this._active=!0),0===m&&this.vars.onStart&&0!==this._totalTime&&(e||this._callback("onStart")),this._time>=f)for(n=this._first;n&&(h=n._next,!this._paused||_);)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=h;else for(n=this._last;n&&(h=n._prev,!this._paused||_);)(n._active||f>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=h;this._onUpdate&&(e||(o.length&&a(),this._callback("onUpdate"))),l&&(this._locked||this._gc||(g===this._startTime||v!==this._timeScale)&&(0===this._time||p>=this.totalDuration())&&(s&&(o.length&&a(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))},l.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var n,r,s=[],o=this.getChildren(t,e,i),a=0,h=o.length;for(n=0;h>n;n++)r=o[n],r.isActive()&&(s[a++]=r);return s},l.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),n=i.length;for(e=0;n>e;e++)if(i[e].time>t)return i[e].name;return null},l.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},l.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},l.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},l.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},l.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},l.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},n},!0),function(){var t=180/Math.PI,e=[],i=[],n=[],r={},o=s._gsDefine.globals,a=function(t,e,i,n){this.a=t,this.b=e,this.c=i,this.d=n,this.da=n-t,this.ca=i-t,this.ba=e-t},h=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",l=function(t,e,i,n){var r={a:t},s={},o={},a={c:n},h=(t+e)/2,l=(e+i)/2,c=(i+n)/2,u=(h+l)/2,p=(l+c)/2,d=(p-u)/8;return r.b=h+(t-h)/4,s.b=u+d,r.c=s.a=(r.b+s.b)/2,s.c=o.a=(u+p)/2,o.b=p-d,a.b=c+(n-c)/4,o.c=a.a=(o.b+a.b)/2,[r,s,o,a]},c=function(t,r,s,o,a){var h,c,u,p,d,f,m,g,v,y,_,x,b,w=t.length-1,T=0,S=t[0].a;for(h=0;w>h;h++)d=t[T],c=d.a,u=d.d,p=t[T+1].d,a?(_=e[h],x=i[h],b=.25*(x+_)*r/(o?.5:n[h]||.5),f=u-(u-c)*(o?.5*r:0!==_?b/_:0),m=u+(p-u)*(o?.5*r:0!==x?b/x:0),g=u-(f+((m-f)*(3*_/(_+x)+.5)/4||0))):(f=u-.5*(u-c)*r,m=u+.5*(p-u)*r,g=u-(f+m)/2),f+=g,m+=g,d.c=v=f,d.b=0!==h?S:S=d.a+.6*(d.c-d.a),d.da=u-c,d.ca=v-c,d.ba=S-c,s?(y=l(c,S,v,u),t.splice(T,1,y[0],y[1],y[2],y[3]),T+=4):T++,S=m;d=t[T],d.b=S,d.c=S+.4*(d.d-S),d.da=d.d-d.a,d.ca=d.c-d.a,d.ba=S-d.a,s&&(y=l(d.a,S,d.c,d.d),t.splice(T,1,y[0],y[1],y[2],y[3]))},u=function(t,n,r,s){var o,h,l,c,u,p,d=[];if(s)for(t=[s].concat(t),h=t.length;--h>-1;)"string"==typeof(p=t[h][n])&&"="===p.charAt(1)&&(t[h][n]=s[n]+Number(p.charAt(0)+p.substr(2)));if(o=t.length-2,0>o)return d[0]=new a(t[0][n],0,0,t[-1>o?0:1][n]),d;for(h=0;o>h;h++)l=t[h][n],c=t[h+1][n],d[h]=new a(l,0,0,c),r&&(u=t[h+2][n],e[h]=(e[h]||0)+(c-l)*(c-l),i[h]=(i[h]||0)+(u-c)*(u-c));return d[h]=new a(t[h][n],0,0,t[h+1][n]),d},p=function(t,s,o,a,l,p){var d,f,m,g,v,y,_,x,b={},w=[],T=p||t[0];l="string"==typeof l?","+l+",":h,null==s&&(s=1);for(f in t[0])w.push(f);if(t.length>1){for(x=t[t.length-1],_=!0,d=w.length;--d>-1;)if(f=w[d],Math.abs(T[f]-x[f])>.05){_=!1;break}_&&(t=t.concat(),p&&t.unshift(p),t.push(t[1]),p=t[t.length-3])}for(e.length=i.length=n.length=0,d=w.length;--d>-1;)f=w[d],r[f]=-1!==l.indexOf(","+f+","),b[f]=u(t,f,r[f],p);for(d=e.length;--d>-1;)e[d]=Math.sqrt(e[d]),i[d]=Math.sqrt(i[d]);if(!a){for(d=w.length;--d>-1;)if(r[f])for(m=b[w[d]],y=m.length-1,g=0;y>g;g++)v=m[g+1].da/i[g]+m[g].da/e[g],n[g]=(n[g]||0)+v*v;for(d=n.length;--d>-1;)n[d]=Math.sqrt(n[d])}for(d=w.length,g=o?4:1;--d>-1;)f=w[d],m=b[f],c(m,s,o,a,r[f]),_&&(m.splice(0,g),m.splice(m.length-g,g));return b},d=function(t,e,i){e=e||"soft";var n,r,s,o,h,l,c,u,p,d,f,m={},g="cubic"===e?3:2,v="soft"===e,y=[];if(v&&i&&(t=[i].concat(t)),null==t||g+1>t.length)throw"invalid Bezier data";for(p in t[0])y.push(p);for(l=y.length;--l>-1;){for(p=y[l],m[p]=h=[],d=0,u=t.length,c=0;u>c;c++)n=null==i?t[c][p]:"string"==typeof(f=t[c][p])&&"="===f.charAt(1)?i[p]+Number(f.charAt(0)+f.substr(2)):Number(f),v&&c>1&&u-1>c&&(h[d++]=(n+h[d-2])/2),h[d++]=n;for(u=d-g+1,d=0,c=0;u>c;c+=g)n=h[c],r=h[c+1],s=h[c+2],o=2===g?0:h[c+3],h[d++]=f=3===g?new a(n,r,s,o):new a(n,(2*r+n)/3,(2*r+s)/3,s);h.length=d}return m},f=function(t,e,i){for(var n,r,s,o,a,h,l,c,u,p,d,f=1/i,m=t.length;--m>-1;)for(p=t[m],s=p.a,o=p.d-s,a=p.c-s,h=p.b-s,n=r=0,c=1;i>=c;c++)l=f*c,u=1-l,n=r-(r=(l*l*o+3*u*(l*a+u*h))*l),d=m*i+c-1,e[d]=(e[d]||0)+n*n},m=function(t,e){e=e>>0||6;var i,n,r,s,o=[],a=[],h=0,l=0,c=e-1,u=[],p=[];for(i in t)f(t[i],o,e);for(r=o.length,n=0;r>n;n++)h+=Math.sqrt(o[n]),s=n%e,p[s]=h,s===c&&(l+=h,s=n/e>>0,u[s]=p,a[s]=l,h=0,p=[]);return{length:l,lengths:a,segments:u}},g=s._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var n,r,s,o,a,h=e.values||[],l={},c=h[0],u=e.autoRotate||i.vars.orientToBezier;this._autoRotate=u?u instanceof Array?u:[["x","y","rotation",u===!0?0:Number(u)||0]]:null;for(n in c)this._props.push(n);for(s=this._props.length;--s>-1;)n=this._props[s],this._overwriteProps.push(n),r=this._func[n]="function"==typeof t[n],l[n]=r?t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(t[n]),a||l[n]!==h[0][n]&&(a=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?p(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):d(h,e.type,l),this._segCount=this._beziers[n].length,this._timeRes){var f=m(this._beziers,this._timeRes);this._length=f.length,this._lengths=f.lengths,this._segments=f.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(u=this._autoRotate)for(this._initialRotations=[],u[0]instanceof Array||(this._autoRotate=u=[u]),s=u.length;--s>-1;){for(o=0;3>o;o++)n=u[s][o],this._func[n]="function"==typeof t[n]&&t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)];n=u[s][2],this._initialRotations[s]=this._func[n]?this._func[n].call(this._target):this._target[n]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,n,r,s,o,a,h,l,c,u,p=this._segCount,d=this._func,f=this._target,m=e!==this._startRatio;if(this._timeRes){if(c=this._lengths,u=this._curSeg,e*=this._length,r=this._li,e>this._l2&&p-1>r){for(l=p-1;l>r&&e>=(this._l2=c[++r]););this._l1=c[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0]}else if(this._l1>e&&r>0){for(;r>0&&(this._l1=c[--r])>=e;);0===r&&this._l1>e?this._l1=0:r++,this._l2=c[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=r,e-=this._l1,r=this._si,e>this._s2&&u.length-1>r){for(l=u.length-1;l>r&&e>=(this._s2=u[++r]););this._s1=u[r-1],this._si=r}else if(this._s1>e&&r>0){for(;r>0&&(this._s1=u[--r])>=e;);0===r&&this._s1>e?this._s1=0:r++,this._s2=u[r],this._si=r}a=(r+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?p-1:p*e>>0,a=(e-i*(1/p))*p;for(n=1-a,r=this._props.length;--r>-1;)s=this._props[r],o=this._beziers[s][i],h=(a*a*o.da+3*n*(a*o.ca+n*o.ba))*a+o.a,this._round[s]&&(h=Math.round(h)),d[s]?f[s](h):f[s]=h;if(this._autoRotate){var g,v,y,_,x,b,w,T=this._autoRotate;for(r=T.length;--r>-1;)s=T[r][2],b=T[r][3]||0,w=T[r][4]===!0?1:t,o=this._beziers[T[r][0]],g=this._beziers[T[r][1]],o&&g&&(o=o[i],g=g[i],v=o.a+(o.b-o.a)*a,_=o.b+(o.c-o.b)*a,v+=(_-v)*a,_+=(o.c+(o.d-o.c)*a-_)*a,y=g.a+(g.b-g.a)*a,x=g.b+(g.c-g.b)*a,y+=(x-y)*a,x+=(g.c+(g.d-g.c)*a-x)*a,h=m?Math.atan2(x-y,_-v)*w+b:this._initialRotations[r],d[s]?f[s](h):f[s]=h)}}}),v=g.prototype;g.bezierThrough=p,g.cubicToQuadratic=l,g._autoCSS=!0,g.quadraticToCubic=function(t,e,i){return new a(t,(2*e+t)/3,(2*e+i)/3,i)},g._cssRegister=function(){var t=o.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,n=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,s,o,a,h){e instanceof Array&&(e={values:e}),h=new g;var l,c,u,p=e.values,d=p.length-1,f=[],m={};if(0>d)return a;for(l=0;d>=l;l++)u=i(t,p[l],o,a,h,d!==l),f[l]=u.end;for(c in e)m[c]=e[c];return m.values=f,a=new r(t,"bezier",0,0,u.pt,2),a.data=u,a.plugin=h,a.setRatio=n,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(l=m.autoRotate===!0?0:Number(m.autoRotate),m.autoRotate=null!=u.end.left?[["left","top","rotation",l,!1]]:null!=u.end.x&&[["x","y","rotation",l,!1]]),m.autoRotate&&(o._transform||o._enableTransforms(!1),u.autoRotate=o._target._gsTransform),h._onInitTween(u.proxy,m,o._tween),a}})}},v._roundProps=function(t,e){for(var i=this._overwriteProps,n=i.length;--n>-1;)(t[i[n]]||t.bezier||t.bezierThrough)&&(this._round[i[n]]=e)},v._kill=function(t){var e,i,n=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=n.length;--i>-1;)n[i]===e&&n.splice(i,1);return this._super._kill.call(this,t)}}(),s._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,n,r,o,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},h=s._gsDefine.globals,l={},c=a.prototype=new t("css");c.constructor=a,a.version="1.17.0",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,c="px",a.suffixMap={top:c,right:c,bottom:c,left:c,width:c,height:c,fontSize:c,padding:c,margin:c,perspective:c,lineHeight:""};var u,p,d,f,m,g,v=/(?:\d|\-\d|\.\d|\-\.\d)+/g,y=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,_=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,x=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,b=/(?:\d|\-|\+|=|#|\.)*/g,w=/opacity *= *([^)]*)/i,T=/opacity:([^;]*)/i,S=/alpha\(opacity *=.+?\)/i,E=/^(rgb|hsl)/,C=/([A-Z])/g,M=/-([a-z])/gi,P=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,A=function(t,e){return e.toUpperCase()},I=/(?:Left|Right|Width)/i,O=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,R=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,k=/,(?=[^\)]*(?:\(|$))/gi,D=Math.PI/180,L=180/Math.PI,B={},F=document,N=function(t){return F.createElementNS?F.createElementNS("http://www.w3.org/1999/xhtml",t):F.createElement(t)},U=N("div"),G=N("img"),j=a._internals={_specialProps:l},X=navigator.userAgent,H=function(){var t=X.indexOf("Android"),e=N("a");return d=-1!==X.indexOf("Safari")&&-1===X.indexOf("Chrome")&&(-1===t||Number(X.substr(t+8,1))>3),m=d&&6>Number(X.substr(X.indexOf("Version/")+8,1)),f=-1!==X.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(X)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(X))&&(g=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),Y=function(t){return w.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},W=function(t){window.console&&void 0},V="",z="",q=function(t,e){e=e||U;var i,n,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;--n>-1&&void 0===r[i[n]+t];);return n>=0?(z=3===n?"ms":i[n],V="-"+z.toLowerCase()+"-",z+t):null},K=F.defaultView?F.defaultView.getComputedStyle:function(){},Z=a.getStyle=function(t,e,i,n,r){var s;return H||"opacity"!==e?(!n&&t.style[e]?s=t.style[e]:(i=i||K(t))?s=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(C,"-$1").toLowerCase()):t.currentStyle&&(s=t.currentStyle[e]),null==r||s&&"none"!==s&&"auto"!==s&&"auto auto"!==s?s:r):Y(t)},J=j.convertToPixels=function(t,i,n,r,s){if("px"===r||!r)return n;if("auto"===r||!n)return 0;var o,h,l,c=I.test(i),u=t,p=U.style,d=0>n;if(d&&(n=-n),"%"===r&&-1!==i.indexOf("border"))o=n/100*(c?t.clientWidth:t.clientHeight);else{if(p.cssText="border:0 solid red;position:"+Z(t,"position")+";line-height:0;","%"!==r&&u.appendChild)p[c?"borderLeftWidth":"borderTopWidth"]=n+r;else{if(u=t.parentNode||F.body,h=u._gsCache,l=e.ticker.frame,h&&c&&h.time===l)return h.width*n/100;p[c?"width":"height"]=n+r}u.appendChild(U),o=parseFloat(U[c?"offsetWidth":"offsetHeight"]),u.removeChild(U),c&&"%"===r&&a.cacheWidths!==!1&&(h=u._gsCache=u._gsCache||{},h.time=l,h.width=100*(o/n)),0!==o||s||(o=J(t,i,n,r,!0))}return d?-o:o},$=j.calculateOffset=function(t,e,i){if("absolute"!==Z(t,"position",i))return 0;var n="left"===e?"Left":"Top",r=Z(t,"margin"+n,i);return t["offset"+n]-(J(t,e,parseFloat(r),r.replace(b,""))||0)},Q=function(t,e){var i,n,r,s={};if(e=e||K(t,null))if(i=e.length)for(;--i>-1;)r=e[i],(-1===r.indexOf("-transform")||Et===r)&&(s[r.replace(M,A)]=e.getPropertyValue(r));else for(i in e)(-1===i.indexOf("Transform")||St===i)&&(s[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===s[i]&&(s[i.replace(M,A)]=e[i]);return H||(s.opacity=Y(t)),n=Ft(t,e,!1),s.rotation=n.rotation,s.skewX=n.skewX,s.scaleX=n.scaleX,s.scaleY=n.scaleY,s.x=n.x,s.y=n.y,Mt&&(s.z=n.z,s.rotationX=n.rotationX,s.rotationY=n.rotationY,s.scaleZ=n.scaleZ),s.filters&&delete s.filters,s},tt=function(t,e,i,n,r){var s,o,a,h={},l=t.style;for(o in i)"cssText"!==o&&"length"!==o&&isNaN(o)&&(e[o]!==(s=i[o])||r&&r[o])&&-1===o.indexOf("Origin")&&("number"==typeof s||"string"==typeof s)&&(h[o]="auto"!==s||"left"!==o&&"top"!==o?""!==s&&"auto"!==s&&"none"!==s||"string"!=typeof e[o]||""===e[o].replace(x,"")?s:0:$(t,o),void 0!==l[o]&&(a=new ft(l,o,l[o],a)));if(n)for(o in n)"className"!==o&&(h[o]=n[o]);return{difs:h,firstMPT:a}},et={width:["Left","Right"],height:["Top","Bottom"]},it=["marginLeft","marginRight","marginTop","marginBottom"],nt=function(t,e,i){var n=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=et[e],s=r.length;for(i=i||K(t,null);--s>-1;)n-=parseFloat(Z(t,"padding"+r[s],i,!0))||0,n-=parseFloat(Z(t,"border"+r[s]+"Width",i,!0))||0;return n},rt=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),n=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],r=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==r?r="center"===n?"50%":"0":"center"===r&&(r="50%"),("center"===n||isNaN(parseFloat(n))&&-1===(n+"").indexOf("="))&&(n="50%"),t=n+" "+r+(i.length>2?" "+i[2]:""),e&&(e.oxp=-1!==n.indexOf("%"),e.oyp=-1!==r.indexOf("%"),e.oxr="="===n.charAt(1),e.oyr="="===r.charAt(1),e.ox=parseFloat(n.replace(x,"")),e.oy=parseFloat(r.replace(x,"")),e.v=t),e||t},st=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},ot=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)},at=function(t,e,i,n){var r,s,o,a,h,l=1e-6;return null==t?a=e:"number"==typeof t?a=t:(r=360,s=t.split("_"),h="="===t.charAt(1),o=(h?parseInt(t.charAt(0)+"1",10)*parseFloat(s[0].substr(2)):parseFloat(s[0]))*(-1===t.indexOf("rad")?1:L)-(h?0:e),s.length&&(n&&(n[i]=e+o),-1!==t.indexOf("short")&&(o%=r,o!==o%(r/2)&&(o=0>o?o+r:o-r)),-1!==t.indexOf("_cw")&&0>o?o=(o+9999999999*r)%r-(0|o/r)*r:-1!==t.indexOf("ccw")&&o>0&&(o=(o-9999999999*r)%r-(0|o/r)*r)),a=e+o),l>a&&a>-l&&(a=0),a},ht={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},lt=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},ct=a.parseColor=function(t){var e,i,n,r,s,o;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ht[t]?ht[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),n=t.charAt(3),t="#"+e+e+i+i+n+n),t=parseInt(t.substr(1),16),[t>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(v),r=Number(t[0])%360/360,s=Number(t[1])/100,o=Number(t[2])/100,i=.5>=o?o*(s+1):o+s-o*s,e=2*o-i,t.length>3&&(t[3]=Number(t[3])),t[0]=lt(r+1/3,e,i),t[1]=lt(r,e,i),t[2]=lt(r-1/3,e,i),t):(t=t.match(v)||ht.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):ht.black},ut="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(c in ht)ut+="|"+c+"\\b";ut=RegExp(ut+")","gi");var pt=function(t,e,i,n){if(null==t)return function(t){return t};var r,s=e?(t.match(ut)||[""])[0]:"",o=t.split(s).join("").match(_)||[],a=t.substr(0,t.indexOf(o[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",c=o.length,u=c>0?o[0].replace(v,""):"";return c?r=e?function(t){var e,p,d,f;if("number"==typeof t)t+=u;else if(n&&k.test(t)){for(f=t.replace(k,"|").split("|"),d=0;f.length>d;d++)f[d]=r(f[d]);return f.join(",")}if(e=(t.match(ut)||[s])[0],p=t.split(e).join("").match(_)||[],d=p.length,c>d--)for(;c>++d;)p[d]=i?p[0|(d-1)/2]:o[d];return a+p.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,s,p;if("number"==typeof t)t+=u;else if(n&&k.test(t)){for(s=t.replace(k,"|").split("|"),p=0;s.length>p;p++)s[p]=r(s[p]);return s.join(",")}if(e=t.match(_)||[],p=e.length,c>p--)for(;c>++p;)e[p]=i?e[0|(p-1)/2]:o[p];return a+e.join(l)+h}:function(t){return t}},dt=function(t){return t=t.split(","),function(e,i,n,r,s,o,a){var h,l=(i+"").split(" ");for(a={},h=0;4>h;h++)a[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return r.parse(e,a,s,o)}},ft=(j._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,n,r,s=this.data,o=s.proxy,a=s.firstMPT,h=1e-6;a;)e=o[a.v],a.r?e=Math.round(e):h>e&&e>-h&&(e=0),a.t[a.p]=e,a=a._next;if(s.autoRotate&&(s.autoRotate.rotation=o.rotation),1===t)for(a=s.firstMPT;a;){if(i=a.t,i.type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,n=1;i.l>n;n++)r+=i["xn"+n]+i["xs"+(n+1)];i.e=r}}else i.e=i.s+i.xs0;a=a._next}},function(t,e,i,n,r){this.t=t,this.p=e,this.v=i,this.r=r,n&&(n._prev=this,this._next=n)}),mt=(j._parseToProxy=function(t,e,i,n,r,s){var o,a,h,l,c,u=n,p={},d={},f=i._transform,m=B;for(i._transform=null,B=e,n=c=i.parse(t,e,n,r),B=m,s&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));n&&n!==u;){if(1>=n.type&&(a=n.p,d[a]=n.s+n.c,p[a]=n.s,s||(l=new ft(n,"s",a,l,n.r),n.c=0),1===n.type))for(o=n.l;--o>0;)h="xn"+o,a=n.p+"_"+h,d[a]=n.data[h],p[a]=n[h],s||(l=new ft(n,h,a,l,n.rxp[h]));n=n._next}return{proxy:p,end:d,firstMPT:l,pt:c}},j.CSSPropTween=function(t,e,n,r,s,a,h,l,c,u,p){this.t=t,this.p=e,this.s=n,this.c=r,this.n=h||e,t instanceof mt||o.push(this.n),this.r=l,this.type=a||0,c&&(this.pr=c,i=!0),this.b=void 0===u?n:u,this.e=void 0===p?n+r:p,s&&(this._next=s,s._prev=this)}),gt=function(t,e,i,n,r,s){var o=new mt(t,e,i,n-i,r,(-1),s);return o.b=i,o.e=o.xs0=n,o},vt=a.parseComplex=function(t,e,i,n,r,s,o,a,h,l){i=i||s||"",o=new mt(t,e,0,0,o,l?2:1,null,(!1),a,i,n),n+="";var c,p,d,f,m,g,_,x,b,w,T,S,C=i.split(", ").join(",").split(" "),M=n.split(", ").join(",").split(" "),P=C.length,A=u!==!1;for((-1!==n.indexOf(",")||-1!==i.indexOf(","))&&(C=C.join(" ").replace(k,", ").split(" "),M=M.join(" ").replace(k,", ").split(" "),P=C.length),P!==M.length&&(C=(s||"").split(" "),P=C.length),o.plugin=h,o.setRatio=l,c=0;P>c;c++)if(f=C[c],m=M[c],x=parseFloat(f),x||0===x)o.appendXtra("",x,st(m,x),m.replace(y,""),A&&-1!==m.indexOf("px"),!0);else if(r&&("#"===f.charAt(0)||ht[f]||E.test(f)))S=","===m.charAt(m.length-1)?"),":")",
f=ct(f),m=ct(m),b=f.length+m.length>6,b&&!H&&0===m[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(M[c]).join("transparent")):(H||(b=!1),o.appendXtra(b?"rgba(":"rgb(",f[0],m[0]-f[0],",",!0,!0).appendXtra("",f[1],m[1]-f[1],",",!0).appendXtra("",f[2],m[2]-f[2],b?",":S,!0),b&&(f=4>f.length?1:f[3],o.appendXtra("",f,(4>m.length?1:m[3])-f,S,!1)));else if(g=f.match(v)){if(_=m.match(y),!_||_.length!==g.length)return o;for(d=0,p=0;g.length>p;p++)T=g[p],w=f.indexOf(T,d),o.appendXtra(f.substr(d,w-d),Number(T),st(_[p],T),"",A&&"px"===f.substr(w+T.length,2),0===p),d=w+T.length;o["xs"+o.l]+=f.substr(d)}else o["xs"+o.l]+=o.l?" "+f:f;if(-1!==n.indexOf("=")&&o.data){for(S=o.xs0+o.data.s,c=1;o.l>c;c++)S+=o["xs"+c]+o.data["xn"+c];o.e=S+o["xs"+c]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},yt=9;for(c=mt.prototype,c.l=c.pr=0;--yt>0;)c["xn"+yt]=0,c["xs"+yt]="";c.xs0="",c._next=c._prev=c.xfirst=c.data=c.plugin=c.setRatio=c.rxp=null,c.appendXtra=function(t,e,i,n,r,s){var o=this,a=o.l;return o["xs"+a]+=s&&a?" "+t:t||"",i||0===a||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=n||"",a>0?(o.data["xn"+a]=e+i,o.rxp["xn"+a]=r,o["xn"+a]=e,o.plugin||(o.xfirst=new mt(o,"xn"+a,e,i,o.xfirst||o,0,o.n,r,o.pr),o.xfirst.xs0=0),o):(o.data={s:e+i},o.rxp={},o.s=e,o.c=i,o.r=r,o)):(o["xs"+a]+=e+(n||""),o)};var _t=function(t,e){e=e||{},this.p=e.prefix?q(t)||t:t,l[t]=l[this.p]=this,this.format=e.formatter||pt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},xt=j._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var n,r,s=t.split(","),o=e.defaultValue;for(i=i||[o],n=0;s.length>n;n++)e.prefix=0===n&&e.prefix,e.defaultValue=i[n]||o,r=new _t(s[n],e)},bt=function(t){if(!l[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";xt(t,{parser:function(t,i,n,r,s,o,a){var c=h.com.greensock.plugins[e];return c?(c._cssRegister(),l[n].parse(t,i,n,r,s,o,a)):(W("Error: "+e+" js file not loaded."),s)}})}};c=_t.prototype,c.parseComplex=function(t,e,i,n,r,s){var o,a,h,l,c,u,p=this.keyword;if(this.multi&&(k.test(i)||k.test(e)?(a=e.replace(k,"|").split("|"),h=i.replace(k,"|").split("|")):p&&(a=[e],h=[i])),h){for(l=h.length>a.length?h.length:a.length,o=0;l>o;o++)e=a[o]=a[o]||this.dflt,i=h[o]=h[o]||this.dflt,p&&(c=e.indexOf(p),u=i.indexOf(p),c!==u&&(-1===u?a[o]=a[o].split(p).join(""):-1===c&&(a[o]+=" "+p)));e=a.join(", "),i=h.join(", ")}return vt(t,this.p,e,i,this.clrs,this.dflt,n,this.pr,r,s)},c.parse=function(t,e,i,n,s,o){return this.parseComplex(t.style,this.format(Z(t,this.p,r,!1,this.dflt)),this.format(e),s,o)},a.registerSpecialProp=function(t,e,i){xt(t,{parser:function(t,n,r,s,o,a){var h=new mt(t,r,0,0,o,2,r,(!1),i);return h.plugin=a,h.setRatio=e(t,n,s._tween,r),h},priority:i})},a.useSVGTransformAttr=d||f;var wt,Tt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),St=q("transform"),Et=V+"transform",Ct=q("transformOrigin"),Mt=null!==q("perspective"),Pt=j.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=!(a.defaultForce3D===!1||!Mt)&&(a.defaultForce3D||"auto")},At=window.SVGElement,It=function(t,e,i){var n,r=F.createElementNS("http://www.w3.org/2000/svg",t),s=/([a-z])([A-Z])/g;for(n in i)r.setAttributeNS(null,n.replace(s,"$1-$2").toLowerCase(),i[n]);return e.appendChild(r),r},Ot=F.documentElement,Rt=function(){var t,e,i,n=g||/Android/i.test(X)&&!window.chrome;return F.createElementNS&&!n&&(t=It("svg",Ot),e=It("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().width,e.style[Ct]="50% 50%",e.style[St]="scaleX(0.5)",n=i===e.getBoundingClientRect().width&&!(f&&Mt),Ot.removeChild(t)),n}(),kt=function(t,e,i,n,r){var s,o,h,l,c,u,p,d,f,m,g,v,y,_,x=t._gsTransform,b=Bt(t,!0);x&&(y=x.xOrigin,_=x.yOrigin),(!n||2>(s=n.split(" ")).length)&&(p=t.getBBox(),e=rt(e).split(" "),s=[(-1!==e[0].indexOf("%")?parseFloat(e[0])/100*p.width:parseFloat(e[0]))+p.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*p.height:parseFloat(e[1]))+p.y]),i.xOrigin=l=parseFloat(s[0]),i.yOrigin=c=parseFloat(s[1]),n&&b!==Lt&&(u=b[0],p=b[1],d=b[2],f=b[3],m=b[4],g=b[5],v=u*f-p*d,o=l*(f/v)+c*(-d/v)+(d*g-f*m)/v,h=l*(-p/v)+c*(u/v)-(u*g-p*m)/v,l=i.xOrigin=s[0]=o,c=i.yOrigin=s[1]=h),x&&(r||r!==!1&&a.defaultSmoothOrigin!==!1?(o=l-y,h=c-_,x.xOffset+=o*b[0]+h*b[2]-o,x.yOffset+=o*b[1]+h*b[3]-h):x.xOffset=x.yOffset=0),t.setAttribute("data-svg-origin",s.join(" "))},Dt=function(t){return!!(At&&"function"==typeof t.getBBox&&t.getCTM&&(!t.parentNode||t.parentNode.getBBox&&t.parentNode.getCTM))},Lt=[1,0,0,1,0,0],Bt=function(t,e){var i,n,r,s,o,a=t._gsTransform||new Pt,h=1e5;if(St?n=Z(t,Et,null,!0):t.currentStyle&&(n=t.currentStyle.filter.match(O),n=n&&4===n.length?[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),a.x||0,a.y||0].join(","):""),i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,(a.svg||t.getBBox&&Dt(t))&&(i&&-1!==(t.style[St]+"").indexOf("matrix")&&(n=t.style[St],i=0),r=t.getAttribute("transform"),i&&r&&(-1!==r.indexOf("matrix")?(n=r,i=0):-1!==r.indexOf("translate")&&(n="matrix(1,0,0,1,"+r.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return Lt;for(r=(n||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],yt=r.length;--yt>-1;)s=Number(r[yt]),r[yt]=(o=s-(s|=0))?(0|o*h+(0>o?-.5:.5))/h+s:s;return e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},Ft=j.getTransform=function(t,i,n,s){if(t._gsTransform&&n&&!s)return t._gsTransform;var o,h,l,c,u,p,d=n?t._gsTransform||new Pt:new Pt,f=0>d.scaleX,m=2e-5,g=1e5,v=Mt?parseFloat(Z(t,Ct,i,!1,"0 0 0").split(" ")[2])||d.zOrigin||0:0,y=parseFloat(a.defaultTransformPerspective)||0;if(d.svg=!(!t.getBBox||!Dt(t)),d.svg&&(kt(t,Z(t,Ct,r,!1,"50% 50%")+"",d,t.getAttribute("data-svg-origin")),wt=a.useSVGTransformAttr||Rt),o=Bt(t),o!==Lt){if(16===o.length){var _,x,b,w,T,S=o[0],E=o[1],C=o[2],M=o[3],P=o[4],A=o[5],I=o[6],O=o[7],R=o[8],k=o[9],D=o[10],B=o[12],F=o[13],N=o[14],U=o[11],G=Math.atan2(I,D);d.zOrigin&&(N=-d.zOrigin,B=R*N-o[12],F=k*N-o[13],N=D*N+d.zOrigin-o[14]),d.rotationX=G*L,G&&(w=Math.cos(-G),T=Math.sin(-G),_=P*w+R*T,x=A*w+k*T,b=I*w+D*T,R=P*-T+R*w,k=A*-T+k*w,D=I*-T+D*w,U=O*-T+U*w,P=_,A=x,I=b),G=Math.atan2(R,D),d.rotationY=G*L,G&&(w=Math.cos(-G),T=Math.sin(-G),_=S*w-R*T,x=E*w-k*T,b=C*w-D*T,k=E*T+k*w,D=C*T+D*w,U=M*T+U*w,S=_,E=x,C=b),G=Math.atan2(E,S),d.rotation=G*L,G&&(w=Math.cos(-G),T=Math.sin(-G),S=S*w+P*T,x=E*w+A*T,A=E*-T+A*w,I=C*-T+I*w,E=x),d.rotationX&&Math.abs(d.rotationX)+Math.abs(d.rotation)>359.9&&(d.rotationX=d.rotation=0,d.rotationY+=180),d.scaleX=(0|Math.sqrt(S*S+E*E)*g+.5)/g,d.scaleY=(0|Math.sqrt(A*A+k*k)*g+.5)/g,d.scaleZ=(0|Math.sqrt(I*I+D*D)*g+.5)/g,d.skewX=0,d.perspective=U?1/(0>U?-U:U):0,d.x=B,d.y=F,d.z=N,d.svg&&(d.x-=d.xOrigin-(d.xOrigin*S-d.yOrigin*P),d.y-=d.yOrigin-(d.yOrigin*E-d.xOrigin*A))}else if(!(Mt&&!s&&o.length&&d.x===o[4]&&d.y===o[5]&&(d.rotationX||d.rotationY)||void 0!==d.x&&"none"===Z(t,"display",i))){var j=o.length>=6,X=j?o[0]:1,H=o[1]||0,Y=o[2]||0,W=j?o[3]:1;d.x=o[4]||0,d.y=o[5]||0,l=Math.sqrt(X*X+H*H),c=Math.sqrt(W*W+Y*Y),u=X||H?Math.atan2(H,X)*L:d.rotation||0,p=Y||W?Math.atan2(Y,W)*L+u:d.skewX||0,Math.abs(p)>90&&270>Math.abs(p)&&(f?(l*=-1,p+=0>=u?180:-180,u+=0>=u?180:-180):(c*=-1,p+=0>=p?180:-180)),d.scaleX=l,d.scaleY=c,d.rotation=u,d.skewX=p,Mt&&(d.rotationX=d.rotationY=d.z=0,d.perspective=y,d.scaleZ=1),d.svg&&(d.x-=d.xOrigin-(d.xOrigin*X+d.yOrigin*Y),d.y-=d.yOrigin-(d.xOrigin*H+d.yOrigin*W))}d.zOrigin=v;for(h in d)m>d[h]&&d[h]>-m&&(d[h]=0)}return n&&(t._gsTransform=d,d.svg&&(wt&&t.style[St]?e.delayedCall(.001,function(){jt(t.style,St)}):!wt&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),d},Nt=function(t){var e,i,n=this.data,r=-n.rotation*D,s=r+n.skewX*D,o=1e5,a=(0|Math.cos(r)*n.scaleX*o)/o,h=(0|Math.sin(r)*n.scaleX*o)/o,l=(0|Math.sin(s)*-n.scaleY*o)/o,c=(0|Math.cos(s)*n.scaleY*o)/o,u=this.t.style,p=this.t.currentStyle;if(p){i=h,h=-l,l=-i,e=p.filter,u.filter="";var d,f,m=this.t.offsetWidth,v=this.t.offsetHeight,y="absolute"!==p.position,_="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+h+", M21="+l+", M22="+c,x=n.x+m*n.xPercent/100,T=n.y+v*n.yPercent/100;if(null!=n.ox&&(d=(n.oxp?.01*m*n.ox:n.ox)-m/2,f=(n.oyp?.01*v*n.oy:n.oy)-v/2,x+=d-(d*a+f*h),T+=f-(d*l+f*c)),y?(d=m/2,f=v/2,_+=", Dx="+(d-(d*a+f*h)+x)+", Dy="+(f-(d*l+f*c)+T)+")"):_+=", sizingMethod='auto expand')",u.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(R,_):_+" "+e,(0===t||1===t)&&1===a&&0===h&&0===l&&1===c&&(y&&-1===_.indexOf("Dx=0, Dy=0")||w.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&u.removeAttribute("filter")),!y){var S,E,C,M=8>g?1:-1;for(d=n.ieOffsetX||0,f=n.ieOffsetY||0,n.ieOffsetX=Math.round((m-((0>a?-a:a)*m+(0>h?-h:h)*v))/2+x),n.ieOffsetY=Math.round((v-((0>c?-c:c)*v+(0>l?-l:l)*m))/2+T),yt=0;4>yt;yt++)E=it[yt],S=p[E],i=-1!==S.indexOf("px")?parseFloat(S):J(this.t,E,parseFloat(S),S.replace(b,""))||0,C=i!==n[E]?2>yt?-n.ieOffsetX:-n.ieOffsetY:2>yt?d-n.ieOffsetX:f-n.ieOffsetY,u[E]=(n[E]=Math.round(i-C*(0===yt||2===yt?1:M)))+"px"}}},Ut=j.set3DTransformRatio=j.setTransformRatio=function(t){var e,i,n,r,s,o,a,h,l,c,u,p,d,m,g,v,y,_,x,b,w,T,S,E=this.data,C=this.t.style,M=E.rotation,P=E.rotationX,A=E.rotationY,I=E.scaleX,O=E.scaleY,R=E.scaleZ,k=E.x,L=E.y,B=E.z,F=E.svg,N=E.perspective,U=E.force3D;if(!((1!==t&&0!==t||"auto"!==U||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&U||B||N||A||P)||wt&&F||!Mt)return void(M||E.skewX||F?(M*=D,T=E.skewX*D,S=1e5,e=Math.cos(M)*I,r=Math.sin(M)*I,i=Math.sin(M-T)*-O,s=Math.cos(M-T)*O,T&&"simple"===E.skewType&&(y=Math.tan(T),y=Math.sqrt(1+y*y),i*=y,s*=y,E.skewY&&(e*=y,r*=y)),F&&(k+=E.xOrigin-(E.xOrigin*e+E.yOrigin*i)+E.xOffset,L+=E.yOrigin-(E.xOrigin*r+E.yOrigin*s)+E.yOffset,wt&&(E.xPercent||E.yPercent)&&(m=this.t.getBBox(),k+=.01*E.xPercent*m.width,L+=.01*E.yPercent*m.height),m=1e-6,m>k&&k>-m&&(k=0),m>L&&L>-m&&(L=0)),x=(0|e*S)/S+","+(0|r*S)/S+","+(0|i*S)/S+","+(0|s*S)/S+","+k+","+L+")",F&&wt?this.t.setAttribute("transform","matrix("+x):C[St]=(E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) matrix(":"matrix(")+x):C[St]=(E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) matrix(":"matrix(")+I+",0,0,"+O+","+k+","+L+")");if(f&&(m=1e-4,m>I&&I>-m&&(I=R=2e-5),m>O&&O>-m&&(O=R=2e-5),!N||E.z||E.rotationX||E.rotationY||(N=0)),M||E.skewX)M*=D,g=e=Math.cos(M),v=r=Math.sin(M),E.skewX&&(M-=E.skewX*D,g=Math.cos(M),v=Math.sin(M),"simple"===E.skewType&&(y=Math.tan(E.skewX*D),y=Math.sqrt(1+y*y),g*=y,v*=y,E.skewY&&(e*=y,r*=y))),i=-v,s=g;else{if(!(A||P||1!==R||N||F))return void(C[St]=(E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) translate3d(":"translate3d(")+k+"px,"+L+"px,"+B+"px)"+(1!==I||1!==O?" scale("+I+","+O+")":""));e=s=1,i=r=0}l=1,n=o=a=h=c=u=0,p=N?-1/N:0,d=E.zOrigin,m=1e-6,b=",",w="0",M=A*D,M&&(g=Math.cos(M),v=Math.sin(M),a=-v,c=p*-v,n=e*v,o=r*v,l=g,p*=g,e*=g,r*=g),M=P*D,M&&(g=Math.cos(M),v=Math.sin(M),y=i*g+n*v,_=s*g+o*v,h=l*v,u=p*v,n=i*-v+n*g,o=s*-v+o*g,l*=g,p*=g,i=y,s=_),1!==R&&(n*=R,o*=R,l*=R,p*=R),1!==O&&(i*=O,s*=O,h*=O,u*=O),1!==I&&(e*=I,r*=I,a*=I,c*=I),(d||F)&&(d&&(k+=n*-d,L+=o*-d,B+=l*-d+d),F&&(k+=E.xOrigin-(E.xOrigin*e+E.yOrigin*i)+E.xOffset,L+=E.yOrigin-(E.xOrigin*r+E.yOrigin*s)+E.yOffset),m>k&&k>-m&&(k=w),m>L&&L>-m&&(L=w),m>B&&B>-m&&(B=0)),x=E.xPercent||E.yPercent?"translate("+E.xPercent+"%,"+E.yPercent+"%) matrix3d(":"matrix3d(",x+=(m>e&&e>-m?w:e)+b+(m>r&&r>-m?w:r)+b+(m>a&&a>-m?w:a),x+=b+(m>c&&c>-m?w:c)+b+(m>i&&i>-m?w:i)+b+(m>s&&s>-m?w:s),P||A?(x+=b+(m>h&&h>-m?w:h)+b+(m>u&&u>-m?w:u)+b+(m>n&&n>-m?w:n),x+=b+(m>o&&o>-m?w:o)+b+(m>l&&l>-m?w:l)+b+(m>p&&p>-m?w:p)+b):x+=",0,0,0,0,1,0,",x+=k+b+L+b+B+b+(N?1+-B/N:1)+")",C[St]=x};c=Pt.prototype,c.x=c.y=c.z=c.skewX=c.skewY=c.rotation=c.rotationX=c.rotationY=c.zOrigin=c.xPercent=c.yPercent=c.xOffset=c.yOffset=0,c.scaleX=c.scaleY=c.scaleZ=1,xt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,n,s,o,h){if(n._lastParsedTransform===h)return s;n._lastParsedTransform=h;var l,c,u,p,d,f,m,g,v,y=t._gsTransform,_=n._transform=Ft(t,r,!0,h.parseTransform),x=t.style,b=1e-6,w=Tt.length,T=h,S={},E="transformOrigin";if("string"==typeof T.transform&&St)u=U.style,u[St]=T.transform,u.display="block",u.position="absolute",F.body.appendChild(U),l=Ft(U,null,!1),F.body.removeChild(U),null!=T.xPercent&&(l.xPercent=ot(T.xPercent,_.xPercent)),null!=T.yPercent&&(l.yPercent=ot(T.yPercent,_.yPercent));else if("object"==typeof T){if(l={scaleX:ot(null!=T.scaleX?T.scaleX:T.scale,_.scaleX),scaleY:ot(null!=T.scaleY?T.scaleY:T.scale,_.scaleY),scaleZ:ot(T.scaleZ,_.scaleZ),x:ot(T.x,_.x),y:ot(T.y,_.y),z:ot(T.z,_.z),xPercent:ot(T.xPercent,_.xPercent),yPercent:ot(T.yPercent,_.yPercent),perspective:ot(T.transformPerspective,_.perspective)},m=T.directionalRotation,null!=m)if("object"==typeof m)for(u in m)T[u]=m[u];else T.rotation=m;"string"==typeof T.x&&-1!==T.x.indexOf("%")&&(l.x=0,l.xPercent=ot(T.x,_.xPercent)),"string"==typeof T.y&&-1!==T.y.indexOf("%")&&(l.y=0,l.yPercent=ot(T.y,_.yPercent)),l.rotation=at("rotation"in T?T.rotation:"shortRotation"in T?T.shortRotation+"_short":"rotationZ"in T?T.rotationZ:_.rotation,_.rotation,"rotation",S),Mt&&(l.rotationX=at("rotationX"in T?T.rotationX:"shortRotationX"in T?T.shortRotationX+"_short":_.rotationX||0,_.rotationX,"rotationX",S),l.rotationY=at("rotationY"in T?T.rotationY:"shortRotationY"in T?T.shortRotationY+"_short":_.rotationY||0,_.rotationY,"rotationY",S)),l.skewX=null==T.skewX?_.skewX:at(T.skewX,_.skewX),l.skewY=null==T.skewY?_.skewY:at(T.skewY,_.skewY),(c=l.skewY-_.skewY)&&(l.skewX+=c,l.rotation+=c)}for(Mt&&null!=T.force3D&&(_.force3D=T.force3D,f=!0),_.skewType=T.skewType||_.skewType||a.defaultSkewType,d=_.force3D||_.z||_.rotationX||_.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,d||null==T.scale||(l.scaleZ=1);--w>-1;)i=Tt[w],p=l[i]-_[i],(p>b||-b>p||null!=T[i]||null!=B[i])&&(f=!0,s=new mt(_,i,_[i],p,s),i in S&&(s.e=S[i]),s.xs0=0,s.plugin=o,n._overwriteProps.push(s.n));return p=T.transformOrigin,_.svg&&(p||T.svgOrigin)&&(g=_.xOffset,v=_.yOffset,kt(t,rt(p),l,T.svgOrigin,T.smoothOrigin),s=gt(_,"xOrigin",(y?_:l).xOrigin,l.xOrigin,s,E),s=gt(_,"yOrigin",(y?_:l).yOrigin,l.yOrigin,s,E),(g!==_.xOffset||v!==_.yOffset)&&(s=gt(_,"xOffset",y?g:_.xOffset,_.xOffset,s,E),s=gt(_,"yOffset",y?v:_.yOffset,_.yOffset,s,E)),p=wt?null:"0px 0px"),(p||Mt&&d&&_.zOrigin)&&(St?(f=!0,i=Ct,p=(p||Z(t,i,r,!1,"50% 50%"))+"",s=new mt(x,i,0,0,s,(-1),E),s.b=x[i],s.plugin=o,Mt?(u=_.zOrigin,p=p.split(" "),_.zOrigin=(p.length>2&&(0===u||"0px"!==p[2])?parseFloat(p[2]):u)||0,s.xs0=s.e=p[0]+" "+(p[1]||"50%")+" 0px",s=new mt(_,"zOrigin",0,0,s,(-1),s.n),s.b=u,s.xs0=s.e=_.zOrigin):s.xs0=s.e=p):rt(p+"",_)),f&&(n._transformType=_.svg&&wt||!d&&3!==this._transformType?2:3),s},prefix:!0}),xt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),xt("borderRadius",{defaultValue:"0px",parser:function(t,e,i,s,o){e=this.format(e);var a,h,l,c,u,p,d,f,m,g,v,y,_,x,b,w,T=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],S=t.style;for(m=parseFloat(t.offsetWidth),g=parseFloat(t.offsetHeight),a=e.split(" "),h=0;T.length>h;h++)this.p.indexOf("border")&&(T[h]=q(T[h])),u=c=Z(t,T[h],r,!1,"0px"),-1!==u.indexOf(" ")&&(c=u.split(" "),u=c[0],c=c[1]),p=l=a[h],d=parseFloat(u),y=u.substr((d+"").length),_="="===p.charAt(1),_?(f=parseInt(p.charAt(0)+"1",10),p=p.substr(2),f*=parseFloat(p),v=p.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(p),v=p.substr((f+"").length)),""===v&&(v=n[i]||y),v!==y&&(x=J(t,"borderLeft",d,y),b=J(t,"borderTop",d,y),"%"===v?(u=100*(x/m)+"%",c=100*(b/g)+"%"):"em"===v?(w=J(t,"borderLeft",1,"em"),u=x/w+"em",c=b/w+"em"):(u=x+"px",c=b+"px"),_&&(p=parseFloat(u)+f+v,l=parseFloat(c)+f+v)),o=vt(S,T[h],u+" "+c,p+" "+l,!1,"0px",o);return o},prefix:!0,formatter:pt("0px 0px 0px 0px",!1,!0)}),xt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,n,s,o){var a,h,l,c,u,p,d="background-position",f=r||K(t,null),m=this.format((f?g?f.getPropertyValue(d+"-x")+" "+f.getPropertyValue(d+"-y"):f.getPropertyValue(d):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(-1!==m.indexOf("%")!=(-1!==v.indexOf("%"))&&(p=Z(t,"backgroundImage").replace(P,""),p&&"none"!==p)){for(a=m.split(" "),h=v.split(" "),G.setAttribute("src",p),l=2;--l>-1;)m=a[l],c=-1!==m.indexOf("%"),c!==(-1!==h[l].indexOf("%"))&&(u=0===l?t.offsetWidth-G.width:t.offsetHeight-G.height,a[l]=c?parseFloat(m)/100*u+"px":100*(parseFloat(m)/u)+"%");m=a.join(" ")}return this.parseComplex(t.style,m,v,s,o)},formatter:rt}),xt("backgroundSize",{defaultValue:"0 0",formatter:rt}),xt("perspective",{defaultValue:"0px",prefix:!0}),xt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),xt("transformStyle",{prefix:!0}),xt("backfaceVisibility",{prefix:!0}),xt("userSelect",{prefix:!0}),xt("margin",{parser:dt("marginTop,marginRight,marginBottom,marginLeft")}),xt("padding",{parser:dt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),xt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,n,s,o){var a,h,l;return 9>g?(h=t.currentStyle,l=8>g?" ":",",a="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(a=this.format(Z(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,s,o)}}),xt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),xt("autoRound,strictUnits",{parser:function(t,e,i,n,r){return r}}),xt("border",{defaultValue:"0px solid #000",parser:function(t,e,i,n,s,o){return this.parseComplex(t.style,this.format(Z(t,"borderTopWidth",r,!1,"0px")+" "+Z(t,"borderTopStyle",r,!1,"solid")+" "+Z(t,"borderTopColor",r,!1,"#000")),this.format(e),s,o)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(ut)||["#000"])[0]}}),xt("borderWidth",{parser:dt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),xt("float,cssFloat,styleFloat",{parser:function(t,e,i,n,r){var s=t.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new mt(s,o,0,0,r,(-1),i,(!1),0,s[o],e)}});var Gt=function(t){var e,i=this.t,n=i.filter||Z(this.data,"filter")||"",r=0|this.s+this.c*t;100===r&&(-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")&&-1===n.indexOf("oader(")?(i.removeAttribute("filter"),e=!Z(this.data,"filter")):(i.filter=n.replace(S,""),e=!0)),e||(this.xn1&&(i.filter=n=n||"alpha(opacity="+r+")"),-1===n.indexOf("pacity")?0===r&&this.xn1||(i.filter=n+" alpha(opacity="+r+")"):i.filter=n.replace(w,"opacity="+r))};xt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,n,s,o){var a=parseFloat(Z(t,"opacity",r,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),l&&1===a&&"hidden"===Z(t,"visibility",r)&&0!==e&&(a=0),H?s=new mt(h,"opacity",a,e-a,s):(s=new mt(h,"opacity",100*a,100*(e-a),s),s.xn1=l?1:0,h.zoom=1,s.type=2,s.b="alpha(opacity="+s.s+")",s.e="alpha(opacity="+(s.s+s.c)+")",s.data=t,s.plugin=o,s.setRatio=Gt),l&&(s=new mt(h,"visibility",0,0,s,(-1),null,(!1),0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit"),s.xs0="inherit",n._overwriteProps.push(s.n),n._overwriteProps.push(i)),s}});var jt=function(t,e){e&&(t.removeProperty?(("ms"===e.substr(0,2)||"webkit"===e.substr(0,6))&&(e="-"+e),t.removeProperty(e.replace(C,"-$1").toLowerCase())):t.removeAttribute(e))},Xt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:jt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};xt("className",{parser:function(t,e,n,s,o,a,h){var l,c,u,p,d,f=t.getAttribute("class")||"",m=t.style.cssText;if(o=s._classNamePT=new mt(t,n,0,0,o,2),o.setRatio=Xt,o.pr=-11,i=!0,o.b=f,c=Q(t,r),u=t._gsClassPT){for(p={},d=u.data;d;)p[d.p]=1,d=d._next;u.setRatio(1)}return t._gsClassPT=o,o.e="="!==e.charAt(1)?e:f.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",o.e),l=tt(t,c,Q(t),h,p),t.setAttribute("class",f),o.data=l.firstMPT,t.style.cssText=m,o=o.xfirst=s.parse(t,l.difs,o,a)}});var Ht=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,n,r,s,o=this.t.style,a=l.transform.parse;if("all"===this.e)o.cssText="",r=!0;else for(e=this.e.split(" ").join("").split(","),n=e.length;--n>-1;)i=e[n],l[i]&&(l[i].parse===a?r=!0:i="transformOrigin"===i?Ct:l[i].p),jt(o,i);r&&(jt(o,St),s=this.t._gsTransform,s&&(s.svg&&this.t.removeAttribute("data-svg-origin"),delete this.t._gsTransform))}};for(xt("clearProps",{parser:function(t,e,n,r,s){return s=new mt(t,n,0,0,s,2),s.setRatio=Ht,s.e=e,s.pr=-10,s.data=r._tween,i=!0,s}}),c="bezier,throwProps,physicsProps,physics2D".split(","),yt=c.length;yt--;)bt(c[yt]);c=a.prototype,c._firstPT=c._lastParsedTransform=c._transform=null,c._onInitTween=function(t,e,s){if(!t.nodeType)return!1;this._target=t,this._tween=s,this._vars=e,u=e.autoRound,i=!1,n=e.suffixMap||a.suffixMap,r=K(t,""),o=this._overwriteProps;var h,c,f,g,v,y,_,x,b,w=t.style;if(p&&""===w.zIndex&&(h=Z(t,"zIndex",r),("auto"===h||""===h)&&this._addLazySet(w,"zIndex",0)),"string"==typeof e&&(g=w.cssText,h=Q(t,r),w.cssText=g+";"+e,h=tt(t,h,Q(t)).difs,!H&&T.test(e)&&(h.opacity=parseFloat(RegExp.$1)),e=h,w.cssText=g),this._firstPT=c=e.className?l.className.parse(t,e.className,"className",this,null,null,e):this.parse(t,e,null),this._transformType){for(b=3===this._transformType,St?d&&(p=!0,""===w.zIndex&&(_=Z(t,"zIndex",r),("auto"===_||""===_)&&this._addLazySet(w,"zIndex",0)),m&&this._addLazySet(w,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(b?"visible":"hidden"))):w.zoom=1,f=c;f&&f._next;)f=f._next;x=new mt(t,"transform",0,0,null,2),this._linkCSSP(x,null,f),x.setRatio=St?Ut:Nt,x.data=this._transform||Ft(t,r,!0),x.tween=s,x.pr=-1,o.pop()}if(i){for(;c;){for(y=c._next,f=g;f&&f.pr>c.pr;)f=f._next;(c._prev=f?f._prev:v)?c._prev._next=c:g=c,(c._next=f)?f._prev=c:v=c,c=y}this._firstPT=g}return!0},c.parse=function(t,e,i,s){var o,a,h,c,p,d,f,m,g,v,y=t.style;for(o in e)d=e[o],a=l[o],a?i=a.parse(t,d,o,this,i,s,e):(p=Z(t,o,r)+"",g="string"==typeof d,"color"===o||"fill"===o||"stroke"===o||-1!==o.indexOf("Color")||g&&E.test(d)?(g||(d=ct(d),d=(d.length>3?"rgba(":"rgb(")+d.join(",")+")"),i=vt(y,o,p,d,!0,"transparent",i,0,s)):!g||-1===d.indexOf(" ")&&-1===d.indexOf(",")?(h=parseFloat(p),f=h||0===h?p.substr((h+"").length):"",(""===p||"auto"===p)&&("width"===o||"height"===o?(h=nt(t,o,r),f="px"):"left"===o||"top"===o?(h=$(t,o,r),f="px"):(h="opacity"!==o?0:1,f="")),v=g&&"="===d.charAt(1),v?(c=parseInt(d.charAt(0)+"1",10),d=d.substr(2),c*=parseFloat(d),m=d.replace(b,"")):(c=parseFloat(d),m=g?d.replace(b,""):""),""===m&&(m=o in n?n[o]:f),d=c||0===c?(v?c+h:c)+m:e[o],f!==m&&""!==m&&(c||0===c)&&h&&(h=J(t,o,h,f),"%"===m?(h/=J(t,o,100,"%")/100,e.strictUnits!==!0&&(p=h+"%")):"em"===m?h/=J(t,o,1,"em"):"px"!==m&&(c=J(t,o,c,m),m="px"),v&&(c||0===c)&&(d=c+h+m)),v&&(c+=h),!h&&0!==h||!c&&0!==c?void 0!==y[o]&&(d||"NaN"!=d+""&&null!=d)?(i=new mt(y,o,c||h||0,0,i,(-1),o,(!1),0,p,d),i.xs0="none"!==d||"display"!==o&&-1===o.indexOf("Style")?d:p):W("invalid "+o+" tween value: "+e[o]):(i=new mt(y,o,h,c-h,i,0,o,u!==!1&&("px"===m||"zIndex"===o),0,p,d),i.xs0=m)):i=vt(y,o,p,d,!0,null,i,0,s)),s&&i&&!i.plugin&&(i.plugin=s);return i},c.setRatio=function(t){var e,i,n,r=this._firstPT,s=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):s>e&&e>-s&&(e=0),r.type)if(1===r.type)if(n=r.l,2===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,n=1;r.l>n;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(e=Math.round(r.s+r.c),r.type){if(1===r.type){for(n=r.l,i=r.xs0+e+r.xs1,n=1;r.l>n;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}}else r.t[r.p]=e+r.xs0;else r.t[r.p]=r.e;else r.setRatio(t);r=r._next}},c._enableTransforms=function(t){this._transform=this._transform||Ft(this._target,r,!0),this._transformType=this._transform.svg&&wt||!t&&3!==this._transformType?2:3};var Yt=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};c._addLazySet=function(t,e,i){var n=this._firstPT=new mt(t,e,0,0,this._firstPT,2);n.e=i,n.setRatio=Yt,n.data=this},c._linkCSSP=function(t,e,i,n){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,n=!0),i?i._next=t:n||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},c._kill=function(e){var i,n,r,s=e;if(e.autoAlpha||e.alpha){s={};for(n in e)s[n]=e[n];s.opacity=1,s.autoAlpha&&(s.visibility=1)}return e.className&&(i=this._classNamePT)&&(r=i.xfirst,r&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),t.prototype._kill.call(this,s)};var Wt=function(t,e,i){var n,r,s,o;if(t.slice)for(r=t.length;--r>-1;)Wt(t[r],e,i);else for(n=t.childNodes,r=n.length;--r>-1;)s=n[r],o=s.type,s.style&&(e.push(Q(s)),i&&i.push(s)),1!==o&&9!==o&&11!==o||!s.childNodes.length||Wt(s,e,i)};return a.cascadeTo=function(t,i,n){var r,s,o,a,h=e.to(t,i,n),l=[h],c=[],u=[],p=[],d=e._internals.reservedProps;for(t=h._targets||h.target,Wt(t,c,p),h.render(i,!0,!0),Wt(t,u),h.render(0,!0,!0),h._enabled(!0),r=p.length;--r>-1;)if(s=tt(p[r],c[r],u[r]),s.firstMPT){s=s.difs;for(o in n)d[o]&&(s[o]=n[o]);a={};for(o in s)a[o]=c[r][o];l.push(e.fromTo(p[r],i,a,s))}return l},t.activate([a]),a},!0),function(){var t=s._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=t.prototype;e._onInitAllProps=function(){for(var t,e,i,n=this._tween,r=n.vars.roundProps instanceof Array?n.vars.roundProps:n.vars.roundProps.split(","),s=r.length,o={},a=n._propLookup.roundProps;--s>-1;)o[r[s]]=1;for(s=r.length;--s>-1;)for(t=r[s],e=n._firstPT;e;)i=e._next,e.pg?e.t._roundProps(o,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:n._firstPT===e&&(n._firstPT=i),e._next=e._prev=null,n._propLookup[t]=a),e=i;return!1},e._add=function(t,e,i,n){this._addTween(t,e,i,i+n,e,!0),this._overwriteProps.push(e)}}(),function(){var t=/(?:\d|\-|\+|=|#|\.)*/g,e=/[A-Za-z%]/g;s._gsDefine.plugin({propName:"attr",API:2,version:"0.4.0",init:function(i,n){var r,s,o,a,h;if("function"!=typeof i.setAttribute)return!1;this._target=i,this._proxy={},this._start={},this._end={},this._suffix={};for(r in n)this._start[r]=this._proxy[r]=s=i.getAttribute(r)+"",this._end[r]=o=n[r]+"",this._suffix[r]=a=e.test(o)?o.replace(t,""):e.test(s)?s.replace(t,""):"",a&&(h=o.indexOf(a),-1!==h&&(o=o.substr(0,h))),this._addTween(this._proxy,r,parseFloat(s),o,r)||(this._suffix[r]=""),"="===o.charAt(1)&&(this._end[r]=this._firstPT.s+this._firstPT.c+a),this._overwriteProps.push(r);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,n=i.length,r=1===t?this._end:t?this._proxy:this._start,s=r===this._proxy;--n>-1;)e=i[n],this._target.setAttribute(e,r[e]+(s?this._suffix[e]:""))}})}(),s._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,n,r,s,o,a,h=e.useRadians===!0?2*Math.PI:360,l=1e-6;for(i in e)"useRadians"!==i&&(a=(e[i]+"").split("_"),n=a[0],r=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),s=this.finals[i]="string"==typeof n&&"="===n.charAt(1)?r+parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)):Number(n)||0,o=s-r,a.length&&(n=a.join("_"),-1!==n.indexOf("short")&&(o%=h,o!==o%(h/2)&&(o=0>o?o+h:o-h)),-1!==n.indexOf("_cw")&&0>o?o=(o+9999999999*h)%h-(0|o/h)*h:-1!==n.indexOf("ccw")&&o>0&&(o=(o-9999999999*h)%h-(0|o/h)*h)),(o>l||-l>o)&&(this._addTween(t,i,r,r+o,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,s._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,n,r=s.GreenSockGlobals||s,o=r.com.greensock,a=2*Math.PI,h=Math.PI/2,l=o._class,c=function(e,i){var n=l("easing."+e,function(){},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,n},u=t.register||function(){},p=function(t,e,i,n){var r=l("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new n},!0);return u(r,t),r},d=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},f=function(e,i){var n=l("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,r.config=function(t){return new n(t)},n},m=p("Back",f("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),f("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),f("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),g=l("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),v=g.prototype=new t;return v.constructor=g,v.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},g.ease=new g(.7,.7),v.config=g.config=function(t,e,i){return new g(t,e,i)},e=l("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),v=e.prototype=new t,v.constructor=e,v.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},v.config=e.config=function(t){return new e(t)},i=l("easing.RoughEase",function(e){e=e||{};for(var i,n,r,s,o,a,h=e.taper||"none",l=[],c=0,u=0|(e.points||20),p=u,f=e.randomize!==!1,m=e.clamp===!0,g=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=f?Math.random():1/u*p,n=g?g.getRatio(i):i,"none"===h?r=v:"out"===h?(s=1-i,r=s*s*v):"in"===h?r=i*i*v:.5>i?(s=2*i,r=.5*s*s*v):(s=2*(1-i),r=.5*s*s*v),f?n+=Math.random()*r-.5*r:p%2?n+=.5*r:n-=.5*r,m&&(n>1?n=1:0>n&&(n=0)),l[c++]={x:i,y:n};for(l.sort(function(t,e){return t.x-e.x}),a=new d(1,1,null),p=u;--p>-1;)o=l[p],a=new d(o.x,o.y,a);this._prev=new d(0,0,0!==a.t?a:a.next)},!0),v=i.prototype=new t,v.constructor=i,v.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},v.config=function(t){return new i(t)},i.ease=new i,p("Bounce",c("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),c("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375);
}),c("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),p("Circ",c("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),c("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),c("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),n=function(e,i,n){var r=l("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||n)/(1>t?t:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=i,s.config=function(t,e){return new r(t,e)},r},p("Elastic",n("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),n("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2))},.3),n("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)+1},.45)),p("Expo",c("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),c("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),c("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),p("Sine",c("SineOut",function(t){return Math.sin(t*h)}),c("SineIn",function(t){return-Math.cos(t*h)+1}),c("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),l("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),u(r.SlowMo,"SlowMo","ease,"),u(i,"RoughEase","ease,"),u(e,"SteppedEase","ease,"),m},!0)}),s._gsDefine&&s._gsQueue.pop()(),function(i,s){"use strict";var o=i.GreenSockGlobals=i.GreenSockGlobals||i;if(!o.TweenLite){var a,h,l,c,u,p=function(t){var e,i=t.split("."),n=o;for(e=0;i.length>e;e++)n[i[e]]=n=n[i[e]]||{};return n},d=p("com.greensock"),f=1e-10,m=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},g=function(){},v=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),y={},_=function(i,s,a,h){this.sc=y[i]?y[i].sc:[],y[i]=this,this.gsClass=null,this.func=a;var l=[];this.check=function(c){for(var u,d,f,m,g=s.length,v=g;--g>-1;)(u=y[s[g]]||new _(s[g],[])).gsClass?(l[g]=u.gsClass,v--):c&&u.sc.push(this);if(0===v&&a)for(d=("com.greensock."+i).split("."),f=d.pop(),m=p(d.join("."))[f]=this.gsClass=a.apply(a,l),h&&(o[f]=m,n=[],r=function(){return m}.apply(e,n),!(void 0!==r&&(t.exports=r))),g=0;this.sc.length>g;g++)this.sc[g].check()},this.check(!0)},x=i._gsDefine=function(t,e,i,n){return new _(t,e,i,n)},b=d._class=function(t,e,i){return e=e||function(){},x(t,[],function(){return e},i),e};x.globals=o;var w=[0,0,1,1],T=[],S=b("easing.Ease",function(t,e,i,n){this._func=t,this._type=i||0,this._power=n||0,this._params=e?w.concat(e):w},!0),E=S.map={},C=S.register=function(t,e,i,n){for(var r,s,o,a,h=e.split(","),l=h.length,c=(i||"easeIn,easeOut,easeInOut").split(",");--l>-1;)for(s=h[l],r=n?b("easing."+s,null,!0):d.easing[s]||{},o=c.length;--o>-1;)a=c[o],E[s+"."+a]=E[a+s]=r[a]=t.getRatio?t:t[a]||new t};for(l=S.prototype,l._calcEnd=!1,l.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,n=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===e?1-n:2===e?n:.5>t?n/2:1-n/2},a=["Linear","Quad","Cubic","Quart","Quint,Strong"],h=a.length;--h>-1;)l=a[h]+",Power"+h,C(new S(null,null,1,h),l,"easeOut",!0),C(new S(null,null,2,h),l,"easeIn"+(0===h?",easeNone":"")),C(new S(null,null,3,h),l,"easeInOut");E.linear=d.easing.Linear.easeIn,E.swing=d.easing.Quad.easeInOut;var M=b("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});l=M.prototype,l.addEventListener=function(t,e,i,n,r){r=r||0;var s,o,a=this._listeners[t],h=0;for(null==a&&(this._listeners[t]=a=[]),o=a.length;--o>-1;)s=a[o],s.c===e&&s.s===i?a.splice(o,1):0===h&&r>s.pr&&(h=o+1);a.splice(h,0,{c:e,s:i,up:n,pr:r}),this!==c||u||c.wake()},l.removeEventListener=function(t,e){var i,n=this._listeners[t];if(n)for(i=n.length;--i>-1;)if(n[i].c===e)return void n.splice(i,1)},l.dispatchEvent=function(t){var e,i,n,r=this._listeners[t];if(r)for(e=r.length,i=this._eventTarget;--e>-1;)n=r[e],n&&(n.up?n.c.call(n.s||i,{type:t,target:i}):n.c.call(n.s||i))};var P=i.requestAnimationFrame,A=i.cancelAnimationFrame,I=Date.now||function(){return(new Date).getTime()},O=I();for(a=["ms","moz","webkit","o"],h=a.length;--h>-1&&!P;)P=i[a[h]+"RequestAnimationFrame"],A=i[a[h]+"CancelAnimationFrame"]||i[a[h]+"CancelRequestAnimationFrame"];b("Ticker",function(t,e){var i,n,r,s,o,a=this,h=I(),l=e!==!1&&P,p=500,d=33,m="tick",v=function(t){var e,l,c=I()-O;c>p&&(h+=c-d),O+=c,a.time=(O-h)/1e3,e=a.time-o,(!i||e>0||t===!0)&&(a.frame++,o+=e+(e>=s?.004:s-e),l=!0),t!==!0&&(r=n(v)),l&&a.dispatchEvent(m)};M.call(a),a.time=a.frame=0,a.tick=function(){v(!0)},a.lagSmoothing=function(t,e){p=t||1/f,d=Math.min(e,p,0)},a.sleep=function(){null!=r&&(l&&A?A(r):clearTimeout(r),n=g,r=null,a===c&&(u=!1))},a.wake=function(){null!==r?a.sleep():a.frame>10&&(O=I()-p+5),n=0===i?g:l&&P?P:function(t){return setTimeout(t,0|1e3*(o-a.time)+1)},a===c&&(u=!0),v(2)},a.fps=function(t){return arguments.length?(i=t,s=1/(i||60),o=this.time+s,void a.wake()):i},a.useRAF=function(t){return arguments.length?(a.sleep(),l=t,void a.fps(i)):l},a.fps(t),setTimeout(function(){l&&5>a.frame&&a.useRAF(!1)},1500)}),l=d.Ticker.prototype=new d.events.EventDispatcher,l.constructor=d.Ticker;var R=b("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,z){u||c.wake();var i=this.vars.useFrames?V:z;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});c=R.ticker=new d.Ticker,l=R.prototype,l._dirty=l._gc=l._initted=l._paused=!1,l._totalTime=l._time=0,l._rawPrevTime=-1,l._next=l._last=l._onUpdate=l._timeline=l.timeline=null,l._paused=!1;var k=function(){u&&I()-O>2e3&&c.wake(),setTimeout(k,2e3)};k(),l.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},l.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},l.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},l.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},l.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},l.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},l.render=function(){},l.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},l.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},l._enabled=function(t,e){return u||c.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},l._kill=function(){return this._enabled(!1,!1)},l.kill=function(t,e){return this._kill(t,e),this},l._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},l._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},l._callback=function(t){var e=this.vars;e[t].apply(e[t+"Scope"]||e.callbackScope||this,e[t+"Params"]||T)},l.eventCallback=function(t,e,i,n){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=v(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=n),"onUpdate"===t&&(this._onUpdate=e)}return this},l.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},l.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},l.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},l.totalTime=function(t,e,i){if(u||c.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(t>n&&!i&&(t=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(this.render(t,e,!1),N.length&&K())}return this},l.progress=l.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},l.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},l.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},l.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||f,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},l.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},l.paused=function(t){if(!arguments.length)return this._paused;var e,i,n=this._timeline;return t!=this._paused&&n&&(u||t||c.wake(),e=n.rawTime(),i=e-this._pauseTime,!t&&n.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&this.render(n.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,!0,!0)),this._gc&&!t&&this._enabled(!0,!1),this};var D=b("core.SimpleTimeline",function(t){R.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});l=D.prototype=new R,l.constructor=D,l.kill()._gc=!1,l._first=l._last=l._recent=null,l._sortChildren=!1,l.add=l.insert=function(t,e){var i,n;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(n=t._startTime;i&&i._startTime>n;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._recent=t,this._timeline&&this._uncache(!0),this},l._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},l.render=function(t,e,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)n=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=n},l.rawTime=function(){return u||c.wake(),this._totalTime};var L=b("TweenLite",function(t,e,n){if(R.call(this,e,n),this.render=L.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:L.selector(t)||t;var r,s,o,a=t.jquery||t.length&&t!==i&&t[0]&&(t[0]===i||t[0].nodeType&&t[0].style&&!t.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?W[L.defaultOverwrite]:"number"==typeof h?h>>0:W[h],(a||t instanceof Array||t.push&&v(t))&&"number"!=typeof t[0])for(this._targets=o=m(t),this._propLookup=[],this._siblings=[],r=0;o.length>r;r++)s=o[r],s?"string"!=typeof s?s.length&&s!==i&&s[0]&&(s[0]===i||s[0].nodeType&&s[0].style&&!s.nodeType)?(o.splice(r--,1),this._targets=o=o.concat(m(s))):(this._siblings[r]=Z(s,this,!1),1===h&&this._siblings[r].length>1&&$(s,this,null,1,this._siblings[r])):(s=o[r--]=L.selector(s),"string"==typeof s&&o.splice(r+1,1)):o.splice(r--,1);else this._propLookup={},this._siblings=Z(t,this,!1),1===h&&this._siblings.length>1&&$(t,this,null,1,this._siblings);(this.vars.immediateRender||0===e&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-f,this.render(-this._delay))},!0),B=function(t){return t&&t.length&&t!==i&&t[0]&&(t[0]===i||t[0].nodeType&&t[0].style&&!t.nodeType)},F=function(t,e){var i,n={};for(i in t)Y[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!j[i]||j[i]&&j[i]._autoCSS)||(n[i]=t[i],delete t[i]);t.css=n};l=L.prototype=new R,l.constructor=L,l.kill()._gc=!1,l.ratio=0,l._firstPT=l._targets=l._overwrittenProps=l._startAt=null,l._notifyPluginsOfEnabled=l._lazy=!1,L.version="1.17.0",L.defaultEase=l._ease=new S(null,null,1,1),L.defaultOverwrite="auto",L.ticker=c,L.autoSleep=120,L.lagSmoothing=function(t,e){c.lagSmoothing(t,e)},L.selector=i.$||i.jQuery||function(t){var e=i.$||i.jQuery;return e?(L.selector=e,e(t)):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)};var N=[],U={},G=L._internals={isArray:v,isSelector:B,lazyTweens:N},j=L._plugins={},X=G.tweenLookup={},H=0,Y=G.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1},W={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},V=R._rootFramesTimeline=new D,z=R._rootTimeline=new D,q=30,K=G.lazyRender=function(){var t,e=N.length;for(U={};--e>-1;)t=N[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);N.length=0};z._startTime=c.time,V._startTime=c.frame,z._active=V._active=!0,setTimeout(K,1),R._updateRoot=L.render=function(){var t,e,i;if(N.length&&K(),z.render((c.time-z._startTime)*z._timeScale,!1,!1),V.render((c.frame-V._startTime)*V._timeScale,!1,!1),N.length&&K(),c.frame>=q){q=c.frame+(parseInt(L.autoSleep,10)||120);for(i in X){for(e=X[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete X[i]}if(i=z._first,(!i||i._paused)&&L.autoSleep&&!V._first&&1===c._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||c.sleep()}}},c.addEventListener("tick",R._updateRoot);var Z=function(t,e,i){var n,r,s=t._gsTweenID;if(X[s||(t._gsTweenID=s="t"+H++)]||(X[s]={target:t,tweens:[]}),e&&(n=X[s].tweens,n[r=n.length]=e,i))for(;--r>-1;)n[r]===e&&n.splice(r,1);return X[s].tweens},J=function(t,e,i,n){var r,s,o=t.vars.onOverwrite;return o&&(r=o(t,e,i,n)),o=L.onOverwrite,o&&(s=o(t,e,i,n)),r!==!1&&s!==!1},$=function(t,e,i,n,r){var s,o,a,h;if(1===n||n>=4){for(h=r.length,s=0;h>s;s++)if((a=r[s])!==e)a._gc||a._kill(null,t,e)&&(o=!0);else if(5===n)break;return o}var l,c=e._startTime+f,u=[],p=0,d=0===e._duration;for(s=r.length;--s>-1;)(a=r[s])===e||a._gc||a._paused||(a._timeline!==e._timeline?(l=l||Q(e,0,d),0===Q(a,l,d)&&(u[p++]=a)):c>=a._startTime&&a._startTime+a.totalDuration()/a._timeScale>c&&((d||!a._initted)&&2e-10>=c-a._startTime||(u[p++]=a)));for(s=p;--s>-1;)if(a=u[s],2===n&&a._kill(i,t,e)&&(o=!0),2!==n||!a._firstPT&&a._initted){if(2!==n&&!J(a,e))continue;a._enabled(!1,!1)&&(o=!0)}return o},Q=function(t,e,i){for(var n=t._timeline,r=n._timeScale,s=t._startTime;n._timeline;){if(s+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return s/=r,s>e?s-e:i&&s===e||!t._initted&&2*f>s-e?f:(s+=t.totalDuration()/t._timeScale/r)>e+f?0:s-e-f};l._init=function(){var t,e,i,n,r,s=this.vars,o=this._overwrittenProps,a=this._duration,h=!!s.immediateRender,l=s.ease;if(s.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(n in s.startAt)r[n]=s.startAt[n];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=h&&s.lazy!==!1,r.startAt=r.delay=null,this._startAt=L.to(this.target,0,r),h)if(this._time>0)this._startAt=null;else if(0!==a)return}else if(s.runBackwards&&0!==a)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(h=!1),i={};for(n in s)Y[n]&&"autoCSS"!==n||(i[n]=s[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&s.lazy!==!1,i.immediateRender=h,this._startAt=L.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=l=l?l instanceof S?l:"function"==typeof l?new S(l,s.easeParams):E[l]||L.defaultEase:L.defaultEase,s.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],o?o[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,o);if(e&&L._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},l._initProps=function(t,e,n,r){var s,o,a,h,l,c;if(null==t)return!1;U[t._gsTweenID]&&K(),this.vars.css||t.style&&t!==i&&t.nodeType&&j.css&&this.vars.autoCSS!==!1&&F(this.vars,t);for(s in this.vars){if(c=this.vars[s],Y[s])c&&(c instanceof Array||c.push&&v(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[s]=c=this._swapSelfInParams(c,this));else if(j[s]&&(h=new j[s])._onInitTween(t,this.vars[s],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:s,pg:!0,pr:h._priority},o=h._overwriteProps.length;--o>-1;)e[h._overwriteProps[o]]=this._firstPT;(h._priority||h._onInitAllProps)&&(a=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=e[s]=l={_next:this._firstPT,t:t,p:s,f:"function"==typeof t[s],n:s,pg:!1,pr:0},l.s=l.f?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(t[s]),l.c="string"==typeof c&&"="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*Number(c.substr(2)):Number(c)-l.s||0;l&&l._next&&(l._next._prev=l)}return r&&this._kill(r,t)?this._initProps(t,e,n,r):this._overwrite>1&&this._firstPT&&n.length>1&&$(t,this,e,this._overwrite,n)?(this._kill(e,t),this._initProps(t,e,n,r)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(U[t._gsTweenID]=!0),a)},l.render=function(t,e,i){var n,r,s,o,a=this._time,h=this._duration,l=this._rawPrevTime;if(t>=h)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>l||l===f&&"isPause"!==this.data)&&l!==t&&(i=!0,l>f&&(r="onReverseComplete")),this._rawPrevTime=o=!e||t||l===t?t:f);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===h&&l>0)&&(r="onReverseComplete",n=this._reversed),0>t&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(l!==f||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=o=!e||t||l===t?t:f)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var c=t/h,u=this._easeType,p=this._easePower;(1===u||3===u&&c>=.5)&&(c=1-c),3===u&&(c*=2),1===p?c*=c:2===p?c*=c*c:3===p?c*=c*c*c:4===p&&(c*=c*c*c*c),this.ratio=1===u?1-c:2===u?c:.5>t/h?c/2:1-c/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=l,N.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/h):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._time||0===h)&&(e||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(0>t&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,i),e||(this._time!==a||n)&&this._callback("onUpdate")),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===h&&this._rawPrevTime===f&&o!==f&&(this._rawPrevTime=0))}},l._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:L.selector(e)||e;var n,r,s,o,a,h,l,c,u,p=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((v(e)||B(e))&&"number"!=typeof e[0])for(n=e.length;--n>-1;)this._kill(t,e[n],i)&&(h=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(e===this._targets[n]){a=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=t?this._overwrittenProps[n]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(l=t||a,c=t!==r&&"all"!==r&&t!==a&&("object"!=typeof t||!t._tempKill),i&&(L.onOverwrite||this.vars.onOverwrite)){for(s in l)a[s]&&(u||(u=[]),u.push(s));if((u||!t)&&!J(this,i,e,u))return!1}for(s in l)(o=a[s])&&(p&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,h=!0),o.pg&&o.t._kill(l)&&(h=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete a[s]),c&&(r[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},l.invalidate=function(){return this._notifyPluginsOfEnabled&&L._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],R.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-f,this.render(-this._delay)),this},l._enabled=function(t,e){if(u||c.wake(),t&&this._gc){var i,n=this._targets;if(n)for(i=n.length;--i>-1;)this._siblings[i]=Z(n[i],this,!0);else this._siblings=Z(this.target,this,!0)}return R.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&L._onPluginEvent(t?"_onEnable":"_onDisable",this)},L.to=function(t,e,i){return new L(t,e,i)},L.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new L(t,e,i)},L.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new L(t,e,n)},L.delayedCall=function(t,e,i,n,r){return new L(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},L.set=function(t,e){return new L(t,0,e)},L.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:L.selector(t)||t;var i,n,r,s;if((v(t)||B(t))&&"number"!=typeof t[0]){for(i=t.length,n=[];--i>-1;)n=n.concat(L.getTweensOf(t[i],e));for(i=n.length;--i>-1;)for(s=n[i],r=i;--r>-1;)s===n[r]&&n.splice(i,1)}else for(n=Z(t).concat(),i=n.length;--i>-1;)(n[i]._gc||e&&!n[i].isActive())&&n.splice(i,1);return n},L.killTweensOf=L.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var n=L.getTweensOf(t,e),r=n.length;--r>-1;)n[r]._kill(i,t)};var tt=b("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=tt.prototype},!0);if(l=tt.prototype,tt.version="1.10.1",tt.API=2,l._firstPT=null,l._addTween=function(t,e,i,n,r,s){var o,a;return null!=n&&(o="number"==typeof n||"="!==n.charAt(1)?Number(n)-Number(i):parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)))?(this._firstPT=a={_next:this._firstPT,t:t,p:e,s:i,c:o,f:"function"==typeof t[e],n:r||e,r:s},a._next&&(a._next._prev=a),a):void 0},l.setRatio=function(t){for(var e,i=this._firstPT,n=1e-6;i;)e=i.c*t+i.s,i.r?e=Math.round(e):n>e&&e>-n&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},l._kill=function(t){var e,i=this._overwriteProps,n=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;n;)null!=t[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},l._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},L._onPluginEvent=function(t,e){var i,n,r,s,o,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(o=a._next,n=r;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:s)?a._prev._next=a:r=a,(a._next=n)?n._prev=a:s=a,a=o}a=e._firstPT=r}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(i=!0),a=a._next;return i},tt.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===tt.API&&(j[(new t[e])._propName]=t[e]);return!0},x.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,n=t.priority||0,r=t.overwriteProps,s={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},o=b("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){tt.call(this,i,n),this._overwriteProps=r||[]},t.global===!0),a=o.prototype=new tt(i);a.constructor=o,o.API=t.API;for(e in s)"function"==typeof t[e]&&(a[s[e]]=t[e]);return o.version=t.version,tt.activate([o]),o},a=i._gsQueue){for(h=0;a.length>h;h++)a[h]();for(l in y)y[l].func||i.console.log("GSAP encountered missing dependency: com.greensock."+l)}u=!1}}("undefined"!=typeof t&&t.exports&&"undefined"!=typeof i?i:this||window,"TweenMax")}).call(e,function(){return this}())},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(9)),s=function(){this.updating=!1,this.iterationCount=0,this.tweens=[]};s.prototype.killTweensOf=function(t){for(var e=0;e<this.tweens.length;e++){var i=this.tweens[e];i.obj===t&&i.obj.id===t.id&&(i=null,this.tweens.splice(e,1),e--)}},s.prototype.to=function(t,e,i,n){var s={"delete":!1,currentIteration:0,isArray:!1,obj:t,vars:i,delay:60*i.delay||0,isDelayed:!!(i.delay&&i.delay>0),duration:60*e,ease:i.ease||this.easeLinear};if(t instanceof Array){s.isArray=!0;var o=[];for(var a in i)if("delay"!==a&&"duration"!==a&&!this.isFunction(i[a])){for(var h={"var":a,toValue:i[a]},l=[],c=0;c<t.length;c++)l.push(t[c]);h.value=l,o.push(h)}}else{var o=[];for(var a in i)if("delay"!==a&&"duration"!==a&&!this.isFunction(i[a])&&"forceTween"!==a){for(var c=0;c<this.tweens.length;c++){var u=this.tweens[c];if(u.obj===t)for(var p=0;p<u.props.length;p++){var d=u.props[p];d["var"]!==a||0!==s.delay&&!s.vars.forceTween||(u["delete"]=!0,this.tweens.splice(c,1),c--)}}o.push({"var":a,value:t[a],toValue:i[a]})}}s.props=o,this.tweens.push(s),this.updating||(r.instance.add(this.update,this),this.updating=!0)},s.prototype.isFunction=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},s.prototype.updateArray=function(t){var e=t;if(e.delay>0)e.delay--;else{for(var i=0;i<e.obj.length;i++){e.obj[i];e.obj[i]=e.ease(e.currentIteration,e.props[0].value[i],e.props[0].toValue[i]-e.props[0].value[i],e.duration)}e.currentIteration++,e.currentIteration>e.duration&&(e.vars.onComplete&&e.vars.onComplete(),e["delete"]=!0)}},s.prototype.update=function(){for(var t=0;t<this.tweens.length;t++){var e=this.tweens[t];if(e.isArray)this.updateArray(e);else if(e.isDelayed){if(e.delay>0)e.delay-=1;else if(e.delay<=0){e.isDelayed=!1;for(var i=0;i<e.props.length;i++){var n=e.props[i];n.value=e.obj[n["var"]]}}}else{for(var i=0;i<e.props.length;i++){var n=e.props[i];e.obj[n["var"]]=e.ease(e.currentIteration,n.value,n.toValue-n.value,e.duration)}e.vars.onUpdate&&e.vars.onUpdate.apply(this,e.vars.onUpdateParams),e.currentIteration+=1,e.currentIteration>e.duration&&(e.vars.onComplete&&e.vars.onComplete.apply(this,e.vars.onCompleteParams),e["delete"]=!0)}}for(var t=0;t<this.tweens.length;t++){var e=this.tweens[t];e["delete"]&&(e=null,this.tweens.splice(t,1),t--)}0===this.tweens.length&&(r.instance.remove(this.update,this),this.updating=!1)},s.prototype.easeLinear=function(t,e,i,n){return t/=n,i*t+e},s.prototype.easeInSine=function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},s.prototype.easeOutSine=function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},s.prototype.easeInExpo=function(t,e,i,n){return i*Math.pow(2,10*(t/n-1))+e},s.prototype.easeOutBack=function(t,e,i,n){var r=1.70158;return i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},s.prototype.elasticOut=function(t,e,i,n){var r=1.70158,s=0,o=i;if(0==t)return e;if(1==(t/=n))return e+i;if(s||(s=.3*n),o<Math.abs(i)){o=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/o);return o*Math.pow(2,-10*t)*Math.sin((t*n-r)*(2*Math.PI)/s)+i+e},s.prototype.elasticOutSoft=function(t,e,i,n){var r=1.0158,s=0,o=i;if(0==t)return e;if(1==(t/=n))return e+i;if(s||(s=.3*n),o<Math.abs(i)){o=i;var r=s/4}else var r=s/(2*Math.PI)*Math.asin(i/o);return o*Math.pow(2,-10*t)*Math.sin((t*n-r)*(2*Math.PI)/s)+i+e},s.prototype.easeInCubic=function(t,e,i,n){return t/=n,i*t*t*t+e},s.prototype.easeOutCubic=function(t,e,i,n){return t/=n,t--,i*(t*t*t+1)+e},s.prototype.easeInOutSine=function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},s.prototype.easeInOutExpo=function(t,e,i,n){return t/=n/2,t<1?i/2*Math.pow(2,10*(t-1))+e:(t--,i/2*(-Math.pow(2,-10*t)+2)+e)},s.prototype.easeInOutQuint=function(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t*t*t+e:(t-=2,i/2*(t*t*t*t*t+2)+e)},s.prototype.easeInOutCirc=function(t,e,i,n){return t/=n/2,t<1?-i/2*(Math.sqrt(1-t*t)-1)+e:(t-=2,i/2*(Math.sqrt(1-t*t)+1)+e)},s.prototype.easeOutCirc=function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},s.instance=new s,n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,n;(function(e,i){!function(e){t.exports=e()}(function(){var t;return function r(t,e,i){function s(a,h){if(!e[a]){if(!t[a]){var l="function"==typeof n&&n;if(!h&&l)return n(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=e[a]={exports:{}};t[a][0].call(u.exports,function(e){var i=t[a][1][e];return s(i?i:e)},u,u.exports,r,t,e,i)}return e[a].exports}for(var o="function"==typeof n&&n,a=0;a<i.length;a++)s(i[a]);return s}({1:[function(t,e,i){var n=new ArrayBuffer(0),r=function(t,e,i,r){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=r||t.STATIC_DRAW,this.data=n,i&&this.upload(i)};r.prototype.upload=function(t,e,i){
i||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},r.prototype.bind=function(){var t=this.gl;t.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(t,e,i){return new r(t,t.ARRAY_BUFFER,e,i)},r.createIndexBuffer=function(t,e,i){return new r(t,t.ELEMENT_ARRAY_BUFFER,e,i)},r.create=function(t,e,i,n){return new r(t,e,i,n)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=r},{}],2:[function(t,e,i){var n=t("./GLTexture"),r=function(t,e,i){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=i||100};r.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},r.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},r.prototype.clear=function(t,e,i,n){this.bind();var r=this.gl;r.clearColor(t,e,i,n),r.clear(r.COLOR_BUFFER_BIT)},r.prototype.bind=function(){var t=this.gl;this.texture&&this.texture.unbind(),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},r.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},r.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e))},r.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},r.createRGBA=function(t,e,i,s){var o=n.fromData(t,null,e,i);o.enableNearestScaling(),o.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(o),a.unbind(),a},r.createFloat32=function(t,e,i,s){var o=new n.fromData(t,s,e,i);o.enableNearestScaling(),o.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(o),a.unbind(),a},e.exports=r},{"./GLTexture":4}],3:[function(t,e,i){var n=t("./shader/compileProgram"),r=t("./shader/extractAttributes"),s=t("./shader/extractUniforms"),o=t("./shader/generateUniformAccessObject"),a=function(t,e,i,a){this.gl=t,this.program=n(t,e,i,a),this.attributes=r(t,this.program);for(var h in this.attributes);var l=s(t,this.program);this.uniforms=o(t,l)};a.prototype.bind=function(){this.gl.useProgram(this.program)},a.prototype.destroy=function(){},e.exports=a},{"./shader/compileProgram":9,"./shader/extractAttributes":11,"./shader/extractUniforms":12,"./shader/generateUniformAccessObject":13}],4:[function(t,e,i){var n=function(t,e,i,n,r){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=n||t.RGBA,this.type=r||t.UNSIGNED_BYTE};n.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,n=t.videoHeight||t.height;n!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=n};var r=!1;n.prototype.uploadData=function(t,e,i){this.bind();var n=this.gl;if(t instanceof Float32Array){if(!r){var s=n.getExtension("OES_texture_float");if(!s)throw new Error("floating point textures not available");r=!0}this.type=n.FLOAT}else this.type=n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},n.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},n.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},n.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},n.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},n.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},n.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},n.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},n.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},n.prototype.destroy=function(){var t=this.gl;t.deleteTexture(this.texture)},n.fromSource=function(t,e,i){var r=new n(t);return r.premultiplyAlpha=i||!1,r.upload(e),r},n.fromData=function(t,e,i,r){var s=new n(t);return s.uploadData(e,i,r),s},e.exports=n},{}],5:[function(t,e,i){function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var r=t("./setVertexAttribArrays");n.prototype.constructor=n,e.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,i=0;i<this.attributes.length;i++){var n=this.attributes[i];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return r(t,this.attributes,this.nativeState),this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,i,n,r,s){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:i||this.gl.FLOAT,normalized:n||!1,stride:r||0,start:s||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,i){var n=this.gl;return n.drawElements(t,e,n.UNSIGNED_SHORT,i||0),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null}},{"./setVertexAttribArrays":8}],6:[function(t,e,i){var n=function(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i};e.exports=n},{}],7:[function(t,e,i){var n={createContext:t("./createContext"),setVertexAttribArrays:t("./setVertexAttribArrays"),GLBuffer:t("./GLBuffer"),GLFramebuffer:t("./GLFramebuffer"),GLShader:t("./GLShader"),GLTexture:t("./GLTexture"),VertexArrayObject:t("./VertexArrayObject"),shader:t("./shader")};"undefined"!=typeof e&&e.exports&&(e.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},{"./GLBuffer":1,"./GLFramebuffer":2,"./GLShader":3,"./GLTexture":4,"./VertexArrayObject":5,"./createContext":6,"./setVertexAttribArrays":8,"./shader":14}],8:[function(t,e,i){var n=function(t,e,i){var n;if(i){var r=i.tempAttribState,s=i.attribState;for(n=0;n<r.length;n++)r[n]=!1;for(n=0;n<e.length;n++)r[e[n].attribute.location]=!0;for(n=0;n<s.length;n++)s[n]!==r[n]&&(s[n]=r[n],i.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var o=e[n];t.enableVertexAttribArray(o.attribute.location)}};e.exports=n},{}],9:[function(t,e,i){var n=function(t,e,i,n){var s=r(t,t.VERTEX_SHADER,e),o=r(t,t.FRAGMENT_SHADER,i),a=t.createProgram();if(t.attachShader(a,s),t.attachShader(a,o),n)for(var h in n)t.bindAttribLocation(a,n[h],h);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(""!==t.getProgramInfoLog(a),t.deleteProgram(a),a=null),t.deleteShader(s),t.deleteShader(o),a},r=function(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:null};e.exports=n},{}],10:[function(t,e,i){var n=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return r(2*e);case"bvec3":return r(3*e);case"bvec4":return r(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},r=function(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e};e.exports=n},{}],11:[function(t,e,i){var n=t("./mapType"),r=t("./mapSize"),s=function(t,e){for(var i={},s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<s;a++){var h=t.getActiveAttrib(e,a),l=n(t,h.type);i[h.name]={type:l,size:r(l),location:t.getAttribLocation(e,h.name),pointer:o}}return i},o=function(t,e,i,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,i||0,n||0)};e.exports=s},{"./mapSize":15,"./mapType":16}],12:[function(t,e,i){var n=t("./mapType"),r=t("./defaultValue"),s=function(t,e){for(var i={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;o<s;o++){var a=t.getActiveUniform(e,o),h=a.name.replace(/\[.*?\]/,""),l=n(t,a.type);i[h]={type:l,size:a.size,location:t.getUniformLocation(e,h),value:r(l,a.size)}}return i};e.exports=s},{"./defaultValue":10,"./mapType":16}],13:[function(t,e,i){var n=function(t,e){var i={data:{}};i.gl=t;for(var n=Object.keys(e),a=0;a<n.length;a++){var h=n[a],l=h.split("."),c=l[l.length-1],u=o(l,i),p=e[h];u.data[c]=p,u.gl=t,Object.defineProperty(u,c,{get:r(c),set:s(c,p)})}return i},r=function(t){var e=a.replace("%%",t);return new Function(e)},s=function(t,e){var i,n=h.replace(/%%/g,t);return i=1===e.size?l[e.type]:c[e.type],i&&(n+="\nthis.gl."+i+";"),new Function("value",n)},o=function(t,e){for(var i=e,n=0;n<t.length-1;n++){var r=i[t[n]]||{data:{}};i[t[n]]=r,i=r}return i},a=["return this.data.%%.value;"].join("\n"),h=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),l={"float":"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])","int":"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},c={"float":"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)","int":"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};e.exports=n},{}],14:[function(t,e,i){e.exports={compileProgram:t("./compileProgram"),defaultValue:t("./defaultValue"),extractAttributes:t("./extractAttributes"),extractUniforms:t("./extractUniforms"),generateUniformAccessObject:t("./generateUniformAccessObject"),mapSize:t("./mapSize"),mapType:t("./mapType")}},{"./compileProgram":9,"./defaultValue":10,"./extractAttributes":11,"./extractUniforms":12,"./generateUniformAccessObject":13,"./mapSize":15,"./mapType":16}],15:[function(t,e,i){var n=function(t){return r[t]},r={"float":1,vec2:2,vec3:3,vec4:4,"int":1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=n},{}],16:[function(t,e,i){var n=function(t,e){if(!r){var i=Object.keys(s);r={};for(var n=0;n<i.length;++n){var o=i[n];r[t[o]]=s[o]}}return r[e]},r=null,s={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=n},{}],17:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,i,n){(0,o["default"])(e)(t,(0,h["default"])(i),n)}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r;var s=t("./internal/eachOfLimit"),o=n(s),a=t("./internal/withoutIndex"),h=n(a);e.exports=i["default"]},{"./internal/eachOfLimit":21,"./internal/withoutIndex":28}],18:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var r=t("./eachLimit"),s=n(r),o=t("./internal/doLimit"),a=n(o);i["default"]=(0,a["default"])(s["default"],1),e.exports=i["default"]},{"./eachLimit":17,"./internal/doLimit":20}],19:[function(t,e,i){"use strict";function n(){this.head=this.tail=null,this.length=0}function r(t,e){t.length=1,t.head=t.tail=e}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n,n.prototype.removeLink=function(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t},n.prototype.empty=n,n.prototype.insertAfter=function(t,e){e.prev=t,e.next=t.next,t.next?t.next.prev=e:this.tail=e,t.next=e,this.length+=1},n.prototype.insertBefore=function(t,e){e.prev=t.prev,e.next=t,t.prev?t.prev.next=e:this.head=e,t.prev=e,this.length+=1},n.prototype.unshift=function(t){this.head?this.insertBefore(this.head,t):r(this,t)},n.prototype.push=function(t){this.tail?this.insertAfter(this.tail,t):r(this,t)},n.prototype.shift=function(){return this.head&&this.removeLink(this.head)},n.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},e.exports=i["default"]},{}],20:[function(t,e,i){"use strict";function n(t,e){return function(i,n,r){return t(i,e,n,r)}}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n,e.exports=i["default"]},{}],21:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){return function(e,i,n){function r(t){if(u-=1,t)l=!0,n(t);else{if(l&&u<=0)return n(null);s()}}function s(){for(;u<t&&!l;){var e=a();if(null===e)return l=!0,void(u<=0&&n(null));u+=1,i(e.value,e.key,(0,p["default"])(r))}}if(n=(0,h["default"])(n||o["default"]),t<=0||!e)return n(null);var a=(0,c["default"])(e),l=!1,u=0;s()}}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r;var s=t("lodash/noop"),o=n(s),a=t("./once"),h=n(a),l=t("./iterator"),c=n(l),u=t("./onlyOnce"),p=n(u);e.exports=i["default"]},{"./iterator":23,"./once":24,"./onlyOnce":25,"lodash/noop":54}],22:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function(t){return n&&t[n]&&t[n]()};var n="function"==typeof Symbol&&Symbol.iterator;e.exports=i["default"]},{}],23:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=-1,i=t.length;return function(){return++e<i?{value:t[e],key:e}:null}}function s(t){var e=-1;return function(){var i=t.next();return i.done?null:(e++,{value:i.value,key:e})}}function o(t){var e=(0,d["default"])(t),i=-1,n=e.length;return function(){var r=e[++i];return i<n?{value:t[r],key:r}:null}}function a(t){if((0,l["default"])(t))return r(t);var e=(0,u["default"])(t);return e?s(e):o(t)}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=a;var h=t("lodash/isArrayLike"),l=n(h),c=t("./getIterator"),u=n(c),p=t("lodash/keys"),d=n(p);e.exports=i["default"]},{"./getIterator":22,"lodash/isArrayLike":46,"lodash/keys":53}],24:[function(t,e,i){"use strict";function n(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n,e.exports=i["default"]},{}],25:[function(t,e,i){"use strict";function n(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n,e.exports=i["default"]},{}],26:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,i){function n(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");return l.started=!0,(0,h["default"])(t)||(t=[t]),0===t.length&&l.idle()?(0,g["default"])(function(){l.drain()}):((0,o["default"])(t,function(t){var n={data:t,callback:i||c["default"]};e?l._tasks.unshift(n):l._tasks.push(n)}),void(0,g["default"])(l.process))}function r(t){return(0,p["default"])(function(e){s-=1,(0,o["default"])(t,function(t){(0,o["default"])(a,function(e,i){if(e===t)return a.splice(i,1),!1}),t.callback.apply(t,e),null!=e[0]&&l.error(e[0],t.data)}),s<=l.concurrency-l.buffer&&l.unsaturated(),l.idle()&&l.drain(),l.process()})}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,a=[],l={_tasks:new y["default"],concurrency:e,payload:i,saturated:c["default"],unsaturated:c["default"],buffer:e/4,empty:c["default"],drain:c["default"],error:c["default"],started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){l.drain=c["default"],l._tasks.empty()},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!l.paused&&s<l.concurrency&&l._tasks.length;){var e=[],i=[],n=l._tasks.length;l.payload&&(n=Math.min(n,l.payload));for(var o=0;o<n;o++){var h=l._tasks.shift();e.push(h),i.push(h.data)}0===l._tasks.length&&l.empty(),s+=1,a.push(e[0]),s===l.concurrency&&l.saturated();var c=(0,f["default"])(r(e));t(i,c)}},length:function(){return l._tasks.length},running:function(){return s},workersList:function(){return a},idle:function(){return l._tasks.length+s===0},pause:function(){l.paused=!0},resume:function(){if(l.paused!==!1){l.paused=!1;for(var t=Math.min(l.concurrency,l._tasks.length),e=1;e<=t;e++)(0,g["default"])(l.process)}}};return l}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=r;var s=t("lodash/_arrayEach"),o=n(s),a=t("lodash/isArray"),h=n(a),l=t("lodash/noop"),c=n(l),u=t("lodash/rest"),p=n(u),d=t("./onlyOnce"),f=n(d),m=t("./setImmediate"),g=n(m),v=t("./DoublyLinkedList"),y=n(v);e.exports=i["default"]},{"./DoublyLinkedList":19,"./onlyOnce":25,"./setImmediate":27,"lodash/_arrayEach":35,"lodash/isArray":45,"lodash/noop":54,"lodash/rest":55}],27:[function(t,i,n){(function(i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function s(t){setTimeout(t,0)}function o(t){return(0,l["default"])(function(e,i){t(function(){e.apply(null,i)})})}Object.defineProperty(n,"__esModule",{value:!0}),n.hasNextTick=n.hasSetImmediate=void 0,n.fallback=s,n.wrap=o;var a,h=t("lodash/rest"),l=r(h),c=n.hasSetImmediate="function"==typeof e&&e,u=n.hasNextTick="object"==typeof i&&"function"==typeof i.nextTick;a=c?e:u?i.nextTick:s,n["default"]=o(a)}).call(this,t("_process"))},{_process:61,"lodash/rest":55}],28:[function(t,e,i){"use strict";function n(t){return function(e,i,n){return t(e,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=n,e.exports=i["default"]},{}],29:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function(t,e){return(0,s["default"])(function(e,i){t(e[0],i)},e,1)};var r=t("./internal/queue"),s=n(r);e.exports=i["default"]},{"./internal/queue":26}],30:[function(t,e,i){"use strict";"use restrict";function n(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var r=32;i.INT_BITS=r,i.INT_MAX=2147483647,i.INT_MIN=-1<<r-1,i.sign=function(t){return(t>0)-(t<0)},i.abs=function(t){var e=t>>r-1;return(t^e)-e},i.min=function(t,e){return e^(t^e)&-(t<e)},i.max=function(t,e){return t^(t^e)&-(t<e)},i.isPow2=function(t){return!(t&t-1||!t)},i.log2=function(t){var e,i;return e=(t>65535)<<4,t>>>=e,i=(t>255)<<3,t>>>=i,e|=i,i=(t>15)<<2,t>>>=i,e|=i,i=(t>3)<<1,t>>>=i,e|=i,e|t>>1},i.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},i.popCount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},i.countTrailingZeros=n,i.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},i.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},i.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var s=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,n=e,r=7;for(i>>>=1;i;i>>>=1)n<<=1,n|=1&i,--r;t[e]=n<<r&255}}(s),i.reverse=function(t){return s[255&t]<<24|s[t>>>8&255]<<16|s[t>>>16&255]<<8|s[t>>>24&255]},i.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},i.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},i.interleave3=function(t,e,i){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,i&=1023,i=4278190335&(i|i<<16),i=251719695&(i|i<<8),i=3272356035&(i|i<<4),i=1227133513&(i|i<<2),t|i<<2},i.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},i.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],31:[function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n=e&&e.length,s=n?e[0]*i:t.length,a=r(t,0,s,i,!0),h=[];if(!a)return h;var l,c,p,d,f,m,g;if(n&&(a=u(t,e,a,i)),t.length>80*i){l=p=t[0],c=d=t[1];for(var v=i;v<s;v+=i)f=t[v],m=t[v+1],f<l&&(l=f),m<c&&(c=m),f>p&&(p=f),m>d&&(d=m);g=Math.max(p-l,d-c)}return o(a,h,i,l,c,g),h}function r(t,e,i,n,r){var s,o;if(r===O(t,e,i,n)>0)for(s=e;s<i;s+=n)o=P(s,t[s],t[s+1],o);else for(s=i-n;s>=e;s-=n)o=P(s,t[s],t[s+1],o);return o&&w(o,o.next)&&(A(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var i,n=t;do if(i=!1,n.steiner||!w(n,n.next)&&0!==b(n.prev,n,n.next))n=n.next;else{if(A(n),n=e=n.prev,n===n.next)return null;i=!0}while(i||n!==e);return e}function o(t,e,i,n,r,u,p){if(t){!p&&u&&m(t,n,r,u);for(var d,f,g=t;t.prev!==t.next;)if(d=t.prev,f=t.next,u?h(t,n,r,u):a(t))e.push(d.i/i),e.push(t.i/i),e.push(f.i/i),A(t),t=f.next,g=f.next;else if(t=f,t===g){p?1===p?(t=l(t,e,i),o(t,e,i,n,r,u,2)):2===p&&c(t,e,i,n,r,u):o(s(t),e,i,n,r,u,1);break}}}function a(t){var e=t.prev,i=t,n=t.next;if(b(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(_(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&b(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function h(t,e,i,n){var r=t.prev,s=t,o=t.next;if(b(r,s,o)>=0)return!1;for(var a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,h=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,l=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,c=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,u=v(a,h,e,i,n),p=v(l,c,e,i,n),d=t.nextZ;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&_(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&b(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&_(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&b(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function l(t,e,i){var n=t;do{var r=n.prev,s=n.next.next;!w(r,s)&&T(r,n,n.next,s)&&E(r,s)&&E(s,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(s.i/i),A(n),A(n.next),n=t=s),n=n.next}while(n!==t);return n}function c(t,e,i,n,r,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&x(h,l)){var c=M(h,l);return h=s(h,h.next),c=s(c,c.next),o(h,e,i,n,r,a),void o(c,e,i,n,r,a)}l=l.next}h=h.next}while(h!==t)}function u(t,e,i,n){var o,a,h,l,c,u=[];for(o=0,a=e.length;o<a;o++)h=e[o]*n,l=o<a-1?e[o+1]*n:t.length,c=r(t,h,l,n,!1),c===c.next&&(c.steiner=!0),u.push(y(c));for(u.sort(p),o=0;o<u.length;o++)d(u[o],i),i=s(i,i.next);return i}function p(t,e){return t.x-e.x}function d(t,e){if(e=f(t,e)){var i=M(e,t);s(i,i.next)}}function f(t,e){var i,n=e,r=t.x,s=t.y,o=-(1/0);do{if(s<=n.y&&s>=n.next.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o){if(o=a,a===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===o)return i.prev;var h,l=i,c=i.x,u=i.y,p=1/0;for(n=i.next;n!==l;)r>=n.x&&n.x>=c&&_(s<u?r:o,s,c,u,s<u?o:r,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(r-n.x),(h<p||h===p&&n.x>i.x)&&E(n,t)&&(i=n,p=h)),n=n.next;return i}function m(t,e,i,n){var r=t;do null===r.z&&(r.z=v(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,g(r)}function g(t){var e,i,n,r,s,o,a,h,l=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,n=i,a=0,e=0;e<l&&(a++,n=n.nextZ,n);e++);for(h=l;a>0||h>0&&n;)0===a?(r=n,n=n.nextZ,h--):0!==h&&n?i.z<=n.z?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,h--):(r=i,i=i.nextZ,a--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,l*=2}while(o>1);return t}function v(t,e,i,n,r){return t=32767*(t-i)/r,e=32767*(e-n)/r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function y(t){var e=t,i=t;do e.x<i.x&&(i=e),e=e.next;while(e!==t);return i}function _(t,e,i,n,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(n-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(r-o)*(n-a)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!S(t,e)&&E(t,e)&&E(e,t)&&C(t,e)}function b(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function T(t,e,i,n){return!!(w(t,e)&&w(i,n)||w(t,n)&&w(i,e))||b(t,e,i)>0!=b(t,e,n)>0&&b(i,n,t)>0!=b(i,n,e)>0}function S(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&T(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function E(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function C(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do i.y>s!=i.next.y>s&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next;while(i!==t);return n}function M(t,e){var i=new I(t.i,t.x,t.y),n=new I(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function P(t,e,i,n){var r=new I(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function I(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(t,e,i,n){for(var r=0,s=e,o=i-n;s<i;s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}e.exports=n,n.deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,o=Math.abs(O(t,0,s,i));if(r)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,c=a<h-1?e[a+1]*i:t.length;o-=Math.abs(O(t,l,c,i))}var u=0;for(a=0;a<n.length;a+=3){var p=n[a]*i,d=n[a+1]*i,f=n[a+2]*i;u+=Math.abs((t[p]-t[f])*(t[d+1]-t[p+1])-(t[p]-t[d])*(t[f+1]-t[p+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[r][s][o]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},{}],32:[function(t,e,i){"use strict";function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function r(){}var s=Object.prototype.hasOwnProperty,o="function"!=typeof Object.create&&"~";r.prototype._events=void 0,r.prototype.eventNames=function(){var t,e=this._events,i=[];if(!e)return i;for(t in e)s.call(e,t)&&i.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},r.prototype.listeners=function(t,e){var i=o?o+t:t,n=this._events&&this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,a=new Array(s);r<s;r++)a[r]=n[r].fn;return a},r.prototype.emit=function(t,e,i,n,r,s){var a=o?o+t:t;if(!this._events||!this._events[a])return!1;var h,l,c=this._events[a],u=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,n),!0;case 5:return c.fn.call(c.context,e,i,n,r),!0;case 6:return c.fn.call(c.context,e,i,n,r,s),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var p,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;default:if(!h)for(p=1,h=new Array(u-1);p<u;p++)h[p-1]=arguments[p];c[l].fn.apply(c[l].context,h)}}return!0},r.prototype.on=function(t,e,i){var r=new n(e,i||this),s=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):this._events[s]=r,this},r.prototype.once=function(t,e,i){var r=new n(e,i||this,(!0)),s=o?o+t:t;return this._events||(this._events=o?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):this._events[s]=r,this},r.prototype.removeListener=function(t,e,i,n){var r=o?o+t:t;if(!this._events||!this._events[r])return this;var s=this._events[r],a=[];if(e)if(s.fn)(s.fn!==e||n&&!s.once||i&&s.context!==i)&&a.push(s);else for(var h=0,l=s.length;h<l;h++)(s[h].fn!==e||n&&!s[h].once||i&&s[h].context!==i)&&a.push(s[h]);return a.length?this._events[r]=1===a.length?a[0]:a:delete this._events[r],this},r.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[o?o+t:t]:this._events=o?{}:Object.create(null),this):this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){
return this},r.prefixed=o,"undefined"!=typeof e&&(e.exports=r)},{}],33:[function(e,i,n){!function(e){var n=/iPhone/i,r=/iPod/i,s=/iPad/i,o=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,a=/Android/i,h=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,l=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,c=/IEMobile/i,u=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,p=/BlackBerry/i,d=/BB10/i,f=/Opera Mini/i,m=/(CriOS|Chrome)(?=.*\bMobile\b)/i,g=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,v=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),y=function(t,e){return t.test(e)},_=function(t){var e=t||navigator.userAgent,i=e.split("[FBAN");if("undefined"!=typeof i[1]&&(e=i[0]),i=e.split("Twitter"),"undefined"!=typeof i[1]&&(e=i[0]),this.apple={phone:y(n,e),ipod:y(r,e),tablet:!y(n,e)&&y(s,e),device:y(n,e)||y(r,e)||y(s,e)},this.amazon={phone:y(h,e),tablet:!y(h,e)&&y(l,e),device:y(h,e)||y(l,e)},this.android={phone:y(h,e)||y(o,e),tablet:!y(h,e)&&!y(o,e)&&(y(l,e)||y(a,e)),device:y(h,e)||y(l,e)||y(o,e)||y(a,e)},this.windows={phone:y(c,e),tablet:y(u,e),device:y(c,e)||y(u,e)},this.other={blackberry:y(p,e),blackberry10:y(d,e),opera:y(f,e),firefox:y(g,e),chrome:y(m,e),device:y(p,e)||y(d,e)||y(f,e)||y(g,e)||y(m,e)},this.seven_inch=y(v,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},x=function(){var t=new _;return t.Class=_,t};"undefined"!=typeof i&&i.exports&&"undefined"==typeof window?i.exports=_:"undefined"!=typeof i&&i.exports&&"undefined"!=typeof window?i.exports=x():"function"==typeof t&&t.amd?t("isMobile",[],e.isMobile=x()):e.isMobile=x()}(this)},{}],34:[function(t,e,i){function n(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}e.exports=n},{}],35:[function(t,e,i){function n(t,e){for(var i=-1,n=t?t.length:0;++i<n&&e(t[i],i,t)!==!1;);return t}e.exports=n},{}],36:[function(t,e,i){function n(t,e){var i=o(t)||s(t)?r(t.length,String):[],n=i.length,h=!!n;for(var c in t)!e&&!l.call(t,c)||h&&("length"==c||a(c,n))||i.push(c);return i}var r=t("./_baseTimes"),s=t("./isArguments"),o=t("./isArray"),a=t("./_isIndex"),h=Object.prototype,l=h.hasOwnProperty;e.exports=n},{"./_baseTimes":39,"./_isIndex":40,"./isArguments":44,"./isArray":45}],37:[function(t,e,i){function n(t){if(!r(t))return s(t);var e=[];for(var i in Object(t))a.call(t,i)&&"constructor"!=i&&e.push(i);return e}var r=t("./_isPrototype"),s=t("./_nativeKeys"),o=Object.prototype,a=o.hasOwnProperty;e.exports=n},{"./_isPrototype":41,"./_nativeKeys":42}],38:[function(t,e,i){function n(t,e){return e=s(void 0===e?t.length-1:e,0),function(){for(var i=arguments,n=-1,o=s(i.length-e,0),a=Array(o);++n<o;)a[n]=i[e+n];n=-1;for(var h=Array(e+1);++n<e;)h[n]=i[n];return h[e]=a,r(t,this,h)}}var r=t("./_apply"),s=Math.max;e.exports=n},{"./_apply":34}],39:[function(t,e,i){function n(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}e.exports=n},{}],40:[function(t,e,i){function n(t,e){return e=null==e?r:e,!!e&&("number"==typeof t||s.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,s=/^(?:0|[1-9]\d*)$/;e.exports=n},{}],41:[function(t,e,i){function n(t){var e=t&&t.constructor,i="function"==typeof e&&e.prototype||r;return t===i}var r=Object.prototype;e.exports=n},{}],42:[function(t,e,i){var n=t("./_overArg"),r=n(Object.keys,Object);e.exports=r},{"./_overArg":43}],43:[function(t,e,i){function n(t,e){return function(i){return t(e(i))}}e.exports=n},{}],44:[function(t,e,i){function n(t){return r(t)&&a.call(t,"callee")&&(!l.call(t,"callee")||h.call(t)==s)}var r=t("./isArrayLikeObject"),s="[object Arguments]",o=Object.prototype,a=o.hasOwnProperty,h=o.toString,l=o.propertyIsEnumerable;e.exports=n},{"./isArrayLikeObject":47}],45:[function(t,e,i){var n=Array.isArray;e.exports=n},{}],46:[function(t,e,i){function n(t){return null!=t&&s(t.length)&&!r(t)}var r=t("./isFunction"),s=t("./isLength");e.exports=n},{"./isFunction":48,"./isLength":49}],47:[function(t,e,i){function n(t){return s(t)&&r(t)}var r=t("./isArrayLike"),s=t("./isObjectLike");e.exports=n},{"./isArrayLike":46,"./isObjectLike":51}],48:[function(t,e,i){function n(t){var e=r(t)?h.call(t):"";return e==s||e==o}var r=t("./isObject"),s="[object Function]",o="[object GeneratorFunction]",a=Object.prototype,h=a.toString;e.exports=n},{"./isObject":50}],49:[function(t,e,i){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;e.exports=n},{}],50:[function(t,e,i){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=n},{}],51:[function(t,e,i){function n(t){return!!t&&"object"==typeof t}e.exports=n},{}],52:[function(t,e,i){function n(t){return"symbol"==typeof t||r(t)&&a.call(t)==s}var r=t("./isObjectLike"),s="[object Symbol]",o=Object.prototype,a=o.toString;e.exports=n},{"./isObjectLike":51}],53:[function(t,e,i){function n(t){return o(t)?r(t):s(t)}var r=t("./_arrayLikeKeys"),s=t("./_baseKeys"),o=t("./isArrayLike");e.exports=n},{"./_arrayLikeKeys":36,"./_baseKeys":37,"./isArrayLike":46}],54:[function(t,e,i){function n(){}e.exports=n},{}],55:[function(t,e,i){function n(t,e){if("function"!=typeof t)throw new TypeError(o);return e=void 0===e?e:s(e),r(t,e)}var r=t("./_baseRest"),s=t("./toInteger"),o="Expected a function";e.exports=n},{"./_baseRest":38,"./toInteger":57}],56:[function(t,e,i){function n(t){if(!t)return 0===t?t:0;if(t=r(t),t===s||t===-s){var e=t<0?-1:1;return e*o}return t===t?t:0}var r=t("./toNumber"),s=1/0,o=1.7976931348623157e308;e.exports=n},{"./toNumber":58}],57:[function(t,e,i){function n(t){var e=r(t),i=e%1;return e===e?i?e-i:e:0}var r=t("./toFinite");e.exports=n},{"./toFinite":56}],58:[function(t,e,i){function n(t){if("number"==typeof t)return t;if(s(t))return o;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var i=l.test(t);return i||c.test(t)?u(t.slice(2),i?2:8):h.test(t)?o:+t}var r=t("./isObject"),s=t("./isSymbol"),o=NaN,a=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=n},{"./isObject":50,"./isSymbol":52}],59:[function(t,e,i){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var n=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==n.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(s){return!1}}var s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(t,e){for(var i,r,a=n(t),h=1;h<arguments.length;h++){i=Object(arguments[h]);for(var l in i)s.call(i,l)&&(a[l]=i[l]);if(Object.getOwnPropertySymbols){r=Object.getOwnPropertySymbols(i);for(var c=0;c<r.length;c++)o.call(i,r[c])&&(a[r[c]]=i[r[c]])}}return a}},{}],60:[function(t,e,i){(function(t){function e(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return r.exec(t).slice(1)};i.resolve=function(){for(var i="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var o=s>=0?arguments[s]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(i=o+"/"+i,r="/"===o.charAt(0))}return i=e(n(i.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+i||"."},i.normalize=function(t){var r=i.isAbsolute(t),s="/"===o(t,-1);return t=e(n(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&s&&(t+="/"),(r?"/":"")+t},i.isAbsolute=function(t){return"/"===t.charAt(0)},i.join=function(){var t=Array.prototype.slice.call(arguments,0);return i.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},i.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=i.resolve(t).substr(1),e=i.resolve(e).substr(1);for(var r=n(t.split("/")),s=n(e.split("/")),o=Math.min(r.length,s.length),a=o,h=0;h<o;h++)if(r[h]!==s[h]){a=h;break}for(var l=[],h=a;h<r.length;h++)l.push("..");return l=l.concat(s.slice(a)),l.join("/")},i.sep="/",i.delimiter=":",i.dirname=function(t){var e=s(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},i.basename=function(t,e){var i=s(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},i.extname=function(t){return s(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,t("_process"))},{_process:61}],61:[function(t,e,i){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function o(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function a(){g&&f&&(g=!1,f.length?m=f.concat(m):v=-1,m.length&&h())}function h(){if(!g){var t=s(a);g=!0;for(var e=m.length;e;){for(f=m,m=[];++v<e;)f&&f[v].run();v=-1,e=m.length}f=null,g=!1,o(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var u,p,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(t){p=r}}();var f,m=[],g=!1,v=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];m.push(new l(t,e)),1!==m.length||g||s(h)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],62:[function(e,n,r){(function(e){!function(i){function s(t){throw new RangeError(D[t])}function o(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function a(t,e){var i=t.split("@"),n="";i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(k,".");var r=t.split("."),s=o(r,e).join(".");return n+s}function h(t){for(var e,i,n=[],r=0,s=t.length;r<s;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<s?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function l(t){return o(t,function(t){var e="";return t>65535&&(t-=65536,e+=F(t>>>10&1023|55296),t=56320|1023&t),e+=F(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:T}function u(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function p(t,e,i){var n=0;for(t=i?B(t/M):t>>1,t+=B(t/e);t>L*E>>1;n+=T)t=B(t/L);return B(n+(L+1)*t/(t+C))}function d(t){var e,i,n,r,o,a,h,u,d,f,m=[],g=t.length,v=0,y=A,_=P;for(i=t.lastIndexOf(I),i<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&s("not-basic"),m.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<g;){for(o=v,a=1,h=T;r>=g&&s("invalid-input"),u=c(t.charCodeAt(r++)),(u>=T||u>B((w-v)/a))&&s("overflow"),v+=u*a,d=h<=_?S:h>=_+E?E:h-_,!(u<d);h+=T)f=T-d,a>B(w/f)&&s("overflow"),a*=f;e=m.length+1,_=p(v-o,e,0==o),B(v/e)>w-y&&s("overflow"),y+=B(v/e),v%=e,m.splice(v++,0,y)}return l(m)}function f(t){var e,i,n,r,o,a,l,c,d,f,m,g,v,y,_,x=[];for(t=h(t),g=t.length,e=A,i=0,o=P,a=0;a<g;++a)m=t[a],m<128&&x.push(F(m));for(n=r=x.length,r&&x.push(I);n<g;){for(l=w,a=0;a<g;++a)m=t[a],m>=e&&m<l&&(l=m);for(v=n+1,l-e>B((w-i)/v)&&s("overflow"),i+=(l-e)*v,e=l,a=0;a<g;++a)if(m=t[a],m<e&&++i>w&&s("overflow"),m==e){for(c=i,d=T;f=d<=o?S:d>=o+E?E:d-o,!(c<f);d+=T)_=c-f,y=T-f,x.push(F(u(f+_%y,0))),c=B(_/y);x.push(F(u(c,0))),o=p(i,v,n==r),i=0,++n}++i,++e}return x.join("")}function m(t){return a(t,function(t){return O.test(t)?d(t.slice(4).toLowerCase()):t})}function g(t){return a(t,function(t){return R.test(t)?"xn--"+f(t):t})}var v="object"==typeof r&&r&&!r.nodeType&&r,y="object"==typeof n&&n&&!n.nodeType&&n,_="object"==typeof e&&e;_.global!==_&&_.window!==_&&_.self!==_||(i=_);var x,b,w=2147483647,T=36,S=1,E=26,C=38,M=700,P=72,A=128,I="-",O=/^xn--/,R=/[^\x20-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=T-S,B=Math.floor,F=String.fromCharCode;if(x={version:"1.4.1",ucs2:{decode:h,encode:l},decode:d,encode:f,toASCII:g,toUnicode:m},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return x});else if(v&&y)if(n.exports==v)y.exports=x;else for(b in x)x.hasOwnProperty(b)&&(v[b]=x[b]);else i.punycode=x}(this)}).call(this,"undefined"!=typeof i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],63:[function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,s){e=e||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var c=0;c<l;++c){var u,p,d,f,m=t[c].replace(a,"%20"),g=m.indexOf(i);g>=0?(u=m.substr(0,g),p=m.substr(g+1)):(u=m,p=""),d=decodeURIComponent(u),f=decodeURIComponent(p),n(o,d)?r(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],64:[function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(o(t),function(o){var a=encodeURIComponent(r(o))+i;return s(t[o])?n(t[o],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[o]))}).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],65:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":63,"./encode":64}],66:[function(t,e,i){"use strict";function n(t,e){h.call(this),e=e||l,this.baseUrl=t||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._buffer=[],this._numToLoad=0,this._queue=r(this._boundLoadResource,e),this.resources={}}var r=t("async/queue"),s=t("async/eachSeries"),o=t("url"),a=t("./Resource"),h=t("eventemitter3"),l=10,c=100;n.prototype=Object.create(h.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.add=n.prototype.enqueue=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"==typeof t&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.resources[t])throw new Error('Resource with name "'+t+'" already exists.');return e=this._prepareUrl(e),this.resources[t]=new a(t,e,i),"function"==typeof n&&this.resources[t].once("afterMiddleware",n),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[t]),this._progressChunk=(c-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[t]),this._progressChunk=c/this._buffer.length),this},n.prototype.before=n.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},n.prototype.after=n.prototype.use=function(t){return this._afterMiddleware.push(t),this},n.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1;for(var t in this.resources){var e=this.resources[t];e.off("complete",this._onLoad,this),e.isLoading&&e.abort()}return this.resources={},this},n.prototype.load=function(t){if("function"==typeof t&&this.once("complete",t),this._queue.started)return this;this.emit("start",this),this.loading=!0;for(var e=0;e<this._buffer.length;++e)this._queue.push(this._buffer[e]);return this._buffer.length=0,this},n.prototype._prepareUrl=function(t){var e=o.parse(t);return e.protocol||!e.pathname||0===e.pathname.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t},n.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,s(this._beforeMiddleware,function(e,n){e.call(i,t,function(){n(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t.once("complete",i._onLoad,i),t.load())})},n.prototype._onComplete=function(){this.loading=!1,this.emit("complete",this,this.resources)},n.prototype._onLoad=function(t){var e=this;s(this._afterMiddleware,function(i,n){i.call(e,t,n)},function(){t.emit("afterMiddleware",t),e._numToLoad--,e.progress+=e._progressChunk,e.emit("progress",e,t),t.error?e.emit("error",t.error,e,t):e.emit("load",e,t),0===e._numToLoad&&(e.progress=100,e._onComplete())}),t._dequeue()},n.LOAD_TYPE=a.LOAD_TYPE,n.XHR_RESPONSE_TYPE=a.XHR_RESPONSE_TYPE},{"./Resource":67,"async/eachSeries":18,"async/queue":29,eventemitter3:32,url:72}],67:[function(t,e,i){"use strict";function n(t,e,i){if(o.call(this),i=i||{},"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");this.name=t,this.url=e,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this.isComplete=!1,this.isLoading=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function r(t){return t.toString().replace("object ","")}function s(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}var o=t("eventemitter3"),a=t("url"),h=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null,c=0,u=200,p=204;n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this.isComplete=!0,this.isLoading=!1,this.emit("complete",this)},n.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if("undefined"!=typeof this.data.src)this.data.src="";else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},n.prototype.load=function(t){if(!this.isLoading)if(this.isComplete){if(t){var e=this;setTimeout(function(){t(e)},1)}}else switch(t&&this.once("complete",t),this.isLoading=!0,this.emit("start",this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case n.LOAD_TYPE.IMAGE:this._loadElement("image");break;case n.LOAD_TYPE.AUDIO:this._loadSourceElement("audio");break;case n.LOAD_TYPE.VIDEO:this._loadSourceElement("video");break;case n.LOAD_TYPE.XHR:default:h&&this.crossOrigin?this._loadXdr():this._loadXhr()}},n.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&"undefined"!=typeof window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url);var e="is"+t[0].toUpperCase()+t.substring(1);this[e]===!1&&(this[e]=!0),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},n.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&"undefined"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort("Unsupported element "+t);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this["is"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},n.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=n.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},n.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){t.send()},0)},n.prototype._createSource=function(t,e,i){i||(i=t+"/"+e.substr(e.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=e,n.type=i,n},n.prototype._onError=function(t){this.abort("Failed to load element using "+t.target.nodeName)},n.prototype._onProgress=function(t){t&&t.lengthComputable&&this.emit("progress",this,t.loaded/t.total)},n.prototype._xhrOnError=function(){var t=this.xhr;this.abort(r(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},n.prototype._xhrOnAbort=function(){this.abort(r(this.xhr)+" Request was aborted by the user.")},n.prototype._xdrOnTimeout=function(){this.abort(r(this.xhr)+" Request timed out.")},n.prototype._xhrOnLoad=function(){var t=this.xhr,e="undefined"==typeof t.status?t.status:u;if(!(e===u||e===p||e===c&&t.responseText.length>0))return void this.abort("["+t.status+"]"+t.statusText+":"+t.responseURL);if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.isJson=!0}catch(i){return void this.abort("Error trying to parse loaded json:",i)}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(t.responseText,"text/xml")}else{var s=document.createElement("div");s.innerHTML=t.responseText,this.data=s}this.isXml=!0}catch(i){return void this.abort("Error trying to parse loaded xml:",i)}else this.data=t.response||t.responseText;this.complete()},n.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,l||(l=document.createElement("a")),l.href=t,t=a.parse(l.href);var i=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"},n.prototype._determineXhrType=function(){return n._xhrTypeMap[this._getExtension()]||n.XHR_RESPONSE_TYPE.TEXT},n.prototype._determineLoadType=function(){return n._loadTypeMap[this._getExtension()]||n.LOAD_TYPE.XHR},n.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?");n!==-1&&(t=t.substring(0,n)),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},n.prototype._getMimeFromXhrType=function(t){switch(t){case n.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case n.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case n.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case n.XHR_RESPONSE_TYPE.JSON:return"application/json";case n.XHR_RESPONSE_TYPE.DEFAULT:case n.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},n.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},n.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},n._loadTypeMap={gif:n.LOAD_TYPE.IMAGE,png:n.LOAD_TYPE.IMAGE,bmp:n.LOAD_TYPE.IMAGE,jpg:n.LOAD_TYPE.IMAGE,jpeg:n.LOAD_TYPE.IMAGE,tif:n.LOAD_TYPE.IMAGE,tiff:n.LOAD_TYPE.IMAGE,webp:n.LOAD_TYPE.IMAGE,tga:n.LOAD_TYPE.IMAGE,"svg+xml":n.LOAD_TYPE.IMAGE},n._xhrTypeMap={xhtml:n.XHR_RESPONSE_TYPE.DOCUMENT,html:n.XHR_RESPONSE_TYPE.DOCUMENT,htm:n.XHR_RESPONSE_TYPE.DOCUMENT,xml:n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:n.XHR_RESPONSE_TYPE.DOCUMENT,svg:n.XHR_RESPONSE_TYPE.DOCUMENT,gif:n.XHR_RESPONSE_TYPE.BLOB,png:n.XHR_RESPONSE_TYPE.BLOB,bmp:n.XHR_RESPONSE_TYPE.BLOB,jpg:n.XHR_RESPONSE_TYPE.BLOB,jpeg:n.XHR_RESPONSE_TYPE.BLOB,tif:n.XHR_RESPONSE_TYPE.BLOB,tiff:n.XHR_RESPONSE_TYPE.BLOB,webp:n.XHR_RESPONSE_TYPE.BLOB,tga:n.XHR_RESPONSE_TYPE.BLOB,json:n.XHR_RESPONSE_TYPE.JSON,text:n.XHR_RESPONSE_TYPE.TEXT,txt:n.XHR_RESPONSE_TYPE.TEXT},n.setExtensionLoadType=function(t,e){s(n._loadTypeMap,t,e)},n.setExtensionXhrType=function(t,e){s(n._xhrTypeMap,t,e)}},{eventemitter3:32,url:72}],68:[function(t,e,i){"use strict";e.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(t){for(var e,i="",n=new Array(4),r=0,s=0,o=0;r<t.length;){for(e=new Array(3),s=0;s<e.length;s++)r<t.length?e[s]=255&t.charCodeAt(r++):e[s]=0;switch(n[0]=e[0]>>2,n[1]=(3&e[0])<<4|e[1]>>4,n[2]=(15&e[1])<<2|e[2]>>6,n[3]=63&e[2],o=r-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(s=0;s<n.length;s++)i+=this._keyStr.charAt(n[s])}return i}}},{}],69:[function(t,e,i){"use strict";e.exports=t("./Loader"),e.exports.Resource=t("./Resource"),e.exports.middleware={caching:{memory:t("./middlewares/caching/memory")},parsing:{blob:t("./middlewares/parsing/blob")}}},{"./Loader":66,"./Resource":67,"./middlewares/caching/memory":70,"./middlewares/parsing/blob":71}],70:[function(t,e,i){"use strict";var n={};e.exports=function(){return function(t,e){n[t.url]?(t.data=n[t.url],t.complete()):t.once("complete",function(){n[this.url]=this.data}),e()}}},{}],71:[function(t,e,i){"use strict";var n=t("../../Resource"),r=t("../../b64"),s=window.URL||window.webkitURL;e.exports=function(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===n.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=s.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.isImage=!0,void(t.data.onload=function(){s.revokeObjectURL(i),t.data.onload=null,e()})}}else{var o=t.xhr.getResponseHeader("content-type");if(o&&0===o.indexOf("image"))return t.data=new Image,t.data.src="data:"+o+";base64,"+r.encodeBinary(t.xhr.responseText),t.isImage=!0,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}},{"../../Resource":67,"../../b64":68}],72:[function(t,e,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&l.isObject(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}function s(t){return l.isString(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)}function o(t,e){return r(t,!1,!0).resolve(e)}function a(t,e){return t?r(t,!1,!0).resolveObject(e):e}var h=t("punycode"),l=t("./util");i.parse=r,i.resolve=o,i.resolveObject=a,i.format=s,i.Url=n;var c=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],f=["{","}","|","\\","^","`"].concat(d),m=["'"].concat(f),g=["%","/","?",";","#"].concat(m),v=["/","?","#"],y=255,_=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},T={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=t("querystring");n.prototype.parse=function(t,e,i){if(!l.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=n!==-1&&n<t.indexOf("#")?"?":"#",s=t.split(r),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(r);var a=t;if(a=a.trim(),!i&&1===t.split("#").length){var u=p.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],e?this.query=S.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var d=c.exec(a);if(d){d=d[0];var f=d.toLowerCase();this.protocol=f,a=a.substr(d.length)}if(i||d||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===a.substr(0,2);!E||d&&w[d]||(a=a.substr(2),this.slashes=!0)}if(!w[d]&&(E||d&&!T[d])){for(var C=-1,M=0;M<v.length;M++){var P=a.indexOf(v[M]);P!==-1&&(C===-1||P<C)&&(C=P)}var A,I;I=C===-1?a.lastIndexOf("@"):a.lastIndexOf("@",C),I!==-1&&(A=a.slice(0,I),a=a.slice(I+1),this.auth=decodeURIComponent(A)),C=-1;for(var M=0;M<g.length;M++){var P=a.indexOf(g[M]);P!==-1&&(C===-1||P<C)&&(C=P)}C===-1&&(C=a.length),this.host=a.slice(0,C),a=a.slice(C),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var R=this.hostname.split(/\./),M=0,k=R.length;M<k;M++){var D=R[M];if(D&&!D.match(_)){for(var L="",B=0,F=D.length;B<F;B++)L+=D.charCodeAt(B)>127?"x":D[B];if(!L.match(_)){var N=R.slice(0,M),U=R.slice(M+1),G=D.match(x);
G&&(N.push(G[1]),U.unshift(G[2])),U.length&&(a="/"+U.join(".")+a),this.hostname=N.join(".");break}}}this.hostname.length>y?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=h.toASCII(this.hostname));var j=this.port?":"+this.port:"",X=this.hostname||"";this.host=X+j,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!b[f])for(var M=0,k=m.length;M<k;M++){var H=m[M];if(a.indexOf(H)!==-1){var Y=encodeURIComponent(H);Y===H&&(Y=escape(H)),a=a.split(H).join(Y)}}var W=a.indexOf("#");W!==-1&&(this.hash=a.substr(W),a=a.slice(0,W));var V=a.indexOf("?");if(V!==-1?(this.search=a.substr(V),this.query=a.substr(V+1),e&&(this.query=S.parse(this.query)),a=a.slice(0,V)):e&&(this.search="",this.query={}),a&&(this.pathname=a),T[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",z=this.search||"";this.path=j+z}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=t+this.host:this.hostname&&(r=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(s=S.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||T[e])&&r!==!1?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),o=o.replace("#","%23"),e+r+i+o+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(l.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var i=new n,r=Object.keys(this),s=0;s<r.length;s++){var o=r[s];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),h=0;h<a.length;h++){var c=a[h];"protocol"!==c&&(i[c]=t[c])}return T[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!T[t.protocol]){for(var u=Object.keys(t),p=0;p<u.length;p++){var d=u[p];i[d]=t[d]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||w[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",g=i.search||"";i.path=m+g}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var v=i.pathname&&"/"===i.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=y||v||i.host&&t.pathname,x=_,b=i.pathname&&i.pathname.split("/")||[],f=t.pathname&&t.pathname.split("/")||[],S=i.protocol&&!T[i.protocol];if(S&&(i.hostname="",i.port=null,i.host&&(""===b[0]?b[0]=i.host:b.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),_=_&&(""===f[0]||""===b[0])),y)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,b=f;else if(f.length)b||(b=[]),b.pop(),b=b.concat(f),i.search=t.search,i.query=t.query;else if(!l.isNullOrUndefined(t.search)){if(S){i.hostname=i.host=b.shift();var E=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");E&&(i.auth=E.shift(),i.host=i.hostname=E.shift())}return i.search=t.search,i.query=t.query,l.isNull(i.pathname)&&l.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!b.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var C=b.slice(-1)[0],M=(i.host||t.host||b.length>1)&&("."===C||".."===C)||""===C,P=0,A=b.length;A>=0;A--)C=b[A],"."===C?b.splice(A,1):".."===C?(b.splice(A,1),P++):P&&(b.splice(A,1),P--);if(!_&&!x)for(;P--;P)b.unshift("..");!_||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),M&&"/"!==b.join("/").substr(-1)&&b.push("");var I=""===b[0]||b[0]&&"/"===b[0].charAt(0);if(S){i.hostname=i.host=I?"":b.length?b.shift():"";var E=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");E&&(i.auth=E.shift(),i.host=i.hostname=E.shift())}return _=_||i.host&&b.length,_&&!I&&b.unshift(""),b.length?i.pathname=b.join("/"):(i.pathname=null,i.path=null),l.isNull(i.pathname)&&l.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=u.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":73,punycode:62,querystring:65}],73:[function(t,e,i){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],74:[function(t,e,i){function n(t){(s.tablet||s.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}var r=t("../core"),s=t("ismobilejs");Object.assign(r.DisplayObject.prototype,t("./accessibleTarget")),n.prototype.constructor=n,e.exports=n,n.prototype.createTouchHook=function(){var t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",function(){this.isMobileAccessabillity=!0,this.activate(),document.body.removeChild(t)}.bind(this)),document.body.appendChild(t)},n.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},n.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},n.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=e.length-1;i>=0;i--)this.updateAccessibleObjects(e[i])}},n.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var o=this.children[s];if(o.renderId!==this.renderId)o._accessibleActive=!1,r.utils.removeItems(this.children,s,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,s--,0===this.children.length&&this.deactivate();else{n=o._accessibleDiv;var a=o.hitArea,h=o.worldTransform;o.hitArea?(n.style.left=(h.tx+a.x*h.a)*e+"px",n.style.top=(h.ty+a.y*h.d)*i+"px",n.style.width=a.width*h.a*e+"px",n.style.height=a.height*h.d*i+"px"):(a=o.getBounds(),this.capHitArea(a),n.style.left=a.x*e+"px",n.style.top=a.y*i+"px",n.style.width=a.width*e+"px",n.style.height=a.height*i+"px")}}this.renderId++}},n.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},n.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleTitle||t.accessibleHint||(e.title="displayObject "+this.tabIndex),t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},n.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},n.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},n.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},n.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},n.prototype._onMouseMove=function(){this.deactivate()},n.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},r.WebGLRenderer.registerPlugin("accessibility",n),r.CanvasRenderer.registerPlugin("accessibility",n)},{"../core":97,"./accessibleTarget":75,ismobilejs:33}],75:[function(t,e,i){var n={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};e.exports=n},{}],76:[function(t,e,i){e.exports={accessibleTarget:t("./accessibleTarget"),AccessibilityManager:t("./AccessibilityManager")}},{"./AccessibilityManager":74,"./accessibleTarget":75}],77:[function(t,e,i){function n(t){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var e=t.slice(0);return e.unshift("precision "+s.PRECISION.DEFAULT+" float;"),e}}else if("precision"!==t.substring(0,9))return"precision "+s.PRECISION.DEFAULT+" float;\n"+t;return t}var r=t("pixi-gl-core").GLShader,s=t("./const"),o=function(t,e,i,s){r.call(this,t,n(e),n(i),s)};o.prototype=Object.create(r.prototype),o.prototype.constructor=o,e.exports=o},{"./const":78,"pixi-gl-core":7}],78:[function(t,e,i){var n={VERSION:"4.0.1",PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},WRAP_MODES:{DEFAULT:0,CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},GC_MODES:{DEFAULT:0,AUTO:0,MANUAL:1},MIPMAP_TEXTURES:!0,RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},PRECISION:{DEFAULT:"mediump",LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},TRANSFORM_MODE:{DEFAULT:0,STATIC:0,DYNAMIC:1},TEXT_GRADIENT:{LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},SPRITE_BATCH_SIZE:4096,SPRITE_MAX_TEXTURES:t("./utils/maxRecommendedTextures")(32)};e.exports=n},{"./utils/maxRecommendedTextures":152}],79:[function(t,e,i){function n(){this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.rect=null}var r=t("../math"),s=r.Rectangle;n.prototype.constructor=n,e.exports=n,n.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},n.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},n.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?s.EMPTY:(t=t||new s(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},n.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},n.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,s=t[0],o=t[1];e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,s=t[2],o=t[3],e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,s=t[4],o=t[5],e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,s=t[6],o=t[7],e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},n.prototype.addFrame=function(t,e,i,n,r){var s=t.worldTransform,o=s.a,a=s.b,h=s.c,l=s.d,c=s.tx,u=s.ty,p=this.minX,d=this.minY,f=this.maxX,m=this.maxY,g=o*e+h*i+c,v=a*e+l*i+u;p=g<p?g:p,d=v<d?v:d,f=g>f?g:f,m=v>m?v:m,g=o*n+h*i+c,v=a*n+l*i+u,p=g<p?g:p,d=v<d?v:d,f=g>f?g:f,m=v>m?v:m,g=o*e+h*r+c,v=a*e+l*r+u,p=g<p?g:p,d=v<d?v:d,f=g>f?g:f,m=v>m?v:m,g=o*n+h*r+c,v=a*n+l*r+u,p=g<p?g:p,d=v<d?v:d,f=g>f?g:f,m=v>m?v:m,this.minX=p,this.minY=d,this.maxX=f,this.maxY=m},n.prototype.addVertices=function(t,e,i,n){for(var r=t.worldTransform,s=r.a,o=r.b,a=r.c,h=r.d,l=r.tx,c=r.ty,u=this.minX,p=this.minY,d=this.maxX,f=this.maxY,m=i;m<n;m+=2){var g=e[m],v=e[m+1],y=s*g+a*v+l,_=h*v+o*g+c;u=y<u?y:u,p=_<p?_:p,d=y>d?y:d,f=_>f?_:f}this.minX=u,this.minY=p,this.maxX=d,this.maxY=f},n.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r}},{"../math":102}],80:[function(t,e,i){function n(){s.call(this),this.children=[]}var r=t("../utils"),s=t("./DisplayObject");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;0!==e?this.scale.x=t/e:this.scale.x=1,this._width=t}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;0!==e?this.scale.y=t/e:this.scale.y=1,this._height=t}}}),n.prototype.onChildrenChange=function(){},n.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.transform._parentID=-1,this.children.push(t),this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},n.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.onChildrenChange(e),t.emit("added",this),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},n.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);if(i<0||n<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},n.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e},n.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);r.removeItems(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},n.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[t]},n.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var n=this.children.indexOf(t);if(n===-1)return;t.parent=null,r.removeItems(this.children,n,1),this.onChildrenChange(n),t.emit("removed",this)}return t},n.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,r.removeItems(this.children,t,1),this.onChildrenChange(t),e.emit("removed",this),e},n.prototype.removeChildren=function(t,e){var i,n,r=t||0,s="number"==typeof e?e:this.children.length,o=s-r;if(o>0&&o<=s){for(i=this.children.splice(r,o),n=0;n<i.length;++n)i[n].parent=null;for(this.onChildrenChange(t),n=0;n<i.length;++n)i[n].emit("removed",this);return i}if(0===o&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},n.prototype.updateTransform=function(){if(this._boundsID++,this.visible){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t)this.children[t].updateTransform()}},n.prototype.containerUpdateTransform=n.prototype.updateTransform,n.prototype.calculateBounds=function(){if(this._bounds.clear(),this.visible){this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.calculateBounds(),this._bounds.addBounds(e._bounds)}this._boundsID=this._lastBoundsID}},n.prototype._calculateBounds=function(){},n.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},n.prototype.renderAdvancedWebGL=function(t){t.currentRenderer.flush();var e,i,n=this._filters,r=this._mask;if(n){for(this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0,e=0;e<n.length;e++)n[e].enabled&&this._enabledFilters.push(n[e]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}for(r&&t.maskManager.pushMask(this,this._mask),t.currentRenderer.start(),this._renderWebGL(t),e=0,i=this.children.length;e<i;e++)this.children[e].renderWebGL(t);t.currentRenderer.flush(),r&&t.maskManager.popMask(this,this._mask),n&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter(),t.currentRenderer.start()},n.prototype._renderWebGL=function(t){},n.prototype._renderCanvas=function(t){},n.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},n.prototype.destroy=function(t){s.prototype.destroy.call(this);var e="boolean"==typeof t?t:t&&t.children,i=this.children;if(this.children=null,e)for(var n=i.length-1;n>=0;n--){var r=i[n];r.parent=null,r.destroy(t)}}},{"../utils":151,"./DisplayObject":81}],81:[function(t,e,i){function n(){r.call(this);var t=s.TRANSFORM_MODE.DEFAULT===s.TRANSFORM_MODE.STATIC?o:a;this.transform=new t,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.filterArea=null,this._filters=null,this._enabledFilters=null,this._bounds=new h,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null}var r=t("eventemitter3"),s=t("../const"),o=t("./TransformStatic"),a=t("./Transform"),h=t("./Bounds"),l=t("../math"),c=new n;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{x:{get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},worldTransform:{get:function(){return this.transform.worldTransform}},localTransform:{get:function(){return this.transform.localTransform}},position:{get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},scale:{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},pivot:{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},skew:{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},rotation:{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},worldVisible:{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},mask:{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}}),n.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},n.prototype.displayObjectUpdateTransform=n.prototype.updateTransform,n.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(c.transform)},n.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=c,this.parent.transform._worldID++,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new l.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},n.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=c.transform,t||(this._localBoundsRect||(this._localBoundsRect=new l.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=i,this.transform=e,n},n.prototype.toGlobal=function(t,e,i){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=c,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},n.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=c,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},n.prototype.renderWebGL=function(t){},n.prototype.renderCanvas=function(t){},n.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},n.prototype.setTransform=function(t,e,i,n,r,s,o,a,h){return this.position.x=t||0,this.position.y=e||0,this.scale.x=i?i:1,this.scale.y=n?n:1,this.rotation=r||0,this.skew.x=s||0,this.skew.y=o||0,this.pivot.x=a||0,this.pivot.y=h||0,this},n.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1}},{"../const":78,"../math":102,"./Bounds":79,"./Transform":82,"./TransformStatic":84,eventemitter3:32}],82:[function(t,e,i){function n(){s.call(this),this.position=new r.Point(0,0),this.scale=new r.Point(1,1),this.skew=new r.ObservablePoint(this.updateSkew,this,0,0),this.pivot=new r.Point(0,0),this._rotation=0,this._sr=Math.sin(0),this._cr=Math.cos(0),this._cy=Math.cos(0),this._sy=Math.sin(0),this._nsx=Math.sin(0),this._cx=Math.cos(0)}var r=t("../math"),s=t("./TransformBase");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.updateSkew=function(){this._cy=Math.cos(this.skew.y),this._sy=Math.sin(this.skew.y),this._nsx=Math.sin(this.skew.x),this._cx=Math.cos(this.skew.x)},n.prototype.updateLocalTransform=function(){var t,e,i,n,r=this.localTransform;t=this._cr*this.scale.x,e=this._sr*this.scale.x,i=-this._sr*this.scale.y,n=this._cr*this.scale.y,r.a=this._cy*t+this._sy*i,r.b=this._cy*e+this._sy*n,r.c=this._nsx*t+this._cx*i,r.d=this._nsx*e+this._cx*n},n.prototype.updateTransform=function(t){var e,i,n,r,s=t.worldTransform,o=this.worldTransform,a=this.localTransform;e=this._cr*this.scale.x,i=this._sr*this.scale.x,n=-this._sr*this.scale.y,r=this._cr*this.scale.y,a.a=this._cy*e+this._sy*n,a.b=this._cy*i+this._sy*r,a.c=this._nsx*e+this._cx*n,a.d=this._nsx*i+this._cx*r,a.tx=this.position.x-(this.pivot.x*a.a+this.pivot.y*a.c),a.ty=this.position.y-(this.pivot.x*a.b+this.pivot.y*a.d),o.a=a.a*s.a+a.b*s.c,o.b=a.a*s.b+a.b*s.d,o.c=a.c*s.a+a.d*s.c,o.d=a.c*s.b+a.d*s.d,o.tx=a.tx*s.a+a.ty*s.c+s.tx,o.ty=a.tx*s.b+a.ty*s.d+s.ty,this._worldID++},n.prototype.setFromMatrix=function(t){t.decompose(this)},Object.defineProperties(n.prototype,{rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this._sr=Math.sin(t),this._cr=Math.cos(t)}}}),e.exports=n},{"../math":102,"./TransformBase":83}],83:[function(t,e,i){function n(){this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0}var r=t("../math");n.prototype.constructor=n,n.prototype.updateLocalTransform=function(){},n.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,n=this.localTransform;i.a=n.a*e.a+n.b*e.c,i.b=n.a*e.b+n.b*e.d,i.c=n.c*e.a+n.d*e.c,i.d=n.c*e.b+n.d*e.d,i.tx=n.tx*e.a+n.ty*e.c+e.tx,i.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},n.prototype.updateWorldTransform=n.prototype.updateTransform,n.IDENTITY=new n,e.exports=n},{"../math":102}],84:[function(t,e,i){function n(){s.call(this),this.position=new r.ObservablePoint(this.onChange,this,0,0),this.scale=new r.ObservablePoint(this.onChange,this,1,1),this.pivot=new r.ObservablePoint(this.onChange,this,0,0),this.skew=new r.ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._sr=Math.sin(0),this._cr=Math.cos(0),this._cy=Math.cos(0),this._sy=Math.sin(0),this._nsx=Math.sin(0),this._cx=Math.cos(0),this._localID=0,this._currentLocalID=0}var r=t("../math"),s=t("./TransformBase");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.onChange=function(){this._localID++},n.prototype.updateSkew=function(){this._cy=Math.cos(this.skew._y),this._sy=Math.sin(this.skew._y),this._nsx=Math.sin(this.skew._x),this._cx=Math.cos(this.skew._x),this._localID++},n.prototype.updateLocalTransform=function(){var t=this.localTransform;if(this._localID!==this._currentLocalID){var e,i,n,r;e=this._cr*this.scale._x,i=this._sr*this.scale._x,n=-this._sr*this.scale._y,r=this._cr*this.scale._y,t.a=this._cy*e+this._sy*n,t.b=this._cy*i+this._sy*r,t.c=this._nsx*e+this._cx*n,t.d=this._nsx*i+this._cx*r,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1}},n.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,n=this.localTransform;if(this._localID!==this._currentLocalID){var r,s,o,a;r=this._cr*this.scale._x,s=this._sr*this.scale._x,o=-this._sr*this.scale._y,a=this._cr*this.scale._y,n.a=this._cy*r+this._sy*o,n.b=this._cy*s+this._sy*a,n.c=this._nsx*r+this._cx*o,n.d=this._nsx*s+this._cx*a,n.tx=this.position._x-(this.pivot._x*n.a+this.pivot._y*n.c),n.ty=this.position._y-(this.pivot._x*n.b+this.pivot._y*n.d),this._currentLocalID=this._localID,this._parentID=-1}this._parentID!==t._worldID&&(i.a=n.a*e.a+n.b*e.c,i.b=n.a*e.b+n.b*e.d,i.c=n.c*e.a+n.d*e.c,i.d=n.c*e.b+n.d*e.d,i.tx=n.tx*e.a+n.ty*e.c+e.tx,i.ty=n.tx*e.b+n.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},n.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperties(n.prototype,{rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this._sr=Math.sin(t),this._cr=Math.cos(t),this._localID++}}}),e.exports=n},{"../math":102,"./TransformBase":83}],85:[function(t,e,i){function n(){s.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=u.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new d,this.dirty=0,this.fastRectDirty=-1,this.clearDirty=0,this.boundsDirty=-1,this.cachedSpriteDirty=!1,this._spriteRect=null,this._fastRect=!1}var r,s=t("../display/Container"),o=t("../textures/RenderTexture"),a=t("../textures/Texture"),h=t("./GraphicsData"),l=t("../sprites/Sprite"),c=t("../math"),u=t("../const"),p=t("../utils"),d=t("../display/Bounds"),f=t("./utils/bezierCurveTo"),m=t("../renderers/canvas/CanvasRenderer"),g=new c.Matrix,v=new c.Point,y=new Float32Array(4),_=new Float32Array(4);n._SPRITE_TEXTURE=null,n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){var t=new n;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},n.prototype.lineStyle=function(t,e,i){if(this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=void 0===i?1:i,this.currentPath)if(this.currentPath.shape.points.length){var n=new c.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},n.prototype.moveTo=function(t,e){var i=new c.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},n.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},n.prototype.quadraticCurveTo=function(t,e,i,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r,s,o=20,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var h=a[a.length-2],l=a[a.length-1],c=0,u=1;u<=o;++u)c=u/o,r=h+(t-h)*c,s=l+(e-l)*c,a.push(r+(t+(i-t)*c-r)*c,s+(e+(n-e)*c-s)*c);return this.dirty++,this},n.prototype.bezierCurveTo=function(t,e,i,n,r,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,a=o[o.length-2],h=o[o.length-1];return o.length-=2,f(a,h,t,e,i,n,r,s,o),this.dirty++,this},n.prototype.arcTo=function(t,e,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var s=this.currentPath.shape.points,o=s[s.length-2],a=s[s.length-1],h=a-e,l=o-t,c=n-e,u=i-t,p=Math.abs(h*u-l*c);if(p<1e-8||0===r)s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e);else{var d=h*h+l*l,f=c*c+u*u,m=h*c+l*u,g=r*Math.sqrt(d)/p,v=r*Math.sqrt(f)/p,y=g*m/d,_=v*m/f,x=g*u+v*l,b=g*c+v*h,w=l*(v+y),T=h*(v+y),S=u*(g+_),E=c*(g+_),C=Math.atan2(T-b,w-x),M=Math.atan2(E-b,S-x);this.arc(x+t,b+e,r,C,M,l*c>u*h)}return this.dirty++,this},n.prototype.arc=function(t,e,i,n,r,s){if(s=s||!1,n===r)return this;!s&&r<=n?r+=2*Math.PI:s&&n<=r&&(n+=2*Math.PI);var o=s?(n-r)*-1:r-n,a=40*Math.ceil(Math.abs(o)/(2*Math.PI));if(0===o)return this;var h=t+Math.cos(n)*i,l=e+Math.sin(n)*i;this.currentPath?this.currentPath.shape.points.push(h,l):this.moveTo(h,l);for(var c=this.currentPath.shape.points,u=o/(2*a),p=2*u,d=Math.cos(u),f=Math.sin(u),m=a-1,g=m%1/m,v=0;v<=m;v++){
var y=v+g*v,_=u+n+p*y,x=Math.cos(_),b=-Math.sin(_);c.push((d*x+f*b)*i+t,(d*-b+f*x)*i+e)}return this.dirty++,this},n.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},n.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},n.prototype.drawRect=function(t,e,i,n){return this.drawShape(new c.Rectangle(t,e,i,n)),this},n.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new c.RoundedRectangle(t,e,i,n,r)),this},n.prototype.drawCircle=function(t,e,i){return this.drawShape(new c.Circle(t,e,i)),this},n.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new c.Ellipse(t,e,i,n)),this},n.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof c.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var r=new c.Polygon(e);return r.closed=i,this.drawShape(r),this},n.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty++,this.clearDirty++,this.graphicsData=[],this},n.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===u.SHAPES.RECT&&!this.graphicsData[0].lineWidth},n.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},n.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;if(!this._spriteRect){if(!n._SPRITE_TEXTURE){n._SPRITE_TEXTURE=o.create(10,10);var i=t._activeRenderTarget;t.bindRenderTexture(n._SPRITE_TEXTURE),t.clear([1,1,1,1]),t.bindRenderTarget(i)}this._spriteRect=new l(n._SPRITE_TEXTURE)}if(16777215===this.tint)this._spriteRect.tint=this.graphicsData[0].fillColor;else{var r=y,s=_;p.hex2rgb(this.graphicsData[0].fillColor,r),p.hex2rgb(this.tint,s),r[0]*=s[0],r[1]*=s[1],r[2]*=s[2],this._spriteRect.tint=p.rgb2hex(r)}this._spriteRect.alpha=this.graphicsData[0].fillAlpha,this._spriteRect.worldAlpha=this.worldAlpha*this._spriteRect.alpha,n._SPRITE_TEXTURE._frame.width=e.width,n._SPRITE_TEXTURE._frame.height=e.height,this._spriteRect.transform.worldTransform=this.transform.worldTransform,this._spriteRect.anchor.set(-e.x/e.width,-e.y/e.height),this._spriteRect.onAnchorUpdate(),this._spriteRect._renderWebGL(t)},n.prototype._renderCanvas=function(t){this.isMask!==!0&&t.plugins.graphics.render(this)},n.prototype._calculateBounds=function(){if(this.renderable){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.dirty++,this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)}},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,v);for(var e=this.graphicsData,i=0;i<e.length;i++){var n=e[i];if(n.fill&&n.shape&&n.shape.contains(v.x,v.y))return!0}return!1},n.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),i=1/0,n=-(1/0);if(this.graphicsData.length)for(var r,s,o,a,h,l,c=0;c<this.graphicsData.length;c++){var p=this.graphicsData[c],d=p.type,f=p.lineWidth;if(r=p.shape,d===u.SHAPES.RECT||d===u.SHAPES.RREC)o=r.x-f/2,a=r.y-f/2,h=r.width+f,l=r.height+f,t=o<t?o:t,e=o+h>e?o+h:e,i=a<i?a:i,n=a+l>n?a+l:n;else if(d===u.SHAPES.CIRC)o=r.x,a=r.y,h=r.radius+f/2,l=r.radius+f/2,t=o-h<t?o-h:t,e=o+h>e?o+h:e,i=a-l<i?a-l:i,n=a+l>n?a+l:n;else if(d===u.SHAPES.ELIP)o=r.x,a=r.y,h=r.width+f/2,l=r.height+f/2,t=o-h<t?o-h:t,e=o+h>e?o+h:e,i=a-l<i?a-l:i,n=a+l>n?a+l:n;else{s=r.points;for(var m=0;m<s.length;m+=2)o=s[m],a=s[m+1],t=o-f<t?o-f:t,e=o+f>e?o+f:e,i=a-f<i?a-f:i,n=a+f>n?a+f:n}}else t=0,e=0,i=0,n=0;var g=this.boundsPadding;this._localBounds.minX=t-g,this._localBounds.maxX=e+2*g,this._localBounds.minY=i-g,this._localBounds.maxY=n+2*g},n.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new h(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===u.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},n.prototype.generateCanvasTexture=function(t,e){e=e||1;var i=this.getLocalBounds(),n=new o.create(i.width*e,i.height*e);r||(r=new m),g.tx=-i.x,g.ty=-i.y,r.render(this,n,!1,g);var s=a.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t);return s.baseTexture.resolution=e,s},n.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},n.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},n.prototype.destroy=function(){s.prototype.destroy.apply(this,arguments);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();for(var e in this._webgl)for(var i=0;i<this._webgl[e].data.length;++i)this._webgl[e].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{"../const":78,"../display/Bounds":79,"../display/Container":80,"../math":102,"../renderers/canvas/CanvasRenderer":109,"../sprites/Sprite":133,"../textures/RenderTexture":143,"../textures/Texture":144,"../utils":151,"./GraphicsData":86,"./utils/bezierCurveTo":88}],86:[function(t,e,i){function n(t,e,i,n,r,s,o){this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this._lineTint=e,this.fillColor=n,this.fillAlpha=r,this._fillTint=n,this.fill=s,this.holes=[],this.shape=o,this.type=o.type}n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},n.prototype.addHole=function(t){this.holes.push(t)},n.prototype.destroy=function(){this.shape=null,this.holes=null}},{}],87:[function(t,e,i){function n(t){this.renderer=t}var r=t("../../renderers/canvas/CanvasRenderer"),s=t("../../const");n.prototype.constructor=n,e.exports=n,r.registerPlugin("graphics",n),n.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldAlpha,r=t.transform.worldTransform,o=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),i.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var h=t.graphicsData[a],l=h.shape,c=h._fillTint,u=h._lineTint;if(i.lineWidth=h.lineWidth,h.type===s.SHAPES.POLY){i.beginPath(),this.renderPolygon(l.points,l.closed,i);for(var p=0;p<h.holes.length;p++){var d=h.holes[p];this.renderPolygon(d.points,!0,i)}h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.stroke())}else if(h.type===s.SHAPES.RECT)(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.fillRect(l.x,l.y,l.width,l.height)),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.strokeRect(l.x,l.y,l.width,l.height));else if(h.type===s.SHAPES.CIRC)i.beginPath(),i.arc(l.x,l.y,l.radius,0,2*Math.PI),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.stroke());else if(h.type===s.SHAPES.ELIP){var f=2*l.width,m=2*l.height,g=l.x-f/2,v=l.y-m/2;i.beginPath();var y=.5522848,_=f/2*y,x=m/2*y,b=g+f,w=v+m,T=g+f/2,S=v+m/2;i.moveTo(g,S),i.bezierCurveTo(g,S-x,T-_,v,T,v),i.bezierCurveTo(T+_,v,b,S-x,b,S),i.bezierCurveTo(b,S+x,T+_,w,T,w),i.bezierCurveTo(T-_,w,g,S+x,g,S),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.stroke())}else if(h.type===s.SHAPES.RREC){var E=l.x,C=l.y,M=l.width,P=l.height,A=l.radius,I=Math.min(M,P)/2|0;A=A>I?I:A,i.beginPath(),i.moveTo(E,C+A),i.lineTo(E,C+P-A),i.quadraticCurveTo(E,C+P,E+A,C+P),i.lineTo(E+M-A,C+P),i.quadraticCurveTo(E+M,C+P,E+M,C+P-A),i.lineTo(E+M,C+A),i.quadraticCurveTo(E+M,C,E+M-A,C),i.lineTo(E+A,C),i.quadraticCurveTo(E,C,E,C+A),i.closePath(),(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.stroke())}}},n.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,n=(255&t.tint)/255,r=0;r<t.graphicsData.length;r++){var s=t.graphicsData[r],o=0|s.fillColor,a=0|s.lineColor;s._fillTint=((o>>16&255)/255*e*255<<16)+((o>>8&255)/255*i*255<<8)+(255&o)/255*n*255,s._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255}},n.prototype.renderPolygon=function(t,e,i){i.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;n++)i.lineTo(t[2*n],t[2*n+1]);e&&i.closePath()},n.prototype.destroy=function(){this.renderer=null}},{"../../const":78,"../../renderers/canvas/CanvasRenderer":109}],88:[function(t,e,i){var n=function(t,e,i,n,r,s,o,a,h){h=h||[];var l,c,u,p,d,f=20;h.push(t,e);for(var m=0,g=1;g<=f;++g)m=g/f,l=1-m,c=l*l,u=c*l,p=m*m,d=p*m,h.push(u*t+3*c*m*i+3*l*p*r+d*o,u*e+3*c*m*n+3*l*p*s+d*a);return h};e.exports=n},{}],89:[function(t,e,i){function n(t){o.call(this,t),this.graphicsDataPool=[],this.primitiveShader=null,this.gl=t.gl,this.CONTEXT_UID=0}var r=t("../../utils"),s=t("../../const"),o=t("../../renderers/webgl/utils/ObjectRenderer"),a=t("../../renderers/webgl/WebGLRenderer"),h=t("./WebGLGraphicsData"),l=t("./shaders/PrimitiveShader"),c=t("./utils/buildPoly"),u=t("./utils/buildRectangle"),p=t("./utils/buildRoundedRectangle"),d=t("./utils/buildCircle");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,a.registerPlugin("graphics",n),n.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new l(this.gl)},n.prototype.destroy=function(){o.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},n.prototype.render=function(t){var e,i=this.renderer,n=i.gl,s=t._webGL[this.CONTEXT_UID];s&&t.dirty===s.dirty||(this.updateGraphics(t),s=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;i.bindShader(o),i.state.setBlendMode(t.blendMode);for(var a=0,h=s.data.length;a<h;a++){e=s.data[a];var l=e.shader;i.bindShader(l),l.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),l.uniforms.tint=r.hex2rgb(t.tint),l.uniforms.alpha=t.worldAlpha,e.vao.bind().draw(n.TRIANGLE_STRIP,e.indices.length).unbind()}},n.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[this.CONTEXT_UID];i||(i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),i.dirty=t.dirty;var n;if(t.clearDirty!==i.clearDirty){for(i.clearDirty=t.clearDirty,n=0;n<i.data.length;n++){var r=i.data[n];this.graphicsDataPool.push(r)}i.data=[],i.lastIndex=0}var o;for(n=i.lastIndex;n<t.graphicsData.length;n++){var a=t.graphicsData[n];o=this.getWebGLData(i,0),a.type===s.SHAPES.POLY&&c(a,o),a.type===s.SHAPES.RECT?u(a,o):a.type===s.SHAPES.CIRC||a.type===s.SHAPES.ELIP?d(a,o):a.type===s.SHAPES.RREC&&p(a,o),i.lastIndex++}for(n=0;n<i.data.length;n++)o=i.data[n],o.dirty&&o.upload()},n.prototype.getWebGLData=function(t,e){var i=t.data[t.data.length-1];return(!i||i.points.length>32e4)&&(i=this.graphicsDataPool.pop()||new h(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),i.reset(e),t.data.push(i)),i.dirty=!0,i}},{"../../const":78,"../../renderers/webgl/WebGLRenderer":116,"../../renderers/webgl/utils/ObjectRenderer":126,"../../utils":151,"./WebGLGraphicsData":90,"./shaders/PrimitiveShader":91,"./utils/buildCircle":92,"./utils/buildPoly":94,"./utils/buildRectangle":95,"./utils/buildRoundedRectangle":96}],90:[function(t,e,i){function n(t,e,i){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=r.GLBuffer.createVertexBuffer(t),this.indexBuffer=r.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.glPoints=null,this.glIndices=null,this.shader=e,this.vao=new r.VertexArrayObject(t,i).addIndex(this.indexBuffer).addAttribute(this.buffer,e.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,e.attributes.aColor,t.FLOAT,!1,24,8)}var r=t("pixi-gl-core");n.prototype.constructor=n,e.exports=n,n.prototype.reset=function(){this.points.length=0,this.indices.length=0},n.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},n.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{"pixi-gl-core":7}],91:[function(t,e,i){function n(t){r.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"))}var r=t("../../../Shader");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n},{"../../../Shader":77}],92:[function(t,e,i){var n=t("./buildLine"),r=t("../../../const"),s=t("../../../utils"),o=function(t,e){var i,o,a=t.shape,h=a.x,l=a.y;t.type===r.SHAPES.CIRC?(i=a.radius,o=a.radius):(i=a.width,o=a.height);var c=Math.floor(30*Math.sqrt(a.radius))||Math.floor(15*Math.sqrt(a.width+a.height)),u=2*Math.PI/c,p=0;if(t.fill){var d=s.hex2rgb(t.fillColor),f=t.fillAlpha,m=d[0]*f,g=d[1]*f,v=d[2]*f,y=e.points,_=e.indices,x=y.length/6;for(_.push(x),p=0;p<c+1;p++)y.push(h,l,m,g,v,f),y.push(h+Math.sin(u*p)*i,l+Math.cos(u*p)*o,m,g,v,f),_.push(x++,x++);_.push(x-1)}if(t.lineWidth){var b=t.points;for(t.points=[],p=0;p<c+1;p++)t.points.push(h+Math.sin(u*p)*i,l+Math.cos(u*p)*o);n(t,e),t.points=b}};e.exports=o},{"../../../const":78,"../../../utils":151,"./buildLine":93}],93:[function(t,e,i){var n=t("../../../math"),r=t("../../../utils"),s=function(t,e){var i=0,s=t.points;if(0!==s.length){var o=new n.Point(s[0],s[1]),a=new n.Point(s[s.length-2],s[s.length-1]);if(o.x===a.x&&o.y===a.y){s=s.slice(),s.pop(),s.pop(),a=new n.Point(s[s.length-2],s[s.length-1]);var h=a.x+.5*(o.x-a.x),l=a.y+.5*(o.y-a.y);s.unshift(h,l),s.push(h,l)}var c,u,p,d,f,m,g,v,y,_,x,b,w,T,S,E,C,M,P,A,I,O,R,k=e.points,D=e.indices,L=s.length/2,B=s.length,F=k.length/6,N=t.lineWidth/2,U=r.hex2rgb(t.lineColor),G=t.lineAlpha,j=U[0]*G,X=U[1]*G,H=U[2]*G;for(p=s[0],d=s[1],f=s[2],m=s[3],y=-(d-m),_=p-f,R=Math.sqrt(y*y+_*_),y/=R,_/=R,y*=N,_*=N,k.push(p-y,d-_,j,X,H,G),k.push(p+y,d+_,j,X,H,G),i=1;i<L-1;i++)p=s[2*(i-1)],d=s[2*(i-1)+1],f=s[2*i],m=s[2*i+1],g=s[2*(i+1)],v=s[2*(i+1)+1],y=-(d-m),_=p-f,R=Math.sqrt(y*y+_*_),y/=R,_/=R,y*=N,_*=N,x=-(m-v),b=f-g,R=Math.sqrt(x*x+b*b),x/=R,b/=R,x*=N,b*=N,S=-_+d-(-_+m),E=-y+f-(-y+p),C=(-y+p)*(-_+m)-(-y+f)*(-_+d),M=-b+v-(-b+m),P=-x+f-(-x+g),A=(-x+g)*(-b+m)-(-x+f)*(-b+v),I=S*P-M*E,Math.abs(I)<.1?(I+=10.1,k.push(f-y,m-_,j,X,H,G),k.push(f+y,m+_,j,X,H,G)):(c=(E*A-P*C)/I,u=(M*C-S*A)/I,O=(c-f)*(c-f)+(u-m)*(u-m),O>19600?(w=y-x,T=_-b,R=Math.sqrt(w*w+T*T),w/=R,T/=R,w*=N,T*=N,k.push(f-w,m-T),k.push(j,X,H,G),k.push(f+w,m+T),k.push(j,X,H,G),k.push(f-w,m-T),k.push(j,X,H,G),B++):(k.push(c,u),k.push(j,X,H,G),k.push(f-(c-f),m-(u-m)),k.push(j,X,H,G)));for(p=s[2*(L-2)],d=s[2*(L-2)+1],f=s[2*(L-1)],m=s[2*(L-1)+1],y=-(d-m),_=p-f,R=Math.sqrt(y*y+_*_),y/=R,_/=R,y*=N,_*=N,k.push(f-y,m-_),k.push(j,X,H,G),k.push(f+y,m+_),k.push(j,X,H,G),D.push(F),i=0;i<B;i++)D.push(F++);D.push(F-1)}};e.exports=s},{"../../../math":102,"../../../utils":151}],94:[function(t,e,i){var n=t("./buildLine"),r=t("../../../utils"),s=t("earcut"),o=function(t,e){t.points=t.shape.points.slice();var i=t.points;if(t.fill&&i.length>=6){for(var o=[],a=t.holes,h=0;h<a.length;h++){var l=a[h];o.push(i.length/2),i=i.concat(l.points)}var c=e.points,u=e.indices,p=i.length/2,d=r.hex2rgb(t.fillColor),f=t.fillAlpha,m=d[0]*f,g=d[1]*f,v=d[2]*f,y=s(i,o,2);if(!y)return;var _=c.length/6;for(h=0;h<y.length;h+=3)u.push(y[h]+_),u.push(y[h]+_),u.push(y[h+1]+_),u.push(y[h+2]+_),u.push(y[h+2]+_);for(h=0;h<p;h++)c.push(i[2*h],i[2*h+1],m,g,v,f)}t.lineWidth>0&&n(t,e)};e.exports=o},{"../../../utils":151,"./buildLine":93,earcut:31}],95:[function(t,e,i){var n=t("./buildLine"),r=t("../../../utils"),s=function(t,e){var i=t.shape,s=i.x,o=i.y,a=i.width,h=i.height;if(t.fill){var l=r.hex2rgb(t.fillColor),c=t.fillAlpha,u=l[0]*c,p=l[1]*c,d=l[2]*c,f=e.points,m=e.indices,g=f.length/6;f.push(s,o),f.push(u,p,d,c),f.push(s+a,o),f.push(u,p,d,c),f.push(s,o+h),f.push(u,p,d,c),f.push(s+a,o+h),f.push(u,p,d,c),m.push(g,g,g+1,g+2,g+3,g+3)}if(t.lineWidth){var v=t.points;t.points=[s,o,s+a,o,s+a,o+h,s,o+h,s,o],n(t,e),t.points=v}};e.exports=s},{"../../../utils":151,"./buildLine":93}],96:[function(t,e,i){var n=t("earcut"),r=t("./buildLine"),s=t("../../../utils"),o=function(t,e){var i=t.shape,o=i.x,h=i.y,l=i.width,c=i.height,u=i.radius,p=[];if(p.push(o,h+u),a(o,h+c-u,o,h+c,o+u,h+c,p),a(o+l-u,h+c,o+l,h+c,o+l,h+c-u,p),a(o+l,h+u,o+l,h,o+l-u,h,p),a(o+u,h,o,h,o,h+u+1e-10,p),t.fill){var d=s.hex2rgb(t.fillColor),f=t.fillAlpha,m=d[0]*f,g=d[1]*f,v=d[2]*f,y=e.points,_=e.indices,x=y.length/6,b=n(p,null,2),w=0;for(w=0;w<b.length;w+=3)_.push(b[w]+x),_.push(b[w]+x),_.push(b[w+1]+x),_.push(b[w+2]+x),_.push(b[w+2]+x);for(w=0;w<p.length;w++)y.push(p[w],p[++w],m,g,v,f)}if(t.lineWidth){var T=t.points;t.points=p,r(t,e),t.points=T}},a=function(t,e,i,n,r,s,o){function a(t,e,i){var n=e-t;return t+n*i}for(var h,l,c,u,p,d,f=20,m=o||[],g=0,v=0;v<=f;v++)g=v/f,h=a(t,i,g),l=a(e,n,g),c=a(i,r,g),u=a(n,s,g),p=a(h,c,g),d=a(l,u,g),m.push(p,d);return m};e.exports=o},{"../../../utils":151,"./buildLine":93,earcut:31}],97:[function(t,e,i){var n=e.exports=Object.assign(t("./const"),t("./math"),{utils:t("./utils"),ticker:t("./ticker"),DisplayObject:t("./display/DisplayObject"),Container:t("./display/Container"),Transform:t("./display/Transform"),TransformStatic:t("./display/TransformStatic"),TransformBase:t("./display/TransformBase"),Sprite:t("./sprites/Sprite"),CanvasSpriteRenderer:t("./sprites/canvas/CanvasSpriteRenderer"),CanvasTinter:t("./sprites/canvas/CanvasTinter"),SpriteRenderer:t("./sprites/webgl/SpriteRenderer"),Text:t("./text/Text"),TextStyle:t("./text/TextStyle"),Graphics:t("./graphics/Graphics"),GraphicsData:t("./graphics/GraphicsData"),GraphicsRenderer:t("./graphics/webgl/GraphicsRenderer"),CanvasGraphicsRenderer:t("./graphics/canvas/CanvasGraphicsRenderer"),Texture:t("./textures/Texture"),BaseTexture:t("./textures/BaseTexture"),RenderTexture:t("./textures/RenderTexture"),BaseRenderTexture:t("./textures/BaseRenderTexture"),VideoBaseTexture:t("./textures/VideoBaseTexture"),TextureUvs:t("./textures/TextureUvs"),CanvasRenderer:t("./renderers/canvas/CanvasRenderer"),CanvasRenderTarget:t("./renderers/canvas/utils/CanvasRenderTarget"),Shader:t("./Shader"),WebGLRenderer:t("./renderers/webgl/WebGLRenderer"),WebGLManager:t("./renderers/webgl/managers/WebGLManager"),ObjectRenderer:t("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:t("./renderers/webgl/utils/RenderTarget"),Quad:t("./renderers/webgl/utils/Quad"),SpriteMaskFilter:t("./renderers/webgl/filters/spriteMask/SpriteMaskFilter"),Filter:t("./renderers/webgl/filters/Filter"),glCore:t("pixi-gl-core"),autoDetectRenderer:function(t,e,i,r){return t=t||800,e=e||600,!r&&n.utils.isWebGLSupported()?new n.WebGLRenderer(t,e,i):new n.CanvasRenderer(t,e,i)}})},{"./Shader":77,"./const":78,"./display/Container":80,"./display/DisplayObject":81,"./display/Transform":82,"./display/TransformBase":83,"./display/TransformStatic":84,"./graphics/Graphics":85,"./graphics/GraphicsData":86,"./graphics/canvas/CanvasGraphicsRenderer":87,"./graphics/webgl/GraphicsRenderer":89,"./math":102,"./renderers/canvas/CanvasRenderer":109,"./renderers/canvas/utils/CanvasRenderTarget":111,"./renderers/webgl/WebGLRenderer":116,"./renderers/webgl/filters/Filter":118,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":121,"./renderers/webgl/managers/WebGLManager":125,"./renderers/webgl/utils/ObjectRenderer":126,"./renderers/webgl/utils/Quad":127,"./renderers/webgl/utils/RenderTarget":128,"./sprites/Sprite":133,"./sprites/canvas/CanvasSpriteRenderer":134,"./sprites/canvas/CanvasTinter":135,"./sprites/webgl/SpriteRenderer":137,"./text/Text":139,"./text/TextStyle":140,"./textures/BaseRenderTexture":141,"./textures/BaseTexture":142,"./textures/RenderTexture":143,"./textures/Texture":144,"./textures/TextureUvs":145,"./textures/VideoBaseTexture":146,"./ticker":148,"./utils":151,"pixi-gl-core":7}],98:[function(t,e,i){function n(t){return t<0?-1:t>0?1:0}function r(){for(var t=0;t<16;t++){var e=[];u.push(e);for(var i=0;i<16;i++)for(var r=n(s[t]*s[i]+a[t]*o[i]),p=n(o[t]*s[i]+h[t]*o[i]),d=n(s[t]*a[i]+a[t]*h[i]),f=n(o[t]*a[i]+h[t]*h[i]),m=0;m<16;m++)if(s[m]===r&&o[m]===p&&a[m]===d&&h[m]===f){e.push(m);break}}for(t=0;t<16;t++){var g=new c;g.set(s[t],o[t],a[t],h[t],0,0),l.push(g)}}var s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],o=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],c=t("./Matrix"),u=[];r();var p={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return s[t]},uY:function(t){return o[t]},vX:function(t){return a[t]},vY:function(t){return h[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return u[t][e]},sub:function(t,e){return u[t][p.inv(e)]},rotate180:function(t){return 4^t},isSwapWidthHeight:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?p.S:p.N:2*Math.abs(e)<=Math.abs(t)?t>0?p.E:p.W:e>0?t>0?p.SE:p.SW:t>0?p.NE:p.NW},matrixAppendRotationInv:function(t,e,i,n){var r=l[p.inv(e)];i=i||0,n=n||0,r.tx=i,r.ty=n,t.append(r)}};e.exports=p},{"./Matrix":99}],99:[function(t,e,i){function n(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.array=null}var r=t("./Point");n.prototype.constructor=n,e.exports=n,n.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},n.prototype.set=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},n.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},n.prototype.apply=function(t,e){e=e||new r;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},n.prototype.applyInverse=function(t,e){e=e||new r;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},n.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},n.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},n.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,s=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},n.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},n.prototype.setTransform=function(t,e,i,n,r,s,o,a,h){var l,c,u,p,d,f,m,g,v,y;return d=Math.sin(o),f=Math.cos(o),m=Math.cos(h),g=Math.sin(h),v=-Math.sin(a),y=Math.cos(a),l=f*r,c=d*r,u=-d*s,p=f*s,this.a=m*l+g*u,this.b=m*c+g*p,this.c=v*l+y*u,this.d=v*c+y*p,this.tx=t+(i*l+n*u),this.ty=e+(i*c+n*p),this},n.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},n.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,s=Math.atan2(-n,r),o=Math.atan2(i,e),a=Math.abs(1-s/o);return a<1e-5?(t.rotation=o,e<0&&r>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.skew.x=s,t.skew.y=o),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx,t.position.y=this.ty,t},n.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var t=new n;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.IDENTITY=new n,n.TEMP_MATRIX=new n},{"./Point":101}],100:[function(t,e,i){function n(t,e,i,n){this._x=i||0,this._y=n||0,this.cb=t,this.scope=e}n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{x:{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},y:{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}}),n.prototype.set=function(t,e){var i=t||0,n=e||(0!==e?i:0);this._x===i&&this._y===n||(this._x=i,this._y=n,this.cb.call(this.scope))},n.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))}},{}],101:[function(t,e,i){function n(t,e){this.x=t||0,this.y=e||0}n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(t){this.set(t.x,t.y)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},n.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)}},{}],102:[function(t,e,i){e.exports={Point:t("./Point"),ObservablePoint:t("./ObservablePoint"),Matrix:t("./Matrix"),GroupD8:t("./GroupD8"),Circle:t("./shapes/Circle"),Ellipse:t("./shapes/Ellipse"),Polygon:t("./shapes/Polygon"),Rectangle:t("./shapes/Rectangle"),RoundedRectangle:t("./shapes/RoundedRectangle")}},{"./GroupD8":98,"./Matrix":99,"./ObservablePoint":100,"./Point":101,"./shapes/Circle":103,"./shapes/Ellipse":104,"./shapes/Polygon":105,"./shapes/Rectangle":106,"./shapes/RoundedRectangle":107}],103:[function(t,e,i){function n(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0,this.type=s.SHAPES.CIRC}var r=t("./Rectangle"),s=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.x-t,n=this.y-e,r=this.radius*this.radius;return i*=i,n*=n,i+n<=r},n.prototype.getBounds=function(){return new r(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":78,"./Rectangle":106}],104:[function(t,e,i){function n(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this.type=s.SHAPES.ELIP}var r=t("./Rectangle"),s=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1},n.prototype.getBounds=function(){return new r(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":78,"./Rectangle":106}],105:[function(t,e,i){function n(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}if(e[0]instanceof r){for(var n=[],o=0,a=e.length;o<a;o++)n.push(e[o].x,e[o].y);e=n}this.closed=!0,this.points=e,this.type=s.SHAPES.POLY}var r=t("../Point"),s=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.points.slice())},n.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},n.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,s=n-1;r<n;s=r++){var o=this.points[2*r],a=this.points[2*r+1],h=this.points[2*s],l=this.points[2*s+1],c=a>e!=l>e&&t<(h-o)*(e-a)/(l-a)+o;c&&(i=!i)}return i}},{"../../const":78,"../Point":101}],106:[function(t,e,i){function n(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this.type=r.SHAPES.RECT}var r=t("../../const");n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{left:{get:function(){return this.x}},right:{get:function(){return this.x+this.width}},top:{get:function(){return this.y}},bottom:{get:function(){return this.y+this.height}}}),n.EMPTY=new n(0,0,0,0),n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},n.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},n.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},n.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},n.prototype.enlarge=function(t){if(t!==n.EMPTY){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=i-e,this.y=r,this.height=s-r}}},{"../../const":78}],107:[function(t,e,i){function n(t,e,i,n,s){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this.radius=s||20,this.type=r.SHAPES.RREC}var r=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height)}},{"../../const":78}],108:[function(t,e,i){function n(t,e,i,n){if(l.call(this),r.sayHello(t),n)for(var s in o.DEFAULT_RENDER_OPTIONS)"undefined"==typeof n[s]&&(n[s]=o.DEFAULT_RENDER_OPTIONS[s]);else n=o.DEFAULT_RENDER_OPTIONS;this.type=o.RENDERER_TYPE.UNKNOWN,this.width=e||800,this.height=i||600,this.view=n.view||document.createElement("canvas"),this.resolution=n.resolution,this.transparent=n.transparent,this.autoResize=n.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=n.preserveDrawingBuffer,this.clearBeforeRender=n.clearBeforeRender,this.roundPixels=n.roundPixels,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=n.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new a,
this._lastObjectRendered=this._tempDisplayObjectParent}var r=t("../utils"),s=t("../math"),o=t("../const"),a=t("../display/Container"),h=t("../textures/RenderTexture"),l=t("eventemitter3"),c=new s.Matrix;n.prototype=Object.create(l.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=r.hex2string(t),r.hex2rgb(t,this._backgroundColorRgba)}}}),n.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},n.prototype.generateTexture=function(t,e,i){var n=t.getLocalBounds(),r=h.create(0|n.width,0|n.height,e,i);return c.tx=-n.x,c.ty=-n.y,this.render(t,r,!1,c,!0),r},n.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=o.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null}},{"../const":78,"../display/Container":80,"../math":102,"../textures/RenderTexture":143,"../utils":151,eventemitter3:32}],109:[function(t,e,i){function n(t,e,i){i=i||{},r.call(this,"Canvas",t,e,i),this.type=l.RENDERER_TYPE.CANVAS,this.rootContext=this.view.getContext("2d",{alpha:this.transparent}),this.rootResolution=this.resolution,this.refresh=!0,this.maskManager=new s(this),this.smoothProperty="imageSmoothingEnabled",this.rootContext.imageSmoothingEnabled||(this.rootContext.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.rootContext.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.rootContext.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.rootContext.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this.blendModes=a(),this._activeBlendMode=null,this.context=null,this.renderingToScreen=!1,this.resize(t,e)}var r=t("../SystemRenderer"),s=t("./utils/CanvasMaskManager"),o=t("./utils/CanvasRenderTarget"),a=t("./utils/mapCanvasBlendModesToPixi"),h=t("../../utils"),l=t("../../const");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,h.pluginTarget.mixin(n),n.prototype.render=function(t,e,i,n,r){if(this.view){this.renderingToScreen=!e,this.emit("prerender"),e?(e=e.baseTexture||e,e._canvasRenderTarget||(e._canvasRenderTarget=new o(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):(this.context=this.rootContext,this.resolution=this.rootResolution);var s=this.context;if(e||(this._lastObjectRendered=t),!r){var a=t.parent,h=this._tempDisplayObjectParent.transform.worldTransform;n?n.copy(h):h.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=a}s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,s.globalCompositeOperation=this.blendModes[l.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(s.fillStyle="black",s.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height)));var c=this.context;this.context=s,t.renderCanvas(this),this.context=c,this.emit("postrender")}},n.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this.context.globalCompositeOperation=this.blendModes[t])},n.prototype.destroy=function(t){this.destroyPlugins(),r.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},n.prototype.resize=function(t,e){r.prototype.resize.call(this,t,e),this.smoothProperty&&(this.rootContext[this.smoothProperty]=l.SCALE_MODES.DEFAULT===l.SCALE_MODES.LINEAR)}},{"../../const":78,"../../utils":151,"../SystemRenderer":108,"./utils/CanvasMaskManager":110,"./utils/CanvasRenderTarget":111,"./utils/mapCanvasBlendModesToPixi":113}],110:[function(t,e,i){function n(t){this.renderer=t}var r=t("../../../const");n.prototype.constructor=n,e.exports=n,n.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var i=t.alpha,n=t.transform.worldTransform,r=e.resolution;e.context.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=i},n.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,i=t.graphicsData.length;if(0!==i){e.beginPath();for(var n=0;n<i;n++){var s=t.graphicsData[n],o=s.shape;if(s.type===r.SHAPES.POLY){var a=o.points;e.moveTo(a[0],a[1]);for(var h=1;h<a.length/2;h++)e.lineTo(a[2*h],a[2*h+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(s.type===r.SHAPES.RECT)e.rect(o.x,o.y,o.width,o.height),e.closePath();else if(s.type===r.SHAPES.CIRC)e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath();else if(s.type===r.SHAPES.ELIP){var l=2*o.width,c=2*o.height,u=o.x-l/2,p=o.y-c/2,d=.5522848,f=l/2*d,m=c/2*d,g=u+l,v=p+c,y=u+l/2,_=p+c/2;e.moveTo(u,_),e.bezierCurveTo(u,_-m,y-f,p,y,p),e.bezierCurveTo(y+f,p,g,_-m,g,_),e.bezierCurveTo(g,_+m,y+f,v,y,v),e.bezierCurveTo(y-f,v,u,_+m,u,_),e.closePath()}else if(s.type===r.SHAPES.RREC){var x=o.x,b=o.y,w=o.width,T=o.height,S=o.radius,E=Math.min(w,T)/2|0;S=S>E?E:S,e.moveTo(x,b+S),e.lineTo(x,b+T-S),e.quadraticCurveTo(x,b+T,x+S,b+T),e.lineTo(x+w-S,b+T),e.quadraticCurveTo(x+w,b+T,x+w,b+T-S),e.lineTo(x+w,b+S),e.quadraticCurveTo(x+w,b,x+w-S,b),e.lineTo(x+S,b),e.quadraticCurveTo(x,b,x,b+S),e.closePath()}}}},n.prototype.popMask=function(t){t.context.restore()},n.prototype.destroy=function(){}},{"../../../const":78}],111:[function(t,e,i){function n(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||r.RESOLUTION,this.resize(t,e)}var r=t("../../../const");n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},height:{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}}),n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},n.prototype.destroy=function(){this.context=null,this.canvas=null}},{"../../../const":78}],112:[function(t,e,i){var n=function(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e},r=function(){if("undefined"==typeof document)return!1;var t=n("#ff00ff"),e=n("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var r=i.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var s=r.getImageData(2,0,1,1);if(!s)return!1;var o=s.data;return 255===o[0]&&0===o[1]&&0===o[2]};e.exports=r},{}],113:[function(t,e,i){function n(t){return t=t||[],s()?(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="multiply",t[r.BLEND_MODES.SCREEN]="screen",t[r.BLEND_MODES.OVERLAY]="overlay",t[r.BLEND_MODES.DARKEN]="darken",t[r.BLEND_MODES.LIGHTEN]="lighten",t[r.BLEND_MODES.COLOR_DODGE]="color-dodge",t[r.BLEND_MODES.COLOR_BURN]="color-burn",t[r.BLEND_MODES.HARD_LIGHT]="hard-light",t[r.BLEND_MODES.SOFT_LIGHT]="soft-light",t[r.BLEND_MODES.DIFFERENCE]="difference",t[r.BLEND_MODES.EXCLUSION]="exclusion",t[r.BLEND_MODES.HUE]="hue",t[r.BLEND_MODES.SATURATION]="saturate",t[r.BLEND_MODES.COLOR]="color",t[r.BLEND_MODES.LUMINOSITY]="luminosity"):(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="source-over",t[r.BLEND_MODES.SCREEN]="source-over",t[r.BLEND_MODES.OVERLAY]="source-over",t[r.BLEND_MODES.DARKEN]="source-over",t[r.BLEND_MODES.LIGHTEN]="source-over",t[r.BLEND_MODES.COLOR_DODGE]="source-over",t[r.BLEND_MODES.COLOR_BURN]="source-over",t[r.BLEND_MODES.HARD_LIGHT]="source-over",t[r.BLEND_MODES.SOFT_LIGHT]="source-over",t[r.BLEND_MODES.DIFFERENCE]="source-over",t[r.BLEND_MODES.EXCLUSION]="source-over",t[r.BLEND_MODES.HUE]="source-over",t[r.BLEND_MODES.SATURATION]="source-over",t[r.BLEND_MODES.COLOR]="source-over",t[r.BLEND_MODES.LUMINOSITY]="source-over"),t}var r=t("../../../const"),s=t("./canUseNewCanvasBlendModes");e.exports=n},{"../../../const":78,"./canUseNewCanvasBlendModes":112}],114:[function(t,e,i){function n(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=3600,this.checkCountMax=600,this.mode=r.GC_MODES.DEFAULT}var r=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.update=function(){this.count++,this.mode!==r.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},n.prototype.run=function(){var t,e,i=this.renderer.textureManager,n=i._managedTextures,r=!1;for(t=0;t<n.length;t++){var s=n[t];!s._glRenderTargets&&this.count-s.touched>this.maxIdle&&(i.destroyTexture(s,!0),n[t]=null,r=!0)}if(r){for(e=0,t=0;t<n.length;t++)null!==n[t]&&(n[e++]=n[t]);n.length=e}},n.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&e.destroyTexture(t._texture,!0);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])}},{"../../const":78}],115:[function(t,e,i){var n=t("pixi-gl-core").GLTexture,r=t("../../const"),s=t("./utils/RenderTarget"),o=t("../../utils"),a=function(t){this.renderer=t,this.gl=t.gl,this._managedTextures=[]};a.prototype.bindTexture=function(){},a.prototype.getTexture=function(){},a.prototype.updateTexture=function(t){t=t.baseTexture||t;var e=!!t._glRenderTargets;if(t.hasLoaded){var i=t._glTextures[this.renderer.CONTEXT_UID];if(i)e?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):i.upload(t.source);else{if(e){var o=new s(this.gl,t.width,t.height,t.scaleMode,t.resolution);o.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=o,i=o.texture}else i=new n(this.gl),i.premultiplyAlpha=!0,i.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=i,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&i.enableMipmap(),t.wrapMode===r.WRAP_MODES.CLAMP?i.enableWrapClamp():t.wrapMode===r.WRAP_MODES.REPEAT?i.enableWrapRepeat():i.enableWrapMirrorRepeat()):i.enableWrapClamp(),t.scaleMode===r.SCALE_MODES.NEAREST?i.enableNearestScaling():i.enableLinearScaling()}return i}},a.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded&&t._glTextures[this.renderer.CONTEXT_UID]&&(t._glTextures[this.renderer.CONTEXT_UID].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.renderer.CONTEXT_UID],!e)){var i=this._managedTextures.indexOf(t);i!==-1&&o.removeItems(this._managedTextures,i,1)}},a.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},a.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},e.exports=a},{"../../const":78,"../../utils":151,"./utils/RenderTarget":128,"pixi-gl-core":7}],116:[function(t,e,i){function n(t,e,i){i=i||{},r.call(this,"WebGL",t,e,i),this.type=y.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._contextOptions={alpha:this.transparent,antialias:i.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer},this._backgroundColorRgba[3]=this.transparent?0:1,this.maskManager=new s(this),this.stencilManager=new o(this),this.emptyRenderer=new l(this),this.currentRenderer=this.emptyRenderer,this.initPlugins(),i.context&&m(i.context),this.gl=i.context||d(this.view,this._contextOptions),this.CONTEXT_UID=_++,this.state=new p(this.gl),this.renderingToScreen=!0,this._initContext(),this.filterManager=new a(this),this.drawModes=f(this.gl),this._activeShader=null,this._activeRenderTarget=null,this._activeTextureLocation=999,this._activeTexture=null,this.setBlendMode(0)}var r=t("../SystemRenderer"),s=t("./managers/MaskManager"),o=t("./managers/StencilManager"),a=t("./managers/FilterManager"),h=t("./utils/RenderTarget"),l=t("./utils/ObjectRenderer"),c=t("./TextureManager"),u=t("./TextureGarbageCollector"),p=t("./WebGLState"),d=t("pixi-gl-core").createContext,f=t("./utils/mapWebGLDrawModesToPixi"),m=t("./utils/validateContext"),g=t("../../utils"),v=t("pixi-gl-core"),y=t("../../const"),_=0;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,g.pluginTarget.mixin(n),n.prototype._initContext=function(){var t=this.gl;this.textureManager=new c(this),this.textureGC=new u(this),this.state.resetToDefault(),this.rootRenderTarget=new h(t,this.width,this.height,null,this.resolution,(!0)),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget),this.emit("context",t),this.resize(this.width,this.height)},n.prototype.render=function(t,e,i,n,r){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(e||(this._lastObjectRendered=t),!r){var s=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=s}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},n.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},n.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.resize=function(t,e){r.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},n.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},n.prototype.clear=function(t){this._activeRenderTarget.clear(t)},n.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},n.prototype.bindRenderTexture=function(t,e){var i;if(t){var n=t.baseTexture,r=this.gl;n._glRenderTargets[this.CONTEXT_UID]?(this._activeTextureLocation=n._id,r.activeTexture(r.TEXTURE0+n._id),r.bindTexture(r.TEXTURE_2D,null)):(this.textureManager.updateTexture(n),r.bindTexture(r.TEXTURE_2D,null)),i=n._glRenderTargets[this.CONTEXT_UID],i.setFrame(t.frame)}else i=this.rootRenderTarget;return i.transform=e,this.bindRenderTarget(i),this},n.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},n.prototype.bindShader=function(t){return this._activeShader!==t&&(this._activeShader=t,t.bind(),t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0)),this},n.prototype.bindTexture=function(t,e){t=t.baseTexture||t;var i=this.gl;return e=e||0,this._activeTextureLocation!==e&&(this._activeTextureLocation=e,i.activeTexture(i.TEXTURE0+e)),this._activeTexture=t,t._glTextures[this.CONTEXT_UID]?(t.touched=this.textureGC.count,t._glTextures[this.CONTEXT_UID].bind()):this.textureManager.updateTexture(t),this},n.prototype.createVao=function(){return new v.VertexArrayObject(this.gl,this.state.attribState)},n.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._activeTextureLocation=999,this._activeTexture=null,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},n.prototype.handleContextLost=function(t){t.preventDefault()},n.prototype.handleContextRestored=function(){this._initContext(),this.textureManager.removeAll()},n.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),r.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null}},{"../../const":78,"../../utils":151,"../SystemRenderer":108,"./TextureGarbageCollector":114,"./TextureManager":115,"./WebGLState":117,"./managers/FilterManager":122,"./managers/MaskManager":123,"./managers/StencilManager":124,"./utils/ObjectRenderer":126,"./utils/RenderTarget":128,"./utils/mapWebGLDrawModesToPixi":131,"./utils/validateContext":132,"pixi-gl-core":7}],117:[function(t,e,i){function n(t){this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=r(t),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}var r=t("./utils/mapWebGLBlendModesToPixi");n.prototype.push=function(){var t=this.stack[++this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16));for(var e=0;e<this.activeState.length;e++)this.activeState[e]=t[e]};var s=0,o=1,a=2,h=3,l=4;n.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},n.prototype.setState=function(t){this.setBlend(t[s]),this.setDepthTest(t[o]),this.setFrontFace(t[a]),this.setCullFace(t[h]),this.setBlendMode(t[l])},n.prototype.setBlend=function(t){if(!(this.activeState[s]===t|0)){this.activeState[s]=0|t;var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND)}},n.prototype.setBlendMode=function(t){t!==this.activeState[l]&&(this.activeState[l]=t,this.gl.blendFunc(this.blendModes[t][0],this.blendModes[t][1]))},n.prototype.setDepthTest=function(t){if(!(this.activeState[o]===t|0)){this.activeState[o]=0|t;var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST)}},n.prototype.setCullFace=function(t){if(!(this.activeState[h]===t|0)){this.activeState[h]=0|t;var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE)}},n.prototype.setFrontFace=function(t){if(!(this.activeState[a]===t|0)){this.activeState[a]=0|t;var e=this.gl;t?e.frontFace(e.CW):e.frontFace(e.CCW)}},n.prototype.resetAttributes=function(){var t;for(t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;var e=this.gl;for(t=1;t<this.maxAttribs;t++)e.disableVertexAttribArray(t)},n.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;t++)this.activeState[t]=32;var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},e.exports=n},{"./utils/mapWebGLBlendModesToPixi":130}],118:[function(t,e,i){function n(t,e,i){this.vertexSrc=t||n.defaultVertexSrc,this.fragmentSrc=e||n.defaultFragmentSrc,this.blendMode=o.BLEND_MODES.NORMAL,this.uniformData=i||r(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var h in this.uniformData)this.uniforms[h]=this.uniformData[h].value;this.glShaders=[],a[this.vertexSrc+this.fragmentSrc]||(a[this.vertexSrc+this.fragmentSrc]=s.uid()),this.glShaderKey=a[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=1,this.enabled=!0}var r=t("./extractUniformsFromSrc"),s=t("../../../utils"),o=t("../../../const"),a={};e.exports=n,n.prototype.apply=function(t,e,i,n){t.applyFilter(this,e,i,n)},n.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n"),n.defaultFragmentSrc=["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")},{"../../../const":78,"../../../utils":151,"./extractUniformsFromSrc":119}],119:[function(t,e,i){function n(t,e,i){var n=r(t,i),s=r(e,i);return Object.assign(n,s)}function r(t){for(var e,i=new RegExp("^(projectionMatrix|uSampler|filterArea)$"),n={},r=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<r.length;o++){var a=r[o].trim();if(a.indexOf("uniform")>-1){var h=a.split(" "),l=h[1],c=h[2],u=1;c.indexOf("[")>-1&&(e=c.split(/\[|\]/),c=e[0],u*=Number(e[1])),c.match(i)||(n[c]={value:s(l,u),name:c,type:l})}}return n}var s=t("pixi-gl-core").shader.defaultValue;e.exports=n},{"pixi-gl-core":7}],120:[function(t,e,i){var n=t("../../../math"),r=function(t,e,i){var n=t.identity();return n.translate(e.x/i.width,e.y/i.height),n.scale(i.width,i.height),n},s=function(t,e,i){var n=t.identity();n.translate(e.x/i.width,e.y/i.height);var r=i.width/e.width,s=i.height/e.height;return n.scale(r,s),n},o=function(t,e,i,r){var s=r.worldTransform.copy(n.Matrix.TEMP_MATRIX),o=r._texture.baseTexture,a=t.identity(),h=i.height/i.width;a.translate(e.x/i.width,e.y/i.height),a.scale(1,h);var l=i.width/o.width,c=i.height/o.height;return s.tx/=o.width*l,s.ty/=o.width*l,s.invert(),a.prepend(s),a.scale(1,1/h),a.scale(l,c),a.translate(r.anchor.x,r.anchor.y),a};e.exports={calculateScreenSpaceMatrix:r,calculateNormalizedScreenSpaceMatrix:s,calculateSpriteMatrix:o}},{"../../../math":102}],121:[function(t,e,i){function n(t){var e=new s.Matrix;r.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","#define GLSLIFY 1\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n"),t.renderable=!1,this.maskSprite=t,this.maskMatrix=e}var r=t("../Filter"),s=t("../../../../math");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.apply=function(t,e,i){var n=this.maskSprite;this.uniforms.mask=n._texture,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n),this.uniforms.alpha=n.worldAlpha,t.applyFilter(this,e,i)}},{"../../../../math":102,"../Filter":118}],122:[function(t,e,i){function n(t){r.call(this,t),this.gl=this.renderer.gl,this.quad=new o(this.gl,t.state.attribState),this.shaderCache={},this.pool={},this.filterData=null}var r=t("./WebGLManager"),s=t("../utils/RenderTarget"),o=t("../utils/Quad"),a=t("../../../math"),h=t("../../../Shader"),l=t("../filters/filterTransforms"),c=t("bit-twiddle"),u=function(){this.renderTarget=null,this.sourceFrame=new a.Rectangle,this.destinationFrame=new a.Rectangle,this.filters=[],this.target=null,this.resolution=1};n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.pushFilter=function(t,e){var i=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var r=new u;r.sourceFrame=r.destinationFrame=this.renderer._activeRenderTarget.size,r.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[r]},this.filterData=n}var s=n.stack[++n.index];s||(s=n.stack[n.index]=new u);var o=e[0].resolution,h=e[0].padding,l=t.filterArea||t.getBounds(!0),c=s.sourceFrame,p=s.destinationFrame;if(c.x=(l.x*o|0)/o,c.y=(l.y*o|0)/o,c.width=(l.width*o|0)/o,c.height=(l.height*o|0)/o,n.stack[0].renderTarget.transform){var d=n.stack[0].destinationFrame,f=n.stack[0].renderTarget.transform,m=f.applyInverse(new a.Point(c.left,c.top)),g=f.applyInverse(new a.Point(c.right,c.top)),v=f.applyInverse(new a.Point(c.right,c.bottom)),y=f.applyInverse(new a.Point(c.left,c.bottom)),_=Math.min(m.x,g.x,v.x,y.x),x=Math.max(m.x,g.x,v.x,y.x),b=Math.min(m.y,g.y,v.y,y.y),w=Math.max(m.y,g.y,v.y,y.y);c.x=_,c.y=b,c.width=x-_,c.height=w-b,m=f.applyInverse(new a.Point(d.left,d.top)),g=f.applyInverse(new a.Point(d.right,d.bottom)),c.x<m.x&&(c.x=m.x),c.y<m.y&&(c.y=m.y),c.width>g.x&&(c.width=g.x),c.height>g.y&&(c.height=g.y)}else c.fit(n.stack[0].destinationFrame);c.pad(h),p.width=c.width,p.height=c.height;var T=this.getPotRenderTarget(i.gl,c.width,c.height,o);s.target=t,s.filters=e,s.resolution=o,s.renderTarget=T,T.setFrame(p,c),i.bindRenderTarget(T),i.clear()},n.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var n=i.filters;if(1===n.length)n[0].apply(this,i.renderTarget,e.renderTarget,!1),this.freePotRenderTarget(i.renderTarget);else{var r=i.renderTarget,s=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,1);s.setFrame(i.destinationFrame,i.sourceFrame);for(var o=0;o<n.length-1;o++){n[o].apply(this,r,s,!0);var a=r;r=s,s=a}n[o].apply(this,r,e.renderTarget,!1),this.freePotRenderTarget(r),this.freePotRenderTarget(s)}t.index--,0===t.index&&(this.filterData=null)},n.prototype.applyFilter=function(t,e,i,n){var r=this.renderer,s=t.glShaders[r.CONTEXT_UID];if(s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey],s||(s=t.glShaders[r.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=new h(this.gl,t.vertexSrc,t.fragmentSrc))):s=t.glShaders[r.CONTEXT_UID]=new h(this.gl,t.vertexSrc,t.fragmentSrc),this.quad.initVao(s)),r.bindRenderTarget(i),n){var o=r.gl;o.disable(o.SCISSOR_TEST),r.clear(),o.enable(o.SCISSOR_TEST)}i===r.maskManager.scissorRenderTarget&&r.maskManager.pushScissorMask(null,r.maskManager.scissorData),r.bindShader(s),this.syncUniforms(s,t),e.texture.bind(0),r._activeTextureLocation=0,r.state.setBlendMode(t.blendMode),this.quad.draw()},n.prototype.syncUniforms=function(t,e){var i,n=e.uniformData,r=e.uniforms,s=1;if(t.uniforms.data.filterArea){i=this.filterData.stack[this.filterData.index];var o=t.uniforms.filterArea;o[0]=i.renderTarget.size.width,o[1]=i.renderTarget.size.height,o[2]=i.sourceFrame.x,o[3]=i.sourceFrame.y,t.uniforms.filterArea=o}if(t.uniforms.data.filterClamp){i=this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=.5/i.renderTarget.size.width,a[1]=.5/i.renderTarget.size.height,a[2]=(i.sourceFrame.width-.5)/i.renderTarget.size.width,a[3]=(i.sourceFrame.height-.5)/i.renderTarget.size.height,t.uniforms.filterClamp=a}var h;for(var l in n)if("sampler2D"===n[l].type){if(t.uniforms[l]=s,r[l].baseTexture)this.renderer.bindTexture(r[l].baseTexture,s);else{var c=this.renderer.gl;this.renderer._activeTextureLocation=c.TEXTURE0+s,c.activeTexture(c.TEXTURE0+s),r[l].texture.bind()}s++}else"mat3"===n[l].type?void 0!==r[l].a?t.uniforms[l]=r[l].toArray(!0):t.uniforms[l]=r[l]:"vec2"===n[l].type?void 0!==r[l].x?(h=t.uniforms[l]||new Float32Array(2),h[0]=r[l].x,h[1]=r[l].y,t.uniforms[l]=h):t.uniforms[l]=r[l]:"float"===n[l].type?t.uniforms.data[l].value!==n[l]&&(t.uniforms[l]=r[l]):t.uniforms[l]=r[l]},n.prototype.getRenderTarget=function(t,e){var i=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,e||i.resolution);return n.setFrame(i.destinationFrame,i.sourceFrame),n},n.prototype.returnRenderTarget=function(t){return this.freePotRenderTarget(t)},n.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return l.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},n.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return l.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},n.prototype.calculateSpriteMatrix=function(t,e){var i=this.filterData.stack[this.filterData.index];return l.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,e)},n.prototype.destroy=function(){this.shaderCache=[],this.emptyPool()},n.prototype.getPotRenderTarget=function(t,e,i,n){e=c.nextPow2(e*n),i=c.nextPow2(i*n);var r=(65535&e)<<16|65535&i;this.pool[r]||(this.pool[r]=[]);var o=this.pool[r].pop()||new s(t,e,i,null,1);return o.resolution=n,o.defaultFrame.width=o.size.width=e/n,o.defaultFrame.height=o.size.height=i/n,o},n.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.pool={}},n.prototype.freePotRenderTarget=function(t){var e=t.size.width*t.resolution,i=t.size.height*t.resolution,n=(65535&e)<<16|65535&i;this.pool[n].push(t)}},{"../../../Shader":77,"../../../math":102,"../filters/filterTransforms":120,"../utils/Quad":127,"../utils/RenderTarget":128,"./WebGLManager":125,"bit-twiddle":30}],123:[function(t,e,i){function n(t){r.call(this,t),this.scissor=!1,this.scissorData=null,this.scissorRenderTarget=null,this.enableScissor=!0,this.alphaMaskPool=[],this.alphaMaskIndex=0}var r=t("./WebGLManager"),s=t("../filters/spriteMask/SpriteMaskFilter");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a);n=Math.round(n*(180/Math.PI)),n%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},n.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e);
},n.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new s(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,i),this.alphaMaskIndex++},n.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},n.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},n.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},n.prototype.pushScissorMask=function(t,e){e.renderable=!0;var i=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(i.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var r=this.renderer.resolution;this.renderer.gl.scissor(n.x*r,(i.root?i.size.height-n.y-n.height:n.y)*r,n.width*r,n.height*r),this.scissorRenderTarget=i,this.scissorData=e,this.scissor=!0},n.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)}},{"../filters/spriteMask/SpriteMaskFilter":121,"./WebGLManager":125}],124:[function(t,e,i){function n(t){r.call(this,t),this.stencilMaskStack=null}var r=t("./WebGLManager");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},n.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,i=this.stencilMaskStack;0===i.length&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.stencilFunc(e.ALWAYS,1,1)),i.push(t),e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,i.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},n.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack,i=e.pop();0===e.length?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(i),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,e.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP))},n.prototype.destroy=function(){r.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null}},{"./WebGLManager":125}],125:[function(t,e,i){function n(t){this.renderer=t,this.renderer.on("context",this.onContextChange,this)}n.prototype.constructor=n,e.exports=n,n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],126:[function(t,e,i){function n(t){r.call(this,t)}var r=t("../managers/WebGLManager");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.start=function(){},n.prototype.stop=function(){this.flush()},n.prototype.flush=function(){},n.prototype.render=function(t){}},{"../managers/WebGLManager":125}],127:[function(t,e,i){function n(t,e){this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var i=0;i<4;i++)this.interleaved[4*i]=this.vertices[2*i],this.interleaved[4*i+1]=this.vertices[2*i+1],this.interleaved[4*i+2]=this.uvs[2*i],this.interleaved[4*i+3]=this.uvs[2*i+1];this.indices=s(1),this.vertexBuffer=r.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=r.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new r.VertexArrayObject(t,e)}var r=t("pixi-gl-core"),s=t("../../../utils/createIndicesForQuads");n.prototype.constructor=n,n.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},n.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this},n.prototype.draw=function(){return this.vao.bind().draw(this.gl.TRIANGLES,6,0).unbind(),this},n.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},n.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},e.exports=n},{"../../../utils/createIndicesForQuads":149,"pixi-gl-core":7}],128:[function(t,e,i){var n=t("../../../math"),r=t("../../../const"),s=t("pixi-gl-core").GLFramebuffer,o=function(t,e,i,o,a,h){this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new n.Rectangle(0,0,1,1),this.resolution=a||r.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new n.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=o||r.SCALE_MODES.DEFAULT,this.root=h,this.root?(this.frameBuffer=new s(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=s.createRGBA(t,100,100),this.scaleMode===r.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(e,i)};o.prototype.constructor=o,e.exports=o,o.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},o.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},o.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t},o.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},o.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},o.prototype.resize=function(t,e){if(t=0|t,e=0|e,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},o.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null}},{"../../../const":78,"../../../math":102,"pixi-gl-core":7}],129:[function(t,e,i){function n(t){for(var e="",i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}var r=t("pixi-gl-core"),s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n"),o=function(t,e){var i=!e;if(i){var o=document.createElement("canvas");o.width=1,o.height=1,e=r.createContext(o)}for(var a=e.createShader(e.FRAGMENT_SHADER);;){var h=s.replace(/%forloop%/gi,n(t));if(e.shaderSource(a,h),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS))break;t=t/2|0}return i&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t};e.exports=o},{"pixi-gl-core":7}],130:[function(t,e,i){function n(t,e){return e=e||[],e[r.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[r.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[r.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e}var r=t("../../../const");e.exports=n},{"../../../const":78}],131:[function(t,e,i){function n(t,e){e=e||{},e[r.DRAW_MODES.POINTS]=t.POINTS,e[r.DRAW_MODES.LINES]=t.LINES,e[r.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[r.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[r.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[r.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[r.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN}var r=t("../../../const");e.exports=n},{"../../../const":78}],132:[function(t,e,i){function n(t){var e=t.getContextAttributes();!e.stencil}e.exports=n},{}],133:[function(t,e,i){function n(t){o.call(this),this.anchor=new r.ObservablePoint(this.onAnchorUpdate,this),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=h.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=t||s.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1}var r=t("../math"),s=t("../textures/Texture"),o=t("../display/Container"),a=t("../utils"),h=t("../const"),l=new r.Point;n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture.orig.width},set:function(t){var e=a.sign(this.scale.x)||1;this.scale.x=e*t/this.texture.orig.width,this._width=t}},height:{get:function(){return Math.abs(this.scale.y)*this.texture.orig.height},set:function(t){var e=a.sign(this.scale.y)||1;this.scale.y=e*t/this.texture.orig.height,this._height=t}},tint:{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),n.prototype._onTextureUpdate=function(){this._textureID=-1,this._width&&(this.scale.x=a.sign(this.scale.x)*this._width/this.texture.orig.width),this._height&&(this.scale.y=a.sign(this.scale.y)*this._height/this.texture.orig.height)},n.prototype.onAnchorUpdate=function(){this._transformID=-1},n.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t,e,i,n,r=this._texture,s=this.transform.worldTransform,o=s.a,a=s.b,h=s.c,l=s.d,c=s.tx,u=s.ty,p=this.vertexData,d=r.trim,f=r.orig;d?(e=d.x-this.anchor._x*f.width,t=e+d.width,n=d.y-this.anchor._y*f.height,i=n+d.height):(t=f.width*(1-this.anchor._x),e=f.width*-this.anchor._x,i=f.height*(1-this.anchor._y),n=f.height*-this.anchor._y),p[0]=o*e+h*n+c,p[1]=l*n+a*e+u,p[2]=o*t+h*n+c,p[3]=l*n+a*t+u,p[4]=o*t+h*i+c,p[5]=l*i+a*t+u,p[6]=o*e+h*i+c,p[7]=l*i+a*e+u}},n.prototype.calculateTrimmedVertices=function(){this.vertexTrimmedData||(this.vertexTrimmedData=new Float32Array(8));var t,e,i,n,r=this._texture,s=this.vertexTrimmedData,o=r.orig,a=this.transform.worldTransform,h=a.a,l=a.b,c=a.c,u=a.d,p=a.tx,d=a.ty;t=o.width*(1-this.anchor._x),e=o.width*-this.anchor._x,i=o.height*(1-this.anchor._y),n=o.height*-this.anchor._y,s[0]=h*e+c*n+p,s[1]=u*n+l*e+d,s[2]=h*t+c*n+p,s[3]=u*n+l*t+d,s[4]=h*t+c*i+p,s[5]=u*i+l*t+d,s[6]=h*e+c*i+p,s[7]=u*i+l*e+d},n.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this)},n.prototype._renderCanvas=function(t){t.plugins.sprite.render(this)},n.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},n.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=-this._texture.orig.width*this.anchor._x,this._bounds.minY=-this._texture.orig.height*this.anchor._y,this._bounds.maxX=this._texture.orig.width,this._bounds.maxY=this._texture.orig.height,t||(this._localBoundsRect||(this._localBoundsRect=new r.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):o.prototype.getLocalBounds.call(this,t)},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,l);var e,i=this._texture.orig.width,n=this._texture.orig.height,r=-i*this.anchor.x;return l.x>r&&l.x<r+i&&(e=-n*this.anchor.y,l.y>e&&l.y<e+n)},n.prototype.destroy=function(t){o.prototype.destroy.call(this,t),this.anchor=null;var e="boolean"==typeof t?t:t&&t.texture;if(e){var i="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},n.from=function(t){return new n(s.from(t))},n.fromFrame=function(t){var e=a.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new n(e)},n.fromImage=function(t,e,i){return new n(s.fromImage(t,e,i))}},{"../const":78,"../display/Container":80,"../math":102,"../textures/Texture":144,"../utils":151}],134:[function(t,e,i){function n(t){this.renderer=t}var r=t("../../renderers/canvas/CanvasRenderer"),s=t("../../const"),o=t("../../math"),a=new o.Matrix,h=t("./CanvasTinter");n.prototype.constructor=n,e.exports=n,r.registerPlugin("sprite",n),n.prototype.render=function(t){var e,i,n=t._texture,r=this.renderer,l=t.transform.worldTransform,c=n._frame.width,u=n._frame.height;if(!(n.orig.width<=0||n.orig.height<=0)&&n.baseTexture.source&&(r.setBlendMode(t.blendMode),n.valid)){r.context.globalAlpha=t.worldAlpha;var p=n.baseTexture.scaleMode===s.SCALE_MODES.LINEAR;r.smoothProperty&&r.context[r.smoothProperty]!==p&&(r.context[r.smoothProperty]=p),n.trim?(e=n.trim.width/2+n.trim.x-t.anchor.x*n.orig.width,i=n.trim.height/2+n.trim.y-t.anchor.y*n.orig.height):(e=(.5-t.anchor.x)*n.orig.width,i=(.5-t.anchor.y)*n.orig.height),n.rotate&&(l.copy(a),l=a,o.GroupD8.matrixAppendRotationInv(l,n.rotate,e,i),e=0,i=0),e-=c/2,i-=u/2,r.roundPixels?(r.context.setTransform(l.a,l.b,l.c,l.d,l.tx*r.resolution|0,l.ty*r.resolution|0),e=0|e,i=0|i):r.context.setTransform(l.a,l.b,l.c,l.d,l.tx*r.resolution,l.ty*r.resolution);var d=n.baseTexture.resolution;16777215!==t.tint?(t.cachedTint!==t.tint&&(t.cachedTint=t.tint,t.tintedTexture=h.getTintedTexture(t,t.tint)),r.context.drawImage(t.tintedTexture,0,0,c*d,u*d,e*r.resolution,i*r.resolution,c*r.resolution,u*r.resolution)):r.context.drawImage(n.baseTexture.source,n._frame.x*d,n._frame.y*d,c*d,u*d,e*r.resolution,i*r.resolution,c*r.resolution,u*r.resolution)}},n.prototype.destroy=function(){this.renderer=null}},{"../../const":78,"../../math":102,"../../renderers/canvas/CanvasRenderer":109,"./CanvasTinter":135}],135:[function(t,e,i){var n=t("../../utils"),r=t("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),s=e.exports={getTintedTexture:function(t,e){var i=t.texture;e=s.roundColor(e);var n="#"+("00000"+(0|e).toString(16)).substr(-6);if(i.tintCache=i.tintCache||{},i.tintCache[n])return i.tintCache[n];var r=s.canvas||document.createElement("canvas");if(s.tintMethod(i,e,r),s.convertTintToImage){var o=new Image;o.src=r.toDataURL(),i.tintCache[n]=o}else i.tintCache[n]=r,s.canvas=null;return r},tintWithMultiply:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),s=t.baseTexture.resolution;r.x*=s,r.y*=s,r.width*=s,r.height*=s,i.width=r.width,i.height=r.height,n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithOverlay:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),s=t.baseTexture.resolution;r.x*=s,r.y*=s,r.width*=s,r.height*=s,i.width=r.width,i.height=r.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithPerPixel:function(t,e,i){var r=i.getContext("2d"),s=t._frame.clone(),o=t.baseTexture.resolution;s.x*=o,s.y*=o,s.width*=o,s.height*=o,i.width=s.width,i.height=s.height,r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height);for(var a=n.hex2rgb(e),h=a[0],l=a[1],c=a[2],u=r.getImageData(0,0,s.width,s.height),p=u.data,d=0;d<p.length;d+=4)p[d+0]*=h,p[d+1]*=l,p[d+2]*=c;r.putImageData(u,0,0)},roundColor:function(t){var e=s.cacheStepsPerColorChannel,i=n.hex2rgb(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),n.rgb2hex(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:r(),tintMethod:0};s.tintMethod=s.canUseMultiply?s.tintWithMultiply:s.tintWithPerPixel},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":112,"../../utils":151}],136:[function(t,e,i){var n=function(t){this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)};e.exports=n,n.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null}},{}],137:[function(t,e,i){function n(t){r.call(this,t),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=c.SPRITE_BATCH_SIZE,this.buffers=[];for(var e=1;e<=p.nextPow2(this.size);e*=2){var i=4*e*this.vertByteSize;this.buffers.push(new l(i))}this.indices=o(this.size),this.shaders=null,this.currentIndex=0,d=0,this.groups=[];for(var n=0;n<this.size;n++)this.groups[n]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};this.sprites=[],this.vertexBuffers=[],this.vaos=[],this.vaoMax=2,this.vertexCount=0,this.renderer.on("prerender",this.onPrerender,this)}var r=t("../../renderers/webgl/utils/ObjectRenderer"),s=t("../../renderers/webgl/WebGLRenderer"),o=t("../../utils/createIndicesForQuads"),a=t("./generateMultiTextureShader"),h=t("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),l=t("./BatchBuffer"),c=t("../../const"),u=t("pixi-gl-core"),p=t("bit-twiddle"),d=0;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,s.registerPlugin("sprite",n),n.prototype.onContextChange=function(){var t=this.renderer.gl;this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),c.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=h(this.MAX_TEXTURES,t),this.shaders=new Array(this.MAX_TEXTURES),this.shaders[0]=a(t,1),this.shaders[1]=a(t,2),this.indexBuffer=u.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW);for(var e=this.shaders[1],i=0;i<this.vaoMax;i++)this.vertexBuffers[i]=u.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),this.vaos[i]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[i],e.attributes.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[i],e.attributes.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[i],e.attributes.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[i],e.attributes.aTextureId,t.FLOAT,!1,this.vertByteSize,16);this.vao=this.vaos[0],this.currentBlendMode=99999},n.prototype.onPrerender=function(){this.vertexCount=0},n.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t.texture._uvs&&(this.sprites[this.currentIndex++]=t)},n.prototype.flush=function(){if(0!==this.currentIndex){var t,e,i,n,r,s,o,h=this.renderer.gl,l=p.nextPow2(this.currentIndex),c=p.log2(l),f=this.buffers[c],m=this.sprites,g=this.groups,v=f.float32View,y=f.uint32View,_=0,x=1,b=0,w=g[0],T=m[0].blendMode;w.textureCount=0,w.start=0,w.blend=T,d++;for(var S=0;S<this.currentIndex;S++){var E=m[S];if(t=E._texture.baseTexture,T!==E.blendMode&&(T=E.blendMode,e=null,b=this.MAX_TEXTURES,d++),e!==t&&(e=t,t._enabled!==d&&(b===this.MAX_TEXTURES&&(d++,b=0,w.size=S-w.start,w=g[x++],w.textureCount=0,w.blend=T,w.start=S),t._enabled=d,t._id=b,w.textures[w.textureCount++]=t,b++)),i=E.vertexData,n=E._tintRGB+(255*E.worldAlpha<<24),r=E._texture._uvs.uvsUint32,s=t._id,this.renderer.roundPixels){var C=this.renderer.resolution;v[_]=(i[0]*C|0)/C,v[_+1]=(i[1]*C|0)/C,v[_+5]=(i[2]*C|0)/C,v[_+6]=(i[3]*C|0)/C,v[_+10]=(i[4]*C|0)/C,v[_+11]=(i[5]*C|0)/C,v[_+15]=(i[6]*C|0)/C,v[_+16]=(i[7]*C|0)/C}else v[_]=i[0],v[_+1]=i[1],v[_+5]=i[2],v[_+6]=i[3],v[_+10]=i[4],v[_+11]=i[5],v[_+15]=i[6],v[_+16]=i[7];y[_+2]=r[0],y[_+7]=r[1],y[_+12]=r[2],y[_+17]=r[3],y[_+3]=y[_+8]=y[_+13]=y[_+18]=n,v[_+4]=v[_+9]=v[_+14]=v[_+19]=s,_+=20}for(w.size=S-w.start,this.vertexCount++,this.vaoMax<=this.vertexCount&&(this.vaoMax++,o=this.shaders[1],this.vertexBuffers[this.vertexCount]=u.GLBuffer.createVertexBuffer(h,null,h.STREAM_DRAW),this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],o.attributes.aVertexPosition,h.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],o.attributes.aTextureCoord,h.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],o.attributes.aColor,h.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[this.vertexCount],o.attributes.aTextureId,h.FLOAT,!1,this.vertByteSize,16)),this.vertexBuffers[this.vertexCount].upload(f.vertices,0),this.vao=this.vaos[this.vertexCount].bind(),S=0;S<x;S++){var M=g[S],P=M.textureCount;o=this.shaders[P-1],o||(o=this.shaders[P-1]=a(h,P)),this.renderer.bindShader(o);for(var A=0;A<P;A++)this.renderer.bindTexture(M.textures[A],A);this.renderer.state.setBlendMode(M.blend),h.drawElements(h.TRIANGLES,6*M.size,h.UNSIGNED_SHORT,6*M.start*2)}this.currentIndex=0}},n.prototype.start=function(){},n.prototype.stop=function(){this.flush(),this.vao.unbind()},n.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t].destroy(),this.vaos[t].destroy();for(this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),r.prototype.destroy.call(this),t=0;t<this.shaders.length;t++)this.shaders[t]&&this.shaders[t].destroy();for(this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null,t=0;t<this.buffers.length;t++)this.buffers[t].destroy()}},{"../../const":78,"../../renderers/webgl/WebGLRenderer":116,"../../renderers/webgl/utils/ObjectRenderer":126,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":129,"../../utils/createIndicesForQuads":149,"./BatchBuffer":136,"./generateMultiTextureShader":138,"bit-twiddle":30,"pixi-gl-core":7}],138:[function(t,e,i){function n(t,e){var i="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vTextureId = aTextureId;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",n=o;n=n.replace(/%count%/gi,e),n=n.replace(/%forloop%/gi,r(e));for(var a=new s(t,i,n,{aVertexPosition:3,aColor:2,aTextureCoord:1,aTextureId:0}),h=[],l=0;l<e;l++)h[l]=l;return a.bind(),a.uniforms.uSamplers=h,a}function r(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(textureId == "+i+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}var s=t("../../Shader"),o=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n");e.exports=n},{"../../Shader":77}],139:[function(t,e,i){function n(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=h.RESOLUTION,this._text=null,this._style=null,this._styleListener=null,this._font="";var i=s.fromCanvas(this.canvas);i.orig=new o.Rectangle,i.trim=new o.Rectangle,r.call(this,i),this.text=t,this.style=e,this.localStyleID=-1}var r=t("../sprites/Sprite"),s=t("../textures/Texture"),o=t("../math"),a=t("../utils"),h=t("../const"),l=t("./TextStyle"),c={texture:!0,children:!1,baseTexture:!0};n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.fontPropertiesCache={},n.fontPropertiesCanvas=document.createElement("canvas"),n.fontPropertiesContext=n.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(n.prototype,{width:{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this.texture.orig.width},set:function(t){this.updateText(!0);var e=a.sign(this.scale.x)||1;this.scale.x=e*t/this.texture.orig.width,this._width=t}},height:{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=a.sign(this.scale.y)||1;this.scale.y=e*t/this.texture.orig.height,this._height=t}},style:{get:function(){return this._style},set:function(t){t=t||{},t instanceof l?this._style=t:this._style=new l(t),this.localStyleID=-1,this.dirty=!0}},text:{get:function(){return this._text},set:function(t){t=t||" ",t=t.toString(),this._text!==t&&(this._text=t,this.dirty=!0)}}}),n.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){var i="number"==typeof e.fontSize?e.fontSize+"px":e.fontSize;this._font=e.fontStyle+" "+e.fontVariant+" "+e.fontWeight+" "+i+" "+e.fontFamily,this.context.font=this._font;var n,r=e.wordWrap?this.wordWrap(this._text):this._text,s=r.split(/(?:\r\n|\r|\n)/),o=new Array(s.length),a=0,h=this.determineFontProperties(this._font);for(n=0;n<s.length;n++){var l=this.context.measureText(s[n]).width+(s[n].length-1)*e.letterSpacing;o[n]=l,a=Math.max(a,l)}var c=a+e.strokeThickness;e.dropShadow&&(c+=e.dropShadowDistance),c+=2*e.padding,this.canvas.width=Math.ceil((c+this.context.lineWidth)*this.resolution);var u=this.style.lineHeight||h.fontSize+e.strokeThickness,p=Math.max(u,h.fontSize+e.strokeThickness)+(s.length-1)*u;e.dropShadow&&(p+=e.dropShadowDistance),this.canvas.height=Math.ceil((p+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokeStyle=e.stroke,this.context.lineWidth=e.strokeThickness,this.context.textBaseline=e.textBaseline,this.context.lineJoin=e.lineJoin,this.context.miterLimit=e.miterLimit;var d,f;if(e.dropShadow){e.dropShadowBlur>0?(this.context.shadowColor=e.dropShadowColor,this.context.shadowBlur=e.dropShadowBlur):this.context.fillStyle=e.dropShadowColor;var m=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,g=Math.sin(e.dropShadowAngle)*e.dropShadowDistance;for(n=0;n<s.length;n++)d=e.strokeThickness/2,f=e.strokeThickness/2+n*u+h.ascent,"right"===e.align?d+=a-o[n]:"center"===e.align&&(d+=(a-o[n])/2),e.fill&&(this.drawLetterSpacing(s[n],d+m+e.padding,f+g+e.padding),e.stroke&&e.strokeThickness&&(this.context.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(s[n],d+m+e.padding,f+g+e.padding,!0),this.context.strokeStyle=e.stroke))}for(this.context.fillStyle=this._generateFillStyle(e,s),n=0;n<s.length;n++)d=e.strokeThickness/2,f=e.strokeThickness/2+n*u+h.ascent,"right"===e.align?d+=a-o[n]:"center"===e.align&&(d+=(a-o[n])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(s[n],d+e.padding,f+e.padding,!0),e.fill&&this.drawLetterSpacing(s[n],d+e.padding,f+e.padding);this.updateTexture()}},n.prototype.drawLetterSpacing=function(t,e,i,n){var r=this._style,s=r.letterSpacing;if(0===s)return void(n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i));for(var o,a=String.prototype.split.call(t,""),h=0,l=e;h<t.length;)o=a[h++],n?this.context.strokeText(o,l,i):this.context.fillText(o,l,i),l+=this.context.measureText(o).width+s},n.prototype.updateTexture=function(){var t=this._texture,e=this._style;t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.realWidth=this.canvas.width,t.baseTexture.realHeight=this.canvas.height,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.trim.width=t._frame.width=this.canvas.width/this.resolution,t.trim.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=-e.padding,t.trim.y=-e.padding,t.orig.width=t._frame.width-2*e.padding,t.orig.height=t._frame.height-2*e.padding,this._onTextureUpdate(),t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},n.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),r.prototype.renderWebGL.call(this,t)},n.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),r.prototype._renderCanvas.call(this,t)},n.prototype.determineFontProperties=function(t){var e=n.fontPropertiesCache[t];if(!e){e={};var i=n.fontPropertiesCanvas,r=n.fontPropertiesContext;r.font=t;var s=Math.ceil(r.measureText("|Mq").width),o=Math.ceil(r.measureText("M").width),a=2*o;o=1.4*o|0,i.width=s,i.height=a,r.fillStyle="#f00",r.fillRect(0,0,s,a),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText("|Mq",0,o);var h,l,c=r.getImageData(0,0,s,a).data,u=c.length,p=4*s,d=0,f=!1;for(h=0;h<o;h++){for(l=0;l<p;l+=4)if(255!==c[d+l]){f=!0;break}if(f)break;d+=p}for(e.ascent=o-h,d=u-p,f=!1,h=a;h>o;h--){for(l=0;l<p;l+=4)if(255!==c[d+l]){f=!0;break}if(f)break;d-=p}e.descent=h-o,e.fontSize=e.ascent+e.descent,n.fontPropertiesCache[t]=e}return e},n.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),n=this._style.wordWrapWidth,r=0;r<i.length;r++){for(var s=n,o=i[r].split(" "),a=0;a<o.length;a++){var h=this.context.measureText(o[a]).width;if(this._style.breakWords&&h>n)for(var l=o[a].split(""),c=0;c<l.length;c++){var u=this.context.measureText(l[c]).width;u>s?(e+="\n"+l[c],s=n-u):(0===c&&(e+=" "),e+=l[c],s-=u)}else{var p=h+this.context.measureText(" ").width;0===a||p>s?(a>0&&(e+="\n"),e+=o[a],s=n-h):(s-=p,e+=" "+o[a])}}r<i.length-1&&(e+="\n")}return e},n.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},n.prototype._onStyleChange=function(){this.dirty=!0},n.prototype._generateFillStyle=function(t,e){if(Array.isArray(t.fill)){var i,n,r,s,o,a=this.canvas.width/this.resolution,l=this.canvas.height/this.resolution;
if(t.fillGradientType===h.TEXT_GRADIENT.LINEAR_VERTICAL)for(n=this.context.createLinearGradient(a/2,0,a/2,l),r=(t.fill.length+1)*e.length,s=0,i=0;i<e.length;i++){s+=1;for(var c=0;c<t.fill.length;c++)o=s/r,n.addColorStop(o,t.fill[c]),s++}else for(n=this.context.createLinearGradient(0,l/2,a,l/2),r=t.fill.length+1,s=1,i=0;i<t.fill.length;i++)o=s/r,n.addColorStop(o,t.fill[i]),s++;return n}return t.fill},n.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},c,t),r.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null}},{"../const":78,"../math":102,"../sprites/Sprite":133,"../textures/Texture":144,"../utils":151,"./TextStyle":140}],140:[function(t,e,i){function n(t){this.styleID=0,Object.assign(this,this._defaults,t)}function r(t){if("number"==typeof t)return o.hex2string(t);if(Array.isArray(t))for(var e=0;e<t.length;++e)"number"==typeof t[e]&&(t[e]=o.hex2string(t[e]));return t}var s=t("../const"),o=t("../utils");n.prototype.constructor=n,e.exports=n,n.prototype._defaults={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:s.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",wordWrap:!1,wordWrapWidth:100},n.prototype.clone=function(){var t={};for(var e in this._defaults)t[e]=this[e];return new n(t)},n.prototype.reset=function(){Object.assign(this,this._defaults)},Object.defineProperties(n.prototype,{align:{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},breakWords:{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},dropShadow:{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},dropShadowAngle:{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},dropShadowBlur:{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},dropShadowColor:{get:function(){return this._dropShadowColor},set:function(t){var e=r(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},dropShadowDistance:{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},fill:{get:function(){return this._fill},set:function(t){var e=r(t);this._fill!==e&&(this._fill=e,this.styleID++)}},fillGradientType:{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},fontFamily:{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},fontSize:{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},fontStyle:{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},fontVariant:{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},fontWeight:{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},letterSpacing:{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},lineHeight:{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},lineJoin:{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},miterLimit:{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},padding:{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},stroke:{get:function(){return this._stroke},set:function(t){var e=r(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},strokeThickness:{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},textBaseline:{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},wordWrap:{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},wordWrapWidth:{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}})},{"../const":78,"../utils":151}],141:[function(t,e,i){function n(t,e,i,n){r.call(this,null,i),this.resolution=n||s.RESOLUTION,this.width=t||100,this.height=e||100,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.scaleMode=i||s.SCALE_MODES.DEFAULT,this.hasLoaded=!0,this._glRenderTargets=[],this._canvasRenderTarget=null,this.valid=!1}var r=t("./BaseTexture"),s=t("../const");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.resize=function(t,e){t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},n.prototype.destroy=function(){r.prototype.destroy.call(this,!0),this.renderer=null}},{"../const":78,"./BaseTexture":142}],142:[function(t,e,i){function n(t,e,i){o.call(this),this.uid=r.uid(),this.touched=0,this.resolution=i||s.RESOLUTION,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=e||s.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=s.MIPMAP_TEXTURES,this.wrapMode=s.WRAP_MODES.DEFAULT,this._glTextures=[],this._enabled=0,this._id=0,t&&this.loadSource(t)}var r=t("../utils"),s=t("../const"),o=t("eventemitter3"),a=t("../utils/determineCrossOrigin"),h=t("bit-twiddle");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=h.isPow2(this.realWidth)&&h.isPow2(this.realHeight),this.emit("update",this)},n.prototype.loadSource=function(t){var e=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=t,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!t.getContext){this.isLoading=!0;var i=this;t.onload=function(){t.onload=null,t.onerror=null,i.isLoading&&(i.isLoading=!1,i._sourceLoaded(),i.emit("loaded",i))},t.onerror=function(){t.onload=null,t.onerror=null,i.isLoading&&(i.isLoading=!1,i.emit("error",i))},t.complete&&t.src&&(this.isLoading=!1,t.onload=null,t.onerror=null,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this))}},n.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},n.prototype.destroy=function(){this.imageUrl?(delete r.BaseTextureCache[this.imageUrl],delete r.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete r.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},n.prototype.dispose=function(){this.emit("dispose",this)},n.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},n.fromImage=function(t,e,i){var s=r.BaseTextureCache[t];if(!s){var o=new Image;void 0===e&&0!==t.indexOf("data:")&&(o.crossOrigin=a(t)),s=new n(o,i),s.imageUrl=t,o.src=t,r.BaseTextureCache[t]=s,s.resolution=r.getResolutionOfUrl(t)}return s},n.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+r.uid());var i=r.BaseTextureCache[t._pixiId];return i||(i=new n(t,e),r.BaseTextureCache[t._pixiId]=i),i}},{"../const":78,"../utils":151,"../utils/determineCrossOrigin":150,"bit-twiddle":30,eventemitter3:32}],143:[function(t,e,i){function n(t,e){if(this.legacyRenderer=null,!(t instanceof r)){var i=arguments[1],n=arguments[2],o=arguments[3]||0,a=arguments[4]||1;this.legacyRenderer=arguments[0],e=null,t=new r(i,n,o,a)}s.call(this,t,e),this.valid=!0,this._updateUvs()}var r=t("./BaseRenderTexture"),s=t("./Texture");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.resize=function(t,e,i){this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i||this.baseTexture.resize(t,e),this._updateUvs()},n.create=function(t,e,i,s){return new n(new r(t,e,i,s))}},{"./BaseRenderTexture":141,"./Texture":144}],144:[function(t,e,i){function n(t,e,i,r,s){if(a.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new h.Rectangle(0,0,1,1)),t instanceof n&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=r,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.orig=i||e,this._rotate=+(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually";t.hasLoaded?(this.noFrame&&(e=new h.Rectangle(0,0,t.width,t.height),t.on("update",this.onBaseTextureUpdated,this)),this.frame=e):t.once("loaded",this.onBaseTextureLoaded,this),this._updateID=0}var r=t("./BaseTexture"),s=t("./VideoBaseTexture"),o=t("./TextureUvs"),a=t("eventemitter3"),h=t("../math"),l=t("../utils");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{frame:{get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},rotate:{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},width:{get:function(){return this.orig?this.orig.width:0}},height:{get:function(){return this.orig?this.orig.height:0}}}),n.prototype.update=function(){this.baseTexture.update()},n.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new h.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},n.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},n.prototype.destroy=function(t){this.baseTexture&&(t&&(l.TextureCache[this.baseTexture.imageUrl]&&delete l.TextureCache[this.baseTexture.imageUrl],this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},n.prototype.clone=function(){return new n(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},n.prototype._updateUvs=function(){this._uvs||(this._uvs=new o),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},n.fromImage=function(t,e,i){var s=l.TextureCache[t];return s||(s=new n(r.fromImage(t,e,i)),l.TextureCache[t]=s),s},n.fromFrame=function(t){var e=l.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},n.fromCanvas=function(t,e){return new n(r.fromCanvas(t,e))},n.fromVideo=function(t,e){return"string"==typeof t?n.fromVideoUrl(t,e):new n(s.fromVideo(t,e))},n.fromVideoUrl=function(t,e){return new n(s.fromUrl(t,e))},n.from=function(t){if("string"==typeof t){var e=l.TextureCache[t];if(!e){var i=null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/);return i?n.fromVideoUrl(t):n.fromImage(t)}return e}return t instanceof HTMLCanvasElement?n.fromCanvas(t):t instanceof HTMLVideoElement?n.fromVideo(t):t instanceof r?new n(r):t},n.addTextureToCache=function(t,e){l.TextureCache[e]=t},n.removeTextureFromCache=function(t){var e=l.TextureCache[t];return delete l.TextureCache[t],delete l.BaseTextureCache[t],e},n.EMPTY=new n(new r),n.EMPTY.destroy=function(){},n.EMPTY.on=function(){},n.EMPTY.once=function(){},n.EMPTY.emit=function(){}},{"../math":102,"../utils":151,"./BaseTexture":142,"./TextureUvs":145,"./VideoBaseTexture":146,eventemitter3:32}],145:[function(t,e,i){function n(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}e.exports=n;var r=t("../math/GroupD8");n.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var o=t.width/2/n,a=t.height/2/s,h=t.x/n+o,l=t.y/s+a;i=r.add(i,r.NW),this.x0=h+o*r.uX(i),this.y0=l+a*r.uY(i),i=r.add(i,2),this.x1=h+o*r.uX(i),this.y1=l+a*r.uY(i),i=r.add(i,2),this.x2=h+o*r.uX(i),this.y2=l+a*r.uY(i),i=r.add(i,2),this.x3=h+o*r.uX(i),this.y3=l+a*r.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535}},{"../math/GroupD8":98}],146:[function(t,e,i){function n(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),s.call(this,t,e),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),t.complete||(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function r(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=t,i.type=e,i}var s=t("./BaseTexture"),o=t("../utils");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},n.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},n.prototype._onPlayStop=function(){this.autoUpdate=!1},n.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},n.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete o.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),s.prototype.destroy.call(this)},n.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+o.uid());var i=o.BaseTextureCache[t._pixiId];return i||(i=new n(t,e),o.BaseTextureCache[t._pixiId]=i),i},n.fromUrl=function(t,e){var i=document.createElement("video");if(Array.isArray(t))for(var s=0;s<t.length;++s)i.appendChild(r(t[s].src||t[s],t[s].mime));else i.appendChild(r(t.src||t,t.mime));return i.load(),i.play(),n.fromVideo(i,e)},n.fromUrls=n.fromUrl},{"../utils":151,"./BaseTexture":142}],147:[function(t,e,i){function n(){var t=this;this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._emitter.listeners(o,!0)&&(t._requestId=requestAnimationFrame(t._tick)))},this._emitter=new s,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/r.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var r=t("../const"),s=t("eventemitter3"),o="tick";Object.defineProperties(n.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,r.TARGET_FPMS);this._maxElapsedMS=1/e}}}),n.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(o,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(t,e){return this._emitter.on(o,t,e),this._startIfPossible(),this},n.prototype.addOnce=function(t,e){return this._emitter.once(o,t,e),this._startIfPossible(),this},n.prototype.remove=function(t,e){return this._emitter.off(o,t,e),this._emitter.listeners(o,!0)||this._cancelIfNeeded(),this},n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.update=function(t){var e;t=t||performance.now(),t>this.lastTime?(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*r.TARGET_FPMS*this.speed,this._emitter.emit(o,this.deltaTime)):this.deltaTime=this.elapsedMS=0,this.lastTime=t},e.exports=n},{"../const":78,eventemitter3:32}],148:[function(t,e,i){var n=t("./Ticker"),r=new n;r.autoStart=!0,e.exports={shared:r,Ticker:n}},{"./Ticker":147}],149:[function(t,e,i){var n=function(t){for(var e=6*t,i=new Uint16Array(e),n=0,r=0;n<e;n+=6,r+=4)i[n+0]=r+0,i[n+1]=r+1,i[n+2]=r+2,i[n+3]=r+0,i[n+4]=r+2,i[n+5]=r+3;return i};e.exports=n},{}],150:[function(t,e,i){var n,r=t("url"),s=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,n||(n=document.createElement("a")),n.href=t,t=r.parse(n.href);var i=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"};e.exports=s},{url:72}],151:[function(t,e,i){var n=t("../const"),r=e.exports={_uid:0,_saidHello:!1,EventEmitter:t("eventemitter3"),pluginTarget:t("./pluginTarget"),uid:function(){return++r._uid},hex2rgb:function(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},hex2string:function(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#"+t},rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},getResolutionOfUrl:function(t){var e=n.RETINA_PREFIX.exec(t);return e?parseFloat(e[1]):1},sayHello:function(t){if(!r._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+n.VERSION+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+n.VERSION+" - "+t+" - http://www.pixijs.com/");r._saidHello=!0}},isWebGLSupported:function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,n}catch(s){return!1}},sign:function(t){return t?t<0?-1:1:0},removeItems:function(t,e,i){var n=t.length;if(!(e>=n||0===i)){i=e+i>n?n-e:i;for(var r=e,s=n-i;r<s;++r)t[r]=t[r+i];t.length=s}},TextureCache:{},BaseTextureCache:{}}},{"../const":78,"./pluginTarget":153,eventemitter3:32}],152:[function(t,e,i){var n=t("ismobilejs"),r=function(t){return n.tablet||n.phone?2:t};e.exports=r},{ismobilejs:33}],153:[function(t,e,i){function n(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}e.exports={mixin:function(t){n(t)}}},{}],154:[function(t,e,i){function n(t){var e=(new Error).stack;"undefined"==typeof e||(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed)}var r=t("./core"),s=t("./mesh"),o=t("./particles"),a=t("./extras"),h=t("./filters");r.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},r.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(r,{Stage:{get:function(){return n("You do not need to use a PIXI Stage any more, you can simply render any container."),r.Container}},DisplayObjectContainer:{get:function(){return n("DisplayObjectContainer has been shortened to Container, please use Container from now on."),r.Container}},Strip:{get:function(){return n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),s.Mesh}},Rope:{get:function(){return n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),s.Rope}},ParticleContainer:{get:function(){return n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),o.ParticleContainer}},MovieClip:{get:function(){return n("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on."),a.MovieClip}},TilingSprite:{get:function(){return n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),a.TilingSprite}},BitmapText:{get:function(){return n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),a.BitmapText}},blendModes:{get:function(){return n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),r.BLEND_MODES}},scaleModes:{get:function(){return n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),r.SCALE_MODES}},BaseTextureCache:{get:function(){return n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),r.utils.BaseTextureCache}},TextureCache:{get:function(){return n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),r.utils.TextureCache}},math:{get:function(){return n("The math namespace is deprecated, please access members already accessible on PIXI."),r}},AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),r.Filter}},TransformManual:{get:function(){return n("TransformManual has been renamed to TransformBase, please update your pixi-spine"),r.TransformBase}}}),r.DisplayObject.prototype.generateTexture=function(t,e,i){return n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,i)},r.Graphics.prototype.generateTexture=function(t,e){return n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},r.RenderTexture.prototype.render=function(t,e,i,r){this.legacyRenderer.render(t,this,i,e,!r),n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},r.RenderTexture.prototype.getImage=function(t){return n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},r.RenderTexture.prototype.getBase64=function(t){return n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},r.RenderTexture.prototype.getCanvas=function(t){return n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},r.RenderTexture.prototype.getPixels=function(t){return n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},r.Sprite.prototype.setTexture=function(t){this.texture=t,n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},a.BitmapText.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},r.Text.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},r.Text.prototype.setStyle=function(t){this.style=t,n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},Object.defineProperties(r.TextStyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e,i=t.split(" "),r=-1;for(this._fontSize=26,e=0;e<i.length;++e)if(i[e].match(/(px|pt|em|%)/)){r=e,this._fontSize=i[e];break}for(this._fontWeight="normal",e=0;e<r;++e)if(i[e].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=i[e];break}if(r>-1&&r<i.length-1){for(this._fontFamily="",e=r+1;e<i.length;++e)this._fontFamily+=i[e]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),r.Texture.prototype.setFrame=function(t){this.frame=t,n("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")},Object.defineProperties(h,{AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),r.AbstractFilter}},SpriteMaskFilter:{get:function(){return n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),r.SpriteMaskFilter}}}),r.utils.uuid=function(){return n("utils.uuid() is deprecated, please use utils.uid() from now on."),r.utils.uid()},r.utils.canUseNewCanvasBlendModes=function(){return n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),r.CanvasTinter.canUseMultiply}},{"./core":97,"./extras":164,"./filters":175,"./mesh":191,"./particles":194}],155:[function(t,e,i){function n(t){this.renderer=t,t.extract=this}var r=t("../../core"),s=new r.Rectangle;n.prototype.constructor=n,e.exports=n,n.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},n.prototype.base64=function(t){return this.canvas(t).toDataURL()},n.prototype.canvas=function(t){var e,i,n,o,a=this.renderer;t&&(o=t instanceof r.RenderTexture?t:a.generateTexture(t)),o?(e=o.baseTexture._canvasRenderTarget.context,i=o.baseTexture._canvasRenderTarget.resolution,n=o.frame):(e=a.rootContext,i=a.rootResolution,n=s,n.width=this.renderer.width,n.height=this.renderer.height);var h=n.width*i,l=n.height*i,c=new r.CanvasRenderTarget(h,l),u=e.getImageData(n.x*i,n.y*i,h,l);return c.context.putImageData(u,0,0),c.canvas},n.prototype.pixels=function(t){var e,i,n,o,a=this.renderer;return t&&(o=t instanceof r.RenderTexture?t:a.generateTexture(t)),o?(e=o.baseTexture._canvasRenderTarget.context,i=o.baseTexture._canvasRenderTarget.resolution,n=o.frame):(e=a.rootContext,i=a.rootResolution,n=s,n.width=a.width,n.height=a.height),e.getImageData(0,0,n.width*i,n.height*i).data},n.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},r.CanvasRenderer.registerPlugin("extract",n)},{"../../core":97}],156:[function(t,e,i){e.exports={webGL:t("./webgl/WebGLExtract"),canvas:t("./canvas/CanvasExtract")}},{"./canvas/CanvasExtract":155,"./webgl/WebGLExtract":157}],157:[function(t,e,i){function n(t){this.renderer=t,t.extract=this}var r=t("../../core"),s=new r.Rectangle;n.prototype.constructor=n,e.exports=n,n.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},n.prototype.base64=function(t){return this.canvas(t).toDataURL()},n.prototype.canvas=function(t){var e,i,n,o,a=this.renderer,h=!1;t&&(o=t instanceof r.RenderTexture?t:this.renderer.generateTexture(t)),o?(e=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],i=e.resolution,n=o.frame,h=!1):(e=this.renderer.rootRenderTarget,i=e.resolution,h=!0,n=s,n.width=e.size.width,n.height=e.size.height);var l=n.width*i,c=n.height*i,u=new r.CanvasRenderTarget(l,c);if(e){a.bindRenderTarget(e);var p=new Uint8Array(4*l*c),d=a.gl;d.readPixels(n.x*i,n.y*i,l,c,d.RGBA,d.UNSIGNED_BYTE,p);var f=u.context.getImageData(0,0,l,c);f.data.set(p),u.context.putImageData(f,0,0),h&&(u.context.scale(1,-1),u.context.drawImage(u.canvas,0,-c))}return u.canvas},n.prototype.pixels=function(t){var e,i,n,o,a=this.renderer;t&&(o=t instanceof r.RenderTexture?t:this.renderer.generateTexture(t)),o?(e=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],i=e.resolution,n=o.frame):(e=this.renderer.rootRenderTarget,i=e.resolution,n=s,n.width=e.size.width,n.height=e.size.height);var h=n.width*i,l=n.height*i,c=new Uint8Array(4*h*l);if(e){a.bindRenderTarget(e);var u=a.gl;u.readPixels(n.x*i,n.y*i,h,l,u.RGBA,u.UNSIGNED_BYTE,c)}return c},n.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},r.WebGLRenderer.registerPlugin("extract",n)},{"../../core":97}],158:[function(t,e,i){function n(t,e){r.Container.call(this),e=e||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},this.font=e.font,this._text=t,this.maxWidth=0,this.maxLineHeight=0,this._anchor=new s(this.makeDirty,this,0,0),this.dirty=!1,this.updateText()}var r=t("../core"),s=t("../core/math/ObservablePoint");n.prototype=Object.create(r.Container.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{tint:{get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},anchor:{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},font:{get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):n.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},text:{get:function(){return this._text;
},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),n.prototype.updateText=function(){for(var t=n.fonts[this._font.name],e=new r.Point,i=null,s=[],o=0,a=0,h=[],l=0,c=this._font.size/t.size,u=-1,p=0,d=0,f=0;f<this.text.length;f++){var m=this.text.charCodeAt(f);if(/(\s)/.test(this.text.charAt(f))&&(u=f,p=o),/(?:\r\n|\r|\n)/.test(this.text.charAt(f)))h.push(o),a=Math.max(a,o),l++,e.x=0,e.y+=t.lineHeight,i=null;else if(u!==-1&&this.maxWidth>0&&e.x*c>this.maxWidth)r.utils.removeItems(s,u,f-u),f=u,u=-1,h.push(p),a=Math.max(a,p),l++,e.x=0,e.y+=t.lineHeight,i=null;else{var g=t.chars[m];g&&(i&&g.kerning[i]&&(e.x+=g.kerning[i]),s.push({texture:g.texture,line:l,charCode:m,position:new r.Point(e.x+g.xOffset,e.y+g.yOffset)}),o=e.x+(g.texture.width+g.xOffset),e.x+=g.xAdvance,d=Math.max(d,g.yOffset+g.texture.height),i=m)}}h.push(o),a=Math.max(a,o);var v=[];for(f=0;f<=l;f++){var y=0;"right"===this._font.align?y=a-h[f]:"center"===this._font.align&&(y=(a-h[f])/2),v.push(y)}var _=s.length,x=this.tint;for(f=0;f<_;f++){var b=this._glyphs[f];b?b.texture=s[f].texture:(b=new r.Sprite(s[f].texture),this._glyphs.push(b)),b.position.x=(s[f].position.x+v[s[f].line])*c,b.position.y=s[f].position.y*c,b.scale.x=b.scale.y=c,b.tint=x,b.parent||this.addChild(b)}for(f=_;f<this._glyphs.length;++f)this.removeChild(this._glyphs[f]);if(this.textWidth=a*c,this.textHeight=(e.y+t.lineHeight)*c,0!==this.anchor.x||0!==this.anchor.y)for(f=0;f<_;f++)this._glyphs[f].x-=this.textWidth*this.anchor.x,this._glyphs[f].y-=this.textHeight*this.anchor.y;this.maxLineHeight=d*c},n.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},n.prototype.getLocalBounds=function(){return this.validate(),r.Container.prototype.getLocalBounds.call(this)},n.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},n.prototype.makeDirty=function(){this.dirty=!0},n.fonts={}},{"../core":97,"../core/math/ObservablePoint":100}],159:[function(t,e,i){function n(t){r.Sprite.call(this,t[0]instanceof r.Texture?t[0]:t[0].texture),this._textures=null,this._durations=null,this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var r=t("../core");n.prototype=Object.create(r.Sprite.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(t){if(t[0]instanceof r.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}}},currentFrame:{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}}),n.prototype.stop=function(){this.playing&&(this.playing=!1,r.ticker.shared.remove(this.update,this))},n.prototype.play=function(){this.playing||(this.playing=!0,r.ticker.shared.add(this.update,this))},n.prototype.gotoAndStop=function(t){this.stop(),this._currentTime=t,this._texture=this._textures[this.currentFrame],this._textureID=-1},n.prototype.gotoAndPlay=function(t){this._currentTime=t,this.play()},n.prototype.update=function(t){var e=this.animationSpeed*t;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):(this._texture=this._textures[this.currentFrame],this._textureID=-1)},n.prototype.destroy=function(){this.stop(),r.Sprite.prototype.destroy.call(this)},n.fromFrames=function(t){for(var e=[],i=0;i<t.length;++i)e.push(r.Texture.fromFrame(t[i]));return new n(e)},n.fromImages=function(t){for(var e=[],i=0;i<t.length;++i)e.push(r.Texture.fromImage(t[i]));return new n(e)}},{"../core":97}],160:[function(t,e,i){function n(t,e,i){r.Sprite.call(this,t),this.tileScale=new r.Point(1,1),this.tilePosition=new r.Point(0,0),this._width=e||100,this._height=i||100,this._uvs=new r.TextureUvs,this._canvasPattern=null,this._glDatas=[]}var r=t("../core"),s=new r.Point,o=t("../core/textures/Texture"),a=t("../core/sprites/canvas/CanvasTinter"),h=t("./webgl/TilingShader"),l=new Float32Array(4);n.prototype=Object.create(r.Sprite.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t}},height:{get:function(){return this._height},set:function(t){this._height=t}}}),n.prototype._onTextureUpdate=function(){},n.prototype._renderWebGL=function(t){var e=this._texture;if(e&&e._uvs){t.flush();var i=t.gl,n=this._glDatas[t.CONTEXT_UID];n||(n={shader:new h(i),quad:new r.Quad(i)},this._glDatas[t.CONTEXT_UID]=n,n.quad.initVao(n.shader));var s=n.quad.vertices;s[0]=s[6]=this._width*-this.anchor.x,s[1]=s[3]=this._height*-this.anchor.y,s[2]=s[4]=this._width*(1-this.anchor.x),s[5]=s[7]=this._height*(1-this.anchor.y),n.quad.upload(),t.bindShader(n.shader);var o=e._uvs,a=e._frame.width,c=e._frame.height,u=e.baseTexture.width,p=e.baseTexture.height,d=n.shader.uniforms.uPixelSize;d[0]=1/u,d[1]=1/p,n.shader.uniforms.uPixelSize=d;var f=n.shader.uniforms.uFrame;f[0]=o.x0,f[1]=o.y0,f[2]=o.x1-o.x0,f[3]=o.y2-o.y0,n.shader.uniforms.uFrame=f;var m=n.shader.uniforms.uTransform;m[0]=this.tilePosition.x%(a*this.tileScale.x)/this._width,m[1]=this.tilePosition.y%(c*this.tileScale.y)/this._height,m[2]=u/this._width*this.tileScale.x,m[3]=p/this._height*this.tileScale.y,n.shader.uniforms.uTransform=m,n.shader.uniforms.translationMatrix=this.worldTransform.toArray(!0);var g=l;r.utils.hex2rgb(this.tint,g),g[3]=this.worldAlpha,n.shader.uniforms.uColor=g,t.bindTexture(this._texture,0),t.state.setBlendMode(this.blendMode),n.quad.draw()}},n.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,n=this.worldTransform,s=t.resolution,o=e.baseTexture,h=this.tilePosition.x/this.tileScale.x%e._frame.width,l=this.tilePosition.y/this.tileScale.y%e._frame.height;if(!this._canvasPattern){var c=new r.CanvasRenderTarget(e._frame.width,e._frame.height);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=a.getTintedTexture(this,this.tint)),c.context.drawImage(this.tintedTexture,0,0)):c.context.drawImage(o.source,-e._frame.x,-e._frame.y),this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(n.a*s,n.b*s,n.c*s,n.d*s,n.tx*s,n.ty*s),i.scale(this.tileScale.x,this.tileScale.y),i.translate(h+this.anchor.x*-this._width,l+this.anchor.y*-this._height);var u=t.blendModes[this.blendMode];u!==t.context.globalCompositeOperation&&(i.globalCompositeOperation=u),i.fillStyle=this._canvasPattern,i.fillRect(-h,-l,this._width/this.tileScale.x,this._height/this.tileScale.y)}},n.prototype.getBounds=function(){var t,e,i,n,r=this._width,s=this._height,o=r*(1-this.anchor.x),a=r*-this.anchor.x,h=s*(1-this.anchor.y),l=s*-this.anchor.y,c=this.worldTransform,u=c.a,p=c.b,d=c.c,f=c.d,m=c.tx,g=c.ty,v=u*a+d*l+m,y=f*l+p*a+g,_=u*o+d*l+m,x=f*l+p*o+g,b=u*o+d*h+m,w=f*h+p*o+g,T=u*a+d*h+m,S=f*h+p*a+g;t=v,t=_<t?_:t,t=b<t?b:t,t=T<t?T:t,i=y,i=x<i?x:i,i=w<i?w:i,i=S<i?S:i,e=v,e=_>e?_:e,e=b>e?b:e,e=T>e?T:e,n=y,n=x>n?x:n,n=w>n?w:n,n=S>n?S:n;var E=this._bounds;return E.x=t,E.width=e-t,E.y=i,E.height=n-i,this._currentBounds=E,E},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,s);var e,i=this._width,n=this._height,r=-i*this.anchor.x;return s.x>r&&s.x<r+i&&(e=-n*this.anchor.y,s.y>e&&s.y<e+n)},n.prototype.destroy=function(){r.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},n.from=function(t,e,i){return new n(o.from(t),e,i)},n.fromFrame=function(t,e,i){var s=r.utils.TextureCache[t];if(!s)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new n(s,e,i)},n.fromImage=function(t,e,i,s,o){return new n(r.Texture.fromImage(t,s,o),e,i)}},{"../core":97,"../core/sprites/canvas/CanvasTinter":135,"../core/textures/Texture":144,"./webgl/TilingShader":165}],161:[function(t,e,i){var n=t("../core"),r=n.DisplayObject,s=new n.Matrix;r.prototype._cacheAsBitmap=!1,r.prototype._cacheData=!1;var o=function(){this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(r.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e;t?(this._cacheData||(this._cacheData=new o),e=this._cacheData,e.originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),r.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},r.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters){var r=this._filters[0].padding;i.pad(r)}var o=t._activeRenderTarget,a=t.filterManager.filterStack,h=n.RenderTexture.create(0|i.width,0|i.height),l=s;l.tx=-i.x,l.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,h,!0,l,!0),t.bindRenderTarget(o),t.filterManager.filterStack=a,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var c=new n.Sprite(h);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(i.x/i.width),c.anchor.y=-(i.y/i.height),c.alpha=e,c._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.updateTransform(),this.containsPoint=c.containsPoint.bind(c)}},r.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},r.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var r=t.context,o=new n.RenderTexture.create(0|e.width,0|e.height),a=s;this.transform.worldTransform.copy(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,o,!0,a,!1),t.context=r,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var h=new n.Sprite(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(e.x/e.width),h.anchor.y=-(e.y/e.height),h._bounds=this._bounds,h.alpha=i,this.updateTransform(),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=h,this.containsPoint=h.containsPoint.bind(h)}},r.prototype._calculateCachedBounds=function(){return this._cacheData.sprite._calculateBounds()},r.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},r.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null},r.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this.destroy()}},{"../core":97}],162:[function(t,e,i){var n=t("../core");n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":97}],163:[function(t,e,i){var n=t("../core");n.DisplayObject.prototype.getGlobalPosition=function(t){return t=t||new n.Point,this.parent?(this.displayObjectUpdateTransform(),t.x=this.worldTransform.tx,t.y=this.worldTransform.ty):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":97}],164:[function(t,e,i){t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition"),e.exports={MovieClip:t("./MovieClip"),TilingSprite:t("./TilingSprite"),BitmapText:t("./BitmapText")}},{"./BitmapText":158,"./MovieClip":159,"./TilingSprite":160,"./cacheAsBitmap":161,"./getChildByName":162,"./getGlobalPosition":163}],165:[function(t,e,i){function n(t){r.call(this,t,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nuniform vec4 uFrame;\nuniform vec4 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vec2 coord = aTextureCoord;\n    coord -= uTransform.xy;\n    coord /= uTransform.zw;\n    vTextureCoord = coord;\n}\n","#define GLSLIFY 1\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform vec4 uFrame;\nuniform vec2 uPixelSize;\n\nvoid main(void)\n{\n\n   \tvec2 coord = mod(vTextureCoord, uFrame.zw);\n   \tcoord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);\n   \tcoord += uFrame.xy;\n\n   \tvec4 sample = texture2D(uSampler, coord);\n  \tvec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n   \tgl_FragColor = sample * color ;\n}\n")}var r=t("../../core/Shader");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n},{"../../core/Shader":77}],166:[function(t,e,i){function n(t,e,i){r.Filter.call(this),this.blurXFilter=new s,this.blurYFilter=new o,this.resolution=1,this.padding=0,this.resolution=i||1,this.quality=e||4,this.blur=t||8}var r=t("../../core"),s=t("./BlurXFilter"),o=t("./BlurYFilter");n.prototype=Object.create(r.Filter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.apply=function(t,e,i){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,i,!1),t.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))}},quality:{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))}}})},{"../../core":97,"./BlurXFilter":167,"./BlurYFilter":168}],167:[function(t,e,i){function n(t,e,i){var n=s(5,!0),a=o(5);r.Filter.call(this,n,a),this.resolution=i||1,this._quality=0,this.quality=e||4,this.strength=t||8,this.firstRun=!0}var r=t("../../core"),s=t("./generateBlurVertSource"),o=t("./generateBlurFragSource"),a=t("./getMaxBlurKernelSize");n.prototype=Object.create(r.Filter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,h=a(r);this.vertexSrc=s(h,!0),this.fragmentSrc=o(h),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var l=t.getRenderTarget(!0),c=e,u=l,p=0;p<this.passes-1;p++){t.applyFilter(this,c,u,!0);var d=u;u=c,c=d}t.applyFilter(this,c,i,n),t.returnRenderTarget(l)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},quality:{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}})},{"../../core":97,"./generateBlurFragSource":169,"./generateBlurVertSource":170,"./getMaxBlurKernelSize":171}],168:[function(t,e,i){function n(t,e,i){var n=s(5,!1),a=o(5);r.Filter.call(this,n,a),this.resolution=i||1,this._quality=0,this.quality=e||4,this.strength=t||8,this.firstRun=!0}var r=t("../../core"),s=t("./generateBlurVertSource"),o=t("./generateBlurFragSource"),a=t("./getMaxBlurKernelSize");n.prototype=Object.create(r.Filter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,h=a(r);this.vertexSrc=s(h,!1),this.fragmentSrc=o(h),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var l=t.getRenderTarget(!0),c=e,u=l,p=0;p<this.passes-1;p++){t.applyFilter(this,c,u,!0);var d=u;u=c,c=d}t.applyFilter(this,c,i,n),t.returnRenderTarget(l)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},quality:{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}})},{"../../core":97,"./generateBlurFragSource":169,"./generateBlurVertSource":170,"./getMaxBlurKernelSize":171}],169:[function(t,e,i){var n={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},r=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","\tgl_FragColor = vec4(0.0);","\t%blur%","}"].join("\n"),s=function(t){for(var e,i=n[t],s=i.length,o=r,a="",h="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",l=0;l<t;l++){var c=h.replace("%index%",l);e=l,l>=s&&(e=t-l-1),c=c.replace("%value%",i[e]),a+=c,a+="\n"}return o=o.replace("%blur%",a),o=o.replace("%size%",t)};e.exports=s},{}],170:[function(t,e,i){var n=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n"),r=function(t,e){var i,r,s=Math.ceil(t/2),o=n,a="";i=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var h=0;h<t;h++){var l=i.replace("%index%",h);r=h,h>=s&&(r=t-h-1),l=l.replace("%sampleIndex%",h-(s-1)+".0"),a+=l,a+="\n"}return o=o.replace("%blur%",a),o=o.replace("%size%",t)};e.exports=r},{}],171:[function(t,e,i){var n=function(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),i=15;i>e;)i-=2;return i};e.exports=n},{}],172:[function(t,e,i){function n(){r.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4] * c.a;\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9] * c.a;\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14] * c.a;\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19] * c.a;\n\n//    gl_FragColor = vec4(m[0]);\n}\n"),this.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}var r=t("../../core");n.prototype=Object.create(r.Filter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._loadMatrix=function(t,e){e=!!e;var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},n.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19],t},n.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},n.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.grayscale=n.prototype.greyscale,n.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=Math.sqrt,s=1/3,o=r(s),a=i+(1-i)*s,h=s*(1-i)-o*n,l=s*(1-i)+o*n,c=s*(1-i)+o*n,u=i+s*(1-i),p=s*(1-i)-o*n,d=s*(1-i)-o*n,f=s*(1-i)+o*n,m=i+s*(1-i),g=[a,h,l,0,0,c,u,p,0,0,d,f,m,0,0,0,0,0,1,0];this._loadMatrix(g,e)},n.prototype.contrast=function(t,e){var i=(t||0)+1,n=-128*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.saturate=function(t,e){var i=2*(t||0)/3+1,n=(i-1)*-.5,r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.desaturate=function(){this.saturate(-1)},n.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.colorTone=function(t,e,i,n,r){t=t||.2,e=e||.15,i=i||16770432,n=n||3375104;var s=(i>>16&255)/255,o=(i>>8&255)/255,a=(255&i)/255,h=(n>>16&255)/255,l=(n>>8&255)/255,c=(255&n)/255,u=[.3,.59,.11,0,0,s,o,a,t,0,h,l,c,e,0,s-h,o-l,a-c,0,0];this._loadMatrix(u,r)},n.prototype.night=function(t,e){t=t||.1;var i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},n.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperties(n.prototype,{matrix:{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}}})},{"../../core":97}],173:[function(t,e,i){function n(t,e){var i=new r.Matrix;t.renderable=!1,r.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","#define GLSLIFY 1\nvarying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"),this.maskSprite=t,this.maskMatrix=i,this.uniforms.mapSampler=t.texture,this.uniforms.filterMatrix=i.toArray(!0),this.uniforms.scale={x:1,y:1},null!==e&&void 0!==e||(e=20),this.scale=new r.Point(e,e)}var r=t("../../core");n.prototype=Object.create(r.Filter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.apply=function(t,e,i){var n=1/i.destinationFrame.width*(i.size.width/e.size.width);this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*n,this.uniforms.scale.y=this.scale.y*n,t.applyFilter(this,e,i)},Object.defineProperties(n.prototype,{map:{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}})},{"../../core":97}],174:[function(t,e,i){function n(){r.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'#define GLSLIFY 1\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n  \tvec2 fragCoord = vTextureCoord * filterArea.xy;\n\n  \tvec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n  \tgl_FragColor = color;\n}\n');
}var r=t("../../core");n.prototype=Object.create(r.Filter.prototype),n.prototype.constructor=n,e.exports=n},{"../../core":97}],175:[function(t,e,i){e.exports={FXAAFilter:t("./fxaa/FXAAFilter"),NoiseFilter:t("./noise/NoiseFilter"),DisplacementFilter:t("./displacement/DisplacementFilter"),BlurFilter:t("./blur/BlurFilter"),BlurXFilter:t("./blur/BlurXFilter"),BlurYFilter:t("./blur/BlurYFilter"),ColorMatrixFilter:t("./colormatrix/ColorMatrixFilter"),VoidFilter:t("./void/VoidFilter")}},{"./blur/BlurFilter":166,"./blur/BlurXFilter":167,"./blur/BlurYFilter":168,"./colormatrix/ColorMatrixFilter":172,"./displacement/DisplacementFilter":173,"./fxaa/FXAAFilter":174,"./noise/NoiseFilter":176,"./void/VoidFilter":177}],176:[function(t,e,i){function n(){r.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(gl_FragCoord.xy) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n"),this.noise=.5}var r=t("../../core");n.prototype=Object.create(r.Filter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{noise:{get:function(){return this.uniforms.noise},set:function(t){this.uniforms.noise=t}}})},{"../../core":97}],177:[function(t,e,i){function n(){r.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","#define GLSLIFY 1\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"),this.glShaderKey="void"}var r=t("../../core");n.prototype=Object.create(r.Filter.prototype),n.prototype.constructor=n,e.exports=n},{"../../core":97}],178:[function(t,e,i){function n(){this.global=new r.Point,this.target=null,this.originalEvent=null}var r=t("../core");n.prototype.constructor=n,e.exports=n,n.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}},{"../core":97}],179:[function(t,e,i){function n(t,e){o.call(this),e=e||{},this.renderer=t,this.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,this.interactionFrequency=e.interactionFrequency||10,this.mouse=new s,this.mouse.global.set(-999999),this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.defaultCursorStyle="inherit",this.currentCursorStyle="inherit",this._tempPoint=new r.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var r=t("../core"),s=t("./InteractionData"),o=t("eventemitter3");Object.assign(r.DisplayObject.prototype,t("./interactiveTarget")),n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setTargetElement=function(t,e){this.removeEvents(),this.interactionDOMElement=t,this.resolution=e||1,this.addEvents()},n.prototype.addEvents=function(){this.interactionDOMElement&&(r.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onMouseOver,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},n.prototype.removeEvents=function(){this.interactionDOMElement&&(r.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onMouseOver,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},n.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=this.defaultCursorStyle,this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},n.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.target=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},n.prototype.mapPositionToPoint=function(t,e,i){var n;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0},t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)/this.resolution,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)/this.resolution},n.prototype.processInteractive=function(t,e,i,n,r){if(!e||!e.visible)return!1;var s=!1,o=r=e.interactive||r;if(e.hitArea&&(o=!1),n&&e._mask&&(e._mask.containsPoint(t)||(n=!1)),n&&e.filterArea&&(e.filterArea.contains(t.x,t.y)||(n=!1)),e.interactiveChildren)for(var a=e.children,h=a.length-1;h>=0;h--){var l=a[h];if(this.processInteractive(t,l,i,n,o)){if(!l.parent)continue;s=!0,o=!1,n=!1}}return r&&(n&&!s&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),s=e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):e.containsPoint&&(s=e.containsPoint(t))),e.interactive&&i(e,s)),s},n.prototype.onMouseDown=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0);var e=2===t.button||3===t.which;this.emit(e?"rightdown":"mousedown",this.eventData)},n.prototype.processMouseDown=function(t,e){var i=this.mouse.originalEvent,n=2===i.button||3===i.which;e&&(t[n?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(t,n?"rightdown":"mousedown",this.eventData))},n.prototype.onMouseUp=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0);var e=2===t.button||3===t.which;this.emit(e?"rightup":"mouseup",this.eventData)},n.prototype.processMouseUp=function(t,e){var i=this.mouse.originalEvent,n=2===i.button||3===i.which,r=n?"_isRightDown":"_isLeftDown";e?(this.dispatchEvent(t,n?"rightup":"mouseup",this.eventData),t[r]&&(t[r]=!1,this.dispatchEvent(t,n?"rightclick":"click",this.eventData))):t[r]&&(t[r]=!1,this.dispatchEvent(t,n?"rightupoutside":"mouseupoutside",this.eventData))},n.prototype.onMouseMove=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.didMove=!0,this.cursor=this.defaultCursorStyle,this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.emit("mousemove",this.eventData),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},n.prototype.processMouseMove=function(t,e){this.processMouseOverOut(t,e),this.moveWhenInside&&!e||this.dispatchEvent(t,"mousemove",this.eventData)},n.prototype.onMouseOut=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.interactionDOMElement.style.cursor=this.defaultCursorStyle,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1),this.emit("mouseout",this.eventData)},n.prototype.processMouseOverOut=function(t,e){e?(t._over||(t._over=!0,this.dispatchEvent(t,"mouseover",this.eventData)),t.buttonMode&&(this.cursor=t.defaultCursor)):t._over&&(t._over=!1,this.dispatchEvent(t,"mouseout",this.eventData))},n.prototype.onMouseOver=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.emit("mouseover",this.eventData)},n.prototype.onTouchStart=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,n=0;n<i;n++){var r=e[n],s=this.getTouchData(r);s.originalEvent=t,this.eventData.data=s,this.eventData.stopped=!1,this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.emit("touchstart",this.eventData),this.returnTouchData(s)}},n.prototype.processTouchStart=function(t,e){e&&(t._touchDown=!0,this.dispatchEvent(t,"touchstart",this.eventData))},n.prototype.onTouchEnd=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,n=0;n<i;n++){var r=e[n],s=this.getTouchData(r);s.originalEvent=t,this.eventData.data=s,this.eventData.stopped=!1,this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.emit("touchend",this.eventData),this.returnTouchData(s)}},n.prototype.processTouchEnd=function(t,e){e?(this.dispatchEvent(t,"touchend",this.eventData),t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"tap",this.eventData))):t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"touchendoutside",this.eventData))},n.prototype.onTouchMove=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,n=0;n<i;n++){var r=e[n],s=this.getTouchData(r);s.originalEvent=t,this.eventData.data=s,this.eventData.stopped=!1,this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside),this.emit("touchmove",this.eventData),this.returnTouchData(s)}},n.prototype.processTouchMove=function(t,e){this.moveWhenInside&&!e||this.dispatchEvent(t,"touchmove",this.eventData)},n.prototype.getTouchData=function(t){var e=this.interactiveDataPool.pop();return e||(e=new s),e.identifier=t.identifier,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&(e.global.x=e.global.x/this.resolution,e.global.y=e.global.y/this.resolution),t.globalX=e.global.x,t.globalY=e.global.y,e},n.prototype.returnTouchData=function(t){this.interactiveDataPool.push(t)},n.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onMouseOver=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},r.WebGLRenderer.registerPlugin("interaction",n),r.CanvasRenderer.registerPlugin("interaction",n)},{"../core":97,"./InteractionData":178,"./interactiveTarget":181,eventemitter3:32}],180:[function(t,e,i){e.exports={InteractionData:t("./InteractionData"),InteractionManager:t("./InteractionManager"),interactiveTarget:t("./interactiveTarget")}},{"./InteractionData":178,"./InteractionManager":179,"./interactiveTarget":181}],181:[function(t,e,i){var n={interactive:!1,interactiveChildren:!0,hitArea:null,buttonMode:!1,defaultCursor:"pointer",_over:!1,_isLeftDown:!1,_isRightDown:!1,_touchDown:!1};e.exports=n},{}],182:[function(t,e,i){function n(t,e){var i={},n=t.data.getElementsByTagName("info")[0],r=t.data.getElementsByTagName("common")[0];i.font=n.getAttribute("face"),i.size=parseInt(n.getAttribute("size"),10),i.lineHeight=parseInt(r.getAttribute("lineHeight"),10),i.chars={};for(var a=t.data.getElementsByTagName("char"),h=0;h<a.length;h++){var l=parseInt(a[h].getAttribute("id"),10),c=new s.Rectangle(parseInt(a[h].getAttribute("x"),10)+e.frame.x,parseInt(a[h].getAttribute("y"),10)+e.frame.y,parseInt(a[h].getAttribute("width"),10),parseInt(a[h].getAttribute("height"),10));i.chars[l]={xOffset:parseInt(a[h].getAttribute("xoffset"),10),yOffset:parseInt(a[h].getAttribute("yoffset"),10),xAdvance:parseInt(a[h].getAttribute("xadvance"),10),kerning:{},texture:new s.Texture(e.baseTexture,c)}}var u=t.data.getElementsByTagName("kerning");for(h=0;h<u.length;h++){var p=parseInt(u[h].getAttribute("first"),10),d=parseInt(u[h].getAttribute("second"),10),f=parseInt(u[h].getAttribute("amount"),10);i.chars[d]&&(i.chars[d].kerning[p]=f)}t.bitmapFont=i,o.BitmapText.fonts[i.font]=i}var r=t("resource-loader").Resource,s=t("../core"),o=t("../extras"),a=t("path");e.exports=function(){return function(t,e){if(!t.data||!t.isXml)return e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return e();var i=t.isDataUrl?"":a.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/"),i=i.replace(this.baseUrl,""))),i&&"/"!==i.charAt(i.length-1)&&(i+="/");var o=i+t.data.getElementsByTagName("page")[0].getAttribute("file");if(s.utils.TextureCache[o])n(t,s.utils.TextureCache[o]),e();else{var h={crossOrigin:t.crossOrigin,loadType:r.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata};this.add(t.name+"_image",o,h,function(i){n(t,i.texture),e()})}}}},{"../core":97,"../extras":164,path:60,"resource-loader":69}],183:[function(t,e,i){e.exports={Loader:t("./loader"),bitmapFontParser:t("./bitmapFontParser"),spritesheetParser:t("./spritesheetParser"),textureParser:t("./textureParser"),Resource:t("resource-loader").Resource}},{"./bitmapFontParser":182,"./loader":184,"./spritesheetParser":185,"./textureParser":186,"resource-loader":69}],184:[function(t,e,i){function n(t,e){r.call(this,t,e);for(var i=0;i<n._pixiMiddleware.length;++i)this.use(n._pixiMiddleware[i]())}var r=t("resource-loader"),s=t("./textureParser"),o=t("./spritesheetParser"),a=t("./bitmapFontParser");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n._pixiMiddleware=[r.middleware.parsing.blob,s,o,a],n.addPixiMiddleware=function(t){n._pixiMiddleware.push(t)};var h=r.Resource;h.setExtensionXhrType("fnt",h.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":182,"./spritesheetParser":185,"./textureParser":186,"resource-loader":69}],185:[function(t,e,i){var n=t("resource-loader").Resource,r=t("path"),s=t("../core"),o=1e3;e.exports=function(){return function(t,e){var i,a=t.name+"_image";if(!t.data||!t.isJson||!t.data.frames||this.resources[a])return e();var h={crossOrigin:t.crossOrigin,loadType:n.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata};i=t.isDataUrl?t.data.meta.image:r.dirname(t.url.replace(this.baseUrl,""))+"/"+t.data.meta.image,this.add(a,i,h,function(i){function n(e,n){for(var r=e;r-e<n&&r<c.length;){var o=c[r],a=l[o].frame;if(a){var h=null,p=null,d=new s.Rectangle(0,0,l[o].sourceSize.w/u,l[o].sourceSize.h/u);h=l[o].rotated?new s.Rectangle(a.x/u,a.y/u,a.h/u,a.w/u):new s.Rectangle(a.x/u,a.y/u,a.w/u,a.h/u),l[o].trimmed&&(p=new s.Rectangle(l[o].spriteSourceSize.x/u,l[o].spriteSourceSize.y/u,l[o].spriteSourceSize.w/u,l[o].spriteSourceSize.h/u)),t.textures[o]=new s.Texture(i.texture.baseTexture,h,d,p,l[o].rotated?2:0),s.utils.TextureCache[o]=t.textures[o]}r++}}function r(){return p*o<c.length}function a(t){n(p*o,o),p++,setTimeout(t,0)}function h(){a(function(){r()?h():e()})}t.textures={};var l=t.data.frames,c=Object.keys(l),u=s.utils.getResolutionOfUrl(t.url),p=0;c.length<=o?(n(0,o),e()):h()})}}},{"../core":97,path:60,"resource-loader":69}],186:[function(t,e,i){var n=t("../core");e.exports=function(){return function(t,e){if(t.data&&t.isImage){var i=new n.BaseTexture(t.data,null,n.utils.getResolutionOfUrl(t.url));i.imageUrl=t.url,t.texture=new n.Texture(i),n.utils.BaseTextureCache[t.url]=i,n.utils.TextureCache[t.url]=t.texture}e()}}},{"../core":97}],187:[function(t,e,i){function n(t,e,i,s,o){r.Container.call(this),this._texture=null,this.uvs=i||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=s||new Uint16Array([0,1,3,2]),this.dirty=0,this.indexDirty=0,this.blendMode=r.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=o||n.DRAW_MODES.TRIANGLE_MESH,this.texture=t,this.shader=null,this.tintRgb=new Float32Array([1,1,1]),this._glDatas=[]}var r=t("../core"),s=t("pixi-gl-core"),o=t("./webgl/MeshShader"),a=new r.Point,h=new r.Polygon;n.prototype=Object.create(r.Container.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},tint:{get:function(){return r.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=r.utils.hex2rgb(t,this.tintRgb)}}}),n.prototype._renderWebGL=function(t){t.flush();var e=t.gl,i=this._glDatas[t.CONTEXT_UID];i||(i={shader:new o(e),vertexBuffer:s.GLBuffer.createVertexBuffer(e,this.vertices,e.STREAM_DRAW),uvBuffer:s.GLBuffer.createVertexBuffer(e,this.uvs,e.STREAM_DRAW),indexBuffer:s.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),vao:new s.VertexArrayObject(e),dirty:this.dirty,indexDirty:this.indexDirty},i.vao=new s.VertexArrayObject(e).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer,i.shader.attributes.aVertexPosition,e.FLOAT,!1,8,0).addAttribute(i.uvBuffer,i.shader.attributes.aTextureCoord,e.FLOAT,!1,8,0),this._glDatas[t.CONTEXT_UID]=i),this.dirty!==i.dirty&&(i.dirty=this.dirty,i.uvBuffer.upload()),this.indexDirty!==i.indexDirty&&(i.indexDirty=this.indexDirty,i.indexBuffer.upload()),i.vertexBuffer.upload(),t.bindShader(i.shader),t.bindTexture(this._texture,0),t.state.setBlendMode(this.blendMode),i.shader.uniforms.translationMatrix=this.worldTransform.toArray(!0),i.shader.uniforms.alpha=this.worldAlpha,i.shader.uniforms.tint=this.tintRgb;var r=this.drawMode===n.DRAW_MODES.TRIANGLE_MESH?e.TRIANGLE_STRIP:e.TRIANGLES;i.vao.bind().draw(r,this.indices.length).unbind()},n.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform,r=t.resolution;t.roundPixels?e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r|0,i.ty*r|0):e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r),this.drawMode===n.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(e):this._renderCanvasTriangles(e)},n.prototype._renderCanvasTriangleMesh=function(t){for(var e=this.vertices,i=this.uvs,n=e.length/2,r=0;r<n-2;r++){var s=2*r;this._renderCanvasDrawTriangle(t,e,i,s,s+2,s+4)}},n.prototype._renderCanvasTriangles=function(t){for(var e=this.vertices,i=this.uvs,n=this.indices,r=n.length,s=0;s<r;s+=3){var o=2*n[s],a=2*n[s+1],h=2*n[s+2];this._renderCanvasDrawTriangle(t,e,i,o,a,h)}},n.prototype._renderCanvasDrawTriangle=function(t,e,i,n,r,s){var o=this._texture.baseTexture,a=o.source,h=o.width,l=o.height,c=e[n],u=e[r],p=e[s],d=e[n+1],f=e[r+1],m=e[s+1],g=i[n]*o.width,v=i[r]*o.width,y=i[s]*o.width,_=i[n+1]*o.height,x=i[r+1]*o.height,b=i[s+1]*o.height;if(this.canvasPadding>0){var w=this.canvasPadding/this.worldTransform.a,T=this.canvasPadding/this.worldTransform.d,S=(c+u+p)/3,E=(d+f+m)/3,C=c-S,M=d-E,P=Math.sqrt(C*C+M*M);c=S+C/P*(P+w),d=E+M/P*(P+T),C=u-S,M=f-E,P=Math.sqrt(C*C+M*M),u=S+C/P*(P+w),f=E+M/P*(P+T),C=p-S,M=m-E,P=Math.sqrt(C*C+M*M),p=S+C/P*(P+w),m=E+M/P*(P+T)}t.save(),t.beginPath(),t.moveTo(c,d),t.lineTo(u,f),t.lineTo(p,m),t.closePath(),t.clip();var A=g*x+_*y+v*b-x*y-_*v-g*b,I=c*x+_*p+u*b-x*p-_*u-c*b,O=g*u+c*y+v*p-u*y-c*v-g*p,R=g*x*p+_*u*y+c*v*b-c*x*y-_*v*p-g*u*b,k=d*x+_*m+f*b-x*m-_*f-d*b,D=g*f+d*y+v*m-f*y-d*v-g*m,L=g*x*m+_*f*y+d*v*b-d*x*y-_*v*m-g*f*b;t.transform(I/A,k/A,O/A,D/A,R/A,L/A),t.drawImage(a,0,0,h*o.resolution,l*o.resolution,0,0,h,l),t.restore()},n.prototype.renderMeshFlat=function(t){var e=this.context,i=t.vertices,n=i.length/2;e.beginPath();for(var r=1;r<n-2;r++){var s=2*r,o=i[s],a=i[s+2],h=i[s+4],l=i[s+1],c=i[s+3],u=i[s+5];e.moveTo(o,l),e.lineTo(a,c),e.lineTo(h,u)}e.fillStyle="#FF0000",e.fill(),e.closePath()},n.prototype._onTextureUpdate=function(){},n.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},n.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,a);for(var e=this.vertices,i=h.points,r=this.indices,s=this.indices.length,o=this.drawMode===n.DRAW_MODES.TRIANGLES?3:1,l=0;l+2<s;l+=o){var c=2*r[l],u=2*r[l+1],p=2*r[l+2];if(i[0]=e[c],i[1]=e[c+1],i[2]=e[u],i[3]=e[u+1],i[4]=e[p],i[5]=e[p+1],h.contains(a.x,a.y))return!0}return!1},n.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":97,"./webgl/MeshShader":192,"pixi-gl-core":7}],188:[function(t,e,i){function n(t,e,i,n,o){s.call(this,t,4,4);var a=this.uvs;a[6]=a[14]=a[22]=a[30]=1,a[25]=a[27]=a[29]=a[31]=1,this._origWidth=t.width,this._origHeight=t.height,this._uvw=1/this._origWidth,this._uvh=1/this._origHeight,this.width=t.width,this.height=t.height,a[2]=a[10]=a[18]=a[26]=this._uvw*e,a[4]=a[12]=a[20]=a[28]=1-this._uvw*n,a[9]=a[11]=a[13]=a[15]=this._uvh*i,a[17]=a[19]=a[21]=a[23]=1-this._uvh*o,this.leftWidth="undefined"!=typeof e?e:r,this.rightWidth="undefined"!=typeof n?n:r,this.topHeight="undefined"!=typeof i?i:r,this.bottomHeight="undefined"!=typeof o?o:r}var r=10,s=t("./Plane");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t,this.updateVerticalVertices()}},height:{get:function(){return this._height},set:function(t){this._height=t,this.updateHorizontalVertices()}},leftWidth:{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t;var e=this.uvs,i=this.vertices;e[2]=e[10]=e[18]=e[26]=this._uvw*t,i[2]=i[10]=i[18]=i[26]=t,this.dirty=!0}},rightWidth:{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t;var e=this.uvs,i=this.vertices;e[4]=e[12]=e[20]=e[28]=1-this._uvw*t,i[4]=i[12]=i[20]=i[28]=this._width-t,this.dirty=!0}},topHeight:{get:function(){return this._topHeight},set:function(t){this._topHeight=t;var e=this.uvs,i=this.vertices;e[9]=e[11]=e[13]=e[15]=this._uvh*t,i[9]=i[11]=i[13]=i[15]=t,this.dirty=!0}},bottomHeight:{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t;var e=this.uvs,i=this.vertices;e[17]=e[19]=e[21]=e[23]=1-this._uvh*t,i[17]=i[19]=i[21]=i[23]=this._height-t,this.dirty=!0}}}),n.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},n.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},n.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha;var i=this.worldTransform,n=t.resolution;t.roundPixels?e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0):e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n);var r=this._texture.baseTexture,s=r.source,o=r.width,a=r.height;this.drawSegment(e,s,o,a,0,1,10,11),this.drawSegment(e,s,o,a,2,3,12,13),this.drawSegment(e,s,o,a,4,5,14,15),this.drawSegment(e,s,o,a,8,9,18,19),this.drawSegment(e,s,o,a,10,11,20,21),this.drawSegment(e,s,o,a,12,13,22,23),this.drawSegment(e,s,o,a,16,17,26,27),this.drawSegment(e,s,o,a,18,19,28,29),this.drawSegment(e,s,o,a,20,21,30,31)},n.prototype.drawSegment=function(t,e,i,n,r,s,o,a){var h=this.uvs,l=this.vertices,c=(h[o]-h[r])*i,u=(h[a]-h[s])*n,p=l[o]-l[r],d=l[a]-l[s];c<1&&(c=1),u<1&&(u=1),p<1&&(p=1),d<1&&(d=1),t.drawImage(e,h[r]*i,h[s]*n,c,u,l[r],l[s],p,d)}},{"./Plane":189}],189:[function(t,e,i){function n(t,e,i){r.call(this,t),this._ready=!0,this.verticesX=e||10,this.verticesY=i||10,this.drawMode=r.DRAW_MODES.TRIANGLES,this.refresh()}var r=t("./Mesh");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.refresh=function(){var t=this.verticesX*this.verticesY,e=[],i=[],n=[],r=[],s=this.texture,o=this.verticesX-1,a=this.verticesY-1,h=0,l=s.width/o,c=s.height/a;for(h=0;h<t;h++){var u=h%this.verticesX,p=h/this.verticesX|0;e.push(u*l,p*c),n.push(s._uvs.x0+(s._uvs.x1-s._uvs.x0)*(u/(this.verticesX-1)),s._uvs.y0+(s._uvs.y3-s._uvs.y0)*(p/(this.verticesY-1)))}var d=o*a;for(h=0;h<d;h++){var f=h%o,m=h/o|0,g=m*this.verticesX+f,v=m*this.verticesX+f+1,y=(m+1)*this.verticesX+f,_=(m+1)*this.verticesX+f+1;r.push(g,v,y),r.push(v,_,y)}this.vertices=new Float32Array(e),this.uvs=new Float32Array(n),this.colors=new Float32Array(i),this.indices=new Uint16Array(r),this.indexDirty=!0},n.prototype._onTextureUpdate=function(){r.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},{"./Mesh":187}],190:[function(t,e,i){function n(t,e){r.call(this,t),this.points=e,this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length),this._ready=!0,this.refresh()}var r=t("./Mesh"),s=t("../core");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){var e=this.uvs,i=this.indices,n=this.colors,r=this._texture._uvs,o=new s.Point(r.x0,r.y0),a=new s.Point(r.x2-r.x0,r.y2-r.y0);e[0]=0+o.x,e[1]=0+o.y,e[2]=0+o.x,e[3]=1*a.y+o.y,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var h,l,c,u=t.length,p=1;p<u;p++)h=t[p],l=4*p,c=p/(u-1),e[l]=c*a.x+o.x,e[l+1]=0+o.y,e[l+2]=c*a.x+o.x,e[l+3]=1*a.y+o.y,l=2*p,n[l]=1,n[l+1]=1,l=2*p,i[l]=l,i[l+1]=l+1;this.dirty=!0,this.indexDirty=!0}},n.prototype._onTextureUpdate=function(){r.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},n.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e,i,n,r,s,o,a=t[0],h=0,l=0,c=this.vertices,u=t.length,p=0;p<u;p++)i=t[p],n=4*p,e=p<t.length-1?t[p+1]:i,l=-(e.x-a.x),h=e.y-a.y,r=10*(1-p/(u-1)),r>1&&(r=1),s=Math.sqrt(h*h+l*l),o=this._texture.height/2,h/=s,l/=s,h*=o,l*=o,c[n]=i.x+h,c[n+1]=i.y+l,c[n+2]=i.x-h,c[n+3]=i.y-l,a=i;this.containerUpdateTransform()}}},{"../core":97,"./Mesh":187}],191:[function(t,e,i){e.exports={Mesh:t("./Mesh"),Plane:t("./Plane"),NineSlicePlane:t("./NineSlicePlane"),Rope:t("./Rope"),MeshShader:t("./webgl/MeshShader")}},{"./Mesh":187,"./NineSlicePlane":188,"./Plane":189,"./Rope":190,"./webgl/MeshShader":192}],192:[function(t,e,i){function n(t){r.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["varying vec2 vTextureCoord;","uniform float alpha;","uniform vec3 tint;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);","}"].join("\n"))}var r=t("../../core/Shader");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n},{"../../core/Shader":77}],193:[function(t,e,i){function n(t,e,i){r.Container.call(this),i=i||15e3,t=t||15e3;var n=16384;i>n&&(i=n),i>t&&(i=t),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=i,this._glBuffers=[],this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=r.BLEND_MODES.NORMAL,this.roundPixels=!0,this.baseTexture=null,this.setProperties(e)}var r=t("../core");n.prototype=Object.create(r.Container.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},n.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},n.prototype.renderWebGL=function(t){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){this.onChildrenChange(0)},this)),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},n.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},n.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,n=!0,r=0,s=0,o=0,a=0,h=t.blendModes[this.blendMode];h!==e.globalCompositeOperation&&(e.globalCompositeOperation=h),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var c=this.children[l];if(c.visible){var u=c.texture.frame;if(e.globalAlpha=this.worldAlpha*c.alpha,c.rotation%(2*Math.PI)===0)n&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution),n=!1),r=c.anchor.x*(-u.width*c.scale.x)+c.position.x+.5,s=c.anchor.y*(-u.height*c.scale.y)+c.position.y+.5,o=u.width*c.scale.x,a=u.height*c.scale.y;else{n||(n=!0),c.displayObjectUpdateTransform();var p=c.worldTransform;t.roundPixels?e.setTransform(p.a,p.b,p.c,p.d,p.tx*t.resolution|0,p.ty*t.resolution|0):e.setTransform(p.a,p.b,p.c,p.d,p.tx*t.resolution,p.ty*t.resolution),r=c.anchor.x*-u.width+.5,s=c.anchor.y*-u.height+.5,o=u.width,a=u.height;
}var d=c.texture.baseTexture.resolution;e.drawImage(c.texture.baseTexture.source,u.x*d,u.y*d,u.width*d,u.height*d,r*d,s*d,o*d,a*d)}}}},n.prototype.destroy=function(){if(r.Container.prototype.destroy.apply(this,arguments),this._buffers)for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._properties=null,this._buffers=null}},{"../core":97}],194:[function(t,e,i){e.exports={ParticleContainer:t("./ParticleContainer"),ParticleRenderer:t("./webgl/ParticleRenderer")}},{"./ParticleContainer":193,"./webgl/ParticleRenderer":196}],195:[function(t,e,i){function n(t,e,i,n){this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<e.length;r++){var s=e[r];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,offset:s.offset},i[r]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}var r=t("pixi-gl-core"),s=t("../../core/utils/createIndicesForQuads");n.prototype.constructor=n,e.exports=n,n.prototype.initBuffers=function(){var t,e,i=this.gl,n=0;for(this.indices=s(this.size),this.indexBuffer=r.GLBuffer.createIndexBuffer(i,this.indices,i.STATIC_DRAW),this.dynamicStride=0,t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],e.offset=n,n+=e.size,this.dynamicStride+=e.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=r.GLBuffer.createVertexBuffer(i,this.dynamicData,i.STREAM_DRAW);var o=0;for(this.staticStride=0,t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],e.offset=o,o+=e.size,this.staticStride+=e.size;for(this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=r.GLBuffer.createVertexBuffer(i,this.staticData,i.STATIC_DRAW),this.vao=new r.VertexArrayObject(i).addIndex(this.indexBuffer),t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],this.vao.addAttribute(this.dynamicBuffer,e.attribute,i.FLOAT,!1,4*this.dynamicStride,4*e.offset);for(t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],this.vao.addAttribute(this.staticBuffer,e.attribute,i.FLOAT,!1,4*this.staticStride,4*e.offset)},n.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer.upload()},n.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,this.staticData,this.staticStride,r.offset)}this.staticBuffer.upload()},n.prototype.bind=function(){this.vao.bind()},n.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()}},{"../../core/utils/createIndicesForQuads":149,"pixi-gl-core":7}],196:[function(t,e,i){function n(t){r.ObjectRenderer.call(this,t),this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new r.Matrix,this.CONTEXT_UID=0}var r=t("../../core"),s=t("./ParticleShader"),o=t("./ParticleBuffer");n.prototype=Object.create(r.ObjectRenderer.prototype),n.prototype.constructor=n,e.exports=n,r.WebGLRenderer.registerPlugin("particle",n),n.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new s(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},n.prototype.start=function(){this.renderer.bindShader(this.shader)},n.prototype.render=function(t){var e=t.children,i=e.length,n=t._maxSize,r=t._batchSize;if(0!==i){i>n&&(i=n);var s=t._glBuffers[this.renderer.CONTEXT_UID];s||(s=t._glBuffers[this.renderer.CONTEXT_UID]=this.generateBuffers(t)),this.renderer.setBlendMode(t.blendMode);var o=this.renderer.gl,a=t.worldTransform.copy(this.tempMatrix);a.prepend(this.renderer._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=a.toArray(!0),this.shader.uniforms.uAlpha=t.worldAlpha;var h=e[0]._texture.baseTexture;this.renderer.bindTexture(h);for(var l=0,c=0;l<i;l+=r,c+=1){var u=i-l;u>r&&(u=r);var p=s[c];p.uploadDynamic(e,l,u),t._bufferToUpdate===c&&(p.uploadStatic(e,l,u),t._bufferToUpdate=c+1),p.vao.bind().draw(o.TRIANGLES,6*u).unbind()}}},n.prototype.generateBuffers=function(t){var e,i=this.renderer.gl,n=[],r=t._maxSize,s=t._batchSize,a=t._properties;for(e=0;e<r;e+=s)n.push(new o(i,this.properties,a,s));return n},n.prototype.uploadVertices=function(t,e,i,n,r,s){for(var o,a,h,l,c,u,p,d,f,m,g=0;g<i;g++)o=t[e+g],a=o._texture,c=o.scale.x,u=o.scale.y,h=a.trim,l=a.orig,h?(d=h.x-o.anchor.x*l.width,p=d+h.width,m=h.y-o.anchor.y*l.height,f=m+h.height):(p=l.width*(1-o.anchor.x),d=l.width*-o.anchor.x,f=l.height*(1-o.anchor.y),m=l.height*-o.anchor.y),n[s]=d*c,n[s+1]=m*u,n[s+r]=p*c,n[s+r+1]=m*u,n[s+2*r]=p*c,n[s+2*r+1]=f*u,n[s+3*r]=d*c,n[s+3*r+1]=f*u,s+=4*r},n.prototype.uploadPosition=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o].position;n[s]=a.x,n[s+1]=a.y,n[s+r]=a.x,n[s+r+1]=a.y,n[s+2*r]=a.x,n[s+2*r+1]=a.y,n[s+3*r]=a.x,n[s+3*r+1]=a.y,s+=4*r}},n.prototype.uploadRotation=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o].rotation;n[s]=a,n[s+r]=a,n[s+2*r]=a,n[s+3*r]=a,s+=4*r}},n.prototype.uploadUvs=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o]._texture._uvs;a?(n[s]=a.x0,n[s+1]=a.y0,n[s+r]=a.x1,n[s+r+1]=a.y1,n[s+2*r]=a.x2,n[s+2*r+1]=a.y2,n[s+3*r]=a.x3,n[s+3*r+1]=a.y3,s+=4*r):(n[s]=0,n[s+1]=0,n[s+r]=0,n[s+r+1]=0,n[s+2*r]=0,n[s+2*r+1]=0,n[s+3*r]=0,n[s+3*r+1]=0,s+=4*r)}},n.prototype.uploadAlpha=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o].alpha;n[s]=a,n[s+r]=a,n[s+2*r]=a,n[s+3*r]=a,s+=4*r}},n.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),r.ObjectRenderer.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../core":97,"./ParticleBuffer":195,"./ParticleShader":197}],197:[function(t,e,i){function n(t){r.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"))}var r=t("../../core/Shader");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n},{"../../core/Shader":77}],198:[function(t,e,i){Math.sign||(Math.sign=function(t){return t=+t,0===t||isNaN(t)?t:t>0?1:-1})},{}],199:[function(t,e,i){Object.assign||(Object.assign=t("object-assign"))},{"object-assign":59}],200:[function(t,e,i){t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":198,"./Object.assign":199,"./requestAnimationFrame":201}],201:[function(t,e,n){(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r)t.requestAnimationFrame=t[n[r]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[r]+"CancelAnimationFrame"]||t[n[r]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+i-e;return n<0&&(n=0),i=e,setTimeout(function(){i=Date.now(),t(performance.now())},n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}).call(this,"undefined"!=typeof i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],202:[function(t,e,i){function n(){}var r=t("../../core");n.prototype.constructor=n,e.exports=n,n.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),e()},n.prototype.register=function(){return this},n.prototype.add=function(){return this},n.prototype.destroy=function(){},r.CanvasRenderer.registerPlugin("prepare",n)},{"../../core":97}],203:[function(t,e,i){e.exports={webGL:t("./webgl/WebGLPrepare"),canvas:t("./canvas/CanvasPrepare")}},{"./canvas/CanvasPrepare":202,"./webgl/WebGLPrepare":204}],204:[function(t,e,i){function n(t){this.renderer=t,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.register(o,r).register(a,s)}function r(t,e){return e instanceof h.BaseTexture&&(t.textureManager.updateTexture(e),!0)}function s(t,e){return e instanceof h.Graphics&&(t.plugins.graphics.updateGraphics(e),!0)}function o(t,e){if(t instanceof h.BaseTexture)return e.indexOf(t)===-1&&e.push(t),!0;if(t._texture&&t._texture instanceof h.Texture){var i=t._texture.baseTexture;return e.indexOf(i)===-1&&e.push(i),!0}return!1}function a(t,e){return t instanceof h.Graphics&&(e.push(t),!0)}var h=t("../../core"),l=h.ticker.shared;n.UPLOADS_PER_FRAME=4,n.prototype.constructor=n,e.exports=n,n.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(this.numLeft=n.UPLOADS_PER_FRAME,this.completes.push(e),this.ticking||(this.ticking=!0,l.add(this.tick,this))):e()},n.prototype.tick=function(){for(var t,e;this.queue.length&&this.numLeft>0;){var i=this.queue[0],r=!1;for(t=0,e=this.uploadHooks.length;t<e;t++)if(this.uploadHooks[t](this.renderer,i)){this.numLeft--,this.queue.shift(),r=!0;break}r||this.queue.shift()}if(this.queue.length)this.numLeft=n.UPLOADS_PER_FRAME;else{this.ticking=!1,l.remove(this.tick,this);var s=this.completes.slice(0);for(this.completes.length=0,t=0,e=s.length;t<e;t++)s[t]()}},n.prototype.register=function(t,e){return t&&this.addHooks.push(t),e&&this.uploadHooks.push(e),this},n.prototype.add=function(t){var e,i;for(e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof h.Container)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},n.prototype.destroy=function(){this.ticking&&l.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null},h.WebGLRenderer.registerPlugin("prepare",n)},{"../../core":97}],205:[function(t,e,n){(function(i){t("./polyfill");var n=e.exports=t("./core");n.extras=t("./extras"),n.filters=t("./filters"),n.interaction=t("./interaction"),n.loaders=t("./loaders"),n.mesh=t("./mesh"),n.particles=t("./particles"),n.accessibility=t("./accessibility"),n.extract=t("./extract"),n.prepare=t("./prepare"),n.loader=new n.loaders.Loader,Object.assign(n,t("./deprecation")),i.PIXI=n}).call(this,"undefined"!=typeof i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":76,"./core":97,"./deprecation":154,"./extract":156,"./extras":164,"./filters":175,"./interaction":180,"./loaders":183,"./mesh":191,"./particles":194,"./polyfill":200,"./prepare":203}]},{},[205])(205)})}).call(e,i(7).setImmediate,function(){return this}())},function(t,e,i){(function(t,n){function r(t,e){this._id=t,this._clearFn=e}var s=i(8).nextTick,o=Function.prototype.apply,a=Array.prototype.slice,h={},l=0;e.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var i=l++,n=!(arguments.length<2)&&a.call(arguments,1);return h[i]=!0,s(function(){h[i]&&(n?t.apply(null,n):t.call(null),e.clearImmediate(i))}),i},e.clearImmediate="function"==typeof n?n:function(t){delete h[t]}}).call(e,i(7).setImmediate,i(7).clearImmediate)},function(t,e){function i(){u&&l&&(u=!1,l.length?c=l.concat(c):p=-1,c.length&&n())}function n(){if(!u){var t=o(i);u=!0;for(var e=c.length;e;){for(l=c,c=[];++p<e;)l&&l[p].run();p=-1,e=c.length}l=null,u=!1,a(t)}}function r(t,e){this.fun=t,this.array=e}function s(){}var o,a,h=t.exports={};!function(){try{o=setTimeout}catch(t){o=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(t){a=function(){throw new Error("clearTimeout is not defined")}}}();var l,c=[],u=!1,p=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new r(t,e)),1!==c.length||u||o(n,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=s,h.addListener=s,h.once=s,h.off=s,h.removeListener=s,h.removeAllListeners=s,h.emit=s,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,i){var n;n=function(t,e,n){var r=i(10),s=function(){this.onUpdate=new r,this.updateBind=this.update.bind(this),this.active=!1,this.deltaTime=1,this.timeElapsed=0,this.lastTime=0,this.speed=1};s.prototype.start=function(){this.active||(this.active=!0,requestAnimationFrame(this.updateBind))},s.prototype.stop=function(){this.active&&(this.active=!1)},s.prototype.update=function(){if(this.active){requestAnimationFrame(this.updateBind);var t=(new Date).getTime(),e=t-this.lastTime;e>100&&(e=100),this.deltaTime=.06*e,this.deltaTime*=this.speed,this.onUpdate.dispatch(this.deltaTime),this.lastTime=t}},s.prototype.add=function(t,e){this.onUpdate.add(t,e)},s.prototype.remove=function(t,e){this.onUpdate.remove(t,e)},s.instance=new s,s.game=new s,n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;!function(r){function s(t,e,i,n,r){this._listener=e,this._isOnce=i,this.context=n,this._signal=t,this._priority=r||0}function o(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function a(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){a.prototype.dispatch.apply(t,arguments)}}s.prototype={active:!0,params:null,execute:function(t){var e,i;return this.active&&this._listener&&(i=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,i),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},a.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,e,i,n){var r,o=this._indexOfListener(t,i);if(o!==-1){if(r=this._bindings[o],r.isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else r=new s(this,t,e,i,n),this._addBinding(r);return this.memorize&&this._prevParams&&r.execute(this._prevParams),r},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var i,n=this._bindings.length;n--;)if(i=this._bindings[n],i._listener===t&&i.context===e)return n;return-1},has:function(t,e){return this._indexOfListener(t,e)!==-1},add:function(t,e,i){return o(t,"add"),this._registerListener(t,!1,e,i)},addOnce:function(t,e,i){return o(t,"addOnce"),this._registerListener(t,!0,e,i)},remove:function(t,e){o(t,"remove");var i=this._indexOfListener(t,e);return i!==-1&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,i=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=i),n){e=this._bindings.slice(),this._shouldPropagate=!0;do n--;while(e[n]&&this._shouldPropagate&&e[n].execute(i)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var h=a;h.Signal=a,n=function(){return h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))}(this)},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(9)),s=i(5),o=function(){s.call(this)};o.prototype=Object.create(s.prototype),o.prototype.update=function(){if(r.game.active){for(var t=0;t<this.tweens.length;t++){var e=this.tweens[t];if(e.isArray)this.updateArray(e);else if(e.isDelayed){if(e.delay>0)e.delay-=1*r.game.deltaTime;else if(e.delay<=0){e.isDelayed=!1;for(var i=0;i<e.props.length;i++){var n=e.props[i];n.value=e.obj[n["var"]]}}}else{for(var i=0;i<e.props.length;i++){var n=e.props[i];e.obj[n["var"]]=e.ease(e.currentIteration,n.value,n.toValue-n.value,e.duration)}e.vars.onUpdate&&e.vars.onUpdate.apply(this,e.vars.onUpdateParams),e.currentIteration+=1*r.game.deltaTime,e.currentIteration>e.duration&&(e.vars.onComplete&&e.vars.onComplete.apply(this,e.vars.onCompleteParams),e["delete"]=!0)}}for(var t=0;t<this.tweens.length;t++){var e=this.tweens[t];e["delete"]&&(e=null,this.tweens.splice(t,1),t--)}0===this.tweens.length&&(r.instance.remove(this.update,this),this.updating=!1)}},o.instance=new o,n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e){(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";window._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,n,r=window.GreenSockGlobals||window,s=r.com.greensock,o=2*Math.PI,a=Math.PI/2,h=s._class,l=function(e,i){var n=h("easing."+e,function(){},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,n},c=t.register||function(){},u=function(t,e,i,n){var r=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new n},!0);return c(r,t),r},p=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},d=function(e,i){var n=h("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,r.config=function(t){return new n(t)},n},f=u("Back",d("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),d("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),d("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=h("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),g=m.prototype=new t;return g.constructor=m,g.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),g.config=m.config=function(t,e,i){return new m(t,e,i)},e=h("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),g=e.prototype=new t,g.constructor=e,g.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},g.config=e.config=function(t){return new e(t)},i=h("easing.RoughEase",function(e){e=e||{};for(var i,n,r,s,o,a,h=e.taper||"none",l=[],c=0,u=0|(e.points||20),d=u,f=e.randomize!==!1,m=e.clamp===!0,g=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--d>-1;)i=f?Math.random():1/u*d,n=g?g.getRatio(i):i,"none"===h?r=v:"out"===h?(s=1-i,r=s*s*v):"in"===h?r=i*i*v:.5>i?(s=2*i,r=.5*s*s*v):(s=2*(1-i),r=.5*s*s*v),f?n+=Math.random()*r-.5*r:d%2?n+=.5*r:n-=.5*r,m&&(n>1?n=1:0>n&&(n=0)),l[c++]={x:i,y:n};for(l.sort(function(t,e){return t.x-e.x}),a=new p(1,1,null),d=u;--d>-1;)o=l[d],a=new p(o.x,o.y,a);this._prev=new p(0,0,0!==a.t?a:a.next)},!0),g=i.prototype=new t,g.constructor=i,g.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},g.config=function(t){return new i(t)},i.ease=new i,u("Bounce",l("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),l("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),u("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),n=function(e,i,n){var r=h("easing."+e,function(t,e){this._p1=t||1,this._p2=e||n,this._p3=this._p2/o*(Math.asin(1/this._p1)||0)},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=i,s.config=function(t,e){return new r(t,e)},r},u("Elastic",n("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*o/this._p2)+1},.3),n("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*o/this._p2))},.3),n("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*o/this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*o/this._p2)+1},.45)),u("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),u("Sine",l("SineOut",function(t){return Math.sin(t*a)}),l("SineIn",function(t){return-Math.cos(t*a)+1}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),c(r.SlowMo,"SlowMo","ease,"),c(i,"RoughEase","ease,"),c(e,"SteppedEase","ease,"),f},!0)}),window._gsDefine&&window._gsQueue.pop()()},function(t,e){(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,n,r,s,o=function(){t.call(this,"css"),this._overwriteProps.length=0},a={},h=o.prototype=new t("css");h.constructor=o,o.version="1.9.6",o.API=2,o.defaultTransformPerspective=0,h="px",o.suffixMap={top:h,right:h,bottom:h,left:h,width:h,height:h,fontSize:h,padding:h,margin:h,perspective:h};var l,c,u,p,d,f,m=/(?:\d|\-\d|\.\d|\-\.\d)+/g,g=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,v=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,y=/[^\d\-\.]/g,_=/(?:\d|\-|\+|=|#|\.)*/g,x=/opacity *= *([^)]*)/,b=/opacity:([^;]*)/,w=/alpha\(opacity *=.+?\)/i,T=/^(rgb|hsl)/,S=/([A-Z])/g,E=/-([a-z])/gi,C=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,M=function(t,e){return e.toUpperCase()},P=/(?:Left|Right|Width)/i,A=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,I=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,O=/,(?=[^\)]*(?:\(|$))/gi,R=Math.PI/180,k=180/Math.PI,D={},L=document,B=L.createElement("div"),F=L.createElement("img"),N=o._internals={_specialProps:a},U=navigator.userAgent,G=function(){var t,e=U.indexOf("Android"),i=L.createElement("div");return u=-1!==U.indexOf("Safari")&&-1===U.indexOf("Chrome")&&(-1===e||Number(U.substr(e+8,1))>3),d=u&&6>Number(U.substr(U.indexOf("Version/")+8,1)),p=-1!==U.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(U),f=parseFloat(RegExp.$1),i.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",t=i.getElementsByTagName("a")[0],!!t&&/^0.55/.test(t.style.opacity)}(),j=function(t){return x.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},X=function(t){window.console&&void 0},H="",Y="",W=function(t,e){e=e||B;var i,n,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;--n>-1&&void 0===r[i[n]+t];);return n>=0?(Y=3===n?"ms":i[n],H="-"+Y.toLowerCase()+"-",Y+t):null},V=L.defaultView?L.defaultView.getComputedStyle:function(){},z=o.getStyle=function(t,e,i,n,r){var s;return G||"opacity"!==e?(!n&&t.style[e]?s=t.style[e]:(i=i||V(t,null))?(t=i.getPropertyValue(e.replace(S,"-$1").toLowerCase()),s=t||i.length?t:i[e]):t.currentStyle&&(i=t.currentStyle,s=i[e]),null==r||s&&"none"!==s&&"auto"!==s&&"auto auto"!==s?s:r):j(t)},q=function(t,e,i,n,r){if("px"===n||!n)return i;if("auto"===n||!i)return 0;var s,o=P.test(e),a=t,h=B.style,l=0>i;return l&&(i=-i),"%"===n&&-1!==e.indexOf("border")?s=i/100*(o?t.clientWidth:t.clientHeight):(h.cssText="border-style:solid; border-width:0; position:absolute; line-height:0;","%"!==n&&a.appendChild?h[o?"borderLeftWidth":"borderTopWidth"]=i+n:(a=t.parentNode||L.body,h[o?"width":"height"]=i+n),a.appendChild(B),s=parseFloat(B[o?"offsetWidth":"offsetHeight"]),a.removeChild(B),0!==s||r||(s=q(t,e,i,n,!0))),l?-s:s},K=function(t,e,i){if("absolute"!==z(t,"position",i))return 0;var n="left"===e?"Left":"Top",r=z(t,"margin"+n,i);return t["offset"+n]-(q(t,e,parseFloat(r),r.replace(_,""))||0)},Z=function(t,e){var i,n,r={};if(e=e||V(t,null))if(i=e.length)for(;--i>-1;)r[e[i].replace(E,M)]=e.getPropertyValue(e[i]);else for(i in e)r[i]=e[i];else if(e=t.currentStyle||t.style)for(i in e)r[i.replace(E,M)]=e[i];return G||(r.opacity=j(t)),n=Tt(t,e,!1),r.rotation=n.rotation*k,r.skewX=n.skewX*k,r.scaleX=n.scaleX,r.scaleY=n.scaleY,r.x=n.x,r.y=n.y,wt&&(r.z=n.z,r.rotationX=n.rotationX*k,r.rotationY=n.rotationY*k,r.scaleZ=n.scaleZ),r.filters&&delete r.filters,r},J=function(t,e,i,n,r){var s,o,a,h={},l=t.style;for(o in i)"cssText"!==o&&"length"!==o&&isNaN(o)&&(e[o]!==(s=i[o])||r&&r[o])&&-1===o.indexOf("Origin")&&("number"==typeof s||"string"==typeof s)&&(h[o]="auto"!==s||"left"!==o&&"top"!==o?""!==s&&"auto"!==s&&"none"!==s||"string"!=typeof e[o]||""===e[o].replace(y,"")?s:0:K(t,o),void 0!==l[o]&&(a=new ut(l,o,l[o],a)));if(n)for(o in n)"className"!==o&&(h[o]=n[o]);return{difs:h,firstMPT:a}},$={width:["Left","Right"],height:["Top","Bottom"]},Q=["marginLeft","marginRight","marginTop","marginBottom"],tt=function(t,e,i){var n=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=$[e],s=r.length;for(i=i||V(t,null);--s>-1;)n-=parseFloat(z(t,"padding"+r[s],i,!0))||0,n-=parseFloat(z(t,"border"+r[s]+"Width",i,!0))||0;return n},et=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),n=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],r=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==r?r="0":"center"===r&&(r="50%"),("center"===n||isNaN(parseFloat(n)))&&(n="50%"),e&&(e.oxp=-1!==n.indexOf("%"),e.oyp=-1!==r.indexOf("%"),e.oxr="="===n.charAt(1),e.oyr="="===r.charAt(1),e.ox=parseFloat(n.replace(y,"")),e.oy=parseFloat(r.replace(y,""))),n+" "+r+(i.length>2?" "+i[2]:"")},it=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},nt=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*Number(t.substr(2))+e:parseFloat(t)},rt=function(t,e,i,n){var r,s,o,a,h=1e-6;return null==t?a=e:"number"==typeof t?a=t*R:(r=2*Math.PI,s=t.split("_"),o=Number(s[0].replace(y,""))*(-1===t.indexOf("rad")?R:1)-("="===t.charAt(1)?0:e),s.length&&(n&&(n[i]=e+o),-1!==t.indexOf("short")&&(o%=r,o!==o%(r/2)&&(o=0>o?o+r:o-r)),-1!==t.indexOf("_cw")&&0>o?o=(o+9999999999*r)%r-(0|o/r)*r:-1!==t.indexOf("ccw")&&o>0&&(o=(o-9999999999*r)%r-(0|o/r)*r)),a=e+o),h>a&&a>-h&&(a=0),a},st={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ot=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},at=function(t){var e,i,n,r,s,o;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),st[t]?st[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),n=t.charAt(3),t="#"+e+e+i+i+n+n),t=parseInt(t.substr(1),16),[t>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(m),r=Number(t[0])%360/360,s=Number(t[1])/100,o=Number(t[2])/100,i=.5>=o?o*(s+1):o+s-o*s,e=2*o-i,t.length>3&&(t[3]=Number(t[3])),t[0]=ot(r+1/3,e,i),t[1]=ot(r,e,i),t[2]=ot(r-1/3,e,i),t):(t=t.match(m)||st.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):st.black},ht="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(h in st)ht+="|"+h+"\\b";ht=RegExp(ht+")","gi");var lt=function(t,e,i,n){if(null==t)return function(t){return t};var r,s=e?(t.match(ht)||[""])[0]:"",o=t.split(s).join("").match(v)||[],a=t.substr(0,t.indexOf(o[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",c=o.length,u=c>0?o[0].replace(m,""):"";return c?r=e?function(t){var e,p,d,f;if("number"==typeof t)t+=u;else if(n&&O.test(t)){for(f=t.replace(O,"|").split("|"),d=0;f.length>d;d++)f[d]=r(f[d]);return f.join(",")}if(e=(t.match(ht)||[s])[0],p=t.split(e).join("").match(v)||[],d=p.length,c>d--)for(;c>++d;)p[d]=i?p[0|(d-1)/2]:o[d];return a+p.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,s,p;if("number"==typeof t)t+=u;else if(n&&O.test(t)){for(s=t.replace(O,"|").split("|"),p=0;s.length>p;p++)s[p]=r(s[p]);return s.join(",")}if(e=t.match(v)||[],p=e.length,c>p--)for(;c>++p;)e[p]=i?e[0|(p-1)/2]:o[p];return a+e.join(l)+h}:function(t){return t}},ct=function(t){return t=t.split(","),function(e,i,n,r,s,o,a){var h,l=(i+"").split(" ");for(a={},h=0;4>h;h++)a[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return r.parse(e,a,s,o);
}},ut=(N._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,n,r,s=this.data,o=s.proxy,a=s.firstMPT,h=1e-6;a;)e=o[a.v],a.r?e=e>0?0|e+.5:0|e-.5:h>e&&e>-h&&(e=0),a.t[a.p]=e,a=a._next;if(s.autoRotate&&(s.autoRotate.rotation=o.rotation),1===t)for(a=s.firstMPT;a;){if(i=a.t,i.type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,n=1;i.l>n;n++)r+=i["xn"+n]+i["xs"+(n+1)];i.e=r}}else i.e=i.s+i.xs0;a=a._next}},function(t,e,i,n,r){this.t=t,this.p=e,this.v=i,this.r=r,n&&(n._prev=this,this._next=n)}),pt=(N._parseToProxy=function(t,e,i,n,r,s){var o,a,h,l,c,u=n,p={},d={},f=i._transform,m=D;for(i._transform=null,D=e,n=c=i.parse(t,e,n,r),D=m,s&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));n&&n!==u;){if(1>=n.type&&(a=n.p,d[a]=n.s+n.c,p[a]=n.s,s||(l=new ut(n,"s",a,l,n.r),n.c=0),1===n.type))for(o=n.l;--o>0;)h="xn"+o,a=n.p+"_"+h,d[a]=n.data[h],p[a]=n[h],s||(l=new ut(n,h,a,l,n.rxp[h]));n=n._next}return{proxy:p,end:d,firstMPT:l,pt:c}},N.CSSPropTween=function(t,e,n,r,o,a,h,l,c,u,p){this.t=t,this.p=e,this.s=n,this.c=r,this.n=h||"css_"+e,t instanceof pt||s.push(this.n),this.r=l,this.type=a||0,c&&(this.pr=c,i=!0),this.b=void 0===u?n:u,this.e=void 0===p?n+r:p,o&&(this._next=o,o._prev=this)}),dt=o.parseComplex=function(t,e,i,n,r,s,o,a,h,c){o=new pt(t,e,0,0,o,c?2:1,null,(!1),a,i,n),n+="";var u,p,d,f,v,y,_,x,b,w,S,E,C=i.split(", ").join(",").split(" "),M=n.split(", ").join(",").split(" "),P=C.length,A=l!==!1;for((-1!==n.indexOf(",")||-1!==i.indexOf(","))&&(C=C.join(" ").replace(O,", ").split(" "),M=M.join(" ").replace(O,", ").split(" "),P=C.length),P!==M.length&&(C=(s||"").split(" "),P=C.length),o.plugin=h,o.setRatio=c,u=0;P>u;u++)if(f=C[u],v=M[u],x=parseFloat(f),x||0===x)o.appendXtra("",x,it(v,x),v.replace(g,""),A&&-1!==v.indexOf("px"),!0);else if(r&&("#"===f.charAt(0)||st[f]||T.test(f)))E=","===v.charAt(v.length-1)?"),":")",f=at(f),v=at(v),b=f.length+v.length>6,b&&!G&&0===v[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(M[u]).join("transparent")):(G||(b=!1),o.appendXtra(b?"rgba(":"rgb(",f[0],v[0]-f[0],",",!0,!0).appendXtra("",f[1],v[1]-f[1],",",!0).appendXtra("",f[2],v[2]-f[2],b?",":E,!0),b&&(f=4>f.length?1:f[3],o.appendXtra("",f,(4>v.length?1:v[3])-f,E,!1)));else if(y=f.match(m)){if(_=v.match(g),!_||_.length!==y.length)return o;for(d=0,p=0;y.length>p;p++)S=y[p],w=f.indexOf(S,d),o.appendXtra(f.substr(d,w-d),Number(S),it(_[p],S),"",A&&"px"===f.substr(w+S.length,2),0===p),d=w+S.length;o["xs"+o.l]+=f.substr(d)}else o["xs"+o.l]+=o.l?" "+f:f;if(-1!==n.indexOf("=")&&o.data){for(E=o.xs0+o.data.s,u=1;o.l>u;u++)E+=o["xs"+u]+o.data["xn"+u];o.e=E+o["xs"+u]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},ft=9;for(h=pt.prototype,h.l=h.pr=0;--ft>0;)h["xn"+ft]=0,h["xs"+ft]="";h.xs0="",h._next=h._prev=h.xfirst=h.data=h.plugin=h.setRatio=h.rxp=null,h.appendXtra=function(t,e,i,n,r,s){var o=this,a=o.l;return o["xs"+a]+=s&&a?" "+t:t||"",i||0===a||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=n||"",a>0?(o.data["xn"+a]=e+i,o.rxp["xn"+a]=r,o["xn"+a]=e,o.plugin||(o.xfirst=new pt(o,"xn"+a,e,i,o.xfirst||o,0,o.n,r,o.pr),o.xfirst.xs0=0),o):(o.data={s:e+i},o.rxp={},o.s=e,o.c=i,o.r=r,o)):(o["xs"+a]+=e+(n||""),o)};var mt=function(t,e){e=e||{},this.p=e.prefix?W(t)||t:t,a[t]=a[this.p]=this,this.format=e.formatter||lt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},gt=N._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var n,r,s=t.split(","),o=e.defaultValue;for(i=i||[o],n=0;s.length>n;n++)e.prefix=0===n&&e.prefix,e.defaultValue=i[n]||o,r=new mt(s[n],e)},vt=function(t){if(!a[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";gt(t,{parser:function(t,i,n,r,s,o,h){var l=(window.GreenSockGlobals||window).com.greensock.plugins[e];return l?(l._cssRegister(),a[n].parse(t,i,n,r,s,o,h)):(X("Error: "+e+" js file not loaded."),s)}})}};h=mt.prototype,h.parseComplex=function(t,e,i,n,r,s){var o,a,h,l,c,u,p=this.keyword;if(this.multi&&(O.test(i)||O.test(e)?(a=e.replace(O,"|").split("|"),h=i.replace(O,"|").split("|")):p&&(a=[e],h=[i])),h){for(l=h.length>a.length?h.length:a.length,o=0;l>o;o++)e=a[o]=a[o]||this.dflt,i=h[o]=h[o]||this.dflt,p&&(c=e.indexOf(p),u=i.indexOf(p),c!==u&&(i=-1===u?h:a,i[o]+=" "+p));e=a.join(", "),i=h.join(", ")}return dt(t,this.p,e,i,this.clrs,this.dflt,n,this.pr,r,s)},h.parse=function(t,e,i,n,s,o){return this.parseComplex(t.style,this.format(z(t,this.p,r,!1,this.dflt)),this.format(e),s,o)},o.registerSpecialProp=function(t,e,i){gt(t,{parser:function(t,n,r,s,o,a){var h=new pt(t,r,0,0,o,2,r,(!1),i);return h.plugin=a,h.setRatio=e(t,n,s._tween,r),h},priority:i})};var yt="scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(","),_t=W("transform"),xt=H+"transform",bt=W("transformOrigin"),wt=null!==W("perspective"),Tt=function(t,e,i){var n,r,s,a,h,l,c,u,p,d,f,m,g,v=i?t._gsTransform||{skewY:0}:{skewY:0},y=0>v.scaleX,_=2e-5,x=1e5,b=-Math.PI+1e-4,w=Math.PI-1e-4,T=wt?parseFloat(z(t,bt,e,!1,"0 0 0").split(" ")[2])||v.zOrigin||0:0;if(_t)n=z(t,xt,e,!0);else if(t.currentStyle)if(n=t.currentStyle.filter.match(A),n&&4===n.length)n=[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),v.x||0,v.y||0].join(",");else{if(null!=v.x)return v;n=""}for(r=(n||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],s=r.length;--s>-1;)a=Number(r[s]),r[s]=(h=a-(a|=0))?(0|h*x+(0>h?-.5:.5))/x+a:a;if(16===r.length){var S=r[8],E=r[9],C=r[10],M=r[12],P=r[13],I=r[14];if(v.zOrigin&&(I=-v.zOrigin,M=S*I-r[12],P=E*I-r[13],I=C*I+v.zOrigin-r[14]),!i||null==v.rotationX){var O,R,k,D,L,B,F,N=r[0],U=r[1],G=r[2],j=r[3],X=r[4],H=r[5],Y=r[6],W=r[7],V=r[11],q=v.rotationX=Math.atan2(Y,C),K=b>q||q>w;q&&(D=Math.cos(-q),L=Math.sin(-q),O=X*D+S*L,R=H*D+E*L,k=Y*D+C*L,S=X*-L+S*D,E=H*-L+E*D,C=Y*-L+C*D,V=W*-L+V*D,X=O,H=R,Y=k),q=v.rotationY=Math.atan2(S,N),q&&(B=b>q||q>w,D=Math.cos(-q),L=Math.sin(-q),O=N*D-S*L,R=U*D-E*L,k=G*D-C*L,E=U*L+E*D,C=G*L+C*D,V=j*L+V*D,N=O,U=R,G=k),q=v.rotation=Math.atan2(U,H),q&&(F=b>q||q>w,D=Math.cos(-q),L=Math.sin(-q),N=N*D+X*L,R=U*D+H*L,H=U*-L+H*D,Y=G*-L+Y*D,U=R),F&&K?v.rotation=v.rotationX=0:F&&B?v.rotation=v.rotationY=0:B&&K&&(v.rotationY=v.rotationX=0),v.scaleX=(0|Math.sqrt(N*N+U*U)*x+.5)/x,v.scaleY=(0|Math.sqrt(H*H+E*E)*x+.5)/x,v.scaleZ=(0|Math.sqrt(Y*Y+C*C)*x+.5)/x,v.skewX=0,v.perspective=V?1/(0>V?-V:V):0,v.x=M,v.y=P,v.z=I}}else if(!(wt&&0!==r.length&&v.x===r[4]&&v.y===r[5]&&(v.rotationX||v.rotationY)||void 0!==v.x&&"none"===z(t,"display",e))){var Z=r.length>=6,J=Z?r[0]:1,$=r[1]||0,Q=r[2]||0,tt=Z?r[3]:1;v.x=r[4]||0,v.y=r[5]||0,l=Math.sqrt(J*J+$*$),c=Math.sqrt(tt*tt+Q*Q),u=J||$?Math.atan2($,J):v.rotation||0,p=Q||tt?Math.atan2(Q,tt)+u:v.skewX||0,d=l-Math.abs(v.scaleX||0),f=c-Math.abs(v.scaleY||0),Math.abs(p)>Math.PI/2&&Math.abs(p)<1.5*Math.PI&&(y?(l*=-1,p+=0>=u?Math.PI:-Math.PI,u+=0>=u?Math.PI:-Math.PI):(c*=-1,p+=0>=p?Math.PI:-Math.PI)),m=(u-v.rotation)%Math.PI,g=(p-v.skewX)%Math.PI,(void 0===v.skewX||d>_||-_>d||f>_||-_>f||m>b&&w>m&&!1|m*x||g>b&&w>g&&!1|g*x)&&(v.scaleX=l,v.scaleY=c,v.rotation=u,v.skewX=p),wt&&(v.rotationX=v.rotationY=v.z=0,v.perspective=parseFloat(o.defaultTransformPerspective)||0,v.scaleZ=1)}v.zOrigin=T;for(s in v)_>v[s]&&v[s]>-_&&(v[s]=0);return i&&(t._gsTransform=v),v},St=function(t){var e,i,n=this.data,r=-n.rotation,s=r+n.skewX,o=1e5,a=(0|Math.cos(r)*n.scaleX*o)/o,h=(0|Math.sin(r)*n.scaleX*o)/o,l=(0|Math.sin(s)*-n.scaleY*o)/o,c=(0|Math.cos(s)*n.scaleY*o)/o,u=this.t.style,p=this.t.currentStyle;if(p){i=h,h=-l,l=-i,e=p.filter,u.filter="";var d,m,g=this.t.offsetWidth,v=this.t.offsetHeight,y="absolute"!==p.position,b="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+h+", M21="+l+", M22="+c,w=n.x,T=n.y;if(null!=n.ox&&(d=(n.oxp?.01*g*n.ox:n.ox)-g/2,m=(n.oyp?.01*v*n.oy:n.oy)-v/2,w+=d-(d*a+m*h),T+=m-(d*l+m*c)),y)d=g/2,m=v/2,b+=", Dx="+(d-(d*a+m*h)+w)+", Dy="+(m-(d*l+m*c)+T)+")";else{var S,E,C,M=8>f?1:-1;for(d=n.ieOffsetX||0,m=n.ieOffsetY||0,n.ieOffsetX=Math.round((g-((0>a?-a:a)*g+(0>h?-h:h)*v))/2+w),n.ieOffsetY=Math.round((v-((0>c?-c:c)*v+(0>l?-l:l)*g))/2+T),ft=0;4>ft;ft++)E=Q[ft],S=p[E],i=-1!==S.indexOf("px")?parseFloat(S):q(this.t,E,parseFloat(S),S.replace(_,""))||0,C=i!==n[E]?2>ft?-n.ieOffsetX:-n.ieOffsetY:2>ft?d-n.ieOffsetX:m-n.ieOffsetY,u[E]=(n[E]=Math.round(i-C*(0===ft||2===ft?1:M)))+"px";b+=", sizingMethod='auto expand')"}u.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(I,b):b+" "+e,(0===t||1===t)&&1===a&&0===h&&0===l&&1===c&&(y&&-1===b.indexOf("Dx=0, Dy=0")||x.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf("gradient(")&&u.removeAttribute("filter"))}},Et=function(){var t,e,i,n,r,s,o,a,h,l=this.data,c=this.t.style,u=l.perspective,d=l.scaleX,f=0,m=0,g=0,v=0,y=l.scaleY,_=0,x=0,b=0,w=0,T=l.scaleZ,S=0,E=0,C=0,M=u?-1/u:0,P=l.rotation,A=l.zOrigin,I=1e5;p&&(o=c.top?"top":c.bottom?"bottom":parseFloat(z(this.t,"top",null,!1))?"bottom":"top",i=z(this.t,o,null,!1),a=parseFloat(i)||0,h=i.substr((a+"").length)||"px",l._ffFix=!l._ffFix,c[o]=(l._ffFix?a+.05:a-.05)+h),(P||l.skewX)&&(i=d*Math.cos(P),n=y*Math.sin(P),P-=l.skewX,f=d*-Math.sin(P),y*=Math.cos(P),d=i,v=n),P=l.rotationY,P&&(t=Math.cos(P),e=Math.sin(P),i=d*t,n=v*t,r=T*-e,s=M*-e,m=d*e,_=v*e,T*=t,M*=t,d=i,v=n,b=r,E=s),P=l.rotationX,P&&(t=Math.cos(P),e=Math.sin(P),i=f*t+m*e,n=y*t+_*e,r=w*t+T*e,s=C*t+M*e,m=f*-e+m*t,_=y*-e+_*t,T=w*-e+T*t,M=C*-e+M*t,f=i,y=n,w=r,C=s),A&&(S-=A,g=m*S,x=_*S,S=T*S+A),g=(i=(g+=l.x)-(g|=0))?(0|i*I+(0>i?-.5:.5))/I+g:g,x=(i=(x+=l.y)-(x|=0))?(0|i*I+(0>i?-.5:.5))/I+x:x,S=(i=(S+=l.z)-(S|=0))?(0|i*I+(0>i?-.5:.5))/I+S:S,c[_t]="matrix3d("+[(0|d*I)/I,(0|v*I)/I,(0|b*I)/I,(0|E*I)/I,(0|f*I)/I,(0|y*I)/I,(0|w*I)/I,(0|C*I)/I,(0|m*I)/I,(0|_*I)/I,(0|T*I)/I,(0|M*I)/I,g,x,S,u?1+-S/u:1].join(",")+")"},Ct=function(){var t,e,i,n,r,s,o,a,h,l=this.data,c=this.t,u=c.style;p&&(t=u.top?"top":u.bottom?"bottom":parseFloat(z(c,"top",null,!1))?"bottom":"top",e=z(c,t,null,!1),i=parseFloat(e)||0,n=e.substr((i+"").length)||"px",l._ffFix=!l._ffFix,u[t]=(l._ffFix?i+.05:i-.05)+n),l.rotation||l.skewX?(r=l.rotation,s=r-l.skewX,o=1e5,a=l.scaleX*o,h=l.scaleY*o,u[_t]="matrix("+(0|Math.cos(r)*a)/o+","+(0|Math.sin(r)*a)/o+","+(0|Math.sin(s)*-h)/o+","+(0|Math.cos(s)*h)/o+","+l.x+","+l.y+")"):u[_t]="matrix("+l.scaleX+",0,0,"+l.scaleY+","+l.x+","+l.y+")"};gt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation",{parser:function(t,e,i,n,s,o,a){if(n._transform)return s;var h,l,c,u,p,d,f,m=n._transform=Tt(t,r,!0),g=t.style,v=1e-6,y=yt.length,_=a,x={};if("string"==typeof _.transform&&_t)c=g.cssText,g[_t]=_.transform,g.display="block",h=Tt(t,null,!1),g.cssText=c;else if("object"==typeof _){if(h={scaleX:nt(null!=_.scaleX?_.scaleX:_.scale,m.scaleX),scaleY:nt(null!=_.scaleY?_.scaleY:_.scale,m.scaleY),scaleZ:nt(null!=_.scaleZ?_.scaleZ:_.scale,m.scaleZ),x:nt(_.x,m.x),y:nt(_.y,m.y),z:nt(_.z,m.z),perspective:nt(_.transformPerspective,m.perspective)},f=_.directionalRotation,null!=f)if("object"==typeof f)for(c in f)_[c]=f[c];else _.rotation=f;h.rotation=rt("rotation"in _?_.rotation:"shortRotation"in _?_.shortRotation+"_short":"rotationZ"in _?_.rotationZ:m.rotation*k,m.rotation,"rotation",x),wt&&(h.rotationX=rt("rotationX"in _?_.rotationX:"shortRotationX"in _?_.shortRotationX+"_short":m.rotationX*k||0,m.rotationX,"rotationX",x),h.rotationY=rt("rotationY"in _?_.rotationY:"shortRotationY"in _?_.shortRotationY+"_short":m.rotationY*k||0,m.rotationY,"rotationY",x)),h.skewX=null==_.skewX?m.skewX:rt(_.skewX,m.skewX),h.skewY=null==_.skewY?m.skewY:rt(_.skewY,m.skewY),(l=h.skewY-m.skewY)&&(h.skewX+=l,h.rotation+=l)}for(p=m.z||m.rotationX||m.rotationY||h.z||h.rotationX||h.rotationY||h.perspective,p||null==_.scale||(h.scaleZ=1);--y>-1;)i=yt[y],u=h[i]-m[i],(u>v||-v>u||null!=D[i])&&(d=!0,s=new pt(m,i,m[i],u,s),i in x&&(s.e=x[i]),s.xs0=0,s.plugin=o,n._overwriteProps.push(s.n));return u=_.transformOrigin,(u||wt&&p&&m.zOrigin)&&(_t?(d=!0,u=(u||z(t,i,r,!1,"50% 50%"))+"",i=bt,s=new pt(g,i,0,0,s,(-1),"css_transformOrigin"),s.b=g[i],s.plugin=o,wt?(c=m.zOrigin,u=u.split(" "),m.zOrigin=(u.length>2?parseFloat(u[2]):c)||0,s.xs0=s.e=g[i]=u[0]+" "+(u[1]||"50%")+" 0px",s=new pt(m,"zOrigin",0,0,s,(-1),s.n),s.b=c,s.xs0=s.e=m.zOrigin):s.xs0=s.e=g[i]=u):et(u+"",m)),d&&(n._transformType=p||3===this._transformType?3:2),s},prefix:!0}),gt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),gt("borderRadius",{defaultValue:"0px",parser:function(t,e,i,s,o){e=this.format(e);var a,h,l,c,u,p,d,f,m,g,v,y,_,x,b,w,T=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],S=t.style;for(m=parseFloat(t.offsetWidth),g=parseFloat(t.offsetHeight),a=e.split(" "),h=0;T.length>h;h++)this.p.indexOf("border")&&(T[h]=W(T[h])),u=c=z(t,T[h],r,!1,"0px"),-1!==u.indexOf(" ")&&(c=u.split(" "),u=c[0],c=c[1]),p=l=a[h],d=parseFloat(u),y=u.substr((d+"").length),_="="===p.charAt(1),_?(f=parseInt(p.charAt(0)+"1",10),p=p.substr(2),f*=parseFloat(p),v=p.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(p),v=p.substr((f+"").length)),""===v&&(v=n[i]||y),v!==y&&(x=q(t,"borderLeft",d,y),b=q(t,"borderTop",d,y),"%"===v?(u=100*(x/m)+"%",c=100*(b/g)+"%"):"em"===v?(w=q(t,"borderLeft",1,"em"),u=x/w+"em",c=b/w+"em"):(u=x+"px",c=b+"px"),_&&(p=parseFloat(u)+f+v,l=parseFloat(c)+f+v)),o=dt(S,T[h],u+" "+c,p+" "+l,!1,"0px",o);return o},prefix:!0,formatter:lt("0px 0px 0px 0px",!1,!0)}),gt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,n,s,o){var a,h,l,c,u,p,d="background-position",m=r||V(t,null),g=this.format((m?f?m.getPropertyValue(d+"-x")+" "+m.getPropertyValue(d+"-y"):m.getPropertyValue(d):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(-1!==g.indexOf("%")!=(-1!==v.indexOf("%"))&&(p=z(t,"backgroundImage").replace(C,""),p&&"none"!==p)){for(a=g.split(" "),h=v.split(" "),F.setAttribute("src",p),l=2;--l>-1;)g=a[l],c=-1!==g.indexOf("%"),c!==(-1!==h[l].indexOf("%"))&&(u=0===l?t.offsetWidth-F.width:t.offsetHeight-F.height,a[l]=c?parseFloat(g)/100*u+"px":100*(parseFloat(g)/u)+"%");g=a.join(" ")}return this.parseComplex(t.style,g,v,s,o)},formatter:et}),gt("backgroundSize",{defaultValue:"0 0",formatter:et}),gt("perspective",{defaultValue:"0px",prefix:!0}),gt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),gt("transformStyle",{prefix:!0}),gt("backfaceVisibility",{prefix:!0}),gt("margin",{parser:ct("marginTop,marginRight,marginBottom,marginLeft")}),gt("padding",{parser:ct("paddingTop,paddingRight,paddingBottom,paddingLeft")}),gt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,n,s,o){var a,h,l;return 9>f?(h=t.currentStyle,l=8>f?" ":",",a="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(a=this.format(z(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,s,o)}}),gt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),gt("autoRound,strictUnits",{parser:function(t,e,i,n,r){return r}}),gt("border",{defaultValue:"0px solid #000",parser:function(t,e,i,n,s,o){return this.parseComplex(t.style,this.format(z(t,"borderTopWidth",r,!1,"0px")+" "+z(t,"borderTopStyle",r,!1,"solid")+" "+z(t,"borderTopColor",r,!1,"#000")),this.format(e),s,o)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(ht)||["#000"])[0]}}),gt("float,cssFloat,styleFloat",{parser:function(t,e,i,n,r){var s=t.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new pt(s,o,0,0,r,(-1),i,(!1),0,s[o],e)}});var Mt=function(t){var e,i=this.t,n=i.filter,r=0|this.s+this.c*t;100===r&&(-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")?(i.removeAttribute("filter"),e=!z(this.data,"filter")):(i.filter=n.replace(w,""),e=!0)),e||(this.xn1&&(i.filter=n=n||"alpha(opacity=100)"),-1===n.indexOf("opacity")?i.filter+=" alpha(opacity="+r+")":i.filter=n.replace(x,"opacity="+r))};gt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,n,s,o){var a,h=parseFloat(z(t,"opacity",r,!1,"1")),l=t.style;return e=parseFloat(e),"autoAlpha"===i&&(a=z(t,"visibility",r),1===h&&"hidden"===a&&0!==e&&(h=0),s=new pt(l,"visibility",0,0,s,(-1),null,(!1),0,0!==h?"visible":"hidden",0===e?"hidden":"visible"),s.xs0="visible",n._overwriteProps.push(s.n)),G?s=new pt(l,"opacity",h,e-h,s):(s=new pt(l,"opacity",100*h,100*(e-h),s),s.xn1="autoAlpha"===i?1:0,l.zoom=1,s.type=2,s.b="alpha(opacity="+s.s+")",s.e="alpha(opacity="+(s.s+s.c)+")",s.data=t,s.plugin=o,s.setRatio=Mt),s}});var Pt=function(t,e){e&&(t.removeProperty?t.removeProperty(e.replace(S,"-$1").toLowerCase()):t.removeAttribute(e))},At=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.className=0===t?this.b:this.e;for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Pt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.className!==this.e&&(this.t.className=this.e)};gt("className",{parser:function(t,e,n,s,o,a,h){var l,c,u,p,d,f=t.className,m=t.style.cssText;if(o=s._classNamePT=new pt(t,n,0,0,o,2),o.setRatio=At,o.pr=-11,i=!0,o.b=f,c=Z(t,r),u=t._gsClassPT){for(p={},d=u.data;d;)p[d.p]=1,d=d._next;u.setRatio(1)}return t._gsClassPT=o,o.e="="!==e.charAt(1)?e:f.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),s._tween._duration&&(t.className=o.e,l=J(t,c,Z(t),h,p),t.className=f,o.data=l.firstMPT,t.style.cssText=m,o=o.xfirst=s.parse(t,l.difs,o,a)),o}});var It=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration)for(var e,i="all"===this.e,n=this.t.style,r=i?n.cssText.split(";"):this.e.split(","),s=r.length,o=a.transform.parse;--s>-1;)e=r[s],i&&(e=e.substr(0,e.indexOf(":")).split(" ").join("")),a[e]&&(e=a[e].parse===o?_t:a[e].p),Pt(n,e)};for(gt("clearProps",{parser:function(t,e,n,r,s){return s=new pt(t,n,0,0,s,2),s.setRatio=It,s.e=e,s.pr=-10,s.data=r._tween,i=!0,s}}),h="bezier,throwProps,physicsProps,physics2D".split(","),ft=h.length;ft--;)vt(h[ft]);h=o.prototype,h._firstPT=null,h._onInitTween=function(t,e,a){if(!t.nodeType)return!1;this._target=t,this._tween=a,this._vars=e,l=e.autoRound,i=!1,n=e.suffixMap||o.suffixMap,r=V(t,""),s=this._overwriteProps;var h,p,f,m,g,v,y,_,x,w=t.style;if(c&&""===w.zIndex&&(h=z(t,"zIndex",r),("auto"===h||""===h)&&(w.zIndex=0)),"string"==typeof e&&(m=w.cssText,h=Z(t,r),w.cssText=m+";"+e,h=J(t,h,Z(t)).difs,!G&&b.test(e)&&(h.opacity=parseFloat(RegExp.$1)),e=h,w.cssText=m),this._firstPT=p=this.parse(t,e,null),this._transformType){for(x=3===this._transformType,_t?u&&(c=!0,""===w.zIndex&&(y=z(t,"zIndex",r),("auto"===y||""===y)&&(w.zIndex=0)),d&&(w.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(x?"visible":"hidden"))):w.zoom=1,f=p;f&&f._next;)f=f._next;_=new pt(t,"transform",0,0,null,2),this._linkCSSP(_,null,f),_.setRatio=x&&wt?Et:_t?Ct:St,_.data=this._transform||Tt(t,r,!0),s.pop()}if(i){for(;p;){for(v=p._next,f=m;f&&f.pr>p.pr;)f=f._next;(p._prev=f?f._prev:g)?p._prev._next=p:m=p,(p._next=f)?f._prev=p:g=p,p=v}this._firstPT=m}return!0},h.parse=function(t,e,i,s){var o,h,c,u,p,d,f,m,g,v,y=t.style;for(o in e)d=e[o],h=a[o],h?i=h.parse(t,d,o,this,i,s,e):(p=z(t,o,r)+"",g="string"==typeof d,"color"===o||"fill"===o||"stroke"===o||-1!==o.indexOf("Color")||g&&T.test(d)?(g||(d=at(d),d=(d.length>3?"rgba(":"rgb(")+d.join(",")+")"),i=dt(y,o,p,d,!0,"transparent",i,0,s)):!g||-1===d.indexOf(" ")&&-1===d.indexOf(",")?(c=parseFloat(p),f=c||0===c?p.substr((c+"").length):"",(""===p||"auto"===p)&&("width"===o||"height"===o?(c=tt(t,o,r),f="px"):"left"===o||"top"===o?(c=K(t,o,r),f="px"):(c="opacity"!==o?0:1,f="")),v=g&&"="===d.charAt(1),v?(u=parseInt(d.charAt(0)+"1",10),d=d.substr(2),u*=parseFloat(d),m=d.replace(_,"")):(u=parseFloat(d),m=g?d.substr((u+"").length)||"":""),""===m&&(m=n[o]||f),d=u||0===u?(v?u+c:u)+m:e[o],f!==m&&""!==m&&(u||0===u)&&(c||0===c)&&(c=q(t,o,c,f),"%"===m?(c/=q(t,o,100,"%")/100,c>100&&(c=100),e.strictUnits!==!0&&(p=c+"%")):"em"===m?c/=q(t,o,1,"em"):(u=q(t,o,u,m),m="px"),v&&(u||0===u)&&(d=u+c+m)),v&&(u+=c),!c&&0!==c||!u&&0!==u?d||"NaN"!=d+""&&null!=d?(i=new pt(y,o,u||c||0,0,i,(-1),"css_"+o,(!1),0,p,d),i.xs0="none"!==d||"display"!==o&&-1===o.indexOf("Style")?d:p):X("invalid "+o+" tween value: "+e[o]):(i=new pt(y,o,c,u-c,i,0,"css_"+o,l!==!1&&("px"===m||"zIndex"===o),0,p,d),i.xs0=m)):i=dt(y,o,p,d,!0,null,i,0,s)),s&&i&&!i.plugin&&(i.plugin=s);return i},h.setRatio=function(t){var e,i,n,r=this._firstPT,s=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;r;){if(e=r.c*t+r.s,r.r?e=e>0?0|e+.5:0|e-.5:s>e&&e>-s&&(e=0),r.type)if(1===r.type)if(n=r.l,2===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,n=1;r.l>n;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;)2!==r.type?r.t[r.p]=r.e:r.setRatio(t),r=r._next},h._enableTransforms=function(t){this._transformType=t||3===this._transformType?3:2},h._linkCSSP=function(t,e,i,n){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),i?i._next=t:n||null!==this._firstPT||(this._firstPT=t),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next),t._next=e,t._prev=i),t},h._kill=function(e){var i,n,r,s=e;if(e.css_autoAlpha||e.css_alpha){s={};for(n in e)s[n]=e[n];s.css_opacity=1,s.css_autoAlpha&&(s.css_visibility=1)}return e.css_className&&(i=this._classNamePT)&&(r=i.xfirst,r&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),t.prototype._kill.call(this,s)};var Ot=function(t,e,i){var n,r,s,o;if(t.slice)for(r=t.length;--r>-1;)Ot(t[r],e,i);else for(n=t.childNodes,r=n.length;--r>-1;)s=n[r],o=s.type,s.style&&(e.push(Z(s)),i&&i.push(s)),1!==o&&9!==o&&11!==o||!s.childNodes.length||Ot(s,e,i)};return o.cascadeTo=function(t,i,n){var r,s,o,a=e.to(t,i,n),h=[a],l=[],c=[],u=[],p=e._internals.reservedProps;for(t=a._targets||a.target,Ot(t,l,u),a.render(i,!0),Ot(t,c),a.render(0,!0),a._enabled(!0),r=u.length;--r>-1;)if(s=J(u[r],l[r],c[r]),s.firstMPT){s=s.difs;for(o in n)p[o]&&(s[o]=n[o]);h.push(e.to(u[r],i,s))}return h},t.activate([o]),o},!0)}),window._gsDefine&&window._gsQueue.pop()()},function(t,e,i){var n,r;(function(s){!function(){"use strict";var o=function(){this.init()};o.prototype={init:function(){var t=this||a;return t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.mobileAutoEnable=!0,t._setup(),t},volume:function(t){var e=this||a;if(t=parseFloat(t),e.ctx||m(),"undefined"!=typeof t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&(e.masterGain.gain.value=t);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var s=e._howls[i]._soundById(n[r]);s&&s._node&&(s._node.volume=s._volume*t)}return e}return e._volume},mute:function(t){var e=this||a;e.ctx||m(),e._muted=t,e.usingWebAudio&&(e.masterGain.gain.value=t?0:e._volume);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var s=e._howls[i]._soundById(n[r]);s&&s._node&&(s._node.muted=!!t||s._muted)}return e},unload:function(){for(var t=this||a,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&"undefined"!=typeof t.ctx.close&&(t.ctx.close(),t.ctx=null,m()),t},codecs:function(t){return(this||a)._codecs[t]},_setup:function(){var t=this||a;return t.state=t.ctx?t.ctx.state||"running":"running",t._autoSuspend(),t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||a,e="undefined"!=typeof Audio?new Audio:null;if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),r=n&&parseInt(n[0].split("/")[1],10)<33;return t._codecs={mp3:!(r||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,"")},t},_enableMobileAudio:function(){var t=this||a,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator&&t._navigator.userAgent),i=!!("ontouchend"in window||t._navigator&&t._navigator.maxTouchPoints>0||t._navigator&&t._navigator.msMaxTouchPoints>0);if(!t._mobileEnabled&&t.ctx&&(e||i)){t._mobileEnabled=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var n=function(){var e=t.ctx.createBufferSource();e.buffer=t._scratchBuffer,e.connect(t.ctx.destination),"undefined"==typeof e.start?e.noteOn(0):e.start(0),e.onended=function(){e.disconnect(0),t._mobileEnabled=!0,t.mobileAutoEnable=!1,document.removeEventListener("touchend",n,!0)}};return document.addEventListener("touchend",n,!0),t}},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&"undefined"!=typeof t.ctx.suspend&&a.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&"undefined"!=typeof t.ctx.resume&&a.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.state="resuming",t.ctx.resume().then(function(){t.state="running"}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var a=new o,h=function(t){var e=this;return t.src&&0!==t.src.length?void e.init(t):void 0};h.prototype={init:function(t){var e=this;return a.ctx||m(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._webAudio=a.usingWebAudio&&!e._html5,"undefined"!=typeof a.ctx&&a.ctx&&a.mobileAutoEnable&&a._enableMobileAudio(),a._howls.push(e),e._preload&&e.load(),e},load:function(){var t=this,e=null;if(a.noAudio)return void t._emit("loaderror",null,"No audio support.");"string"==typeof t._src&&(t._src=[t._src]);for(var i=0;i<t._src.length;i++){var n,r;if(t._format&&t._format[i])n=t._format[i];else{if(r=t._src[i],"string"!=typeof r){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}n=/^data:audio\/([^;,]+);/i.exec(r),n||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(a.codecs(n)){e=t._src[i];break}}return e?(t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new l(t),t._webAudio&&u(t),t):void t._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(t,e){var i=this,n=null;if("number"==typeof t)n=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if("undefined"==typeof t){t="__default";for(var r=0,s=0;s<i._sounds.length;s++)i._sounds[s]._paused&&!i._sounds[s]._ended&&(r++,n=i._sounds[s]._id);1===r?t=null:n=null}}var o=n?i._soundById(n):i._inactiveSound();if(!o)return null;if(n&&!t&&(t=o._sprite||"__default"),"loaded"!==i._state&&!i._sprite[t])return i._queue.push({event:"play",action:function(){i.play(i._soundById(o._id)?o._id:void 0)}}),o._id;if(n&&!o._paused)return e||setTimeout(function(){i._emit("play",o._id)},0),o._id;i._webAudio&&a._autoResume();var h=o._seek>0?o._seek:i._sprite[t][0]/1e3,l=(i._sprite[t][0]+i._sprite[t][1])/1e3-h,c=1e3*l/Math.abs(o._rate);o._paused=!1,o._ended=!1,o._sprite=t,o._seek=h,o._start=i._sprite[t][0]/1e3,o._stop=(i._sprite[t][0]+i._sprite[t][1])/1e3,o._loop=!(!o._loop&&!i._sprite[t][2]);var u=o._node;if(i._webAudio){var p=function(){i._refreshBuffer(o);var t=o._muted||i._muted?0:o._volume;u.gain.setValueAtTime(t,a.ctx.currentTime),o._playStart=a.ctx.currentTime,"undefined"==typeof u.bufferSource.start?o._loop?u.bufferSource.noteGrainOn(0,h,86400):u.bufferSource.noteGrainOn(0,h,l):o._loop?u.bufferSource.start(0,h,86400):u.bufferSource.start(0,h,l),c!==1/0&&(i._endTimers[o._id]=setTimeout(i._ended.bind(i,o),c)),e||setTimeout(function(){i._emit("play",o._id)},0)};"loaded"===i._state?p():(i.once("load",p,o._id),i._clearTimer(o._id))}else{var d=function(){u.currentTime=h,u.muted=o._muted||i._muted||a._muted||u.muted,u.volume=o._volume*a.volume(),u.playbackRate=o._rate,setTimeout(function(){u.play(),c!==1/0&&(i._endTimers[o._id]=setTimeout(i._ended.bind(i,o),c)),e||i._emit("play",o._id)},0)},f="loaded"===i._state&&(window&&window.ejecta||!u.readyState&&a._navigator.isCocoonJS);if(4===u.readyState||f)d();else{var m=function(){d(),u.removeEventListener(a._canPlayEvent,m,!1)};u.addEventListener(a._canPlayEvent,m,!1),i._clearTimer(o._id)}}return o._id},pause:function(t){var e=this;if("loaded"!==e._state)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var r=e._soundById(i[n]);if(r&&!r._paused){if(r._seek=e.seek(i[n]),r._rateSeek=0,r._paused=!0,e._stopFade(i[n]),r._node)if(e._webAudio){if(!r._node.bufferSource)return e;"undefined"==typeof r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r._id)}}return e},stop:function(t,e){var i=this;if("loaded"!==i._state)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),r=0;r<n.length;r++){i._clearTimer(n[r]);var s=i._soundById(n[r]);if(s&&!s._paused&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,i._stopFade(n[r]),s._node))if(i._webAudio){if(!s._node.bufferSource)return i;"undefined"==typeof s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),
i._cleanBuffer(s._node)}else isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause());s&&!e&&i._emit("stop",s._id)}return i},mute:function(t,e){var i=this;if("loaded"!==i._state)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if("undefined"==typeof e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var n=i._getSoundIds(e),r=0;r<n.length;r++){var s=i._soundById(n[r]);s&&(s._muted=t,i._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,a.ctx.currentTime):s._node&&(s._node.muted=!!a._muted||t),i._emit("mute",s._id))}return i},volume:function(){var t,e,i=this,n=arguments;if(0===n.length)return i._volume;if(1===n.length){var r=i._getSoundIds(),s=r.indexOf(n[0]);s>=0?e=parseInt(n[0],10):t=parseFloat(n[0])}else n.length>=2&&(t=parseFloat(n[0]),e=parseInt(n[1],10));var o;if(!("undefined"!=typeof t&&t>=0&&t<=1))return o=e?i._soundById(e):i._sounds[0],o?o._volume:0;if("loaded"!==i._state)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,n)}}),i;"undefined"==typeof e&&(i._volume=t),e=i._getSoundIds(e);for(var h=0;h<e.length;h++)o=i._soundById(e[h]),o&&(o._volume=t,n[2]||i._stopFade(e[h]),i._webAudio&&o._node&&!o._muted?o._node.gain.setValueAtTime(t,a.ctx.currentTime):o._node&&!o._muted&&(o._node.volume=t*a.volume()),i._emit("volume",o._id));return i},fade:function(t,e,i,n){var r=this,s=Math.abs(t-e),o=t>e?"out":"in",h=s/.01,l=i/h;if("loaded"!==r._state)return r._queue.push({event:"fade",action:function(){r.fade(t,e,i,n)}}),r;r.volume(t,n);for(var c=r._getSoundIds(n),u=0;u<c.length;u++){var p=r._soundById(c[u]);if(p){if(n||r._stopFade(c[u]),r._webAudio&&!p._muted){var d=a.ctx.currentTime,f=d+i/1e3;p._volume=t,p._node.gain.setValueAtTime(t,d),p._node.gain.linearRampToValueAtTime(e,f)}var m=t;p._interval=setInterval(function(t,i){m+="in"===o?.01:-.01,m=Math.max(0,m),m=Math.min(1,m),m=Math.round(100*m)/100,r._webAudio?("undefined"==typeof n&&(r._volume=m),i._volume=m):r.volume(m,t,!0),m===e&&(clearInterval(i._interval),i._interval=null,r.volume(m,t),r._emit("fade",t))}.bind(r,c[u],p),l)}}return r},_stopFade:function(t){var e=this,i=e._soundById(t);return i&&i._interval&&(e._webAudio&&i._node.gain.cancelScheduledValues(a.ctx.currentTime),clearInterval(i._interval),i._interval=null,e._emit("fade",t)),e},loop:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._loop;if(1===r.length){if("boolean"!=typeof r[0])return i=n._soundById(parseInt(r[0],10)),!!i&&i._loop;t=r[0],n._loop=t}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var s=n._getSoundIds(e),o=0;o<s.length;o++)i=n._soundById(s[o]),i&&(i._loop=t,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t));return n},rate:function(){var t,e,i=this,n=arguments;if(0===n.length)e=i._sounds[0]._id;else if(1===n.length){var r=i._getSoundIds(),s=r.indexOf(n[0]);s>=0?e=parseInt(n[0],10):t=parseFloat(n[0])}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));var o;if("number"!=typeof t)return o=i._soundById(e),o?o._rate:i._rate;if("loaded"!==i._state)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,n)}}),i;"undefined"==typeof e&&(i._rate=t),e=i._getSoundIds(e);for(var h=0;h<e.length;h++)if(o=i._soundById(e[h])){o._rateSeek=i.seek(e[h]),o._playStart=i._webAudio?a.ctx.currentTime:o._playStart,o._rate=t,i._webAudio&&o._node&&o._node.bufferSource?o._node.bufferSource.playbackRate.value=t:o._node&&(o._node.playbackRate=t);var l=i.seek(e[h]),c=(i._sprite[o._sprite][0]+i._sprite[o._sprite][1])/1e3-l,u=1e3*c/Math.abs(o._rate);!i._endTimers[e[h]]&&o._paused||(i._clearTimer(e[h]),i._endTimers[e[h]]=setTimeout(i._ended.bind(i,o),u)),i._emit("rate",o._id)}return i},seek:function(){var t,e,i=this,n=arguments;if(0===n.length)e=i._sounds[0]._id;else if(1===n.length){var r=i._getSoundIds(),s=r.indexOf(n[0]);s>=0?e=parseInt(n[0],10):(e=i._sounds[0]._id,t=parseFloat(n[0]))}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if("undefined"==typeof e)return i;if("loaded"!==i._state)return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var o=i._soundById(e);if(o){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var h=i.playing(e)?a.ctx.currentTime-o._playStart:0,l=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(l+h*Math.abs(o._rate))}return o._node.currentTime}var c=i.playing(e);c&&i.pause(e,!0),o._seek=t,o._ended=!1,i._clearTimer(e),c&&i.play(e,!0),!i._webAudio&&o._node&&(o._node.currentTime=t),i._emit("seek",e)}return i},playing:function(t){var e=this;if("number"==typeof t){var i=e._soundById(t);return!!i&&!i._paused}for(var n=0;n<e._sounds.length;n++)if(!e._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this,i=e._duration,n=e._soundById(t);return n&&(i=e._sprite[n._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++){e[i]._paused||(t.stop(e[i]._id),t._emit("end",e[i]._id)),t._webAudio||(e[i]._node.src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(a._canPlayEvent,e[i]._loadFn,!1)),delete e[i]._node,t._clearTimer(e[i]._id);var n=a._howls.indexOf(t);n>=0&&a._howls.splice(n,1)}var r=!0;for(i=0;i<a._howls.length;i++)if(a._howls[i]._src===t._src){r=!1;break}return c&&r&&delete c[t._src],t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var r=this,s=r["_on"+t];return"function"==typeof e&&s.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),r},off:function(t,e,i){var n=this,r=n["_on"+t],s=0;if(e){for(s=0;s<r.length;s++)if(e===r[s].fn&&i===r[s].id){r.splice(s,1);break}}else if(t)n["_on"+t]=[];else{var o=Object.keys(n);for(s=0;s<o.length;s++)0===o[s].indexOf("_on")&&Array.isArray(n[o[s]])&&(n[o[s]]=[])}return n},once:function(t,e,i){var n=this;return n.on(t,e,i,1),n},_emit:function(t,e,i){for(var n=this,r=n["_on"+t],s=r.length-1;s>=0;s--)r[s].id&&r[s].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(n,r[s].fn),0),r[s].once&&n.off(t,r[s].fn,r[s].id));return n},_loadQueue:function(){var t=this;if(t._queue.length>0){var e=t._queue[0];t.once(e.event,function(){t._queue.shift(),t._loadQueue()}),e.action()}return t},_ended:function(t){var e=this,i=t._sprite,n=!(!t._loop&&!e._sprite[i][2]);if(e._emit("end",t._id),!e._webAudio&&n&&e.stop(t._id,!0).play(t._id),e._webAudio&&n){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=a.ctx.currentTime;var r=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),r)}return e._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),a._autoSuspend()),e._webAudio||n||e.stop(t._id),e},_clearTimer:function(t){var e=this;return e._endTimers[t]&&(clearTimeout(e._endTimers[t]),delete e._endTimers[t]),e},_soundById:function(t){for(var e=this,i=0;i<e._sounds.length;i++)if(t===e._sounds[i]._id)return e._sounds[i];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new l(t)},_drain:function(){var t=this,e=t._pool,i=0,n=0;if(!(t._sounds.length<e)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&i++;for(n=t._sounds.length-1;n>=0;n--){if(i<=e)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),i--)}}},_getSoundIds:function(t){var e=this;if("undefined"==typeof t){for(var i=[],n=0;n<e._sounds.length;n++)i.push(e._sounds[n]._id);return i}return[t]},_refreshBuffer:function(t){var e=this;return t._node.bufferSource=a.ctx.createBufferSource(),t._node.bufferSource.buffer=c[e._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.value=t._rate,e},_cleanBuffer:function(t){var e=this;if(e._scratchBuffer){t.bufferSource.onended=null,t.bufferSource.disconnect(0);try{t.bufferSource.buffer=e._scratchBuffer}catch(t){}}return t.bufferSource=null,e}};var l=function(t){this._parent=t,this.init()};l.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=Math.round(Date.now()*Math.random()),e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,i=a._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node="undefined"==typeof a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),t._node.gain.setValueAtTime(i,a.ctx.currentTime),t._node.paused=!0,t._node.connect(a.masterGain)):(t._node=new Audio,t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(a._canPlayEvent,t._loadFn,!1),t._node.src=e._src,t._node.preload="auto",t._node.volume=i*a.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._muted=e._muted,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=Math.round(Date.now()*Math.random()),t},_errorListener:function(){var t=this;t._node.error&&4===t._node.error.code&&(a.noAudio=!0),t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorListener,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),e._autoplay&&e.play(),t._node.removeEventListener(a._canPlayEvent,t._loadFn,!1)}};var c={},u=function(t){var e=t._src;if(c[e])return t._duration=c[e].duration,void f(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);d(n.buffer,t)}else{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=function(){var e=(s.status+"")[0];return"0"!==e&&"2"!==e&&"3"!==e?void t._emit("loaderror",null,"Failed loading audio file with status: "+s.status+"."):void d(s.response,t)},s.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete c[e],t.load())},p(s)}},p=function(t){try{t.send()}catch(e){t.onerror()}},d=function(t,e){a.ctx.decodeAudioData(t,function(t){t&&e._sounds.length>0&&(c[e._src]=t,f(e,t))},function(){e._emit("loaderror",null,"Decoding audio data failed.")})},f=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),t._autoplay&&t.play()},m=function(){a.noAudio=!1;try{"undefined"!=typeof AudioContext?a.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?a.ctx=new webkitAudioContext:a.usingWebAudio=!1}catch(t){a.usingWebAudio=!1}if(!a.usingWebAudio)if("undefined"!=typeof Audio)try{var t=new Audio;"undefined"==typeof t.oncanplaythrough&&(a._canPlayEvent="canplay")}catch(t){a.noAudio=!0}else a.noAudio=!0;try{var t=new Audio;t.muted&&(a.noAudio=!0)}catch(t){}var e=/iP(hone|od|ad)/.test(a._navigator&&a._navigator.platform),i=a._navigator&&a._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=i?parseInt(i[1],10):null;if(e&&n&&n<9){var r=/safari/.test(a._navigator&&a._navigator.userAgent.toLowerCase());(a._navigator&&a._navigator.standalone&&!r||a._navigator&&!a._navigator.standalone&&!r)&&(a.usingWebAudio=!1)}a.usingWebAudio&&(a.masterGain="undefined"==typeof a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),a.masterGain.gain.value=1,a.masterGain.connect(a.ctx.destination)),a._setup()};i(15)&&(n=[],r=function(){return{Howler:a,Howl:h}}.apply(e,n),!(void 0!==r&&(t.exports=r))),"undefined"!=typeof e&&(e.Howler=a,e.Howl=h),"undefined"!=typeof window?(window.HowlerGlobal=o,window.Howler=a,window.Howl=h,window.Sound=l):"undefined"!=typeof s&&(s.HowlerGlobal=o,s.Howler=a,s.Howl=h,s.Sound=l)}(),!function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var i=e._howls.length-1;i>=0;i--)e._howls[i].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,i){var n=this;return n.ctx&&n.ctx.listener?(e="number"!=typeof e?n._pos[1]:e,i="number"!=typeof i?n._pos[2]:i,"number"!=typeof t?n._pos:(n._pos=[t,e,i],n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(t,e,i,n,r,s){var o=this;if(!o.ctx||!o.ctx.listener)return o;var a=o._orientation;return e="number"!=typeof e?a[1]:e,i="number"!=typeof i?a[2]:i,n="number"!=typeof n?a[3]:n,r="number"!=typeof r?a[4]:r,s="number"!=typeof s?a[5]:s,"number"!=typeof t?a:(o._orientation=[t,e,i,n,r,s],o.ctx.listener.setOrientation(t,e,i,n,r,s),o)},Howl.prototype.init=function(t){return function(e){var i=this;return i._orientation=e.orientation||[1,0,0],i._stereo=e.stereo||null,i._pos=e.pos||null,i._pannerAttr={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:0,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:"inverse",maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:1e4,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:"HRTF",refDistance:"undefined"!=typeof e.refDistance?e.refDistance:1,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:1},i._onstereo=e.onstereo?[{fn:e.onstereo}]:[],i._onpos=e.onpos?[{fn:e.onpos}]:[],i._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}}(Howl.prototype.init),Howl.prototype.stereo=function(e,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,i)}}),n;var r="undefined"==typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"==typeof i){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0]}for(var s=n._getSoundIds(i),o=0;o<s.length;o++){var a=n._soundById(s[o]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,r),"spatial"===r?a._panner.setPosition(e,0,0):a._panner.pan.value=e),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(e,i,n,r){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"pos",action:function(){s.pos(e,i,n,r)}}),s;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,"undefined"==typeof r){if("number"!=typeof e)return s._pos;s._pos=[e,i,n]}for(var o=s._getSoundIds(r),a=0;a<o.length;a++){var h=s._soundById(o[a]);if(h){if("number"!=typeof e)return h._pos;h._pos=[e,i,n],h._node&&(h._panner&&!h._panner.pan||t(h,"spatial"),h._panner.setPosition(e,i,n)),s._emit("pos",h._id)}}return s},Howl.prototype.orientation=function(e,i,n,r){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"orientation",action:function(){s.orientation(e,i,n,r)}}),s;if(i="number"!=typeof i?s._orientation[1]:i,n="number"!=typeof n?s._orientation[2]:n,"undefined"==typeof r){if("number"!=typeof e)return s._orientation;s._orientation=[e,i,n]}for(var o=s._getSoundIds(r),a=0;a<o.length;a++){var h=s._soundById(o[a]);if(h){if("number"!=typeof e)return h._orientation;h._orientation=[e,i,n],h._node&&(h._panner||(h._pos||(h._pos=s._pos||[0,0,-.5]),t(h,"spatial")),h._panner.setOrientation(e,i,n)),s._emit("orientation",h._id)}}return s},Howl.prototype.pannerAttr=function(){var e,i,n,r=this,s=arguments;if(!r._webAudio)return r;if(0===s.length)return r._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return n=r._soundById(parseInt(s[0],10)),n?n._pannerAttr:r._pannerAttr;e=s[0],"undefined"==typeof i&&(r._pannerAttr={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:r._coneOuterAngle,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:r._coneOuterGain,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:r._distanceModel,maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:r._maxDistance,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:r._panningModel,refDistance:"undefined"!=typeof e.refDistance?e.refDistance:r._refDistance,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:r._rolloffFactor})}else 2===s.length&&(e=s[0],i=parseInt(s[1],10));for(var o=r._getSoundIds(i),a=0;a<o.length;a++)if(n=r._soundById(o[a])){var h=n._pannerAttr;h={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:h.coneOuterAngle,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:h.coneOuterGain,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:h.distanceModel,maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:h.maxDistance,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:h.panningModel,refDistance:"undefined"!=typeof e.refDistance?e.refDistance:h.refDistance,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:h.rolloffFactor};var l=n._panner;l?(l.coneInnerAngle=h.coneInnerAngle,l.coneOuterAngle=h.coneOuterAngle,l.coneOuterGain=h.coneOuterGain,l.distanceModel=h.distanceModel,l.maxDistance=h.maxDistance,l.panningModel=h.panningModel,l.refDistance=h.refDistance,l.rolloffFactor=h.rolloffFactor):(n._pos||(n._pos=r._pos||[0,0,-.5]),t(n,"spatial"))}return r},Sound.prototype.init=function(t){return function(){var e=this,i=e._parent;e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,t.call(this),e._stereo?i.stereo(e._stereo):e._pos&&i.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,i=e._parent;return e._orientation=i._orientation,e._pos=i._pos,e._pannerAttr=i._pannerAttr,t.call(this)}}(Sound.prototype.reset);var t=function(t,e){e=e||"spatial","spatial"===e?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.panningModel=t._pannerAttr.panningModel,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.value=t._stereo),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id)}}()}).call(e,function(){return this}())},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,i){var n;n=function(t,e,n){var r=i(6);window.PIXI=r;var s=i(17),o=(i(32),i(9),i(25)),a=i(33),h=i(36),l=i(37),c=(i(40),i(62)),u=i(81),p=i(20),d=i(10),f=i(131),m=i(64),g=i(132),v=i(134),y=i(127),_=(i(23),i(60)),x=i(148);r.GC_MODES.DEFAULT=0;var b=function(){function t(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]}}var e={config:ASSET_URL+"json/config.json",stringsUrl:ASSET_URL+"json/strings.json",loaderScreen:h};s.call(this,e),this.safeSize={width:1136,height:640},this.maxSize={width:1200,height:740},this.translationLego=new x(this,e),this.preloader.addManifest(i(149),ASSET_URL),this.preloader.addManifest(i(150),ASSET_URL),this.preloader.addPixiAssets([ASSET_URL+"fnt/lego_font.xml"]),this.loader.addCSS(ASSET_URL+"css/fonts.css"),this.loader.addFonts(["arimobold"]),this.loader.addJson(ASSET_URL+"json/shopData.json","shopData"),this.loader.addJson(ASSET_URL+"json/levels.json","levels"),this.loader.addJson(ASSET_URL+"json/goals.json","goals");var n=t();window.badDevice=o.instance.iPad&&n&&n[0]<10,this.onSoundReady=new d,this.onSoundReady=new d,o.instance.useSM2?this.onSoundReady.add(this.loadSounds,this):this.loadSounds(),this.screenManager.defaultTransition=new AlphaTransition,this.onReady.add(this.onAppReady,this),this.startup()};b.prototype=Object.create(s.prototype),b.prototype.onPreload=function(){this.background=new y,y.instance=this.background,this.screenManager.container.addChild(this.background.backView),this.background.backView.alpha=0,TweenLite.to(this.background.backView,3.4,{alpha:1}),y.instance.update({x:-380,y:0,offsetBackground:{x:0,y:0}}),this.vig=r.Sprite.from(ASSET_URL+"img/preload/vignet.png"),this.vig.interactive=!1,this.vig.hitArea=new r.Rectangle,this.stage.addChild(this.vig),this.vig.blendMode=r.BLEND_MODES.MULTIPLY,r.isWebGL&&o.instance.desktop&&(this.screenManager.container.filters=null),this.resize(),this.flashEffect=new f(1e4,4e3),this.stage.addChild(this.flashEffect)},b.prototype.flash=function(){this.flashEffect.flash(0,1)},b.prototype.blastEffect=function(t){},b.prototype.onPreloadComplete=function(){var t=p.getJson("config").config;this.options.stringsUrl=t.STRINGS_PATH,s.prototype.onPreloadComplete.call(this)},b.prototype.onAppReady=function(){window.translations=this.translationLego.translations;var t=new r.Text("----SOMETEXT----",{font:"50px Ubuntu"});t.text="----SOMETEXT----2",this.stage.addChildAt(t,0),t.updateText(),u.instance=new u("com.lego.test"),u.instance.load(p.getJson("goals"),window.loadFromLegoUrl?p.getJson("strings_from_url"):p.getJson("appconfig").configuration.customvalues),m.instance.loadGame(),this.goals=u.instance,this.topMenu=new g(this),this.gameScreen=new c(this),this.screenManager.addScreen(this.gameScreen,"game"),this.stage.addChild(this.topMenu),this.overlayManager=new v(this),this.stage.addChild(this.overlayManager.view);var e=l.get_query("fastplay");"true"===e?(window.fastplay=!0,this.screenManager.gotoScreenByID("game")):(window.levelId=e,this.screenManager.gotoScreenByID("game")),this.background.show(),this.resize()},b.prototype.initTrackMan=function(t,e){_.init(t,e)},b.prototype.loadSounds=function(){a.sfx.addSound(ASSET_URL+"snd/ui_main_click","ui_main_click",{}),a.sfx.addSound(ASSET_URL+"snd/ui_rollover","ui_rollover",{}),a.sfx.addSound(ASSET_URL+"snd/achieve_get","achieve_get",{}),a.sfx.addSound(ASSET_URL+"snd/achieve_tick","achieve_tick",{}),a.sfx.addSound(ASSET_URL+"snd/bat_kill1","bat_kill1",{}),a.sfx.addSound(ASSET_URL+"snd/bat_kill2","bat_kill2",{}),a.sfx.addGroup(["bat_kill1","bat_kill2"],"bat_kill"),a.sfx.addSound(ASSET_URL+"snd/turbo_gate","turbo_gate",{}),a.sfx.addSound(ASSET_URL+"snd/player_die","player_die",{}),a.sfx.addSound(ASSET_URL+"snd/block_smash2","block_smash2",{}),a.sfx.addSound(ASSET_URL+"snd/block_smash3","block_smash3",{}),a.sfx.addSound(ASSET_URL+"snd/block_smash4","block_smash4",{}),a.sfx.addGroup(["block_smash2","block_smash3","block_smash4"],"block_smash"),a.sfx.addSound(ASSET_URL+"snd/squeak_fall1","squeak_fall1",{}),a.sfx.addSound(ASSET_URL+"snd/squeak_fall2","squeak_fall2",{}),a.sfx.addSound(ASSET_URL+"snd/squeak_fall3","squeak_fall3",{}),a.sfx.addGroup(["squeak_fall1","squeak_fall2","squeak_fall3"],"squeak_fall"),a.sfx.addSound(ASSET_URL+"snd/bounce_1_2","bounce_1_2",{}),a.sfx.addSound(ASSET_URL+"snd/bounce_3","bounce_3",{}),a.sfx.addSound(ASSET_URL+"snd/brick_drop","brick_drop",{}),a.sfx.addSound(ASSET_URL+"snd/brick_land_01","brick_land_01",{}),a.sfx.addSound(ASSET_URL+"snd/brick_land_02","brick_land_02",{}),a.sfx.addSound(ASSET_URL+"snd/brick_land_03","brick_land_03",{}),a.sfx.addSound(ASSET_URL+"snd/brick_land_04","brick_land_04",{}),a.sfx.addSound(ASSET_URL+"snd/brick_land_05","brick_land_05",{}),a.sfx.addGroup(["brick_land_01","brick_land_02","brick_land_03","brick_land_04","brick_land_05"],"brick_land"),a.sfx.addSound(ASSET_URL+"snd/landing_01","landing_01",{}),a.sfx.addSound(ASSET_URL+"snd/landing_02","landing_02",{}),a.sfx.addGroup(["landing_01","landing_02"],"landing"),a.sfx.addSound(ASSET_URL+"snd/stud_collect","stud_collect",{}),a.sfx.addSound(ASSET_URL+"snd/ui_main_click","ui_main_click",{}),a.sfx.addSound(ASSET_URL+"snd/ui_rollover","ui_rollover",{}),a.music.addSound(ASSET_URL+"snd/Shooting_Gallery_Music","Shooting_Gallery_Music",{volume:.2,loop:!0}),a.sfx.addSound(ASSET_URL+"snd/walking_loop","walking_loop",{loop:!0,volume:0})},b.prototype.resize=function(t,e){t=t||this.w,e=e||this.h,this.w=t,this.h=e;var i=1;o.instance.isMobile&&(i=window.devicePixelRatio?window.devicePixelRatio:window.screen.deviceXDPI/window.screen.logicalXDPI),i>2&&(i=2);var n=t/this.safeSize.width<e/this.safeSize.height?t/this.safeSize.width:e/this.safeSize.height,r=Math.min(this.maxSize.width*n,t),s=Math.min(this.maxSize.height*n,e);this.renderer.resize(r*i|0,s*i|0),this.view.style.width=r+"px",this.view.style.height=s+"px",this.view.style.left=t/2-r/2+"px",this.view.style.top=e/2-s/2+"px",this.screenManager.resize(r/n,s/n),this.background&&this.background.resize(r/n,s/n),this.overlayManager&&(this.overlayManager.resize(r/n,s/n),this.overlayManager.view.scale.set(n*i)),this.topMenu&&(this.topMenu.scale.set(n*i),this.topMenu.resize(r/n,s/n)),this.vig&&(this.vig.width=r*i,this.vig.height=s*i),this.screenManager.container.scale.set(n*i)},n.exports=b}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(18),o=i(22),a=i(9),h=i(25),l=i(26),c=i(28),u=i(29),p=i(10),d=(i(30),function(t){t=t||d.defaultOptions,this.options={};for(var e in d.defaultOptions)this.options[e]=t[e]||d.defaultOptions[e];this.setupPixi(),a.instance.start(),a.instance.add(this.update,this),this.screenManager=new o(null,300,300),this.preloader=new s,this.loader=new s,this.onReady=new p,this.options.orientationMode!==d.orientationModes.BOTH&&(this.orientationManager=new c(this.options.orientationMode)),this.stage.addChild(this.screenManager.container)});d.prototype.setupPixi=function(){var t=this.options;if(t.forceCanvas||h.instance.android&&!h.instance.chrome)this.renderer=new r.CanvasRenderer(t.width,t.height),this.renderer.clearBeforeRender=!0;else{var e={resolution:1,backgroundColor:t.backgroundColor};this.renderer=r.autoDetectRenderer(t.width,t.height,e)}window.WEBGL=r.isWebGL=this.renderer instanceof r.WebGLRenderer,window.renderer=this.renderer,this.view=this.renderer.view,this.stage=new r.Container,this.view.style.position="absolute",this.view.addEventListener("mousedown",function(){window.focus()},!0),r.stage=this.stage},d.prototype.update=function(){this.renderer.render(this.stage)},d.prototype.startup=function(){this.options.config&&this.preloader.addJson(this.options.config,"config"),this.preloader.onComplete.addOnce(this.onPreloadComplete,this),this.preloader.load()},d.prototype.onPreloadComplete=function(){this.translation=new u(this,this.options),this.loaderScreen=new this.options.loaderScreen(this),this.loaderScreen.onReady.addOnce(this.onLoaderScreenReady,this),this.loaderScreen.onComplete.addOnce(this.onLoaderScreenComplete,this),this.onPreload&&this.onPreload(),this.screenManager.addScreen(this.loaderScreen,"loader"),this.screenManager.gotoScreenByID("loader")},d.prototype.onLoaderScreenReady=function(){this.loader.onComplete.addOnce(this.onAssetsLoaded,this),this.loader.onProgress.add(this.onProgresss,this),this.loader.load()},d.prototype.onAssetsLoaded=function(){},d.prototype.onProgresss=function(t){this.loaderScreen.updateProgress(t)},d.prototype.onLoaderScreenComplete=function(){this.onReady.dispatch()},d.prototype.resize=function(t,e){this.orientationManager&&this.orientationManager.check(t,e),this.options.resizeMode===d.resizeModes.DEFUALT?(this.renderer.resize(t,e),this.view.style.width="auto",this.view.style.height="auto"):this["this"].options.resizeMode===d.resizeModes.CSS_RESIZE_PRESERVE_RATIO||this.options.resizeMode===d.resizeModes.CSS_RESIZE&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},d.resizeModes={DEFUALT:0,CSS_RESIZE_PRESERVE_RATIO:1,CSS_RESIZE:2},d.orientationModes={LANDSCAPE:0,PORTRAIT:1,BOTH:2},d.defaultOptions={width:800,height:600,forceCanvas:!1,backgroundColor:0,resizeMode:d.resizeModes.DEFUALT,orientationMode:d.orientationModes.LANDSCAPE,loaderScreen:l,config:null},n.exports=d}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(10),o=i(19),a=i(20),h=(i(21),function(){this.crossdomain=!1,window.XDomainRequest&&this.crossdomain?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=function(){},this.ajaxRequest.ontimeout=function(){},this.ajaxRequest.onprogress=function(){}):window.XMLHttpRequest&&(this.ajaxRequest=new window.XMLHttpRequest),this.ajaxRequest.onload=this._onFileLoaded.bind(this),this.ajaxRequest.onreadystatechange=function(t){},this.fileCount=0,this.filesToLoad=[],this.fontsToLoad=[],this.pixiAssetsToLoad=[],this.soundsToLoad=[],this.customToLoad=[],this.onComplete=new s,this.onProgress=new s});h.prototype.addFonts=function(t){return this.fontsToLoad=this.fontsToLoad.concat(t),this},h.prototype.addText=function(t,e){var e=e||o.basename(t,o.extname(t)),i={url:t,id:e,type:h.TEXT};return this.filesToLoad.push(i),this},h.prototype.addJson=function(t,e){var e=e||o.basename(t,o.extname(t)),i={url:t,id:e,type:h.JSON};return this.filesToLoad.push(i),this},h.prototype.addManifest=function(t,e){var i=t.map(function(t){return e+t});return this.addPixiAssets(i),this},h.prototype.addPixiAssets=function(t){return this.pixiAssetsToLoad=this.pixiAssetsToLoad.concat(t),this},h.prototype.addCSS=function(t){var e=document.createElement("link");return e.type="text/css",e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e),this},h.prototype.addCustom=function(t){var e={object:t,type:h.CUSTOM};return this.filesToLoad.push(e),this},h.prototype.load=function(){this._loadFonts()},h.prototype._loadFiles=function(){this.fileCount=0,this.filesToLoad.length?this._loadNextFile():this._loadPixiAssets()},h.prototype._loadNextFile=function(){var t=this.filesToLoad[this.fileCount];t.type===h.CUSTOM?(t.object.onLoaded.addOnce(this._onFileLoaded,this),t.object.load()):(this.ajaxRequest.open("GET",t.url,!0),this.ajaxRequest.send())},h.prototype._onFileLoaded=function(){var t=this.filesToLoad[this.fileCount];if(t.type===h.CUSTOM);else if(200!==this.ajaxRequest.status);else switch(t.type){case h.TEXT:var e=this.ajaxRequest.responseText;a.addText(e,t.id);break;case h.JSON:var i=JSON.parse(this.ajaxRequest.responseText);a.addJson(i,t.id)}this.fileCount++,this._onProgress(),this.fileCount===this.filesToLoad.length?this._loadPixiAssets():this._loadNextFile()},h.prototype._loadPixiAssets=function(){return 0===this.pixiAssetsToLoad.length?void this._onComplete():(this.pixiAssetLoader=new r.loaders.Loader,this.pixiAssetLoader.add(this.pixiAssetsToLoad),this.pixiAssetLoader.on("progress",this._onProgress,this),void this.pixiAssetLoader.load(this._onComplete.bind(this)))},h.prototype._loadFonts=function(){return 0===this.fontsToLoad.length?void this._loadFiles():(WebFont.load({custom:{families:this.fontsToLoad,urls:[ASSET_URL+"./css/fonts.css"]},active:function(){for(var t=0;t<this.fontsToLoad.length;t++){var e=new r.Text("cheeky",{font:"32px "+this.fontsToLoad[t]});e.updateText()}}.bind(this)}),void this._loadFiles())},h.prototype._onComplete=function(t,e){r.loadedResources=e,this.onProgress.dispatch(1),this.onComplete.dispatch()},h.prototype._onProgress=function(){var t=(this.filesToLoad.length+this.pixiAssetsToLoad.length,this.fileCount);this.pixiAssetLoader&&(t=this.pixiAssetLoader.progress),
this.onProgress.dispatch(.01*t)},h.TEXT=0,h.JSON=1,h.CUSTOM=2,n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){(function(t){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return r.exec(t).slice(1)};e.resolve=function(){for(var e="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var o=s>=0?arguments[s]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,r="/"===o.charAt(0))}return e=i(n(e.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),s="/"===o(t,-1);return t=i(n(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&s&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,i){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var r=n(t.split("/")),s=n(i.split("/")),o=Math.min(r.length,s.length),a=o,h=0;h<o;h++)if(r[h]!==s[h]){a=h;break}for(var l=[],h=a;h<r.length;h++)l.push("..");return l=l.concat(s.slice(a)),l.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=s(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},e.basename=function(t,e){var i=s(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){return s(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(e,i(8))},function(t,e,i){var n;n=function(t,e,i){var n=function(){this._json={},this._text={}};n.prototype.addJson=function(t,e){this._json[e]=t},n.prototype.addText=function(t,e){this._text[e]=t},n.prototype.getJson=function(t){return this._json[t]?this._json[t]:null},n.prototype.getText=function(t){if(this._text[t])return this._text[t]},i.exports=new n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e){!function(t,e,i){function n(t,e,i){return t.call.apply(t.bind,arguments)}function r(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function s(t,e,i){return s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?n:r,s.apply(null,arguments)}function o(t,e){this.J=t,this.t=e||t,this.C=this.t.document}function a(t,i,n){t=t.C.getElementsByTagName(i)[0],t||(t=e.documentElement),t&&t.lastChild&&t.insertBefore(n,t.lastChild)}function h(t,e){function i(){t.C.body?e():setTimeout(i,0)}i()}function l(t,e,i){e=e||[],i=i||[];for(var n=t.className.split(/\s+/),r=0;r<e.length;r+=1){for(var s=!1,o=0;o<n.length;o+=1)if(e[r]===n[o]){s=!0;break}s||n.push(e[r])}for(e=[],r=0;r<n.length;r+=1){for(s=!1,o=0;o<i.length;o+=1)if(n[r]===i[o]){s=!0;break}s||e.push(n[r])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function c(t,e){for(var i=t.className.split(/\s+/),n=0,r=i.length;n<r;n++)if(i[n]==e)return!0;return!1}function u(t){if("string"==typeof t.ma)return t.ma;var e=t.t.location.protocol;return"about:"==e&&(e=t.J.location.protocol),"https:"==e?"https:":"http:"}function p(t,e){var i=t.createElement("link",{rel:"stylesheet",href:e}),n=!1;i.onload=function(){n||(n=!0)},i.onerror=function(){n||(n=!0)},a(t,"head",i)}function d(e,i,n,r){var s=e.C.getElementsByTagName("head")[0];if(s){var o=e.createElement("script",{src:i}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&s.removeChild(o))},s.appendChild(o),t.setTimeout(function(){a||(a=!0,n&&n(Error("Script load timeout")))},r||5e3),o}return null}function f(t,e){this.X=t,this.fa=e}function m(t,e,i,n){this.c=null!=t?t:null,this.g=null!=e?e:null,this.A=null!=i?i:null,this.e=null!=n?n:null}function g(t){t=$.exec(t);var e=null,i=null,n=null,r=null;return t&&(null!==t[1]&&t[1]&&(e=parseInt(t[1],10)),null!==t[2]&&t[2]&&(i=parseInt(t[2],10)),null!==t[3]&&t[3]&&(n=parseInt(t[3],10)),null!==t[4]&&t[4]&&(r=/^[0-9]+$/.test(t[4])?parseInt(t[4],10):t[4])),new m(e,i,n,r)}function v(t,e,i,n,r,s,o,a){this.M=t,this.k=a}function y(t){this.a=t}function _(t){var e=w(t.a,/(iPod|iPad|iPhone|Android|Windows Phone|BB\d{2}|BlackBerry)/,1);return""!=e?(/BB\d{2}/.test(e)&&(e="BlackBerry"),e):(t=w(t.a,/(Linux|Mac_PowerPC|Macintosh|Windows|CrOS|PlayStation|CrKey)/,1),""!=t?("Mac_PowerPC"==t?t="Macintosh":"PlayStation"==t&&(t="Linux"),t):"Unknown")}function x(t){var e=w(t.a,/(OS X|Windows NT|Android) ([^;)]+)/,2);if(e||(e=w(t.a,/Windows Phone( OS)? ([^;)]+)/,2))||(e=w(t.a,/(iPhone )?OS ([\d_]+)/,2)))return e;if(e=w(t.a,/(?:Linux|CrOS|CrKey) ([^;)]+)/,1))for(var e=e.split(/\s/),i=0;i<e.length;i+=1)if(/^[\d\._]+$/.test(e[i]))return e[i];return(t=w(t.a,/(BB\d{2}|BlackBerry).*?Version\/([^\s]*)/,2))?t:"Unknown"}function b(t){var e=_(t),i=g(x(t)),n=g(w(t.a,/AppleWeb(?:K|k)it\/([\d\.\+]+)/,1)),r="Unknown",s=new m,s="Unknown",o=!1;return/OPR\/[\d.]+/.test(t.a)?r="Opera":-1!=t.a.indexOf("Chrome")||-1!=t.a.indexOf("CrMo")||-1!=t.a.indexOf("CriOS")?r="Chrome":/Silk\/\d/.test(t.a)?r="Silk":"BlackBerry"==e||"Android"==e?r="BuiltinBrowser":-1!=t.a.indexOf("PhantomJS")?r="PhantomJS":-1!=t.a.indexOf("Safari")?r="Safari":-1!=t.a.indexOf("AdobeAIR")?r="AdobeAIR":-1!=t.a.indexOf("PlayStation")&&(r="BuiltinBrowser"),"BuiltinBrowser"==r?s="Unknown":"Silk"==r?s=w(t.a,/Silk\/([\d\._]+)/,1):"Chrome"==r?s=w(t.a,/(Chrome|CrMo|CriOS)\/([\d\.]+)/,2):-1!=t.a.indexOf("Version/")?s=w(t.a,/Version\/([\d\.\w]+)/,1):"AdobeAIR"==r?s=w(t.a,/AdobeAIR\/([\d\.]+)/,1):"Opera"==r?s=w(t.a,/OPR\/([\d.]+)/,1):"PhantomJS"==r&&(s=w(t.a,/PhantomJS\/([\d.]+)/,1)),s=g(s),o="AdobeAIR"==r?2<s.c||2==s.c&&5<=s.g:"BlackBerry"==e?10<=i.c:"Android"==e?2<i.c||2==i.c&&1<i.g:526<=n.c||525<=n.c&&13<=n.g,new v(r,0,0,0,0,0,0,new f(o,536>n.c||536==n.c&&11>n.g))}function w(t,e,i){return(t=t.match(e))&&t[i]?t[i]:""}function T(t){this.la=t||"-"}function S(t,e){this.M=t,this.Y=4,this.N="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.N=i[1],this.Y=parseInt(i[2],10))}function E(t){return t.N+t.Y}function C(t){var e=4,i="n",n=null;return t&&((n=t.match(/(normal|oblique|italic)/i))&&n[1]&&(i=n[1].substr(0,1).toLowerCase()),(n=t.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?e=7:/[1-9]00/.test(n[1])&&(e=parseInt(n[1].substr(0,1),10)))),i+e}function M(t,e){this.d=t,this.p=t.t.document.documentElement,this.P=e,this.j="wf",this.h=new T("-"),this.ga=!1!==e.events,this.B=!1!==e.classes}function P(t){if(t.B){var e=c(t.p,t.h.e(t.j,"active")),i=[],n=[t.h.e(t.j,"loading")];e||i.push(t.h.e(t.j,"inactive")),l(t.p,i,n)}A(t,"inactive")}function A(t,e,i){t.ga&&t.P[e]&&(i?t.P[e](i.getName(),E(i)):t.P[e]())}function I(){this.w={}}function O(t,e){this.d=t,this.G=e,this.m=this.d.createElement("span",{"aria-hidden":"true"},this.G)}function R(t){a(t.d,"body",t.m)}function k(t){var e;e=[];for(var i=t.M.split(/,\s*/),n=0;n<i.length;n++){var r=i[n].replace(/['"]/g,"");-1==r.indexOf(" ")?e.push(r):e.push("'"+r+"'")}return e=e.join(","),i="normal","o"===t.N?i="oblique":"i"===t.N&&(i="italic"),"display:block;position:absolute;top:-999px;left:-999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+e+";"+("font-style:"+i+";font-weight:"+(t.Y+"00")+";")}function D(t,e,i,n,r,s,o,a){this.Z=t,this.ja=e,this.d=i,this.s=n,this.G=a||"BESbswy",this.k=r,this.I={},this.W=s||3e3,this.ba=o||null,this.F=this.D=null,t=new O(this.d,this.G),R(t);for(var h in tt)tt.hasOwnProperty(h)&&(e=new S(tt[h],E(this.s)),e=k(e),t.m.style.cssText=e,this.I[tt[h]]=t.m.offsetWidth);t.remove()}function L(t,e,i){for(var n in tt)if(tt.hasOwnProperty(n)&&e===t.I[tt[n]]&&i===t.I[tt[n]])return!0;return!1}function B(t){var e=t.D.m.offsetWidth,i=t.F.m.offsetWidth;e===t.I.serif&&i===t.I["sans-serif"]||t.k.fa&&L(t,e,i)?J()-t.na>=t.W?t.k.fa&&L(t,e,i)&&(null===t.ba||t.ba.hasOwnProperty(t.s.getName()))?N(t,t.Z):N(t,t.ja):F(t):N(t,t.Z)}function F(t){setTimeout(s(function(){B(this)},t),25)}function N(t,e){t.D.remove(),t.F.remove(),e(t.s)}function U(t,e,i,n){this.d=e,this.u=i,this.R=0,this.da=this.aa=!1,this.W=n,this.k=t.k}function G(t,e,i,n,r){if(i=i||{},0===e.length&&r)P(t.u);else for(t.R+=e.length,r&&(t.aa=r),r=0;r<e.length;r++){var o=e[r],a=i[o.getName()],h=t.u,c=o;h.B&&l(h.p,[h.h.e(h.j,c.getName(),E(c).toString(),"loading")]),A(h,"fontloading",c),h=null,h=new D(s(t.ha,t),s(t.ia,t),t.d,o,t.k,t.W,n,a),h.start()}}function j(t){0==--t.R&&t.aa&&(t.da?(t=t.u,t.B&&l(t.p,[t.h.e(t.j,"active")],[t.h.e(t.j,"loading"),t.h.e(t.j,"inactive")]),A(t,"active")):P(t.u))}function X(t){this.J=t,this.v=new I,this.oa=new y(t.navigator.userAgent),this.a=this.oa.parse(),this.T=this.U=0,this.Q=this.S=!0}function H(t,e,i,n,r){var s=0==--t.U;(t.Q||t.S)&&setTimeout(function(){G(e,i,n||null,r||null,s)},0)}function Y(t,e,i){this.O=t?t:e+et,this.q=[],this.V=[],this.ea=i||""}function W(t){this.q=t,this.ca=[],this.L={}}function V(t,e){this.a=new y(navigator.userAgent).parse(),this.d=t,this.f=e}function z(t,e){this.d=t,this.f=e,this.o=[]}function q(t,e){this.d=t,this.f=e,this.o=[]}function K(t,e){this.d=t,this.f=e,this.o=[]}function Z(t,e){this.d=t,this.f=e}var J=Date.now||function(){return+new Date};o.prototype.createElement=function(t,e,i){if(t=this.C.createElement(t),e)for(var n in e)e.hasOwnProperty(n)&&("style"==n?t.style.cssText=e[n]:t.setAttribute(n,e[n]));return i&&t.appendChild(this.C.createTextNode(i)),t};var $=/^([0-9]+)(?:[\._-]([0-9]+))?(?:[\._-]([0-9]+))?(?:[\._+-]?(.*))?$/;m.prototype.compare=function(t){return this.c>t.c||this.c===t.c&&this.g>t.g||this.c===t.c&&this.g===t.g&&this.A>t.A?1:this.c<t.c||this.c===t.c&&this.g<t.g||this.c===t.c&&this.g===t.g&&this.A<t.A?-1:0},m.prototype.toString=function(){return[this.c,this.g||"",this.A||"",this.e||""].join("")},v.prototype.getName=function(){return this.M};var Q=new v("Unknown",0,0,0,0,0,0,new f((!1),(!1)));y.prototype.parse=function(){var t;if(-1!=this.a.indexOf("MSIE")||-1!=this.a.indexOf("Trident/")){t=_(this);var e=g(x(this)),i=null,n=w(this.a,/Trident\/([\d\w\.]+)/,1),i=g(-1!=this.a.indexOf("MSIE")?w(this.a,/MSIE ([\d\w\.]+)/,1):w(this.a,/rv:([\d\w\.]+)/,1));""!=n&&g(n),t=new v("MSIE",0,0,0,0,0,0,new f("Windows"==t&&6<=i.c||"Windows Phone"==t&&8<=e.c,(!1)))}else if(-1!=this.a.indexOf("Opera"))t:if(t=g(w(this.a,/Presto\/([\d\w\.]+)/,1)),g(x(this)),null!==t.c||g(w(this.a,/rv:([^\)]+)/,1)),-1!=this.a.indexOf("Opera Mini/"))t=g(w(this.a,/Opera Mini\/([\d\.]+)/,1)),t=new v("OperaMini",0,0,0,_(this),0,0,new f((!1),(!1)));else{if(-1!=this.a.indexOf("Version/")&&(t=g(w(this.a,/Version\/([\d\.]+)/,1)),null!==t.c)){t=new v("Opera",0,0,0,_(this),0,0,new f(10<=t.c,(!1)));break t}t=g(w(this.a,/Opera[\/ ]([\d\.]+)/,1)),t=null!==t.c?new v("Opera",0,0,0,_(this),0,0,new f(10<=t.c,(!1))):new v("Opera",0,0,0,_(this),0,0,new f((!1),(!1)))}else/OPR\/[\d.]+/.test(this.a)?t=b(this):/AppleWeb(K|k)it/.test(this.a)?t=b(this):-1!=this.a.indexOf("Gecko")?(t="Unknown",e=new m,g(x(this)),e=!1,-1!=this.a.indexOf("Firefox")?(t="Firefox",e=g(w(this.a,/Firefox\/([\d\w\.]+)/,1)),e=3<=e.c&&5<=e.g):-1!=this.a.indexOf("Mozilla")&&(t="Mozilla"),i=g(w(this.a,/rv:([^\)]+)/,1)),e||(e=1<i.c||1==i.c&&9<i.g||1==i.c&&9==i.g&&2<=i.A),t=new v(t,0,0,0,_(this),0,0,new f(e,(!1)))):t=Q;return t},T.prototype.e=function(t){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.la)},S.prototype.getName=function(){return this.M},O.prototype.remove=function(){var t=this.m;t.parentNode&&t.parentNode.removeChild(t)};var tt={ra:"serif",qa:"sans-serif",pa:"monospace"};D.prototype.start=function(){this.D=new O(this.d,this.G),R(this.D),this.F=new O(this.d,this.G),R(this.F),this.na=J();var t=new S(this.s.getName()+",serif",E(this.s)),t=k(t);this.D.m.style.cssText=t,t=new S(this.s.getName()+",sans-serif",E(this.s)),t=k(t),this.F.m.style.cssText=t,B(this)},U.prototype.ha=function(t){var e=this.u;e.B&&l(e.p,[e.h.e(e.j,t.getName(),E(t).toString(),"active")],[e.h.e(e.j,t.getName(),E(t).toString(),"loading"),e.h.e(e.j,t.getName(),E(t).toString(),"inactive")]),A(e,"fontactive",t),this.da=!0,j(this)},U.prototype.ia=function(t){var e=this.u;if(e.B){var i=c(e.p,e.h.e(e.j,t.getName(),E(t).toString(),"active")),n=[],r=[e.h.e(e.j,t.getName(),E(t).toString(),"loading")];i||n.push(e.h.e(e.j,t.getName(),E(t).toString(),"inactive")),l(e.p,n,r)}A(e,"fontinactive",t),j(this)},X.prototype.load=function(t){this.d=new o(this.J,t.context||this.J),this.S=!1!==t.events,this.Q=!1!==t.classes;var e=new M(this.d,t),i=[],n=t.timeout;e.B&&l(e.p,[e.h.e(e.j,"loading")]),A(e,"loading");var r,i=this.v,a=this.d,h=[];for(r in t)if(t.hasOwnProperty(r)){var c=i.w[r];c&&h.push(c(t[r],a))}for(i=h,this.T=this.U=i.length,t=new U(this.a,this.d,e,n),n=0,r=i.length;n<r;n++)a=i[n],a.K(this.a,s(this.ka,this,a,e,t))},X.prototype.ka=function(t,e,i,n){var r=this;n?t.load(function(t,e,n){H(r,i,t,e,n)}):(t=0==--this.U,this.T--,t&&0==this.T?P(e):(this.Q||this.S)&&G(i,[],{},null,t))};var et="//fonts.googleapis.com/css";Y.prototype.e=function(){if(0==this.q.length)throw Error("No fonts to load!");if(-1!=this.O.indexOf("kit="))return this.O;for(var t=this.q.length,e=[],i=0;i<t;i++)e.push(this.q[i].replace(/ /g,"+"));return t=this.O+"?family="+e.join("%7C"),0<this.V.length&&(t+="&subset="+this.V.join(",")),0<this.ea.length&&(t+="&text="+encodeURIComponent(this.ea)),t};var it={latin:"BESbswy",cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},nt={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},rt={i:"i",italic:"i",n:"n",normal:"n"},st=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;W.prototype.parse=function(){for(var t=this.q.length,e=0;e<t;e++){var i=this.q[e].split(":"),n=i[0].replace(/\+/g," "),r=["n4"];if(2<=i.length){var s,o=i[1];if(s=[],o)for(var o=o.split(","),a=o.length,h=0;h<a;h++){var l;if(l=o[h],l.match(/^[\w-]+$/)){l=st.exec(l.toLowerCase());var c=void 0;if(null==l)c="";else{if(c=void 0,c=l[1],null==c||""==c)c="4";else var u=nt[c],c=u?u:isNaN(c)?"4":c.substr(0,1);l=l[2],c=[null==l||""==l?"n":rt[l],c].join("")}l=c}else l="";l&&s.push(l)}0<s.length&&(r=s),3==i.length&&(i=i[2],s=[],i=i?i.split(","):s,0<i.length&&(i=it[i[0]])&&(this.L[n]=i))}for(this.L[n]||(i=it[n])&&(this.L[n]=i),i=0;i<r.length;i+=1)this.ca.push(new S(n,r[i]))}};var ot={Arimo:!0,Cousine:!0,Tinos:!0};V.prototype.K=function(t,e){e(t.k.X)},V.prototype.load=function(t){var e=this.d;"MSIE"==this.a.getName()&&1!=this.f.blocking?h(e,s(this.$,this,t)):this.$(t)},V.prototype.$=function(t){for(var e=this.d,i=new Y(this.f.api,u(e),this.f.text),n=this.f.families,r=n.length,s=0;s<r;s++){var o=n[s].split(":");3==o.length&&i.V.push(o.pop());var a="";2==o.length&&""!=o[1]&&(a=":"),i.q.push(o.join(a))}n=new W(n),n.parse(),p(e,i.e()),t(n.ca,n.L,ot)},z.prototype.H=function(t){var e=this.d;return u(this.d)+(this.f.api||"//f.fontdeck.com/s/css/js/")+(e.t.location.hostname||e.J.location.hostname)+"/"+t+".js"},z.prototype.K=function(t,e){var i=this.f.id,n=this.d.t,r=this;i?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[i]=function(t,i){for(var n=0,s=i.fonts.length;n<s;++n){var o=i.fonts[n];r.o.push(new S(o.name,C("font-weight:"+o.weight+";font-style:"+o.style)))}e(t)},d(this.d,this.H(i),function(t){t&&e(!1)})):e(!1)},z.prototype.load=function(t){t(this.o)},q.prototype.H=function(t){var e=u(this.d);return(this.f.api||e+"//use.typekit.net")+"/"+t+".js"},q.prototype.K=function(t,e){var i=this.f.id,n=this.d.t,r=this;i?d(this.d,this.H(i),function(t){if(t)e(!1);else{if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){t=n.Typekit.config.fn;for(var i=0;i<t.length;i+=2)for(var s=t[i],o=t[i+1],a=0;a<o.length;a++)r.o.push(new S(s,o[a]));try{n.Typekit.load({events:!1,classes:!1})}catch(h){}}e(!0)}},2e3):e(!1)},q.prototype.load=function(t){t(this.o)},K.prototype.K=function(t,e){var i=this,n=i.f.projectId,r=i.f.version;if(n){var s=i.d.t;d(this.d,i.H(n,r),function(r){if(r)e(!1);else{if(s["__mti_fntLst"+n]&&(r=s["__mti_fntLst"+n]()))for(var o=0;o<r.length;o++)i.o.push(new S(r[o].fontfamily));e(t.k.X)}}).id="__MonotypeAPIScript__"+n}else e(!1)},K.prototype.H=function(t,e){var i=u(this.d),n=(this.f.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return i+"//"+n+"/"+t+".js"+(e?"?v="+e:"")},K.prototype.load=function(t){t(this.o)},Z.prototype.load=function(t){var e,i,n=this.f.urls||[],r=this.f.families||[],s=this.f.testStrings||{};for(e=0,i=n.length;e<i;e++)p(this.d,n[e]);for(n=[],e=0,i=r.length;e<i;e++){var o=r[e].split(":");if(o[1])for(var a=o[1].split(","),h=0;h<a.length;h+=1)n.push(new S(o[0],a[h]));else n.push(new S(o[0]))}t(n,s)},Z.prototype.K=function(t,e){return e(t.k.X)};var at=new X(this);at.v.w.custom=function(t,e){return new Z(e,t)},at.v.w.fontdeck=function(t,e){return new z(e,t)},at.v.w.monotype=function(t,e){return new K(e,t)},at.v.w.typekit=function(t,e){return new q(e,t)},at.v.w.google=function(t,e){return new V(e,t)},this.WebFont||(this.WebFont={},this.WebFont.load=s(at.load,at),this.WebFontConfig&&at.load(this.WebFontConfig))}(this,document)},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=(i(23),i(24)),o=function(t,e,i,n){this.container=t||new r.Container,this.screens={},this.currentScreen,this.fading=!1,this.w=e||400,this.h=i||400,this.history=[],this.defaultTransition=n||new s,this.transition=this.defaultTransition,this.active=!1};o.constructor=o,o.prototype.gotoScreenByID=function(t,e){var i=this.screens[t];if(!i)throw new Error("screen not found with id : "+t);this.gotoScreen(i,e)},o.prototype.addScreen=function(t,e){this.screens[e]=t,t.id=e,t.screenManager=this},o.prototype.goBack=function(){this.history.pop();var t=this.history.pop();t&&this.gotoScreen(t)},o.prototype.getScreenId=function(t){for(var e in this.screens)if(this.screens[e]===t)return e;return null},o.prototype.gotoScreen=function(t,e){if(this.currentScreen!==t&&(this.history.push(t),this.nextScreen=t,!this.active)){this.active=!0,this.transition=t.transition||this.defaultTransition,this.transition.onResize&&this.transition.onResize(this.w,this.h);var i=this.currentScreen;this.nextScreen&&this.nextScreen.resize&&this.nextScreen.resize(this.w,this.h),this.currentScreen=t,this.transition.begin(this,i,this.nextScreen)}},o.prototype.onTransitionComplete=function(){this.active=!1,this.currentScreen!=this.nextScreen&&this.gotoScreen(this.nextScreen)},o.prototype.resize=function(t,e){this.w=t,this.h=e,this.transition.onResize&&this.transition.onResize(t,e),this.currentScreen&&this.currentScreen.resize&&this.currentScreen.resize(t,e)},n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){AlphaTransition=function(){},AlphaTransition.constructor=AlphaTransition,AlphaTransition.prototype.begin=function(t,e,i){this.screenManager=t,this.currentScreen=e,this.nextScreen=i,this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.currentScreen,.4,{alpha:0,onComplete:this.onFadeout.bind(this)})):this.onFadeout()},AlphaTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen),this.currentScreen.alpha=1),this.nextScreen.alpha=0,this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),TweenLite.to(this.nextScreen,.4,{alpha:1,onComplete:this.onFadein.bind(this)}),this.screenManager.container.addChild(this.nextScreen)},AlphaTransition.prototype.onFadein=function(){this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.onTransitionComplete()},AlphaTransition.prototype.resize=function(t,e){this.w=t,this.h=e},i.exports=AlphaTransition}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){ColorTransition=function(){this.colorRect=(new PIXI.Graphics).beginFill(0).drawRect(0,0,2e3,1e3),this.colorRect.alpha=0},ColorTransition.constructor=ColorTransition,ColorTransition.prototype.begin=function(t,e,i){this.screenManager=t,this.currentScreen=e,this.nextScreen=i,this.screenManager.container.addChild(this.colorRect),this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.colorRect,.4,{alpha:1,onComplete:this.onFadeout.bind(this)})):this.onFadeout()},ColorTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen),this.currentScreen.alpha=1),this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),this.screenManager.container.addChild(this.nextScreen),this.screenManager.container.addChild(this.colorRect),TweenLite.to(this.colorRect,.4,{alpha:0,onComplete:this.onFadein.bind(this)})},ColorTransition.prototype.onFadein=function(){this.screenManager.container.removeChild(this.colorRect),this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.onTransitionComplete()},ColorTransition.prototype.resize=function(t,e){this.w===t&&this.h===e||(this.w=t,this.h=e,this.colorRect.scale.x=t/100,this.colorRect.scale.y=e/100)},i.exports=ColorTransition}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){Device=function(){this.arora=!1,this.chrome=!1,this.epiphany=!1,this.firefox=!1,this.mobileSafari=!1,this.ie=!1,this.ieVersion=0,this.trident=!1,this.tridentVersion=0,this.midori=!1,this.opera=!1,this.safari=!1,this.silk=!1,this.webApp=!1,this.cocoonJS=!1,this.android=!1,this.chromeOS=!1,this.iOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.desktop=!1,this.pixelRatio=0,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.blob=!1,this.canvas=!1,this.localStorage=!1,this.file=!1,this.fileSystem=!1,this.webGL=!1,this.worker=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1;var t=navigator.userAgent;this._checkBrowser(t),this._checkOS(t),this._checkDevice(t),this._checkAudio(),this._checkFeatures(),this._checkIsMobile(),this._checkIsTouch()},Device.prototype._checkBrowser=function(t){/Arora/.test(t)?this.arora=!0:/Opera|OPR|op/.test(t)?(this.opera=!0,this.chrome=!1):/Chrome/.test(t)?this.chrome=!0:/Epiphany/.test(t)?this.epiphany=!0:/Firefox/.test(t)?this.firefox=!0:/Mobile Safari/.test(t)?this.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)||navigator.userAgent.match(/Trident.*rv[ :]*11\./)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(t)?this.midori=!0:/Safari/.test(t)?this.safari=!0:/\bSilk\b/.test(t)?this.silk=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(this.ie=!0,this.trident=!0,this.tridentVersion=parseInt(RegExp.$1,10),this.ieVersion=parseInt(RegExp.$3,10)),navigator.standalone&&(this.webApp=!0),navigator.isCocoonJS&&(this.cocoonJS=!0)},Device.prototype._checkOS=function(t){/Android/.test(t)?this.android=!0:/CrOS/.test(t)?this.chromeOS=!0:/iP[ao]d|iPhone/i.test(t)?(this.iOS=!0,this.iOS_version=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1):/Linux/.test(t)?this.linux=!0:/Mac OS/.test(t)?this.macOS=!0:/Windows/.test(t)&&(this.windows=!0),(this.windows||this.macOS||this.linux||this.chromeOS)&&(this.desktop=!0)},Device.prototype._checkDevice=function(){this.pixelRatio=window.devicePixelRatio||1,this.iPhone=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1,this.iPhone4=2===this.pixelRatio&&this.iPhone,this.iPhone4&&(this.iPhone4=480==window.screen.height&&320==window.screen.width||480==window.screen.width&&320==window.screen.height),this.iPad=navigator.userAgent.toLowerCase().indexOf("ipad")!==-1},Device.prototype._checkFeatures=function(){"undefined"!=typeof window.Blob&&(this.blob=!0),this.canvas=!!window.CanvasRenderingContext2D;try{this.localStorage=!!localStorage.getItem}catch(t){this.localStorage=!1}this.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),this.fileSystem=!!window.requestFileSystem,this.webGL=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}(),(this.android||this.ie)&&(this.webGL=!1),this.worker=!!window.Worker,("ontouchstart"in document.documentElement||window.navigator.msPointerEnabled)&&(this.touch=!0)},Device.prototype._checkAudio=function(){this.audioData=!!window.Audio,this.webaudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),e=!1;try{(e=!!t.canPlayType)&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.ogg=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(this.mp3=!0),t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(this.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(this.m4a=!0))}catch(i){}},Device.prototype._checkIsMobile=function(){var t=!1;!function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),this.isMobile=t,this.mobile=t},Device.prototype._checkIsTouch=function(){this.isTouch="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},Device.prototype.getInfo=function(){var t="DEVICE OUTPUT\n\n";return t+="---\n",t+="Browser Info :: \n",t+="Arora : "+this.arora+"\n",t+="Chrome : "+this.chrome+"\n",t+="Epiphany : "+this.epiphany+"\n",t+="Firefox : "+this.firefox+"\n",t+="Mobile Safari : "+this.mobileSafari+"\n",t+="IE : "+this.ie,t+=this.ie?" (Version "+this.ieVersion+")\n":"\n",t+="Midori : "+this.midori+"\n",t+="Opera : "+this.opera+"\n",t+="Safari : "+this.safari+"\n",t+="Web App : "+this.webApp+"\n",t+="CocoonJS : "+this.cocoonJS+"\n",t+="Android : "+this.android+"\n",t+="---\n",t+="Operating System :: \n",t+="Chrome OS : "+this.chromeOS+"\n",t+="iOS : "+this.iOS+"\n",t+="Linux : "+this.linux+"\n",t+="Mac OS : "+this.macOS+"\n",t+="Windows : "+this.windows+"\n",t+="Desktop : "+this.desktop+"\n",t+="---\n",t+="Device Type : \n",t+="Pixel Ratio : "+this.pixelRatio+"\n",t+="iPhone : "+this.iPhone+"\n",t+="iPhone 4 : "+this.iPhone4+"\n",t+="iPad : "+this.iPad+"\n",t+="---\n",t+="Features :: \n",t+="Blob : "+this.blob+"\n",t+="Canvas : "+this.canvas+"\n",t+="LocalStorage : "+this.localStorage+"\n",t+="File : "+this.file+"\n",t+="File System : "+this.fileSystem+"\n",t+="WebGL : "+this.webGL+"\n",t+="Workers : "+this.worker+"\n",t+="---\n",t+="Audio :: \n",t+="AudioData : "+this.audioData+"\n",t+="WebAudio : "+this.webAudio+"\n",t+="Supports .ogg : "+this.ogg+"\n",t+="Supports Opus : "+this.opus+"\n",t+="Supports .mp3 : "+this.mp3+"\n",t+="Supports .wav : "+this.wav+"\n",t+="Supports .m4a : "+this.m4a+"\n",t+="Supports .webm : "+this.webm},Object.defineProperty(Device.prototype,"ie9",{get:function(){return this.ie&&9===this.ieVersion}}),Object.defineProperty(Device.prototype,"useSM2",{get:function(){return this.ie||this.opera}}),Device.instance=new Device,i.exports=Device}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(9),o=i(27),a=i(10),h=function(t){r.Container.call(this),this.app=t,this.easeLoad=0,this.targetLoad=0,this.onReady=new a,this.onComplete=new a,this.initLoader()};h.prototype=Object.create(r.Container.prototype),h.prototype.initLoader=function(){s.instance.add(this.update,this),this.resize(this.w,this.h),o.wait(this.showLoader.bind(this))},h.prototype.showLoader=function(){this.onReady.dispatch()},h.prototype.update=function(){this.easeLoad+=.3*(this.targetLoad-this.easeLoad),this.easeLoad>.99&&(this.easeLoad=1,s.instance.remove(this.update,this),this.onComplete.dispatch())},h.prototype.updateProgress=function(t){this.targetLoad=t},h.prototype.onHide=function(){s.instance.remove(this.update,this)},h.prototype.resize=function(t,e){this.w=t,this.h=e,this.barBg},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){var n=function(){this.updateBind=this.update.bind(this),this.waits=[]};n.prototype.wait=function(t,e){var i={callback:t,count:e||2};this.waits.push(i),requestAnimationFrame(this.updateBind)},n.prototype.update=function(){for(var t=this.waits.length-1;t>=0;t--){var e=this.waits[t];e.count--,e.count<=0&&(e.callback(),this.waits.splice(t,1))}this.waits.length>0&&requestAnimationFrame(this.updateBind)},i.exports=new n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(9),s=i(25),o=i(10),a=(i(17),function(t){if(this.mode=t,this.onRotationChanged=new o,this.rotationWarning=!0,this.orientation,this.rotateScreen=document.createElement("div"),this.rotateScreen.style.backgroundPosition="50% 50%",this.rotateScreen.style.backgroundColor="#3b3b3b",this.rotateScreen.style.backgroundRepeat="no-repeat",this.rotateScreen.style.position="absolute",
this.rotateScreen.style.backgroundSize="cover",this.rotateScreen.style.top="0",this.rotateScreen.style.left="0",this.rotateScreen.style.bottom="0",this.rotateScreen.style.right="0",this.rotateScreen.style.zIndex=1e7,this.rotateScreen.style.display="none",this.rotateScreen.height="100%",this.rotateScreen.width="100%",this.changeRotationImage(ASSET_URL+"img/orientation_iphone.png"),s.instance.iPad&&this.changeRotationImage(ASSET_URL+"img/orientation_ipad.png"),document.body.appendChild(this.rotateScreen),s.instance.firefox){var e=window.matchMedia("(orientation: portrait)");e.addListener(this.checkOrientationChangesFirefox.bind(this))}this.supportsOrientationChange="onorientationchange"in window,this.supportsOrientationChange&&(this.orientation=window.orientation,window.addEventListener("orientationchange",this.checkOrientationChanges.bind(this),!1),this.checkOrientationChanges()),this.supportsOrientationEvent="DeviceOrientationEvent"in window});a.prototype.constructor=a,a.prototype.checkOrientationResize=function(t){},a.prototype.changeRotationImage=function(t){this.rotateScreen.style.backgroundImage="url("+t+")"},a.prototype.checkOrientationChangesFirefox=function(){var t=screen.orientation||screen.mozOrientation||screen.msOrientation;"landscape-primary"===t?this.orientation=90:"landscape-secondary"===t&&(this.orientation=-90),this.onRotationChanged.dispatch(this.orientation)},a.prototype.checkOrientationChanges=function(){this.orientation=window.orientation,this.onRotationChanged.dispatch(window.orientation),0===this.orientation?(r.instance.stop(),this.rotateScreen.style.display="block"):(r.instance.start(),this.rotateScreen.style.display="none")},a.prototype.check=function(t,e){if(!s.instance.desktop){var i=0===this.mode?t<e:t>e;i?(r.instance.stop(),this.rotateScreen.style.display="block"):(r.instance.start(),this.rotateScreen.style.display="none")}},a.prototype.updateDeviceOrientation=function(t){this.alpha=t.alpha,this.beta=t.beta,this.gamma=t.gamma},n.exports=a}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(20),s=function(t,e){this.debug=e.debug||!1,this.app=t,this.app.loader.addJson(e.stringsUrl||ASSET_URL+"json/strings.json","strings"),this.app.loader.onComplete.addOnce(this.onLoaderComplete,this)};s.prototype.constructor=s,s.prototype.onLoaderComplete=function(){if(window.translations=r.getJson("strings").strings,this.debug)for(var t in window.translations)window.translations[t]+=window.translations[t]},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;!function(r){var s=function(t){return this instanceof s?s.methods.initialize(t):new s(t)},o=window.devicePixelRatio||1,a={WIDTH:80*o,HEIGHT:50*o,FRAMES:{WIDTH:74*o,HEIGHT:32*o,X:3*o,Y:15*o},TEXT:{HEIGHT:8*o,X:75*o,Y:10*o}},h={FPS:{DATAS:"#1AFFFF",FRAMES:"#1B314C",BACKGROUND:"#1A1A38"},MS:{DATAS:"#1AFF1A",FRAMES:"#1B4C1B",BACKGROUND:"#1A381A"},MB:{DATAS:"#FF1A94",FRAMES:"#4C1B34",BACKGROUND:"#381A29"},PING:{DATAS:"#FFFFFF",FRAMES:"#555555",BACKGROUND:"#222222"}},l={FPS:0,MS:1,MB:2,PING:3},c=void 0!=window.performance&&void 0!=window.performance.memory&&void 0!=window.performance.memory.usedJSHeapSize;s.methods={initialize:function(t){return this.mode=l.FPS,this.realTime=t||!1,this.frameTime=0,this.beginTime=0,this.endTime=0,this.isPinging=!1,this.beginPinging=0,this.endPinging=0,this.fps={value:0,current:0,min:1/0,max:-(1/0),array:new Array(a.FRAMES.WIDTH)},this.ms={value:0,current:0,min:1/0,max:-(1/0),array:new Array(a.FRAMES.WIDTH)},this.mb={value:0,current:0,min:1/0,max:-(1/0),array:new Array(a.FRAMES.WIDTH)},this.ping={value:0,current:0,min:1/0,max:-(1/0),array:new Array(a.FRAMES.WIDTH)},this.domElement=document.createElement("canvas"),this.domElement.className="statsjs",this.domElement.width=a.WIDTH,this.domElement.height=a.HEIGHT,this.domElement.style.width=a.WIDTH/o+"px",this.domElement.style.height=a.HEIGHT/o+"px",this.domElement.addEventListener("click",function(t){this.switchMode()}.bind(this),!1),this.context=this.domElement.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.context.font="bold "+a.TEXT.HEIGHT+"px sans-serif",this.context.textAlign="right",this},switchMode:function(){this.mode==l.FPS?this.mode=l.MS:this.mode==l.MS?1==c?this.mode=l.MB:this.mode=l.PING:this.mode==l.MB?this.mode=l.PING:this.mode==l.PING&&(this.mode=l.FPS),this.draw()},begin:function(){this.beginTime=window.performance.now()},end:function(){var t=window.performance.now(),e=t-this.frameTime;if(this.endTime=t,this.fps.current++,this.fps.max=Math.max(this.fps.current,this.fps.max),this.ms.current=(this.endTime-this.beginTime).toFixed(0),this.ms.min=Math.min(this.ms.current,this.ms.min),this.ms.max=Math.max(this.ms.current,this.ms.max),1==c&&(this.mb.current=Math.round(9.54e-7*window.performance.memory.usedJSHeapSize),this.mb.min=Math.min(this.mb.current,this.mb.min),this.mb.max=Math.max(this.mb.current,this.mb.max)),1==this.realTime&&(this.fps.value=this.fps.current,this.fps.array[this.fps.array.length-1]=this.fps.value),e<1e3&&1==this.realTime)this.draw();else if(e>=1e3){this.fps.min=Math.min(this.fps.current,this.fps.min),this.frameTime=t,this.fps.value=this.fps.current,this.ms.value=this.ms.current,this.mb.value=this.mb.current,this.ping.value=this.ping.current;for(var i=0,n=a.FRAMES.WIDTH;i<n;i++)this.fps.array[i]=this.fps.array[i+1],this.ms.array[i]=this.ms.array[i+1],this.mb.array[i]=this.mb.array[i+1],this.ping.array[i]=this.ping.array[i+1];this.fps.array[this.fps.array.length-1]=this.fps.value,this.ms.array[this.ms.array.length-1]=this.ms.value,this.mb.array[this.mb.array.length-1]=this.mb.value,this.ping.array[this.ping.array.length-1]=this.ping.value,this.draw(),this.fps.current=0}},beginPing:function(){this.beginPinging=window.performance.now()},endPing:function(){this.endPinging=window.performance.now(),this.ping.current=parseInt(this.endPinging-this.beginPinging),this.ping.min=Math.min(this.ping.current,this.ping.min),this.ping.max=Math.max(this.ping.current,this.ping.max)},draw:function(){if(this.context.clearRect(0,0,a.WIDTH,a.HEIGHT),this.mode==l.FPS){this.context.fillStyle=h.FPS.BACKGROUND,this.context.fillRect(0,0,a.WIDTH,a.HEIGHT),this.context.fillStyle=h.FPS.FRAMES,this.context.fillRect(a.FRAMES.X,a.FRAMES.Y,a.FRAMES.WIDTH,a.FRAMES.HEIGHT),this.context.fillStyle=h.FPS.DATAS;var t=this.fps.min==1/0?"":this.fps.min,e=this.fps.max==-(1/0)?"":this.fps.max;1==this.realTime?this.context.fillText(this.fps.current+" FPS ("+t+"-"+e+")",a.TEXT.X,a.TEXT.Y):this.context.fillText(this.fps.value+" FPS ("+t+"-"+e+")",a.TEXT.X,a.TEXT.Y);for(var i=0,n=this.fps.array.length;i<n;i++){var r=this.fps.array[i]/this.fps.max*a.FRAMES.HEIGHT||0,s=a.FRAMES.X+i,o=a.FRAMES.Y+a.FRAMES.HEIGHT-r;this.context.fillRect(s,o,1,r)}}else if(this.mode==l.MS){this.context.fillStyle=h.MS.BACKGROUND,this.context.fillRect(0,0,a.WIDTH,a.HEIGHT),this.context.fillStyle=h.MS.FRAMES,this.context.fillRect(a.FRAMES.X,a.FRAMES.Y,a.FRAMES.WIDTH,a.FRAMES.HEIGHT),this.context.fillStyle=h.MS.DATAS;var t=this.ms.min==1/0?"":this.ms.min,e=this.ms.max==-(1/0)?"":this.ms.max;1==this.realTime?this.context.fillText(this.ms.current+" MS ("+t+"-"+e+")",a.TEXT.X,a.TEXT.Y):this.context.fillText(this.ms.value+" MS ("+t+"-"+e+")",a.TEXT.X,a.TEXT.Y);for(var i=0,n=this.ms.array.length;i<n;i++){var r=this.ms.array[i]/this.ms.max*a.FRAMES.HEIGHT||0,s=a.FRAMES.X+i,o=a.FRAMES.Y+a.FRAMES.HEIGHT-r;this.context.fillRect(s,o,1,r)}}else if(this.mode==l.MB){this.context.fillStyle=h.MB.BACKGROUND,this.context.fillRect(0,0,a.WIDTH,a.HEIGHT),this.context.fillStyle=h.MB.FRAMES,this.context.fillRect(a.FRAMES.X,a.FRAMES.Y,a.FRAMES.WIDTH,a.FRAMES.HEIGHT),this.context.fillStyle=h.MB.DATAS;var t=this.mb.min==1/0?"":this.mb.min,e=this.mb.max==-(1/0)?"":this.mb.max;1==this.realTime?this.context.fillText(this.mb.current+" MB ("+t+"-"+e+")",a.TEXT.X,a.TEXT.Y):this.context.fillText(this.mb.value+" MB ("+t+"-"+e+")",a.TEXT.X,a.TEXT.Y);for(var i=0,n=this.mb.array.length;i<n;i++){var r=this.mb.array[i]/this.mb.max*a.FRAMES.HEIGHT||0,s=a.FRAMES.X+i,o=a.FRAMES.Y+a.FRAMES.HEIGHT-r;this.context.fillRect(s,o,1,r)}}else if(this.mode==l.PING){this.context.fillStyle=h.PING.BACKGROUND,this.context.fillRect(0,0,a.WIDTH,a.HEIGHT),this.context.fillStyle=h.PING.FRAMES,this.context.fillRect(a.FRAMES.X,a.FRAMES.Y,a.FRAMES.WIDTH,a.FRAMES.HEIGHT),this.context.fillStyle=h.PING.DATAS;var t=this.ping.min==1/0?"":this.ping.min,e=this.ping.max==-(1/0)?"":this.ping.max;1==this.realTime?this.context.fillText(this.ping.current+" PING ("+t+"-"+e+")",a.TEXT.X,a.TEXT.Y):this.context.fillText(this.ping.value+" PING ("+t+"-"+e+")",a.TEXT.X,a.TEXT.Y);for(var i=0,n=this.ping.array.length;i<n;i++){var r=this.ping.array[i]/this.ping.max*a.FRAMES.HEIGHT||0,s=a.FRAMES.X+i,o=a.FRAMES.Y+a.FRAMES.HEIGHT-r;this.context.fillRect(s,o,1,r)}}}},s.methods.initialize.prototype=s.methods,i(31)instanceof Function&&void 0!=i(15)?(n=function(){return s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))):"undefined"!=typeof t&&t.exports?t.exports=s:void 0!=r&&(r.Stats=s)}(this||{})},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,i){var n;n=function(t,e,n){var r=i(9),s=i(25),o=(i(10),function(t){if(s.instance.isMobile&&s.instance.safari&&s.instance.webGL){var e=this.getSpec();e&&(this.activeCache=!1,this.height=e[0],window.addEventListener("resize",this.onResize.bind(this)),this.div=document.createElement("div"),this.div.style.backgroundColor="#000000",this.div.style.position="absolute",this.div.style.top="0",this.div.style.left="0",this.div.style.width="100%",this.div.style.height="9999999999999999px",this.image=new Image,this.image.src=ASSET_URL+"img/device/brim.jpg",this.image.style.position="absolute",this.image.style.top="-40px",this.image.width=500,this.div.appendChild(this.image),this.brimMode=!0,this.p=document.createElement("div"),this.p.innerHTML="oops! swipe up to keep playing!",this.p.style.position="absolute",this.p.style.top="100px",this.p.style.left=0,this.p.style.width="100%",this.p.style.fontSize="1.5rem",this.p.style.fontFamily="Exo2, sans-serif",this.p.style.color="white",this.p.style.textAlign="center",this.p.style.position="absolute",this.p.style.padding=0,document.body.appendChild(this.div),function(){var t;document.addEventListener("touchstart",function(e){this.brimMode&&(t=!0,e.preventDefault(),e.returnValue=!1)},!1),document.addEventListener("touchmove",function(e){this.brimMode&&(t&&(e.preventDefault(),e.returnValue=!1),t=!1)},!1)}(),this.onResize())}});o.prototype.getSpec=function(){for(var t=[[320,480,2,"iPhone 4"],[320,568,2,"iPhone 5 or 5s"],[375,667,2,"iPhone 6"],[414,736,3,"iPhone 6 plus"]],e=0;e<t.length;e++){var i=t[e],n=window.screen.height==i[0]&&window.screen.width==i[1]||window.screen.width==i[0]&&window.screen.height==i[1];if(n)return i}return null},o.prototype.showBrim=function(){this.div.style.visibility="visible",this.div.style.height="9999999999999999px",r.game&&(this.activeCache=r.game.active),r.game.stop()},o.prototype.showGame=function(){this.div.style.visibility="hidden",r.game&&this.activeCache&&r.game.start(),this.div.style.height=this.height+1+"px",window.scrollTo(0,0)},o.prototype.onResize=function(){window.innerHeight>window.innerWidth||window.innerHeight===this.height?this.showGame():this.showBrim(),this.image.width=window.innerWidth,window.scrollTo(0,0)},n.exports=new o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(25);if(r.instance.useSM2)var s=i(34);else var s=i(34);if(window.noSound)var o={play:function(){},stop:function(){},setVolume:function(){},getVolume:function(){},addSound:function(){}},s={music:o,sfx:o};n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(10),s=i(35),o=function(){this.disabled=!1,this.preload=!0,this.currentSound=null,this.sounds={},this.groups={},this.globalVolume=1,this.isMuted=!1,window.onfocus=this._onFocus.bind(this),this.onMuteToggle=new r};o.prototype._onFocus=function(){this.isMuted?this.mute():this.unmute()},o.prototype.addSound=function(t,e,i){if(!this.disabled&&!this.sounds[e]){i=i||{};var n=new Howl({src:[t+".mp3",t+".ogg"],autoplay:i.autoplay||!1,loop:i.loop||!1,volume:i.volume||1});n.realVolume=i.volume||1,this.sounds[e]=n}},o.prototype.addSounds=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];this.addSound(e+n,n)}},o.prototype.addGroup=function(t,e){if(!this.disabled&&!this.groups[e]){var i={index:0,type:0,sounds:t};this.groups[e]=i}},o.prototype.getSoundAtId=function(t){return this.sounds[t]},o.prototype.getSound=function(t){return this.currentSound},o.prototype.play=function(t,e){return this.disabled||!this.sounds[t]?void!this.sounds[t]:(e&&this.sounds[t].volume(e),this.sounds[t].play(),this.currentSound=this.sounds[t],this.currentSound)},o.prototype.fadeTo=function(t,e,i){if("undefined"==typeof i&&(i=2.5),"undefined"==typeof callback&&(callback=null),"undefined"!=typeof e){var n=this.sounds[t];n&&TweenLite.to(n,i,{_volume:e,onUpdate:this.actuallyChangeVolume.bind(this),onComplete:this.stopAndReset.bind(this),onCompleteParams:[t],onUpdateParams:["{self}",t]})}},o.prototype.actuallyChangeVolume=function(t,e){this.setVolume(e,t.target._volume)},o.prototype.stopAndReset=function(t){this.stop(t),this.setVolume(t,1),this.stop(t)},o.prototype.isPlaying=function(t){if(!this.disabled)return!this.sounds[t]._audioNode[0].paused},o.prototype.playGroup=function(t){if(!this.disabled&&this.groups[t]){var e=this.groups[t],i=Math.random()*e.sounds.length|0;this.sounds[e.sounds[i]].play(),this.currentSound=this.sounds[e.sounds[i]]}},o.prototype.setVolume=function(t,e){if(!this.disabled){var i=this.sounds[t];i.realVolume=e,i.volume(e*this.globalVolume)}},o.prototype.stop=function(t){!this.disabled&&this.sounds[t]&&this.sounds[t].stop()},o.prototype.stopAll=function(){if(!this.disabled)for(var t in this.sounds)this.sounds[t].stop()},o.prototype.setPlaybackSpeed=function(t,e){if(!this.disabled){var i=this.sounds[t];i._playbackSpeed=e;var n="music"==t?0:1;i._webAudio&&Howler._howls[n]._audioNode[0]&&(Howler._howls[n]._audioNode[0].bufferSource.playbackRate.value=e)}},o.prototype.getPlaybackSpeed=function(t){if(!this.disabled){var e=this.sounds[t];return e._playbackSpeed||1}},o.prototype.setGlobalVolume=function(t){this.globalVolume=t;for(var e in this.sounds){var i=this.sounds[e];i.volume(i.realVolume*t)}},o.prototype.mute=function(){this.isMuted=!0,Howler.mute(!0),this.onMuteToggle.dispatch(!0)},o.prototype.unmute=function(){this.isMuted=!1,Howler.mute(!1),this.onMuteToggle.dispatch(!1)},o.prototype.check=function(){this.lastSeen=Date.now();var t=function(){lastSeen=Date.now(),setTimeout(t,50)};t();var i=document.getElementById("music");i.addEventListener("timeupdate",function(){Date.now()-e.lastSeen>100&&this.pause()},!1)},o.sfx=new o,o.music=new o,o.sfx.disabled=!Howler.usingWebAudio,s.onHide.add(function(){Howler.mute(!0)}.bind(this),Howler),s.onShow.add(function(){o.sfx.isMuted||Howler.mute(!1)}.bind(this),Howler),n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(10),s=function(){"undefined"!=typeof document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):"undefined"!=typeof document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),this.onHide=new r,this.onShow=new r,this.init()};s.prototype.handleVisibilityChange=function(){document[this.hidden]?this.onHide.dispatch():this.onShow.dispatch()},s.prototype.init=function(){document.addEventListener(this.visibilityChange,this.handleVisibilityChange.bind(this),!1)},n.exports=new s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(9),o=(i(25),i(27)),a=(i(37),i(10)),h=i(38),l=i(39),c=function(t){this.app=t,r.Container.call(this),this.count=0,t.loader.onProgress.add(this.onProgress,this),this.easeLoad=0,this.targetLoad=0,this.onReady=new a,this.onComplete=new a,this.onAssetsLoaded(),h.init()};c.prototype=Object.create(r.Container.prototype),c.prototype.constructor=c,c.prototype.onShown=function(){},c.prototype.onAssetsLoaded=function(){this.container=new r.Container,this.rainbowContainer=new r.Container,window.badDevice||(this.rt=new r.RenderTexture.create(58,31),this.rtSprite=new r.Sprite.from(this.rt),this.rtSprite.anchor.set(.5),this.rtSprite.texture.baseTexture.scaleMode=1,this.rtSprite.scale.set(15),this.container.addChild(this.rtSprite),this.circleMask=new l,this.circleMask.scale.set(1,-1),this.circleMask.rotation=Math.PI/2,this.circleMask.y=40,this.circleMask.x=40,this.circleMask.ratio=0),this.rainbow=new r.Sprite.from(ASSET_URL+"img/preload/rainbow.png"),this.rainbow.texture.baseTexture.scaleMode=1,this.rainbowContainer.addChild(this.rainbow),window.badDevice?this.rainbow.visible=!1:(this.rainbow.mask=this.circleMask,this.rainbow.visible=!1,this.rainbowContainer.addChild(this.circleMask),this.circleMask.ratio=1),s.instance.add(this.update,this),this.addChild(this.container),this.scaleNumber=1.3,this.brick=new r.Sprite.from(ASSET_URL+"img/preload/barreloader.png"),this.brick.anchor.set(.5),this.label=new r.extras.BitmapText("0%",{font:"60px Ubuntu"}),this.label.anchor.set(.5),this.label.y=5,this.brick.addChild(this.label),this.addChild(this.brick),o.wait(this.showLoader.bind(this)),this.resize(this.w,this.h)},c.prototype.hideRainbow=function(){window.badDevice||(this.rtSprite.scale.x=-1*Math.abs(this.rtSprite.scale.x),TweenLite.to(this.circleMask,3,{ratio:0,onUpdate:function(){window.renderer.render(this.rainbowContainer,this.rt)}.bind(this)}))},c.prototype.showRainbow=function(){window.badDevice||(this.rtSprite.scale.x=Math.abs(this.rtSprite.scale.x),TweenLite.to(this.circleMask,3,{ratio:1,onUpdate:function(){window.renderer.render(this.rainbowContainer,this.rt)}.bind(this)}))},c.prototype.showLoader=function(){this.app.loader.load()},c.prototype.update=function(){window.badDevice||window.renderer.render(this.rainbowContainer,this.rt),this.count+=.02;var t=.3*(this.targetLoad-this.easeLoad);t=Math.min(t,.01),this.easeLoad+=t,this.label.text=Math.ceil(100*this.easeLoad)+"%",window.badDevice||(this.circleMask.ratio=this.easeLoad/2,this.rainbow.visible=this.circleMask.ratio>0),this.easeLoad>.99&&(s.instance.remove(this.update,this),this.onComplete.dispatch())},c.prototype.onProgress=function(t){this.targetLoad=t},c.prototype.onShow=function(){this.app.background.backView.addChildAt(this.container,1)},c.prototype.onHide=function(){s.instance.remove(this.update,this)},c.prototype.resize=function(t,e){this.w=t,this.h=e,this.container.x=t/2,this.container.y=e/2,this.brick.x=t/2,this.brick.y=e/2},n.exports=c}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s={};s.trimTexture=function(t,e,i,n,r){e=e||0,i=i||0,n=n||0,r=r||0;var s=t._frame;s.x+=e,s.y+=n,s.width-=e+i,s.height-=n+r,t.frame=s,t._updateUvs()},s.getTexturesFromFrames=function(t){for(var e=[],i=0;i<t.length;i++)e.push(new r.Texture.fromFrame(t[i]));return e},s.getTexturesFromImages=function(t){for(var e=[],i=0;i<t.length;i++)e.push(new r.Texture.fromImage(t[i]));return e},s.getTexturesFromFramesWithPrefix=function(t,e,i,n){var s=[];void 0==i&&(i=0);for(var o=0;o<e;o++){var a=o+i,h=t.replace("%%",a<10?"0"+a:a);if(n)var h=t.replace("%%",a);s.push(new r.Texture.fromFrame(h))}return s},s.formatTime=function(t){if(999999===t)return"00:00:00";var t=t/.06,e=t/60/1e3|0;t-=60*e*1e3;var i=t/1e3|0;t-=1e3*i;var n=t/10|0;return t-=10*n,(e<10?"0":"")+e+":"+(i<10?"0":"")+i+":"+(n<10?"0":"")+n},s.formatTimeSeconds=function(t){if(999999===t)return"00:00";var t=t/.06,e=t/60/1e3|0;t-=60*e*1e3;var i=t/1e3|0;return t-=1e3*i,(e<10?"0":"")+e+":"+(i<10?"0":"")+i},s.pad=function(t,e){var i="0000"+t;return i.substr(i.length-e)},s.shuffle=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t},s.isInArray=function(t,e){for(var i=t.length;i--;)if(t[i]===e)return!0;return!1},s.uniq=function(t,e){var i=[],n={};for(var r in t)n[t[r][e]]=t[r];for(r in n)i.push(n[r]);return i},s.formatScore=function(t){for(var e=t.toString().split(""),i="",n=e.length,r=n%3-1,s=0;s<n;s++)i+=e[s],(s-r)%3==0&&s!=n-1&&(i+=",");return i},s.formatNumber=function(t){if(ones=t%10,tens=Math.floor(t/10)%10,1==tens)return t+"th";switch(ones){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd";default:return t+"th"}},s.formatName=function(t){for(var e=t.split(" "),i=e.length-1;i>=0;i--)0!==e[i].length&&(wordArray=e[i].split(""),wordArray[0]=wordArray[0].toUpperCase(),e[i]=wordArray.join(""));return word=e.join(" "),word},window.console||(window.console={log:function(t){}}),s.get_query=function(t){for(var e=location.href,i=e.substring(e.indexOf("?")+1).split("&"),n=0,r={};n<i.length;n++)i[n]=i[n].split("="),r[i[n][0]]=decodeURIComponent(i[n][1]);return!!r.hasOwnProperty(t)&&r[t]},s.toCamelCase=function(t){var e=/\s([a-z]|[A-Z])/,i=t.trim();return i=i.toLowerCase(),i=i.replace(e,function(t,e){return e.toUpperCase()})},s.defaults=function(t,e){t=t||{};for(var i in e)i in t||(t[i]=e[i]);return t},s.fitText=s.resizeText=function(t,e,i,n){n=n||"w",t.scale.set(1),i&&(t.text=i);var r=0;r="w"===n?e/t.width:e/t.height,r>1&&(r=1),t.scale.set(r)},s.resizeMultipleTexts=function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n];r.scale.set(1)}var s=0;if(i)for(var n=0;n<t.length;n++){var r=t[n];r.text=i[n]}for(var n=0;n<t.length;n++){var r=t[n];r.width>s&&(s=r.width)}var o=e/s;o>1&&(o=1);for(var n=0;n<t.length;n++)t[n].scale.set(o)},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){var n=function(){};n.prototype.init=function(){window.FONTS_EXTENDED?(window.MAIN_FONT="Arial",window.SECONDARY_FONT="Arial"):(window.MAIN_FONT="Ubuntu",window.SECONDARY_FONT="Ubuntu")},i.exports=new n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=function(){r.Graphics.call(this),this.thickness=10,this.startRads=0,this.endRads=Math.PI,this.xRadius=100,this.yRadius=100,this._ratio=0,this.redraw()};s.prototype=Object.create(r.Graphics.prototype),Object.defineProperty(s.prototype,"ratio",{get:function(){return this._ratio},set:function(t){this._ratio=t,this._ratio>1?this._ratio=1:this._ratio<0&&(this._ratio=0),this.redraw()}}),s.prototype.redraw=function(){var t=this._ratio*Math.PI*2;t*=.3,this.clear(),this.beginFill(16711680);var e=8,i=2*Math.PI/e,n=Math.ceil(8*this._ratio);8*this._ratio%1;this.moveTo(0,0);for(var r=0;r<n;r++){var s=r*i;this.lineTo(Math.sin(s)*-100,Math.cos(s)*-100)}var s=this._ratio*Math.PI*2;this.lineTo(Math.sin(s)*-100,Math.cos(s)*-100),this.endFill()},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=(i(33),i(41),i(43)),o=i(10),a=i(46),h=i(59),l=i(42),c=i(9),u=i(60),p=i(61),d=function(t){r.Container.call(this),this.game=t,this.bg=new r.Sprite.from("background_logo.png"),this.bg.anchor.x=this.bg.anchor.y=.5,this.addChild(this.bg),this.logo=new r.Sprite.from(ASSET_URL+"img/translations/logo.png"),this.logo.anchor.x=this.logo.anchor.y=.5,this.logo.position.y=-30,this.bg.addChild(this.logo),this.cloud1=new r.Sprite.from("cloud2.png"),this.cloud1.anchor.x=this.cloud1.anchor.y=.5,this.cloud1.position.x=-this.bg.width/2,this.cloud1.position.y=-this.bg.height/4,this.bg.addChild(this.cloud1),this.cloud2=new r.Sprite.from("cloud1.png"),this.cloud2.anchor.x=this.cloud2.anchor.y=.5,this.cloud2.position.x=this.bg.width/2,this.cloud2.position.y=this.bg.height/4,this.bg.addChild(this.cloud2),this.onPlayPressed=new o,this.playButton=s.big("icon_play.png"),this.playButton.onPress.add(this.onPress,this),this.addChild(this.playButton.view),this.delayedCalls=new p};d.prototype=Object.create(r.Container.prototype),d.prototype.show=function(){this.hasBeenTracked||this.delayedCalls.add(this.trackWithDelay.bind(this),15),this.position.x=0,this.alpha=1,this.interactive=!0,this.interactiveChildren=!0,c.game.add(this.update,this)},d.prototype.hide=function(){Easings.to(this.position,1,{x:-1e3,onComplete:function(){this.alpha=0,this.position.x=0}.bind(this)}),this.interactive=!1,this.interactiveChildren=!1,c.game.remove(this.update,this)},d.prototype.trackWithDelay=function(){this.hasBeenTracked||(u.startGame(),this.hasBeenTracked=!0)},d.prototype.onPress=function(){this.onPlayPressed.dispatch(),this.hasBeenTracked||(u.startGame(),this.hasBeenTracked=!0),Device.instance.android&&(document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullScreen?document.body.webkitRequestFullScreen():document.body.requestFullScreen&&document.body.requestFullScreen())},d.prototype.reset=function(){this.tick=0,this.islandLeft=l.getObject(a),this.islandLeft.reset({frame:"plateform_left.png"}),this.islandLeft.position.x=-this.w+this.islandLeft.view.width-60,this.islandLeft.position.y=this.islandLeft.view.height/2+30,this.tree=l.getObject(h),this.tree.reset({frame:"foreground1.png"}),this.tree.position.x=-this.w/2,this.tree.position.y=310,this.game.world.add(this.islandLeft),this.game.world.add(this.tree),this.animateElements(),this.animateCamera(),this.animateLogo(),this.animateCloud(),this.animatePlayButton()},d.prototype.animatePlayButton=function(){this.playButton.view.alpha=0,Easings.to(this.playButton.view,.4,{alpha:1,delay:1,ease:Easings.easeOutCubic})},d.prototype.animateElements=function(){this.tree.position.y=500,Easings.to(this.tree.position,3,{y:270,ease:Easings.easeOutCubic}),this.islandLeft.position.x=-this.w,Easings.to(this.islandLeft.position,3,{x:-this.w+this.islandLeft.view.width-60,ease:Easings.easeOutCubic})},d.prototype.animateCamera=function(){this.game.world.view.camera.zoom=4,Easings.to(this.game.world.view.camera,2,{zoom:1,ease:Easings.easeOutCubic})},d.prototype.animateLogo=function(){this.bg.position.y=-500,Easings.to(this.bg.position,2,{y:this.h/2-this.bg.height/4+9,ease:Easings.elasticOutSoft})},d.prototype.animateCloud=function(){this.cloud1.ready=!1,this.cloud1.position.y=-200,this.cloud2.position.y=-200,Easings.to(this.cloud1.position,3,{y:-this.bg.height/4,ease:Easings.elasticOut,onComplete:function(){this.cloud1.ready=!0}.bind(this)}),Easings.to(this.cloud2.position,3.5,{y:this.bg.height/4,ease:Easings.elasticOut,onComplete:function(){this.cloud2.ready=!0}.bind(this)})},d.prototype.update=function(){this.tick++,this.cloud1.position.x=-this.bg.width/2+10*Math.cos(this.tick/40),this.cloud2.position.x=this.bg.width/2+10*Math.sin((this.tick+20)/40)},d.prototype.resize=function(t,e){this.w=t,this.h=e,this.playButton.view.x=t/2,this.playButton.view.y=e/2+this.bg.height/4-30,this.bg.position.x=t/2,this.bg.position.y=e/2-this.bg.height/4+9},d.prototype.destroy=function(){},n.exports=d}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(42),o=i(27),a=function(t,e,i,n){this.UID=a._UID++,this.view=i||null,this.body=n||null,this.signals={},this.position=new r.Point,this.view&&(this.position=this.view.position),this.position.x=0|t,this.position.y=0|e,this.world=null,this.canCollide=!0,this.collideWithSelf=!0,this.type=0,this.groups=[],this._TICK=-1,this.keepInBonus=!0,this._gc=!1,this.returnToPool=function(){s.returnObject(this)}.bind(this)};a.prototype.updateView=function(t){this.view=t},a.prototype.reset=function(t){},a.prototype.destroy=function(){this.world&&(this.world.remove(this),o.wait(this.returnToPool))},a._UID=0,a.mixin=function(t,e){e.call(t),Object.assign(t,e)},n.exports=a}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){var n=function(t){this.classType=t,this.pool=[]};n.constructor=n,n.prototype.prepopulate=function(t){for(var e=0;e<t;e++)this.pool.push(new this.classType)},n.prototype.get=n.prototype.getObject=function(){var t=this.pool.pop();return t||(t=new this.classType),t},n.prototype["return"]=n.prototype.returnObject=function(t){this.pool.indexOf(t)!==-1||this.pool.push(t)},Object.defineProperties(n.prototype,{total:{get:function(){return this.pool.length}},length:{get:function(){return this.pool.length}}}),n.pools=[],n.idGenerator=1,n.getPool=function(t){return t._CLASS_ID||(t._CLASS_ID=n.idGenerator++,n.pools[t._CLASS_ID]=new n(t)),n.pools[t._CLASS_ID]},n.get=n.getObject=function(t){t._CLASS_ID||(t._CLASS_ID=n.idGenerator++,n.pools[t._CLASS_ID]=new n(t));var e=n.pools[t._CLASS_ID].getObject();return e._CLASS_ID=t._CLASS_ID,e},n["return"]=n.returnObject=function(t){n.pools[t._CLASS_ID].returnObject(t)},i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(44)),s={small:function(t){var e=new r("small_button_in_game.png","small_button_in_game_rollover.png","small_button_in_game.png",t?t:null);return e.defaultScale=1,t&&(e.icon.pivot.x=8,e.icon.pivot.y=-2,e.offset.x=1,e.offset.y=2),e},tiny:function(t){var e=new r("small_button_menu.png","small_button_menu_rollover.png","small_button_menu.png",t?t:null);return e.defaultScale=1,t&&(e.icon.pivot.x=9,e.icon.pivot.y=-5,e.offset.x=2,e.offset.y=1),e},big:function(t){var e=new r("big_button.png","big_button_rollover.png","big_button.png",t?t:null);return e.defaultScale=1,e},close:function(t){var e=new r(null,null,null,t?t:null);return e.defaultScale=1,e}};n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(45),o=i(34),a=function(t,e,i,n){this.isOnlyIcon=!1;var o;t?(o=new r.Sprite.from(t),o.anchor.set(.5)):(o=new r.Container,this.isOnlyIcon=!0),s.call(this,o),this._view=o,this.normalTexture=t,this.downTexture=e||this.normalTexture,this.hoverTexture=i||this.normalTexture,this.offset=new r.Point(2,5),n&&(this.icon=new r.Sprite.from(n),this.icon.anchor.set(.5),this.addChild(this.icon),this.icon.position.x=10,this.icon.position.y=-8),this.onDown.add(this._onDown,this),this.onUp.add(this._onUp,this),this.onHover.add(this._onHover,this),this.onOut.add(this._onMouseOut,this)};a.prototype=Object.create(s.prototype),a.prototype._onDown=function(){this.isOnlyIcon||(this._view.texture=r.Texture.fromFrame(this.downTexture),o.sfx.play("ui_main_click"),this.icon&&(this.icon.position.x=10+this.offset.x,this.icon.position.y=-8+this.offset.y))},a.prototype._onHover=function(){this.isOnlyIcon||(this._view.texture=r.Texture.fromFrame(this.hoverTexture))},a.prototype._onMouseOut=function(){this.isOnlyIcon||(this._view.texture=r.Texture.fromFrame(this.normalTexture),this.icon&&(this.icon.position.x=10,this.icon.position.y=-8))},a.prototype._onUp=function(){this.isOnlyIcon||(this._view.texture=r.Texture.fromFrame(this.normalTexture),this.icon&&(this.icon.position.x=10,this.icon.position.y=-8))},a.prototype.setIcon=function(t){this.icon.texture=r.Texture.fromFrame(t)},a.prototype.setSize=function(t){this.defaultScale=t,this.overScale=1.1*t},a.prototype.fromFrames=function(t,e,i,n){return new a(r.Texture.fromFrame(t),r.Texture.fromFrame(e),r.Texture.fromFrame(i),n?r.Texture.fromFrame(n):null)},a.gameSpecificButton=function(t){var e=new a("bigbutton_up.png","bigbutton_down.png","bigbutton_over.png",t?t:null);return e.defaultScale=1,t&&(e.icon.pivot.y=13),e},n.exports=a}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(10),s=i(6),o=function(t){s.Container.call(this),this.view=this,t&&this.addChild(t),this.onPress=new r,this.onDown=new r,this.onUp=new r,this.onHover=new r,this.onOut=new r,this.mousedown=this.touchstart=this.onDown.dispatch.bind(this,this),this.mouseup=this.touchend=this.onUp.dispatch.bind(this,this),this.click=this.tap=this.onPress.dispatch.bind(this,this),this.mouseover=this.onHover.dispatch.bind(this,this),this.touchendoutside=this.mouseupoutside=this.mouseout=this.onOut.dispatch.bind(this,this),
this.onDown.add(this.down,this),this.onUp.add(this.up,this),this.onHover.add(this.hover,this),this.onOut.add(this.out,this),this._scale=new s.Point,this.enable()};o.prototype=Object.create(s.Container.prototype),o.prototype.constructor=o,o.prototype.setSize=function(t){switch(t){case"small":this.scale.set(.5);break;case"big":this.scale.set(2);break;default:this.scale.set(1)}},o.prototype.enable=function(){this.interactive=!0,this.buttonMode=!0},o.prototype.disable=function(){this.interactive=!1,this.buttonMode=!1},o.prototype.down=function(t,e){},o.prototype.up=function(t,e){},o.prototype.hover=function(t,e){},o.prototype.out=function(t,e){},o.prototype.show=function(){this.visible=!0,this.enable()},o.prototype.hide=function(){this.disable(),this.visible=!1},n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=i(47),a=i(58),h=function(){this.metaData={width:a.BLOCK_WIDTH,height:a.BLOCK_HEIGHT,frame:"floor_tile.png"},this.id=100*Math.random();var t=new o.CrashBody.fromRect(0,0,a.BLOCK_WIDTH,a.BLOCK_HEIGHT);t.type=o.CrashBody.STATIC,t.active=!1;var e=new r.Container;s.call(this,100,100,e,t),this.type=a.TYPES.FLOOR,this.body.position=this.position,this.name="block",this.rockHard=!0,this.top=new r.Sprite,this.view.addChild(this.top),this.groups=["Block","cull"]};h.prototype=Object.create(s.prototype),h.prototype.reset=function(t){for(var e in t)this.metaData[e]&&(this.metaData[e]=t[e]);this.id=100*Math.random(),this.top.texture=r.Texture.fromImage(this.metaData.frame),this.body.shape.width=this.metaData.width,this.body.shape.height=this.metaData.height,this.body.shape.y=5},h.prototype.resize=function(t,e){this.body.shape.width=t,this.body.shape.height=e},h.prototype.update=function(){},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){n.exports={Vector:i(48),CrashData:i(49),CrashBody:i(50),CrashWorld:i(52),CrashTests:i(57)}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){var n=function(t,e){this.x=t||0,this.y=e||0,this.id=n._UID++};n._UID=0,n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.plus=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.minus=function(t){return this.x-=t.x,this.y-=t.y,this},n.prototype.invert=function(t){return this.x*=-1,this.y*=-1,this},n.prototype.multiply=n.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},n.prototype.divideScalar=function(t){if(0===t)this.x=0,this.y=0;else{var e=1/t;this.x*=e,this.y*=e}return this},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y},n.prototype.length=function(t){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){return this.divideScalar(this.length())},n.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSq(t))},n.prototype.distanceToSq=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},n.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},n.prototype.setX=function(t){return this.x=t,this},n.prototype.setY=function(t){return this.y=t,this},n.prototype.setLength=function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},n.prototype.invert=function(t){return this.x*=-1,this.y*=-1,this},n.prototype.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},n.prototype.rad=function(){return Math.atan2(this.x,this.y)},n.prototype.deg=function(){return 180*this.rad()/Math.PI},n.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},n.prototype.rotate=function(t){var e=this.x;return this.x=this.x*Math.cos(t)-this.y*Math.sin(t),this.y=e*Math.sin(t)+this.y*Math.cos(t),this},n.projectPoint=function(t,e){var i=new n(0,0),r=n.project(t.clone().minus(i),e);return r.clone().plus(i)},n.project=function(t,e){var i=new n(0,0),r=t.dot(e);return i.x=r/(e.x*e.x+e.y*e.y)*e.x,i.y=r/(e.x*e.x+e.y*e.y)*e.y,i},n.prototype.constructor=n,i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){var n=function(t,e,i,n,r){this.object1=t,this.object2=e,this.penetration=i,this.projection=n,this.ignore=r||!1,this._key=null,this._tickId=null};n.prototype.getOtherObject=function(t){return t===this.object1?this.object2:this.object1},n.pool=[],i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(51),o=i(48),a=function(t){this.type=a.DYNAMIC,this.shape=t,this.passthrough=!1,this.currentSurface=null,this.position=new r.Point,this.timeScale=1,this.velocity=new o,this.acceleration=new o,this.bounce=0,this.maxSpeed=3,this.maxSpeedY=3,this.gravity=0,this.friction=.9,this.sleeping=!1,this.solid=!0,this.active=!0,this.remainder=0,this.flip=1};a.prototype.setMaxSpeed=function(t){this.maxSpeed=this.maxSpeedY=t},a.prototype.update=function(t){this.active&&(this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.velocity.y*=this.friction,this.velocity.x*=this.friction,this.velocity.y+=this.gravity*this.timeScale,this.velocity.x=s.cap(this.velocity.x,-this.maxSpeed,this.maxSpeed),this.velocity.y=s.cap(this.velocity.y,-this.maxSpeedY,this.maxSpeedY),this.position.x+=this.velocity.x*this.timeScale*t,this.position.y+=this.velocity.y*this.timeScale*t)},a.prototype.reset=function(){this.velocity.x=0,this.velocity.y=0,this.acceleration.x=0,this.acceleration.y=0,this.remainder=0,this.active=!0},a.prototype.getDebugView=function(t){var e=this.shape,t=t||colors[this.type];return(new r.Graphics).beginFill(t).drawRect(e.x,e.y,e.width,e.height)},a.fromRect=function(t,e,i,n){return new a(new r.Rectangle(t,e,i,n))},a.STATIC=0,a.KINIMATIC=1,a.DYNAMIC=2,a.NONE=3,colors=[4602488,16776960,16711680,255],n.exports=a}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){var n={};n.TWO_PI=2*Math.PI,n.random=function(t,e){return t=t||0,e=void 0===e?1:e,t+Math.random()*(e-t)},n.randomInt=function(t,e){return t+Math.random()*(e-t)|0},n.randomSeed=function(t,e,i){min=t,max=e,i=i||1,i=(9301*i+49297)%233280;var n=i/233280;return min+n*(max-min)},n.randomChance=function(t,e){return n.randomSeed(0,1,e)>t},n.cap=function(t,e,i){return t<e?e:t>i?i:t},n.sign=function(t){return t<0?-1:t>0?1:0},n.randomSign=function(t){return Math.random()<(t||.5)?-1:1},n.randomChoice=function(t,e){return Math.random()<.5?t:e},n.map=function(t,e,i,n,r){return(r-n)*((t-e)/(i-e))+n},n.smallestAngle=function(t,e){t%=2*Math.PI,t<0&&(t+=2*Math.PI);var i=e-t,n=e+2*Math.PI-t,r=e-2*Math.PI-t,s=Math.abs(i),o=Math.abs(n),a=Math.abs(r),h=i;return o<s&&o<a?h=n:a<s&&a<o&&(h=r),h},n.wrap=function(t,e,i){var n=i-e;return t-=e,t%=n,t<0&&(t+=n),t+=e},n.floor=function(t,e){return(t/e|0)*e},n.round=function(t,e){return Math.round(t/e)*e},n.ceil=function(t,e){return Math.ceil(t/e)*e},i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(53),s=i(54),o=i(50),a=i(56),h=function(){this.staticItems=new a,this.kinimaticItems=new r,this.dynamicItems=new r,this.collisions=[],this.narrowPhase=new s,this.dt=1,this.collisionKeys={},this.DEBUG=!1};h.prototype.init=function(t){},h.prototype.preupdate=function(){},h.prototype.add=function(t){t.body&&(this.DEBUG&&(t._debugView||(t._debugView=t.body.getDebugView(),t._debugView.alpha=.5,t.view&&t.view.addChild(t._debugView))),t.body.type===o.STATIC?this.staticItems.add(t):t.body.type===o.KINIMATIC?this.kinimaticItems.add(t):t.body.type===o.DYNAMIC&&this.dynamicItems.add(t))},h.prototype.remove=function(t){t.body&&(t.body.type===o.STATIC?this.staticItems.remove(t):t.body.type===o.KINIMATIC?this.kinimaticItems.remove(t):t.body.type===o.DYNAMIC&&this.dynamicItems.remove(t))},h.prototype.update=function(){for(var t=this.getCollisions(),e=0;e<this.dynamicItems.children.length;e++)this.dynamicItems.children[e].body.update(this.dt);this.narrowPhase.hitTest(t)},h.prototype.postupdate=function(t){},h.prototype.reset=function(){this.staticItems.empty(),this.kinimaticItems.empty(),this.dynamicItems.empty(),this.collisions.length=0,this.narrowPhase.reset()},h.prototype.onCollision=function(t,e){},h.prototype.getKey=function(t,e){return(t<<12)+e},h.prototype.registerCollison=function(t,e){this.collisionKeys[this.getKey(t,e)]=!0,this.collisionKeys[this.getKey(e,t)]=!0},h.prototype.getCollisions=function(){this.collisions.length=0;var t=this.dynamicItems.children;this.sortAxisList(t);for(var e=0;e<t.length;e++)for(var i=t[e],n=i.body.position.x+i.body.shape.x+i.body.shape.width+5,r=e+1;r<t.length;r++){var s=t[r],o=s.body.position.x+s.body.shape.x-5;if(n<=o)break;var a=!0,h=this.getKey(s.type,i.type);this.collisionKeys[h]?s.canCollide&&i.canCollide||(a=!1):a=!1,a&&this.collisions.push(i,s)}for(var e=0;e<this.dynamicItems.children.length;e++)for(var l=this.dynamicItems.children[e],c=this.staticItems.retrieveArea(l),r=0;r<c.length;r++){var u=c[r];u.canCollide&&l.canCollide&&this.collisions.push(l,u)}for(var e=0;e<this.dynamicItems.children.length;e++)for(var r=0;r<this.kinimaticItems.children.length;r++){var l=this.dynamicItems.children[e],u=this.kinimaticItems.children[r],a=!0,h=this.getKey(u.type,l.type);this.collisionKeys[h]?l.canCollide&&u.canCollide||(a=!1):a=!1,a&&(l.debug,this.collisions.push(l,u))}return this.collisions},h.prototype.sortAxisList=function(t){for(var e=1,i=t.length;e<i;e++){for(var n=t[e],r=e-1;r>=0;r--){var s=t[r];if(s.body.shape.x+s.body.position.x<=n.body.shape.x+n.body.position.x)break;t[r+1]=t[r]}t[r+1]=n}return t},h.prototype.castRay=function(t,e){},h.prototype.constrainToBounds=function(){for(var t=this.bounds,e=0;e<this.dynamicItems.children.length;e++){var i=this.dynamicItems.children[e].body;i.position.x+i.shape.x<t.x?i.position.x=t.x+i.shape.x:i.position.x+i.shape.x+i.shape.width>t.x+t.width&&(i.position.x=t.x+t.width-(i.shape.x+i.shape.width)),i.position.y+i.shape.y<t.y?i.position.y=t.y+i.shape.y:i.position.y+i.shape.y+i.shape.height>t.y+t.height&&(i.position.y=t.y+t.height-(i.shape.y+i.shape.height),this.dynamicItems.children[e].onGround=!0)}},h.prototype.setBounds=function(t){this.bounds.x=t.x,this.bounds.y=t.y,this.bounds.width=t.width,this.bounds.height=t.height},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){var n=function(t){this.children=t||[]};n.prototype.add=function(t){return this.children.push(t),t},n.prototype.remove=function(t){var e=this.children.indexOf(t);return e===-1?null:(this.children.splice(e,1),t)},n.prototype.getIndex=function(t){return this.children.indexOf(t)},n.prototype.getItem=function(t){return this.children[t]},n.prototype.run=function(t,e){if(e)for(var i=0;i<this.children.length;i++)t.call(e,this.children[i]);else for(var i=0;i<this.children.length;i++)t(this.children[i])},n.prototype.empty=function(){this.children.length=0},i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(48)),s=i(49),o=i(50),a=(i(55),function(){this.collisions={},this.pool=[],this.tickId=0,this.currentCollisions=[],this.collisionDatas=[]});a.prototype.hitTest=function(t){this.tickId++;for(var e=0;e<2;e++)for(var i=0;i<t.length;i+=2){var n=this.hitTestAABBAABB(t[i],t[i+1]);n&&n.object1.body.solid&&n.object2.body.solid&&this.solve(n)}for(var i=0;i<this.currentCollisions.length;i++){var r=this.currentCollisions[i];r._tickId!==this.tickId&&(this.endCollision(r),this.currentCollisions.splice(i,1),i--)}},a.prototype.hitTestAABBAABB=function(t,e){var i=t.body,n=e.body,s=i.shape,o=n.shape,a=s.x+t.position.x,h=s.y+t.position.y,l=o.x+e.position.x,c=o.y+e.position.y,u=h+s.height-c,p=c+o.height-h,d=a+s.width-l,f=l+o.width-a,m=999999;if(d<m&&(m=d),f<m&&(m=f),u<m&&(m=u),p<m&&(m=p),m>0){var g=new r;m==d?(g.x=-1,g.y=0):m==f?(g.x=1,g.y=0):m==u?(g.x=0,g.y=-1):m==p&&(g.x=0,g.y=1);var v=-m,y=this.startCollision(t,e,v,g);if(!y.ignore)return y}return null},a.prototype.solve=function(t){var e=t.object1,i=t.object2,n=t.projection,r=t.penetration;if(i.body.type===o.DYNAMIC){e.position.x-=n.x*r*.5,e.position.y-=n.y*r*.5,i.position.x+=n.x*r*.5,i.position.y+=n.y*r*.5;var s=e.body.velocity.x-i.body.velocity.x,a=e.body.velocity.y-i.body.velocity.y;0!==n.x?s*n.x<=0&&(e.body.velocity.x-=.5*s,i.body.velocity.x+=.5*s):a*n.y<=0&&(e.body.velocity.y-=.5*a,i.body.velocity.y+=.5*a)}else{e.position.x-=n.x*r,e.position.y-=n.y*r;var s=e.body.velocity.x-i.body.velocity.x,a=e.body.velocity.y-i.body.velocity.y;0!==n.x?s*n.x<=0&&(e.body.velocity.x*=-e.body.bounce):a*n.y<=0&&(e.body.velocity.y*=-e.body.bounce)}},a.prototype.startCollision=function(t,e,i,n){var r;r=t.UID>e.UID?(e.UID<<12)+t.UID:(t.UID<<12)+e.UID;var o=this.collisions[r];return o?(o.penetration=i,o.projection=n,o._tickId=this.tickId,o.ignore||(n.y===-1?t.body.velocity.y>=0&&(t.body.currentSurface=e,t.onGround=!0):1===n.y&&e.body.velocity.y>=0&&(e.body.currentSurface=t,e.onGround=!0)),o):(o=this.pool.pop(),o?(o.object1=t,o.object2=e,o.penetration=i,o.projection=n,o.ignore=!1):o=new s(t,e,i,n,(!1)),o._key=r,o._tickId=this.tickId,n.y===-1*t.body.flip?(t.body.currentSurface=e,t.onGround=!0):n.y===1*e.body.flip&&(e.body.currentSurface=t,e.onGround=!0),t.onCollideBegin&&t.onCollideBegin(o),e.onCollideBegin&&e.onCollideBegin(o),this.collisions[r]=o,this.currentCollisions.push(o),o)},a.prototype.endCollision=function(t){var e=t._key,i=this.collisions[e];return i&&(this.pool.push(i),this.collisions[e]=null),t.object1.world&&(t.object1.onCollideEnd&&t.object1.onCollideEnd(i),t.object2.onCollideEnd&&t.object2.onCollideEnd(i)),i},a.prototype.reset=function(){this.collisions={},this.tickId=0,this.currentCollisions=[]},n.exports=a}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,n){var r;r=function(t,e,r){var s=n(50),o=function(){};o.solve=function(t,e){for(i=0;i<t.length;i++){var n=t[i],r=n.object1,o=n.object2,a=n.projection,h=n.penetration;if(o.body.type===s.DYNAMIC){r.position.x-=a.x*h*.5,r.position.y-=a.y*h*.5,o.position.x+=a.x*h*.5,o.position.y+=a.y*h*.5;var l=r.body.velocity.x-o.body.velocity.x,c=r.body.velocity.y-o.body.velocity.y;0!==a.x?l*a.x<=0&&(r.body.velocity.x-=.5*l,o.body.velocity.x+=.5*l):c*a.y<=0&&(r.body.velocity.y-=.5*c,o.body.velocity.y+=.5*c)}else{r.position.x-=a.x*h,r.position.y-=a.y*h;var l=r.body.velocity.x-o.body.velocity.x,c=r.body.velocity.y-o.body.velocity.y;0!==a.x?l*a.x<=0&&(r.body.velocity.x-=l):(c*a.y<=0&&(r.body.velocity.y-=c),r.body.position.x+=o.body.velocity.x)}}},o.solve3=function(t){var e=t.object1,i=t.object2,n=t.projection,r=t.penetration;if(i.body.type===s.DYNAMIC){e.position.x-=n.x*r*.5,e.position.y-=n.y*r*.5,i.position.x+=n.x*r*.5,i.position.y+=n.y*r*.5;var o=e.body.velocity.x-i.body.velocity.x,a=e.body.velocity.y-i.body.velocity.y;0!==n.x?o*n.x<=0&&(e.body.velocity.x-=.5*o,i.body.velocity.x+=.5*o):a*n.y<=0&&(e.body.velocity.y-=.5*a,i.body.velocity.y+=.5*a)}else{e.position.x-=n.x*r,e.position.y-=n.y*r;var o=e.body.velocity.x-i.body.velocity.x,a=e.body.velocity.y-i.body.velocity.y;0!==n.x?o*n.x<=0&&(e.body.velocity.x-=o):(a*n.y<=0&&(e.body.velocity.y-=a),e.body.position.x+=i.body.velocity.x)}},o.solve2=function(t,e){for(i=0;i<t.length;i++){var n=t[i],r=n.object1,o=n.object2,a=n.object2,h=n.projection,l=n.penetration,c=r.body,u=a.body,p=c.shape,d=u.shape,f=p.x+r.position.x,m=p.y+r.position.y,g=d.x+a.position.x,v=d.y+a.position.y,y=m+p.height-v,_=v+d.height-m,x=f+p.width-g,b=g+d.width-f,w=999999;if(a.passthrough,x<w&&(w=x),b<w&&(w=b),y<w&&(w=y),_<w&&(w=_),w>0)if(w==x?(h.x=-1,h.y=0):w==b?(h.x=1,h.y=0):w==y?(h.x=0,h.y=-1):w==_&&(h.x=0,h.y=1),l=-w,o.body.type===s.DYNAMIC){r.position.x-=h.x*l*.5,r.position.y-=h.y*l*.5,o.position.x+=h.x*l*.5,o.position.y+=h.y*l*.5;var T=r.body.velocity.x-o.body.velocity.x,S=r.body.velocity.y-o.body.velocity.y;0!==h.x?T*h.x<=0&&(r.body.velocity.x-=.5*T,o.body.velocity.x+=.5*T):S*h.y<=0&&(r.body.velocity.y-=.5*S,o.body.velocity.y+=.5*S)}else{r.position.x-=h.x*l,r.position.y-=h.y*l;var T=r.body.velocity.x-o.body.velocity.x,S=r.body.velocity.y-o.body.velocity.y;0!==h.x?T*h.x<=0&&(r.body.velocity.x-=T):(S*h.y<=0&&(r.body.velocity.y-=S),r.body.position.x+=o.body.velocity.x)}}},r.exports=o}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))},function(t,e,i){var n;n=function(t,e,n){var r=(i(10),0),s=function(t,e,i){this.hash=[],this.width=300,this.height=300,this.size=96,this.buildHash(),this.cache={}};s.prototype.buildHash=function(){for(var t=this.width,e=this.height,i=t*e,n=0;n<i;n++)this.hash[n]=[];this.cache={}},s.prototype.add=function(t){this.cache={};var e,i,n=t.body.shape,r=(t.position.x+n.x)/this.size|0,s=(t.position.y+n.y)/this.size|0,o=(t.position.x+n.x+n.width)/this.size|0,a=(t.position.y+n.y+n.height)/this.size|0;for(i=s;i<=a;i++)for(e=r;e<=o;e++){var h=i*this.width+e;this.hash[h]&&this.hash[h].push(t)}},s.prototype.retrieve=function(t){var e=t.position.x/this.size|0,i=t.position.y/this.size|0,n=this.cache[e+":"+i];return n||(n=[],n=this.addSquare(e-1,i-1,n),n=this.addSquare(e,i-1,n),n=this.addSquare(e+1,i-1,n),n=this.addSquare(e-1,i,n),n=this.addSquare(e,i,n),n=this.addSquare(e+1,i,n),n=this.addSquare(e,i+1,n),n=this.addSquare(e,i+1,n),n=this.addSquare(e+1,i+1,n),n=this.removeDuplicates(n),this.cache[e+":"+i]=n),n},s.prototype.addSquare=function(t,e,i){var n=e*this.width+t;return this.hash[n]&&(i=i.concat(this.hash[n])),i};var o=[];s.prototype.retrieveArea=function(t){var e,i,n=t.body.shape,s=(t.position.x+n.x)/this.size|0,a=(t.position.y+n.y)/this.size|0,h=(t.position.x+n.x+n.width)/this.size|0,l=(t.position.y+n.y+n.height)/this.size|0,c=o;o.length=0;var u=r++,p=0;for(i=a;i<=l;i++)for(e=s;e<=h;e++){var d=i*this.width+e,f=this.hash[d];if(f)for(var m=0;m<f.length;m++){var g=f[m];g._TICK!==u&&(g._TICK=u,c[p++]=g)}}return c},s.prototype.removeDuplicates=function(t){for(var e={},i=[],n=t.length,r=0,s=0;s<n;s++){var o=t[s];1!==e[o.UID]&&(e[o.UID]=1,i[r++]=o)}return i},s.prototype.remove=function(t){var e,i,n=t.body.shape,r=(t.position.x+n.x)/this.size|0,s=(t.position.y+n.y)/this.size|0,o=(t.position.x+n.x+n.width)/this.size|0,a=(t.position.y+n.y+n.height)/this.size|0;for(i=s;i<=a;i++)for(e=r;e<=o;e++){var h=i*this.width+e;if(h>0){var l=this.hash[h].indexOf(t);l!==-1&&this.hash[h].splice(l,1)}this.cache={}}},s.prototype.empty=function(){this.buildHash()},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(48)),s=function(){};s.hitTestItemGroup=function(t,e,i,n){for(var r=e.children,o=0;o<r.length;o++)s.hitTestAABBAABB(t,r[o],i,n)},s.hitTestItemItem=function(t,e,i,n){s.hitTestAABBAABB(t,e,i,n)},s.hitTestGroup=function(t,e,i){for(var n=t.children,r=0;r<n.length-1;r++)for(var o=r+1;o<n.length;o++)s.hitTestAABBAABB(n[r],n[o],e,i)},s.hitTestGroupGroup=function(t,e,i,n){for(var r=t.children,o=e.children,a=0;a<r.length;a++)for(var h=0;h<o.length;h++)s.hitTestAABBAABB(r[a],o[h],i,n);s.hitTestAABBAABB(item,r[a],i,n)},s.hitTestAABBAABB=function(t,e,i,n){var s=t.body,o=e.body,a=s.shape,h=o.shape,l=a.x+t.position.x,c=a.y+t.position.y,u=h.x+e.position.x,p=h.y+e.position.y,d=c+a.height-p,f=p+h.height-c,m=l+a.width-u,g=u+h.width-l,v=999999;if(m<v&&(v=m),g<v&&(v=g),d<v&&(v=d),f<v&&(v=f),v>=0){var y=new r;v==m?(y.x=-1,y.y=0):v==g?(y.x=1,y.y=0):v==d?(y.x=0,y.y=-1):v==f&&(y.x=0,y.y=1);var _=-v;i&&i(t,e,_,y)}else n&&n(t,e)},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e){t.exports={BLOCK_WIDTH:50,BLOCK_HEIGHT:60,PEG_HEIGHT:11,PLAYER_STATE:{WALKING:0,CRASHING:1,RUNNING_FAST:2,STRETCHING:3,BAT_ATTACKED:4,ATMOSPHERE_ENTRY:5,FALLING:6,FALLING_POSING:7},TUTORIAL:{POINT_A:1e3,POINT_B:1001},TYPES:{FLOOR:0,BRIDGE:1,PICKUP:2,ENEMY:3,SPRING:4,BOMB:5,DEBRIS:6,PLAYER:7,DROP:8,SPEED_DOOR:9,NO_KILL_FLOOR:10,SPEED_DOOR_END:11,GAP:12}}},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=function(t,e){var i=new r.Sprite;s.call(this,t,e,i),this.groups=["cull"]};o.prototype=Object.create(s.prototype),o.prototype.reset=function(t){var e=t;this.view.texture=r.Texture.from(e.frame)},n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){var n=(window.gameTracking,{startGame:function(){},replayGame:function(){},died:function(t,e,i,n,r,s,o){},tutorialComplete:function(){},achievementUnlocked:function(t){},achievementGroupComplete:function(t){},init:function(t,e){e.CustomEvents.createReportingEvent("game-replay"),e.CustomEvents.createReportingEvent("playerdied"),this.startGame=function(){e.Progress.startGame("out-of-step")},this.replayGame=function(){e.CustomEvents.raise("game-replay",1)},this.died=function(t,i,n,r,s,o,a){e.CustomEvents.raise("playerdied",1)},this.tutorialComplete=function(){e.Progress.registerGameProgress("tutorial-complete")},this.achievementUnlocked=function(t){e.Progress.registerGameProgress("achievement-unlocked-"+t)},this.achievementUnlocked=function(t){e.Progress.registerGameProgress("achievement-unlocked-"+t)},this.achievementGroupComplete=function(t){e.Progress.registerGameProgress("achievement-group-complete-"+t)}}});i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(9)),s=function(){this.delayedCalls=[]};s.prototype.clear=function(){this.delayedCalls=[],r.instance.remove(this.update,this),this.updating=!1},s.prototype.add=function(t,e,i){var n={func:t,args:i,tick:0,delay:e,"delete":!1};return this.delayedCalls.push(n),this.updating||(r.instance.add(this.update,this),this.updating=!0),this.delayedCalls.length-1},s.prototype.getRemainingTime=function(t){var e=this.delayedCalls[t];return e&&e.delay?60*e.delay-e.tick:0},s.prototype.update=function(){for(var t=0;t<this.delayedCalls.length;t++){var e=this.delayedCalls[t];e.tick++,e.tick>60*e.delay&&(e.func(e.args),e["delete"]=!0)}for(var t=0;t<this.delayedCalls.length;t++){var e=this.delayedCalls[t];e["delete"]&&(this.delayedCalls.splice(t,1),t--)}0===this.delayedCalls.length&&(r.instance.remove(this.update,this),this.updating=!1)},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(63),o=i(64),a=(i(129),i(130)),h=i(81),l=function(t){this.app=t,r.Container.call(this),this.game=new s(this.app),this.game.onGameover.add(this.onGameover,this),this.addChild(this.game.view),h.instance.achievementUnlocked.add(this.switchNextScren,this)};l.prototype=Object.create(r.Container.prototype),l.prototype.switchNextScren=function(){this.unlockedAchievement=!0},l.prototype.onShow=function(){this.achievementsDisplayed=!1,this.game.start(),a.play("Shooting_Gallery_Music"),this.app.overlayManager.onShow.add(this.onOverlayShow,this),this.app.overlayManager.onHide.add(this.onOverlayHide,this),this.app.topMenu.normalMode(),this.app.topMenu.addChild(this.game.hud)},l.prototype.quit=function(){this.screenManager.gotoScreenByID("title")},l.prototype.onGameover=function(){var t=this.game.score+this.game.distance;this.gameDetail={studs:this.game.score,distance:this.game.hud.distance,score:t},o.instance.setHighscore(this.gameDetail.score),this.app.overlayManager.show("achievements"),this.achievementsDisplayed=!0},l.prototype.onShown=function(){},l.prototype.onHide=function(){this.achievementsDisplayed=!1,this.app.overlayManager.onShow.remove(this.onOverlayShow,this),this.app.overlayManager.onHide.remove(this.onOverlayHide,this),app.view.style["-webkit-filter"]=null,this.app.topMenu.removeChild(this.game.hud)},l.prototype.onHidden=function(){this.game.pause(),this.app.topMenu.normalMode()},l.prototype.onOverlayShow=function(){this.game.pause()},l.prototype.onOverlayHide=function(){this.game.isGameover?this.achievementsDisplayed?(this.achievementsDisplayed=!1,this.app.overlayManager.show("gameover")):(this.game.reset(),this.game.resume()):this.game.resume()},l.prototype.resize=function(t,e){this.game.resize(t,e)},n.exports=l}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(64),o=i(10),a=i(9),h=i(66),l=i(69),c=i(70),u=(i(34),i(73)),p=i(77),d=i(79),f=i(86),m=i(96),g=i(97),v=i(114),y=i(119),_=(i(46),i(42)),x=i(58),b=i(120),w=i(122),T=i(82),S=i(81),E=i(125),C=i(92),b=i(127),y=i(40),M=i(60),P=i(78),A=i(51),I=i(61),O=i(128);r.DisplayObject.prototype.depthOffset=0;var R=function(t){this.onGameover=new o,this.world=new h.World,this.world.game=this,this.app=t,this.isGameover=!1,this.paused=!0,this.score=0,this.distance=0,this.counter=0;var e={camera:new c(this)};this.world.initGroups(["cull"]),this.world.install(new h.CrashWorld,"crash"),this.world.install(new l(e),"view"),this.world.crash.DEBUG=!1,this.view=new r.Container,this.view.addChild(this.world.view),this.view.addChild(b.instance.frontView),S.instance.allAchievementsCollected.add(this.onLevelComplete,this),S.instance.achievementUnlocked.add(this.onSingleGoalComplete,this),this.controller=new u(this),this.keyboardController=new p(this),this.worldSpawner=new g,this.itemSpawner=new v,this.player=new f,this.player.signals.onDead.add(this.onPlayerDead,this),this.world.add(this.worldSpawner),this.world.add(this.itemSpawner),this.world.add(this.player),this.world.crash.registerCollison(x.TYPES.GAP,x.TYPES.PLAYER),this.world.crash.registerCollison(x.TYPES.SPEED_DOOR_END,x.TYPES.PLAYER),this.world.crash.registerCollison(x.TYPES.SPEED_DOOR,x.TYPES.PLAYER),this.world.crash.registerCollison(x.TYPES.FLOOR,x.TYPES.PLAYER),this.world.crash.registerCollison(x.TYPES.PICKUP,x.TYPES.PLAYER),this.world.crash.registerCollison(x.TYPES.ENEMY,x.TYPES.PLAYER),this.world.crash.registerCollison(x.TYPES.BRIDGE,x.TYPES.PLAYER),this.world.crash.registerCollison(x.TYPES.BRIDGE,x.TYPES.BRIDGE),this.world.crash.registerCollison(x.TYPES.BOMB,x.TYPES.ENEMY),this.world.crash.registerCollison(x.TYPES.BOMB,x.TYPES.BRIDGE),this.world.crash.registerCollison(x.TYPES.BOMB,x.TYPES.SPRING),this.world.crash.registerCollison(x.TYPES.BOMB,x.TYPES.SPRING),this.world.crash.registerCollison(x.TYPES.PLAYER,x.TYPES.SPRING),this.world.crash.registerCollison(x.TYPES.PLAYER,x.TUTORIAL.POINT_A),this.world.crash.registerCollison(x.TYPES.PLAYER,x.TUTORIAL.POINT_B),this.world.crash.registerCollison(x.TYPES.BRIDGE,x.TYPES.SPRING),this.world.crash.registerCollison(x.TYPES.BRIDGE,x.TYPES.ENEMY),this.world.crash.registerCollison(x.TYPES.SPRING,x.TYPES.ENEMY),this.world.crash.registerCollison(x.TYPES.SPRING,x.TYPES.FLOOR),this.hud=new d(this),this.speedOffset=.5,this.backgroundManager=new w(this),this.tutorialManager=new E(this),T.init(S.instance),this.grid=C.instance,this.grid.createGrid(400,this),this.titleScreen=new y(this),this.view.addChild(this.titleScreen),this.keyboard=new P,this.keyboard.stop(),this.keyboard.onKeyPress("space",function(){this.player.speedUp()}.bind(this)),this.keyboard.onKeyRelease("space",function(){this.player.speedDown()}.bind(this)),this.delayedCalls=new I,this.pixiDust=new O,this.world.view.addChild(this.pixiDust)};R.constructor=R,R.prototype.reset=function(t){this.delayedCalls.clear(),this.grid.clear(),EasingsGame.killTweensOf(this.pixiDust),this.pixiDust.alpha=0,this.isGameover=!1,t=t||this.config,this.config=t,a.game.speed=1,this.speedOffset=.5,this.counter=0,this.score=0,this.distance=0,this.isTutorial=!0,this.started=!1,this.world.groups.cull.run(function(t){t.destroy()}),this.world.removeItems(),this.backgroundManager.reset(),this.world.view.camera.reset(),this.player.reset(),this.itemSpawner.reset(),this.hud.reset(),this.worldSpawner.reset(),this.resume(),S.instance.reset(),T.restart(),this.showTitle&&!window.fastplay?(this.showTitle=!1,this.hud.hide(!0),this.controller.hide(!0),this.titleScreen.reset(),this.titleScreen.show(),this.titleScreen.onPlayPressed.addOnce(this.startGame,this)):(M.replayGame(),this.startGame(!0)),this.currentGroup=this.hud.hudAchievements.icons[0].data.group||"level10",this.player.speedDown(),this.world.update(),window.badDevice||(this.displacmentEffect=_.getObject(m),this.world.add(this.displacmentEffect))},R.prototype.onSingleGoalComplete=function(){this.app.loaderScreen.showRainbow(),this.delayedCalls.add(function(){this.app.loaderScreen.hideRainbow()}.bind(this),3)},R.prototype.onLevelComplete=function(){this.worldSpawner.forceDifficulty()},R.prototype.startGame=function(t){s.instance.save.tutorialFinished||this.tutorialManager.reset(),this.app.loaderScreen.hideRainbow(),this.app.topMenu.gameMode(),this.hud.show(),this.titleScreen.hide(),this.player.start(),this.world.view.camera.start(t),this.controller.reset(),this.controller.show(),this.started=!0,this.keyboard.start(),this.view.addChildAt(b.instance.backView,0),this.delayedCalls.add(function(){EasingsGame.to(this.pixiDust,1,{alpha:1})}.bind(this),3)},R.prototype.playPlayer=function(){this.player.stopSlowMo()},R.prototype.stopPlayer=function(){this.player.slowMo()},R.prototype.start=function(t){this.showTitle=!0,this.reset(t),this.resume()},R.prototype.pause=function(){this.paused||(this.paused=!0,this.view.interactive=!1,a.game.remove(this.update,this),this.keyboard.stop())},R.prototype.resume=function(){this.paused&&(this.paused=!1,this.view.interactive=!0,a.game.start(),a.game.add(this.update,this,1),this.keyboard.start())},R.prototype.update=function(){a.game.speed=.5,this.world.crash.dt=.5,this.world.update(),this.hud.update(),this.backgroundManager.update(),this.controller.update();var t=this.world.view.camera.y;t>0&&(t=0),t<-2e3&&(t=-2e3);var e=A.map(t,0,-2e3,0,1);b.instance.update(this.world.view.camera,e),this.pixiDust.update(this.world.view.camera),this.world.groups.cull.run(function(t){t.body&&t.body.position.x+t.body.shape.x+t.body.shape.width<t.world.view.camera.x-t.world.view.camera.viewWidth&&t.destroy()})},R.prototype.onPlayerDead=function(){this.gameover()},R.prototype.gameover=function(){this.isGameover||(this.isGameover=!0,this.distance=this.hud.distance,this.score=this.hud.score,this.pause(),this.onGameover.dispatch(),M.died())},R.prototype.resize=function(t,e){this.titleScreen.resize(t,e),this.world.view.camera.resize(t,e),this.hud.resize(t,e),this.controller.resize(t,e)},n.exports=R}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(65),s=i(10),o=function(){this.onLoaded=new s,this.localStorage=new r("com.lego.walker"),this.save=null};o.prototype.loadGame=function(){this.loadGameFromLocalStorage()},o.prototype.loadGameFromLocalStorage=function(){var t=this.localStorage.getObject("save");t||(t=new a,this.localStorage.storeObject("save",t)),this.save=t,this.onLoaded.dispatch()},o.prototype.isPB=function(t,e){var i=this.save.levelBestScores[t];return e>i},o.prototype.getPB=function(t){var e=this.save.levelBestScores[t];return e},o.prototype.unlockLevel=function(t,e){return this.save.levelBestScores[t-1]>=e&&(0!==this.save.levelStates[t]||(this.save.levelStates[t]=1,this.saveToStorage(),!0))},o.prototype.finishTutorial=function(){this.save.tutorialFinished=!0,this.saveToStorage()},o.prototype.setHighscore=function(t){t>this.save.bestScore&&(this.save.bestScore=t,this.saveToStorage())},o.prototype.saveScore=function(t,e){var i=this.save.levelBestScores[t];if(this.save.totalScore=this.save.totalScore||0,this.save.totalScore+=e,e>i){for(var n=0;n<this.save.levelBestScores.length;n++){var r=this.save.levelBestScores[n];e>r&&window.Highscores&&window.UserDetails.isUserSignedIn()&&Highscores.setUserScore(function(t){},function(t){},["allatbreak_overall"],[e])}this.save.levelBestScores[t]=e}window.Highscores&&window.UserDetails.isUserSignedIn()&&Highscores.setUserScore(function(t){},function(t){},["allatbreak_total"],[this.save.totalScore]),this.saveToStorage()},o.prototype.saveToStorage=function(){this.localStorage.storeObject("save",this.save)};var a=function(){this.levelStates=[1,0,0,0,0,0,0],this.levelBestScores=[0,0,0,0,0,0,0],this.tutorials=[0,0,0,0,0,0,0],this.totalScore=0,this.bestScore=0,this.tutorialFinished=!1};o.instance=new o,n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){var n=function(t){this.id=t||"com.goodboydigital",this.canSave=!1;try{localStorage.setItem(this.id+".access",!0),localStorage.removeItem(this.id+".access",!0),
this.canSave=!0}catch(e){}};n.prototype.store=function(t,e){this.canSave&&localStorage.setItem(this.id+"."+t,e)},n.prototype.get=function(t){if(this.canSave)return localStorage.getItem(this.id+"."+t)},n.prototype.storeObject=function(t,e){this.canSave&&localStorage.setItem(this.id+"."+t,JSON.stringify(e))},n.prototype.getObject=function(t){if(this.canSave)return JSON.parse(localStorage.getItem(this.id+"."+t))},n.prototype.remove=function(t){this.canSave&&localStorage.removeItem(this.id+"."+t)},n.prototype.reset=function(){if(this.canSave)for(var t in localStorage)t.indexOf(this.id+".")!==-1&&localStorage.removeItem(t)},i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){n.exports={World:i(67),Group:i(53),PixiView:i(68),CrashWorld:i(52)}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(53)),s=i(9),o=function(){this.allItems=new r,this.updateItems=new r,this.groups={},this.itemsToRemove=[],this.systems=[]};o.constructor=o,o.prototype.install=function(t,e){this.systems.push(t),t.init(this),this[e]=t},o.prototype.addGroup=function(t){for(var e=0;e<t.children.length;e++)this.add(t.children[e])},o.prototype.initGroups=function(t){for(var e=0;e<t.length;e++){var i=t[e],n=this.groups[i];n||(n=this.groups[i]=new r)}},o.prototype.add=function(t){if(t._gc){var e=this.itemsToRemove.indexOf(t);this.itemsToRemove.splice(e,1),t._gc=!1}t.world&&this.removeItem(t),t.world=this;for(var i=0;i<this.systems.length;i++)this.systems[i].add(t);this.allItems.add(t);for(var i=0;i<t.groups.length;i++){var n=t.groups[i],s=this.groups[n];s||(s=this.groups[n]=new r),s.add(t)}t.update&&this.updateItems.add(t),t.addedToWorld&&t.addedToWorld(this)},o.prototype.remove=function(t){!t._gc&&t.world&&(t._gc=!0,this.itemsToRemove.push(t))},o.prototype.update=function(){var t=Math.round(s.game.deltaTime/s.game.speed);t>2&&(t=2);for(var e=0;e<t;e++){this.removeItems();for(var i=0;i<this.systems.length;i++)this.systems[i].preupdate();for(var n=this.updateItems.children,i=0;i<n.length;i++)n[i].update();for(var i=0;i<this.systems.length;i++)this.systems[i].update();for(var i=0;i<this.systems.length;i++)this.systems[i].postupdate()}},o.prototype.removeItems=function(){this.itemsToRemove.length;for(var t=0;t<this.itemsToRemove.length;t++){var e=this.itemsToRemove[t];this.removeItem(e)}this.itemsToRemove.length=0},o.prototype.removeItem=function(t){t._gc=!1;for(var e=0;e<this.systems.length;e++)this.systems[e].remove(t);t.update&&this.updateItems.remove(t),t.removedFromWorld&&t.removedFromWorld(this),t.world=null,this.allItems.remove(t);for(var e=0;e<t.groups.length;e++){var i=t.groups[e];this.groups[i].remove(t)}},o.prototype.clear=function(){for(var t=0;t<this.systems.length;t++)this.systems[t].clear();this.allItems.empty(),this.updateItems.empty(),this.groups={},this.removeItems(),this.collisionHash={}},o.prototype.find=function(t,e){if(!this.groups[t])return null;for(var i=this.groups[t].children,n=0;n<i.length;n++)if(i[n].meta.name===e)return i[n]};var a=[];o.prototype.findAll=function(t,e){if(!this.groups[t])return null;var i=this.groups[t].children;a.length=0;for(var n=0;n<i.length;n++)i[n].meta.name===e&&a.push(i[n]);return a},n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6);r.DisplayObject.prototype.layer="default";var s=function(t){r.Container.call(this),this.innerContainer=new r.Container,this.activeItemsContainer=new r.Container,this.addChild(this.innerContainer),this.innerContainer.addChild(this.activeItemsContainer),this.filterArea=new r.Rectangle(0,0,1e6,1e6),this.layers={},this.camera=t.camera||{x:0,y:0,zoom:1},this.addLayer("back"),this.addLayer("default"),this.addLayer("front")};s.prototype=Object.create(r.Container.prototype),s.prototype.init=function(t){},s.prototype.preupdate=function(t){},s.prototype.update=function(){this.camera.update();var t=this.camera.zoom;this.scale.set(t),this.position.x=this.camera.viewWidth/2-this.camera.viewWidth/2*t,this.position.y=this.camera.viewHeight/2-this.camera.viewHeight/2*t,this.innerContainer.x=-this.camera.x+this.camera.viewWidth/2,this.innerContainer.y=-this.camera.y+this.camera.viewHeight/2},s.prototype.postupdate=function(t){},s.prototype.add=function(t){if(t.view){var e=t.view,i=this.layers[e.layer];e.parent=i,i.children.push(t.view)}},s.prototype.remove=function(t){if(t.view){var e=t.view,i=this.layers[e.layer],n=i.children.indexOf(e);n!=-1&&(e.parent=null,i.children.splice(n,1))}},s.prototype.clear=function(){for(var t in this.layers)this.layers[t].removeChildren()},s.prototype.addLayer=function(t){this.layers[t]=new r.Container,this.activeItemsContainer.addChild(this.layers[t])},s.prototype.bringToFront=function(t){var e=this.layers[t.view.layer],i=e.children.indexOf(t.view);i!=-1&&(e.children.splice(i,1),e.children.push(t.view))},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(68);r.DisplayObject.prototype.layer="default";var o=function(t){r.Container.call(this),this.innerContainer=new r.Container,this.activeItemsContainer=new r.Container,this.addChild(this.innerContainer),this.innerContainer.addChild(this.activeItemsContainer),this.filterArea=new r.Rectangle(0,0,1e6,1e6),this.interactiveChildren=!1,this.layers={},this.camera=t.camera||{x:0,y:0,zoom:1},this.addLayer("back"),this.addLayer("back_islands"),this.addLayer("tuto"),this.addLayer("default"),this.addLayer("pickups"),this.addLayer("block_enemies"),this.addLayer("front"),this.addLayer("above_player"),this.addLayer("waterfalls")};o.prototype=Object.create(s.prototype),o.prototype.setLayer=function(t,e){if(t.world){var i=t.view,n=this.layers[i.layer];n.removeChild(i),i.layer=e;var r=this.layers[i.layer];i.parent=r,r.children.push(t.view)}},n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(71),o=i(25),a=i(72),h=i(51),l=function(t){s.call(this),this.game=t,this.padding=(o.instance.isMobile,0),this.idleZoom=1,this.zoom=.8,this.zoomWait=0,this.count=0,this.lockToFrame=!0,this.easeX=0,this.easeY=0,this.mobileMode=!1,this.spring=new a,this.offsetBackground={x:0,y:0},this.target=new r.Point,this.targetIntro=new r.Point,this.canShake=!0,this.specificTargetOffset=new r.Point};l.prototype=Object.create(s.prototype),l.prototype.start=function(t){t?(this.zoom=.8,this.starting=!1,this.started=!0,this.x=this.easeX=this.game.player.position.x+this.viewWidth/2-160):(EasingsGame.to(this,1,{zoom:.8,delay:1}),this.starting=!0)},l.prototype.changeTarget=function(t){this.specificTargetOffset.x=0,this.specificTargetOffset.y=0,this.specificTarget=t},l.prototype.resetTarget=function(t){this.specificTarget=null,this.specificTargetOffset.x=0,this.specificTargetOffset.y=0,this.x=this.easeX,this.y=this.easeY},l.prototype.reset=function(){this.specificTargetOffset.x=0,this.specificTargetOffset.y=0,this.specificTarget=null,this.started=!1,this.starting=!1,this.zoom=1,this.x=this.easeX=-this.viewWidth/2+220,this.y=this.easeY=150},l.prototype.tweenTo=function(t,e){this.isEasing=!0,TweenLite.to(this,e||.5,{easeX:t.x,easeY:t.y,onUpdate:function(){this.isEasing=!1,this.x=this.easeX+this.spring.x,this.y=this.easeY+this.spring.y}.bind(this),onComplete:function(){this.isEasing=!1}.bind(this)})},l.prototype.shake=function(t,e){this.canShake&&(t=t||Math.random()*Math.PI*2,e=e||20,this.spring.dx=Math.sin(t)*e,this.spring.dy=Math.cos(t)*e)},l.prototype.update=function(){if(this.spring.update(),!this.isEasing){if(!this.started&&!this.starting){var t=-this.viewWidth/2+220;t+=h.map(this.target.x,0,this.viewWidth,0,100),this.easeX+=.01*(t-this.x);var e=150;return e+=h.map(this.target.y,0,this.viewHeight,-100,50),e+=this.targetIntro.y,this.easeY+=.01*(e-this.y),this.x=this.easeX+this.spring.x,void(this.y=this.easeY+this.spring.y)}var i=this.specificTarget||this.game.player;if(this.starting)var t=i.position.x+this.viewWidth/2;else if(this.specificTarget)var t=i.position.x+this.specificTargetOffset.x;else var t=i.position.x+this.viewWidth/2-160;if(this.specificTarget)var e=i.position.y+this.specificTargetOffset.y+i.body.velocity.y;else var e=h.map(.5,0,1,i.position.y,i.lastGround);1!==i.state||this.specificTarget||e>400&&(e=400),6!==i.state||this.specificTarget||(e=200);this.viewWidth,this.viewHeight;this.starting?(this.easeX+=.01*(t-this.x),this.easeY+=.05*(e-this.y),.01*(t-this.x)<=2&&(this.starting=!1,this.started=!0)):this.specificTarget?(this.easeX+=.1*(t-this.x),this.easeY+=.1*(e-this.y)):(this.easeX+=.1*(t-this.x),this.easeY+=.1*(e-this.y)),this.x=this.easeX+this.spring.x,this.y=this.easeY+this.spring.y,this.count+=.1,this.y+=5*Math.sin(this.count)}},l.prototype.resize=function(t,e){this.viewWidth=t,this.viewHeight=e},n.exports=l}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),function(){this.x=0,this.y=0,this.rotation=0,this.zoom=1,this.viewWidth=1130,this.viewHeight=640});r.prototype.update=function(){},r.prototype.resize=function(t,e){this.viewWidth=t,this.viewHeight=e},n.exports=r}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){var n=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0,this.y=0,this.ay=0,this.dy=0,this.ty=0,this.max=30,this.damp=.75,this.springiness=.09,this.max=160,this.damp=.85,this.springiness=.29};n.constructor=n,n.prototype.update=function(){this.ax=(this.tx-this.x)*this.springiness,this.dx+=this.ax,this.dx*=this.damp,this.dx<-this.max?this.dx=-this.max:this.dx>this.max&&(this.dx=this.max),this.x+=this.dx,this.ay=(this.ty-this.y)*this.springiness,this.dy+=this.ay,this.dy*=this.damp,this.dy<-this.max?this.dy=-this.max:this.dy>this.max&&(this.dy=this.max),this.y+=this.dy},n.prototype.reset=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0,this.y=0,this.ay=0,this.dy=0,this.ty=0},i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(74),i(45),i(58)),s=i(51),o=(i(75),i(25)),a=i(10),h=(new PIXI.Point,i(33)),l=i(76),c=function(t){this.game=t,this.view=this.game.view,this.startPoint=new PIXI.Point,this.touchMode=!o.instance.desktop,this.clickAndStick=!1,this.mode=0,this.w=1024,this.h=702,this.offsetCheck=new PIXI.Point,this.clickContainer=new PIXI.Container,this.clickContainer.interactive=!0,this.clickContainer.buttonMode=!0,this.clickContainer.hitArea=new PIXI.Rectangle(0,0,1200,768),this.clickContainer.mouseup=this.clickContainer.touchend=this.onUp.bind(this),this.clickContainer.mousemove=this.clickContainer.touchmove=this.onMove.bind(this),this.clickContainer.touchstart=this.onTouchDown.bind(this),this.clickContainer.tap=this.onTap.bind(this),this.view.addChild(this.clickContainer),this.isOverButton=!1,this.dropLine=new l,this.game.world.view.addChild(this.dropLine),this.pos=new PIXI.Point,this.buttonContainer=new PIXI.Container,this.buttonContainer.interactive=!1,this.buttonContainer.interactiveChildren=!1,this.bridgeIcon=new u("brick_drop.png"),this.bridgeIcon.icon.tint=13643552,this.bridgeIcon.onDown.add(this.onDown,this),this.bridgeIcon.onUp.add(this.onIconUp,this),this.bridgeIcon.onOut.add(this.onOut,this),this.bridgeIcon.onHover.add(this.onHover,this),this.bridgeIcon.onPress.add(this.onPress,this),this.bridgeIcon.interactive=!0,this.buttonContainer.addChild(this.bridgeIcon),this.bombIcon=new u("block_drop.png"),this.bombIcon.onDown.add(this.onDown,this),this.bombIcon.onUp.add(this.onIconUp,this),this.bombIcon.onOut.add(this.onOut,this),this.bombIcon.onHover.add(this.onHover,this),this.bombIcon.onPress.add(this.onPress,this),this.bombIcon.interactive=!0,this.buttonContainer.addChild(this.bombIcon),this.springIcon=new u("bouncer_drop.png"),this.springIcon.onDown.add(this.onDown,this),this.springIcon.onUp.add(this.onIconUp,this),this.springIcon.onOut.add(this.onOut,this),this.springIcon.onHover.add(this.onHover,this),this.springIcon.onPress.add(this.onPress,this),this.springIcon.interactive=!0,this.buttonContainer.addChild(this.springIcon),this.view.addChild(this.buttonContainer),this.targetToDrop=new PIXI.Sprite,this.targetToDrop.visible=!1,this.targetToDrop.anchor.x=this.targetToDrop.anchor.y=.5,this.targetToDrop.hitArea=new PIXI.Rectangle,this.targetToDrop.position=this.pos,this.type=null,this.resize(this.w,this.h),this.highlight=(new PIXI.Graphics).beginFill(0,.75).drawRect(0,0,1e4,1e4),this.highlight.alpha=0,this.highlight.visible=!1,this.buttonContainer.addChildAt(this.highlight,0)};c.prototype.onTap=function(t){if(this.tapMode&&null!==this.type){var e=t.data.getLocalPosition(this.game.world.view,new PIXI.Point),i=e.x;this.pos=e,this.dropLine.ghostItem.position.x=i-this.dropLine.ghostItem.width/2,this.drop(t)}},c.prototype.onTouchDown=function(t){this.touchIsDown=t.data.identifier,this.isReadyToSpeedUp=!0,this.isReadyToSpeedUpCounter=60},c.prototype.reset=function(){this.isMovingMode=!1,this.touchIsDown=null,this.isReadyToSpeedUp=!1,this.isReadyToSpeedUpCounter=0,this.count=0,this.dropLine.ghostItem.visible=!1,this.targetToDrop.visible=!1,this.type=null,this.isDown=!1,this.isMovingTarget=!1,this.enable()},c.prototype.hide=function(t){if(o.instance.desktop){if(t)return void(this.buttonContainer.pivot.y=-250);TweenLite.to(this.buttonContainer.pivot,.3,{y:-250,ease:Sine.easeOut})}else{if(t)return void(this.buttonContainer.pivot.x=-250);TweenLite.to(this.buttonContainer.pivot,.3,{x:-250,ease:Sine.easeOut})}},c.prototype.show=function(t){return t?(this.buttonContainer.pivot.y=0,void(this.buttonContainer.pivot.x=0)):(TweenLite.to(this.buttonContainer.pivot,.3,{y:0,ease:Sine.easeOut}),void TweenLite.to(this.buttonContainer.pivot,.3,{x:0,ease:Sine.easeOut}))},c.prototype.disable=function(){this.buttonContainer.interactive=!1,this.buttonContainer.interactiveChildren=!1,this.clickContainer.interactive=!1,this.clickContainer.buttonMode=!1},c.prototype.enableButtons=function(){this.bridgeIcon.enable(),this.bombIcon.enable(),this.springIcon.enable()},c.prototype.disableButtons=function(){this.bridgeIcon.disable(),this.bombIcon.disable(),this.springIcon.disable()},c.prototype.enableBombButton=function(t){t&&this.showHighlight(this.bombIcon),this.bombIcon.enable(t),this.bridgeIcon.fadeOut(),this.springIcon.fadeOut()},c.prototype.enableSpringBoardButton=function(t){t&&this.showHighlight(this.springIcon),this.springIcon.enable(t),this.bombIcon.fadeOut(),this.bridgeIcon.fadeOut()},c.prototype.enableBridgeButton=function(t){t&&this.showHighlight(this.bridgeIcon),this.bridgeIcon.enable(t),this.bombIcon.fadeOut(),this.springIcon.fadeOut()},c.prototype.fadeInButtons=function(){this.bridgeIcon.fadeIn(),this.bombIcon.fadeIn(),this.springIcon.fadeIn()},c.prototype.enable=function(){this.buttonContainer.interactive=!0,this.buttonContainer.interactiveChildren=!0,this.clickContainer.interactive=!0,this.clickContainer.buttonMode=!0},c.prototype.update=function(){this.isReadyToSpeedUp&&this.isReadyToSpeedUpCounter--<0&&(this.dropLine.hide(),this.bridgeIcon.unfocus(),this.bombIcon.unfocus(),this.springIcon.unfocus(),this.game.player.speedUp()),this.dropLine.update();var t=this.game.world.view.camera.zoom;this.dropLine.ghostItem.position.y=(this.h*t-this.h)/2*(1/t)},c.prototype.resize=function(t,e){o.instance.desktop?(this.bridgeIcon.y=e-60,this.springIcon.y=e-60,this.bombIcon.y=e-60,this.bridgeIcon.x=t/2-80-150,this.springIcon.x=t/2,this.bombIcon.x=t/2+80+150):(this.bridgeIcon.y=e/2-170+45,this.springIcon.y=e/2+45,this.bombIcon.y=e/2+170+45,this.bridgeIcon.x=t-80,this.springIcon.x=t-80,this.bombIcon.x=t-80),this.dropLine.ghostLine.height=e},c.prototype.selectItem=function(t,e){var i=!1;switch(e.target){case this.bridgeIcon:0===this.type&&(i=!0),this.type=0,this.dropLine.setSpriteTexture(PIXI.Texture.from("brick_drop.png")),this.dropLine.setTextureColor(this.game.itemSpawner.nextColor);break;case this.bombIcon:this.dropLine.setSpriteTexture(PIXI.Texture.from("block_drop.png")),1===this.type&&(i=!0),this.type=1;break;case this.springIcon:this.dropLine.setSpriteTexture(PIXI.Texture.from("bouncer_drop.png")),2===this.type&&(i=!0),this.type=2}return this.dropLine.ghostItem.visible=!0,this.dropLine.ghostSprite.visible=!0,i},c.prototype.showHighlight=function(t){this.buttonContainer.addChild(this.highlight),this.buttonContainer.addChild(t),this.game.stopPlayer(),this.highlight.visible=!0,TweenLite.to(this.highlight,.3,{alpha:1})},c.prototype.hideHighLight=function(t){TweenLite.to(this.highlight,.3,{alpha:0,onComplete:function(){0!==this.game.tutorialManager.currentStepTutorial&&this.game.playPlayer(),this.highlight.visible=!1},onCompleteScope:this})},c.prototype.onPress=function(t,e){if(o.instance.desktop){h.sfx.play("ui_main_click"),this.hideHighLight(),this.showBurnLine();this.type;this.selectItem(t,e)}else{h.sfx.play("ui_main_click"),this.hideHighLight(),this.hideBurnLine();this.type;this.selectItem(t,e),this.tapMode=!0}},c.prototype.onIconUp=function(t,e){o.instance.desktop&&(this.dropLine.setTextureColor(16777215),this.isSameIcon&&this.drop(e),this.isSameIcon=!1)},c.prototype.onDown=function(t,e){switch(this.bridgeIcon.unfocus(),this.bombIcon.unfocus(),this.springIcon.unfocus(),this.isSameIcon=!1,this.pos={x:this.dropLine.ghostItem.position.x+this.dropLine.ghostItem.width/2,y:this.dropLine.ghostItem.position.y},e.target){case this.bridgeIcon:this.bridgeIcon.focus(),0===this.type&&o.instance.desktop&&(this.isSameIcon=!0),this.type=0;this.game.itemSpawner.indexBrick;this.targetToDrop.texture=PIXI.Texture.from("brick_drop.png"),this.dropLine.setSpriteTexture(PIXI.Texture.from("brick_drop.png"));break;case this.bombIcon:this.bombIcon.focus(),1===this.type&&o.instance.desktop&&(this.isSameIcon=!0),this.type=1,this.targetToDrop.texture=PIXI.Texture.from("block_drop.png"),this.dropLine.setSpriteTexture(PIXI.Texture.from("block_drop.png"));break;case this.springIcon:this.springIcon.focus(),2===this.type&&o.instance.desktop&&(this.isSameIcon=!0),this.type=2,this.targetToDrop.texture=PIXI.Texture.from("bouncer_drop.png"),this.dropLine.setSpriteTexture(PIXI.Texture.from("bouncer_drop.png"))}this.isDown=!0,o.instance.desktop||(this.dropLine.ghostItem.position.x=e.data.getLocalPosition(this.view).x),this.dropLine.ghostLine.width=this.targetToDrop.width},c.prototype.onHover=function(t,e){this.clickContainer.interactive=!1,this.hideBurnLine()},c.prototype.onOut=function(t,e){null!==this.type&&(this.showBurnLine(),this.clickContainer.interactive=!0)},c.prototype.onViewDown=function(t){},c.prototype.onMove=function(t){var e=t.data.getLocalPosition(this.game.world.view,new PIXI.Point),i=e.x;this.pos=e,this.dropLine.ghostItem.position.x=i-this.dropLine.ghostItem.width/2,this.game.world.view.camera.target.x=e.x,this.game.world.view.camera.target.y=e.y,!o.instance.desktop&&this.isDown&&(this.tapMode=!1,this.isMovingMode||(this.showBurnLine(),this.isMovingMode=!0))},c.prototype.onUp=function(t){o.instance.desktop||null===this.touchIsDown||t.data.identifier!==this.touchIsDown||(this.game.player.speedDown(),this.touchIsDown=null,this.isReadyToSpeedUp=!1),null===this.type||this.tapMode||(this.drop(t),!o.instance.desktop&&this.isMovingMode&&(this.isMovingMode=!1,this.tapMode=!0),this.isDown=!1)},c.prototype.hideBurnLine=function(t){this.dropLine.hide()},c.prototype.showBurnLine=function(t){this.dropLine.show()},c.prototype.drop=function(t){if(!(this.game.player.chargeOffset>2.2)||o.instance.desktop){this.mode=0;var e;switch(e=this.game.world.view.activeItemsContainer.toLocal(this.pos,this.game.world.view,new PIXI.Point),e.x-=this.targetToDrop.width/2,e.x=s.round(e.x,r.BLOCK_WIDTH/2),this.dropLine.setTextureColor(16777215),this.type){case 0:this.game.itemSpawner.bridgeBurn.use(e),this.dropLine.setTextureColor(this.game.itemSpawner.nextColor);break;case 1:this.game.itemSpawner.bombBurn.use(e);break;case 2:this.game.itemSpawner.springBurn.use(e)}h.sfx.play("brick_drop"),o.instance.desktop||this.tapMode||this.hideBurnLine()}};var u=function(t){o.instance.desktop?PIXI.Sprite.call(this,PIXI.Texture.from("panel_UI_in_game_desktop.png")):PIXI.Sprite.call(this,PIXI.Texture.from("panel_UI_in_game.png")),this.tick=0,this.anchor.set(.5),this.interactive=!0,this.buttonMode=!0,this.highlighted=!1,this.icon=new PIXI.Sprite.from(t),this.icon.anchor.set(.5),this.addChild(this.icon),this.hoverSprite=new PIXI.Sprite.from(o.instance.desktop?"panel_UI_in_game_desktop.png":"panel_UI_in_game.png"),this.hoverSprite.visible=!1,this.hoverSprite.alpha=0,this.hoverSprite.anchor=this.anchor,this.hoverSprite.buttonMode=!0,this.addChild(this.hoverSprite),this.hoverFrame=new PIXI.Sprite.from(o.instance.desktop?"panel_UI_in_game_desktop_active.png":"panel_UI_in_game_active.png"),this.hoverFrame.visible=!1,this.hoverFrame.anchor=this.anchor,this.hoverFrame.buttonMode=!0,this.addChild(this.hoverFrame),this.onPress=new a,this.onDown=new a,this.onUp=new a,this.onHover=new a,this.onOut=new a,this.mouseup=this.touchend=this.onUp.dispatch.bind(this,this),this.mousedown=this.touchstart=this.onDown.dispatch.bind(this,this),this.click=this.tap=this.onPress.dispatch.bind(this,this),this.mouseover=this.onHover.dispatch.bind(this,this),this.touchendoutside=this.mouseupoutside=this.mouseout=this.touchout=this.onOut.dispatch.bind(this,this),this.onHover.add(this.hover,this),this.onUp.add(this.out,this),this.onOut.add(this.out,this),this.onDown.add(this.hover,this),this.onOut.add(this.out,this),this.arrow=new PIXI.Sprite.from("arrow.png"),this.arrow.hitArea=new PIXI.Rectangle,this.arrow.anchor.set(.5,.8),this.arrow.position.y=-100,this.arrowTick=0,this.arrow.alpha=0,this.arrow.visible=!1};u.prototype=Object.create(PIXI.Sprite.prototype),u.prototype.disable=function(){this.interactive=!1,this.buttonMode=!1,this.alpha=.4,this.arrow.alpha=0,this.hide()},u.prototype.show=function(t){o.instance.desktop?TweenLite.to(this.pivot,.3,{y:0,ease:Sine.easeOut}):TweenLite.to(this.pivot,.3,{x:0,ease:Sine.easeOut}),t||(this.arrow.visible=!0,this.arrow.alpha=0,TweenLite.to(this.arrow,.2,{alpha:1,ease:Sine.easeOut,delay:.5}),this.onPress.addOnce(function(){TweenLite.to(this.arrow,.2,{alpha:0,ease:Sine.easeOut,onComplete:function(){this.arrow.visible=!1},onCompleteScope:this})},this))},u.prototype.hide=function(){this.arrow.visible=!1,this.arrow.alpha=0,o.instance.desktop?TweenLite.to(this.pivot,.3,{y:-150,ease:Sine.easeOut}):TweenLite.to(this.pivot,.3,{x:-250,ease:Sine.easeOut})},u.prototype.enable=function(t){this.interactive=!0,this.buttonMode=!0,this.alpha=1,this.fadeIn(),this.show(),t&&(this.highlighted=t,this.hoverSprite.visible=!0)},u.prototype.focus=function(){this.hoverFrame.visible=!0},u.prototype.unfocus=function(){this.hoverFrame.visible=!1,this.out()},u.prototype.fadeOut=function(t){this.icon.alpha=.3,this.hide()},u.prototype.fadeIn=function(t){this.icon.alpha=1,this.show(!0)},u.prototype.hover=function(t){this.highlighted=!1,this.isHover=!0},u.prototype.out=function(t){this.isHover=!1,Easings.to(this.icon.scale,.1,{x:1,y:1}),Easings.to(this.icon,.1,{rotation:0})},u.prototype.updateTransform=function(){PIXI.Sprite.prototype.updateTransform.call(this),this.tick++,this.highlighted&&(this.hoverSprite.alpha=.25*Math.cos(this.tick/10)+.75),(this.isHover||this.hoverFrame.visible)&&(this.icon.scale.x=this.icon.scale.y=.08*Math.sin(this.arrowTick/7)+.92,this.icon.rotation=10*Math.sin(this.arrowTick/14)*Math.PI/180),this.hoverFrame.visible&&(this.hoverFrame.alpha=.15*Math.cos(this.tick/10)+.85)},n.exports=c}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=(i(51),new r.Point),o=function(t){t=t||{},this.view=new r.Container,this.view.hitArea=new r.Rectangle(0,0,1e4,1e4),this.view.interactive=!0,this.dot=t.background||(new r.Graphics).beginFill(16711680,.4).drawCircle(0,0,70),this.view.addChild(this.dot),this.pad=t.stick||(new r.Graphics).beginFill(16711680).drawCircle(0,0,50),this.pad.interactive=!0,t.stick||(this.pad.hitArea=new r.Circle(0,0,60)),this.pad.alpha=.6,this.view.addChild(this.pad),this.range=30,this.pad.on("mousedown",this.down,this),this.view.on("mouseup",this.up,this),this.view.on("mouseupoutside",this.up,this),this.pad.on("touchstart",this.down,this),this.pad.on("touchend",this.up,this),this.pad.on("touchendoutside",this.up,this),this.delta=new r.Point};o.prototype.update=function(t){},o.prototype.down=function(t){this.moveId=t.data.identifier,this.isDown=!0;t.data.getLocalPosition(this.view,s);this.pad.alpha=1,this.pad.on("mousemove",this.move,this),this.pad.on("touchmove",this.move,this)},o.prototype.up=function(t){if(this.view.hitArea=null,this.moveId===t.data.identifier){this.moveId=99999999,this.isDown=!1;t.data.getLocalPosition(this.view,s);this.pad.x=0,this.pad.y=0,this.pad.alpha=.6,this.delta.x=0,this.delta.y=0,this.pad.off("mousemove",this.move,this),this.pad.off("touchmove",this.move,this)}},o.prototype.move=function(t){if(this.moveId===t.data.identifier){var e=t.data.getLocalPosition(this.view,s);this.pad.x=e.x,this.pad.y=e.y;var i=e.x,n=e.y,r=Math.sqrt(i*i+n*n);i/=r,n/=r,r>this.range&&(r=this.range),this.pad.x=i*r,this.pad.y=n*r,this.delta.x=i*r/30,this.delta.y=n*r/30}},n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=(i(42),i(10),i(25)),o=i(39),a=function(t,e){r.Container.call(this),this.data=null,this.are=new r.Sprite.from(t),this.addChild(this.are),this.are.anchor.set(.5),this.circleMask=new o,this.count=new r.Text("2",{fill:"#252525"}),this.count.anchor.set(1,1),this.count.x=50,this.count.y=50,this.interactive=!0,this.buttonMode=!0,this.button=new r.Sprite.from(ASSET_URL+"img/ui/"+e),s.instance.desktop&&this.addChild(this.button),this.button.x=-80,this.button.y=-80};a.prototype=Object.create(r.Container.prototype),a.prototype.set=function(t){this.data=t},a.prototype.update=function(){this.circleMask.ratio=this.data.ratio,this.count.text=this.data.count},a.prototype.mousedown=a.prototype.touchstart=function(t){this.data.use()},n.exports=a}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=function(t){r.Container.call(this),this.tick=0,this.ghostItem=new r.Container,this.ghostItem.hitArea=new r.Rectangle,this.ghostItem.visible=!1,this.addChild(this.ghostItem),this.ghostSprite=new r.Sprite.from("brick_drop.png"),this.ghostSprite.anchor.x=this.ghostSprite.anchor.y=.5,this.ghostSprite.position.x=this.ghostSprite.width/2,this.ghostSprite.position.y=100,this.ghostSprite.alpha=1,this.ghostSprite.hitArea=new r.Rectangle,this.ghostLine=new r.Sprite.from("halo_light_add.png"),this.ghostLine.anchor.x=.5,this.ghostLine.blendMode=r.BLEND_MODES.ADD,this.ghostLine.hitArea=new r.Rectangle,this.ghostLine.alpha=1,this.ghostItem.addChild(this.ghostLine),this.ghostItem.addChild(this.ghostSprite),this.randomP=new r.Point,this.bigLines=[],this.addBigLines(),this.pool=[]};s.prototype=Object.create(r.Container.prototype),s.prototype.setTextureColor=function(t){this.ghostSprite.tint=t},s.prototype.setSpriteTexture=function(t,e){this.ghostSprite.scale.x=1;var i=this.ghostSprite.width;this.ghostSprite.scale.x=0,this.ghostSprite.texture=t,this.ghostSprite.position.x=i/2,this.ghostSprite.tint=16777215},s.prototype.reset=function(){},s.prototype.show=function(){Easings.killTweensOf(this.ghostLine),Easings.killTweensOf(this.ghostSprite.scale),this.ghostSprite.scale.x=1;var t=this.ghostSprite.width;this.ghostLine.position.x=t/2,this.ghostSprite.scale.x=0,this.ghostLine.visible=!0,this.ghostItem.visible=!0,this.ghostSprite.scale.y=1,Easings.to(this.ghostSprite.scale,.1,{x:1,ease:Easings.easeOutCirc}),Easings.to(this.ghostLine,.2,{width:t,ease:Easings.easeOutBack,onComplete:function(){}.bind(this)}),this.ghostItem.position.y=0},s.prototype.hide=function(){Easings.killTweensOf(this.ghostLine),Easings.killTweensOf(this.ghostSprite.scale),Easings.to(this.ghostSprite.scale,.1,{x:0,y:2,ease:Easings.easeOutCirc,onComplete:function(){this.ghostItem.visible=!1}.bind(this)}),Easings.to(this.ghostLine,.2,{width:0,ease:Easings.easeOutCirc,onComplete:function(){this.ghostLine.visible=!1}.bind(this)})},s.prototype.addBigLines=function(){for(var t=0;t<5;t++){var e=new r.Sprite.from(ASSET_URL+"img/main/particle_dropline.png");e.anchor.x=.5,e.anchor.y=.5,e.scale.x=.2*Math.random()+.5,e.scale.y=1e3,e.alpha=.4*Math.random()+.1,e.speed=.05*Math.random()-.025,e.tick=2*Math.random()*Math.PI,e.position.x=Math.random()*this.ghostLine.width-this.ghostLine.width/2,e.position.y=this.ghostLine.height/2,this.ghostLine.addChild(e),this.bigLines.push(e)}},s.prototype.addLines=function(){var t=this.pool.pop()||new r.Sprite.from(ASSET_URL+"img/main/particle_dropline.png");t.anchor.x=.5,t.anchor.y=0,t.scale.x=Math.random()+1,t.scale.y=0,t.alpha=Math.random(),t.position.x=Math.random()*this.ghostLine.width-this.ghostLine.width/2,t.position.y=Math.random()*this.ghostLine.height;var e=.2*Math.random()+.2;Easings.to(t.position,e,{y:t.position.y+(100*Math.random()+20)}),Easings.to(t.scale,e,{y:20*Math.random()+20,ease:Easings.easeOutCubic,onComplete:function(){t.anchor.y=1,t.position.y+=t.height,Easings.to(t.position,e,{y:t.position.y+(100*Math.random()+20)}),Easings.to(t.scale,.2*Math.random()+.2,{y:0,ease:Easings.easeOutCubic,onComplete:function(){this.pool.push(t)}.bind(this)})}.bind(this)}),this.ghostLine.addChild(t)},s.prototype.update=function(){this.tick++,this.randomP.x+=.008,this.randomP.y+=.008;var t=perlin.perlin2(this.randomP.x,this.randomP.y);this.ghostSprite.position.y=100+20*Math.sin(this.tick/20),this.ghostSprite.rotation=.5*t,this.tick%10===0&&this.addLines();for(var e=0;e<this.bigLines.length;e++){var t=this.bigLines[e];t.tick+=t.speed,t.position.x=Math.cos(t.tick)*this.ghostSprite.width/2}},s.prototype.resize=function(t,e){},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(78),s=function(t){this.game=t,this.keyboard=new r,this.keyIsDown=!1,this.enadbled=!0,this.currentActiveItem=null,this.dPad=new PIXI.Point,this.keyboard.onKeyPress("up",this.onOnePressed.bind(this)),this.keyboard.onKeyPress("left",this.onTwoPressed.bind(this)),this.keyboard.onKeyPress("down",this.onThreePressed.bind(this))};s.prototype.reset=function(){this.keyIsDown=!1,window.focus()},s.prototype.update=function(t){this.game.paused&&(this.keyIsDown=!1)},s.prototype.onOnePressed=function(){},s.prototype.onTwoPressed=function(){this.game.itemSpawner.bridgeBurn.use()},s.prototype.onThreePressed=function(){this.game.itemSpawner.bombBurn.use()},s.prototype.resize=function(t,e){},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){Keyboard=function(){this._states={up:0,down:1},this._keyCodes={37:{label:"left",state:0,preventBubble:!0},38:{label:"up",state:0,preventBubble:!0},39:{label:"right",state:0,preventBubble:!0},40:{label:"down",state:0,preventBubble:!0},49:{label:"1",state:0,preventBubble:!0},50:{label:"2",state:0,preventBubble:!0},51:{label:"3",state:0,preventBubble:!0},52:{label:"4",state:0,preventBubble:!0},53:{label:"5",state:0,preventBubble:!0},54:{label:"6",state:0,preventBubble:!0},55:{label:"7",state:0,preventBubble:!0},56:{label:"8",state:0,preventBubble:!0},57:{label:"9",state:0,preventBubble:!0},97:{label:"numpad1",state:0,preventBubble:!0},98:{label:"numpad2",state:0,preventBubble:!0},99:{label:"numpad3",state:0,preventBubble:!0},100:{label:"numpad4",state:0,preventBubble:!0},101:{label:"numpad5",state:0,preventBubble:!0},102:{label:"numpad6",state:0,preventBubble:!0},103:{label:"numpad7",state:0,preventBubble:!0},104:{label:"numpad8",state:0,preventBubble:!0},105:{label:"numpad9",state:0,preventBubble:!0},13:{label:"enter",state:0,preventBubble:!0},32:{label:"space",state:0,preventBubble:!0},65:{label:"a",state:0,preventBubble:!0},68:{label:"d",state:0,preventBubble:!0},83:{label:"s",state:0,preventBubble:!0},87:{label:"w",state:0,preventBubble:!0},89:{label:"y",state:0,preventBubble:!0},90:{label:"z",state:0,preventBubble:!0},88:{label:"x",state:0,preventBubble:!0}},this.hash={},this.hashUp={},this.disabled=!1,this.start(),
this.dirty=!1},Keyboard.prototype.start=function(){var t=this;this._onKeyDown=function(e){return t.processKeyDown(e)},this._onKeyUp=function(e){return t.processKeyUp(e)},window.addEventListener("keydown",this._onKeyDown,!1),window.addEventListener("keyup",this._onKeyUp,!1)},Keyboard.prototype.stop=function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp)},Keyboard.prototype.processKeyDown=function(t){if(this.disabled!==!0){var e=t.keyCode;if(this.keyCode=e,this._keyCodes.hasOwnProperty(e)){var i=this._keyCodes[e];i.preventBubble&&t.preventDefault(),i.state!=this._states.down&&(i.state=this._states.down,this.dirty=!0,this.hash[i.label]&&this.hash[i.label](i))}}},Keyboard.prototype.processKeyUp=function(t){if(this.disabled!==!0){var e=t.keyCode;if(this.keyCode=null,this._keyCodes.hasOwnProperty(e)){var i=this._keyCodes[e];i.preventBubble&&t.preventDefault(),i.state!=this._states.up&&(i.state=this._states.up,this.dirty=!0,this.hashUp[i.label]&&this.hashUp[i.label](i))}}},Keyboard.prototype.isPressed=function(t){var e=this.getCodeFromLabel(t);return!!e&&this._keyCodes[e].state===this._states.down},Keyboard.prototype.getCodeFromLabel=function(t){for(var e in this._keyCodes)if(this._keyCodes[e].label===t)return e;return!1},Keyboard.prototype.onKeyPress=function(t,e){this.hash[t]=e},Keyboard.prototype.onKeyRelease=function(t,e){this.hashUp[t]=e},i.exports=Keyboard}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=(i(10),i(80),i(42),i(45),i(37)),o=i(75),a=i(25),h=i(81),s=i(37),l=(i(82),i(83)),c=i(85),u=function(t){this.game=t,r.Container.call(this),this.score=0,this.distance=0,this.count=0;var e=s.getTexturesFromFramesWithPrefix("pickup/coin_pickup_000%%.png",30,0,!1);this.pickupIcon=new r.Sprite(e[0]),this.pickupIcon.textures=e,this.pickupIcon.counter=0,this.pickupIcon.tint=16776960,this.pickupIcon.speed=.6,this.pickupIcon.anchor.x=this.pickupIcon.anchor.y=.5,this.pickupIcon.scale.x=this.pickupIcon.scale.y=.6,this.pickupIcon.x=40,this.pickupIcon.y=90,this.addChild(this.pickupIcon);var i={fill:"white",font:"40px Ubuntu"},n={fill:"white",font:"40px Ubuntu"};this.pickupText=new r.BitmapText("0",i),this.pickupText.x=80,this.pickupText.y=90,this.pickupText.anchor.y=.5,this.addChild(this.pickupText),this.distanceText=new r.BitmapText("0"+translations.STR_GAME_DISTANCE_UNIT,n),this.distanceText.x=20,this.distanceText.y=30,this.distanceText.anchor.y=.5,this.addChild(this.distanceText),this.hudAchievements=new l,this.hudAchievements.position.y=180,this.addChild(this.hudAchievements),this.batDistance=0,this.hand=new c,this.addChild(this.hand)};u.prototype=Object.create(r.Container.prototype),u.prototype.moveDownAchievements=function(){},u.prototype.moveUpAchievements=function(){},u.prototype.forceChangeDistance=function(t,e){var i=this.batDistance+(1===t?-200:200);i<0&&(i=0),this.batForcedDistance=!0,this.batDistance===i&&(this.batForcedDistance=!1),EasingsGame.to(this,e,{batDistance:i,onComplete:function(){this.batForcedDistance=!1}.bind(this)})},u.prototype.hide=function(t){return this.isHidden=!0,t?void(this.alpha=0):(this.hudAchievements.position.x=-200,void Easings.to(this,.4,{alpha:0}))},u.prototype.show=function(t){return this.isHidden=!1,t?void(this.alpha=1):(Easings.to(this,.4,{alpha:1}),void Easings.to(this.hudAchievements.position,.5,{delay:1,ease:Easings.easeOutBack,x:65}))},u.prototype.onPausePressed=function(){this.game.reset()},u.prototype.addIcon=function(t,e,i,n,r){var e=new o(ASSET_URL+"img/ui/"+e,i);return e.x=n,e.y=r,a.instance.desktop&&e.scale.set(.5),e.set(t),e},u.prototype.reset=function(){this.hand.visible=!1,this.batForcedDistance=!1,this.hand.reset(),this.batDistance=0,this.score=0,this.distance=0,this.currentDistance=0,this.playerStartX=this.game.player.position.x,this.hudAchievements.position.x=-180,this.hudAchievements.reset()},u.prototype.updateDistance=function(t){this.distance=t+Math.floor(this.batDistance),this.distanceText.text=this.distance+translations.STR_GAME_DISTANCE_UNIT,h.instance.update("walk",t,!1)},u.prototype.removePickups=function(t){var e=this.score;return this.score-=t,this.score<0?(this.score=0,this.pickupText.text=this.score,e):(this.pickupText.text=this.score,t)},u.prototype.updatePickups=function(t){this.score+=t,this.pickupText.text=this.score},u.prototype.onDetailFinish=function(t){},u.prototype.update=function(){this.isHidden||(this.hand.update(),this.pickupIcon.counter+=this.pickupIcon.speed,this.pickupIcon.texture=this.pickupIcon.textures[Math.floor(this.pickupIcon.counter%this.pickupIcon.textures.length)],this.count++,this.count>(this.batForcedDistance?2:30)&&(this.count=0,this.currentDistance=Math.floor(Math.max(this.currentDistance,this.game.player.position.x-this.playerStartX)/100),this.updateDistance(this.currentDistance)),this.hudAchievements.update())},u.prototype.showGameover=function(){},u.prototype.onGameoverComplete=function(){},u.prototype.resize=function(t,e){this.w=t,this.h=e,!a.instance.desktop},n.exports=u}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=(i(42),i(10)),o=function(){r.Text.call(this,"YAY",{font:"26px chunkfiveroman",fill:"#eaff32",dropShadow:!0}),this.anchor.set(.5),this.count=0,this.multiplierColors=["#eaff32","#ffd300","#ff70df","#00ebff"],this.onFinish=new s};o.prototype=Object.create(r.Text.prototype),o.prototype.setup=function(t,e,i,n){this.x=t,this.y=e,this.speed=5,this.alpha=1,this.count=0,this.scale.x=this.scale.y=0,TweenLite.to(this.scale,.5,{x:1+.2*(n-1),y:1+.2*(n-1),ease:Elastic.easeOut}),this.style.fill=this.multiplierColors[(n-1)%4],this.text=i+(n>1?"x"+n:"")},o.prototype.updateTransform=function(){r.Text.prototype.updateTransform.call(this),this.speed*=.95,this.position.y-=this.speed,this.count++,this.count>20&&(this.alpha*=.95),this.alpha<.3&&this.onFinish.dispatch(this)},n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(10),s=i(20),o=i(65),a=function(t){this.config=null,this.achievementUnlocked=new r,this.allAchievementsCollected=new r,this.allLevelsComplete=new r,this.onSave=new r,this.debug=!1,this.noSave=!1,this.totalAchievements=0,this.achievedInGroup=0,this.achievementList={},this.groups=[],this.groupHash={},this.totalGroups=0,this.currentGroup="",this.currentGroupIndex=0,this.active=!0,this.storage=new o(t),this.save=this.getSave()};a.prototype.validate=function(t){var e=t.goals,i=t.groups,n={};for(var r in i)for(var s=i[r],o=0;o<s.achievements.length;o++){var a=s.achievements[o];e[a]&&(n[a]||(n[a]=!0))}},a.prototype.saveLoaded=function(){this.achievementList&&(this.achievementList=this.merge(this.achievementList,this.save.medals))},a.prototype.merge=function(t,e){for(var i,n={},r=0,s=arguments.length;r<s;r++)for(i in arguments[r])arguments[r].hasOwnProperty(i)&&(n[i]=arguments[r][i]);return n},a.prototype.load=function(t,e){if(this.config=t||s.getJson("goals"),e)for(var i in this.config.goals){var n=this.config.goals[i];n.desc=e[n.desc],n.id=i}this.config||(t?this.config=t:(this.config={goals:{},groups:{level1:{desc:"Dummy empty object, must have the 'achievement' property and it must be an array",achievements:[]}}},this.noSave=!0)),this.validate(this.config);var r=Object.keys(this.config.groups);this.totalGroups=r.length,""===this.save.currentGroup||this.noSave?this.loadGroup(r[0]):(this.currentGroup=this.save.currentGroup,this.loadGroup(this.currentGroup))},a.prototype.loadNextGroup=function(){var t=this.getGroupIndex(this.currentGroup);if(t!==-1){if(t++,t>=this.totalGroups)return this.allLevelsComplete.dispatch(),this.active=!1,!1;var e=Object.keys(this.config.groups),i=e[t];return this.loadGroup(i),this.saveStatus(),this.currentGroupIndex=t-1,!0}this.active=!1},a.prototype.getGroupIndex=function(t){var e=Object.keys(this.config.groups);return e.indexOf(t)},a.prototype.getGroupByName=function(t){return this.groupHash[t]},a.prototype.loadSpecificGroup=function(t){for(var e=this.achievementList,i=this.config.groups[t],n=[],r=0;r<i.achievements.length;r++){var s=this.config.goals[i.achievements[r]];for(var o in e)e[o][0].id===s.id&&e[o][0].achieved&&(s.achieved=!0);n.push(s)}return n},a.prototype.loadGroup=function(t){this.currentGroup=t;for(var e=this.config.groups[t],i=0;i<e.achievements.length;i++){var n=e.achievements[i],r=this.config.goals[n];r.achieved=!1,this.debug,this.achievementList.hasOwnProperty(r.property)===!1&&(this.achievementList[r.property]=[]),r.completion=r.value/r.target*100,r.group=t,this.achievementList[r.property].push(r),this.totalAchievements++}this.reset(),this.achievementList=this.merge(this.achievementList,this.save.medals);var e=[];for(var s in this.achievementList)for(var o=this.achievementList[s],i=0;i<o.length;i++){var r=o[i];r.group===t&&e.push(r)}this.groups.push(e);var a=this.config.groups[t];this.groupHash[t]={desc:a.desc,achievements:e},this.debug},a.prototype.getLastAchievements=function(){return this.groups[this.groups.length-1]},a.prototype.increment=function(t,e){this.update(t,e,!0)},a.prototype.update=function(t,e,i){if(this.active){var n=!1;if(this.achievementList.hasOwnProperty(t))for(var r=this.achievementList[t],s=0;s<r.length;s++){var o=r[s];if(o.achieved===!1)switch(n=!0,i?o.value+=e:o.value=Math.max(o.value,e),o.type){case"=":o.completion=Math.floor(o.value/o.target*100),o.value>=o.target&&(o.completion=100,o.achieved=!0,this.receiveAchievement(o))}}n===!0&&this.isListComplete()&&(this.debug,this.allAchievementsCollected.dispatch())}},a.prototype.isListComplete=function(){for(var t in this.achievementList)if(this.achievementList.hasOwnProperty(t))for(var e=this.achievementList[t],i=0;i<e.length;i++){var n=e[i];if(n.achieved===!1)return!1}return!0},a.prototype.reset=function(){for(var t in this.achievementList)if(this.achievementList.hasOwnProperty(t))for(var e=this.achievementList[t],i=0;i<e.length;i++){var n=e[i];n.achieved!==!1||n.cumulative&&n.cumulative!==!1||(n.completion=0,n.value=0)}},a.prototype.receiveAchievement=function(t){this.debug,this.achievementUnlocked.dispatch(t),this.saveStatus()},a.prototype.goalsRemaining=function(){return this.achievementList.length-this.goalsCompleted()},a.prototype.getAll=function(){return JSON.parse(JSON.stringify(this.achievementList))},a.prototype.getAllGroups=function(){var t=this.config,e=[];for(var i in this.achievementList){var n=this.achievementList[i];e.push(n)}e=e.reduce(function(t,e){return t.concat(e)}),descs=e.reduce(function(t,e){return t[e.desc]=e,t},{});var r=[];for(var i in t.groups)for(var s=t.groups[i],o=0;o<s.achievements.length;o++){var a=s.achievements[o];if(t.goals.hasOwnProperty(a)){var h=t.goals[a];descs.hasOwnProperty(h.desc)&&(h.completion=descs[h.desc].completion||0,h.achieved=descs[h.desc].achieved||!1),r.push(h)}}return r},a.prototype.goalsCompleted=function(){var t=0;for(var e in this.achievementList)for(var i=this.achievementList[e],n=0;n<i.length;n++){var r=i[n];r.achieved===!0&&t++}return t},a.prototype.getSave=function(){var t=this.storage.getObject("save");return t?t:(t=new h,this.storage.storeObject("save",t),t)},a.prototype.saveStatus=function(){this.noSave||(this.debug,this.save.medals=this.achievementList,this.save.currentGroup=this.currentGroup,this.storage.storeObject("save",this.save),this.onSave.dispatch())},a.prototype.saveAndReset=function(){this.reset(),this.saveStatus()};var h=function(){this.medals={},this.currentGroup=""};n.exports=a}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(64),i(20),i(60)),s=i(81),o=function(){this.goals=null,this.levelComplete=!1,this.completedLevel=[],this.completedGoals=[],this.goalComplete=!1,this.allComplete=!1};o.prototype.init=function(t){this.goals=t,this.goals.achievementUnlocked.add(this.onSingleGoalComplete,this),this.goals.allAchievementsCollected.add(this.onLevelComplete,this),this.goals.allLevelsComplete.add(this.onAllComplete,this)},o.prototype.getLastAchievements=function(){for(var t=[],e=s.instance.getLastAchievements(),i=0;i<e.length;i++)e[i].achieved||t.push(e[i]);return t},o.prototype.restart=function(){this.goals.active=!0,this.levelComplete=!1,this.completedLevel=[],this.goalComplete=!1,this.completedGoals=[]},o.prototype.onSingleGoalComplete=function(t){this.completedGoals.push(t),this.goalComplete=!0,r.achievementUnlocked()},o.prototype.onAllComplete=function(){this.allComplete=!0},o.prototype.onLevelComplete=function(){this.completedLevel=this.goals.getLastAchievements(),this.goals.loadNextGroup(),this.goals.active=!1,this.levelComplete=!0,r.achievementGroupComplete()},o.instance=new o,n.exports=new o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=(i(10),i(81),i(82)),o=i(84),a=i(61),h=i(34),l=function(t){r.Container.call(this),this.owner=t,this.icons=[],this.poolIcons=[],this.poolParticles=[],this.particles=[],this.delayedCalls=new a};l.prototype=Object.create(r.Container.prototype),l.prototype.addParticles=function(){for(var t=0;t<10;t++){var e=this.poolParticles.pop();e||(e=new r.Sprite.from(ASSET_URL+"img/main/particle.png"),e.speed={x:0,y:0,r:0},e.anchor.x=e.anchor.y=.5,e.blendMode=r.BLEND_MODES.ADD);var i=2*Math.PI/10*t;e.life=10+10*Math.random(),e.alpha=1,e.x=Math.cos(i)*(30*Math.random()+10),e.y=Math.sin(i)*(30*Math.random()+10),e.speed.x=Math.cos(i)*(3-Math.random()),e.speed.y=Math.sin(i)*(3-Math.random()),e.speed.r=.3*Math.random()-.15,this.particles.push(e),this.addChild(e)}},l.prototype.achievementComplete=function(t){h.sfx.play("achieve_get"),t.animateTick(.2),this.delayedCalls.add(this.addParticles.bind(this),.1),this.delayedCalls.add(function(){t.bg.scale.set(.8),EasingsGame.to(t.bg.scale,.4,{x:1,y:1,ease:EasingsGame.elasticOut,onComplete:function(){EasingsGame.to(t,.2,{alpha:0,onComplete:function(){this.removeChild(t)}.bind(this)})}.bind(this)})}.bind(this),.1);for(var e=0;e<this.icons.length;e++)this.icons[e]===t?(this.poolIcons.push(this.icons[e]),this.icons.splice(e,1),e--):EasingsGame.to(this.icons[e].position,.2,{delay:.1*e+.5,y:90*e})},l.prototype.update=function(){for(var t=0;t<this.icons.length;t++)this.icons[t].update();for(var t=0;t<this.particles.length;t++){var e=this.particles[t];e.position.x+=e.speed.x,e.position.y+=e.speed.y,e.rotation+=e.speed.r,e.speed.r*=.96,e.speed.x*=.96,e.speed.y+=.2,e.life<0?(e.alpha*=.9,e.alpha<.01&&(this.poolParticles.push(e),this.particles.splice(t,1),t--)):e.life--}},l.prototype.reset=function(){this.removeChildren();for(var t=0;t<this.icons.length;t++)this.poolIcons.push(this.icons[t]);this.icons=[];for(var e=s.getLastAchievements(),t=0;t<e.length;t++)e[t].achieved&&(e.splice(t,1),t--);for(var t=0;t<e.length;t++){var i=this.poolIcons.pop()||new o;i.position.x=0,i.position.y=90*t,i.alpha=1,i.onComplete.addOnce(this.achievementComplete,this),i.reset(e[t]),this.icons.push(i),this.addChild(i)}},n.exports=l}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(10),o=i(81),a=i(34),h=function(){r.Container.call(this),this.onComplete=new s,this.bg=new r.Sprite.from("icon_frame.png"),this.bg.anchor.set(.5),this.addChild(this.bg),this.icon=new r.Sprite,this.icon.anchor.set(.5),this.bg.addChild(this.icon);var t={font:"20px "+window.MAIN_FONT,fill:"#FFFFFF",dropShadow:!0,dropShadowDistance:2,dropShadowColor:"rgba(0,0,0,0.5)"};this.text=new r.Text("",t),this.text.anchor.set(.5),this.tick=new r.Sprite.from("panel_achievement_check.png"),this.tick.anchor.x=this.tick.anchor.y=.5,this.bg.addChild(this.tick),this.bg.addChild(this.text),this.style={font:"30px "+window.MAIN_FONT,fill:"#FFFFFF",dropShadow:!0,dropShadowDistance:2,dropShadowColor:"rgba(0,0,0,0.5)"},this.desc=new r.Text("",this.style),this.desc.anchor.set(0,.5),this.addChild(this.desc),this.goal=null,this.line=new r.Sprite.from(ASSET_URL+"img/main/particle_dropline.png"),this.line.scale.x=0,this.desc.addChild(this.line)};h.prototype=Object.create(r.Container.prototype),h.prototype.update=function(){},h.prototype.addParticles=function(){},h.prototype.animateTick=function(t,e){t=t||.2,this.tick.visible=!0,a.sfx.play("achieve_tick"),e?(this.tick.scale.x=this.tick.scale.y=1,this.bg.alpha=.5):EasingsGame.to(this.tick.scale,t,{x:1,y:1,ease:EasingsGame.easeOutBack,onComplete:function(){this.bg.alpha=.5,this.addParticles()}.bind(this)})},h.prototype.stroke=function(t){t?(this.line.scale.x=this.desc.width/2,this.bg.alpha=.5):Easings.to(this.line.scale,.2,{x:this.desc.width/2,ease:Easings.easeOutCirc})},h.prototype.onSingleGoalComplete=function(t){t.id===this.id&&this.onComplete.dispatch(this)},h.prototype.reset=function(t,e){this.tick.scale.set(5),this.tick.visible=!1,this.alreadyAchieved=!1,this.data=t,this.line.scale.x=0,this.bg.scale.set(1),this.bg.alpha=1,this.icon.texture=r.Texture.from(t.icon);var i="";t.achieved===!1&&Math.round(t.completion)>0&&(i=window.FLIP_PERCENT?" (%"+Math.round(t.completion)+")":" ("+Math.round(t.completion)+"%)"),this.text.text=translations[t.desc_icon],this.text.position.y=18,this.id=t.id,o.instance.achievementUnlocked.add(this.onSingleGoalComplete,this),e?(this.desc.visible=!0,this.desc.text=t.desc+i,this.desc.position.x=this.icon.width/2+15):this.desc.visible=!1},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=(i(47),i(58),i(51),function(){r.Container.call(this),this.view=new r.Sprite.from("tuto_hand.png"),this.view.anchor.x=0,this.view.position.x=200,this.view.position.y=200,this.tick=0,this.desktop=Device.instance.desktop,this.desktop&&(this.view.rotation=Math.PI/2),this.cosinusXValue=50,this.cosinusYValue=50,this.addChild(this.view),this.containerCircle=new r.Container,this.addChild(this.containerCircle),this.pool=[],this.activeCircle=[]});s.prototype=Object.create(r.Container.prototype),s.prototype.state1=function(){EasingsGame.killTweensOf(this.view.position),this.state2active=!1,this.visible=!0,this.view.position.x=0,this.view.position.y=0,this.desktop?(this.cosinusX=!1,this.cosinusY=!0):(this.cosinusXValue=50,EasingsGame.to(this.view,.2,{rotation:0}),this.cosinusX=!0,this.cosinusY=!1)},s.prototype.state2=function(){this.tick=0,this.circleAnimating=!0,this.state2active=!0,this.view.position.x=0,this.view.position.y=0,this.cosinusXValue=200,this.desktop?(this.cosinusX=!1,this.cosinusY=!0):(EasingsGame.to(this.view,.2,{rotation:Math.PI/2}),this.cosinusX=!1,this.cosinusY=!0)},s.prototype.addCircle=function(){for(var t=0;t<2;t++){var e=this.pool.pop();e||(e=new r.Sprite.from("tap_ui.png"),e.anchor.set(.5)),e.position.x=this.view.position.x-this.view.width/4,e.position.y=this.view.position.y+this.view.height,this.containerCircle.addChild(e),e.alpha=1,e.scale.x=e.scale.y=0,this.activeCircle.push(e),EasingsGame.to(e,.4,{alpha:0,delay:.1*t,ease:EasingsGame.easeOutCubic}),EasingsGame.to(e.scale,.8,{x:2,y:2,delay:.1*t,ease:EasingsGame.easeOutCubic})}},s.prototype.animateHand=function(){EasingsGame.to(this.view.position,.4,{x:200*Math.random(),ease:EasingsGame.easeOutSine})},s.prototype.reset=function(){for(var t=0;t<this.activeCircle.length;t++)this.pool.push(this.activeCircle[t]);this.activeCircle=[],this.containerCircle.removeChildren(),this.tick=0,this.cosinusX=!1,this.cosinusY=!1,this.cosinusXValue=50,this.cosinusYValue=50},s.prototype.update=function(){this.tick++,this.cosinusY&&(this.view.position.y=30*Math.cos(this.tick/10)),this.cosinusX&&(this.view.position.x=Math.cos(this.tick/20)*this.cosinusXValue),this.state2active&&(Math.cos(this.tick/10)<0?this.circleAnimating=!1:Math.cos(this.tick/10)>=.9&&!this.circleAnimating&&(this.circleAnimating=!0,this.addCircle()),this.tick%120===0&&this.animateHand());for(var t=0;t<this.activeCircle.length;t++){var e=this.activeCircle[t];e.scale>=2&&(EasingsGame.killTweensOf(e.scale),EasingsGame.killTweensOf(e),this.pool.push(e),this.containerCircle.removeChild(e),this.activeCircle.splice(t,1))}},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(10),o=i(41),a=i(47),h=i(58),l=(i(37),i(9)),c=i(87),u=i(81),p=i(89),d=i(92),f=i(93),m=i(33),g=i(42),v=i(95),u=i(81),y=h.PLAYER_STATE,_=function(){var t=new a.CrashBody.fromRect(-h.BLOCK_WIDTH/2,(-h.BLOCK_HEIGHT),h.BLOCK_WIDTH,2*h.BLOCK_HEIGHT),e=new r.Container;this.spine=new p,this.tick=0,this.chargeTarget=1,this.chargeOffset=1,this.spine.load(ASSET_URL+"model/squirrelv5.json",function(){e.player=this.spine.animation,e.player.pivot.y=-65,this.spineLoaded(),e.addChild(e.player),this.spine.animation.state.timeScale=.6},this),e.layer="front",t.gravity=1,t.friction=.98,t.setMaxSpeed(1e3),o.call(this,100,-300,e,t),this.count=0,this.name="player",this.stopBrickCollisionCheck=!1,this.body.position=this.position,this.view.position=new r.Point,this.type=h.TYPES.PLAYER,this.groups=["Player"],this.state=y.WALKING,this.isJumping=!1,this.lastGround=0,this.line=new r.Sprite.from("drop_marker.png"),this.line.height=1600,this.line.anchor.x=1,this.line.blendMode=r.BLEND_MODES.ADD,this.line.position.x=300,this.line.position.y=-800,this.signals={onDead:new s},this.springCount=0,this.speed=1,this.defaultSpeedCharacter=.6,this.slowMoSpeed=1,this.delayedCalls=new c,this.grid=d.instance,this.explodable=new f(this),this.bouncey=0,this.lastOnGround=0,this.walkLoop=m.sfx.play("walking_loop"),this.walkLoop={volume:function(){}},this.reentryContainer=new r.Container,this.reentryContainer.visible=!1,this.view.addChild(this.reentryContainer);var i=new r.Sprite.from("reentry_glow.png");i.anchor.set(.5),i.blendMode=r.BLEND_MODES.ADD,i.position.y=-10,this.reentryContainer.addChild(i);var n=new r.Sprite.from("reentry_edges.png");n.position.y=-50,n.anchor.set(.5),n.blendMode=r.BLEND_MODES.ADD,this.reentryContainer.addChild(n)};_.prototype=Object.create(o.prototype),_.prototype.stopSlowMo=function(){this.isStretching=!1,this.setState(y.WALKING),EasingsGame.to(this,.2,{slowMoSpeed:1,onComplete:function(){this.slowMoSpeed=1}.bind(this)})},_.prototype.speedUp=function(){Device.instance.desktop||(this.world.game.controller.type=null),this.chargeTarget=3},_.prototype.speedDown=function(){this.chargeTarget=1},_.prototype.slowMo=function(){EasingsGame.to(this,.2,{slowMoSpeed:0,onComplete:function(){this.slowMoSpeed=0,this.setState(y.STRETCHING)}.bind(this)})},_.prototype.spineLoaded=function(){this.spineOnScene||this.setState(y.STRETCHING)},_.prototype.knockBack=function(){},_.prototype.start=function(){this.setState(y.WALKING)},_.prototype.reset=function(){this.isTripleJumping=!1,this.isFallingPosing=!1,this.isAtmosphereEntry=!1,this.isFalling=!1,this.isFalling2=!1,this.bat=null,this.tick=0,this.view.alpha=1,this.isRunning=!1,this.speed=1,this.slowMoSpeed=1,this.spineOnScene=!0,this.body.reset(),this.isJumping=!1,this.position.x=100,this.position.y=300,this.stopBrickCollisionCheck=!1,this.canCollide=!0,this.isWaitingToWalk=!1,this.setState(y.STRETCHING),this.view.player?(this.spineOnScene=!0,this.spine.animation.state.timeScale=this.defaultSpeedCharacter):this.spineOnScene=!1},_.prototype.jump=function(t){if(this.state!==y.CRASHING&&this.state!==y.STRETCHING){t=t||{x:1,y:1},u.instance.increment("jump",1),this.isJumping=!0,this.onGround=!1;this.body.velocity.y=-34.5*t.y,this.body.velocity.x=7.15*t.x,this.springCount++,this.springCount=Math.min(this.springCount,3),(t.x>=1||t.y>=1)&&(3===this.springCount?(this.spine.play("acrobat_1"),this.isTripleJumping=!0,u.instance.increment("triple_jump",1),m.sfx.play("bounce_3")):(this.spine.play("jump_new"),m.sfx.play("bounce_1_2")))}},_.prototype.setState=function(t){if(this.reentryContainer.visible=!1,this.state=t,t===y.WALKING)this.view.rotation=0,this.body.solid=!0,this.spine.play("walk");else if(t===y.RUNNING_FAST)this.view.rotation=0,this.body.solid=!0,this.spine.play("run_new");else if(t===y.STRETCHING){this.isStretching=!0,this.view.rotation=0,this.body.solid=!0;var e=["stretch","idle","dance"],i=Math.floor(Math.random()*e.length);this.spine.play(e[i])}else if(t===y.CRASHING){if(this.itemCollisionId!==this.lastCollisionItemId){var n=this.world.game.hud.removePickups(10),r=g.getObject(v);r.reset(),r.fire(n),r.position.x=this.position.x-50,r.position.y=this.position.y,this.world.add(r)}this.lastCollisionItemId=this.itemCollisionId,this.spine.play("crash"),this.body.velocity.x=-30,this.body.velocity.y=-40}else t===y.BAT_ATTACKED||(t===y.ATMOSPHERE_ENTRY?(this.spine.play("falling_pose_4"),this.reentryContainer.visible=!0):t===y.FALLING?(this.body.solid=!1,this.spine.play("falling_pose_4")):t===y.FALLING_POSING&&this.spine.play("falling_pose_"+(Math.floor(2*Math.random())+1)));this.spine.animation&&(this.spine.animation.state.timeScale=this.defaultSpeedCharacter)},_.prototype.slowdown=function(){this.isJumping||this.setState(y.WALKING),this.isRunning=!1,EasingsGame.to(this,.2,{speed:1})},_.prototype.accelerate=function(){this.setState(y.RUNNING_FAST),this.isRunning=!0,EasingsGame.to(this,.2,{speed:4})},_.prototype.die=function(){this.canCollide=!1,this.setState(y.FALLING)},_.prototype.crash=function(){this.state!==y.CRASHING&&(m.sfx.playGroup("squeak_fall"),this.setState(y.CRASHING),this.view.rotation=0,this.onGround=!1)},_.prototype.fly=function(t,e){this.spine.play("bat_throw"),this.bat=null,this.body.active=!1,this.onGround=!1,EasingsGame.to(this.body.position,e/2,{y:this.body.position.y-200,onComplete:function(){EasingsGame.to(this.body.position,e/2,{delay:e/2,ease:Easings.easeInCubic,y:280,onComplete:function(){this.body.active=!0,this.setState(y.WALKING),this.world.view.camera.resetTarget(),m.sfx.playGroup("landing"),this.world.view.camera.shake(null,60)}.bind(this)})}.bind(this)}),EasingsGame.to(this.body.position,e/2,{delay:e,y:280,ease:Easings.easeOutCubic,onComplete:function(){this.body.active=!0,this.setState(y.WALKING),this.world.view.camera.resetTarget(),m.sfx.playGroup("landing"),this.world.view.camera.shake(null,60)}.bind(this)}),EasingsGame.to(this.world.view.camera.specificTargetOffset,1,{delay:e,x:this.world.view.camera.viewWidth/2-160})},_.prototype.update=function(){var t=this.state;this.chargeTarget>this.chargeOffset?this.chargeOffset+=.1*(this.chargeTarget-this.chargeOffset):this.chargeOffset+=.3*(this.chargeTarget-this.chargeOffset);var e=this.chargeOffset;return this.state!==y.BAT_ATTACKED?this.onGround?2===this.lastOnGround++&&(m.sfx.playGroup("landing"),this.isFalling=!1,this.isFalling2=!1,this.nbFramesFalling=0,(this.isAtmosphereEntry||this.isFallingPosing)&&(this.isAtmosphereEntry&&this.world.game.app.flash(),this.body.gravity=1,this.world.view.camera.shake(null,50),this.world.view.camera.resetTarget(),this.isAtmosphereEntry=!1,this.isFallingPosing=!1,this.setState(y.WALKING))):(this.lastOnGround=0,(this.position.y<-1200||this.isFalling)&&!this.isAtmosphereEntry&&this.body.velocity.y>0?(this.isFalling=!0,this.nbFramesFalling++,this.nbFramesFalling>30&&(this.isAtmosphereEntry=!0,this.body.gravity=.3,EasingsGame.to(this.body,.6,{gravity:1}),this.world.view.camera.changeTarget(this),this.setState(y.ATMOSPHERE_ENTRY),this.world.game.worldSpawner.destroyLevel(),this.world.game.worldSpawner.addBatSafeArea())):(this.position.y<-600||this.isFalling2)&&!this.isFallingPosing&&this.body.velocity.y>0&&!this.isAtmosphereEntry&&!this.isFalling&&(this.isFalling2=!0,this.nbFramesFalling++,this.nbFramesFalling>20&&(this.isFallingPosing=!0,this.body.gravity=.3,EasingsGame.to(this.body,.6,{gravity:1}),this.world.view.camera.changeTarget(this),this.setState(y.FALLING_POSING))),this.isAtmosphereEntry&&(this.tick++,this.tick%5===0&&this.world.view.camera.shake(null,20*Math.random()+10))):(this.tick++,this.tick%10===0&&this.world.view.camera.shake(null,5*Math.random())),this.body.velocity.y>0?(this.view.position.y+=.3*(this.position.y-this.view.position.y),this.isTripleJumping&&(this.isTripleJumping=!1,this.spine.play("jump_new"))):this.view.position.y=this.position.y,this.view.position.x=this.position.x,this.walkLoop.volume(0),t===y.BAT_ATTACKED?void(this.bat&&(this.position.x=this.bat.position.x,this.position.y=this.bat.position.y+150,this.view.rotation=-30*Math.PI/180)):(this.view.rotation=0,t===y.WALKING||t===y.RUNNING_FAST?(this.onGround&&(this.body.velocity.x*=.9,this.isJumping&&(this.isRunning?(this.setState(y.RUNNING_FAST),e=1):this.setState(y.WALKING),this.isJumping=!1),this.walkLoop.volume(1)),this.onGround=!1,this.spine.timeScale=.6*e,this.position.x+=3*l.game.speed*this.speed*this.slowMoSpeed*e):t===y.CRASHING?(this.onGround?(this.body.velocity.x*=.8,m.sfx.playGroup("landing"),this.isWaitingToWalk=!0,this.setState(y.WALKING),this.isJumping=!1):this.body.velocity.y+=2,this.onGround=!1,this.position.y>800&&this.signals.onDead.dispatch()):t===y.FALLING?this.position.y>800&&this.signals.onDead.dispatch():t===y.STRETCHING&&(this.tick++,this.tick%120===0&&this.setState(y.STRETCHING)),void this.spine.update())},_.prototype.catchedByBat=function(t){this.spine.play("bat_pick_up"),this.world.view.camera.changeTarget(this),this.setState(y.BAT_ATTACKED),this.bat=t},_.prototype.onCollideBegin=function(t){if(this.state!==y.CRASHING&&this.state!==y.FALLING){var e=t.getOtherObject(this),i=1*h.BLOCK_HEIGHT;if(e.type===h.TYPES.DROP)return this.signals.onDead.dispatch(),void this.die();if(e.type===h.TYPES.SPEED_DOOR)return void this.accelerate();if(e.type===h.TYPES.SPEED_DOOR_END)return void this.slowdown();if(e.type!==h.TYPES.FLOOR&&e.type!==h.TYPES.BRIDGE||(this.springCount=0,this.lastGround=this.body.position.y),0===t.projection.y){if(e.type===h.TYPES.FLOOR||e.type===h.TYPES.BRIDGE||e.type===h.TYPES.NO_KILL_FLOOR){e.type===h.TYPES.BRIDGE;var n=this.body,r=e.body,s=n.shape.y+n.shape.height+n.position.y-(r.shape.y+r.position.y);if(s<=i)this.stopBrickCollisionCheck=!0,s<i/2?this.body.position.y-=s+1:this.jump({x:0,y:.5});else if(r.active||e.type===h.TYPES.NO_KILL_FLOOR)e.type===h.TYPES.NO_KILL_FLOOR&&e.position.y<this.position.y&&(t.ignore=!0);else if(e.type===h.TYPES.FLOOR&&(this.itemCollisionId=e.id),this.crash(),e.destroyable)for(var o=this.world.groups.Bridge.children,a=0;a<o.length;a++)o[a].kill()}}else if(e.type===h.TYPES.NO_KILL_FLOOR){var n=this.body,r=e.body,s=n.shape.y+n.shape.height+n.position.y-(r.shape.y+r.position.y);s<=i&&(this.body.position.y-=s+1,this.stopBrickCollisionCheck=!0),e.position.y<this.position.y?t.ignore=!0:t.ignore=!1}e.type===h.TYPES.ENEMY&&(this.itemCollisionId=e.id)}},n.exports=_}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(9),s=i(88),o=function(){s.call(this),this.updateDelayedCalls=s.prototype.update};o.prototype=Object.create(s.prototype),o.prototype.update=function(){r.game.active&&this.updateDelayedCalls()},n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(9)),s=function(){this.delayedCalls=[]};s.prototype.clear=function(){this.delayedCalls=[],r.instance.remove(this.update,this),this.updating=!1},s.prototype.add=function(t,e,i){var n={func:t,args:i,tick:0,delay:e,"delete":!1};return this.delayedCalls.push(n),this.updating||(r.instance.add(this.update,this),this.updating=!0),this.delayedCalls.length-1},s.prototype.getRemainingTime=function(t){var e=this.delayedCalls[t];return e&&e.delay?60*e.delay-e.tick:0},s.prototype.update=function(){for(var t=0;t<this.delayedCalls.length;t++){var e=this.delayedCalls[t];e.tick++,e.tick>60*e.delay&&(e.func(e.args),e["delete"]=!0)}for(var t=0;t<this.delayedCalls.length;t++){var e=this.delayedCalls[t];e["delete"]&&(this.delayedCalls.splice(t,1),t--)}0===this.delayedCalls.length&&(r.instance.remove(this.update,this),this.updating=!1)},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=(i(51),i(90),i(10),i(91)),o=function(t){this.item=t,this.currentAnimationId=null,this.loadCb=null,this.loadCbScope=null,this.timeScale=1};o.prototype.load=function(t,e,i){this.id=t,this.loadCb=e,this.loadCbScope=i,r.loader.resources[t]?r.loader.resources[t].spineData&&this.onLoaded():r.loader.add(t,{metadata:{spineAtlasSuffix:".txt"
}}).load(function(t,e){this.onLoaded()}.bind(this))},o.prototype.onLoaded=function(){var t=new s.Spine(r.loader.resources[this.id].spineData);t.stateData.defaultMix=.2,this.animation=t,this.loadCb&&(this.loadCbScope?this.loadCb.call(this.loadCbScope):this.loadCb())},o.prototype.play=function(t){this.animation&&this.currentAnimationId!==t&&(this.currentAnimationId=t,this.animation.state.setAnimationByName(0,t,!0),this.animation.state.timeScale=this.timeScale)},o.prototype.update=function(){this.animation&&(this.animation.state.timeScale=this.timeScale)},o.id="spine",n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(9),s=i(10),o=function(t,e){this.isOn=!1,this.count=0,this.ticker=e||r.instance,this.duration=60*t,this.onComplete=new s};o.prototype.setDuration=function(t){this.duration=60*t},o.prototype.getDuration=function(){return this.duration/60},o.prototype.start=function(t){this.isOn||(this.ticker.add(this.update,this),this.isOn=!0),t||(this.count=0)},o.prototype.stop=function(){this.isOn=!1,this.ticker.remove(this.update,this)},o.prototype.reset=function(){this.stop(),this.count=0},o.prototype.getRatio=function(){return this.count/this.duration},o.prototype.getSeconds=function(){return this.count/60},o.prototype.getSecondsLeft=function(){return(this.duration-this.count)/60},o.prototype.update=function(){this.count+=this.ticker.deltaTime,this.count>this.duration&&(this.onComplete.dispatch(),this.stop())},n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,n;!function(e){t.exports=e()}(function(){return function t(e,i,r){function s(a,h){if(!i[a]){if(!e[a]){var l="function"==typeof n&&n;if(!h&&l)return n(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return s(i?i:t)},u,u.exports,t,e,i,r)}return i[a].exports}for(var o="function"==typeof n&&n,a=0;a<r.length;a++)s(r[a]);return s}({1:[function(t,e,i){"use strict";function n(){var t=this.parent.worldTransform,e=this.worldTransform,i=this.localTransform;e.a=i.a*t.a+i.b*t.c,e.b=i.a*t.b+i.b*t.d,e.c=i.c*t.a+i.d*t.c,e.d=i.c*t.b+i.d*t.d,e.tx=i.tx*t.a+i.ty*t.c+t.tx,e.ty=i.tx*t.b+i.ty*t.d+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}var r=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},s=t("./core"),o=PIXI.TransformBase;s.Bone.yDown=!0;var a=[0,0,0],h=function(t){function e(e){t.call(this,e)}return r(e,t),e}(PIXI.Sprite);i.SpineSprite=h;var l=function(t){function e(e,i,n,r,s){t.call(this,e,i,n,r,s)}return r(e,t),e}(PIXI.mesh.Mesh);i.SpineMesh=l;var c=function(t){function e(e){if(t.call(this),this.hackTextureBySlotName=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=this.skeleton.findSlotIndex(t);return n!=-1&&this.hackTextureBySlotIndex(n,e,i)},!e)throw new Error("The spineData param is required.");if("string"==typeof e)throw new Error('spineData param cant be string. Please use PIXI.spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');this.spineData=e,this.skeleton=new s.Skeleton(e),this.skeleton.updateWorldTransform(),this.stateData=new s.AnimationStateData(e),this.state=new s.AnimationState(this.stateData),this.slotContainers=[];for(var i=0,n=this.skeleton.slots.length;i<n;i++){var r=this.skeleton.slots[i],o=r.attachment,a=new PIXI.Container;if(this.slotContainers.push(a),this.addChild(a),o instanceof s.RegionAttachment){var h=o.region.name,l=this.createSprite(r,o,h);r.currentSprite=l,r.currentSpriteName=h,a.addChild(l)}else{if(!(o instanceof s.MeshAttachment))continue;var c=this.createMesh(r,o);r.currentMesh=c,r.currentMeshName=o.name,a.addChild(c)}}this.autoUpdate=!0,this.tintRgb=new Float32Array([1,1,1])}return r(e,t),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this.updateTransform===e.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?e.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=PIXI.utils.hex2rgb(t,this.tintRgb)},enumerable:!0,configurable:!0}),e.prototype.update=function(t){this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var e=this.skeleton.drawOrder,i=this.skeleton.slots,r=0,h=e.length;r<h;r++)this.children[r]=this.slotContainers[e[r].data.index];var l=this.tintRgb[0],c=this.tintRgb[1],u=this.tintRgb[2];for(r=0,h=i.length;r<h;r++){var p=i[r],d=p.attachment,f=this.slotContainers[r];if(d){var m=d.color;if(d instanceof s.RegionAttachment){var g=d.region;if(g){var v=g;if(!p.currentSpriteName||p.currentSpriteName!==v.name){var y=v.name;if(p.currentSprite&&(p.currentSprite.visible=!1),p.sprites=p.sprites||{},void 0!==p.sprites[y])p.sprites[y].visible=!0;else{var _=this.createSprite(p,d,y);f.addChild(_)}p.currentSprite=p.sprites[y],p.currentSpriteName=y}}if(f.transform){var x=f.transform,b=void 0;f.transform.matrix2d?(b=x.matrix2d,x._dirtyVersion++,x.version=x._dirtyVersion,x.isStatic=!0,x.operMode=0):o?(x.position&&(x=new PIXI.TransformBase,f.transform=x),b=x.localTransform):(x._dirtyLocal||(x=new PIXI.TransformStatic,f.transform=x),b=x.localTransform,x._dirtyParentVersion=-1,x._dirtyLocal=1,x._versionLocal=1),p.bone.matrix.copy(b),b.tx+=p.bone.skeleton.x,b.ty+=p.bone.skeleton.y}else{var w=f.localTransform||new PIXI.Matrix;p.bone.matrix.copy(w),w.tx+=p.bone.skeleton.x,w.ty+=p.bone.skeleton.y,f.localTransform=w,f.displayObjectUpdateTransform=n}a[0]=l*p.color.r*m.r,a[1]=c*p.color.g*m.g,a[2]=u*p.color.b*m.b,p.currentSprite.tint=PIXI.utils.rgb2hex(a),p.currentSprite.blendMode=p.blendMode}else{if(!(d instanceof s.MeshAttachment)){f.visible=!1;continue}if(!p.currentMeshName||p.currentMeshName!==d.name){var T=d.name;if(p.currentMesh&&(p.currentMesh.visible=!1),p.meshes=p.meshes||{},void 0!==p.meshes[T])p.meshes[T].visible=!0;else{var S=this.createMesh(p,d);f.addChild(S)}p.currentMesh=p.meshes[T],p.currentMeshName=T}if(d.computeWorldVertices(p,p.currentMesh.vertices),"3"!==PIXI.VERSION[0]){var E=p.currentMesh.tintRgb;E[0]=l*p.color.r*m.r,E[1]=c*p.color.g*m.g,E[2]=u*p.color.b*m.b}p.currentMesh.blendMode=p.blendMode}f.visible=!0,f.alpha=p.color.a}else f.visible=!1}},e.prototype.setSpriteRegion=function(t,e,i){e.region=i,e.texture=i.texture,i.size?(e.scale.x=i.size.width/i.originalWidth,e.scale.y=-i.size.height/i.originalHeight):(e.scale.x=t.scaleX*t.width/i.originalWidth,e.scale.y=-t.scaleY*t.height/i.originalHeight)},e.prototype.setMeshRegion=function(t,e,i){e.region=i,e.texture=i.texture,t.updateUVs(i,e.uvs),e.dirty++},e.prototype.autoUpdateTransform=function(){if(e.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},e.prototype.createSprite=function(t,e,i){var n=e.region;t.tempAttachment===e&&(n=t.tempRegion,t.tempAttachment=null,t.tempRegion=null);var r=n.texture,o=new h(r);return o.rotation=e.rotation*s.MathUtils.degRad,o.anchor.x=.5,o.anchor.y=.5,o.position.x=e.x,o.position.y=e.y,o.alpha=e.color.a,o.region=e.region,this.setSpriteRegion(e,o,e.region),t.sprites=t.sprites||{},t.sprites[i]=o,o},e.prototype.createMesh=function(t,e){var i=e.region;t.tempAttachment===e&&(i=t.tempRegion,t.tempAttachment=null,t.tempRegion=null);var n=new l(i.texture,new Float32Array(e.regionUVs.length),new Float32Array(e.regionUVs.length),new Uint16Array(e.triangles),PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);return n.canvasPadding=1.5,n.alpha=e.color.a,n.region=e.region,this.setMeshRegion(e,n,i),t.meshes=t.meshes||{},t.meshes[e.name]=n,n},e.prototype.hackTextureBySlotIndex=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=this.skeleton.slots[t];if(!n)return!1;var r=n.attachment,o=r.region;return e&&(o=new s.TextureRegion,o.texture=e,o.size=i),n.currentSprite&&n.currentSprite.region!=o?(this.setSpriteRegion(r,n.currentSprite,o),n.currentSprite.region=o):n.currentMesh&&n.currentMesh.region!=o?this.setMeshRegion(r,n.currentMesh,o):(n.tempRegion=o,n.tempAttachment=r),!0},e.globalAutoUpdate=!0,e}(PIXI.Container);i.Spine=c},{"./core":34}],2:[function(t,e,i){"use strict";var n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=t("./Utils"),s=t("./attachments"),o=function(){function t(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=i}return t.prototype.apply=function(t,e,i,n,r){if(null==t)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));for(var s=this.timelines,o=0,a=s.length;o<a;o++)s[o].apply(t,e,i,r,1)},t.prototype.mix=function(t,e,i,n,r,s){if(null==t)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));for(var o=this.timelines,a=0,h=o.length;a<h;a++)o[a].apply(t,e,i,r,s)},t.binarySearch=function(t,e,i){void 0===i&&(i=1);var n=0,r=t.length/i-2;if(0==r)return i;for(var s=r>>>1;;){if(t[(s+1)*i]<=e?n=s+1:r=s,n==r)return(n+1)*i;s=n+r>>>1}},t.linearSearch=function(t,e,i){for(var n=0,r=t.length-i;n<=r;n+=i)if(t[n]>e)return n;return-1},t}();i.Animation=o;var a=function(){function t(e){if(e<=0)throw new Error("frameCount must be > 0: "+e);this.curves=r.Utils.newFloatArray((e-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var i=e*t.BEZIER_SIZE;if(i==this.curves.length)return t.LINEAR;var n=this.curves[i];return n==t.LINEAR?t.LINEAR:n==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,i,n,r,s){var o=.03*(2*-i+r),a=.03*(2*-n+s),h=.006*(3*(i-r)+1),l=.006*(3*(n-s)+1),c=2*o+h,u=2*a+l,p=.3*i+o+.16666667*h,d=.3*n+a+.16666667*l,f=e*t.BEZIER_SIZE,m=this.curves;m[f++]=t.BEZIER;for(var g=p,v=d,y=f+t.BEZIER_SIZE-1;f<y;f+=2)m[f]=g,m[f+1]=v,p+=c,d+=u,c+=h,u+=l,g+=p,v+=d},t.prototype.getCurvePercent=function(e,i){i=r.MathUtils.clamp(i,0,1);var n=this.curves,s=e*t.BEZIER_SIZE,o=n[s];if(o==t.LINEAR)return i;if(o==t.STEPPED)return 0;s++;for(var a=0,h=s,l=s+t.BEZIER_SIZE-1;s<l;s+=2)if(a=n[s],a>=i){var c=void 0,u=void 0;return s==h?(c=0,u=0):(c=n[s-2],u=n[s-1]),u+(n[s+1]-u)*(i-c)/(a-c)}var p=n[s-1];return p+(1-p)*(i-a)/(1-a)},t.LINEAR=0,t.STEPPED=1,t.BEZIER=2,t.BEZIER_SIZE=19,t}();i.CurveTimeline=a;var h=function(t){function e(e){t.call(this,e),this.frames=r.Utils.newFloatArray(e<<1)}return n(e,t),e.prototype.setFrame=function(t,i,n){t<<=1,this.frames[t]=i,this.frames[t+e.ROTATION]=n},e.prototype.apply=function(t,i,n,r,s){var a=this.frames;if(!(n<a[0])){var h=t.bones[this.boneIndex];if(n>=a[a.length-e.ENTRIES]){for(var l=h.data.rotation+a[a.length+e.PREV_ROTATION]-h.rotation;l>180;)l-=360;for(;l<-180;)l+=360;return void(h.rotation+=l*s)}for(var c=o.binarySearch(a,n,e.ENTRIES),u=a[c+e.PREV_ROTATION],p=a[c],d=this.getCurvePercent((c>>1)-1,1-(n-p)/(a[c+e.PREV_TIME]-p)),f=a[c+e.ROTATION]-u;f>180;)f-=360;for(;f<-180;)f+=360;for(f=h.data.rotation+(u+f*d)-h.rotation;f>180;)f-=360;for(;f<-180;)f+=360;h.rotation+=f*s}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_ROTATION=-1,e.ROTATION=1,e}(a);i.RotateTimeline=h;var l=function(t){function e(i){t.call(this,i),this.frames=r.Utils.newFloatArray(i*e.ENTRIES)}return n(e,t),e.prototype.setFrame=function(t,i,n,r){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.X]=n,this.frames[t+e.Y]=r},e.prototype.apply=function(t,i,n,r,s){var a=this.frames;if(!(n<a[0])){var h=t.bones[this.boneIndex];if(n>=a[a.length-e.ENTRIES])return h.x+=(h.data.x+a[a.length+e.PREV_X]-h.x)*s,void(h.y+=(h.data.y+a[a.length+e.PREV_Y]-h.y)*s);var l=o.binarySearch(a,n,e.ENTRIES),c=a[l+e.PREV_X],u=a[l+e.PREV_Y],p=a[l],d=this.getCurvePercent(l/e.ENTRIES-1,1-(n-p)/(a[l+e.PREV_TIME]-p));h.x+=(h.data.x+c+(a[l+e.X]-c)*d-h.x)*s,h.y+=(h.data.y+u+(a[l+e.Y]-u)*d-h.y)*s}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_X=-2,e.PREV_Y=-1,e.X=1,e.Y=2,e}(a);i.TranslateTimeline=l;var c=function(t){function e(e){t.call(this,e)}return n(e,t),e.prototype.apply=function(t,i,n,r,s){var a=this.frames;if(!(n<a[0])){var h=t.bones[this.boneIndex];if(n>=a[a.length-e.ENTRIES])return h.scaleX+=(h.data.scaleX*a[a.length+e.PREV_X]-h.scaleX)*s,void(h.scaleY+=(h.data.scaleY*a[a.length+e.PREV_Y]-h.scaleY)*s);var l=o.binarySearch(a,n,e.ENTRIES),c=a[l+e.PREV_X],u=a[l+e.PREV_Y],p=a[l],d=this.getCurvePercent(l/e.ENTRIES-1,1-(n-p)/(a[l+e.PREV_TIME]-p));h.scaleX+=(h.data.scaleX*(c+(a[l+e.X]-c)*d)-h.scaleX)*s,h.scaleY+=(h.data.scaleY*(u+(a[l+e.Y]-u)*d)-h.scaleY)*s}},e}(l);i.ScaleTimeline=c;var u=function(t){function e(e){t.call(this,e)}return n(e,t),e.prototype.apply=function(t,i,n,r,s){var a=this.frames;if(!(n<a[0])){var h=t.bones[this.boneIndex];if(n>=a[a.length-e.ENTRIES])return h.shearX+=(h.data.shearX+a[a.length+e.PREV_X]-h.shearX)*s,void(h.shearY+=(h.data.shearY+a[a.length+e.PREV_Y]-h.shearY)*s);var l=o.binarySearch(a,n,e.ENTRIES),c=a[l+e.PREV_X],u=a[l+e.PREV_Y],p=a[l],d=this.getCurvePercent(l/e.ENTRIES-1,1-(n-p)/(a[l+e.PREV_TIME]-p));h.shearX+=(h.data.shearX+(c+(a[l+e.X]-c)*d)-h.shearX)*s,h.shearY+=(h.data.shearY+(u+(a[l+e.Y]-u)*d)-h.shearY)*s}},e}(l);i.ShearTimeline=u;var p=function(t){function e(i){t.call(this,i),this.frames=r.Utils.newFloatArray(i*e.ENTRIES)}return n(e,t),e.prototype.setFrame=function(t,i,n,r,s,o){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.R]=n,this.frames[t+e.G]=r,this.frames[t+e.B]=s,this.frames[t+e.A]=o},e.prototype.apply=function(t,i,n,r,s){var a=this.frames;if(!(n<a[0])){var h=0,l=0,c=0,u=0;if(n>=a[a.length-e.ENTRIES]){var p=a.length;h=a[p+e.PREV_R],l=a[p+e.PREV_G],c=a[p+e.PREV_B],u=a[p+e.PREV_A]}else{var d=o.binarySearch(a,n,e.ENTRIES);h=a[d+e.PREV_R],l=a[d+e.PREV_G],c=a[d+e.PREV_B],u=a[d+e.PREV_A];var f=a[d],m=this.getCurvePercent(d/e.ENTRIES-1,1-(n-f)/(a[d+e.PREV_TIME]-f));h+=(a[d+e.R]-h)*m,l+=(a[d+e.G]-l)*m,c+=(a[d+e.B]-c)*m,u+=(a[d+e.A]-u)*m}var g=t.slots[this.slotIndex].color;s<1?g.add((h-g.r)*s,(l-g.g)*s,(c-g.b)*s,(u-g.a)*s):g.set(h,l,c,u)}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_R=-4,e.PREV_G=-3,e.PREV_B=-2,e.PREV_A=-1,e.R=1,e.G=2,e.B=3,e.A=4,e}(a);i.ColorTimeline=p;var d=function(){function t(t){this.frames=r.Utils.newFloatArray(t),this.attachmentNames=new Array(t)}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},t.prototype.apply=function(t,e,i,n,r){var s=this.frames;if(!(i<s[0])){var a=0;a=i>=s[s.length-1]?s.length-1:o.binarySearch(s,i,1)-1;var h=this.attachmentNames[a];t.slots[this.slotIndex].setAttachment(null==h?null:t.getAttachment(this.slotIndex,h))}},t}();i.AttachmentTimeline=d;var f=function(){function t(t){this.frames=r.Utils.newFloatArray(t),this.events=new Array(t)}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},t.prototype.apply=function(t,e,i,n,r){if(null!=n){var s=this.frames,a=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,n,r),e=-1;else if(e>=s[a-1])return;if(!(i<s[0])){var h=0;if(e<s[0])h=0;else{h=o.binarySearch(s,e);for(var l=s[h];h>0&&s[h-1]==l;)h--}for(;h<a&&i>=s[h];h++)n.push(this.events[h])}}},t}();i.EventTimeline=f;var m=function(){function t(t){this.frames=r.Utils.newFloatArray(t),this.drawOrders=new Array(t)}return t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},t.prototype.apply=function(t,e,i,n,s){var a=this.frames;if(!(i<a[0])){var h=0;h=i>=a[a.length-1]?a.length-1:o.binarySearch(a,i)-1;var l=t.drawOrder,c=t.slots,u=this.drawOrders[h];if(null==u)r.Utils.arrayCopy(c,0,l,0,c.length);else for(var p=0,d=u.length;p<d;p++)l[p]=c[u[p]]}},t}();i.DrawOrderTimeline=m;var g=function(t){function e(e){t.call(this,e),this.frames=r.Utils.newFloatArray(e),this.frameVertices=new Array(e)}return n(e,t),e.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.frameVertices[t]=i},e.prototype.apply=function(t,e,i,n,a){var h=t.slots[this.slotIndex],l=h.getAttachment();if(l instanceof s.VertexAttachment&&l.applyDeform(this.attachment)){var c=this.frames;if(!(i<c[0])){var u=this.frameVertices,p=u[0].length,d=h.attachmentVertices;d.length!=p&&(a=1);var f=r.Utils.setArraySize(d,p);if(i>=c[c.length-1]){var m=u[c.length-1];if(a<1)for(var g=0;g<p;g++)f[g]+=(m[g]-f[g])*a;else r.Utils.arrayCopy(m,0,f,0,p)}else{var v=o.binarySearch(c,i),y=u[v-1],_=u[v],x=c[v],b=this.getCurvePercent(v-1,1-(i-x)/(c[v-1]-x));if(a<1)for(var g=0;g<p;g++){var w=y[g];f[g]+=(w+(_[g]-w)*b-f[g])*a}else for(var g=0;g<p;g++){var w=y[g];f[g]=w+(_[g]-w)*b}}}}},e}(a);i.DeformTimeline=g;var v=function(t){function e(i){t.call(this,i),this.frames=r.Utils.newFloatArray(i*e.ENTRIES)}return n(e,t),e.prototype.setFrame=function(t,i,n,r){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.MIX]=n,this.frames[t+e.BEND_DIRECTION]=r},e.prototype.apply=function(t,i,n,r,s){var a=this.frames;if(!(n<a[0])){var h=t.ikConstraints[this.ikConstraintIndex];if(n>=a[a.length-e.ENTRIES])return h.mix+=(a[a.length+e.PREV_MIX]-h.mix)*s,void(h.bendDirection=Math.floor(a[a.length+e.PREV_BEND_DIRECTION]));var l=o.binarySearch(a,n,e.ENTRIES),c=a[l+e.PREV_MIX],u=a[l],p=this.getCurvePercent(l/e.ENTRIES-1,1-(n-u)/(a[l+e.PREV_TIME]-u));h.mix+=(c+(a[l+e.MIX]-c)*p-h.mix)*s,h.bendDirection=Math.floor(a[l+e.PREV_BEND_DIRECTION])}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_MIX=-2,e.PREV_BEND_DIRECTION=-1,e.MIX=1,e.BEND_DIRECTION=2,e}(a);i.IkConstraintTimeline=v;var y=function(t){function e(i){t.call(this,i),this.frames=r.Utils.newFloatArray(i*e.ENTRIES)}return n(e,t),e.prototype.setFrame=function(t,i,n,r,s,o){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.ROTATE]=n,this.frames[t+e.TRANSLATE]=r,this.frames[t+e.SCALE]=s,this.frames[t+e.SHEAR]=o},e.prototype.apply=function(t,i,n,r,s){var a=this.frames;if(!(n<a[0])){var h=t.transformConstraints[this.transformConstraintIndex];if(n>=a[a.length-e.ENTRIES]){var l=a.length;return h.rotateMix+=(a[l+e.PREV_ROTATE]-h.rotateMix)*s,h.translateMix+=(a[l+e.PREV_TRANSLATE]-h.translateMix)*s,h.scaleMix+=(a[l+e.PREV_SCALE]-h.scaleMix)*s,void(h.shearMix+=(a[l+e.PREV_SHEAR]-h.shearMix)*s)}var c=o.binarySearch(a,n,e.ENTRIES),u=a[c],p=this.getCurvePercent(c/e.ENTRIES-1,1-(n-u)/(a[c+e.PREV_TIME]-u)),d=a[c+e.PREV_ROTATE],f=a[c+e.PREV_TRANSLATE],m=a[c+e.PREV_SCALE],g=a[c+e.PREV_SHEAR];h.rotateMix+=(d+(a[c+e.ROTATE]-d)*p-h.rotateMix)*s,h.translateMix+=(f+(a[c+e.TRANSLATE]-f)*p-h.translateMix)*s,h.scaleMix+=(m+(a[c+e.SCALE]-m)*p-h.scaleMix)*s,h.shearMix+=(g+(a[c+e.SHEAR]-g)*p-h.shearMix)*s}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_ROTATE=-4,e.PREV_TRANSLATE=-3,e.PREV_SCALE=-2,e.PREV_SHEAR=-1,e.ROTATE=1,e.TRANSLATE=2,e.SCALE=3,e.SHEAR=4,e}(a);i.TransformConstraintTimeline=y;var _=function(t){function e(i){t.call(this,i),this.frames=r.Utils.newFloatArray(i*e.ENTRIES)}return n(e,t),e.prototype.setFrame=function(t,i,n){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.VALUE]=n},e.prototype.apply=function(t,i,n,r,s){var a=this.frames;if(!(n<a[0])){var h=t.pathConstraints[this.pathConstraintIndex];if(n>=a[a.length-e.ENTRIES]){var l=a.length;return void(h.position+=(a[l+e.PREV_VALUE]-h.position)*s)}var c=o.binarySearch(a,n,e.ENTRIES),u=a[c+e.PREV_VALUE],p=a[c],d=this.getCurvePercent(c/e.ENTRIES-1,1-(n-p)/(a[c+e.PREV_TIME]-p));h.position+=(u+(a[c+e.VALUE]-u)*d-h.position)*s}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_VALUE=-1,e.VALUE=1,e}(a);i.PathConstraintPositionTimeline=_;var x=function(t){function e(e){t.call(this,e)}return n(e,t),e.prototype.apply=function(t,i,n,r,s){var a=this.frames;if(!(n<a[0])){var h=t.pathConstraints[this.pathConstraintIndex];if(n>=a[a.length-e.ENTRIES]){var l=a.length;return void(h.spacing+=(a[l+e.PREV_VALUE]-h.spacing)*s)}var c=o.binarySearch(a,n,e.ENTRIES),u=a[c+e.PREV_VALUE],p=a[c],d=this.getCurvePercent(c/e.ENTRIES-1,1-(n-p)/(a[c+e.PREV_TIME]-p));h.spacing+=(u+(a[c+e.VALUE]-u)*d-h.spacing)*s}},e}(_);i.PathConstraintSpacingTimeline=x;var b=function(t){function e(i){t.call(this,i),this.frames=r.Utils.newFloatArray(i*e.ENTRIES)}return n(e,t),e.prototype.setFrame=function(t,i,n,r){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.ROTATE]=n,this.frames[t+e.TRANSLATE]=r},e.prototype.apply=function(t,i,n,r,s){var a=this.frames;if(!(n<a[0])){var h=t.pathConstraints[this.pathConstraintIndex];if(n>=a[a.length-e.ENTRIES]){var l=a.length;return h.rotateMix+=(a[l+e.PREV_ROTATE]-h.rotateMix)*s,void(h.translateMix+=(a[l+e.PREV_TRANSLATE]-h.translateMix)*s)}var c=o.binarySearch(a,n,e.ENTRIES),u=a[c+e.PREV_ROTATE],p=a[c+e.PREV_TRANSLATE],d=a[c],f=this.getCurvePercent(c/e.ENTRIES-1,1-(n-d)/(a[c+e.PREV_TIME]-d));h.rotateMix+=(u+(a[c+e.ROTATE]-u)*f-h.rotateMix)*s,h.translateMix+=(p+(a[c+e.TRANSLATE]-p)*f-h.translateMix)*s}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_ROTATE=-2,e.PREV_TRANSLATE=-1,e.ROTATE=1,e.TRANSLATE=2,e}(a);i.PathConstraintMixTimeline=b},{"./Utils":26,"./attachments":33}],3:[function(t,e,i){"use strict";var n=t("./Utils"),r=function(){function t(t){if(void 0===t&&(t=null),this.tracks=new Array,this.events=new Array,this.timeScale=1,null==t)throw new Error("data cannot be null.");this.data=t}return t.prototype.update=function(t){t*=this.timeScale;for(var e=0;e<this.tracks.length;e++){var i=this.tracks[e];if(null!=i){var n=i.next;if(null!=n){var r=i.lastTime-n.delay;if(r>=0){var s=t*n.timeScale;n.time=r+s,i.time+=t*i.timeScale,this.setCurrent(e,n),n.time-=s,i=n}}else if(!i.loop&&i.lastTime>=i.endTime){this.clearTrack(e);continue}if(i.time+=t*i.timeScale,null!=i.previous){var o=t*i.previous.timeScale;i.previous.time+=o,i.mixTime+=o}}}},t.prototype.apply=function(t){for(var e=this.events,i=0;i<this.tracks.length;i++){var r=this.tracks[i];if(null!=r){e.length=0;var s=r.time,o=r.lastTime,a=r.endTime,h=r.loop;!h&&s>a&&(s=a);var l=r.previous;if(null==l)r.animation.mix(t,o,s,h,e,r.mix);else{var c=l.time;!l.loop&&c>l.endTime&&(c=l.endTime),l.animation.apply(t,c,c,l.loop,null);var u=r.mixTime/r.mixDuration*r.mix;u>=1&&(u=1,r.previous=null),r.animation.mix(t,o,s,h,e,u)}for(var p=0,d=e.length;p<d;p++){var f=e[p];r.onEvent&&r.onEvent(i,f),this.onEvent&&this.onEvent(i,f)}if(h?o%a>s%a:o<a&&s>=a){var m=n.MathUtils.toInt(s/a);r.onComplete&&r.onComplete(i,m),this.onComplete&&this.onComplete(i,m)}r.lastTime=r.time}}},t.prototype.clearTracks=function(){for(var t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0},t.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];null!=e&&(e.onEnd&&e.onEnd(t),this.onEnd&&this.onEnd(t),this.tracks[t]=null,this.freeAll(e))}},t.prototype.freeAll=function(t){for(;null!=t;){var e=t.next;t=e}},t.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(n.Utils.setArraySize(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)},t.prototype.setCurrent=function(t,e){var i=this.expandToIndex(t);if(null!=i){var n=i.previous;i.previous=null,e.onEnd&&e.onEnd(t),this.onEnd&&this.onEnd(t),e.mixDuration=this.data.getMix(i.animation,e.animation),e.mixDuration>0&&(e.mixTime=0,null!=n&&i.mixTime/i.mixDuration<.5?(e.previous=n,n=i):e.previous=i)}this.tracks[t]=e,e.onStart&&e.onStart(t),this.onStart&&this.onStart(t)},t.prototype.setAnimation=function(t,e,i){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,n,i)},t.prototype.setAnimationWith=function(t,e,i){var n=this.expandToIndex(t);null!=n&&this.freeAll(n.next);var r=new s;return r.animation=e,r.loop=i,r.endTime=e.duration,this.setCurrent(t,r),r},t.prototype.addAnimation=function(t,e,i,n){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,i,n)},t.prototype.hasAnimation=function(t){var e=this.data.skeletonData.findAnimation(t);return null!==e},t.prototype.addAnimationWith=function(t,e,i,n){var r=new s;r.animation=e,r.loop=i,r.endTime=e.duration;var o=this.expandToIndex(t);if(null!=o){for(;null!=o.next;)o=o.next;o.next=r}else this.tracks[t]=r;return n<=0&&(null!=o?n+=o.endTime-this.data.getMix(o.animation,e):n=0),r.delay=n,r},t.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},t.prototype.setAnimationByName=function(e,i,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0),this.setAnimation(e,i,n)},t.prototype.addAnimationByName=function(e,i,n,r){t.deprecatedWarning2||(t.deprecatedWarning2=!0),this.addAnimation(e,i,n,r)},t.prototype.hasAnimationByName=function(e){t.deprecatedWarning3||(t.deprecatedWarning3=!0);var i=this.data.skeletonData.findAnimation(e);return null!==i},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}();i.AnimationState=r;var s=function(){function t(){this.loop=!1,this.delay=0,this.time=0,this.lastTime=-1,this.endTime=0,this.timeScale=1,this.mixTime=0,this.mixDuration=0,this.mix=1}return t.prototype.reset=function(){this.next=null,this.previous=null,this.animation=null,this.timeScale=1,this.lastTime=-1,this.time=0},t.prototype.isComplete=function(){return this.time>=this.endTime},t}();i.TrackEntry=s},{"./Utils":26}],4:[function(t,e,i){"use strict";var n=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,i){var n=this.skeletonData.findAnimation(t);if(null==n)throw new Error("Animation not found: "+t);var r=this.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);this.setMixWith(n,r,i)},t.prototype.setMixByName=function(e,i,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0),this.setMix(e,i,n)},t.prototype.setMixWith=function(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var n=t.name+e.name;this.animationToMixTime[n]=i},t.prototype.getMix=function(t,e){var i=t.name+e.name,n=this.animationToMixTime[i];return void 0===n?this.defaultMix:n},t.deprecatedWarning1=!1,t}();i.AnimationStateData=n},{}],5:[function(t,e,i){"use strict";!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(i.BlendMode||(i.BlendMode={}));i.BlendMode},{}],6:[function(t,e,i){"use strict";var n=t("./Utils"),r=function(){function t(t,e,i){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.appliedRotation=0,this.worldSignX=0,this.worldSignY=0,this.sorted=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(e,i,r,s,o,a,h){this.appliedRotation=r;var l=r+90+h,c=n.MathUtils.cosDeg(r+a)*s,u=n.MathUtils.cosDeg(l)*o,p=n.MathUtils.sinDeg(r+a)*s,d=n.MathUtils.sinDeg(l)*o,f=this.parent,m=this.matrix;if(null==f){var g=this.skeleton;return g.flipX&&(e=-e,c=-c,u=-u),g.flipY!==t.yDown&&(i=-i,p=-p,d=-d),m.a=c,m.c=u,m.b=p,m.d=d,m.tx=e,m.ty=i,this.worldSignX=n.MathUtils.signum(s),void(this.worldSignY=n.MathUtils.signum(o))}var v=f.matrix.a,y=f.matrix.c,_=f.matrix.b,x=f.matrix.d;if(m.tx=v*e+y*i+f.matrix.tx,m.ty=_*e+x*i+f.matrix.ty,this.worldSignX=f.worldSignX*n.MathUtils.signum(s),this.worldSignY=f.worldSignY*n.MathUtils.signum(o),this.data.inheritRotation&&this.data.inheritScale)m.a=v*c+y*p,m.c=v*u+y*d,m.b=_*c+x*p,m.d=_*u+x*d;else{if(this.data.inheritRotation){v=1,y=0,_=0,x=1;do{var b=n.MathUtils.cosDeg(f.appliedRotation),w=n.MathUtils.sinDeg(f.appliedRotation),T=v*b+y*w;if(y=y*b-v*w,v=T,T=_*b+x*w,x=x*b-_*w,_=T,!f.data.inheritRotation)break;f=f.parent}while(null!=f);m.a=v*c+y*p,m.c=v*u+y*d,m.b=_*c+x*p,m.d=_*u+x*d}else if(this.data.inheritScale){v=1,y=0,_=0,x=1;do{var b=n.MathUtils.cosDeg(f.appliedRotation),w=n.MathUtils.sinDeg(f.appliedRotation),S=f.scaleX,E=f.scaleY,C=b*S,M=w*E,P=w*S,A=b*E,T=v*C+y*P;if(y=y*A-v*M,v=T,T=_*C+x*P,x=x*A-_*M,_=T,S>=0&&(w=-w),T=v*b+y*w,y=y*b-v*w,v=T,T=_*b+x*w,x=x*b-_*w,_=T,!f.data.inheritScale)break;f=f.parent}while(null!=f);m.a=v*c+y*p,m.c=v*u+y*d,m.b=_*c+x*p,m.d=_*u+x*d}else m.a=c,m.c=u,m.b=p,m.d=d;this.skeleton.flipX&&(m.a=-m.a,m.c=-m.c),this.skeleton.flipY!==t.yDown&&(m.b=-m.b,m.d=-m.d)}},t.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*n.MathUtils.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*n.MathUtils.radDeg},t.prototype.getWorldScaleX=function(){return Math.sqrt(this.matrix.a*this.matrix.a+this.matrix.b*this.matrix.b)*this.worldSignX},t.prototype.getWorldScaleY=function(){return Math.sqrt(this.matrix.c*this.matrix.c+this.matrix.d*this.matrix.d)*this.worldSignY},t.prototype.worldToLocalRotationX=function(){var t=this.parent;if(null==t)return this.rotation;var e=t.matrix,i=e.a,r=e.c,s=e.b,o=e.d,a=this.matrix.a,h=this.matrix.b;return Math.atan2(i*h-s*a,o*a-r*h)*n.MathUtils.radDeg},t.prototype.worldToLocalRotationY=function(){var t=this.parent;if(null==t)return this.rotation;var e=t.matrix,i=e.a,r=e.b,s=e.c,o=e.d,a=this.matrix.c,h=this.matrix.d;return Math.atan2(i*h-s*a,o*a-r*h)*n.MathUtils.radDeg},t.prototype.rotateWorld=function(t){var e=this.matrix,i=this.matrix.a,r=e.c,s=e.b,o=e.d,a=n.MathUtils.cosDeg(t),h=n.MathUtils.sinDeg(t);e.a=a*i-h*s,e.c=a*r-h*o,e.b=h*i+a*s,e.d=h*r+a*o},t.prototype.updateLocalTransform=function(){var t=this.parent,e=this.matrix;if(null==t){this.x=e.tx,this.y=e.ty,this.rotation=Math.atan2(e.b,e.a)*n.MathUtils.radDeg,this.scaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.scaleY=Math.sqrt(e.c*e.c+e.d*e.d);var i=e.a*e.d-e.b*e.c;return this.shearX=0,void(this.shearY=Math.atan2(e.a*e.c+e.b*e.d,i)*n.MathUtils.radDeg)}var r=t.matrix,s=r.a,o=r.c,a=r.b,h=r.d,l=1/(s*h-o*a),c=e.tx-r.tx,u=e.ty-r.ty;this.x=c*h*l-u*o*l,this.y=u*s*l-c*a*l;var p=l*h,d=l*s,f=l*o,m=l*a,g=p*e.a-f*e.b,v=p*e.c-f*e.d,y=d*e.b-m*e.a,_=d*e.d-m*e.c;if(this.shearX=0,this.scaleX=Math.sqrt(g*g+y*y),this.scaleX>1e-4){var i=g*_-v*y;this.scaleY=i/this.scaleX,this.shearY=Math.atan2(g*v+y*_,i)*n.MathUtils.radDeg,this.rotation=Math.atan2(y,g)*n.MathUtils.radDeg}else this.scaleX=0,this.scaleY=Math.sqrt(v*v+_*_),this.shearY=0,this.rotation=90-Math.atan2(_,v)*n.MathUtils.radDeg;this.appliedRotation=this.rotation},t.prototype.worldToLocal=function(t){var e=this.matrix,i=e.a,n=e.c,r=e.b,s=e.d,o=1/(i*s-n*r),a=t.x-e.tx,h=t.y-e.ty;return t.x=a*s*o-h*n*o,t.y=h*i*o-a*r*o,t},t.prototype.localToWorld=function(t){var e=this.matrix,i=t.x,n=t.y;return t.x=i*e.a+n*e.c+e.tx,t.y=i*e.b+n*e.d+e.ty,t},t.yDown=!1,t}();i.Bone=r},{"./Utils":26}],7:[function(t,e,i){"use strict";var n=function(){function t(t,e,i){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.inheritRotation=!0,this.inheritScale=!0,
t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i}return t}();i.BoneData=n},{}],8:[function(t,e,i){"use strict";var n=function(){function t(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e}return t}();i.Event=n},{}],9:[function(t,e,i){"use strict";var n=function(){function t(t){this.name=t}return t}();i.EventData=n},{}],10:[function(t,e,i){"use strict";var n=t("./Utils"),r=function(){function t(t,e){if(this.mix=1,this.bendDirection=0,this.level=0,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}},t.prototype.apply1=function(t,e,i,r){var s=t.parent.matrix,o=1/(s.a*s.d-s.b*s.c),a=e-s.tx,h=i-s.ty,l=(a*s.d-h*s.c)*o-t.x,c=(h*s.a-a*s.b)*o-t.y,u=Math.atan2(c,l)*n.MathUtils.radDeg-t.shearX-t.rotation;t.scaleX<0&&(u+=180),u>180?u-=360:u<-180&&(u+=360),t.updateWorldTransformWith(t.x,t.y,t.rotation+u*r,t.scaleX,t.scaleY,t.shearX,t.shearY)},t.prototype.apply2=function(t,e,i,r,s,o){if(0==o)return void e.updateWorldTransform();var a=t.x,h=t.y,l=t.scaleX,c=t.scaleY,u=e.scaleX,p=0,d=0,f=0;l<0?(l=-l,p=180,f=-1):(p=0,f=1),c<0&&(c=-c,f=-f),u<0?(u=-u,d=180):d=0;var m=t.matrix,g=e.x,v=0,y=0,_=0,x=m.a,b=m.c,w=m.b,T=m.d,S=Math.abs(l-c)<=1e-4;S?(v=e.y,y=x*g+b*v+m.tx,_=w*g+T*v+m.ty):(v=0,y=x*g+m.tx,_=w*g+m.ty);var E=(t.parent,t.parent.matrix);x=E.a,b=E.c,w=E.b,T=E.d;var C=1/(x*T-b*w),M=i-E.tx,P=r-E.ty,A=(M*T-P*b)*C-a,I=(P*x-M*w)*C-h;M=y-E.tx,P=_-E.ty;var O=(M*T-P*b)*C-a,R=(P*x-M*w)*C-h,k=Math.sqrt(O*O+R*R),D=e.data.length*u,L=0,B=0;t:if(S){D*=l;var F=(A*A+I*I-k*k-D*D)/(2*k*D);F<-1?F=-1:F>1&&(F=1),B=Math.acos(F)*s,x=k+D*F,b=D*Math.sin(B),L=Math.atan2(I*x-A*b,A*x+I*b)}else{x=l*D,b=c*D;var N=x*x,U=b*b,G=A*A+I*I,j=Math.atan2(I,A);w=U*k*k+N*G-N*U;var X=-2*U*k,H=U-N;if(T=X*X-4*H*w,T>=0){var Y=Math.sqrt(T);X<0&&(Y=-Y),Y=-(X+Y)/2;var W=Y/H,V=w/Y,z=Math.abs(W)<Math.abs(V)?W:V;if(z*z<=G){P=Math.sqrt(G-z*z)*s,L=j-Math.atan2(P,z),B=Math.atan2(P/c,(z-k)/l);break t}}var q=0,K=Number.MAX_VALUE,Z=0,J=0,$=0,Q=0,tt=0,et=0;M=k+x,T=M*M,T>Q&&($=0,Q=T,tt=M),M=k-x,T=M*M,T<K&&(q=n.MathUtils.PI,K=T,Z=M);var it=Math.acos(-x*k/(N-U));M=x*Math.cos(it)+k,P=b*Math.sin(it),T=M*M+P*P,T<K&&(q=it,K=T,Z=M,J=P),T>Q&&($=it,Q=T,tt=M,et=P),G<=(K+Q)/2?(L=j-Math.atan2(J*s,Z),B=q*s):(L=j-Math.atan2(et*s,tt),B=$*s)}var nt=Math.atan2(v,g)*f,rt=t.rotation;L=(L-nt)*n.MathUtils.radDeg+p-rt,L>180?L-=360:L<-180&&(L+=360),t.updateWorldTransformWith(a,h,rt+L*o,t.scaleX,t.scaleY,0,0),rt=e.rotation,B=((B+nt)*n.MathUtils.radDeg-e.shearX)*f+d-rt,B>180?B-=360:B<-180&&(B+=360),e.updateWorldTransformWith(g,v,rt+B*o,e.scaleX,e.scaleY,e.shearX,e.shearY)},t}();i.IkConstraint=r},{"./Utils":26}],11:[function(t,e,i){"use strict";var n=function(){function t(t){this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=t}return t}();i.IkConstraintData=n},{}],12:[function(t,e,i){"use strict";var n=t("./PathConstraintData"),r=t("./attachments"),s=t("./Utils"),o=function(){function t(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var i=0,n=t.bones.length;i<n;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof r.PathAttachment){var e=this.rotateMix,i=this.translateMix,o=i>0,a=e>0;if(o||a){var h=this.data,l=h.spacingMode,c=l==n.SpacingMode.Length,u=h.rotateMode,p=u==n.RotateMode.Tangent,d=u==n.RotateMode.ChainScale,f=this.bones.length,m=p?f:f+1,g=this.bones,v=s.Utils.setArraySize(this.spaces,m),y=null,_=this.spacing;if(d||c){d&&(y=s.Utils.setArraySize(this.lengths,f));for(var x=0,b=m-1;x<b;){var w=g[x],T=w.matrix,S=w.data.length,E=S*T.a,C=S*T.b;S=Math.sqrt(E*E+C*C),d&&(y[x]=S),v[++x]=c?Math.max(0,S+_):_}}else for(var x=1;x<m;x++)v[x]=_;for(var M=this.computeWorldPositions(t,m,p,h.positionMode==n.PositionMode.Percent,l==n.SpacingMode.Percent),P=this.target.bone.skeleton,A=P.x,I=P.y,O=M[0],R=M[1],k=h.offsetRotation,D=u==n.RotateMode.Chain&&0==k,x=0,L=3;x<f;x++,L+=3){var w=g[x],T=w.matrix;T.tx+=(O-A-w.worldX)*i,T.ty+=(R-I-w.worldY)*i;var E=M[L],C=M[L+1],B=E-O,F=C-R;if(d){var N=y[x];if(0!=N){var U=(Math.sqrt(B*B+F*F)/N-1)*e+1;T.a*=U,T.b*=U}}if(O=E,R=C,a){var G=T.a,j=T.c,X=T.b,H=T.d,Y=0,W=0,V=0;if(Y=p?M[L-1]:0==v[x+1]?M[L+2]:Math.atan2(F,B),Y-=Math.atan2(X,G)-k*s.MathUtils.degRad,D){W=Math.cos(Y),V=Math.sin(Y);var z=w.data.length;O+=(z*(W*G-V*X)-B)*e,R+=(z*(V*G+W*X)-F)*e}Y>s.MathUtils.PI?Y-=s.MathUtils.PI2:Y<-s.MathUtils.PI&&(Y+=s.MathUtils.PI2),Y*=e,W=Math.cos(Y),V=Math.sin(Y),T.a=W*G-V*X,T.c=W*j-V*H,T.b=V*G+W*X,T.d=V*j+W*H}}}}},t.prototype.computeWorldPositions=function(e,i,n,r,o){var a=this.target,h=this.position,l=this.spaces,c=s.Utils.setArraySize(this.positions,3*i+2),u=null,p=e.closed,d=e.worldVerticesLength,f=d/6,m=t.NONE;if(!e.constantSpeed){var g=e.lengths;f-=p?1:2;var v=g[f];if(r&&(h*=v),o)for(var y=0;y<i;y++)l[y]*=v;u=s.Utils.setArraySize(this.world,8);for(var y=0,_=0,x=0;y<i;y++,_+=3){var b=l[y];h+=b;var w=h;if(p)w%=v,w<0&&(w+=v),x=0;else{if(w<0){m!=t.BEFORE&&(m=t.BEFORE,e.computeWorldVerticesWith(a,2,4,u,0)),this.addBeforePosition(w,u,0,c,_);continue}if(w>v){m!=t.AFTER&&(m=t.AFTER,e.computeWorldVerticesWith(a,d-6,4,u,0)),this.addAfterPosition(w-v,u,0,c,_);continue}}for(;;x++){var T=g[x];if(!(w>T)){if(0==x)w/=T;else{var S=g[x-1];w=(w-S)/(T-S)}break}}x!=m&&(m=x,p&&x==f?(e.computeWorldVerticesWith(a,d-4,4,u,0),e.computeWorldVerticesWith(a,0,4,u,4)):e.computeWorldVerticesWith(a,6*x+2,8,u,0)),this.addCurvePosition(w,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],c,_,n||y>0&&0==b)}return c}p?(d+=2,u=s.Utils.setArraySize(this.world,d),e.computeWorldVerticesWith(a,2,d-4,u,0),e.computeWorldVerticesWith(a,0,2,u,d-4),u[d-2]=u[0],u[d-1]=u[1]):(f--,d-=4,u=s.Utils.setArraySize(this.world,d),e.computeWorldVerticesWith(a,2,d,u,0));for(var E=s.Utils.setArraySize(this.curves,f),C=0,M=u[0],P=u[1],A=0,I=0,O=0,R=0,k=0,D=0,L=0,B=0,F=0,N=0,U=0,G=0,j=0,X=0,y=0,H=2;y<f;y++,H+=6)A=u[H],I=u[H+1],O=u[H+2],R=u[H+3],k=u[H+4],D=u[H+5],L=.1875*(M-2*A+O),B=.1875*(P-2*I+R),F=.09375*(3*(A-O)-M+k),N=.09375*(3*(I-R)-P+D),U=2*L+F,G=2*B+N,j=.75*(A-M)+L+.16666667*F,X=.75*(I-P)+B+.16666667*N,C+=Math.sqrt(j*j+X*X),j+=U,X+=G,U+=F,G+=N,C+=Math.sqrt(j*j+X*X),j+=U,X+=G,C+=Math.sqrt(j*j+X*X),j+=U+F,X+=G+N,C+=Math.sqrt(j*j+X*X),E[y]=C,M=k,P=D;if(r&&(h*=C),o)for(var y=0;y<i;y++)l[y]*=C;for(var Y=this.segments,W=0,y=0,_=0,x=0,V=0;y<i;y++,_+=3){var b=l[y];h+=b;var w=h;if(p)w%=C,w<0&&(w+=C),x=0;else{if(w<0){this.addBeforePosition(w,u,0,c,_);continue}if(w>C){this.addAfterPosition(w-C,u,d-4,c,_);continue}}for(;;x++){var z=E[x];if(!(w>z)){if(0==x)w/=z;else{var S=E[x-1];w=(w-S)/(z-S)}break}}if(x!=m){m=x;var q=6*x;for(M=u[q],P=u[q+1],A=u[q+2],I=u[q+3],O=u[q+4],R=u[q+5],k=u[q+6],D=u[q+7],L=.03*(M-2*A+O),B=.03*(P-2*I+R),F=.006*(3*(A-O)-M+k),N=.006*(3*(I-R)-P+D),U=2*L+F,G=2*B+N,j=.3*(A-M)+L+.16666667*F,X=.3*(I-P)+B+.16666667*N,W=Math.sqrt(j*j+X*X),Y[0]=W,q=1;q<8;q++)j+=U,X+=G,U+=F,G+=N,W+=Math.sqrt(j*j+X*X),Y[q]=W;j+=U,X+=G,W+=Math.sqrt(j*j+X*X),Y[8]=W,j+=U+F,X+=G+N,W+=Math.sqrt(j*j+X*X),Y[9]=W,V=0}for(w*=W;;V++){var K=Y[V];if(!(w>K)){if(0==V)w/=K;else{var S=Y[V-1];w=V+(w-S)/(K-S)}break}}this.addCurvePosition(.1*w,M,P,A,I,O,R,k,D,c,_,n||y>0&&0==b)}return c},t.prototype.addBeforePosition=function(t,e,i,n,r){var s=e[i],o=e[i+1],a=e[i+2]-s,h=e[i+3]-o,l=Math.atan2(h,a);n[r]=s+t*Math.cos(l),n[r+1]=o+t*Math.sin(l),n[r+2]=l},t.prototype.addAfterPosition=function(t,e,i,n,r){var s=e[i+2],o=e[i+3],a=s-e[i],h=o-e[i+1],l=Math.atan2(h,a);n[r]=s+t*Math.cos(l),n[r+1]=o+t*Math.sin(l),n[r+2]=l},t.prototype.addCurvePosition=function(t,e,i,n,r,s,o,a,h,l,c,u){0==t&&(t=1e-4);var p=t*t,d=p*t,f=1-t,m=f*f,g=m*f,v=f*t,y=3*v,_=f*y,x=y*t,b=e*g+n*_+s*x+a*d,w=i*g+r*_+o*x+h*d;l[c]=b,l[c+1]=w,u&&(l[c+2]=Math.atan2(w-(i*m+r*v*2+o*p),b-(e*m+n*v*2+s*p)))},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t}();i.PathConstraint=o},{"./PathConstraintData":13,"./Utils":26,"./attachments":33}],13:[function(t,e,i){"use strict";var n=function(){function t(t){this.bones=new Array,this.name=t}return t}();i.PathConstraintData=n,function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(i.PositionMode||(i.PositionMode={}));i.PositionMode;!function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(i.SpacingMode||(i.SpacingMode={}));i.SpacingMode;!function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(i.RotateMode||(i.RotateMode={}));i.RotateMode},{}],14:[function(t,e,i){"use strict";var n=t("./Slot"),r=t("./Bone"),s=t("./IkConstraint"),o=t("./TransformConstraint"),a=t("./PathConstraint"),h=t("./Utils"),l=t("./attachments"),c=function(){function t(t){if(this._updateCache=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var i=t.bones[e],l=void 0;if(null==i.parent)l=new r.Bone(i,this,null);else{var c=this.bones[i.parent.index];l=new r.Bone(i,this,c),c.children.push(l)}this.bones.push(l)}this.slots=new Array,this.drawOrder=new Array;for(var e=0;e<t.slots.length;e++){var u=t.slots[e],l=this.bones[u.boneData.index],p=new n.Slot(u,l);this.slots.push(p),this.drawOrder.push(p)}this.ikConstraints=new Array,this.ikConstraintsSorted=new Array;for(var e=0;e<t.ikConstraints.length;e++){var d=t.ikConstraints[e];this.ikConstraints.push(new s.IkConstraint(d,this))}this.transformConstraints=new Array;for(var e=0;e<t.transformConstraints.length;e++){var f=t.transformConstraints[e];this.transformConstraints.push(new o.TransformConstraint(f,this))}this.pathConstraints=new Array;for(var e=0;e<t.pathConstraints.length;e++){var m=t.pathConstraints[e];this.pathConstraints.push(new a.PathConstraint(m,this))}this.color=new h.Color(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){var t=this._updateCache;t.length=0;for(var e=this.bones,i=0,n=e.length;i<n;i++)e[i].sorted=!1;var r=this.ikConstraintsSorted;r.length=0;for(var i=0;i<this.ikConstraints.length;i++)r.push(this.ikConstraints[i]);for(var s=r.length,i=0,o=0,n=s;i<n;i++){var a=r[i],h=a.bones[0].parent;for(o=0;null!=h;o++)h=h.parent;a.level=o}for(var i=1,c=0;i<s;i++){var a=r[i],o=a.level;for(c=i-1;c>=0;c--){var u=r[c];if(u.level<o)break;r[c+1]=u}r[c+1]=a}for(var i=0,n=r.length;i<n;i++){var p=r[i],d=p.target;this.sortBone(d);var f=p.bones,m=f[0];this.sortBone(m),t.push(p),this.sortReset(m.children),f[f.length-1].sorted=!0}for(var g=this.pathConstraints,i=0,n=g.length;i<n;i++){var p=g[i],v=p.target,y=v.data.index,_=v.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,y,_),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,y,_);for(var c=0,x=this.data.skins.length;c<x;c++)this.sortPathConstraintAttachment(this.data.skins[c],y,_);var b=v.getAttachment();b instanceof l.PathAttachment&&this.sortPathConstraintAttachmentWith(b,_);for(var f=p.bones,w=f.length,c=0;c<w;c++)this.sortBone(f[c]);t.push(p);for(var c=0;c<w;c++)this.sortReset(f[c].children);for(var c=0;c<w;c++)f[c].sorted=!0}for(var T=this.transformConstraints,i=0,n=T.length;i<n;i++){var p=T[i];this.sortBone(p.target);for(var f=p.bones,w=f.length,c=0;c<w;c++)this.sortBone(f[c]);t.push(p);for(var c=0;c<w;c++)this.sortReset(f[c].children);for(var c=0;c<w;c++)f[c].sorted=!0}for(var i=0,n=e.length;i<n;i++)this.sortBone(e[i])},t.prototype.sortPathConstraintAttachment=function(t,e,i){var n=t.attachments[e];if(n)for(var r in n)this.sortPathConstraintAttachmentWith(n[r],i)},t.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof l.PathAttachment){var i=t.bones;if(null==i)this.sortBone(e);else for(var n=this.bones,r=0;r<i.length;r++){var s=i[r];this.sortBone(n[s])}}},t.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},t.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];n.sorted&&this.sortReset(n.children),n.sorted=!1}},t.prototype.updateWorldTransform=function(){for(var t=this._updateCache,e=0,i=t.length;e<i;e++)t[e].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();for(var n=this.ikConstraints,e=0,i=n.length;e<i;e++){var r=n[e];r.bendDirection=r.data.bendDirection,r.mix=r.data.mix}for(var s=this.transformConstraints,e=0,i=s.length;e<i;e++){var r=s[e],o=r.data;r.rotateMix=o.rotateMix,r.translateMix=o.translateMix,r.scaleMix=o.scaleMix,r.shearMix=o.shearMix}for(var a=this.pathConstraints,e=0,i=a.length;e<i;e++){var r=a[e],o=r.data;r.position=o.position,r.spacing=o.spacing,r.rotateMix=o.rotateMix,r.translateMix=o.translateMix}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;h.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,i=t.length;e<i;e++)t[e].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},t.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},t.prototype.setSkin=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i],s=r.data.attachmentName;if(null!=s){var o=t.getAttachment(i,s);null!=o&&r.setAttachment(o)}}this.skin=t},t.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},t.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},t.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,r=i.length;n<r;n++){var s=i[n];if(s.data.name==t){var o=null;if(null!=e&&(o=this.getAttachment(n,e),null==o))throw new Error("Attachment not found: "+e+", for slot: "+t);return void s.setAttachment(o)}}throw new Error("Slot not found: "+t)},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},t.prototype.getBounds=function(t,e){if(null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var i=this.drawOrder,n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=0,h=i.length;a<h;a++){var c=i[a],u=null,p=c.getAttachment();if(p instanceof l.RegionAttachment?u=p.updateWorldVertices(c,!1):p instanceof l.MeshAttachment&&(u=p.updateWorldVertices(c,!0)),null!=u)for(var d=0,f=u.length;d<f;d+=8){var m=u[d],g=u[d+1];n=Math.min(n,m),r=Math.min(r,g),s=Math.max(s,m),o=Math.max(o,g)}}t.set(n,r),e.set(s-n,o-r)},t.prototype.update=function(t){this.time+=t},t}();i.Skeleton=c},{"./Bone":6,"./IkConstraint":10,"./PathConstraint":12,"./Slot":19,"./TransformConstraint":24,"./Utils":26,"./attachments":33}],15:[function(t,e,i){"use strict";var n=t("./Utils"),r=t("./attachments"),s=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new n.Pool(function(){return n.Utils.newFloatArray(16)})}return t.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var i=this.boundingBoxes,s=this.polygons,o=this.polygonPool,a=t.slots,h=a.length;i.length=0,o.freeAll(s),s.length=0;for(var l=0;l<h;l++){var c=a[l],u=c.getAttachment();if(u instanceof r.BoundingBoxAttachment){var p=u;i.push(p);var d=o.obtain();d.length!=p.worldVerticesLength&&(d=n.Utils.newFloatArray(p.worldVerticesLength)),s.push(d),p.computeWorldVertices(c,d)}}e&&this.aabbCompute()},t.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons,s=0,o=r.length;s<o;s++)for(var a=r[s],h=a,l=0,c=a.length;l<c;l+=2){var u=h[l],p=h[l+1];t=Math.min(t,u),e=Math.min(e,p),i=Math.max(i,u),n=Math.max(n,p)}this.minX=t,this.minY=e,this.maxX=i,this.maxY=n},t.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.aabbIntersectsSegment=function(t,e,i,n){var r=this.minX,s=this.minY,o=this.maxX,a=this.maxY;if(t<=r&&i<=r||e<=s&&n<=s||t>=o&&i>=o||e>=a&&n>=a)return!1;var h=(n-e)/(i-t),l=h*(r-t)+e;if(l>s&&l<a)return!0;if(l=h*(o-t)+e,l>s&&l<a)return!0;var c=(s-e)/h+t;return c>r&&c<o||(c=(a-e)/h+t,c>r&&c<o)},t.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.containsPoint=function(t,e){for(var i=this.polygons,n=0,r=i.length;n<r;n++)if(this.containsPointPolygon(i[n],t,e))return this.boundingBoxes[n];return null},t.prototype.containsPointPolygon=function(t,e,i){for(var n=t,r=t.length,s=r-2,o=!1,a=0;a<r;a+=2){var h=n[a+1],l=n[s+1];if(h<i&&l>=i||l<i&&h>=i){var c=n[a];c+(i-h)/(l-h)*(n[s]-c)<e&&(o=!o)}s=a}return o},t.prototype.intersectsSegment=function(t,e,i,n){for(var r=this.polygons,s=0,o=r.length;s<o;s++)if(this.intersectsSegmentPolygon(r[s],t,e,i,n))return this.boundingBoxes[s];return null},t.prototype.intersectsSegmentPolygon=function(t,e,i,n,r){for(var s=t,o=t.length,a=e-n,h=i-r,l=e*r-i*n,c=s[o-2],u=s[o-1],p=0;p<o;p+=2){var d=s[p],f=s[p+1],m=c*f-u*d,g=c-d,v=u-f,y=a*v-h*g,_=(l*g-a*m)/y;if((_>=c&&_<=d||_>=d&&_<=c)&&(_>=e&&_<=n||_>=n&&_<=e)){var x=(l*v-h*m)/y;if((x>=u&&x<=f||x>=f&&x<=u)&&(x>=i&&x<=r||x>=r&&x<=i))return!0}c=d,u=f}return!1},t.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return e==-1?null:this.polygons[e]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}();i.SkeletonBounds=s},{"./Utils":26,"./attachments":33}],16:[function(t,e,i){"use strict";var n=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t}();i.SkeletonData=n},{}],17:[function(t,e,i){"use strict";var n=t("./SkeletonData"),r=t("./BoneData"),s=t("./SlotData"),o=t("./Event"),a=t("./IkConstraintData"),h=t("./TransformConstraintData"),l=t("./PathConstraintData"),c=t("./Skin"),u=t("./EventData"),p=t("./Utils"),d=t("./Animation"),f=function(){function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return t.prototype.readSkeletonData=function(e){var i=this.scale,o=new n.SkeletonData,p="string"==typeof e?JSON.parse(e):e,d=p.skeleton;if(null!=d&&(o.hash=d.hash,o.version=d.spine,o.width=d.width,o.height=d.height,o.imagesPath=d.images),p.bones)for(var f=0;f<p.bones.length;f++){var m=p.bones[f],g=null,v=this.getValue(m,"parent",null);if(null!=v&&(g=o.findBone(v),null==g))throw new Error("Parent bone not found: "+v);var y=new r.BoneData(o.bones.length,m.name,g);y.length=this.getValue(m,"length",0)*i,y.x=this.getValue(m,"x",0)*i,y.y=this.getValue(m,"y",0)*i,y.rotation=this.getValue(m,"rotation",0),y.scaleX=this.getValue(m,"scaleX",1),y.scaleY=this.getValue(m,"scaleY",1),y.shearX=this.getValue(m,"shearX",0),y.shearY=this.getValue(m,"shearY",0),y.inheritRotation=this.getValue(m,"inheritRotation",!0),y.inheritScale=this.getValue(m,"inheritScale",!0),o.bones.push(y)}if(p.slots)for(var f=0;f<p.slots.length;f++){var _=p.slots[f],x=_.name,b=_.bone,w=o.findBone(b);if(null==w)throw new Error("Slot bone not found: "+b);var y=new s.SlotData(o.slots.length,x,w),T=this.getValue(_,"color",null);null!=T&&y.color.setFromString(T),y.attachmentName=this.getValue(_,"attachment",null),y.blendMode=t.blendModeFromString(this.getValue(_,"blend","normal")),o.slots.push(y)}if(p.ik)for(var f=0;f<p.ik.length;f++){for(var S=p.ik[f],y=new a.IkConstraintData(S.name),E=0;E<S.bones.length;E++){var b=S.bones[E],C=o.findBone(b);if(null==C)throw new Error("IK bone not found: "+b);y.bones.push(C)}var M=S.target;if(y.target=o.findBone(M),null==y.target)throw new Error("IK target bone not found: "+M);y.bendDirection=this.getValue(S,"bendPositive",!0)?1:-1,y.mix=this.getValue(S,"mix",1),o.ikConstraints.push(y)}if(p.transform)for(var f=0;f<p.transform.length;f++){for(var S=p.transform[f],y=new h.TransformConstraintData(S.name),E=0;E<S.bones.length;E++){var b=S.bones[E],C=o.findBone(b);if(null==C)throw new Error("Transform constraint bone not found: "+b);y.bones.push(C)}var M=S.target;if(y.target=o.findBone(M),null==y.target)throw new Error("Transform constraint target bone not found: "+M);y.offsetRotation=this.getValue(S,"rotation",0),y.offsetX=this.getValue(S,"x",0)*i,y.offsetY=this.getValue(S,"y",0)*i,y.offsetScaleX=this.getValue(S,"scaleX",0),y.offsetScaleY=this.getValue(S,"scaleY",0),y.offsetShearY=this.getValue(S,"shearY",0),y.rotateMix=this.getValue(S,"rotateMix",1),y.translateMix=this.getValue(S,"translateMix",1),y.scaleMix=this.getValue(S,"scaleMix",1),y.shearMix=this.getValue(S,"shearMix",1),o.transformConstraints.push(y)}if(p.path)for(var f=0;f<p.path.length;f++){for(var S=p.path[f],y=new l.PathConstraintData(S.name),E=0;E<S.bones.length;E++){var b=S.bones[E],C=o.findBone(b);if(null==C)throw new Error("Transform constraint bone not found: "+b);y.bones.push(C)}var M=S.target;if(y.target=o.findSlot(M),null==y.target)throw new Error("Path target slot not found: "+M);y.positionMode=t.positionModeFromString(this.getValue(S,"positionMode","percent")),y.spacingMode=t.spacingModeFromString(this.getValue(S,"spacingMode","length")),y.rotateMode=t.rotateModeFromString(this.getValue(S,"rotateMode","tangent")),y.offsetRotation=this.getValue(S,"rotation",0),y.position=this.getValue(S,"position",0),y.positionMode==l.PositionMode.Fixed&&(y.position*=i),y.spacing=this.getValue(S,"spacing",0),y.spacingMode!=l.SpacingMode.Length&&y.spacingMode!=l.SpacingMode.Fixed||(y.spacing*=i),y.rotateMix=this.getValue(S,"rotateMix",1),y.translateMix=this.getValue(S,"translateMix",1),o.pathConstraints.push(y)}if(p.skins)for(var P in p.skins){var A=p.skins[P],I=new c.Skin(P);for(var x in A){var O=o.findSlotIndex(x);if(O==-1)throw new Error("Slot not found: "+x);var _=A[x];for(var R in _){var k=this.readAttachment(_[R],I,O,R);null!=k&&I.addAttachment(O,R,k)}}o.skins.push(I),"default"==I.name&&(o.defaultSkin=I)}for(var f=0,D=this.linkedMeshes.length;f<D;f++){var L=this.linkedMeshes[f],I=null==L.skin?o.defaultSkin:o.findSkin(L.skin);if(null==I)throw new Error("Skin not found: "+L.skin);var B=I.getAttachment(L.slotIndex,L.parent);if(null==B)throw new Error("Parent mesh not found: "+L.parent);L.mesh.setParentMesh(B)}if(this.linkedMeshes.length=0,p.events)for(var F in p.events){var N=p.events[F],y=new u.EventData(F);y.intValue=this.getValue(N,"int",0),y.floatValue=this.getValue(N,"float",0),y.stringValue=this.getValue(N,"string",null),o.events.push(y)}if(p.animations)for(var U in p.animations){var G=p.animations[U];this.readAnimation(G,U,o)}return o},t.prototype.readAttachment=function(t,e,i,n){var r=this.scale;n=this.getValue(t,"name",n);var s=this.getValue(t,"type","region");switch(s){case"region":var o=this.getValue(t,"path",n),a=this.attachmentLoader.newRegionAttachment(e,n,o);if(null==a)return null;a.path=o,a.x=this.getValue(t,"x",0)*r,a.y=this.getValue(t,"y",0)*r,a.scaleX=this.getValue(t,"scaleX",1),a.scaleY=this.getValue(t,"scaleY",1),a.rotation=this.getValue(t,"rotation",0),a.width=t.width*r,a.height=t.height*r;var h=this.getValue(t,"color",null);return null!=h&&a.color.setFromString(h),a;case"boundingbox":var l=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(null==l)return null;this.readVertices(t,l,t.vertexCount<<1);var h=this.getValue(t,"color",null);return null!=h&&l.color.setFromString(h),l;case"weightedmesh":case"skinnedmesh":case"mesh":case"linkedmesh":var o=this.getValue(t,"path",n),c=this.attachmentLoader.newMeshAttachment(e,n,o);if(null==c)return null;c.path=o;var h=this.getValue(t,"color",null);null!=h&&c.color.setFromString(h);var u=this.getValue(t,"parent",null);if(null!=u)return c.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new m(c,this.getValue(t,"skin",null),i,u)),c;var d=t.uvs;return this.readVertices(t,c,d.length),c.triangles=t.triangles,c.regionUVs=d,c.hullLength=2*this.getValue(t,"hull",0),c;case"path":var o=this.attachmentLoader.newPathAttachment(e,n);if(null==o)return null;o.closed=this.getValue(t,"closed",!1),o.constantSpeed=this.getValue(t,"constantSpeed",!0);var f=t.vertexCount;this.readVertices(t,o,f<<1);for(var g=p.Utils.newArray(f/3,0),v=0;v<t.lengths.length;v++)g[v++]=t.lengths[v]*r;o.lengths=g;var h=this.getValue(t,"color",null);return null!=h&&o.color.setFromString(h),o}return null},t.prototype.readVertices=function(t,e,i){var n=this.scale;e.worldVerticesLength=i;var r=t.vertices;if(i==r.length){if(1!=n)for(var s=0,o=r.length;s<o;s++)r[s]*=n;return void(e.vertices=p.Utils.toFloatArray(r))}for(var a=new Array,h=new Array,s=0,o=r.length;s<o;){var l=r[s++];h.push(l);for(var c=s+4*l;s<c;s+=4)h.push(r[s]),a.push(r[s+1]*n),a.push(r[s+2]*n),a.push(r[s+3])}e.bones=h,e.vertices=p.Utils.toFloatArray(a)},t.prototype.readAnimation=function(t,e,i){var n=this.scale,r=new Array,s=0;if(t.slots)for(var a in t.slots){var h=t.slots[a],c=i.findSlotIndex(a);if(c==-1)throw new Error("Slot not found: "+a);for(var u in h){var f=h[u];if("color"==u){var m=new d.ColorTimeline(f.length);m.slotIndex=c;for(var g=0,v=0;v<f.length;v++){var y=f[v],_=new p.Color;_.setFromString(y.color),m.setFrame(g,y.time,_.r,_.g,_.b,_.a),this.readCurve(y,m,g),g++}r.push(m),s=Math.max(s,m.frames[(m.getFrameCount()-1)*d.ColorTimeline.ENTRIES])}else{if(!(u="attachment"))throw new Error("Invalid timeline type for a slot: "+u+" ("+a+")");var m=new d.AttachmentTimeline(f.length);m.slotIndex=c;for(var g=0,v=0;v<f.length;v++){var y=f[v];m.setFrame(g++,y.time,y.name)}r.push(m),s=Math.max(s,m.frames[m.getFrameCount()-1])}}}if(t.bones)for(var x in t.bones){var b=t.bones[x],w=i.findBoneIndex(x);if(w==-1)throw new Error("Bone not found: "+x);for(var u in b){var f=b[u];if("rotate"===u){var m=new d.RotateTimeline(f.length);m.boneIndex=w;for(var g=0,v=0;v<f.length;v++){var y=f[v];m.setFrame(g,y.time,y.angle),this.readCurve(y,m,g),g++}r.push(m),s=Math.max(s,m.frames[(m.getFrameCount()-1)*d.RotateTimeline.ENTRIES])}else{if("translate"!==u&&"scale"!==u&&"shear"!==u)throw new Error("Invalid timeline type for a bone: "+u+" ("+x+")");var m=null,T=1;"scale"===u?m=new d.ScaleTimeline(f.length):"shear"===u?m=new d.ShearTimeline(f.length):(m=new d.TranslateTimeline(f.length),T=n),m.boneIndex=w;for(var g=0,v=0;v<f.length;v++){var y=f[v],S=this.getValue(y,"x",0),E=this.getValue(y,"y",0);m.setFrame(g,y.time,S*T,E*T),this.readCurve(y,m,g),g++}r.push(m),s=Math.max(s,m.frames[(m.getFrameCount()-1)*d.TranslateTimeline.ENTRIES])}}}if(t.ik)for(var C in t.ik){var M=t.ik[C],P=i.findIkConstraint(C),m=new d.IkConstraintTimeline(M.length);m.ikConstraintIndex=i.ikConstraints.indexOf(P);for(var g=0,v=0;v<M.length;v++){var y=M[v];m.setFrame(g,y.time,this.getValue(y,"mix",1),this.getValue(y,"bendPositive",!0)?1:-1),this.readCurve(y,m,g),g++}r.push(m),s=Math.max(s,m.frames[(m.getFrameCount()-1)*d.IkConstraintTimeline.ENTRIES])}if(t.transform)for(var C in t.transform){var M=t.transform[C],P=i.findTransformConstraint(C),m=new d.TransformConstraintTimeline(M.length);m.transformConstraintIndex=i.transformConstraints.indexOf(P);for(var g=0,v=0;v<M.length;v++){var y=M[v];m.setFrame(g,y.time,this.getValue(y,"rotateMix",1),this.getValue(y,"translateMix",1),this.getValue(y,"scaleMix",1),this.getValue(y,"shearMix",1)),this.readCurve(y,m,g),g++}r.push(m),
s=Math.max(s,m.frames[(m.getFrameCount()-1)*d.TransformConstraintTimeline.ENTRIES])}if(t.paths)for(var C in t.paths){var M=t.paths[C],A=i.findPathConstraintIndex(C);if(A==-1)throw new Error("Path constraint not found: "+C);var I=i.pathConstraints[A];for(var u in M){var f=M[u];if("position"===u||"spacing"===u){var m=null,T=1;"spacing"===u?(m=new d.PathConstraintSpacingTimeline(f.length),I.spacingMode!=l.SpacingMode.Length&&I.spacingMode!=l.SpacingMode.Fixed||(T=n)):(m=new d.PathConstraintPositionTimeline(f.length),I.positionMode==l.PositionMode.Fixed&&(T=n)),m.pathConstraintIndex=A;for(var g=0,v=0;v<f.length;v++){var y=f[v];m.setFrame(g,y.time,this.getValue(y,u,0)*T),this.readCurve(y,m,g),g++}r.push(m),s=Math.max(s,m.frames[(m.getFrameCount()-1)*d.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===u){var m=new d.PathConstraintMixTimeline(f.length);m.pathConstraintIndex=A;for(var g=0,v=0;v<f.length;v++){var y=f[v];m.setFrame(g,y.time,this.getValue(y,"rotateMix",1),this.getValue(y,"translateMix",1)),this.readCurve(y,m,g),g++}r.push(m),s=Math.max(s,m.frames[(m.getFrameCount()-1)*d.PathConstraintMixTimeline.ENTRIES])}}}if(t.deform)for(var O in t.deform){var R=t.deform[O],k=i.findSkin(O);if(null==k)throw new Error("Skin not found: "+O);for(var a in R){var h=R[a],c=i.findSlotIndex(a);if(c==-1)throw new Error("Slot not found: "+h.name);for(var u in h){var f=h[u],D=k.getAttachment(c,u);if(null==D)throw new Error("Deform attachment not found: "+f.name);var L=null!=D.bones,B=D.vertices,F=L?B.length/3*2:B.length,m=new d.DeformTimeline(f.length);m.slotIndex=c,m.attachment=D;for(var g=0,N=0;N<f.length;N++){var y=f[N],U=void 0,G=this.getValue(y,"vertices",null);if(null==G)U=L?p.Utils.newFloatArray(F):B;else{U=p.Utils.newFloatArray(F);var j=this.getValue(y,"offset",0);if(p.Utils.arrayCopy(G,0,U,j,G.length),1!=n)for(var v=j,X=v+G.length;v<X;v++)U[v]*=n;if(!L)for(var v=0;v<F;v++)U[v]+=B[v]}m.setFrame(g,y.time,U),this.readCurve(y,m,g),g++}r.push(m),s=Math.max(s,m.frames[m.getFrameCount()-1])}}}var H=t.drawOrder;if(null==H&&(H=t.draworder),null!=H){for(var m=new d.DrawOrderTimeline(H.length),Y=i.slots.length,g=0,N=0;N<H.length;N++){var W=H[N],V=null,z=this.getValue(W,"offsets",null);if(null!=z){V=p.Utils.newArray(Y,-1);for(var q=p.Utils.newArray(Y-z.length,0),K=0,Z=0,v=0;v<z.length;v++){var J=z[v],c=i.findSlotIndex(J.slot);if(c==-1)throw new Error("Slot not found: "+J.slot);for(;K!=c;)q[Z++]=K++;V[K+J.offset]=K++}for(;K<Y;)q[Z++]=K++;for(var v=Y-1;v>=0;v--)V[v]==-1&&(V[v]=q[--Z])}m.setFrame(g++,W.time,V)}r.push(m),s=Math.max(s,m.frames[m.getFrameCount()-1])}if(t.events){for(var m=new d.EventTimeline(t.events.length),g=0,v=0;v<t.events.length;v++){var $=t.events[v],Q=i.findEvent($.name);if(null==Q)throw new Error("Event not found: "+$.name);var tt=new o.Event($.time,Q);tt.intValue=this.getValue($,"int",Q.intValue),tt.floatValue=this.getValue($,"float",Q.floatValue),tt.stringValue=this.getValue($,"string",Q.stringValue),m.setFrame(g++,tt)}r.push(m),s=Math.max(s,m.frames[m.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new d.Animation(e,r,s))},t.prototype.readCurve=function(t,e,i){if(t.curve)if("stepped"===t.curve)e.setStepped(i);else if("[object Array]"===Object.prototype.toString.call(t.curve)){var n=t.curve;e.setCurve(i,n[0],n[1],n[2],n[3])}},t.prototype.getValue=function(t,e,i){return void 0!==t[e]?t[e]:i},t.blendModeFromString=function(t){if("multiply"===t)return PIXI.BLEND_MODES.MULTIPLY;if("additive"===t)return PIXI.BLEND_MODES.ADD;if("screen"===t)return PIXI.BLEND_MODES.SCREEN;if("normal"===t)return PIXI.BLEND_MODES.NORMAL;throw new Error("Unknown blend mode: "+t)},t.positionModeFromString=function(t){if(t=t.toLowerCase(),"fixed"==t)return l.PositionMode.Fixed;if("percent"==t)return l.PositionMode.Percent;throw new Error("Unknown position mode: "+t)},t.spacingModeFromString=function(t){if(t=t.toLowerCase(),"length"==t)return l.SpacingMode.Length;if("fixed"==t)return l.SpacingMode.Fixed;if("percent"==t)return l.SpacingMode.Percent;throw new Error("Unknown position mode: "+t)},t.rotateModeFromString=function(t){if(t=t.toLowerCase(),"tangent"==t)return l.RotateMode.Tangent;if("chain"==t)return l.RotateMode.Chain;if("chainscale"==t)return l.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+t)},t}();i.SkeletonJson=f;var m=function(){function t(t,e,i,n){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n}return t}()},{"./Animation":2,"./BoneData":7,"./Event":8,"./EventData":9,"./IkConstraintData":11,"./PathConstraintData":13,"./SkeletonData":16,"./Skin":18,"./SlotData":20,"./TransformConstraintData":25,"./Utils":26}],18:[function(t,e,i){"use strict";var n=function(){function t(t){if(this.attachments=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return t.prototype.addAttachment=function(t,e,i){if(null==i)throw new Error("attachment cannot be null.");var n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=i},t.prototype.getAttachment=function(t,e){var i=this.attachments[t];return i?i[e]:null},t.prototype.attachAll=function(t,e){for(var i=0,n=0;n<t.slots.length;n++){var r=t.slots[n],s=r.getAttachment();if(s&&i<e.attachments.length){var o=e.attachments[i];for(var a in o){var h=o[a];if(s==h){var l=this.getAttachment(i,name);null!=l&&r.setAttachment(l);break}}}i++}},t}();i.Skin=n},{}],19:[function(t,e,i){"use strict";var n=t("./Utils"),r=function(){function t(t,e){if(this.attachmentVertices=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new n.Color,this.blendMode=t.blendMode,this.setToSetupPose()}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},t.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}();i.Slot=r},{"./Utils":26}],20:[function(t,e,i){"use strict";var n=t("./Utils"),r=function(){function t(t,e,i){if(this.color=new n.Color(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i}return t}();i.SlotData=r},{"./Utils":26}],21:[function(t,e,i){"use strict";var n=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return r.Nearest;case"linear":return r.Linear;case"mipmap":return r.MipMap;case"mipmapnearestnearest":return r.MipMapNearestNearest;case"mipmaplinearnearest":return r.MipMapLinearNearest;case"mipmapnearestlinear":return r.MipMapNearestLinear;case"mipmaplinearlinear":return r.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return s.MirroredRepeat;case"clamptoedge":return s.ClampToEdge;case"repeat":return s.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();i.Texture=n,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(i.TextureFilter||(i.TextureFilter={}));var r=i.TextureFilter;!function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(i.TextureWrap||(i.TextureWrap={}));var s=i.TextureWrap,o=function(){function t(){this.size=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.width:t.trim?t.trim.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.height:t.trim?t.trim.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.width:t.crop.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.height:t.crop.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),t}();i.TextureRegion=o},{}],22:[function(t,e,i){"use strict";var n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=t("./Texture"),s=function(){function t(t,e,i){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,i)}return t.prototype.addTexture=function(t,e){for(var i=this.pages,n=null,s=0;s<i.length;s++)if(i[s].baseTexture===e.baseTexture){n=i[s];break}if(null===n){n=new a,n.name="texturePage";var o=e.baseTexture;n.width=o.realWidth,n.height=o.realHeight,n.baseTexture=o,n.minFilter=n.magFilter=r.TextureFilter.Nearest,n.uWrap=r.TextureWrap.ClampToEdge,n.vWrap=r.TextureWrap.ClampToEdge,i.push(n)}var l=new h;return l.name=t,l.page=n,l.texture=e,l.index=-1,this.regions.push(l),l},t.prototype.addTextureHash=function(t,e){for(var i in t)t.hasOwnProperty(i)&&this.addTexture(e&&i.indexOf(".")!==-1?i.substr(0,i.lastIndexOf(".")):i,t[i])},t.prototype.addSpineAtlas=function(t,e,i){return this.load(t,e,i)},t.prototype.load=function(t,e,i){var n=this;if(null==e)throw new Error("textureLoader cannot be null.");var s=new o(t),l=new Array(4),c=null,u=function(){for(;;){var t=s.readLine();if(null==t)return i&&i(n);if(t=t.trim(),0==t.length)c=null;else{if(!c){c=new a,c.name=t,2==s.readTuple(l)&&(c.width=parseInt(l[0]),c.height=parseInt(l[1]),s.readTuple(l)),s.readTuple(l),c.minFilter=r.Texture.filterFromString(l[0]),c.magFilter=r.Texture.filterFromString(l[1]);var o=s.readValue();c.uWrap=r.TextureWrap.ClampToEdge,c.vWrap=r.TextureWrap.ClampToEdge,"x"==o?c.uWrap=r.TextureWrap.Repeat:"y"==o?c.vWrap=r.TextureWrap.Repeat:"xy"==o&&(c.uWrap=c.vWrap=r.TextureWrap.Repeat),e(t,function(t){c.baseTexture=t,t.hasLoaded||(t.width=c.width,t.height=c.height),n.pages.push(c),c.setFilters(),c.width&&c.height||(c.width=t.realWidth,c.height=t.realHeight,!c.width||!c.height),u()}),n.pages.push(c);break}var p=new h;p.name=t,p.page=c;var d="true"==s.readValue()?6:0;s.readTuple(l);var f=parseInt(l[0]),m=parseInt(l[1]);s.readTuple(l);var g=parseInt(l[0]),v=parseInt(l[1]),y=c.baseTexture.resolution;f/=y,m/=y,g/=y,v/=y;var _=new PIXI.Rectangle(f,m,d?v:g,d?g:v);4==s.readTuple(l)&&4==s.readTuple(l)&&s.readTuple(l);var x=parseInt(l[0])/y,b=parseInt(l[1])/y;s.readTuple(l);var w=parseInt(l[0])/y,T=parseInt(l[1])/y,S=new PIXI.Rectangle(0,0,x,b),E=new PIXI.Rectangle(w,b-v-T,g,v);if("4"==PIXI.VERSION[0])p.texture=new PIXI.Texture(p.page.baseTexture,_,S,E,d);else{var C=new PIXI.Rectangle(f,m,g,v),M=C.clone();E.width=x,E.height=b,p.texture=new PIXI.Texture(p.page.baseTexture,C,M,E,d)}p.index=parseInt(s.readValue()),p.texture._updateUvs(),n.regions.push(p)}}};u()},t.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},t.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},t}();i.TextureAtlas=s;var o=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(e==-1)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),i=e.indexOf(":");if(i==-1)throw new Error("Invalid line: "+e);for(var n=0,r=i+1;n<3;n++){var s=e.indexOf(",",r);if(s==-1)break;t[n]=e.substr(r,s-r).trim(),r=s+1}return t[n]=e.substring(r).trim(),n+1},t}(),a=function(){function t(){}return t.prototype.setFilters=function(){var t=this.baseTexture,e=this.minFilter;e==r.TextureFilter.Linear?t.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==r.TextureFilter.Nearest?t.scaleMode=PIXI.SCALE_MODES.NEAREST:(t.mipmap=!0,e==r.TextureFilter.MipMapNearestNearest?t.scaleMode=PIXI.SCALE_MODES.NEAREST:t.scaleMode=PIXI.SCALE_MODES.LINEAR)},t}();i.TextureAtlasPage=a;var h=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(r.TextureRegion);i.TextureAtlasRegion=h},{"./Texture":21}],23:[function(t,e,i){"use strict";var n=t("./attachments"),r=function(){function t(t){this.atlas=t}return t.prototype.newRegionAttachment=function(t,e,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");var s=new n.RegionAttachment(e);return s.region=r,s},t.prototype.newMeshAttachment=function(t,e,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");var s=new n.MeshAttachment(e);return s.region=r,s},t.prototype.newBoundingBoxAttachment=function(t,e){return new n.BoundingBoxAttachment(e)},t.prototype.newPathAttachment=function(t,e){return new n.PathAttachment(e)},t}();i.TextureAtlasAttachmentLoader=r},{"./attachments":33}],24:[function(t,e,i){"use strict";var n=t("./Utils"),r=function(){function t(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new n.Vector2,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){for(var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix,s=this.target,o=s.matrix,a=o.a,h=o.c,l=o.b,c=o.d,u=this.bones,p=0,d=u.length;p<d;p++){var f=u[p],m=f.matrix;if(t>0){var g=m.a,v=m.c,y=m.b,_=m.d,x=Math.atan2(l,a)-Math.atan2(y,g)+this.data.offsetRotation*n.MathUtils.degRad;x>n.MathUtils.PI?x-=n.MathUtils.PI2:x<-n.MathUtils.PI&&(x+=n.MathUtils.PI2),x*=t;var b=Math.cos(x),w=Math.sin(x);m.a=b*g-w*y,m.c=b*v-w*_,m.b=w*g+b*y,m.d=w*v+b*_}if(e>0){var T=this.temp;s.localToWorld(T.set(this.data.offsetX,this.data.offsetY)),m.tx+=(T.x-f.worldX)*e,m.ty+=(T.y-f.worldY)*e}if(i>0){var S=Math.sqrt(m.a*m.a+m.b*m.b),E=Math.sqrt(a*a+l*l),C=S>1e-5?(S+(E-S+this.data.offsetScaleX)*i)/S:0;m.a*=C,m.b*=C,S=Math.sqrt(m.c*m.c+m.d*m.d),E=Math.sqrt(h*h+c*c),C=S>1e-5?(S+(E-S+this.data.offsetScaleY)*i)/S:0,m.c*=C,m.d*=C}if(r>0){var v=m.c,_=m.d,M=Math.atan2(_,v),x=Math.atan2(c,h)-Math.atan2(l,a)-(M-Math.atan2(m.b,m.a));x>n.MathUtils.PI?x-=n.MathUtils.PI2:x<-n.MathUtils.PI&&(x+=n.MathUtils.PI2),x=M+(x+this.data.offsetShearY*n.MathUtils.degRad)*r;var C=Math.sqrt(v*v+_*_);m.c=Math.cos(x)*C,m.d=Math.sin(x)*C}}},t}();i.TransformConstraint=r},{"./Utils":26}],25:[function(t,e,i){"use strict";var n=function(){function t(t){if(this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,null==t)throw new Error("name cannot be null.");this.name=t}return t}();i.TransformConstraintData=n},{}],26:[function(t,e,i){"use strict";var n=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.r=t,this.g=e,this.b=i,this.a=n}return t.prototype.set=function(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,i,n){return this.r+=t,this.g+=e,this.b+=i,this.a+=n,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();i.Color=n;var r=function(){function t(){}return t.clamp=function(t,e,i){return t<e?e:t>i?i:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>=0?1:-1},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}();i.MathUtils=r;var s=function(){function t(){}return t.arrayCopy=function(t,e,i,n,r){for(var s=e,o=n;s<e+r;s++,o++)i[o]=t[s]},t.setArraySize=function(t,e,i){void 0===i&&(i=0);var n=t.length;if(n==e)return t;if(t.length=e,n<e)for(var r=n;r<e;r++)t[r]=i;return t},t.newArray=function(t,e){for(var i=new Array(t),n=0;n<t;n++)i[n]=e;return i},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var i=new Array(e),n=0;n<i.length;n++)i[n]=0;return i},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}();i.Utils=s;var o=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var i=t.bones[e];i.matrix}},t}();i.DebugUtils=o;var a=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)this.items[e]=t[e]},t.prototype.clear=function(){this.items.length=0},t}();i.Pool=a;var h=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();i.Vector2=h;var l=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();i.TimeKeeper=l},{}],27:[function(t,e,i){"use strict";var n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(){function t(t){if(null==t)throw new Error("name cannot be null.");this.name=t}return t}();i.Attachment=r;var s=function(t){function e(e){t.call(this,e),this.worldVerticesLength=0}return n(e,t),e.prototype.computeWorldVertices=function(t,e){this.computeWorldVerticesWith(t,0,this.worldVerticesLength,e,0)},e.prototype.computeWorldVerticesWith=function(t,e,i,n,r){i+=r;var s=t.bone.skeleton,o=s.x,a=s.y,h=t.attachmentVertices,l=this.vertices,c=this.bones;if(null!=c){for(var u=0,p=0,d=0;d<e;d+=2){var f=c[u];u+=f+1,p+=f}var m=s.bones;if(0==h.length)for(var g=r,v=3*p;g<i;g+=2){var y=o,_=a,f=c[u++];for(f+=u;u<f;u++,v+=3){var x=m[c[u]],b=x.matrix,w=l[v],T=l[v+1],S=l[v+2];y+=(w*b.a+T*b.c+b.tx)*S,_+=(w*b.b+T*b.d+b.ty)*S}n[g]=y,n[g+1]=_}else for(var E=h,g=r,v=3*p,C=p<<1;g<i;g+=2){var y=o,_=a,f=c[u++];for(f+=u;u<f;u++,v+=3,C+=2){var x=m[c[u]],b=x.matrix,w=l[v]+E[C],T=l[v+1]+E[C+1],S=l[v+2];y+=(w*b.a+T*b.c+b.tx)*S,_+=(w*b.b+T*b.d+b.ty)*S}n[g]=y,n[g+1]=_}}else{h.length>0&&(l=h);var x=t.bone,b=x.matrix;o+=b.tx,a+=b.ty;for(var M=b.a,v=b.c,P=b.b,A=b.d,I=e,g=r;g<i;I+=2,g+=2){var w=l[I],T=l[I+1];n[g]=w*M+T*v+o,n[g+1]=w*P+T*A+a}}},e.prototype.applyDeform=function(t){return this==t},e}(r);i.VertexAttachment=s},{}],28:[function(t,e,i){"use strict";!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path"}(i.AttachmentType||(i.AttachmentType={}));i.AttachmentType},{}],29:[function(t,e,i){"use strict";var n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=t("./Attachment"),s=t("../Utils"),o=function(t){function e(e){t.call(this,e),this.color=new s.Color(1,1,1,1)}return n(e,t),e}(r.VertexAttachment);i.BoundingBoxAttachment=o},{"../Utils":26,"./Attachment":27}],30:[function(t,e,i){"use strict";var n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=t("./Attachment"),s=t("../Utils"),o=function(t){function e(e){t.call(this,e),this.color=new s.Color(1,1,1,1),this.inheritDeform=!1,this.tempColor=new s.Color(0,0,0,0)}return n(e,t),e.prototype.updateWorldVertices=function(t,e){return[]},e.prototype.updateUVs=function(t,e){var i=this.regionUVs,n=i.length;if(e&&e.length==n||(e=s.Utils.newFloatArray(n)),null!=t){for(var r=t.texture,o=r._uvs,a=t.width,h=t.height,l=t.originalWidth,c=t.originalHeight,u=t.offsetX,p=t.pixiOffsetY,d=0;d<n;d+=2){var f=this.regionUVs[d],m=this.regionUVs[d+1];f=(f*l-u)/a,m=(m*c-p)/h,e[d]=(o.x0*(1-f)+o.x1*f)*(1-m)+(o.x3*(1-f)+o.x2*f)*m,e[d+1]=(o.y0*(1-f)+o.y1*f)*(1-m)+(o.y3*(1-f)+o.y2*f)*m}return e}},e.prototype.applyDeform=function(t){return this==t||this.inheritDeform&&this.parentMesh==t},e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength)},e}(r.VertexAttachment);i.MeshAttachment=o},{"../Utils":26,"./Attachment":27}],31:[function(t,e,i){"use strict";var n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=t("./Attachment"),s=t("../Utils"),o=function(t){function e(e){t.call(this,e),this.closed=!1,this.constantSpeed=!1,this.color=new s.Color(1,1,1,1)}return n(e,t),e}(r.VertexAttachment);i.PathAttachment=o},{"../Utils":26,"./Attachment":27}],32:[function(t,e,i){"use strict";var n=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=t("./Attachment"),s=t("../Utils"),o=function(t){function e(e){t.call(this,e),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new s.Color(1,1,1,1)}return n(e,t),e.prototype.updateWorldVertices=function(t,e){return[]},e}(r.Attachment);i.RegionAttachment=o},{"../Utils":26,"./Attachment":27}],33:[function(t,e,i){"use strict";var n=t("./Attachment");i.Attachment=n.Attachment,i.VertexAttachment=n.VertexAttachment;var r=t("./AttachmentType");i.AttachmentType=r.AttachmentType;var s=t("./BoundingBoxAttachment");i.BoundingBoxAttachment=s.BoundingBoxAttachment;var o=t("./MeshAttachment");i.MeshAttachment=o.MeshAttachment;var a=t("./PathAttachment");i.PathAttachment=a.PathAttachment;var h=t("./RegionAttachment");i.RegionAttachment=h.RegionAttachment},{"./Attachment":27,"./AttachmentType":28,"./BoundingBoxAttachment":29,"./MeshAttachment":30,"./PathAttachment":31,"./RegionAttachment":32}],34:[function(t,e,i){"use strict";function n(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}n(t("./attachments"));var r=t("./Animation");i.ColorTimeline=r.ColorTimeline,i.AttachmentTimeline=r.AttachmentTimeline,i.RotateTimeline=r.RotateTimeline,i.TranslateTimeline=r.TranslateTimeline,i.ScaleTimeline=r.ScaleTimeline,i.ShearTimeline=r.ShearTimeline,i.IkConstraintTimeline=r.IkConstraintTimeline,i.TransformConstraintTimeline=r.TransformConstraintTimeline,i.PathConstraintPositionTimeline=r.PathConstraintPositionTimeline,i.PathConstraintSpacingTimeline=r.PathConstraintSpacingTimeline,i.PathConstraintMixTimeline=r.PathConstraintMixTimeline,i.DeformTimeline=r.DeformTimeline,i.DrawOrderTimeline=r.DrawOrderTimeline,i.EventTimeline=r.EventTimeline,i.Animation=r.Animation,i.CurveTimeline=r.CurveTimeline;var s=t("./AnimationState");i.AnimationState=s.AnimationState;var o=t("./AnimationStateData");i.AnimationStateData=o.AnimationStateData;var a=t("./BlendMode");i.BlendMode=a.BlendMode;var h=t("./Bone");i.Bone=h.Bone;var l=t("./BoneData");i.BoneData=l.BoneData;var c=t("./Event");i.Event=c.Event;var u=t("./EventData");i.EventData=u.EventData;var p=t("./IkConstraint");i.IkConstraint=p.IkConstraint;var d=t("./IkConstraintData");i.IkConstraintData=d.IkConstraintData;var f=t("./PathConstraint");i.PathConstraint=f.PathConstraint;var m=t("./PathConstraintData");i.PathConstraintData=m.PathConstraintData,i.SpacingMode=m.SpacingMode,i.RotateMode=m.RotateMode,i.PositionMode=m.PositionMode;var g=t("./Skeleton");i.Skeleton=g.Skeleton;var v=t("./SkeletonBounds");i.SkeletonBounds=v.SkeletonBounds;var y=t("./SkeletonData");i.SkeletonData=y.SkeletonData;var _=t("./SkeletonJson");i.SkeletonJson=_.SkeletonJson;var x=t("./Skin");i.Skin=x.Skin;var b=t("./Slot");i.Slot=b.Slot;var w=t("./SlotData");i.SlotData=w.SlotData;var T=t("./Texture");i.Texture=T.Texture,i.TextureWrap=T.TextureWrap,i.TextureRegion=T.TextureRegion,i.TextureFilter=T.TextureFilter;var S=t("./TextureAtlas");i.TextureAtlas=S.TextureAtlas,i.TextureAtlasRegion=S.TextureAtlasRegion;var E=t("./TextureAtlasAttachmentLoader");i.TextureAtlasAttachmentLoader=E.TextureAtlasAttachmentLoader;var C=t("./TransformConstraint");i.TransformConstraint=C.TransformConstraint;var M=t("./TransformConstraintData");i.TransformConstraintData=M.TransformConstraintData;var P=t("./Utils");i.Utils=P.Utils,i.Pool=P.Pool,i.MathUtils=P.MathUtils,i.Color=P.Color,i.Vector2=P.Vector2},{"./Animation":2,"./AnimationState":3,"./AnimationStateData":4,"./BlendMode":5,"./Bone":6,"./BoneData":7,"./Event":8,"./EventData":9,"./IkConstraint":10,"./IkConstraintData":11,"./PathConstraint":12,"./PathConstraintData":13,"./Skeleton":14,"./SkeletonBounds":15,"./SkeletonData":16,"./SkeletonJson":17,"./Skin":18,"./Slot":19,"./SlotData":20,"./Texture":21,"./TextureAtlas":22,"./TextureAtlasAttachmentLoader":23,"./TransformConstraint":24,"./TransformConstraintData":25,"./Utils":26,"./attachments":33}],35:[function(t,e,i){"use strict";function n(){return function(t,e){if(!t.data||!t.isJson||!t.data.bones)return e();var i=t.metadata?t.metadata.spineAtlas:null;if(i===!1)return e();if(i&&i.pages){var n=new o.SkeletonJson(new o.TextureAtlasAttachmentLoader(i)),s=n.readSkeletonData(t.data);return t.spineData=s,t.spineAtlas=i,e()}var a=".atlas";t.metadata&&t.metadata.spineAtlasSuffix&&(a=t.metadata.spineAtlasSuffix);var h=t.url.substr(0,t.url.lastIndexOf("."))+a;h=h.replace(this.baseUrl,"");var l={crossOrigin:t.crossOrigin,xhrType:PIXI.loaders.Resource.XHR_RESPONSE_TYPE.TEXT,metadata:t.metadata?t.metadata.spineMetadata:null},c={crossOrigin:t.crossOrigin,metadata:t.metadata?t.metadata.imageMetadata:null},u=t.url.substr(0,t.url.lastIndexOf("/")+1);u=u.replace(this.baseUrl,"");var p=r(this,t.name+"_atlas_page_",u,c);this.add(t.name+"_atlas",h,l,function(){new o.TextureAtlas(this.xhr.responseText,p,function(i){var n=new o.SkeletonJson(new o.TextureAtlasAttachmentLoader(i)),r=n.readSkeletonData(t.data);t.spineData=r,t.spineAtlas=i,e()})})}}function r(t,e,i,n){return i&&i.lastIndexOf("/")!==i.length-1&&(i+="/"),function(r,s){var o=e+r,a=i+r;t.add(o,a,n,function(t){s(t.texture.baseTexture)})}}function s(t,e){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,i){i(PIXI.BaseTexture.fromImage(t,e))}}var o=t("./core");i.atlasParser=n,i.imageLoaderAdapter=r,i.syncImageLoaderAdapter=s,PIXI.loaders.Loader.addPixiMiddleware(n),PIXI.loader.use(n())},{"./core":34}],36:[function(t,e,i){"use strict";var n=t("./core");i.core=n;var r=t("./loaders");i.loaders=r;var s=t("./Spine");i.Spine=s.Spine,i.SpineMesh=s.SpineMesh,i.SpineSprite=s.SpineSprite},{"./Spine":1,"./core":34,"./loaders":35}]},{},[36])(36)})},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(58),o=function(t){this.game=t,this.grid=[],this.debug=!1,this.debug&&(this.g=new r.Graphics),this.minX=0,this.maxX=0,this.minY=0,this.maxY=0};o.prototype.bringToFront=function(){this.game.view.addChild(this.g)},o.prototype.drawGrid=function(){if(this.debug){this.g.clear().beginFill(0);for(var t=this.minX;t<this.maxX;t++)for(var e=this.minY;e<this.maxY;e++)0===t&&0===e?this.g.beginFill(65280):this.grid[t][e]&&this.grid[t][e].type===s.TYPES.FLOOR?this.g.beginFill(65280):this.grid[t][e]&&this.grid[t][e].type===s.TYPES.NO_KILL_FLOOR?this.g.beginFill(65535):this.grid[t][e]&&this.grid[t][e].type===s.TUTORIAL.POINT_A?this.g.beginFill(16711680):this.grid[t][e]&&this.grid[t][e].type===s.TUTORIAL.POINT_B?this.g.beginFill(16777215):this.grid[t][e]&&this.grid[t][e].type===s.TYPES.BRIDGE?this.g.beginFill(16777215):this.grid[t][e]&&this.grid[t][e].type===s.TYPES.SPRING?this.g.beginFill(16711935):this.grid[t][e]&&this.grid[t][e].type===s.TYPES.ENEMY?this.g.beginFill(16711680):this.grid[t][e]&&"point"===this.grid[t][e].type?this.g.beginFill(16711680):this.g.beginFill(0),this.g.drawCircle(10*t-100,10*e+100,3);this.game.view.addChild(this.g)}},o.prototype.clear=function(){this.minX=Math.max(this.minX,0),this.maxX=Math.min(this.minX,0),this.minY=Math.max(this.minY,0),this.maxY=Math.min(this.minY,0);for(var t=this.minX;t<this.maxX;t++)for(var e=this.minY;e<this.maxY;e++)this.grid[t][e]=null;
this.debug&&this.drawGrid()},o.prototype.reset=function(){this.clear()},o.prototype.createGrid=function(t,e){for(var i=-t,n=t,r=i;r<n;r++)this.grid[r]=[];e&&(this.game=e)},o.prototype.percentageEnclosed=function(t){for(var e,i,n,r,s=0,o=0,a=0;a<t.length;a++)e=this.grid[t[a].x-1][t[a].y]?1:0,i=this.grid[t[a].x][t[a].y-1]?1:0,n=this.grid[t[a].x+1][t[a].y]?1:0,r=this.grid[t[a].x][t[a].y+1]?1:0,o+=e+i+n+r,s+=4;return o/s},o.prototype.updateGrid=function(t,e){for(var i=0;i<t.length;i++)t[i].x<this.minX?this.minX=t[i].x:t[i].x>this.maxX&&(this.maxX=t[i].x),t[i].y<this.minY?this.minY=t[i].y:t[i].y>this.maxY&&(this.maxY=t[i].y),this.setObject(t[i].x,t[i].y,e);this.debug&&this.drawGrid()},o.prototype.setObject=function(t,e,i){this.grid[t]||(this.grid[t]=[]),this.grid[t][e]=i},o.prototype.getObject=function(t,e){return this.grid[t][e]},o.prototype.cornerLeftGrid=function(t){var e=t.position.x+t.body.shape.x,i=t.position.y+t.body.shape.y,n=Math.floor(e/(s.BLOCK_WIDTH/2)),r=Math.floor(i/(s.BLOCK_HEIGHT/2));return{x:n,y:r}},o.prototype.pixelsToGrid=function(t){for(var e=t.position.x+t.body.shape.x,i=t.position.x+t.body.shape.x+t.body.shape.width,n=t.position.y+t.body.shape.height+t.body.shape.y,r=t.position.y+t.body.shape.y,o=Math.floor(e/(s.BLOCK_WIDTH/2)),a=Math.floor(i/(s.BLOCK_WIDTH/2)),h=Math.floor(n/(s.BLOCK_HEIGHT/2)),l=Math.floor(r/(s.BLOCK_HEIGHT/2)),c=[],u=l;u<h;u++)for(var p=o;p<a;p++)c.push({x:p,y:u});return c},o.instance=new o,n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(41)),s=(i(47),i(94)),o=i(42),a=i(58),h=i(51),l=function(t){this.item=t};l.prototype=Object.create(r.prototype),l.prototype.reset=function(){},l.prototype.explode=function(t,e){for(var i=t*e,n=this.item,r=0;r<i;r++){var l=o.get(s);l.reset();var c=r%t,u=r/t|0,p=h.random(5,10),d=h.random(5,10),f=c-t/2;l.position.x=n.position.x+c*a.BLOCK_WIDTH/2,l.position.y=n.position.y+u*a.BLOCK_HEIGHT/2,l.body.velocity.x=p*f+10,l.body.velocity.y=(e-u)*-d,n.world.add(l)}},l.prototype.explodeSingle=function(t,e){var i=this.item,n=o.get(s);n.reset(),n.view._texture=t,n.view.tint=e;var r=0,a=h.random(5,10),l=h.random(5,10),c=r-0;n.position.x=i.position.x+t.frame.width/2,n.position.y=i.position.y+t.frame.height/2,n.body.velocity.x=a*c+10,n.body.velocity.y=-l,i.world.add(n)},n.exports=l}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=i(47),a=i(58),h=i(51),l=function(){var t=new o.CrashBody.fromRect(-a.BLOCK_WIDTH/2,-a.BLOCK_HEIGHT/2,a.BLOCK_WIDTH,a.BLOCK_HEIGHT);t.gravity=2,t.setMaxSpeed(1e3),t.friction=.999;var e=new r.Sprite;s.call(this,100,100,e,t),this.canCollide=!1,this.rotSpeed=0,this.body.position=this.position,this.view.anchor.set(.5),this.groups=["Debris","cull"]};l.prototype=Object.create(s.prototype),l.prototype.reset=function(){var t=h.randomInt(1,7);this.view.tint=16777215,this.view.texture=r.Texture.from("weight_debris_"+(t<7?"0":"")+t+".png"),this.rotSpeed=.2*Math.random(),this.view.rotation=0},l.prototype.update=function(){this.view.rotation+=this.rotSpeed},n.exports=l}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=i(58),a=i(37),h=function(t,e){var i=new r.Container;i.layer="waterfalls",s.call(this,t,e,i),this.player=null,this.fakePlayer=new r.Rectangle(0,0,o.BLOCK_WIDTH,2*o.BLOCK_HEIGHT),this.groups=["cull"],this.tints=[9419255,14477303],this.pieces=["waterfall_piece.png","waterfall_piece2.png","waterfall_piece3.png"],this.pool=[],this.activeItems=[]};h.prototype=Object.create(s.prototype),h.prototype.fire=function(t){for(var e=0;e<t;e++){var i=this.pool.pop();i||(i=new l,i.speed={}),i.alpha=1,i.life=20*Math.random()+40,i.position.x=50*Math.random()-25,i.position.y=30*Math.random()-15,i.speedFall=.2*Math.random()+.3,i.rotSpeed=.2*Math.random(),i.speed.x=8*Math.random()-4,i.speed.y=2*-Math.random()-8,this.activeItems.push(i),this.view.addChild(i)}},h.prototype.update=function(){this.tick++;for(var t=0;t<this.activeItems.length;t++){var e=this.activeItems[t];e.position.x+=e.speed.x,e.position.y+=e.speed.y,e.speed.x*=.99,e.speed.y+=e.speedFall,e.speedFall+=.01,e.update(),e.life>0?e.life--:(e.alpha*=.99,e.alpha<.05&&(this.activeItems.splice(t,1),t--,this.pool.push(e)))}0===this.activeItems.length&&this.destroy()},h.prototype.removedFromWorld=function(){this.player=null,this.view.removeChildren();for(var t=0;t<this.activeItems.length;t++)this.pool.push(this.activeItems[t]);this.activeItems=[]},h.prototype.addedToWorld=function(){},h.prototype.reset=function(t){};var l=function(){r.Container.call(this);var t=a.getTexturesFromFramesWithPrefix("pickup/coin_pickup_000%%.png",30,0,!1);this.sprite=new r.Sprite(t[0]),this.sprite.textures=t,this.sprite.counter=0,this.sprite.tint=16776960,this.sprite.speed=.6,this.sprite.anchor.x=1,this.sprite.anchor.y=.5,this.sprite.scale.x=this.sprite.scale.y=.6,this.sprite.x=-20,this.sprite.y=-30,this.addChild(this.sprite)};l.prototype=Object.create(r.Container.prototype),l.prototype.update=function(){this.sprite.counter+=this.sprite.speed,this.sprite.texture=this.sprite.textures[Math.floor(this.sprite.counter%this.sprite.textures.length)]},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=i(42),a=function(){s.call(this,0,0),color=r.utils.rgb2hex([.5,.5,1]),this.overlay=(new r.Graphics).beginFill(color).drawRect(0,0,3200,1740),this.container=new r.Container,this.overlay.addChild(this.container),this.rt=r.RenderTexture.create(1436,640,null,.15),this.map=r.Sprite.from(this.rt),this.map.interactiveChildren=!1,this.map.hitArea=new r.Rectangle,this.displacmentMap=new r.filters.DisplacementFilter(this.map),this.displacmentMap.scale.x=240,this.displacmentMap.scale.y=240,this.onPopComplete=this.onPopComplete.bind(this),this.groups=["cull"]};a.prototype=Object.create(s.prototype),a.prototype.reset=function(t){},a.prototype.pop=function(t,e){var i=o.get(h);i.anchor.set(.5),i.position.x=t,i.position.y=e,i.alpha=.3,0===this.container.children.length&&(this.world.game.view.filters=[this.displacmentMap]),this.container.addChild(i),i.pop(this.onPopComplete)},a.prototype.onPopComplete=function(t){this.container.removeChild(t),o.returnObject(t),0===this.container.children.length&&(this.world.view.filters=null)},a.prototype.addedToWorld=function(){this.world.game.view.addChild(this.map),this.container.parent=this.world.view.activeItemsContainer.parent,this.world.view.filterArea=new r.Rectangle(0,0,1e5,1e5),this.world.view.filters=null},a.prototype.removedFromWorld=function(){this.world.view.removeChild(this.map)},a.prototype.update=function(){var t=this.map.transform.worldTransform.clone();t.invert(),window.renderer.render(this.overlay,this.rt,!0,t,!1)};var h=function(){r.Sprite.call(this,r.Texture.from(ASSET_URL+"img/main/ringDisplaceMap.png"))};h.prototype=Object.create(r.Sprite.prototype),h.prototype.pop=function(t){this.scale.set(.5),TweenLite.to(this,.3,{alpha:0,ease:Sine.easeOut,delay:.2}),TweenLite.to(this.scale,1,{x:2.5,y:2,ease:Expo.easeOut,onComplete:function(){t(this)},onCompleteScope:this})},n.exports=a}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var PIXI=__webpack_require__(6),Item=__webpack_require__(41),Crash=__webpack_require__(47),Sky=__webpack_require__(98),Block=__webpack_require__(46),Waterfall=__webpack_require__(99),BlockNoKill=__webpack_require__(100),Gap=__webpack_require__(101),Enemy=__webpack_require__(102),SecretFloor=__webpack_require__(104),SpeedDoor=__webpack_require__(105),SpeedDoorEnd=__webpack_require__(106),BrickBat=__webpack_require__(107),TutorialPointA=__webpack_require__(108),TutorialPointB=__webpack_require__(109),TutorialPanel=__webpack_require__(110),Pickup=__webpack_require__(111),Detail=__webpack_require__(59),Flower=__webpack_require__(112),Pool=__webpack_require__(42),Math2=__webpack_require__(51),Cache=__webpack_require__(20),Const=__webpack_require__(58),ArrayUtils=__webpack_require__(113),Grid=__webpack_require__(92),GameSaveManager=__webpack_require__(64),WorldSpawner=function(){Item.call(this,0,0,null,null),this.elements={gap:Gap,waterfall:Waterfall,flower:Flower,detail:Detail,platform:Block,platform_no_kill:BlockNoKill,speed_door:SpeedDoor,speed_door_end:SpeedDoorEnd,coin:Pickup,enemy:Enemy,secret:SecretFloor,tutorial_pointA:TutorialPointA,tutorial_pointB:TutorialPointB,gap:Gap,kill_command:Gap,tuto:TutorialPanel,bat:BrickBat},this.percentageLevelsDifficulty={easy:[60,10],med:[30,50],hard:[10,40]},this.nbLevelsBeforeReseting=15,this.scaleDifficulty={0:"easy",1e3:"hard"},this.groups=["WorldSpawner"],this.organisedAlready=!1,this.floorPos=0,this.height=0,this.pickupCount=0,this.tutorialBeenSpliced=!1,this.levelData=Cache.getJson("levels"),this.index=0,this.currentLevel=this.levelData[0];for(var t=[],e=3;e<this.levelData.length;e++)t.push(this.levelData[e]);this.sortedLevels=this.organiseLevels(t),this.poolLevels=[],this.elementsOnScreen=[],this.grid=Grid.instance};WorldSpawner.prototype=Object.create(Item.prototype),WorldSpawner.prototype.reset=function(){this.nbLevelPassed=Math.floor(4*Math.random()+2),this.isResetingManually=!1,this.forceDifficultyMaximum=!1,GameSaveManager.instance.save.tutorialFinished&&!this.tutorialBeenSpliced?(this.levelData.splice(0,3),this.tutorialBeenSpliced=!0,this.isTutorial=!1,this.randomiseLevels()):GameSaveManager.instance.save.tutorialFinished?(this.isTutorial=!1,this.randomiseLevels()):this.isTutorial=!0,this.index=0,this.floorPos=0,this.currentLevel=this.levelData[0],this.addChunk(this.currentLevel)},WorldSpawner.prototype.nextStepTutorial=function(){this.index++},WorldSpawner.prototype.randomise=function(t){var e=t.slice();return ArrayUtils.shuffle(e),e},WorldSpawner.prototype.organiseLevels=function(t){for(var e={easy:[],med:[],hard:[],turbo:[]},i=0;i<t.length;i++)t[i].id.indexOf("med")!==-1?e.med.push(t[i]):t[i].id.indexOf("easy")!==-1?e.easy.push(t[i]):t[i].id.indexOf("hard")!==-1?e.hard.push(t[i]):t[i].id.indexOf("turbo")!==-1?e.turbo.push(t[i]):t[i].id.indexOf("safe_start")!==-1&&(this.levelSafeStart=t[i]);return e},WorldSpawner.prototype.forceDifficulty=function(){this.forceDifficultyMaximum=!0,this.randomiseLevels()},WorldSpawner.prototype.randomiseLevels=function(){var t=this.world.game.hud.distance,e=[0,1e3];t>e[1]&&(t=e[1]);var i=t/e[1];this.forceDifficultyMaximum&&(i=1);var n=Math.round(Math2.map(i,0,1,this.percentageLevelsDifficulty.easy[0],this.percentageLevelsDifficulty.easy[1])/100*this.nbLevelsBeforeReseting),r=Math.round(Math2.map(i,0,1,this.percentageLevelsDifficulty.med[0],this.percentageLevelsDifficulty.med[1])/100*this.nbLevelsBeforeReseting),s=Math.round(Math2.map(i,0,1,this.percentageLevelsDifficulty.hard[0],this.percentageLevelsDifficulty.hard[1])/100*this.nbLevelsBeforeReseting),o=[];o.push(this.randomise(this.sortedLevels.easy).slice(0,n)),o.push(this.randomise(this.sortedLevels.med).slice(0,r)),o.push(this.randomise(this.sortedLevels.hard).slice(0,s)),this.poolLevels=[];for(var a=0;a<o.length;a++)for(var h=0;h<o[a].length;h++)this.poolLevels.push(o[a][h]);this.poolLevels=this.randomise(this.poolLevels)},WorldSpawner.prototype.finishTutorial=function(){this.randomiseLevels(),this.isTutorial=!1,this.index=0},WorldSpawner.prototype.destroyLevel=function(){this.isResetingManually=!0,this.world.groups.cull.run(function(t){t.destroy()}),this.floorPos=this.world.game.player.position.x-250},WorldSpawner.prototype.addBatSafeArea=function(){this.addChunk(this.levelSafeStart),this.isResetingManually=!1},WorldSpawner.prototype.canFall=function(t){},WorldSpawner.prototype.addBackground=function(){var t=Pool.get(Sky);t.reset(),this.world.add(t)},WorldSpawner.prototype.addChunk=function(chunk){for(var item=null,i=0;i<chunk.elements.length;i++){var element=chunk.elements[i];if(element.id){item=Pool.get(this.elements[element.id]);var metaData=eval("("+element.metaData+")");if(item.position.x=element.x+this.floorPos,item.position.y=element.y+300,item.view&&(item.view.rotation=element.rotation*Math.PI/180),"platform"!==element.id&&"platform_no_kill"!==element.id&&"gap"!==element.id||(metaData.width=metaData.width||element.w,metaData.height=metaData.height||element.h),item.reset(metaData),this.world.add(item),item.body&&"pickup"!==item.name){var coords=this.grid.pixelsToGrid(item);this.grid.updateGrid(coords,item)}}}var realWidth=chunk.width,temp=new Crash.CrashBody.fromRect(0,0,realWidth,100),item=new Item(0,0,null,temp);item.body.type=Crash.CrashBody.STATIC,item.body.solid=!1,item.position.x=this.floorPos,item.position.y=1500,item.type=Const.TYPES.DROP,this.world.add(item),this.floorPos+=realWidth},WorldSpawner.prototype.update=function(){var t=this.world.view.camera;if(t.x+t.viewWidth>this.floorPos){if(this.isTutorial)var e=this.levelData[this.index];else if(this.nbLevelPassed--,this.nbLevelPassed<0){this.nbLevelPassed=Math.floor(6*Math.random()+6);var e=this.sortedLevels.turbo[Math.floor(Math.random()*this.sortedLevels.turbo.length)]}else{var e=this.poolLevels[this.index++%this.poolLevels.length];this.index%12===0&&this.randomiseLevels()}if(!this.isResetingManually){if(window.levelId)for(var e=this.levelData[0],i=0;i<this.levelData.length;i++){var n=this.levelData[i];if(n.id===window.levelId){var e=this.levelData[i];break}}this.addChunk(e)}}},module.exports=WorldSpawner}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=i(9);Sky=function(){var t=new r.Container;t.layer="back",s.call(this,0,0,t),this.frontView=new r.Container,this.frontView.pivot.set(568,320),this.frontView.position.set(568,320),this.elements=[],this.speed=1,window.WEBGL||(this.frontView.visible=!1),this.currentX=0},Sky.prototype=Object.create(s.prototype),Sky.prototype.addTilingElement=function(t,e,i,n,r){var s=new a(t,e,i,n,r);return this.add(s),s},Sky.prototype.add=function(t){this.elements.push(t)},Sky.prototype.update=function(t){this.position.x=this.world.view.camera.x,this.position.y=this.world.view.camera.y,this.currentX+=this.speed*o.game.deltaTime*this.world.game.player.slowMoSpeed;for(var e=0;e<this.elements.length;e++)this.elements[e].setPosition({x:this.currentX,y:0})},Sky.prototype.reset=function(){this.addTilingElement(new r.Texture.fromImage(ASSET_URL+"img/game/sky.png"),0,this.view,1.2,1)},Sky.prototype.resize=function(t,e){};var a=function(t,e,i,n,s){n=n||1,this.y=e,this.z=s,this.cap=!0,this.sprites=[],this.spriteWidth=t.width*n-1,this.fixY=!1,this.offsetX=500;var o=Math.ceil(1024/this.spriteWidth);if(o<3&&(o=3),window.WEBGL)this.tilingSprite=new r.extras.TilingSprite(t,1136/n,t.height),i.addChild(this.tilingSprite),this.tilingSprite.anchor.x=.5,this.tilingSprite.anchor.y=.5,this.tilingSprite.width=1400,this.tilingSprite.scale.set(n),this.tilingSprite.position.y=e,this.sprites=[this.tilingSprite];else for(var a=0;a<o;a++){var h=new r.Sprite(t);h.position.y=626+e,h.anchor.y=1,h.scale.set(n),i.addChild(h),this.sprites.push(h)}};a.prototype.setPosition=function(t){var e=t.x;e*=.8;var i=700,n=i/(i+this.z);e*=n,e+=1e4;var r=t.y;r*=.4,r*=n;var s=this.spriteWidth;if(window.WEBGL){if(this.tilingSprite.tilePosition.x=Math.floor(-e)-this.offsetX,!this.fixY&&(this.tilingSprite.pivot.y+=.3*(r-this.tilingSprite.pivot.y),this.cap)){var o=this.tilingSprite.height*this.tilingSprite.scale.x;this.tilingSprite.pivot.y<640-o+this.y&&(this.tilingSprite.pivot.y=640-o+this.y)}}else for(var a=0;a<this.sprites.length;a++){var h=-e;h+=a*s,h%=s*this.sprites.length,h+=2*s;var l=this.sprites[a];l.visible=!0,l.position.x=Math.floor(h)-this.offsetX,this.fixY&&(this.fixY||(l.pivot.y+=.3*(r-l.pivot.y),this.cap&&l.pivot.y<640-l.height+this.y&&(l.pivot.y=640-l.height+this.y)))}},n.exports=Sky}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=i(58),a=function(t,e){var i=new r.Container;i.layer="waterfalls",s.call(this,t,e,i),this.player=null,this.fakePlayer=new r.Rectangle(0,0,1.5*o.BLOCK_WIDTH,2*o.BLOCK_HEIGHT),this.groups=["cull"],this.tints=[60159,1224447],this.pieces=["waterfall_piece.png","waterfall_piece2.png","waterfall_piece3.png"],this.pool=[],this.activeItems=[]};a.prototype=Object.create(s.prototype),a.prototype.animateParticle=function(t){t.position.x+=t.speed.x,t.position.y+=t.speed.y,t.rotation+=t.speed.r,t.speed.r*=.99,t.speed.x*=.99,t.speed.y+=.15,t.life>0?t.life--:t.alpha*=.98},a.prototype.addParticles=function(){var t=this.pool.pop();t||(t=new r.Sprite.from(this.pieces[Math.floor(Math.random()*this.pieces.length)]),t.anchor.x=t.anchor.y=.5,t.speed=new r.Point),t.rotation=2*Math.random()*Math.PI,t.tint=this.tints[Math.floor(Math.random()*this.tints.length)],t.life=100+20*Math.random(),t.position.x=70*Math.random()-35,t.position.y=0,t.scale.x=t.scale.y=0;var e=.4+.4*Math.random();EasingsGame.to(t.scale,.1,{x:e,y:e,ease:EasingsGame.easeOutBack}),t.canCollide=!1,t.alpha=.49+.5*Math.random(),t.speed.r=.04*Math.random()-.02,t.speed.x=2*Math.random()-1,t.speed.y=3*Math.random()-1.5,this.activeItems.push(t),this.view.addChild(t)},a.prototype.update=function(){this.tick++;var t=3;Device.instance.desktop||(t=window.badDevice?30:15),this.tick%t===0&&this.addParticles();for(var e=0;e<this.activeItems.length;e++){var i=this.activeItems[e];this.animateParticle(i),i.alpha<.01&&(this.activeItems.splice(e,1),e--,this.pool.push(i))}},a.prototype.removedFromWorld=function(){this.player=null,this.view.removeChildren();for(var t=0;t<this.activeItems.length;t++)this.pool.push(this.activeItems[t]);this.activeItems=[]},a.prototype.addedToWorld=function(){this.player=this.world.game.player},a.prototype.reset=function(t){this.tick=0},n.exports=a}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=i(47),a=i(58),h=function(){this.metaData={width:a.BLOCK_WIDTH,height:a.BLOCK_HEIGHT,frame:"floor_tile.png"};var t=new o.CrashBody.fromRect(0,0,a.BLOCK_WIDTH,a.BLOCK_HEIGHT);t.type=o.CrashBody.STATIC,t.active=!1;var e=new r.Container;s.call(this,100,100,e,t),this.type=a.TYPES.NO_KILL_FLOOR,this.body.position=this.position,this.name="block",this.rockHard=!0,this.top=new r.Sprite,this.view.addChild(this.top),this.groups=["Block","cull"]};h.prototype=Object.create(s.prototype),h.prototype.reset=function(t){for(var e in t)this.metaData[e]&&(this.metaData[e]=t[e]);this.top.texture=r.Texture.fromImage(this.metaData.frame),this.body.shape.y=5,this.body.shape.width=this.metaData.width,this.body.shape.height=this.metaData.height},h.prototype.resize=function(t,e){this.body.shape.width=t,this.body.shape.height=e},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(41)),s=i(47),o=i(58),a=i(81),h=function(){this.metaData={width:o.BLOCK_WIDTH,height:o.BLOCK_HEIGHT};var t=new s.CrashBody.fromRect(0,0,o.BLOCK_WIDTH,o.BLOCK_HEIGHT);t.gravity=0,t.type=s.CrashBody.STATIC;var e=null;r.call(this,100,100,e,t),this.type=o.TYPES.GAP,this.body.position=this.position,this.body.solid=!1,this.player=null,this.groups=["Gap","cull"]};h.prototype=Object.create(r.prototype),h.prototype.reset=function(t){for(var e in t)this.metaData[e]&&(this.metaData[e]=t[e]);this.top=this.position.y,this.metaData.height=1e4,this.position.y=-5e3,this.body.shape.width=this.metaData.width,this.body.shape.height=this.metaData.height,this.player=null},h.prototype.update=function(){this.player&&this.player.position.y>this.top&&(this.player.die(),this.player=null)},h.prototype.onCollideBegin=function(t){var e=t.getOtherObject(this);t.ignore=!0,"player"===e.name&&(this.player=e)},h.prototype.onCollideEnd=function(t){var e=t.getOtherObject(this);"player"===e.name&&(this.player=null,e.isJumping?a.instance.increment("bounce_gap",1):a.instance.increment("bricks_gap",1))},h.prototype.resize=function(t,e){this.body.shape.width=t,this.body.shape.height=e},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=i(47),a=i(58),h=i(93),l=i(92),c=i(81),u=i(103),p=i(42),d=function(){var t=new o.CrashBody.fromRect((-0),(-0),4*a.BLOCK_WIDTH,1.5*a.BLOCK_HEIGHT),e=r.Sprite.from("kill_block.png");e.scale.x=e.scale.y=1,e.pivot.x=33,e.pivot.y=20,e.layer="block_enemies",t.gravity=0,s.call(this,100,100,e,t),t.setMaxSpeed(10),this.type=a.TYPES.ENEMY,this.body.position=this.position,this.id=100*Math.random(),this.player=null,this.name="enemy",this.groups=["Enemy","cull"],this.rockHard=!0,this.destroyable=!0,this.exploder=new h(this),this.grid=l.instance};d.prototype=Object.create(s.prototype),d.prototype.reset=function(t){this.id=100*Math.random(),this.body.gravity=0,this.body.active=!0,this.player=null,t.top?this.view._texture=r.Texture.from("destroy_wall_top.png"):this.view._texture=r.Texture.from("kill_block.png"),this.coords=this.grid.pixelsToGrid(this)},d.prototype.update=function(){},d.prototype.kill=function(){c.instance.increment("smash",1),this.grid.updateGrid(this.coords,null),this.coords=[];var t=p.getObject(u);t.position.x=this.position.x-this.view.pivot.x,t.position.y=this.position.y-this.view.pivot.y,this.world.add(t),t.explode(4,2),this.destroy()},d.prototype.onCollideEnd=function(t){},d.prototype.onCollideBegin=function(t){t.ignore=!0;var e=t.getOtherObject(this);e.type!==a.TYPES.PLAYER&&e.type!==a.TYPES.BRIDGE&&e.type!==a.TYPES.SPRING||(e.crash(),e.type===a.TYPES.PLAYER&&this.kill())},n.exports=d}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=(i(42),i(51)),a=i(61),h=[{id:"kill_debris_10.png",x:142,y:32,rot:0},{id:"kill_debris_10.png",x:95,y:10,rot:90},{id:"kill_debris_10.png",x:45,y:10,rot:90},{id:"kill_debris_04.png",x:23,y:32,rot:0},{id:"kill_debris_04.png",x:70,y:10,rot:90},{id:"kill_debris_04.png",x:120,y:10,rot:90},{id:"kill_debris_06.png",x:57,y:62,rot:0},{id:"kill_debris_06.png",x:107,y:62,rot:0},{id:"kill_debris_01.png",x:57,y:91,rot:0},{id:"kill_debris_01.png",x:107,y:91,rot:0},{id:"kill_debris_09.png",x:16,y:89,rot:0},{id:"kill_debris_09.png",x:149,y:89,rot:180},{id:"kill_debris_08.png",x:45,y:32,rot:0},{id:"kill_debris_08.png",x:70,y:32,rot:0},{id:"kill_debris_08.png",x:95,y:32,rot:0},{id:"kill_debris_08.png",x:120,y:32,rot:0}],l=function(t){s.call(this,0,0,new r.Container,null),this.view.layer="block_enemies";for(var e=0;e<h.length;e++){var i=h[e],n=new r.Sprite.from(i.id);n.anchor.set(.5),n.position.x=i.x,n.position.y=i.y,n.rotation=i.rot*(Math.PI/180),this.view.addChild(n)}this.groups=["cull"],this.delayedCalls=new a};l.prototype=Object.create(s.prototype),l.prototype.reset=function(){},l.prototype.update=function(){for(var t=0;t<this.view.children.length;t++){var e=this.view.children[t];e.position.x+=e.speed.x,e.position.y+=e.speed.y,e.speed.x*=.98,e.speed.y+=.4,e.rotation+=e.speed.r}},l.prototype.explode=function(t,e){for(var i=0;i<this.view.children.length;i++){var n=this.view.children[i],s=h[i];n.position.x=s.x,n.position.y=s.y;var a=n.position.x<50?-1:1,l=o.random(1,4)*a,c=o.random(-0,-6);n.speed=new r.Point,n.speed.r=Math.random()*a*.06,n.speed.x=l,n.speed.y=c,n.rotation=0}this.delayedCalls.add(function(){this.destroy()}.bind(this),2)},n.exports=l}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=i(47),a=i(58),h=i(93),l=function(){var t=new o.CrashBody.fromRect((-0),(-0),2*a.BLOCK_WIDTH,1*a.BLOCK_HEIGHT),e=r.Sprite.from("breaking_floor1.png");t.gravity=0,t.type=o.CrashBody.STATIC,s.call(this,100,100,e,t),t.setMaxSpeed(10),this.type=a.TYPES.FLOOR,this.body.position=this.position,this.player=null,this.name="enemy",this.groups=["Enemy","cull"],this.rockHard=!0,this.destroyable=!0,this.exploder=new h(this)};l.prototype=Object.create(s.prototype),l.prototype.reset=function(){this.body.gravity=0,this.body.active=!0,this.player=null},l.prototype.update=function(){},l.prototype.kill=function(){this.exploder.explode(4,3),this.destroy()},l.prototype.onCollideEnd=function(t){},l.prototype.onCollideBegin=function(t){return},n.exports=l}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=i(47),a=i(58),h=i(34),l=function(){var t=new o.CrashBody.fromRect(2.5*-a.BLOCK_WIDTH*.5*.6,.6*-a.BLOCK_HEIGHT,2.5*a.BLOCK_WIDTH*.6,2*a.BLOCK_HEIGHT*.6),e=new r.Container;e.pivot.x=37,e.pivot.y=37,t.gravity=0,e.layer="front",s.call(this,100,100,e,t),this.front=new r.Sprite.from("speed_gate1.png"),this.front.anchor.set(.5,.5),this.back=new r.Sprite.from("speed_gate2.png"),this.back.anchor.set(.5,.5),this.back.position.x=31,this.back.position.y=-2,this.spinned=new r.Sprite.from("speed_gate_rolls.png"),this.spinned.anchor.set(.5),this.spinned.position.x=this.front.position.x,this.spinned.position.y=this.front.position.y-this.front.height/2,e.addChild(this.back),e.addChild(this.spinned),e.addChild(this.front),t.setMaxSpeed(10),this.type=a.TYPES.SPEED_DOOR,this.body.position=this.position,this.groups=["SpeedDoor","cull"]};l.prototype=Object.create(s.prototype),l.prototype.reset=function(){this.body.gravity=0,this.body.active=!0},l.prototype.update=function(){this.spinned.rotation+=.1},l.prototype.onCollideEnd=function(t){},l.prototype.onCollideBegin=function(t){t.ignore=!0;var e=t.getOtherObject(this);"player"===e.name&&h.sfx.play("turbo_gate")},n.exports=l}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(41)),s=i(47),o=i(58),a=function(){var t=new s.CrashBody.fromRect(2.5*-o.BLOCK_WIDTH*.5*.6,1e3*-o.BLOCK_HEIGHT/2,2.5*o.BLOCK_WIDTH*.6,1e3*o.BLOCK_HEIGHT);r.call(this,100,100,null,t),t.setMaxSpeed(10),this.type=o.TYPES.SPEED_DOOR_END,this.body.position=this.position,this.groups=["SpeedDoorEnd","cull"]};a.prototype=Object.create(r.prototype),a.prototype.reset=function(){this.body.gravity=0,this.body.active=!0},a.prototype.onCollideEnd=function(t){},a.prototype.onCollideBegin=function(t){t.ignore=!0;var e=t.getOtherObject(this);"player"===e.name},n.exports=a}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(33),o=i(9),a=i(41),h=i(47),l=i(58),c=i(93),u=i(92),p=i(37),d=i(87),f=i(81),m={LEFT:1,RIGHT:2},g=function(){this.metaData={radiusX:100,radiusY:100,frame:"bat.png",speed:.8};var t=new h.CrashBody.fromRect((-l.BLOCK_WIDTH),-l.BLOCK_HEIGHT/2,2*l.BLOCK_WIDTH,2*l.BLOCK_HEIGHT),e=p.getTexturesFromFramesWithPrefix("bat_frames%%.png",12,1),i=e.slice();i.reverse();var n=e.concat(i),s=new r.Sprite(n[0]);s.anchor.x=.5,s.anchor.y=.5,s.textures=n,s.counter=0,s.speed=.6,t.gravity=0,this.tick=0,a.call(this,100,100,s,t),this.id=100*Math.random(),t.setMaxSpeed(10),this.type=l.TYPES.ENEMY,this.body.position=this.position,this.player=null,this.name="bat",this.groups=["Enemy","BrickBat","cull"],this.rockHard=!0,this.destroyable=!0,this.home=new r.Point,this.defaultHome=new r.Point,this.exploder=new c(this),this.grid=u.instance,this.delayedCalls=new d};g.prototype=Object.create(a.prototype),g.prototype.reset=function(t){for(var e in t)this.metaData[e]&&(this.metaData[e]=t[e]);this.tick=Math.random()*(2*Math.PI),this.decelerating=!1,this.readyToThrow=null,this.mainSpeedTick=1,this.direction=1,this.home.x=this.position.x,this.home.y=this.position.y,this.defaultHome.x=this.home.x,this.defaultHome.y=this.home.y,this.body.gravity=0,this.body.active=!0,this.player=null,this.coords=this.grid.pixelsToGrid(this)},g.prototype.throwPlayer=function(){f.instance.increment("snatch_bat",1),this.readyToThrow=Math.floor(2*Math.random())+1},g.prototype.decelerate=function(){this.decelerating=!0,this.readyToThrow=null,this.world.game.worldSpawner.destroyLevel(),this.world.game.worldSpawner.addBatSafeArea(),EasingsGame.killTweensOf(this.home),EasingsGame.killTweensOf(this),EasingsGame.to(this.home,.5,{x:this.defaultHome.x+(m.RIGHT?-1e3:1e3),y:this.defaultHome.y+1e3,onComplete:function(){}.bind(this)}),EasingsGame.to(this,4,{mainSpeedTick:1})},g.prototype.accelerate=function(){this.decelerating=!1,EasingsGame.to(this.home,2,{y:this.defaultHome.y-1e3,onComplete:this.throwPlayer.bind(this)}),EasingsGame.to(this,2,{mainSpeedTick:3})},g.prototype.update=function(){if(this.tick+=.05*this.mainSpeedTick,this.position.x=this.home.x+Math.sin(this.tick*this.metaData.speed)*this.metaData.radiusX,this.position.y=this.home.y+Math.cos(this.tick*this.metaData.speed)*this.metaData.radiusY,this.view.rotation=5*Math.sin(this.tick)*Math.PI/180,this.view.counter+=this.view.speed*o.game.deltaTime,this.view.texture=this.view.textures[Math.floor(this.view.counter%this.view.textures.length)],this.readyToThrow!==m.LEFT||this.decelerating){if(this.readyToThrow===m.RIGHT&&!this.decelerating){var t=(this.getAngle(),!0);t&&(this.world.game.app.background.forceForwards(this.world.view.camera,2),this.player.fly(m.RIGHT,1),this.decelerate(m.RIGHT),this.world.game.hud.forceChangeDistance(m.RIGHT,1))}}else{var t=(this.getAngle(),!0);t&&(this.world.game.app.background.forceBackwards(this.world.view.camera,2),this.world.game.hud.forceChangeDistance(m.LEFT,1),this.player.fly(m.LEFT,1),this.decelerate(m.LEFT))}},g.prototype.getAngle=function(){var t=this.position.y-this.home.y,e=this.position.x-this.home.x;return 180*Math.atan2(t,e)/Math.PI},g.prototype.kill=function(){f.instance.increment("destroy_bat",1),s.sfx.playGroup("bat_kill"),this.exploder.explode(4,3),this.destroy()},g.prototype.onCollideEnd=function(t){},g.prototype.onCollideBegin=function(t){t.ignore=!0;var e=t.getOtherObject(this);e.type===l.TYPES.PLAYER&&e.state!==l.PLAYER_STATE.BAT_ATTACKED?(this.player=e,e.crash(),this.kill()):e.type!==l.TYPES.BOMB&&(t.ignore=!0)},n.exports=g}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(41)),s=i(47),o=i(58),a=(i(93),i(10)),h=function(){var t=new s.CrashBody.fromRect(0,(-2e3),2*o.BLOCK_WIDTH,4e3);r.call(this,100,100,null,t),this.onTouched=new a,this.touched=!1,this.body.solid=!1,this.body.position=this.position,this.type=o.TUTORIAL.POINT_A,this.name="tutorialPoint",this.groups=["cull","tutorialPoints"]};h.prototype=Object.create(r.prototype),h.prototype.reset=function(t){this.touched=!1},h.prototype.update=function(){},h.prototype.onCollideEnd=function(t){},h.prototype.onCollideBegin=function(t){var e=t.getOtherObject(this);"player"!==e.name||this.touched||(this.touched=!0,this.onTouched.dispatch("A"))},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(41)),s=i(47),o=i(58),a=(i(93),i(10)),h=function(){var t=new s.CrashBody.fromRect(0,(-2e3),2*o.BLOCK_WIDTH,4e3);r.call(this,100,100,null,t),this.body.gravity=0,this.body.solid=!1,this.body.position=this.position,this.type=o.TUTORIAL.POINT_A,this.onTouched=new a,this.type=o.TUTORIAL.POINT_B,this.name="tutorialPoint",this.groups=["cull","tutorialPoints"]};h.prototype=Object.create(r.prototype),h.prototype.reset=function(t){},h.prototype.update=function(){},h.prototype.onCollideEnd=function(t){},h.prototype.onCollideBegin=function(t){var e=t.getOtherObject(this);"player"===e.name&&this.onTouched.dispatch("B")},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=function(t,e){var i=new r.Sprite;i.layer="tuto",s.call(this,t,e,i),this.groups=["cull"]};o.prototype=Object.create(s.prototype),o.prototype.reset=function(t){var e=t;this.view.texture=r.Texture.from(ASSET_URL+"img/game/"+e.frame),this.view.scale.x=this.view.scale.y=.5},n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=i(47),a=i(58),h=i(33),l=i(37),c=i(81),u=1,p=null,d=function(){var t=new o.CrashBody.fromRect(2.5*-a.BLOCK_WIDTH*.5*.6,.6*-a.BLOCK_HEIGHT,2.5*a.BLOCK_WIDTH*.6,2*a.BLOCK_HEIGHT*.6),e=new r.Sprite;t.gravity=0,e.anchor.set(.5,.5),e.layer="pickups",s.call(this,100,100,e,t),
this.name="pickup",t.setMaxSpeed(10),this.type=a.TYPES.PICKUP,this.body.position=this.position,this.player=null,this.isPickedUp=!1,this.groups=["Pickup","cull"],this.count=1e4*Math.random(),p||(p=l.getTexturesFromFramesWithPrefix("pickup/coin_pickup_000%%.png",30,0,!1)),this.view._texture=p[0]};d.prototype=Object.create(s.prototype),d.prototype.reset=function(){this.body.gravity=0,this.body.active=!0,this.player=null,this.view.scale.set(.5),this.isPickedUp=!1,this.view.tint=16776960},d.prototype.update=function(){window.badDevice||(this.count+=.4,this.view._texture=p[(0|this.count)%p.length],this.isPickedUp&&(this.view.rotation+=.2))},d.prototype.onCollideEnd=function(t){var e=t.getOtherObject(this);"player"===e.name&&(this.player=null)},d.prototype.onCollideBegin=function(t){t.ignore=!0;var e=t.getOtherObject(this);"player"===e.name&&(this.world.game.hud.updatePickups(u),h.sfx.play("stud_collect"),c.instance.increment("collect",1),this.isPickedUp=!0,TweenLite.to(this.view.position,.4,{ease:Sine.easeIn,y:"-=1000",onComplete:function(){this.destroy()}.bind(this)}))},n.exports=d}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=function(t,e){var i=new r.Sprite.from("flowe_base.png");i.anchor.set(.5),s.call(this,t,e,i),this.tube=new r.Sprite.from("flower_middle.png"),this.tube.anchor.x=.5,this.tube.anchor.y=1,this.view.addChild(this.tube),this.hat=new r.Sprite.from("flower1_top.png"),this.hat.anchor.x=.5,this.hat.anchor.y=.5,this.hat.position.y=-this.tube.height,this.view.addChild(this.hat),this.groups=["cull"]};o.prototype=Object.create(s.prototype),o.prototype.update=function(){this.tick++,this.tube.scale.y=.1*Math.cos(this.tick/this.speed)+.9,this.tube.rotation=10*Math.cos((this.tick+this.speed/2)/(2*this.speed))*Math.PI/180,this.hat.rotation=10*Math.cos((this.tick+this.speed/2)/(2*this.speed))*Math.PI/180,this.hat.position.x=this.tube.position.x+this.tube.height*Math.sin(this.tube.rotation)+this.tube.width*Math.cos(this.tube.rotation),this.hat.position.y=-this.tube.height*this.tube.scale.y-10},o.prototype.reset=function(t){this.tick=200*Math.random(),this.speed=20*Math.random()+5;this.view.position.y+=80,this.hat.texture=r.Texture.from("flower"+Math.ceil(3*Math.random())+"_top.png")},n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){var n={};n.shuffle=function(t){for(var e,i,n=t.length;0!==n;)i=Math.floor(Math.random()*n),n-=1,e=t[n],t[n]=t[i],t[i]=e;return t},i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(41)),s=i(115),o=i(116),a=i(117),h=i(42),l=(i(51),i(58)),c=i(9),u=i(10),p=[16766217,14430513,3047157,3778089,7820971,15228672],d=0,f=function(){r.call(this,0,0,null,null),this.signals={onBridgeDrop:new u,onSpringBoardDrop:new u,onBombDrop:new u},this.groups=["ItemSpawner"],this.spawnDistance=300,this.bridgeBurn=new m(this.dropBridge,this),this.springBurn=new m(this.dropSpring,this),this.bombBurn=new m(this.dropBomb,this),this.bombBurn.burnMax=0,this.delayCount=0,this.delay=l.BLOCK_WIDTH,this.que=[],this.numberBricks=4,this.numberBricksDropped=0,this.indexBrick=this.numberBricksDropped%this.numberBricks};f.prototype=Object.create(r.prototype),f.prototype.reset=function(){this.nextColor=p[d++%p.length],this.numberBricksDropped=0,this.indexBrick=this.numberBricksDropped%this.numberBricks+1},f.prototype.dropBridge=function(t){var e=h.get(s);e.reset(this.indexBrick,this.nextColor),this.que.push({item:e,x:t.x,y:t.y-200}),this.drop(),this.signals.onBridgeDrop.dispatch(e),this.numberBricksDropped++,this.indexBrick=this.numberBricksDropped%this.numberBricks+1,this.nextColor=p[d++%p.length]},f.prototype.dropSpring=function(t){var e=h.get(o);e.reset(),this.que.push({item:e,x:t.x,y:t.y-200}),this.drop(),this.signals.onSpringBoardDrop.dispatch(e)},f.prototype.dropBomb=function(t){var e=h.get(a);e.reset(),this.que.push({item:e,x:t.x,y:t.y-200}),this.signals.onBombDrop.dispatch(e),this.drop()},f.prototype.update=function(){this.bridgeBurn.update(),this.springBurn.update(),this.bombBurn.update(),this.delayCount+=3*c.game.deltaTime,this.que.length>0&&this.delayCount>this.delay&&(this.delayCount=0,this.drop())},f.prototype.drop=function(){var t=this.que.shift(),e=t.item,i=t.x;e.position.x=i,e.position.y=this.world.game.player.position.y-350,this.world.add(e)},n.exports=f;var m=function(t,e){this.cb=t,this.scope=e,this.max=5e4,this.count=this.max-1,this.burnMax=60,this.burnCount=this.burnMax};Object.defineProperties(m.prototype,{ratio:{get:function(){return this.burnCount/this.burnMax}}}),m.prototype.use=function(t){this.count>0&&(this.count-=1,this.cb.call(this.scope,t))},m.prototype.update=function(){this.count<this.max&&(this.burnCount+=c.game.deltaTime,this.burnCount>this.burnMax&&(this.burnCount=0,this.count+=c.game.deltaTime))}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=i(47),a=(i(51),i(58)),h=i(93),l=i(10),c=i(92),u=i(33),p=i(81),d=[1666499,13643552,2599219,16502035,16740865,5850539],f=function(){var t=new o.CrashBody.fromRect(0,a.PEG_HEIGHT/2,6*a.BLOCK_WIDTH/2,a.BLOCK_HEIGHT/2),e=new r.Sprite;s.call(this,100,100,e,t),e.tint=d[0],t.gravity=4,this.body.setMaxSpeed(50),this.type=a.TYPES.BRIDGE,this.onLanded=new l,this.body.position=this.position,this.player=null,this.rockHard=!0,this.destroyable=!0,this.groups=["Bridge","cull"],this.exploder=new h(this),this.grid=c.instance,this.queue=[]};f.prototype=Object.create(s.prototype),f.prototype.kill=function(){if(!this.isDestroyed){this.exploder.explodeSingle(this.view.texture,this.view.tint),this.destroy();var t=this.grid.pixelsToGrid(this);this.grid.updateGrid(t,null)}},f.prototype.reset=function(t,e){this.nbFrames=0,this.nbBrickInRow=0,this.queue=[],this.isDestroyed=!1,this.body.gravity=4,this.body.active=!0,this.body.solid=!1,this.body.reset(),this.player=null,this.view.tint=e,this.view.texture=r.Texture.from("brick_drop.png")},f.prototype.update=function(){if(this.nbFrames++,this.queue.length>1){for(var t=this.queue[0][1].body.position.y,e=this.queue[0],i=0;i<this.queue.length;i++)this.queue[i][1].body.position.y<t&&(e=this.queue[i]);this.doCollision(e[0])}else 1===this.queue.length&&this.doCollision(this.queue[0][0]);if(this.queue=[],this.body.solid){if(this.player)if(this.player.body.solid){if(this.player.body.velocity.y>=0&&(this.player.body.velocity.y=0,!this.player.stopBrickCollisionCheck)){var n=this.body.shape.y+this.body.shape.height+this.body.position.y-(this.player.body.shape.y+this.player.body.position.y);n<130?(this.player.jump({x:0,y:.25}),this.player.stopBrickCollisionCheck=!0):this.player.body.position.y=this.body.position.y+this.body.shape.y-(this.player.body.shape.height+this.player.body.shape.y)}this.player.onGround=!0}else this.player=null;else this.droppedOnPlayer,this.droppedOnPlayer&&this.position.y>this.droppedOnPlayer.body.position.y&&(this.player=this.droppedOnPlayer,this.droppedOnPlayer=null);this.player&&this.player.stopBrickCollisionCheck&&(this.player.stopBrickCollisionCheck=!1)}},f.prototype.pixelsToGrid=function(t){for(var e=t.position.x+t.body.shape.x,i=t.position.x+t.body.shape.x+t.body.shape.width,n=t.position.y+t.body.shape.height/2-1.5*a.BLOCK_HEIGHT,r=t.position.y+t.body.shape.height/2-t.body.shape.height-1.5*a.BLOCK_HEIGHT,s=Math.floor(e/(a.BLOCK_WIDTH/2)),o=Math.floor(i/(a.BLOCK_WIDTH/2)),h=Math.floor(n/(a.BLOCK_HEIGHT/2)),l=Math.floor(r/(a.BLOCK_HEIGHT/2)),c=[],u=l;u<h;u++)for(var p=s;p<o;p++)c.push({x:p,y:u});return c},f.prototype.onCollideEnd=function(t){var e=t.getOtherObject(this);if("player"===e.name)this.player=null,this.droppedOnPlayer=null;else{var i=this.grid.pixelsToGrid(this);u.sfx.playGroup("brick_land"),this.grid.updateGrid(i,this),this.onLanded.dispatch(this)}},f.prototype.crash=function(){this.kill()},f.prototype.destroy=function(){this.isDestroyed||(this.isDestroyed=!0,s.prototype.destroy.call(this))},f.prototype.doCollision=function(t){t.ignore=!0;var e=t.getOtherObject(this);if(e.type===a.TYPES.DROP)return void this.destroy();if("player"===e.name)this.position.y>e.body.position.y+e.body.shape.height/4?this.player=e:(this.player=null,this.droppedOnPlayer=e);else if(e.type!==a.TYPES.ENEMY&&e.type!==a.TYPES.SPRING){if(this.position.y<this.world.game.player.position.y-300)return;if(!this.body.active)return;0===t.projection.y,this.body.gravity=0,this.body.active=!1,this.body.solid=!0,this.body.position.y=e.body.position.y+e.body.shape.y-(this.body.shape.height+this.body.shape.y),this.world.view.camera.shake(-Math.PI,5)}},f.prototype.onCollideBegin=function(t){var e=t.getOtherObject(this);if(t.ignore=!0,e.type!==a.TYPES.GAP){if(e.type===a.TYPES.DROP)return void this.destroy();if("player"===e.name)this.position.y>e.body.position.y+e.body.shape.height/4?this.player=e:(this.player=null,this.droppedOnPlayer=e),this.queue.push([t,e]);else if(e.type!==a.TYPES.ENEMY&&e.type!==a.TYPES.SPRING){if(this.position.y<this.world.game.player.position.y-300)return;if(this.queue.push([t,e]),!this.body.active)return;0===t.projection.y,this.body.gravity=0,this.body.active=!1,this.body.solid=!0,this.body.position.y=e.body.position.y+e.body.shape.y-(this.body.shape.height+this.body.shape.y),this.world.view.camera.shake(-Math.PI,5)}e.type===a.TYPES.BRIDGE&&(this.nbBrickInRow=e.nbBrickInRow+1,p.instance.update("build",this.nbBrickInRow,!1))}},n.exports=f}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=i(47),a=i(58),h=i(51),l=i(93),c=i(10),u=i(92),p=i(33),d=function(){var t=new o.CrashBody.fromRect(0,10,2*a.BLOCK_WIDTH/2-0,a.BLOCK_HEIGHT/3*2/2);view=new r.Container,view.base=new r.Sprite.from("spring_base.png"),view.pump=new r.Sprite.from("spring_ram.png"),view.top=new r.Sprite.from("spring_plate.png"),view.addChild(view.pump),view.addChild(view.base),view.addChild(view.top),view.base.anchor.set(0,1),view.base.position.y=a.BLOCK_HEIGHT/2,view.top.anchor.set(0,1),view.top.position.y=-a.BLOCK_HEIGHT/2,view.pump.anchor.set(.5,1),view.pump.position.y=a.BLOCK_HEIGHT/2-a.BLOCK_HEIGHT/3/2,view.pump.position.x=a.BLOCK_WIDTH/2,s.call(this,100,100,view,t),this.onLanded=new c,t.gravity=.5,t.setMaxSpeed(2e4),this.type=a.TYPES.SPRING,this.body.position=this.position,this.player=null,this.groups=["SpringBoard","cull"],this.count=0,this._boing=0,this.springing=!1,this.destroyable=!0,this.exploder=new l(this),this.grid=u.instance};d.prototype=Object.create(s.prototype),Object.defineProperties(d.prototype,{boing:{get:function(){return this._boing},set:function(t){this._boing=t,this.view.top.position.y=h.map(t,0,1,a.BLOCK_HEIGHT/2-a.BLOCK_HEIGHT/3/2,-a.BLOCK_HEIGHT/2),this.view.pump.scale.y=h.map(t,0,1,0,1)}}}),d.prototype.kill=function(){this.exploder.explode(4,3),this.destroy()},d.prototype.crash=function(){this.destroy()},d.prototype.reset=function(){TweenLite.killTweensOf(this),TweenLite.killTweensOf(this.view),this.landed=!1,this.isDestroyed=!1,this.view.alpha=1,this.body.gravity=4,this.body.active=!0,this.falling=!0,this.springing=!1},d.prototype.pop=function(t){this.springing=!0,TweenLite.to(this,1,{boing:.8,ease:Elastic.easeOut,onComplete:this.hide,onCompleteScope:this})},d.prototype.hide=function(){TweenLite.to(this.view,.2,{alpha:0,ease:Sine.easeOut,onComplete:this.destroy,onCompleteScope:this})},d.prototype.update=function(){this.springing||(this.count+=.1,this.falling?this.boing=Math.min(.1*this.body.velocity.y,1):this.boing*=.8)},d.prototype.onCollideEnd=function(t){var e=t.getOtherObject(this);if("player"!==e.name){var i=this.grid.pixelsToGrid(this);this.grid.updateGrid(i,this),this.landed=!0,this.onLanded.dispatch(this),this.player&&(this.player.jump(),this.player=null)}else this.player=null},d.prototype.destroy=function(){this.isDestroyed||(this.isDestroyed=!0,s.prototype.destroy.call(this))},d.prototype.onCollideBegin=function(t){var e=t.getOtherObject(this);if(e.type!==a.TYPES.GAP&&e.type!==a.TYPES.ENEMY){if(e.type===a.TYPES.DROP)return void this.destroy();if(t.ignore=!0,"player"!==e.name&&"bomb"!==e.name||!this.landed)if("player"!==e.name&&"bomb"!==e.name||this.landed){if(this.position.y<this.world.game.player.position.y-300)return;if(!this.body.active)return;if(0===t.projection.y)return void(t.ignore=!1);this.falling=!1,this.body.gravity=0,this.body.active=!1,this.body.position.x-=t.projection.x*t.penetration,this.body.position.y=e.body.position.y+e.body.shape.y-(this.body.shape.height+this.body.shape.y),p.sfx.playGroup("brick_land"),this.world.view.camera.shake(-Math.PI,2)}else t.ignore=!0,"player"===e.name&&(this.player=e);else{if(this.springing)return;this.pop(),e.jump()}}},n.exports=d}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(33),o=i(41),a=i(47),h=i(58),l=(i(93),i(118)),c=i(92),u=i(10),p=i(81),d=i(42),f=function(){var t=new a.CrashBody.fromRect(0,0,4*h.BLOCK_WIDTH/2,3*h.BLOCK_HEIGHT/2),e=new r.Container;o.call(this,100,100,e,t),t.gravity=1,t.setMaxSpeed(2e4),this.block=r.Sprite.from("block_drop.png"),this.block.anchor.set(.5),this.view.addChild(this.block),this.block.x=this.block.width/2,this.block.y=this.block.height/2,this.type=h.TYPES.BOMB,this.name="bomb",this.onDestroyedEnemy=new u,this.body.position=this.position,this.player=null,this.isDead=!1,this.groups=["Bomb","cull"],this.grid=c.instance};f.prototype=Object.create(o.prototype),f.prototype.reset=function(){this.isDestroyed=!1,this.body.gravity=4,this.body.active=!0,this.body.reset(),this.player=null,this.isDead=!1,this.canCollide=!0},f.prototype.update=function(){this.body.active&&this.player&&(this.player.body.velocity.y=0,this.player.body.position.y=this.body.position.y+this.body.shape.y-(this.player.body.shape.height+this.player.body.shape.y))},f.prototype.explode=function(){if(!this.isDead){this.canCollide=!1,this.isDead=!0;var t=d.getObject(l);t.position.x=this.position.x+this.block._texture.frame.width/2-20,t.position.y=this.position.y+this.block._texture.frame.height/2+20,this.world.add(t),window.badDevice||this.world.game.displacmentEffect.pop(t.position.x,t.position.y),t.explode(4,2),this.destroy()}},f.prototype.jump=function(){this.body.velocity.y=-87.5},f.prototype.destroy=function(){this.isDestroyed||(this.isDestroyed=!0,o.prototype.destroy.call(this))},f.prototype.onCollideBegin=function(t){var e=t.getOtherObject(this);if(e.type!==h.TYPES.GAP){if(this.world.view.camera.shake(-Math.PI),this.position.y-=t.penetration*t.projection.y,e.destroyable&&(e.kill(),e.type===h.TYPES.ENEMY&&(this.onDestroyedEnemy.dispatch(this),p.instance.increment("smash",1))),e.rockHard){if(this.position.y<this.world.game.player.position.y-300)return;this.explode(),s.sfx.playGroup("block_smash")}return e.type===h.TYPES.DROP?void this.destroy():void 0}},n.exports=f}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=(i(42),i(51)),a=i(61),h=function(t){s.call(this,0,0,new r.Container,null);var e=new r.Sprite.from("weight_debris_02.png");e.defaultPos=new r.Point,e.anchor.set(.5),this.view.addChild(e);var i=new r.Sprite.from("weight_debris_01.png");i.anchor.set(.5),i.defaultPos=new r.Point,i.position.x=e.position.x+e.width/2+i.width/2,i.position.y=e.position.y,i.defaultPos.x=i.position.x,i.defaultPos.y=i.position.y,this.view.addChild(i);var n=new r.Sprite.from("weight_debris_03.png");n.anchor.set(.5),n.defaultPos=new r.Point,n.position.x=e.position.x+e.width/2,n.position.y=e.position.y-e.height+5,n.defaultPos.x=n.position.x,n.defaultPos.y=n.position.y,this.view.addChild(n);var o=new r.Sprite.from("weight_debris_06.png");o.anchor.set(.5),o.defaultPos=new r.Point,o.position.x=n.position.x-n.width/2-o.width/2,o.position.y=n.position.y,o.defaultPos.x=o.position.x,o.defaultPos.y=o.position.y,this.view.addChild(o);var h=new r.Sprite.from("weight_debris_07.png");h.anchor.set(.5),h.defaultPos=new r.Point,h.position.x=n.position.x+n.width/2+h.width/2,h.position.y=n.position.y,h.defaultPos.x=h.position.x,h.defaultPos.y=h.position.y,this.view.addChild(h);var l=new r.Sprite.from("weight_debris_05.png");l.anchor.set(.5),l.defaultPos=new r.Point,l.position.x=e.position.x,l.position.y=n.position.y-n.height+5,l.defaultPos.x=l.position.x,l.defaultPos.y=l.position.y,this.view.addChild(l);var c=new r.Sprite.from("weight_debris_04.png");c.anchor.set(.5),c.defaultPos=new r.Point,c.position.x=i.position.x,c.position.y=l.position.y,c.defaultPos.x=c.position.x,c.defaultPos.y=c.position.y,this.view.addChild(c),this.groups=["cull"],this.delayedCalls=new a};h.prototype=Object.create(s.prototype),h.prototype.reset=function(){},h.prototype.update=function(){for(var t=0;t<this.view.children.length;t++){var e=this.view.children[t];e.position.x+=e.speed.x,e.position.y+=e.speed.y,e.speed.x*=.98,e.speed.y+=.4,e.rotation+=e.speed.r}},h.prototype.explode=function(t,e){for(var i=0;i<this.view.children.length;i++){var n=this.view.children[i];n.position.x=n.defaultPos.x,n.position.y=n.defaultPos.y;var s=n.position.x<50?-1:1,a=o.random(1,4)*s,h=o.random(-0,-6);n.speed=new r.Point,n.speed.r=Math.random()*s*.06,n.speed.x=a,n.speed.y=h,n.rotation=0}this.delayedCalls.add(function(){this.view.removeChildren(),this.destroy()}.bind(this),2)},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=(i(33),i(41)),o=i(43),a=i(10),h=function(){var t=new r.Container;s.call(this,100,100,t,null),this.onPlayPressed=new a,this.playButton=o.big("icon_play.png"),this.playButton.onPress.add(this.onPress,this),this.view.addChild(this.playButton.view)};h.prototype=Object.create(s.prototype),h.prototype.onPress=function(){},h.prototype.reset=function(){},h.prototype.update=function(){},h.prototype.resize=function(t,e){this.playButton.view.x=t/2,this.playButton.view.y=e/2},h.prototype.destroy=function(){},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(121);DefaultBackground=function(){s.call(this),this.addTilingElement(r.Texture.fromImage(ASSET_URL+"img/far_bg.jpg"),-220,this.backView,1.3,200)},DefaultBackground.prototype=Object.create(s.prototype),n.exports=DefaultBackground}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41);ScrollingBackground=function(){s.call(this),this.backView=new r.Container,this.backView.pivot.set(568,320),this.backView.position.set(568,320),this.frontView=new r.Container,this.frontView.pivot.set(568,320),this.frontView.position.set(568,320),this.elements=[],window.WEBGL||(this.frontView.visible=!1)},ScrollingBackground.prototype=Object.create(s.prototype),ScrollingBackground.prototype.addedToWorld=function(t){this.world.view.addChildAt(this.backView,0),this.world.view.addChild(this.frontView)},ScrollingBackground.prototype.removedFromWorld=function(t){this.world.view.removeChild(this.backView),this.world.view.removeChild(this.frontView)},ScrollingBackground.prototype.addTilingElement=function(t,e,i,n,r){var s=new o(t,e,i,n,r);return this.add(s),s},ScrollingBackground.prototype.add=function(t){this.elements.push(t)},ScrollingBackground.prototype.update=function(){var t=this.world.view.camera;this.backView.rotation=t.rotation,this.frontView.rotation=t.rotation;for(var e=0;e<this.elements.length;e++)this.elements[e].setPosition(t)};var o=function(t,e,i,n,s){n=n||1,this.y=e,this.z=s,this.sprites=[],this.spriteWidth=t.width*n-1,this.offsetX=500;var o=Math.ceil(1024/this.spriteWidth);o<3&&(o=3);for(var a=0;a<o;a++){var h=new r.Sprite(t);h.position.y=e,h.scale.set(n),i.addChild(h),this.sprites.push(h)}};o.prototype.setPosition=function(t){var e=t.x;e*=.8;var i=700,n=i/(i+this.z);e*=n,e+=1e4;var r=t.y;r*=.4,r*=n;for(var s=this.spriteWidth,o=0;o<this.sprites.length;o++){var a=-e;a+=o*s,a%=s*this.sprites.length,a+=2*s;var h=this.sprites[o];h.visible=!0,h.position.x=Math.floor(a)-this.offsetX,h.pivot.y=0}},n.exports=ScrollingBackground}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function r(t,e){return 1e3*t.z-1e3*e.z}var s=(i(6),i(42)),o=i(123),a=i(124),h=function(t){this.game=t,this.tick=0};h.prototype.reset=function(t){this.tick=0},h.prototype.generateIslands=function(){for(var t=this.game.world.view.camera.x,e=0;e<3;e++){var i=s.getObject(o);i.position.x=t+100*Math.random()-50,i.position.y=-100+300*Math.random(),this.game.world.add(i),i.reset(),t+=300}},h.prototype.generateClouds=function(){for(var t=this.game.world.view.camera.x+400,e=0;e<2;e++){var i=s.getObject(a);i.position.x=t+100*Math.random()-50,i.position.y=-50+250*Math.random(),this.game.world.add(i),i.reset(),t+=300}},h.prototype.resize=function(t,e){},h.prototype.update=function(){return},h.prototype.depthSortLayer=function(t){t.children.sort(r)},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(51),o=i(41),a=(i(47),i(9)),h=function(){var t=new r.Sprite;t.layer="back_islands",o.call(this,100,100,t,null),this.z=1,this.groups=["sky_island","cull"]};h.prototype=Object.create(o.prototype),h.prototype.reset=function(t){this.view.texture=r.Texture.fromImage(ASSET_URL+"img/game/floating_island.png"),this.z=Math.floor(1e5*Math.random())/100,this.speed=this.getSpeed(this.z),this.view.scale.x=this.view.scale.y=this.getScale(this.z)},h.prototype.getSpeed=function(t){return s.map(t,0,1e3,.06,-2)},h.prototype.getScale=function(t){return s.map(t,0,1e3,1,.6)},h.prototype.resize=function(t,e){},h.prototype.update=function(){this.position.x-=this.speed*a.game.deltaTime*this.world.game.player.slowMoSpeed},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(51),o=i(41),a=(i(47),i(9)),h=function(){var t=new r.Sprite;t.layer="back_islands",o.call(this,100,100,t,null),this.z=1,this.groups=["cloud","cull"]};h.prototype=Object.create(o.prototype),h.prototype.reset=function(t){this.view.texture=r.Texture.fromImage(ASSET_URL+"img/game/cloud"+(Math.random()>.5?1:2)+".png"),this.z=Math.floor(1e5*Math.random())/100,this.speed=this.getSpeed(this.z),this.view.scale.x=this.view.scale.y=this.getScale(this.z)},h.prototype.getSpeed=function(t){return s.map(t,0,1e3,3,.4)},h.prototype.getScale=function(t){return s.map(t,0,1e3,1,.4)},h.prototype.resize=function(t,e){},h.prototype.update=function(){this.position.x-=this.speed*a.game.deltaTime*this.world.game.player.slowMoSpeed+.5},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(64)),s=(i(58),i(37),i(92)),o=i(81),a=i(61),h=(i(42),i(126),i(60)),l=function(t){this.game=t,this.grid=s.instance,this.delayedCalls=new a,this.desktop=Device.instance.desktop};l.prototype.reset=function(){this.numberItemsToDrop={bricks:{active:!0,number:3},springs:{active:!0,number:2},bombs:{active:!0,number:2}},this.droppedBricks=[],this.game.controller.disableButtons(),this.showBridgeButton(),this.currentStepTutorial=0,this.manageSignals()},l.prototype.showBridgeButton=function(){this.delayedCalls.add(function(){this.game.hud.hand.state1(),EasingsGame.to(this.game.hud.hand.position,.2,{x:this.desktop?420:800,y:this.desktop?360:150}),this.game.controller.enableBridgeButton()}.bind(this),4)},l.prototype.showSpringButton=function(){this.delayedCalls.add(function(){this.game.hud.hand.state1(),EasingsGame.to(this.game.hud.hand.position,.2,{x:this.desktop?650:800,y:this.desktop?360:300}),this.game.controller.enableSpringBoardButton()}.bind(this),6)},l.prototype.showBombButton=function(){this.delayedCalls.add(function(){this.game.hud.hand.state1(),EasingsGame.to(this.game.hud.hand.position,.2,{x:this.desktop?880:800,y:this.desktop?360:500}),this.game.controller.enableBombButton()}.bind(this),8)},l.prototype.removeSignals=function(){this.game.itemSpawner.signals.onBridgeDrop.remove(this.bridgeDropped,this),this.game.itemSpawner.signals.onSpringBoardDrop.remove(this.springBoardDrop,this),this.game.itemSpawner.signals.onBombDrop.remove(this.bombDropped,this),this.game.controller.bridgeIcon.onDown.remove(this.showHand,this),this.game.controller.bombIcon.onDown.remove(this.showHand,this),this.game.controller.springIcon.onDown.remove(this.showHand,this)},l.prototype.manageSignals=function(){this.removeSignals(),this.game.itemSpawner.signals.onBridgeDrop.add(this.bridgeDropped,this),this.game.itemSpawner.signals.onSpringBoardDrop.add(this.springBoardDrop,this),this.game.itemSpawner.signals.onBombDrop.add(this.bombDropped,this),this.game.controller.bridgeIcon.onDown.add(this.showHand,this),this.game.controller.bombIcon.onDown.add(this.showHand,this),this.game.controller.springIcon.onDown.add(this.showHand,this)},l.prototype.showHand=function(){this.game.hud.hand.state2(),this.desktop?EasingsGame.to(this.game.hud.hand.position,.2,{x:750,y:100}):EasingsGame.to(this.game.hud.hand.position,.2,{x:750,y:100})},l.prototype.hideHand=function(){},l.prototype.bridgeDropped=function(t){this.itemDropped("bricks")},l.prototype.bombDropped=function(t){t.onDestroyedEnemy.addOnce(this.onBombDestroyedEnemy,this)},l.prototype.onBombDestroyedEnemy=function(t){this.itemDropped("bombs")},l.prototype.springBoardDrop=function(t){this.itemDropped("springs")},l.prototype.itemDropped=function(t){this.numberItemsToDrop[t].active&&(this.numberItemsToDrop[t].number--,this.numberItemsToDrop[t].number<=0&&(this.numberItemsToDrop[t].active=!1,this.checkIfFinished()))},l.prototype.checkIfFinished=function(){var t=!0;for(var e in this.numberItemsToDrop){var i=this.numberItemsToDrop[e];if(i.active){t=!1;break}}t?(this.removeSignals(),this.hideHand(),o.instance.increment("tutorial",1),this.game.controller.fadeInButtons(),this.game.worldSpawner.finishTutorial(),r.instance.finishTutorial(),h.tutorialComplete(),this.game.hud.hand.visible=!1):(this.nextStep(),this.game.worldSpawner.nextStepTutorial())},l.prototype.nextStep=function(){this.currentStepTutorial++,1===this.currentStepTutorial?this.showSpringButton():this.showBombButton()},l.prototype.onSpringBoardLand=function(t){},l.prototype.update=function(){},n.exports=l}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(41),o=(i(47),i(58),i(51),function(){var t=new r.Sprite.from("tuto_hand.png");s.call(this,100,100,t,null),this.view.anchor.x=0,this.tick=0,this.view.rotation=-Math.PI/6,this.view.scale.x=-1,this.groups=["cull"]});o.prototype=Object.create(s.prototype),o.prototype.animateHand=function(){Easings.to(this.view,.1,{rotation:-Math.PI/6-Math.PI/6,onComplete:function(){Easings.to(this.view,.1,{rotation:-Math.PI/6})}.bind(this)})},o.prototype.reset=function(){this.tick=0},o.prototype.update=function(){this.tick++,this.view.position.x=this.world.view.camera.x+250+40*Math.cos(this.tick/20),this.view.position.y=-250+this.world.view.camera.y,this.tick%60===0&&this.animateHand()},n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(51),o=i(87),a=function(){this.backView=new r.Container,this.frontView=new r.Container,this.grad=new r.Sprite.from(ASSET_URL+"img/main/background_color.gif"),this.grad=new l(ASSET_URL+"img/main/background_color.gif",.4),this.grad.bg.texture.baseTexture.scaleMode=1,this.grad.bg.tileScale.set(15),this.bg=new l(ASSET_URL+"img/main/peg.png",.4),this.backView.addChild(this.grad),this.backView.addChild(this.bg),this.mountains=new h(["montaign.png","montaign3.png","montaign2.png"],.5,0,0,[40,-3e3]),this.mountainsFront=new h(["coline.png"],.6,300,0,[40,-2e3]),this.clouds=new c(["cloud1.png","cloud2.png"],.6,0,0,[40,-1800]),this.floatingIslands=new u([40,-1200]),this.backView.interactive=!1,this.backView.interactiveChildren=!1,this.frontView.interactive=!1,this.frontView.interactiveChildren=!1,this.backView.addChild(this.mountains),this.backView.addChild(this.mountainsFront),this.backView.addChild(this.clouds),this.backView.addChild(this.floatingIslands),this.lastPosX=0,this.lastPosY=0,this.w=0,this.h=0,this.tick=1.5*Math.PI,this.tint1=r.utils.hex2rgb(16711680),this.tint2=r.utils.hex2rgb(16711680),this.mix=[0,0,0],this.fakeCamera={x:0,y:0},this.delayedCalls=new o,this.hide()};a.prototype.forceForwards=function(t,e){EasingsGame.to(t.offsetBackground,e,{x:t.offsetBackground.x+6e3,ease:Easings.easeOutCubic,onComplete:function(){}.bind(this)})},a.prototype.forceBackwards=function(t,e){EasingsGame.to(t.offsetBackground,e,{x:t.offsetBackground.x-6e3,ease:Easings.easeOutCubic,onComplete:function(){}.bind(this)})},a.prototype.mixColor=function(t,e,i,n){return n[0]=i[0]+e[0]-i[0]*t,n[1]=i[1]+e[1]-i[1]*t,n[2]=i[2]+e[2]-i[2]*t,n},a.prototype.update=function(t,e){t.offsetBackground||(t.offsetBackground={x:0,y:0}),this.lastPosX=t.x,this.lastPosY=t.y,this.tick+=.01;var e=e||0;e+=2e-4*(Math.sin(this.tick)+1);var i=s.map(e,0,1,this.h-1800,-480);i=i||0,this.grad.bg.tilePosition.y=s.map(e,0,1,this.h-1800,-480),this.bg.bg.tilePosition.y=.1*(i-this.bg.bg.tilePosition.y),this.bg.update(t),this.grad.update(t),this.mountains.update(t),this.mountainsFront.update(t),this.clouds.update(t),this.floatingIslands.update(t)},a.prototype.resize=function(t,e){this.w=t,this.h=e,this.bg.resize(t,e),this.grad.resize(t,e),this.grad.bg.tilePosition.y=e-1800,this.mountains.resize(t,e),this.mountainsFront.resize(t,e),this.clouds.resize(t,e),this.floatingIslands.resize(t,e),this.update({x:this.lastPosX,y:this.lastPosY})},a.prototype.show=function(t){TweenLite.to(this.mountains.pivot,1,{ease:Sine.easeOut,y:0}),TweenLite.to(this.mountainsFront.pivot,1,{ease:Sine.easeOut,y:0,delay:.3})},a.prototype.hide=function(t){this.mountains.pivot.y=-550,this.mountainsFront.pivot.y=-550};var h=function(t,e,i,n,s){r.Container.call(this),this.images=t,this.mapPosCamera=s,this.sprites=[],this.pool=[],this.offset=i||0,this.yOffset=n||0,this.speed=e||1,this.tint=16777215};h.prototype=Object.create(r.Container.prototype),h.prototype.update=function(t,e){for(var i=0;i<this.sprites.length;i++){var n=this.sprites[i],r=n.home-(t.x+t.offsetBackground.x)*this.speed;r+=this.offset,r=s.wrap(r,-1e3,this.actualWidth);var o=t.y;o>this.mapPosCamera[0]?o=this.mapPosCamera[0]:o<this.mapPosCamera[1]&&(o=this.mapPosCamera[1]);var a=s.map(o,this.mapPosCamera[0],this.mapPosCamera[1],0,this.h);r>n.position.x,n.position.y+=.1*(a-n.position.y),n.position.x=r}},h.prototype.build=function(){this.removeChildren(),pos=-1e3;for(var t=0,e=0;pos<this.w;){e=400*Math.random()+120;var i=new r.Sprite.from(this.images[t++%this.images.length]);i.anchor.set(0,1),this.addChild(i),i.x=pos+e,i.tint=this.tint,i.home=pos,pos+=i.width+e,this.sprites.push(i)}this.actualWidth=pos},h.prototype.resize=function(t,e){this.w=t,this.h=e,this.y=e,this.build()};var l=function(t,e){r.Container.call(this),this.bg=new r.extras.TilingSprite.from(t,100,200),this.addChild(this.bg),this.speed=e||1};l.prototype=Object.create(r.Container.prototype),l.prototype.update=function(t,e){this.bg.tilePosition.x=(-t.x+t.offsetBackground.x)*this.speed},l.prototype.build=function(){this.bg.width=this.w,this.bg.height=this.h},l.prototype.resize=function(t,e){this.w=t,this.h=e,this.build()};var c=function(t,e,i,n,s){r.Container.call(this),this.images=t,this.sprites=[],this.pool=[],this.offset=i||0,this.yOffset=n||0,this.speed=e||1,this.mapPosCamera=s,this.idTick=0,this.count=0,this.lastCamX=0};c.prototype=Object.create(r.Container.prototype),c.prototype.goBackward=function(t){this.forceSpeed=-5},c.prototype.update=function(t,e){this.camera=t;var i=t.x+t.offsetBackground.x-this.lastCamX;if(this.lastCamX=t.x,this.count<0){this.count=s.random(300,600);var n=this.pool.pop();n||(n=new r.Sprite),n._texture=new r.Texture.from(this.images[this.idTick++%this.images.length]),n.position.x=this.w+200,n.speed=s.random(.5,.8),n.scale.x=n.scale.y=s.map(n.speed,.5,.8,.3,1),n.position.y=s.random(0,200),n.originalY=n.position.y,n.alpha=s.random(.5,1),this.sprites.push(n),this.addChild(n)}var o=t.y;o>this.mapPosCamera[0]?o=this.mapPosCamera[0]:o<this.mapPosCamera[1]&&(o=this.mapPosCamera[1]);for(var a=0;a<this.sprites.length;a++){
var n=this.sprites[a],h=s.map(o,this.mapPosCamera[0],this.mapPosCamera[1],n.originalY,n.originalY+this.h);n.position.y+=.1*(h-n.position.y),n.position.x+t.offsetBackground.x<-300&&(this.sprites.splice(a,1),a--,this.removeChild(n),this.pool.push(n)),n.position.x-=n.speed*i}this.count-=1*i},c.prototype.build=function(){for(this.removeChildren(),pos=Math.abs(this.camera.x)+1200;pos<this.w;){var t=new r.Sprite.from(this.images[0]);t._texture=new r.Texture.from(this.images[this.idTick++%this.images.length]),this.addChild(t),t.x=pos,t.speed=s.random(.5,.8),t.scale.x=t.scale.y=s.map(t.speed,.5,.8,.3,1),t.position.y=s.random(0,200),t.originalY=t.position.y,t.alpha=s.map(t.speed,.5,.8,.5,1),pos+=s.random(300,600),this.sprites.push(t)}this.actualWidth=pos},c.prototype.resize=function(t,e){this.w=t,this.h=e,this.build()};var u=function(t){c.call(this,["floating_island.png"],.6,0,0,t)};u.prototype=Object.create(c.prototype),u.prototype.build=function(){for(this.removeChildren(),pos=Math.abs(this.camera.x)+1200;pos<this.w;){var t=new r.Sprite.from(this.images[0]);t._texture=new r.Texture.from(this.images[this.idTick++%this.images.length]),this.addChild(t),t.x=pos,t.speed=s.random(.5,.8),t.scale.x=t.scale.y=s.map(t.speed,.5,.8,.7,1),t.position.y=s.random(0,200),t.originalY=t.position.y,t.tick=0,pos+=s.random(1e3,1500),this.sprites.push(t)}this.actualWidth=pos},u.prototype.update=function(t){this.camera=t;var e=t.x+t.offsetBackground.x-this.lastCamX;if(this.lastCamX=t.x,this.count<0){this.count=s.random(1e3,1500);var i=this.pool.pop();i||(i=new r.Sprite.from(this.images[0]),i.tick=1e5*Math.random()),i._texture=new r.Texture.from(this.images[this.idTick++%this.images.length]),i.anchor.set(.5),i.position.x=this.w+200+t.offsetBackground.x,i.speed=s.random(.7,.9),i.scale.x=i.scale.y=s.map(i.speed,.5,.8,.7,1),i.position.y=s.random(200,400),i.originalY=i.position.y,this.sprites.push(i),this.addChild(i)}var n=t.y;n>this.mapPosCamera[0]?n=this.mapPosCamera[0]:n<this.mapPosCamera[1]&&(n=this.mapPosCamera[1]);for(var o=0;o<this.sprites.length;o++){var i=this.sprites[o],a=s.map(n,this.mapPosCamera[0],this.mapPosCamera[1],i.originalY,i.originalY+this.h);i.position.y+=.1*(a-i.position.y),i.position.x+t.offsetBackground.x<-300&&(this.sprites.splice(o,1),o--,this.removeChild(i),this.pool.push(i)),i.tick++,i.position.x-=i.speed*e,i.pivot.y=10*Math.sin(.02*i.tick)}this.count-=1*e};var p=function(t){c.call(this,["foreground1.png","foreground2.png"],2,0,0,t)};p.prototype=Object.create(c.prototype),p.prototype.build=function(){for(this.removeChildren(),pos=Math.abs(this.camera.x)+1200;pos<this.w;){var t=new r.Sprite.from(this.images[0]);t._texture=new r.Texture.from(this.images[this.idTick++%this.images.length]),this.addChild(t),t.x=pos,t.anchor.set(.5,1),t.speed=s.random(.5,.8),t.scale.x=t.scale.y=s.map(t.speed,.5,.8,.7,1),t.position.y=640+s.random(0,200),t.originalY=t.position.y,t.tick=0,pos+=s.random(1e3,1500),this.sprites.push(t)}this.actualWidth=pos},p.prototype.update=function(t){this.camera=t;var e=t.x+t.offsetBackground.x-this.lastCamX;if(this.lastCamX=t.x,this.count<0){this.count=s.random(1e3,1500);var i=this.pool.pop();i||(i=new r.Sprite.from(this.images[0]),i.tick=1e5*Math.random()),i._texture=new r.Texture.from(this.images[this.idTick++%this.images.length]),i.anchor.set(.5,1),i.position.x=this.w+200,i.speed=s.random(2,3),i.position.y=640+s.random(0,200),i.originalY=i.position.y,this.sprites.push(i),this.addChild(i)}var n=t.y;n>this.mapPosCamera[0]?n=this.mapPosCamera[0]:n<this.mapPosCamera[1]&&(n=this.mapPosCamera[1]);for(var o=0;o<this.sprites.length;o++){var i=this.sprites[o],a=s.map(n,this.mapPosCamera[0],this.mapPosCamera[1],i.originalY,i.originalY+this.h);i.position.y+=.1*(a-i.position.y),i.position.x+t.offsetBackground.x<-300&&(this.sprites.splice(o,1),o--,this.removeChild(i),this.pool.push(i)),i.tick++,i.position.x-=i.speed*e}this.count-=1*e},n.exports=a}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(42);PixiDust=function(){r.Container.call(this,100),this.particals=[],this.particalPool=new s(ParticalDust),this.max=window.WEBGL?20:5,Device.instance.isMobile&&(this.max=window.WEBGL?10:0),this.count=0,this.pos=0;for(var t=0;t<this.max;t++){var e=this.particalPool.getObject();e.home.x=Math.random()*-1136,e.position.y=e.home.y=110640*Math.random(),e.speed=new r.Point(.2*(Math.random()-.5),.4*(Math.random()-.5)),this.particals.push(e),this.addChild(e)}this.focalLength=150},PixiDust.prototype=Object.create(r.Container.prototype),PixiDust.prototype.update=function(t){for(var e=0;e<this.particals.length;e++){var i=this.particals[e],n=this.focalLength/(this.focalLength+i.z),n=this.focalLength/(this.focalLength+i.z);i.scale.x=i.scale.y=.4*n,i.tick+=i.speedA/20,i.alpha=Math.cos(.8*i.tick),i.alpha>1&&(i.alpha=1),i.home.x+=i.speed.x,i.home.y+=i.speed.y,i.position.y=(i.home.y-t.y)*n*.5,i.position.x=(i.home.x-t.x)*n*.5,i.position.x%=1704,i.position.x<0&&(i.position.x+=1136*(1/t.zoom)),i.position.y%=640,i.position.y<0&&(i.position.y+=640),i.rotation+=i.rotationSpeed}},ParticalDust=function(){ParticalDust.globalCount++,r.Sprite.call(this,r.Texture.from(ParticalDust.frames[ParticalDust.globalCount%4])),this.anchor.x=.5,this.anchor.y=.5,this.z=-50+Math.random()*-50,this.rotation=Math.random()*Math.PI*2,this.rotationSpeed=.1*(Math.random()-.5),this.home=new r.Point,this.tick=Math.random()*Math.PI*2,this.speedA=.1*Math.random(),this.alpha=1},ParticalDust.globalCount=0,ParticalDust.frames=["dust_1.png","dust_2.png","dust_3.png","dust_4.png"],ParticalDust.prototype=Object.create(r.Sprite.prototype),n.exports=PixiDust}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){CartoonTransition=function(){this.circle=(new PIXI.Graphics).beginFill(1044480).drawCircle(0,0,100)},CartoonTransition.constructor=CartoonTransition,CartoonTransition.prototype.begin=function(t,e,i){this.screenManager=t,this.currentScreen=e,this.nextScreen=i,this.nextScreen.onShow&&this.nextScreen.onShow(),t.container.addChild(this.circle),t.container.mask=this.circle,this.circle.scale.set(this.targetScale),this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.circle.scale,1,{x:.001,y:.001,ease:Sine.easeOut,onComplete:this.onFadeout.bind(this)})):this.onFadeout()},CartoonTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen)),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),this.screenManager.container.addChild(this.nextScreen),TweenLite.to(this.circle.scale,1.2,{delay:.2,x:this.targetScale,y:this.targetScale,ease:Cubic.easeIn,onComplete:this.onFadein.bind(this)})},CartoonTransition.prototype.onFadein=function(){this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.container.removeChild(this.circle),this.screenManager.container.mask=null,this.screenManager.onTransitionComplete()},CartoonTransition.prototype.onResize=function(t,e){this.w=t,this.h=e,this.targetScale=t/100*1.2,this.circle.x=t/2,this.circle.y=e/2},i.exports=CartoonTransition}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(10),s=i(34),o=function(t){this.disabled=s.music.disabled,this.music=s.music,this.currentSound=null,this.newSound=null,this.onFade=new r,this.globalVolume=1,this.volume=1,this.fadeInDuration=1,this.fadeOutDuration=1,this.music.onMuteToggle.add(this.onMusicToggle,this)};o.prototype.init=function(t){this.volume=t.volume||1,this.fadeInDuration=t.fadeInDuration||3.2,this.fadeOutDuration=t.fadeOutDuration||3.5},o.prototype.add=function(t,e){s.music.addSound(t,e,{loop:!0})},o.prototype.play=function(t){var e=this.music.sounds[t];!this.disabled&&e&&this.currentSound!==e&&(this.currentSound&&this.currentSound.fade(this.volume,0,1e3*this.fadeOutDuration),this.currentSound=e,this.currentSound.fade(0,this.volume,1e3*this.fadeInDuration,this.currentSound.play()))},o.prototype.onMusicToggle=function(t){},o.prototype.setVolume=function(t,e){this.disabled||(t.realVolume=e,t.volume(e*this.globalVolume))},o.prototype.isPlaying=function(t){if(!this.disabled)return!this.sounds[t]._audioNode[0].paused},n.exports=new o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=function(t,e){r.Graphics.call(this),this.beginFill(16777215).drawRect(0,0,100,100),this.resize(t,e),this.alpha=0};s.prototype=Object.create(r.Graphics.prototype),s.prototype.flash=function(t,e){this.alpha=1,TweenLite.to(this,e||.5,{alpha:0,delay:t||0,ease:Expo.easeOut})},s.prototype.resize=function(t,e){this.scale.x=t/100,this.scale.y=t/100},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(43),o=i(34),a=i(25),h=i(81),l=(i(133),function(t){this.app=t,r.Container.call(this),this.muteButton=s.small("icon_small_sound_on.png"),this.addChild(this.muteButton.view),this.muteButton.onPress.add(this.onButtonPressed,this),this.pauseButton=s.small("icon_small_pause.png"),this.addChild(this.pauseButton.view),this.pauseButton.onPress.add(this.onButtonPressed,this),this.pauseButton.view.visible=!1,o.sfx.onMuteToggle.add(this.onMuteToggle,this),o.music.onMuteToggle.add(this.onMuteToggle,this),this.backButton=s.small("icon_close.png"),this.backButton.view.x=82,this.backButton.view.y=82,this.backButton.view.visible=!1,h.instance.achievementUnlocked.add(this.showCurrentGoal,this)});l.prototype=Object.create(r.Container.prototype),l.prototype.showCurrentGoal=function(t){},l.prototype.gameMode=function(){this.pauseButton.view.visible=!0,this.backButton.view.visible=!1},l.prototype.normalMode=function(){this.pauseButton.view.visible=!1,a.instance.mobile?this.showBackButton():this.backButton.view.visible=!1},l.prototype.showBackButton=function(){this.backButton.view.visible=!0},l.prototype.onButtonPressed=function(t){t===this.muteButton?o.sfx.isMuted&&o.music.isMuted?(o.music.unmute(),o.sfx.unmute()):(o.music.mute(),o.sfx.mute()):t===this.pauseButton?this.app.overlayManager.show("pause"):t===this.backButton&&this.app.screenManager.gotoScreenByID("title")},l.prototype.onMuteToggle=function(){o.sfx.isMuted&&o.music.isMuted?this.muteButton.setIcon("icon_small_sound_off.png"):this.muteButton.setIcon("icon_small_sound_on.png")},l.prototype.onShown=function(){},l.prototype.resize=function(t,e){if(this.isMobile){var i=100,n=42;this.muteButton.view.position.set(t-i-n,82),this.pauseButton.view.position.set(t-i-n-105,82)}else{var i=45,n=32;this.muteButton.view.position.set(t-i-n,65),this.pauseButton.view.position.set(t-i-n-105,65)}},n.exports=l}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=(i(81),i(34)),o=i(27),a=i(10),h=function(){r.Container.call(this),this.onShow=new a,this.onHide=new a,this.goalPanel=new r.Container,this.goalBkg=new r.Sprite.fromFrame("panel_achievement.png"),this.goalBkg.anchor.x=.5,this.goalPanel.addChild(this.goalBkg),this.achievementBullet=r.Texture.fromFrame("challenge_bullet_on.png"),this.goalStar=new r.Sprite(this.achievementBullet),this.goalStar.y=.5*this.goalBkg.height+5,this.goalStar.anchor.set(.5),this.goalText=new r.Text("hi",{font:"24px "+window.MAIN_FONT,align:"center",fill:"#f3f3eb"}),this.goalText.anchor.set(.5),this.goalText.y=.5*this.goalBkg.height-5,this.goalPanel.addChild(this.goalText),this.addChild(this.goalPanel),this.goalPanel.pivot.y=40,this.queue=[],this.processing=!1,this.current=null};h.prototype=Object.create(r.Container.prototype),h.prototype.receiveAchievement=function(t){t.type="achievement",this.queue.push(t),this.processQueue()},h.prototype.receiveTrophy=function(t){t.type="trophy",this.queue.push(t),this.processQueue()},h.prototype.processQueue=function(){if(!this.processing){var t=this.queue.pop();if(this.processing=!0,!t)return this.goalPanel.visible=!1,this.processing=!1,void(this.current=null);this.current=t,"achievement"===t.type?this.showAchievement(t):"trophy"===t.type&&this.showTrophy(t)}},h.prototype.showAchievement=function(t){this.onShow.dispatch(this),this.goalText.text=t.desc,this.goalText.scale.set(1);var e=Math.min(.85*this.goalBkg.width/this.goalText.width,1);this.goalText.scale.set(e),this.goalStar.x=-(.5*this.goalText.width+5),this.goalText.x=10,this.goalStar.texture=this.achievementBullet,this.goalPanel.visible=!0,this.reveal()},h.prototype.showTrophy=function(t){var e={durasteel:"STR_TROPHY_DURASTEEL",bronze:"STR_TROPHY_BRONZE",silver:"STR_TROPHY_SILVER",gold:"STR_TROPHY_GOLD"};!window.translations[e[t.name]];var i=window.translations[e[t.name]];this.goalText.text=i?i:t.name,this.goalText.scale.set(1);var n=Math.min(.85*this.goalBkg.width/this.goalText.width,1);this.goalText.scale.set(n),this.goalStar.x=-(.5*this.goalText.width+20),this.goalStar.texture=r.Texture.fromFrame(t.image),this.goalPanel.visible=!0,this.reveal()},h.prototype.reveal=function(){r.isWebGL?TweenLite.to(this.goalPanel.pivot,.4,{y:-40,easeOut:Expo.easeOut,delay:.2,onComplete:function(){s.sfx.play("earned_achievement"),TweenLite.to(this.goalPanel.pivot,.4,{y:40,easeOut:Expo.easeIn,delay:6,onComplete:function(){this.processing=!1,this.processQueue(),this.onHide.dispatch(this)}.bind(this)})}.bind(this)}):(s.sfx.play("earned_achievement"),this.goalPanel.pivot.y=-40,o.wait(function(){this.goalPanel.pivot.y=40,this.processing=!1,this.processQueue()}.bind(this),360))},h.prototype.restart=function(){this.processing=!1,this.goalPanel.visible=!0,this.current&&this.queue.push(this.current),this.processQueue()},h.prototype.stop=function(){this.processing=!0,TweenLite.killTweensOf(this.goalPanel.pivot),r.isWebGL?TweenLite.to(this.goalPanel.pivot,.4,{y:40,easeOut:Expo.easeIn,overwrite:!0}):this.goalPanel.pivot.y=40},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(10),o=i(22),a=i(43),h=i(135),l=i(137),c=i(143),u=i(146),p=function(t){this.app=t,this.view=new r.Container,o.call(this),this.pauseScreen=new h(t),this.gameoverScreen=new l(t),this.achievementsScreen=new c(t),this.addScreen(this.pauseScreen,"pause"),this.addScreen(this.gameoverScreen,"gameover"),this.addScreen(this.achievementsScreen,"achievements"),this.defaultTransition=new u;var e=new r.Container;e.empty=!0,this.addScreen(e,"empty"),this.onShow=new s,this.onHide=new s,this.black=(new r.Graphics).beginFill(16777215).drawRect(0,0,100,100),this.black.alpha=.3,this.black.interactive=!0,this.black.hitArea=new r.Rectangle(0,0,1e4,1e4),this.view.visible=!1,this.closeButton=a.close("icon_close.png"),this.closeButton.onPress.add(this.goBack,this),this.closeButton.view.x=1e4,this.closeButton.view.y=120,Device.instance.ie||window.badDevice||(this.rt=r.RenderTexture.create(1200,740,0,1),this.bg=new r.Sprite(this.rt),this.view.addChildAt(this.bg,0),this.blur=new r.filters.BlurFilter,this.blur.padding=100),this.view.addChild(this.black),this.view.addChild(this.container),this.view.addChild(this.closeButton.view),this.app.screenManager.container.filterArea=new r.Rectangle(0,0,1e4,1e4)};p.prototype=Object.create(o.prototype),p.prototype.goBack=function(){this.history.pop();var t=this.history.pop();t?this.gotoScreen(t):this.hide()},p.prototype.show=function(t){var e=this.app.screenManager.container;e.filters=[this.blur],Device.instance.ie||window.badDevice||(m=new r.Matrix,m.scale(.999/this.view.scale.x,.999/this.view.scale.y),window.renderer.render(e,this.rt,null,m,!1)),e.filters=null,this.history=[],this.gotoScreenByID(t,!0),this.onShow.dispatch(),this.view.visible=!0,this.view.alpha=0,TweenLite.to(this.view,.3,{alpha:1}),this.closeButton.view.scale.set(0)},p.prototype.gotoScreen=function(t){void 0===t.hasClose||t.hasClose===!0?(this.closeButton.view.interactive=!0,TweenLite.to(this.closeButton.view.scale,.3,{x:this.closeButton.defaultScale,y:this.closeButton.defaultScale,ease:Back.easeOut,delay:.4})):(this.closeButton.view.interactive=!1,TweenLite.to(this.closeButton.view.scale,.3,{x:0,y:0,ease:Back.easeOut})),o.prototype.gotoScreen.call(this,t)},p.prototype.hide=function(){this.history=[],this.closeButton.view.interactive=!1,this.gotoScreenByID("empty"),TweenLite.to(this.closeButton.view.scale,.3,{x:0,y:0,ease:Back.easeOut}),TweenLite.to(this.view,.3,{alpha:0,onComplete:function(){this.view.visible=!1,this.onHide.dispatch()}.bind(this)})},p.prototype.resize=function(t,e){this.closeButton.view.x=t/2+250-5,this.closeButton.view.y=e/2-140-12,this.black.scale.set(t/100,e/100),Device.instance.ie||window.badDevice||this.rt.resize(t,e),o.prototype.resize.call(this,t,e)},p.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.container.removeChild(this.currentScreen)),this.currentScreen=this.nextScreen,this.currentScreen.alpha=0,this.currentScreen.onShow&&this.currentScreen.onShow(),this.currentScreen.resize&&this.currentScreen.resize(this.w,this.h),TweenLite.to(this.currentScreen,.4,{alpha:1,onComplete:this.onFadein.bind(this)}),this.container.addChild(this.currentScreen)},n.exports=p}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(34),o=i(43),a=(i(20),i(136),i(82),i(84)),h=i(81);PauseScreen=function(t){this.app=t,r.Container.call(this),this.bg=new r.Sprite.fromFrame("panel_menu.png"),this.bg.anchor.set(.5),this.addChild(this.bg),this.hasClose=!1,this.pausedText=new r.extras.BitmapText(translations.STR_GAME_PAUSED,{font:"60px Ubuntu"}),this.pausedText.anchor.x=.5,this.pausedText.y=.5*-this.bg.height+15,this.addChild(this.pausedText),this.quitButton=o.tiny("icon_small_home.png"),this.quitButton.onPress.add(this.onPress,this),this.quitButton.view.x=-160,this.quitButton.view.y=135,this.fullScreenButton=o.tiny("icon_small_big_screen.png"),Device.instance.desktop&&this.addChild(this.fullScreenButton.view),this.fullScreenButton.view.x=-205,this.fullScreenButton.view.y=125,this.fullScreenButton.onPress.add(this.onPress,this),this.restartButton=new o.small("icon_replay.png"),this.restartButton.onPress.add(this.onPress,this),this.restartButton.view.x=135,this.restartButton.view.y=125,this.addChild(this.restartButton.view),this.playButton=new o.small("icon_small_play.png"),this.addChild(this.playButton.view),this.playButton.view.x=240,this.playButton.view.y=125,this.playButton.onPress.add(this.onPress,this),this.muteButton=o.tiny("icon_small_sound_on.png"),this.containerAchievements=new r.Container,this.addChild(this.containerAchievements),s.sfx.onMuteToggle.add(this.onMuteToggle,this),s.music.onMuteToggle.add(this.onMuteToggle,this),this.icons=[],this.poolIcons=[]},PauseScreen.prototype=Object.create(r.Container.prototype),PauseScreen.prototype.onPress=function(t){this.beenPressed||(t===this.restartButton?(this.app.gameScreen.game.reset(),this.beenPressed=!0,this.app.overlayManager.hide()):t===this.quitButton&&(this.app.gameScreen.game.reset(),this.app.overlayManager.hide(),this.beenPressed=!0),t===this.muteButton?s.sfx.isMuted&&s.music.isMuted?(s.music.unmute(),s.sfx.unmute()):(s.music.mute(),s.sfx.mute()):t===this.playButton?(this.app.overlayManager.hide(),this.app.gameScreen.game.resume()):t===this.fullScreenButton&&(document.body.requestFullscreen?document.body.requestFullscreen():document.body.msRequestFullscreen?document.body.msRequestFullscreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullScreen&&document.body.webkitRequestFullScreen()))},PauseScreen.prototype.onShow=function(){this.beenPressed=!1,this.containerAchievements.removeChildren();for(var t=0;t<this.icons.length;t++)this.poolIcons.push(this.icons[t]);this.icons=[];for(var e=h.instance.loadSpecificGroup(this.app.gameScreen.game.currentGroup),t=0;t<e.length;t++){var i=this.poolIcons.pop()||new a;i.position.x=-this.bg.width/2+75,i.position.y=90*t-60,i.reset(e[t],!0),this.icons.push(i),e[t].achieved&&i.stroke(!0),this.containerAchievements.addChild(i)}},PauseScreen.prototype.onMuteToggle=function(){s.sfx.isMuted&&s.music.isMuted?this.muteButton.setIcon("icon_small_sound_off.png"):this.muteButton.setIcon("icon_small_sound_on.png")},PauseScreen.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},n.exports=PauseScreen}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(45),s=function(t){var e=new PIXI.Graphics;e.beginFill(4473924).drawRect(-50,-16,100,32).endFill(),r.call(this),this.addChild(e),this.hitArea=new PIXI.Rectangle((-50),(-16),100,32),this.label=new PIXI.Text(t,{fill:"white",font:"20px lubalin"}),this.label.anchor.set(.5),e.addChild(this.label)};s.prototype=Object.create(r.prototype),n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=(i(34),i(37)),o=(i(20),i(10)),a=i(43),h=(i(136),i(88)),l=i(138),s=i(37),c=i(142),u=function(t){this.app=t,l.call(this,t),this.hasClose=!1;var e={font:"50px "+window.MAIN_FONT,fill:"#FFFFFF",dropShadow:!0,dropShadowDistance:2,dropShadowColor:"rgba(0,0,0,0.5)"};this.distanceIcon=new r.Sprite.from("ruler.png"),this.distanceIcon.position.x=0,this.distanceIcon.position.y=-70,this.distanceIcon.anchor.x=1,this.distanceIcon.anchor.y=.5,this.addChild(this.distanceIcon),this.miniFigure=new r.Sprite.from("squeak_mini.png"),this.miniFigure.anchor.x=.5,this.miniFigure.anchor.y=.5,this.miniFigure.position.y=-this.miniFigure.height/2-10,this.distanceIcon.addChild(this.miniFigure),this.distance=new c("0",e),this.distance.anchor.x=0,this.distance.anchor.y=.5,this.distance.x=20,this.distance.y=-70,this.addChild(this.distance),this.shadow=new r.Sprite.from("stud_shadow.png"),this.shadow.anchor.x=.5,this.shadow.anchor.y=.5,this.shadow.x=-20,this.shadow.y=-10,this.addChild(this.shadow);var i=s.getTexturesFromFramesWithPrefix("pickup/coin_pickup_000%%.png",30,0,!1);this.pickupIcon=new r.Sprite(i[0]),this.pickupIcon.textures=i,this.pickupIcon.counter=0,this.pickupIcon.tint=16776960,this.pickupIcon.speed=.6,this.pickupIcon.anchor.x=1,this.pickupIcon.anchor.y=.5,this.pickupIcon.scale.x=this.pickupIcon.scale.y=.6,this.pickupIcon.x=0,this.pickupIcon.y=-20,this.addChild(this.pickupIcon),this.coins=new c("0",e),this.coins.anchor.x=0,this.coins.anchor.y=.5,this.coins.x=20,this.coins.y=-20,this.addChild(this.coins);var n=new r.Text(translations.STR_GAME_SCORE,{font:"28px "+window.MAIN_FONT,fill:"#FFFFFF",dropShadow:!0,dropShadowDistance:2,dropShadowColor:"rgba(0,0,0,0.5)"});n.anchor.x=1,n.anchor.y=.5,n.x=0,n.y=55,this.scoreText=n,this.addChild(n),n.scale.x=n.scale.y=Math.min(.4*this.bg.width/n.width,1),this.score=new c("0",e),this.score.anchor.x=0,this.score.anchor.y=.5,this.score.x=20,this.score.y=50,this.addChild(this.score),this.currentScore=2e5,this.btnContainer=new r.Container,this.addChild(this.btnContainer),this.btnContainer.x=-155,this.btnContainer.y=120,this.quitButton=new a.small("icon_house.png"),this.quitButton.view.x=230,this.quitButton.onPress.add(this.onPress,this),this.restartButton=new a.small("icon_replay.png"),this.restartButton.view.x=375,this.restartButton.onPress.add(this.onPress,this),this.btnContainer.addChild(this.restartButton.view),this.delayedCalls=new h,this.scrat=new r.Sprite.from("game_end_squeak.png"),this.scrat.anchor.set(.5),this.scrat.position.x=-this.bg.width/2+20,this.scrat.position.y=this.bg.height/2-60,this.bg.addChild(this.scrat),this.bat=new r.Sprite.from("game_end_bat.png"),this.bat.anchor.set(.5),this.bat.position.x=this.bg.width/2-40,this.bat.position.y=-this.bg.height/2-30,this.bg.addChild(this.bat)};u.prototype=Object.create(l.prototype),u.prototype.onShown=function(){Easings.to(this.miniFigure.position,2,{x:-10,ease:Easings.easeOutCirc}),Easings.to(this.scrat,.2,{delay:.2,alpha:1}),Easings.to(this.scrat.position,1,{delay:.2,x:-this.bg.width/2+20,y:this.bg.height/2-60,ease:Easings.easeOutCubic}),Easings.to(this.bat,.2,{alpha:1}),Easings.to(this.bat.position,1.5,{x:this.bg.width/2-40,y:-this.bg.height/2-30,ease:Easings.easeOutCubic})},u.prototype.onShow=function(){this.scrat.position.x=-this.bg.width/2+20-200,this.scrat.position.y=this.bg.height/2-60+80,this.bat.position.x=this.bg.width/2-40+200,this.bat.position.y=-this.bg.height/2-30-120,this.scrat.alpha=0,this.bat.alpha=0,this.tick=0,this.title.text=translations.STR_GAME_GAMEOVER,l.prototype.onShow.call(this),this.scoreText.updateText(),this.miniFigure.position.x=-this.distanceIcon.width,this.distance.displayTextFromTo(0,this.app.gameScreen.gameDetail.distance||0,2,"cm"),this.coins.displayTextFromTo(0,this.app.gameScreen.gameDetail.studs,2),this.score.displayTextFromTo(0,this.app.gameScreen.gameDetail.score,2)},u.prototype.onPress=function(t){t===this.restartButton?(this.app.gameScreen.game.reset(),this.app.overlayManager.hide()):t===this.quitButton?(this.app.overlayManager.hide(),this.app.screenManager.gotoScreenByID("game")):t===this.shopButton&&this.app.overlayManager.gotoScreenByID("shop")},u.prototype.update=function(){this.pickupIcon.counter+=this.pickupIcon.speed,this.pickupIcon.texture=this.pickupIcon.textures[Math.floor(this.pickupIcon.counter%this.pickupIcon.textures.length)],this.shadow.scale.x=.9+.1*Math.cos(this.tick/5),this.tick++,this.miniFigure.scale.x=this.miniFigure.scale.y=.95+.05*Math.cos(this.tick/10)},u.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2};var p=function(t){r.Sprite.call(this,r.Texture.fromFrame("button_up.png")),this.anchor.set(.5),this.interactive=!0,this.buttonMode=!0,this.icon=new r.Sprite.from(t),this.icon.anchor.set(.5),this.addChild(this.icon),this.onPress=new o,this.onDown=new o,this.onUp=new o,this.onHover=new o,this.onOut=new o,this.mousedown=this.touchstart=this.onDown.dispatch.bind(this,this),this.mouseup=this.touchend=this.onUp.dispatch.bind(this,this),this.click=this.tap=this.onPress.dispatch.bind(this,this),this.mouseover=this.onHover.dispatch.bind(this,this),this.touchendoutside=this.mouseupoutside=this.mouseout=this.onOut.dispatch.bind(this,this),this.view=this};p.prototype=Object.create(r.Sprite.prototype),n.exports=u}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=(i(43),i(33),i(37),i(20),i(81),i(139),i(64),function(t){r.Container.call(this),this.app=t,this.bg=new r.Sprite.fromFrame("panel_menu.png"),this.bg.anchor.set(.5),this.addChild(this.bg),this.hasClose=!0,this.title=new r.extras.BitmapText("Paused",{font:"60px "+window.MAIN_FONT}),this.title.anchor.x=.5,this.title.y=.5*-this.bg.height+15,this.bg.addChild(this.title),this.left=-this.bg.width/2+60});s.prototype=Object.create(r.Container.prototype),s.prototype.constructor=s,s.prototype.onShow=function(){this.title.scale.x=this.title.scale.y=1,this.title.scale.x=this.title.scale.y=Math.min(.9*this.bg.width/this.title.width,1)},s.prototype.onShown=function(){},s.prototype.onHidden=function(){},s.prototype.update=function(){},s.prototype.updateTransform=function(){r.Container.prototype.updateTransform.call(this),this.update()},s.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(10),o=(i(140),i(141)),a=i(81),h=i(82),l=i(61),s=i(10),c=function(t){r.Container.call(this),this.owner=t,this.onReady=new s,this.delayedCalls=new l,this.pool=[]};c.prototype=Object.create(r.Container.prototype),c.prototype.init=function(){this.toDelete=[],this.objectives=[]},c.prototype.onObjectiveDisappear=function(t){this.pool.push(t)},c.prototype.displayAchievements=function(t){this.clear(function(){t||(t=a.instance.loadSpecificGroup(this.owner.app.gameScreen.game.currentGroup)),this.numberAchievements=t.length;var e=55-95*(this.numberAchievements-1)/2;this.objectives=[];for(var i=t.length-1;i>=0;i--){var n=this.pool.pop()||new o(this.owner);n.reset(t[i]),n.onDisappear.removeAll(),n.onDisappear.add(this.onObjectiveDisappear,this),n.x=-this.owner.bg.width/4+40,n.y=95*i+e,this.addChild(n),this.objectives.push(n)}this.objectives.reverse(),Easings.to(this,.2,{alpha:1,onComplete:function(){}.bind(this)})}.bind(this))},c.prototype.loadNextObjectives=function(){for(var t=[],e=a.instance.getLastAchievements(),i=0;i<e.length;i++)e[i].achieved||t.push(e[i]);this.displayAchievements(t)},c.prototype.clear=function(t){Easings.to(this,.2,{alpha:0,onComplete:function(){this.removeChildren(),t&&t()}.bind(this)})},c.prototype.animate=function(){for(var t=h.completedGoals,e=!1,i=1,n=0;n<this.objectives.length;n++)if(e=!1,this.objectives[n].data.achieved){for(var r=0;r<t.length;r++)t[r].id===this.objectives[n].data.id&&(this.objectives[n].activate(1*n),e=!0,i++);e||(this.objectives[n].forceTick(),this.objectives[n].stroke(!0))}this.delayedCalls.add(function(){h.levelComplete&&this.loadNextObjectives(),this.onReady.dispatch()}.bind(this),i)},n.exports=c}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){function r(t,e,i){e=e||"texttext",i=i||{},s.Container.call(this),t&&(this.text=new s.Text(e,i),this.text.anchor.y=.5,this.addChild(this.text),this.ticked=!1)}var s=i(6);r.prototype=Object.create(s.Container.prototype),r.prototype.constructor=r,r.prototype.reset=function(t){this.rotation=0,this.ticked=!1,this.complete=!1},r.prototype.showIcon=function(t,e){},r.prototype.setText=function(t){this.text.text=t,this.text.updateText(),this.text.scale.set(1);var e=380/this.text.width;e=Math.min(1,e),this.text.scale.set(e),window.flipLanguage},r.prototype.getText=function(){return this.text.text},r.prototype.setStyle=function(t){this.text.style=t,this.text.updateText(),this.text.scale.set(1);var e=380/this.text.width;e=Math.min(1,e),this.text.scale.set(e)},n.exports=r}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(9),o=i(10),a=i(61),h=i(84),l=function(t){r.Container.call(this),this.owner=t,this.onDisappear=new o,this.onDestroyed=new o,this.emptySlot=new r.Sprite.from("achievement_box.png"),this.emptySlot.position.x=-280+this.emptySlot.width+10,this.emptySlot.position.y=4,this.emptySlot.anchor.x=.5,this.emptySlot.anchor.y=.5,this.tick=new r.Sprite.from("panel_achievement_check.png"),this.tick.anchor.x=.5,this.tick.anchor.y=.5,this.iconAchievement=new h,this.iconAchievement.position.x=this.emptySlot.position.x+100,this.addChild(this.iconAchievement),this.ticked=!1,this.delayedCalls=new a};l.prototype=Object.create(r.Container.prototype),l.prototype.forceTick=function(){this.iconAchievement.animateTick(null,!0)},l.prototype.stroke=function(){this.iconAchievement.stroke()},l.prototype.setStyle=function(t){},l.prototype.reset=function(t){this.ticked=!1,this.complete=!1,this.data=t,t.achieved&&(this.stroke(!0),this.forceTick()),this.iconAchievement.reset(t,!0),this.tick.visible=!1,this.tick.scale.x=this.tick.scale.y=15},l.prototype.explode=function(){this.onDestroyed.dispatch(this)},l.prototype.setText=function(t){},l.prototype.activate=function(t){this.tick.visible||this.delayedCalls.add(function(){this.tick.visible=!0,this.iconAchievement.animateTick(),this.delayedCalls.add(this.iconAchievement.stroke.bind(this.iconAchievement),.2),this.delayedCalls.add(this.owner.shake.bind(this.owner),.1),this.delayedCalls.add(this.explode.bind(this),.1)}.bind(this),t||.01)},l.prototype.update=function(){if(this.exploding){var t=!0;t&&(this.exploding=!1,this.onDisappear.dispatch(this),s.instance.remove(this.update,this))}},l.prototype.deactivate=function(t){this.tick.visible=!1},n.exports=l}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=function(t,e){e=e||{font:"28px "+window.MAIN_FONT,fill:"#FFFFFF"},r.Text.call(this,t,e)};s.prototype=Object.create(r.Text.prototype),s.prototype.displayTextFromTo=function(t,e,i,n){n=n||"";var r={value:t||0};e=e||0,Easings.to(r,i||2,{value:e,onUpdate:function(){this.text=Math.floor(r.value)+n}.bind(this)})},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){
var n;n=function(t,e,n){var r=i(6),s=(i(43),i(33),i(37),i(20),i(81)),o=i(139),a=(i(64),i(144),i(82),i(145)),h=(i(138),function(t){this.app=t,r.Container.call(this,t),this.bg=new r.Sprite.fromFrame("panel_menu.png"),this.bg.anchor.set(.5),this.addChild(this.bg),this.hasClose=!1,this.title=new r.extras.BitmapText(translations.STR_GAME_OBJECTIVES,{font:"60px Ubuntu"}),this.title.anchor.x=.5,this.title.y=.5*-this.bg.height+15,this.addChild(this.title),this.hasClose=!1,this.step=0,this.count=0,this.left=-this.bg.width/2+60,this.completedGoals=[],this.previousAchievements=[],s.instance.achievementUnlocked.add(this.onSingleGoalComplete,this),s.instance.allLevelsComplete.add(this.onAllComplete,this),s.instance.allAchievementsCollected.add(this.onLevelComplete,this),this.allComplete=!1,this.character=null,this.nextButton=a.small("icon_small_next.png"),this.nextButton.onPress.add(this.onPress,this),this.nextButton.visible=!1,this.nextButton.interactive=!1,this.nextButton.view.x=220,this.nextButton.view.y=140,this.addChild(this.nextButton.view),this.goalView=new o(this),this.goalView.scale.set(1),this.bg.addChild(this.goalView),this.goalView.position.set(0,-60),this.currentGroupAchievementIndex=0});h.prototype=Object.create(r.Container.prototype),h.prototype.constructor=h,h.prototype.shake=function(){this.bg.scale.set(.9),Easings.to(this.bg.scale,.1,{x:1,y:1,ease:Easings.easeOutCirc})},h.prototype.onReady=function(){this.nextButton.visible=!0,this.nextButton.interactive=!0},h.prototype.onShow=function(){this.nextButton.visible=!1,this.nextButton.alpha=0,this.nextButton.interactive=!1,this.nextButton.out(),this.goalView.visible=!1,this.goalView.displayAchievements(),this.nextButton.visible=!0,this.nextButton.interactive=!0,Easings.to(this.nextButton,.5,{delay:1,alpha:1,ease:Easings.easeOutCirc})},h.prototype.onShown=function(){this.goalView.visible=!0,this.goalView.alpha=0,TweenLite.to(this.goalView,.6,{alpha:1,onComplete:function(){this.goalView.animate()}.bind(this)})},h.prototype.onPress=function(t){this.app.overlayManager.gotoScreenByID("gameover")},h.prototype.onHidden=function(){this.previousAchievements=[],this.currentGroupAchievementIndex=0},h.prototype.onLevelComplete=function(){this.levelComplete=!0;var t=Object.keys(s.instance.config.groups);index=t.indexOf(this.currentGroup),this.previousAchievements.push(s.instance.groupHash[this.currentGroup])},h.prototype.wellDone=function(){},h.prototype.onAllComplete=function(){this.allComplete=!0,this.levelComplete=!1},h.prototype.onSingleGoalComplete=function(t){this.currentGroup=t.group},h.prototype.update=function(t,e){this.count+=1},h.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},n.exports=h}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(6),s=i(45),o=(i(34),function(t){s.call(this),this.cacheAsBitmap=!0,this.background=new r.Sprite.fromFrame("small_button_in_game.png"),this.background.pivot.x=this.background.width/2,this.background.pivot.y=this.background.height/2-5,this.addChild(this.background),this.icon=new r.Sprite,this.icon.anchor.set(.5),this.addChild(this.icon),this.setIcon(t)});o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.setIcon=function(t){t&&(this.cacheAsBitmap=!1,this.icon.texture=r.Texture.fromFrame(t),this.cacheAsBitmap=!0)},o.prototype.setSize=function(t){switch(t){case"small":this.scale.set(.5);break;case"big":this.scale.set(2);break;default:this.scale.set(1)}},o.prototype.show=function(t){var e=this.cacheAsBitmap;this.cacheAsBitmap=!1,this.visible=!0,this.enable(),this.icon.alpha=1,this.background.alpha=1,this.icon.scale.x=this.icon.scale.y=1,this.background.scale.x=this.background.scale.y=1,this.cacheAsBitmap=e},o.prototype.hide=function(t){var e=this.cacheAsBitmap;this.cacheAsBitmap=!1,this.disable(),r.isWebGL?(t=t||.2,TweenLite.to(this.icon,t,{alpha:0,onComplete:function(){this.visible=!1,this.cacheAsBitmap=e},onCompleteScope:this,ease:Power2.easeIn}),TweenLite.to(this.icon.scale,t,{x:0,y:0,ease:Power2.easeIn}),TweenLite.to(this.background,t,{alpha:0,ease:Power2.easeIn}),TweenLite.to(this.background.scale,t,{x:0,y:0,ease:Power2.easeIn})):(this.icon.alpha=0,this.background.alpha=0,this.icon.scale.x=this.icon.scale.y=0,this.background.scale.x=this.background.scale.y=0)},o.prototype.down=function(){s.prototype.down.call(this)},o.prototype.up=function(){},o.prototype.hover=function(){var t=this.cacheAsBitmap;this.cacheAsBitmap=!1;var e=.4;TweenLite.to(this.icon.scale,e,{x:1.3,y:1.3,onComplete:function(){this.cacheAsBitmap=t},onCompleteScope:this,ease:Elastic.easeOut}),TweenLite.to(this.background.scale,.5*e,{x:1.2,y:1.2,ease:Power4.easeOut})},o.prototype.out=function(){var t=this.cacheAsBitmap;this.cacheAsBitmap=!1;var e=.2;TweenLite.to(this.icon.scale,e,{x:1,y:1,onComplete:function(){this.cacheAsBitmap=t},onCompleteScope:this,ease:Power2.easeOut}),TweenLite.to(this.background.scale,e,{x:1,y:1,ease:Power2.easeOut})},n.exports=o}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=(i(6),i(44)),s={small:function(t){var e=new r("small_button_menu.png","small_button_menu_rollover.png","small_button_menu.png",t?t:null);return e.defaultScale=1,t&&(e.icon.pivot.x=8,e.icon.pivot.y=-4,e.offset.x=1,e.offset.y=2),e}};n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(147),s=i(9);DropInTransition=function(){this.bouncer=new r,this.bouncer.bounce=.6,this.bouncer.gravity=3,this.bounceCount=0},DropInTransition.constructor=DropInTransition,DropInTransition.prototype.begin=function(t,e,i){this.screenManager=t,this.currentScreen=e,this.nextScreen=i,this.currentScreen&&!this.currentScreen.empty?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.currentScreen,.4,{alpha:0,onComplete:this.onFadeout.bind(this)})):this.onFadeout(),s.instance.add(this.update,this)},DropInTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen),this.currentScreen.alpha=1),this.nextScreen.alpha=1,this.nextScreen.rotation=.05,this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),this.bouncer.bounce=.6,this.bouncer.x=-500,this.nextScreen.pivot.y=-this.bouncer.x,this.bounceCount=0,this.screenManager.container.addChild(this.nextScreen)},DropInTransition.prototype.onFadein=function(){this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.onTransitionComplete()},DropInTransition.prototype.update=function(){var t=this.bouncer.update();this.nextScreen.pivot.y=-this.bouncer.x,t&&(this.bounceCount++,this.nextScreen.rotation*=-.6,3===this.bounceCount&&(this.bouncer.bounce=0,this.nextScreen.rotation=0,s.instance.remove(this.update,this),this.nextScreen.pivot.y=0,this.nextScreen.rotation=0,this.onFadein()))},DropInTransition.prototype.resize=function(t,e){this.w=t,this.h=e},n.exports=DropInTransition}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){var n=function(){this.x=-50,this.vx=0,this.floor=0,this.bounce=1,this.gravity=1,this.max=30};n.prototype.update=function(){return this.vx+=this.gravity,this.vx<-this.max&&(this.vx=-this.max),this.vx>this.max&&(this.vx=this.max),this.x+=this.vx,this.x>this.floor&&this.vx>0&&(this.x=this.floor,this.vx*=-this.bounce,!0)},n.prototype.reset=function(){this.x=0,this.vx=-10,this.floor=0},i.exports=n}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){var r=i(20),s=function(t,e){this.debug=e.debug||!1,this.app=t,window.loadFromLegoUrl?this.app.preloader.addJson(window.loadFromLegoUrl,"strings_from_url"):this.app.preloader.addJson(ASSET_URL+"json/appconfig.json","appconfig"),this.app.preloader.onComplete.addOnce(this.onPreloaderComplete,this)};s.prototype.constructor=s,s.prototype.onPreloaderComplete=function(){if(window.loadFromLegoUrl){var t=r.getJson("strings_from_url");this.translations=t,window.translations=t}else{var e=r.getJson("appconfig").configuration.customvalues;this.translations=e,window.translations=e}if(this.debug)for(var i in window.translations)window.translations[i]+=window.translations[i]},n.exports=s}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e){t.exports=["img/preload/barreloader.png","img/preload/lego_logo.png","img/preload/rainbow.png","img/preload/rainbow_small.png","img/preload/vignet.png"]},function(t,e){t.exports=["img/main/background_color.gif","img/main/game0.json","img/main/grad_test.jpg","img/main/particle.png","img/main/particle_dropline.png","img/main/peg.png","img/main/sky.png","img/main/title0.json","img/main/ui0.json","img/main/ui_bg_lighten.png","img/main/world0.json"]},function(t,e,i){var n;!function(t){function r(t,e,i){this.x=t,this.y=e,this.z=i}function s(t){return t*t*t*(t*(6*t-15)+10)}function o(t,e,i){return(1-i)*t+i*e}var a=t.noise={};r.prototype.dot2=function(t,e){return this.x*t+this.y*e},r.prototype.dot3=function(t,e,i){return this.x*t+this.y*e+this.z*i};var h=[new r(1,1,0),new r((-1),1,0),new r(1,(-1),0),new r((-1),(-1),0),new r(1,0,1),new r((-1),0,1),new r(1,0,(-1)),new r((-1),0,(-1)),new r(0,1,1),new r(0,(-1),1),new r(0,1,(-1)),new r(0,(-1),(-1))],l=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],c=new Array(512),u=new Array(512);a.seed=function(t){t>0&&t<1&&(t*=65536),t=Math.floor(t),t<256&&(t|=t<<8);for(var e=0;e<256;e++){var i;i=1&e?l[e]^255&t:l[e]^t>>8&255,c[e]=c[e+256]=i,u[e]=u[e+256]=h[i%12]}},a.seed(0);var p=.5*(Math.sqrt(3)-1),d=(3-Math.sqrt(3))/6,f=1/3,m=1/6;a.simplex2=function(t,e){var i,n,r,s,o,a=(t+e)*p,h=Math.floor(t+a),l=Math.floor(e+a),f=(h+l)*d,m=t-h+f,g=e-l+f;m>g?(s=1,o=0):(s=0,o=1);var v=m-s+d,y=g-o+d,_=m-1+2*d,x=g-1+2*d;h&=255,l&=255;var b=u[h+c[l]],w=u[h+s+c[l+o]],T=u[h+1+c[l+1]],S=.5-m*m-g*g;S<0?i=0:(S*=S,i=S*S*b.dot2(m,g));var E=.5-v*v-y*y;E<0?n=0:(E*=E,n=E*E*w.dot2(v,y));var C=.5-_*_-x*x;return C<0?r=0:(C*=C,r=C*C*T.dot2(_,x)),70*(i+n+r)},a.simplex3=function(t,e,i){var n,r,s,o,a,h,l,p,d,g,v=(t+e+i)*f,y=Math.floor(t+v),_=Math.floor(e+v),x=Math.floor(i+v),b=(y+_+x)*m,w=t-y+b,T=e-_+b,S=i-x+b;w>=T?T>=S?(a=1,h=0,l=0,p=1,d=1,g=0):w>=S?(a=1,h=0,l=0,p=1,d=0,g=1):(a=0,h=0,l=1,p=1,d=0,g=1):T<S?(a=0,h=0,l=1,p=0,d=1,g=1):w<S?(a=0,h=1,l=0,p=0,d=1,g=1):(a=0,h=1,l=0,p=1,d=1,g=0);var E=w-a+m,C=T-h+m,M=S-l+m,P=w-p+2*m,A=T-d+2*m,I=S-g+2*m,O=w-1+3*m,R=T-1+3*m,k=S-1+3*m;y&=255,_&=255,x&=255;var D=u[y+c[_+c[x]]],L=u[y+a+c[_+h+c[x+l]]],B=u[y+p+c[_+d+c[x+g]]],F=u[y+1+c[_+1+c[x+1]]],N=.6-w*w-T*T-S*S;N<0?n=0:(N*=N,n=N*N*D.dot3(w,T,S));var U=.6-E*E-C*C-M*M;U<0?r=0:(U*=U,r=U*U*L.dot3(E,C,M));var G=.6-P*P-A*A-I*I;G<0?s=0:(G*=G,s=G*G*B.dot3(P,A,I));var j=.6-O*O-R*R-k*k;return j<0?o=0:(j*=j,o=j*j*F.dot3(O,R,k)),32*(n+r+s+o)},a.perlin2=function(t,e){var i=Math.floor(t),n=Math.floor(e);t-=i,e-=n,i=255&i,n=255&n;var r=u[i+c[n]].dot2(t,e),a=u[i+c[n+1]].dot2(t,e-1),h=u[i+1+c[n]].dot2(t-1,e),l=u[i+1+c[n+1]].dot2(t-1,e-1),p=s(t);return o(o(r,h,p),o(a,l,p),s(e))},a.perlin3=function(t,e,i){var n=Math.floor(t),r=Math.floor(e),a=Math.floor(i);t-=n,e-=r,i-=a,n=255&n,r=255&r,a=255&a;var h=u[n+c[r+c[a]]].dot3(t,e,i),l=u[n+c[r+c[a+1]]].dot3(t,e,i-1),p=u[n+c[r+1+c[a]]].dot3(t,e-1,i),d=u[n+c[r+1+c[a+1]]].dot3(t,e-1,i-1),f=u[n+1+c[r+c[a]]].dot3(t-1,e,i),m=u[n+1+c[r+c[a+1]]].dot3(t-1,e,i-1),g=u[n+1+c[r+1+c[a]]].dot3(t-1,e-1,i),v=u[n+1+c[r+1+c[a+1]]].dot3(t-1,e-1,i-1),y=s(t),_=s(e),x=s(i);return o(o(o(h,f,y),o(l,m,y),x),o(o(p,g,y),o(d,v,y),x),_)},n=function(){return a}.call(e,i,e,a),!(void 0!==n&&(a.exports=n))}(this)}]);
 
 console.log('Greenish Games - games.greenish.xyz -  Copyright 2017' );