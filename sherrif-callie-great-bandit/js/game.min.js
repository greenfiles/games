cc.game.hardRefresh=function(d,b,c,e){if(e){var a=[];localStorage.CALLIE_GAME=JSON.stringify(CALLIE_GAME,function(f,g){if(typeof g==="object"&&g!==null){if(a.indexOf(g)!==-1){return}a.push(g)}return g});a=null;localStorage.CALLIE_GAME=JSON.stringify(CALLIE_GAME);localStorage.gameResources=JSON.stringify(d);localStorage.gameLoadedCallback=b;localStorage.reloadLevel="true";location.reload()}else{cc.LoaderScene.preload(d,b)}};cc.game.onStart=function(){cc.view.adjustViewPort(true);cc.view.setDesignResolutionSize(928,500,cc.ResolutionPolicy.SHOW_ALL);cc.view.resizeWithBrowserSize(true);if(localStorage.reloadLevel=="true"){var b=JSON.parse(localStorage.gameResources);var a=new Function(localStorage.gameLoadedCallback.replace("function ()",""));if(localStorage.CALLIE_GAME){CALLIE_GAME=JSON.parse(localStorage.CALLIE_GAME);CALLIE_GAME.musicTrack={}}localStorage.reloadLevel="false";localStorage.levelWasReloaded="true";cc.LoaderScene.preload(b,a)}else{cc.LoaderScene.preload(title_resources,function(){var c=cc.loader._loadTxtSync("media/settings/settings.json");CALLIE_GAME=JSON.parse(c);CALLIE_GAME.itemsCollected=0;CALLIE_GAME.score=0;CALLIE_GAME.nuggets=Number((localStorage.nuggetCount)?localStorage.nuggetCount:0);CALLIE_GAME.unlockedPhoto=(localStorage.unlockedPhoto)?localStorage.unlockedPhoto:0;CALLIE_GAME.unlockedPJs=(localStorage.unlockedPJs)?localStorage.unlockedPJs:0;CALLIE_GAME.unlockedPhone=(localStorage.unlockedPhone)?localStorage.unlockedPhone:0;CALLIE_GAME.unlockedPrint=(localStorage.unlockedPrint)?localStorage.unlockedPrint:0;CALLIE_GAME.unlockedToby=(localStorage.unlockedToby)?localStorage.unlockedToby:0;CALLIE_GAME.unlockedPeck=(localStorage.unlockedPeck)?localStorage.unlockedPeck:0;CALLIE_GAME.pickupItem="corn";CALLIE_GAME.strings=JSON.parse(cc.loader._loadTxtSync("media/strings/strings.json"));if(CALLIE_GAME_MODE.lowFi=="true"){CALLIE_GAME.voOn="false";CALLIE_GAME.captionsOn="true"}localStorage.CALLIE_GAME=JSON.stringify(CALLIE_GAME);if(typeof window.orientation!=="undefined"){cc.director.runScene(new SignalScene())}else{cc.director.runScene(new TitleScene())}},this)}};cc.game.run();var AllBadGuysSequence=cc.Layer.extend({ctor:function(){this._super();this.init()},finished:function(){VO.unlock();VO.captionLayer=null;cc.director.runScene(new IntroSequenceScene())},init:function(){this._super();var e=cc.director.getWinSize();VO.captionLayer=this;if(CALLIE_GAME_MODE.lowFi!="true"){var a=ccs.load(titleRes.all_bad_guys_sequence);var g=a.node;this.addChild(g);var f=g.getChildByName("skipButton");f.addTouchEventListener(this.touchEvent,this);setupMouseOvers([f],this);var d=a.action;d.startWithTarget(g);d.play("badGuysRun",false);g.runAction(d);if(CALLIE_GAME.musicTrack.src){CALLIE_GAME.musicTrack.stop()}CALLIE_GAME.musicTrack=createjs.Sound.play(titleRes.s_mx_introA_mp3);CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume)}else{var c=new cc.Sprite("media/images/allbadguyssequence.jpg");c.setAnchorPoint(0,0);this.addChild(c);var b=new ccui.Button();b.loadTextures(res.skip_btn,res.skip_btn,res.skip_btn);b.setScale(0.75);b.setPosition(878,409);this.addChild(b);b.addTouchEventListener(this.touchEvent,this);setupMouseOvers([b],this)}VO.play(titleRes.s_cal001_mp3,this.finished,this,true)},touchEvent:function(b,c){cc.log("Skipping");VO.unlock();var a={};a.action="story_skip";window.trackGameEvent(a);cc.director.runScene(new ChooseCharacterScene())}});var AllBadGuysSequenceScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new AllBadGuysSequence();this.addChild(b)}});var AnimationLayer=cc.Layer.extend({spriteSheet:null,runningAction:null,sprite:null,space:null,body:null,shape:null,ctor:function(a){this._super();this.space=a;this.init()},init:function(){this._super()}});var BackgroundLayer=cc.Layer.extend({ctor:function(){this._super();this.init()},init:function(){this._super();var a=cc.Director.getInstance().getWinSize()}});var CaptureSequence=cc.Layer.extend({ctor:function(){this._super();this.init()},finished:function(){VO.captionLayer=null;cc.director.runScene(new PreSortSequenceScene())},frameEventCalled:function(a){},init:function(){this._super();if(!CALLIE_GAME.badGuy){CALLIE_GAME.badGuy=1}VO.captionLayer=this;var g=cc.director.getWinSize();ccs.customEasing=1;if(CALLIE_GAME_MODE.lowFi!="true"){var k=ccs.load(res.s_captureSequenceJson);var b=k.node;this.addChild(b);var e=b.getChildByName("badguy");e.setTexture(cc.textureCache.addImage(sortRes["s_jailBG"+CALLIE_GAME.badGuy]));var c=k.action;c.startWithTarget(b);c.setFrameEventCallFunc(this.frameEventCalled);c.play("badguystop",false);b.runAction(c);if(CALLIE_GAME.musicTrack.src){CALLIE_GAME.musicTrack.stop()}CALLIE_GAME.musicTrack=createjs.Sound.play(sortRes.s_mx_capture_sequence_mp3);CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume);createjs.Sound.play(sortRes.s_sfx_jail_closing_shut_mp3)}else{var j=new cc.Sprite("media/images/capturesequence"+CALLIE_GAME.badGuy+".jpg");j.setAnchorPoint(0,0);this.addChild(j)}var a=cc.callFunc(this.finished,this);var f=cc.delayTime(5);var d=cc.sequence(f,a);this.runAction(d);var h=Math.floor((Math.random()*4)+1);if(h==1){VO.play(sortRes.s_cal017_mp3)}if(h==2){VO.play(sortRes.s_cal018_mp3)}if(h==3){VO.play(sortRes.s_cal019_mp3)}if(h==4){VO.play(sortRes.s_cal020_mp3)}},touchEvent:function(a,b){cc.director.runScene(new GameScene())}});var CaptureSequenceScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new CaptureSequence();this.addChild(b)}});var ChooseCharacterLayer=cc.Layer.extend({labelCoin:null,labelMeter:null,coins:0,tAction:null,node:null,ctor:function(){this._super();this.init()},init:function(){this._super();var f=cc.director.getWinSize();this.node=ccs.load(titleRes.s_CharacterSelect).node;ChooseCharacterLayer.instance=this;VO.unlock();VO.captionLayer=this;this.addChild(this.node);var k=ccs.load(titleRes.s_CharacterSelect);if(CALLIE_GAME.unlockedToby||CALLIE_GAME.unlockedPeck){this.tAction=k.action;this.tAction.startWithTarget(this.node);this.tAction.setFrameEventCallFunc(this.frameEventCalled);this.node.stopAllActions();this.tAction.play("callie",false);CALLIE_GAME.characterSelected="callie";this.node.runAction(this.tAction)}else{this.tAction=k.action;this.tAction.startWithTarget(this.node);this.tAction.setFrameEventCallFunc(this.frameEventCalled);this.tAction.play("callie",false);CALLIE_GAME.characterSelected=""}var b=this.node;if(CALLIE_GAME.useBitmapFonts=="true"){var j=b.getChildByName("screenTitle");j.setString(CALLIE_GAME.strings.CHOOSE_CHARACTER_TITLE);j.setScale(CALLIE_GAME.fontTitleSize/66)}else{var c=new cc.FontDefinition();c.fontName=CALLIE_GAME.fontTitleName;c.fontSize=CALLIE_GAME.fontTitleSize;c.textAlign=cc.TEXT_ALIGNMENT_CENTER;c.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;c.fillStyle=cc.color(CALLIE_GAME.fontTitleColorRGB[0],CALLIE_GAME.fontTitleColorRGB[1],CALLIE_GAME.fontTitleColorRGB[2]);c.boundingWidth=800;c.boundingHeight=300;var h=this.node.getChildByName("screenTitle");var a=new cc.LabelTTF(CALLIE_GAME.strings.CHOOSE_CHARACTER_TITLE,c);a.setPosition(h.getPositionX(),h.getPositionY()-20);h.getParent().addChild(a);h.removeFromParent(true);a.setName("screenTitle")}if(!CALLIE_GAME.unlockedPeck&&!CALLIE_GAME.unlockedToby){VO.play(titleRes.s_nar004a_mp3)}else{VO.play(titleRes.s_nar004_mp3)}this.runAction(cc.sequence(cc.delayTime(10),cc.callFunc(function(){VO.play(titleRes.s_nar005_mp3)},this)));var g=this.node.getChildByName("Button1");var e=this.node.getChildByName("Button2");var d=this.node.getChildByName("Button3");this.nuggetTotal=this.node.getChildByName("nuggetTotal");this.unlockCharacterPanel=this.node.getChildByName("unlockCharacter");this.character=this.unlockCharacterPanel.getChildByName("character");this.soundButton=this.node.getChildByName("soundButton");SoundButton.setup(this.soundButton,this);this.nuggetCost=this.unlockCharacterPanel.getChildByName("nuggetCount");this.noButton=this.unlockCharacterPanel.getChildByName("noButton");this.yesButton=this.unlockCharacterPanel.getChildByName("yesButton");this.yesButtonDisabled=this.unlockCharacterPanel.getChildByName("yesButtonDisabled");this.nextButton=this.node.getChildByName("nextButton");this.nextButton.addTouchEventListener(function(l,m){if(m==2){if(CALLIE_GAME.characterSelected){cc.director.purgeCachedData();cc.game.hardRefresh(jail_resources,function(){if(CALLIE_GAME.characterSelected=="callie"){var n={};n.action="character_select_callie";window.trackGameEvent(n)}else{if(CALLIE_GAME.characterSelected=="toby"){var n={};n.action="character_select_toby";window.trackGameEvent(n)}else{if(CALLIE_GAME.characterSelected=="peck"){var n={};n.action="character_select_peck";window.trackGameEvent(n)}}}ChooseCharacterLayer.instance=null;VO.captionLayer=null;cc.director.purgeCachedData();cc.game.hardRefresh(jail_resources,function(){var o=new JailhouseScene();cc.director.runScene(new cc.TransitionFade(1,o))})})}}},this);this.helpButton=this.node.getChildByName("helpButton");this.helpButton.addTouchEventListener(function(m,n){if(n==2){VO.play(titleRes.s_nar004_mp3,function(){VO.play(titleRes.s_nar005_mp3)},this);var l={};l.action="help";window.trackGameEvent(l)}},this);this.checkYesButton();this.nuggetTotal.setString(CALLIE_GAME.nuggets);this.helpButton.rolloverSound=titleRes.s_nar029_mp3;this.soundButton.rolloverSound=titleRes.s_nar028_mp3;this.yesButton.rolloverSound=titleRes.s_nar037_mp3;this.noButton.rolloverSound=titleRes.s_nar038_mp3;setupMouseOvers([g,e,d,this.soundButton,this.helpButton],this);if(!CALLIE_GAME.unlockedPeck){this.node.getChildByName("peck").setColor(cc.color(0,0,0))}if(!CALLIE_GAME.unlockedToby){this.node.getChildByName("toby").setColor(cc.color(0,0,0))}this.noButton.addTouchEventListener(function(l,m){if(m==0){ChooseCharacterLayer.instance.unlockCharacterPanel.setPosition(1000,1000);setupMouseOvers([g,e,d,this.soundButton,this.helpButton],this)}},this);this.yesButton.addTouchEventListener(function(m,n){if(n==0){var o=ChooseCharacterLayer.instance.nuggetCost.string;if(CALLIE_GAME.nuggets>=o){CALLIE_GAME.nuggets-=o;localStorage.nuggetCount=CALLIE_GAME.nuggets;createjs.Sound.play(titleRes.s_store_purchase_mp3);ChooseCharacterLayer.instance.nuggetTotal.setString(CALLIE_GAME.nuggets);if(CALLIE_GAME.characterToBuy=="toby"){CALLIE_GAME.unlockedToby=true;localStorage.unlockedToby=true;ChooseCharacterLayer.instance.node.getChildByName("toby").setColor(cc.color(255,255,255));var l={};l.action="character_unlock_toby";window.trackGameEvent(l)}if(CALLIE_GAME.characterToBuy=="peck"){CALLIE_GAME.unlockedPeck=true;localStorage.unlockedPeck=true;ChooseCharacterLayer.instance.node.getChildByName("peck").setColor(cc.color(255,255,255));var l={};l.action="character_unlock_peck";window.trackGameEvent(l)}ChooseCharacterLayer.instance.unlockCharacterPanel.setPosition(1000,1000);setupMouseOvers([g,e,d,this.soundButton,this.helpButton],this);this.checkYesButton()}}},this);g.addTouchEventListener(function(m,n){if(n==0){if(CALLIE_GAME.characterSelected=="callie"){VO.play(titleRes.s_nar033_mp3,function(){VO.play(titleRes.s_nar033a_mp3)},this)}else{var l=m.getParent().getParent().tAction;var o=m.getParent().getParent().node;o.stopAllActions();l.play("callie",false);o.runAction(l);CALLIE_GAME.characterSelected="callie";VO.play(titleRes.s_nar033_mp3,function(){VO.play(titleRes.s_nar033a_mp3)},this)}this.nextButton.setPosition(800,222)}},this);e.addTouchEventListener(function(m,n){if(n==0){if(CALLIE_GAME.unlockedToby){if(CALLIE_GAME.characterSelected=="toby"){VO.play(titleRes.s_nar035_mp3,function(){VO.play(titleRes.s_nar035a_mp3)},this)}else{var l=m.getParent().getParent().tAction;var o=m.getParent().getParent().node;o.stopAllActions();l.play("toby",false);o.runAction(l);CALLIE_GAME.characterSelected="toby";VO.play(titleRes.s_nar035_mp3,function(){VO.play(titleRes.s_nar035a_mp3)},this)}this.nextButton.setPosition(800,222)}else{CALLIE_GAME.characterToBuy="toby";var p=new cc.SpriteFrame(titleRes.s_chooseToby,cc.rect(0,0,162,197));ChooseCharacterLayer.instance.character.setSpriteFrame(p);m.getParent().getParent().unlockCharacterPanel.setPosition(0,0);setupMouseOvers([this.yesButton,this.noButton],this);if(CALLIE_GAME.nuggets>=CALLIE_GAME.tobyCost){VO.play(titleRes.s_nar016_mp3)}else{VO.play(titleRes.s_nar007_mp3)}this.nuggetCost.setString(CALLIE_GAME.tobyCost);this.nextButton.setPosition(1010,222);var l=m.getParent().getParent().tAction;var o=m.getParent().getParent().node;o.stopAllActions();l.gotoFrameAndPause(0,false);o.runAction(l);CALLIE_GAME.characterSelected=""}}},this);d.addTouchEventListener(function(m,n){if(n==0){if(CALLIE_GAME.unlockedPeck){if(CALLIE_GAME.characterSelected=="peck"){VO.play(titleRes.s_nar034_mp3,function(){VO.play(titleRes.s_nar034a_mp3)},this)}else{var l=m.getParent().getParent().tAction;var o=m.getParent().getParent().node;o.stopAllActions();l.play("peck",false);o.runAction(l);CALLIE_GAME.characterSelected="peck";VO.play(titleRes.s_nar034_mp3,function(){VO.play(titleRes.s_nar034a_mp3)},this)}this.nextButton.setPosition(800,222)}else{CALLIE_GAME.characterToBuy="peck";var p=new cc.SpriteFrame(titleRes.s_choosePeck,cc.rect(0,0,128,207));ChooseCharacterLayer.instance.character.setSpriteFrame(p);m.getParent().getParent().unlockCharacterPanel.setPosition(0,0);VO.play(titleRes.s_nar005a_mp3,function(){VO.play(titleRes.s_nar006_mp3)},this);this.nextButton.setPosition(1010,222);var l=m.getParent().getParent().tAction;var o=m.getParent().getParent().node;o.stopAllActions();l.gotoFrameAndPause(0,false);o.runAction(l);CALLIE_GAME.characterSelected="";this.nuggetCost.setString(CALLIE_GAME.peckCost);if(CALLIE_GAME.nuggets>=CALLIE_GAME.peckCost){VO.play(titleRes.s_nar015_mp3)}else{VO.play(titleRes.s_nar006_mp3)}}}},this);if(CALLIE_GAME.musicTrack.src){CALLIE_GAME.musicTrack.stop()}CALLIE_GAME.musicTrack=createjs.Sound.play(titleRes.s_mx_characterselect_mp3,{loop:-1});CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume)},checkYesButton:function(){if(CALLIE_GAME.nuggets>=CALLIE_GAME.tobyCost){this.yesButtonDisabled.setPosition(1000,1000);this.yesButton.setPosition(554.6,90.7)}else{this.yesButton.setPosition(1000,1000);this.yesButtonDisabled.setPosition(554.6,90.7)}},loadNextScene:function(){cc.log("loading");ChooseCharacterLayer.instance=null;VO.captionLayer=null;cc.director.purgeCachedData();cc.game.hardRefresh(jail_resources,function(){var a=new JailhouseScene();cc.director.runScene(new cc.TransitionFade(1,a))})}});var ChooseCharacterScene=cc.Scene.extend({tLayer:null,onEnter:function(){this._super();var a=cc.director.getWinSize();this.tLayer=new ChooseCharacterLayer();this.addChild(this.tLayer)}});ChooseCharacterLayer.instance=null;ccs.customEasing=0.25;cc.Follow.prototype.step=function(c){if(!this.positionArray){this.positionArray=[]}tempPosX=(this._halfScreenSize.x/2-this._followedNode.x);tempPosY=(this._halfScreenSize.y/1.5-this._followedNode.y);this.positionArray.push(cc.p(tempPosX,tempPosY));if(this.positionArray.length>10){this.positionArray.shift()}var d=0;var b=0;for(var a=0;a<this.positionArray.length;a++){d+=this.positionArray[a].x;b+=this.positionArray[a].y}d/=this.positionArray.length;b/=this.positionArray.length;tempPosX=d;tempPosY=b;if(this._boundarySet){if(this._boundaryFullyCovered){return}this.target.setPosition(cc.clampf(tempPosX,this.leftBoundary,this.rightBoundary),cc.clampf(tempPosY,this.bottomBoundary,this.topBoundary))}else{this.target.setPosition(tempPosX,tempPosY)}};var GameEndSequence=cc.Layer.extend({labelCoin:null,labelMeter:null,coins:0,ctor:function(){this._super();this.init()},finished:function(){VO.captionLayer=null;cc.director.purgeCachedData();if(typeof window.orientation!=="undefined"){cc.game.hardRefresh(jail_resources,function(){cc.director.runScene(new JailhouseScene())},this,true)}else{cc.game.hardRefresh(jail_resources,function(){cc.director.runScene(new JailhouseScene())},this)}},init:function(){this._super();var d=cc.director.getWinSize();VO.captionLayer=this;if(CALLIE_GAME_MODE.lowFi!="true"){var a=ccs.load(sortRes.s_game_end_json);var e=a.node;this.addChild(e);var c=a.action;c.startWithTarget(e);c.play("longzoom",false);e.runAction(c);if(CALLIE_GAME.musicTrack.src){CALLIE_GAME.musicTrack.stop()}CALLIE_GAME.musicTrack=createjs.Sound.play(sortRes.s_mx_after_level_gameEnd_mp3);CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume)}else{var b=new cc.Sprite("media/images/gameendsequence.jpg");b.setAnchorPoint(0,0);this.addChild(b)}VO.play(sortRes.s_cal037_mp3,function(){VO.play(sortRes.s_cal038_mp3,function(){VO.play(sortRes.s_nar024_mp3,function(){this.finished()},this)},this)},this)},touchEvent:function(a,b){VO.captionLayer=null;cc.director.purgeCachedData();if(typeof window.orientation!=="undefined"){cc.game.hardRefresh(jail_resources,function(){cc.director.runScene(new JailhouseScene())},this,true)}else{cc.game.hardRefresh(jail_resources,function(){cc.director.runScene(new JailhouseScene())},this)}}});var GameEndSequenceScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new GameEndSequence();this.addChild(b)}});var GameLayer=cc.Layer.extend({sprite:null,body:null,callieOnHorseAnimation:null,jumping:false,jumpCount:0,doubleJumping:false,itemsCollected:0,minimumSpeed:20,maximumSpeed:1000,gallopSound:null,maxScale:0.8,minScale:0.5,banditCave:null,speedSound:null,ctor:function(){this._super();GameLayer.instance=this;var r=cc.winSize;VO.unlock();cc.spriteFrameCache.addSpriteFrames(res.s_gameobjects_plist);this.map00=CALLIE_GAME.map00;this.addChild(this.map00);this.map00.setPosition(0,0);this.map00.setScale(1);cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(k,j){if(k==68&&CALLIE_GAME.levelSelectScreen==true){cc.director.runScene(new LevelSelectScene())}}},this);this.space=new cp.Space();this.space.setDefaultCollisionHandler(this.collisionBegin.bind(this),this.collisionPre.bind(this));this.space.gravity=cp.v(0,CALLIE_GAME.gravity*-100);this.space.iterations=20;var ad=64;var ah=0;var o=CALLIE_GAME.pickupItem;CALLIE_GAME.currentCollectible=res["s_object_"+o+"PNG"];CALLIE_GAME.controlsOn=false;CALLIE_GAME.rotateSpeed=0.2;if(CALLIE_GAME.savedScore&&CALLIE_GAME.helpPlaying==false){cc.log("SCORE SAVED");cc.log(CALLIE_GAME.savedScore);CALLIE_GAME.itemsCollected=CALLIE_GAME.savedScore;CALLIE_GAME.savedScore=null}else{CALLIE_GAME.itemsCollected=0}CALLIE_GAME.ACTION_TAGS={BLINK_TAG:{value:0},ANGLE_DOWN:{value:1},ANGLE_UP:{value:2},STRAIGHTEN:{value:3},RUN:{value:4},JUMP:{value:5},IDLE:{value:6}};CALLIE_GAME.currentObjectDrop=res["s_drop_"+o+"Particle"];var L=CALLIE_GAME.mapInfo;var R=L.getTileProperties();var c=this.map00.getLayer("GameTiles");var A=this.map00.getLayer("Objects");for(var ag=0;ag<L.getMapSize().height;ag++){for(var af=0;af<L.getMapSize().width;af++){var Z=c.getTileGIDAt(cc.p(af,ag));if(typeof R[Z]!=="undefined"){if("solid" in R[Z]){var m=c.getTileAt(cc.p(af,ag));if(m){var w=this.space.addStaticShape(new cp.BoxShape2(this.space.staticBody,new cp.BB(m.getPosition().x,m.getPosition().y,m.getPosition().x+ad,m.getPosition().y+ad)));w.setElasticity(0.01);w.setFriction(1);w.idName="Block";w.straight=true}}if("float" in R[Z]){var m=c.getTileAt(cc.p(af,ag));if(m){var w=this.space.addStaticShape(new cp.BoxShape2(this.space.staticBody,new cp.BB(m.getPosition().x,m.getPosition().y,m.getPosition().x+ad,m.getPosition().y+ad)));w.setElasticity(0.01);w.setFriction(1);w.idName="FloatBlock"}}if("angle_up" in R[Z]){var m=c.getTileAt(cc.p(af,ag));if(m){var ai=[m.getPosition().x,m.getPosition().y,m.getPosition().x+ad,m.getPosition().y+ad,m.getPosition().x+ad,m.getPosition().y,m.getPosition().x,m.getPosition().y];var w=this.space.addStaticShape(new cp.PolyShape(this.space.staticBody,ai,cp.vzero));w.setElasticity(0.01);w.setFriction(1);w.idName="Block";w.angleUp=true}}if("angle_down" in R[Z]){var m=c.getTileAt(cc.p(af,ag));if(m){var ai=[m.getPosition().x,m.getPosition().y+ad,m.getPosition().x+ad,m.getPosition().y,m.getPosition().x,m.getPosition().y,m.getPosition().x,m.getPosition().y+ad];var w=this.space.addStaticShape(new cp.PolyShape(this.space.staticBody,ai,cp.vzero));w.setElasticity(0.01);w.setFriction(1);w.idName="Block";w.angleDown=true}}}var W=A.getTileGIDAt(cc.p(af,ag));if(typeof R[W]!=="undefined"){if("start" in R[W]){var m=A.getTileAt(cc.p(af,ag));this.startPoint=m.getPosition();this.startPoint.x+=100;m.setOpacity(0)}if("badguy_sign" in R[W]){var m=A.getTileAt(cc.p(af,ag));if(m){var p="#bg"+CALLIE_GAME.badGuy+"-sign.png";var q=new cc.Sprite(p);q.setAnchorPoint(0,0);q.setPosition(cc.p(m.getPosition().x,m.getPosition().y));this.addChild(q);m.removeFromParent()}}if("obstacle" in R[W]){var m=A.getTileAt(cc.p(af,ag));var q=new cc.Sprite(res.s_cactus_png);if(R[W].obstacle==1){var w=this.space.addStaticShape(new cp.BoxShape2(this.space.staticBody,new cp.BB((m.getPosition().x)+ad/3,m.getPosition().y,m.getPosition().x+ad/2,m.getPosition().y+ad/4)))}if(R[W].obstacle==2){var w=this.space.addStaticShape(new cp.BoxShape2(this.space.staticBody,new cp.BB((m.getPosition().x)+ad/3,m.getPosition().y,m.getPosition().x+ad/2,m.getPosition().y+ad/3)))}q.setAnchorPoint(0,0);q.setPosition(cc.p(m.getPosition().x,m.getPosition().y-4));this.addChild(q);m.removeFromParent();w.spriteRef=q;w.sensor=true;w.idName="Obstacle";w.spriteRef=q}if("level_end" in R[W]){var m=A.getTileAt(cc.p(af,ag));var w=this.space.addStaticShape(new cp.BoxShape2(this.space.staticBody,new cp.BB((m.getPosition().x)+ad/3,m.getPosition().y,m.getPosition().x+ad/2,m.getPosition().y+ad/4)));w.sensor=true;w.idName="End";if(CALLIE_GAME.badGuy>0){if(!this.banditHideout){this.banditHideout=new cc.Sprite("#cave-"+CALLIE_GAME.badGuy+".png");this.addChild(this.banditHideout)}else{this.banditHideout.setPosition(m.getPosition().x+200,m.getPosition().y+97)}}this.levelEndX=m.getPosition().x;m.removeFromParent()}if("jump" in R[W]){var m=A.getTileAt(cc.p(af,ag));var w=this.space.addStaticShape(new cp.BoxShape2(this.space.staticBody,new cp.BB((m.getPosition().x)+ad/3,m.getPosition().y,m.getPosition().x+ad/2,m.getPosition().y+ad/4)));w.sensor=true;w.idName="Jump";w.spriteRef=m}if("speed" in R[W]){var m=A.getTileAt(cc.p(af,ag));var w=this.space.addStaticShape(new cp.BoxShape2(this.space.staticBody,new cp.BB((m.getPosition().x)+ad/3,m.getPosition().y,m.getPosition().x+ad/2,m.getPosition().y+ad/4)));w.sensor=true;w.idName="Speed";if(m&&CALLIE_GAME.characterSelected=="toby"){var q=new cc.Sprite("#popcorn_tobyboost.png");q.setAnchorPoint(0,0);q.setPosition(cc.p(m.getPosition().x,m.getPosition().y));this.addChild(q);m.removeFromParent();w.spriteRef=q}else{var q=new cc.Sprite("#carrot.png");q.setAnchorPoint(0,0);q.setPosition(cc.p(m.getPosition().x,m.getPosition().y));this.addChild(q);m.removeFromParent();w.spriteRef=q}}if("movable" in R[W]){var m=A.getTileAt(cc.p(af,ag));if(m){var aj;if(R[W]["material"]=="wood"){t=new cc.PhysicsSprite("#crate.png")}else{t=new cc.PhysicsSprite("#block.png")}var r=cc.size(64,64);r.width/=2.2;r.height/=2.2;var ab=0.5;var ai=[-r.width,-r.height,-r.width,r.height,r.width,r.height,r.width,-r.height];var e=new cp.Body(ab,cp.momentForPoly(ab,ai,cp.v(-10,0)));e.p=cc.p(m.getPosition().x,m.getPosition().y+20);this.space.addBody(e);var P=new cp.PolyShape(e,ai,cp.v(0,0));this.space.addShape(P);P.setElasticity(0.01);P.setFriction(10);P.idName="Movable";if(R[W]["material"]=="wood"){P.material="Wood"}if(R[W]["material"]=="stone"){P.material="Stone"}P.spriteRef=t;t.setBody(e);this.addChild(t);m.removeFromParent(true)}}if("tumbleweed" in R[W]){var m=A.getTileAt(cc.p(af,ag));if(m){var t=new cc.PhysicsSprite("#tumbleweed.png");var r=cc.size(64,64);r.width/=2.2;r.height/=2.2;var ab=0.015;var ac=21;var e=new cp.Body(ab,cp.momentForCircle(ab,0,ac,cp.v(-10,0)));e.p=cc.p(m.getPosition().x,m.getPosition().y+20);this.space.addBody(e);var P=new cp.CircleShape(e,ac,cp.v(0,0));this.space.addShape(P);P.setElasticity(1);P.setFriction(10);P.idName="Tumbleweed";P.spriteRef=t;t.setBody(e);var B=new cp.SimpleMotor(e,this.space.staticBody,Math.PI);this.space.addConstraint(B);this.addChild(t);m.removeFromParent(true)}}if("flies" in R[W]){}if("pickup" in R[W]){var m=A.getTileAt(cc.p(af,ag));var Y=Math.round(Math.random()*(3-1)+1);var h="#object_"+o+Y+".png";var l=new cc.Sprite(h);l.anchorX=0;l.anchorY=0;var O=m.getPosition();O.x-=(l.getContentSize().width-64)/2;l.setPosition(O);this.addChild(l);var w=this.space.addStaticShape(new cp.BoxShape2(this.space.staticBody,new cp.BB(m.getPosition().x,m.getPosition().y,m.getPosition().x+ad,m.getPosition().y+ad)));w.sensor=true;w.idName="PickUp";w.spriteRef=l;var v=Math.random()*(0.5-0.25)+0.3;var d=10;l.runAction(cc.repeatForever(cc.sequence(cc.moveBy(v,cc.p(0,d)).easing(cc.easeSineInOut()),cc.moveBy(v,cc.p(0,-d)).easing(cc.easeSineInOut()))));m.removeFromParent()}}}}var r=cc.director.getWinSize();if(CALLIE_GAME.characterSelected=="callie"){cc.spriteFrameCache.addSpriteFrames(res.s_callieSpriteAnimationPlist);this.spriteSheetCallie=new cc.SpriteBatchNode(res.s_callieSpriteAnimationPNG);this.addChild(this.spriteSheetCallie);var I=[];for(var ae=1;ae<12;ae++){if(ae<10){var V="CallieSparky_run_v08_000"+ae+".png"}else{var V="CallieSparky_run_v08_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);I.push(a)}var am=new cc.Animation(I,0.042);var S=cc.repeatForever(cc.animate(am));S.tag=CALLIE_GAME.ACTION_TAGS.RUN;CALLIE_GAME.RUN_ACTION=S;var U=[];for(var ae=1;ae<12;ae++){if(ae<10){var V="CallieSparky_run_v08_000"+ae+".png"}else{var V="CallieSparky_run_v08_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);U.push(a)}CALLIE_GAME.JUMP_ACTION=cc.repeatForever(cc.animate(new cc.Animation(U,0.126)));CALLIE_GAME.JUMP_ACTION.tag=CALLIE_GAME.ACTION_TAGS.JUMP;var K=[];for(var ae=1;ae<22;ae++){if(ae<10){var V="calliSparky_idle_v02_000"+ae+".png"}else{var V="calliSparky_idle_v02_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);K.push(a)}for(var ae=1;ae<22;ae++){if(ae<10){var V="CallieSparky_Idle_blink_v02_000"+ae+".png"}else{var V="CallieSparky_Idle_blink_v02_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);K.push(a)}CALLIE_GAME.STAND_ACTION=cc.repeatForever(cc.animate(new cc.Animation(K,0.042)));CALLIE_GAME.STAND_ACTION.tag=CALLIE_GAME.ACTION_TAGS.IDLE;var F=[];for(var ae=1;ae<34;ae++){if(ae<10){var V="CallieSparky_runningHeadButt_v01_000"+ae+".png"}else{var V="CallieSparky_runningHeadButt_v01_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);F.push(a)}CALLIE_GAME.RAM_ACTION=cc.animate(new cc.Animation(F,0.042));CALLIE_GAME.RAM_ACTION.tag=CALLIE_GAME.ACTION_TAGS.RAM;this.callieOnHorseAnimation=new cc.Sprite(cc.spriteFrameCache.getSpriteFrame("CallieSparky_run_v08_0001.png"));this.callieOnHorseAnimation.setScale(0.7);this.callieOnHorseAnimation.setPosition(80,110)}if(CALLIE_GAME.characterSelected=="peck"){cc.spriteFrameCache.addSpriteFrames(res.s_peckSpriteAnimationPlist);this.spriteSheetCallie=new cc.SpriteBatchNode(res.s_peckSpriteAnimationPNG);this.addChild(this.spriteSheetCallie);var I=[];for(var ae=1;ae<12;ae++){if(ae<10){var V="PeckClementine_run_v01_000"+ae+".png"}else{var V="PeckClementine_run_v01_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);I.push(a)}var am=new cc.Animation(I,0.042);var S=cc.repeatForever(cc.animate(am));S.tag=CALLIE_GAME.ACTION_TAGS.RUN;CALLIE_GAME.RUN_ACTION=S;var U=[];for(var ae=1;ae<12;ae++){if(ae<10){var V="PeckClementine_run_v01_000"+ae+".png"}else{var V="PeckClementine_run_v01_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);U.push(a)}CALLIE_GAME.JUMP_ACTION=cc.repeatForever(cc.animate(new cc.Animation(U,0.126)));CALLIE_GAME.JUMP_ACTION.tag=CALLIE_GAME.ACTION_TAGS.JUMP;var K=[];for(var ae=1;ae<21;ae++){if(ae<10){var V="PeckClementine_Idle_v01_000"+ae+".png"}else{var V="PeckClementine_Idle_v01_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);K.push(a)}CALLIE_GAME.STAND_ACTION=cc.repeatForever(cc.animate(new cc.Animation(K,0.042)));CALLIE_GAME.STAND_ACTION.tag=CALLIE_GAME.ACTION_TAGS.IDLE;var F=[];for(var ae=1;ae<33;ae++){if(ae<10){var V="peckClementine_runningHeadButt_v01_000"+ae+".png"}else{var V="peckClementine_runningHeadButt_v01_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);F.push(a)}CALLIE_GAME.RAM_ACTION=cc.animate(new cc.Animation(F,0.042));CALLIE_GAME.RAM_ACTION.tag=CALLIE_GAME.ACTION_TAGS.RAM;this.callieOnHorseAnimation=new cc.Sprite(cc.spriteFrameCache.getSpriteFrame("PeckClementine_run_v01_0001.png"));this.callieOnHorseAnimation.setScale(0.7);this.callieOnHorseAnimation.setPosition(80,110)}if(CALLIE_GAME.characterSelected=="toby"){cc.spriteFrameCache.addSpriteFrames(res.s_tobySpriteAnimationPlist);this.spriteSheetCallie=new cc.SpriteBatchNode(res.s_tobySpriteAnimationPNG);this.addChild(this.spriteSheetCallie);var I=[];for(var ae=1;ae<17;ae++){if(ae<10){var V="Toby_run_v06_000"+ae+".png"}else{var V="Toby_run_v06_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);I.push(a)}var am=new cc.Animation(I,0.021);var S=cc.repeatForever(cc.animate(am));S.tag=CALLIE_GAME.ACTION_TAGS.RUN;CALLIE_GAME.RUN_ACTION=S;var U=[];for(var ae=1;ae<17;ae++){if(ae<10){var V="Toby_run_v06_000"+ae+".png"}else{var V="Toby_run_v06_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);U.push(a)}CALLIE_GAME.JUMP_ACTION=cc.repeatForever(cc.animate(new cc.Animation(U,0.126)));CALLIE_GAME.JUMP_ACTION.tag=CALLIE_GAME.ACTION_TAGS.JUMP;var K=[];for(var ae=1;ae<17;ae++){if(ae<10){var V="Toby_idle_v01_000"+ae+".png"}else{var V="Toby_idle_v01_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);K.push(a)}for(var ae=17;ae>1;ae--){if(ae<10){var V="Toby_idle_v01_000"+ae+".png"}else{var V="Toby_idle_v01_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);K.push(a)}for(var ae=1;ae<17;ae++){if(ae<10){var V="Toby_idle_blink_v01_000"+ae+".png"}else{var V="Toby_idle_blink_v01_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);K.push(a)}for(var ae=17;ae>1;ae--){if(ae<10){var V="Toby_idle_blink_v01_000"+ae+".png"}else{var V="Toby_idle_blink_v01_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);K.push(a)}var f=cc.animate(new cc.Animation(K,0.084));CALLIE_GAME.STAND_ACTION=cc.repeatForever(cc.sequence(f));CALLIE_GAME.STAND_ACTION.tag=CALLIE_GAME.ACTION_TAGS.IDLE;var F=[];for(var ae=1;ae<34;ae++){if(ae<10){var V="Toby_runningHeadButt_v01_000"+ae+".png"}else{var V="Toby_runningHeadButt_v01_00"+ae+".png"}var a=cc.spriteFrameCache.getSpriteFrame(V);F.push(a)}CALLIE_GAME.RAM_ACTION=cc.animate(new cc.Animation(F,0.042));CALLIE_GAME.RAM_ACTION.tag=CALLIE_GAME.ACTION_TAGS.RAM;this.callieOnHorseAnimation=new cc.Sprite(cc.spriteFrameCache.getSpriteFrame("Toby_run_v06_0001.png"));this.callieOnHorseAnimation.setScale(0.7);this.callieOnHorseAnimation.setPosition(80,138)}this.sprite=new cc.PhysicsSprite("#callieonhorse-animation_0.png");CALLIE_GAME.mainSprite=this.callieOnHorseAnimation;this.sprite.setOpacity(0);var Q=cc.size(167,186);var r=cc.size(44,44);var ab=4;var ai=[-r.width,-r.height,-r.width,r.height,r.width,r.height,r.width,-r.height];var ac;var D=0.1;if(CALLIE_GAME.characterSelected=="toby"){ac=Q.width/4;ab*=0.5;D=0.5;this.callieOnHorseAnimation.setPosition(80,128)}else{ac=Q.width/3}this.body=new cp.Body(ab,cp.momentForCircle(ab,0,ac,cp.v(0,0)));if(CALLIE_GAME.lastCharacterPosition&&CALLIE_GAME.badGuy!=0){this.body.p=CALLIE_GAME.lastCharacterPosition;CALLIE_GAME.lastCharacterPosition=null}else{this.body.p=this.startPoint}this.space.addBody(this.body);this.shape=new cp.CircleShape(this.body,ac,cp.v(0,0));this.shape.idName="Player";this.shape.setElasticity(D);this.space.addShape(this.shape);this.ramSensor=new cp.BoxShape2(this.body,new cp.BB(40,0,200,50));this.ramSensor.idName="RamSensor";this.ramSensor.sensor=true;this.space.addShape(this.ramSensor);this.sprite.setBody(this.body);this.sprite.addChild(this.callieOnHorseAnimation);this.addChild(this.sprite);var ak=L.getMapSize().width*ad;this.levelWidth=ak;var E=L.getMapSize().height*ad;var H=cc.director.getWinSize();var G=cc.p(H.width,H.height);var y=cc.pMult(G,0.5);var N=(y.x/2-this.startPoint.x);var J=(y.y/1.5-this.startPoint.y);if(J>0){J=0}var s=this.startPoint-100;pNode.setPosition(cc.p(-(s.x),J));pNode.runAction(cc.follow(this.sprite,cc.rect(70,0,ak,E)));this.levelRunning=true;cc.eventManager.addListener({prevTouchId:-1,event:cc.EventListener.TOUCH_ALL_AT_ONCE,onTouchesBegan:function(ap,ao){if(CALLIE_GAME.controlsOn==true){var aq=ap[0];var an=cc.p(aq.getLocationX(),aq.getLocationY());if(!ao.getCurrentTarget().jumping){ao.getCurrentTarget().jumping=true;ao.getCurrentTarget().jumpCount++;ao.getCurrentTarget().stopGallopSound();if(CALLIE_GAME.characterSelected=="toby"){if(ao.getCurrentTarget().jumpCount%5==0){var j=Math.floor((Math.random()*3)+1);if(!CALLIE_GAME.helpPlaying){createjs.Sound.play(res["s_sfx_toby_yay"+j+"_mp3"])}}if(!CALLIE_GAME.mainSprite.getActionByTag(CALLIE_GAME.ACTION_TAGS.IDLE)){ao.getCurrentTarget().body.applyImpulse(cp.v(0,CALLIE_GAME.jumpPower*105),cp.v(0,0))}else{ao.getCurrentTarget().body.applyImpulse(cp.v(-2000,CALLIE_GAME.jumpPower*105),cp.v(0,0))}}else{if(CALLIE_GAME.characterSelected=="callie"){if(ao.getCurrentTarget().jumpCount%5==0){if(!CALLIE_GAME.helpPlaying){createjs.Sound.play(res.s_sfx_sparky_neigh_mp3)}}ao.getCurrentTarget().body.applyImpulse(cp.v(0,CALLIE_GAME.jumpPower*100),cp.v(0,0))}else{if(CALLIE_GAME.characterSelected=="peck"){if(ao.getCurrentTarget().jumpCount%5==0){if(!CALLIE_GAME.helpPlaying){createjs.Sound.play(res.s_sfx_clementine_neigh_mp3)}}ao.getCurrentTarget().body.applyImpulse(cp.v(0,CALLIE_GAME.jumpPower*100),cp.v(0,0))}}}}else{if(!ao.getCurrentTarget().doubleJumping){ao.getCurrentTarget().doubleJumping=true;ao.getCurrentTarget().body.vy=0;ao.getCurrentTarget().body.applyImpulse(cp.v(0,CALLIE_GAME.doubleJumpPower*100),cp.v(0,0))}}if(!CALLIE_GAME.mainSprite.getActionByTag(CALLIE_GAME.ACTION_TAGS.JUMP)){if(!CALLIE_GAME.mainSprite.getActionByTag(CALLIE_GAME.ACTION_TAGS.STRAIGHTEN)&&CALLIE_GAME.mainSprite.getRotation()!=0){GameLayer.instance.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.ANGLE_UP,CALLIE_GAME.ACTION_TAGS.ANGLE_DOWN]);var k=cc.rotateTo(CALLIE_GAME.rotateSpeed,0).easing(cc.easeSineIn());k.tag=CALLIE_GAME.ACTION_TAGS.STRAIGHTEN;CALLIE_GAME.mainSprite.runAction(k)}GameLayer.instance.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.RUN,CALLIE_GAME.ACTION_TAGS.JUMP,CALLIE_GAME.ACTION_TAGS.IDLE,CALLIE_GAME.ACTION_TAGS.RAM]);CALLIE_GAME.mainSprite.runAction(CALLIE_GAME.JUMP_ACTION)}if(!CALLIE_GAME.mainSprite.getActionByTag(CALLIE_GAME.ACTION_TAGS.STRAIGHTEN)&&CALLIE_GAME.mainSprite.getRotation()!=0){GameLayer.instance.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.ANGLE_UP,CALLIE_GAME.ACTION_TAGS.ANGLE_DOWN]);var k=cc.rotateTo(CALLIE_GAME.rotateSpeed,0).easing(cc.easeSineIn());k.tag=CALLIE_GAME.ACTION_TAGS.STRAIGHTEN;CALLIE_GAME.mainSprite.runAction(k)}}},onTouchesMoved:function(k,j){var an=k[0]},onTouchesEnded:function(k,j){}},this);if(!cc._renderContext._context&&CALLIE_GAME_MODE.lowFi!="true"){var n=cc.textureCache.addImage(res.s_particlePickup_png);this.pickupEmitterBatchNode=new cc.ParticleBatchNode(n,3000);this.pickupEmitter=new cc.ParticleSystem(res.s_particlePickup);this.pickupEmitter.autoRemoveOnFinish=true;this.pickupEmitterBatchNode.addChild(this.pickupEmitter);this.addChild(this.pickupEmitterBatchNode);var C=cc.textureCache.addImage(res.s_boxParticleTexture);this.boxEmitterBatchNode=new cc.ParticleBatchNode(C,500);this.boxEmitter=new cc.ParticleSystem(res.s_boxPlist);this.boxEmitter.autoRemoveOnFinish=true;this.boxEmitterBatchNode.addChild(this.boxEmitter);this.addChild(this.boxEmitterBatchNode);var X=cc.textureCache.addImage(res.s_stoneParticleTexture);this.stoneEmitterBatchNode=new cc.ParticleBatchNode(X,500);this.stoneEmitter=new cc.ParticleSystem(res.s_stonePlist);this.stoneEmitter.autoRemoveOnFinish=true;this.stoneEmitterBatchNode.addChild(this.stoneEmitter);this.addChild(this.stoneEmitterBatchNode);CALLIE_GAME.currentObjectDropPNG=res["s_object_"+o+"PNG"];var aa=cc.textureCache.addImage(CALLIE_GAME.currentObjectDropPNG);this.objectDropEmitterBatchNode=new cc.ParticleBatchNode(aa,100);this.objectDropEmitter=new cc.ParticleSystem(CALLIE_GAME.currentObjectDrop);this.objectDropEmitter.autoRemoveOnFinish=true;this.objectDropEmitterBatchNode.addChild(this.objectDropEmitter);this.addChild(this.objectDropEmitterBatchNode);var g=cc.textureCache.addImage(res.s_cactusParticleTexture);this.cactusEmitterBatchNode=new cc.ParticleBatchNode(g,100);this.cactusEmitter=new cc.ParticleSystem(res.s_cactusPlist);this.cactusEmitter.autoRemoveOnFinish=true;this.cactusEmitterBatchNode.addChild(this.cactusEmitter);this.addChild(this.cactusEmitterBatchNode);var x=cc.textureCache.addImage(res.s_tumbleweedParticleTexture);this.tumbleweedEmitterBatchNode=new cc.ParticleBatchNode(x,100);this.tumbleweedEmitter=new cc.ParticleSystem(res.s_tumbleweedPlist);this.tumbleweedEmitter.autoRemoveOnFinish=true;this.tumbleweedEmitterBatchNode.addChild(this.tumbleweedEmitter);this.addChild(this.tumbleweedEmitterBatchNode)}if(CALLIE_GAME.badGuy!=0){var M=cc.delayTime(4);var z=cc.callFunc(this.startGame,this);var al=cc.sequence(M,z);StatusLayer.instance.playCountdown();this.runAction(al)}else{if(CALLIE_GAME.useBitmapFonts=="true"){this.countLabel=new cc.LabelBMFont(CALLIE_GAME.strings.HOW_TO_PLAY,res.s_font_kengwin_gold_fnt);this.countLabel.setPosition(cc.director.getWinSize().width/2,cc.director.getWinSize().height-100);StatusLayer.instance.addChild(this.countLabel)}else{var T=new cc.FontDefinition();T.fontName=CALLIE_GAME.fontTitleName;T.fontSize=CALLIE_GAME.fontTitleSize;T.textAlign=cc.TEXT_ALIGNMENT_CENTER;T.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;T.fillStyle=cc.color(CALLIE_GAME.fontTitleColorRGB[0],CALLIE_GAME.fontTitleColorRGB[1],CALLIE_GAME.fontTitleColorRGB[2]);T.boundingWidth=800;T.boundingHeight=200;var u=new cc.LabelTTF(CALLIE_GAME.strings.HOW_TO_PLAY,T);u.setPosition(cc.director.getWinSize().width/2,cc.director.getWinSize().height-100);StatusLayer.instance.addChild(u)}var M=cc.delayTime(2);var z=cc.callFunc(this.startGame,this);var al=cc.sequence(M,z);this.runAction(al)}var b=res["s_mx_sidescroller_loop_"+((CALLIE_GAME.numberOfPlays%4!=0)?CALLIE_GAME.numberOfPlays%4:1)+"_mp3"];if(CALLIE_GAME.musicTrack.src){CALLIE_GAME.musicTrack.stop()}CALLIE_GAME.musicTrack=createjs.Sound.play(b,{loop:-1});CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume);if(CALLIE_GAME.pickupItem=="corn"){VO.play(res.s_cal010_mp3)}if(CALLIE_GAME.pickupItem=="coal"){VO.play(res.s_cal011_mp3)}if(CALLIE_GAME.pickupItem=="milk"){VO.play(res.s_cal012_mp3)}if(CALLIE_GAME.pickupItem=="package"){VO.play(res.s_cal013_mp3)}if(CALLIE_GAME.pickupItem=="money"){VO.play(res.s_cal014_mp3)}if(CALLIE_GAME.pickupItem=="flower"){VO.play(res.s_cal015_mp3)}return true},updateProgress:function(){var a=cc.delayTime(0.04);var c=cc.callFunc(this.updateProgress,this);var d=cc.sequence(a,c);this.runAction(d);var b=Math.round((this.sprite.getPosition().x/this.levelEndX)*480);this.sLayer.setProgress(b)},startGame:function(){if(CALLIE_GAME.badGuy>0){CALLIE_GAME.controlsOn=true}this.callieOnHorseAnimation.setOpacity(255);this.scheduleUpdate();if(CALLIE_GAME.badGuy==0){if("touches" in cc.sys.capabilities&&cc.sys.os!="Windows"){var b=ccs.load(res.s_taphelp_json);this.sLayer.addChild(b.node);var a=b.action;a.play("demo",false);b.node.stopAllActions();b.node.runAction(a);this.helpOverlay=b}else{var b=ccs.load(res.s_clickhelp_json);this.sLayer.addChild(b.node);var a=b.action;a.play("demo",false);b.node.stopAllActions();b.node.runAction(a);this.helpOverlay=b}}},stopGallopSound:function(){if(this.gallopSound){this.gallopSound.stop()}},startGallopSound:function(){this.stopGallopSound();if(!CALLIE_GAME.helpPlaying){if(CALLIE_GAME.characterSelected=="callie"){this.gallopSound=createjs.Sound.play(res.s_sfx_gallop2_mp3,{loop:-1})}if(CALLIE_GAME.characterSelected=="peck"){this.gallopSound=createjs.Sound.play(res.s_sfx_gallop1_mp3,{loop:-1})}if(CALLIE_GAME.characterSelected=="toby"){this.gallopSound=createjs.Sound.play(res.s_sfx_toby_run_mp3,{loop:-1})}}CALLIE_GAME.gallopSound=this.gallopSound},removeItem:function(d,a){this.space.removeShape(a);var b=d.getPosition();d.removeFromParent();this.space.removeBody(d.body);if(a.material=="Wood"){if(!cc._renderContext._context&&CALLIE_GAME_MODE.lowFi!="true"){var c=this.boxEmitter.clone();c.x=b.x+25;c.y=b.y+50;c.autoRemoveOnFinish=true;this.boxEmitterBatchNode.addChild(c)}}if(a.material=="Stone"){if(!cc._renderContext._context&&CALLIE_GAME_MODE.lowFi!="true"){var c=this.stoneEmitter.clone();c.x=b.x+25;c.y=b.y+50;c.autoRemoveOnFinish=true;this.stoneEmitterBatchNode.addChild(c)}}},removePickup:function(b,a){this.space.removeShape(a);b.removeFromParent()},stopActions:function(b,a){for(i=0;i<a.length;i++){if(b.getNumberOfRunningActions()>0){if(b.getActionByTag(a[i])){b.stopAction(b.getActionByTag(a[i]))}}}},collisionBegin:function(l,a){if(l.a.idName=="RamSensor"&&l.b.idName=="Movable"){if(!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.RAM)){this.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.JUMP,CALLIE_GAME.ACTION_TAGS.RUN,CALLIE_GAME.ACTION_TAGS.IDLE]);this.callieOnHorseAnimation.runAction(CALLIE_GAME.RAM_ACTION)}}if(l.a.idName=="Player"&&l.b.idName=="Block"){if(!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.RUN)&&!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.RAM)&&this.body.vx>this.minimumSpeed){this.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.JUMP,CALLIE_GAME.ACTION_TAGS.RUN,CALLIE_GAME.ACTION_TAGS.IDLE]);this.callieOnHorseAnimation.runAction(CALLIE_GAME.RUN_ACTION);this.startGallopSound()}this.jumping=false;this.doubleJumping=false;var d=null;if(l.b.straight){if(!CALLIE_GAME.mainSprite.getActionByTag(CALLIE_GAME.ACTION_TAGS.STRAIGHTEN)){this.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.ANGLE_UP,CALLIE_GAME.ACTION_TAGS.ANGLE_DOWN]);var n=cc.rotateTo(CALLIE_GAME.rotateSpeed,0);n.tag=CALLIE_GAME.ACTION_TAGS.STRAIGHTEN;CALLIE_GAME.mainSprite.runAction(n)}}if(l.b.angleUp){if(!CALLIE_GAME.mainSprite.getActionByTag(CALLIE_GAME.ACTION_TAGS.ANGLE_UP)){this.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.ANGLE_DOWN,CALLIE_GAME.ACTION_TAGS.STRAIGHTEN]);var n=cc.rotateTo(CALLIE_GAME.rotateSpeed,-45);n.tag=CALLIE_GAME.ACTION_TAGS.ANGLE_UP;CALLIE_GAME.mainSprite.runAction(n)}}if(l.b.angleDown){if(!CALLIE_GAME.mainSprite.getActionByTag(CALLIE_GAME.ACTION_TAGS.ANGLE_DOWN)){this.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.ANGLE_UP,CALLIE_GAME.ACTION_TAGS.STRAIGHTEN]);var n=cc.rotateTo(CALLIE_GAME.rotateSpeed,45);n.tag=CALLIE_GAME.ACTION_TAGS.ANGLE_DOWN;CALLIE_GAME.mainSprite.runAction(n);CALLIE_GAME.mainSprite.lastAngle="down"}}}if(l.a.idName=="Player"&&l.b.idName=="Movable"){if(!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.RUN)&&!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.RAM)&&this.body.vx>this.minimumSpeed){this.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.JUMP,CALLIE_GAME.RUN_ACTION,CALLIE_GAME.IDLE]);this.callieOnHorseAnimation.runAction(CALLIE_GAME.RUN_ACTION);this.startGallopSound()}this.jumping=false;this.doubleJumping=false;var h=cc.delayTime(0.15);var c=cc.callFunc(this.removeItem,this,l.b);var f=cc.sequence(h,c);if(!l.b.removeList){l.b.removeList=true;l.b.spriteRef.runAction(f)}if(!CALLIE_GAME.helpPlaying){if(l.b.material=="Stone"){if(this.blockSound){this.blockSound.stop()}this.blockSound=createjs.Sound.play(res.s_sfx_smash_block_mp3)}if(l.b.material=="Wood"){if(this.blockSound){this.blockSound.stop()}this.blockSound=createjs.Sound.play(res.s_sfx_smash_cactus_mp3)}if(this.speedSound){if(this.speedSound.playState=="playFinished"){if(CALLIE_GAME.characterSelected=="callie"){this.speedSound.stop();this.speedSound=createjs.Sound.play(res.s_sfx_callie_whooee_mp3)}if(CALLIE_GAME.characterSelected=="toby"){this.speedSound.stop();this.speedSound=createjs.Sound.play(res.s_sfx_toby_yay1_mp3)}if(CALLIE_GAME.characterSelected=="peck"){this.speedSound.stop();this.speedSound=createjs.Sound.play(res.s_sfx_peck_woohoo_mp3)}}}else{if(CALLIE_GAME.characterSelected=="callie"){if(this.speedSound){this.speedSound.stop()}this.speedSound=createjs.Sound.play(res.s_sfx_callie_whooee_mp3)}if(CALLIE_GAME.characterSelected=="toby"){if(this.speedSound){this.speedSound.stop()}this.speedSound=createjs.Sound.play(res.s_sfx_toby_yay1_mp3)}if(CALLIE_GAME.characterSelected=="peck"){if(this.speedSound){this.speedSound.stop()}this.speedSound=createjs.Sound.play(res.s_sfx_peck_woohoo_mp3)}}}}if(l.a.idName=="Player"&&l.b.idName=="FloatBlock"){}if(l.a.idName=="Player"&&l.b.idName=="PickUp"){if(!cc._renderContext._context&&CALLIE_GAME_MODE.lowFi!="true"){var b=this.pickupEmitter.clone();b.x=l.b.spriteRef.getPositionX()+25;b.y=l.b.spriteRef.getPositionY()+50;b.autoRemoveOnFinish=true;this.pickupEmitterBatchNode.addChild(b)}l.b.spriteRef.removeFromParent();this.sLayer.addChild(l.b.spriteRef);l.b.spriteRef.setPosition(250,120);l.b.spriteRef.setScale(this.getParent().getParent().getScale());l.b.spriteRef.runAction(cc.moveTo(0.5,cc.p(30,432)).easing(cc.easeSineIn(0.3)));l.b.spriteRef.runAction(cc.fadeOut(1));l.b.spriteRef.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(this.removePickup,this,l.b)));if(!CALLIE_GAME.helpPlaying){CALLIE_GAME.itemsCollected++;this.sLayer.labelCoin.setString(CALLIE_GAME.itemsCollected)}if(!CALLIE_GAME.helpPlaying){if(this.collectSound){this.collectSound.stop()}this.collectSound=createjs.Sound.play(res.s_sfx_item_collect_mp3);if(CALLIE_GAME.characterSelected=="callie"){if(CALLIE_GAME.itemsCollected%9==0){var j=[res.s_cal015a_mp3,res.s_cal015b_mp3,res.s_cal015c_mp3,res.s_cal015d_mp3];var m=Math.floor((Math.random()*j.length));createjs.Sound.play(j[m])}}}}if(l.a.idName=="Player"&&l.b.idName=="Obstacle"){if(!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.BLINK_TAG)){if(CALLIE_GAME.characterSelected!="toby"){var o=cc.blink(1,75);o.tag=CALLIE_GAME.ACTION_TAGS.BLINK_TAG;this.callieOnHorseAnimation.runAction(o);CALLIE_GAME.itemsCollected-=CALLIE_GAME.obstaclePenalty;if(CALLIE_GAME.itemsCollected<0){CALLIE_GAME.itemsCollected=0}this.sLayer.labelCoin.setString(CALLIE_GAME.itemsCollected);if(!cc._renderContext._context&&CALLIE_GAME_MODE.lowFi!="true"){var b=this.objectDropEmitter.clone();b.x=l.b.spriteRef.getPositionX()+25;b.y=l.b.spriteRef.getPositionY()+50;b.autoRemoveOnFinish=true;this.objectDropEmitterBatchNode.addChild(b)}if(CALLIE_GAME.characterSelected=="callie"){var j=[res.s_cal015e_mp3,res.s_cal015f_mp3,res.s_cal015g_mp3];var m=Math.floor((Math.random()*j.length));if(!CALLIE_GAME.helpPlaying){createjs.Sound.play(j[m])}}if(!CALLIE_GAME.helpPlaying){createjs.Sound.play(res.s_sfx_item_bad_mp3)}}else{if(!cc._renderContext._context&&CALLIE_GAME_MODE.lowFi!="true"){var b=this.cactusEmitter.clone();b.x=l.b.spriteRef.getPositionX()+25;b.y=l.b.spriteRef.getPositionY()+50;b.autoRemoveOnFinish=true;this.cactusEmitterBatchNode.addChild(b);l.b.spriteRef.removeFromParent()}if(!CALLIE_GAME.helpPlaying){createjs.Sound.play(res.s_sfx_smash_cactus_mp3)}}}}if(l.b.idName=="Player"&&l.a.idName=="Tumbleweed"){var k=l.a;if(!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.BLINK_TAG)){if(CALLIE_GAME.characterSelected!="peck"){var o=cc.blink(1,75);o.tag=CALLIE_GAME.ACTION_TAGS.BLINK_TAG;this.callieOnHorseAnimation.runAction(o);CALLIE_GAME.itemsCollected-=CALLIE_GAME.obstaclePenalty;if(CALLIE_GAME.itemsCollected<0){CALLIE_GAME.itemsCollected=0}this.sLayer.labelCoin.setString(CALLIE_GAME.itemsCollected);if(!cc._renderContext._context&&CALLIE_GAME_MODE.lowFi!="true"){var b=this.objectDropEmitter.clone();b.x=k.spriteRef.getPositionX()+25;b.y=k.spriteRef.getPositionY()+50;b.autoRemoveOnFinish=true;this.objectDropEmitterBatchNode.addChild(b)}if(!CALLIE_GAME.helpPlaying){createjs.Sound.play(res.s_sfx_item_bad_mp3)}}else{if(!cc._renderContext._context&&CALLIE_GAME_MODE.lowFi!="true"){var b=this.tumbleweedEmitter.clone();b.x=k.spriteRef.getPositionX()+25;b.y=k.spriteRef.getPositionY()+50;b.autoRemoveOnFinish=true;this.tumbleweedEmitterBatchNode.addChild(b);k.spriteRef.removeFromParent()}if(!CALLIE_GAME.helpPlaying){createjs.Sound.play(res.s_sfx_smash_tumbleweed_mp3)}}}}if(l.a.idName=="Player"&&l.b.idName=="Jump"&&localStorage.tutorialPlayed=="true"){if(!CALLIE_GAME.mainSprite.getActionByTag(CALLIE_GAME.ACTION_TAGS.JUMP)){if(!CALLIE_GAME.mainSprite.getActionByTag(CALLIE_GAME.ACTION_TAGS.STRAIGHTEN)&&CALLIE_GAME.mainSprite.getRotation()!=0){GameLayer.instance.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.ANGLE_UP,CALLIE_GAME.ACTION_TAGS.ANGLE_DOWN]);var n=cc.rotateTo(CALLIE_GAME.rotateSpeed,0).easing(cc.easeSineIn());n.tag=CALLIE_GAME.ACTION_TAGS.STRAIGHTEN;CALLIE_GAME.mainSprite.runAction(n)}GameLayer.instance.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.RUN,CALLIE_GAME.ACTION_TAGS.JUMP,CALLIE_GAME.ACTION_TAGS.IDLE]);CALLIE_GAME.mainSprite.runAction(CALLIE_GAME.JUMP_ACTION)}this.jumping=true;this.body.applyImpulse(cp.v(0,CALLIE_GAME.jumpPower*100),cp.v(0,0));if(!CALLIE_GAME.helpPlaying){this.stopGallopSound();if(CALLIE_GAME.characterSelected=="toby"){var m=Math.floor((Math.random()*3)+1);createjs.Sound.play(res["s_sfx_toby_yay"+m+"_mp3"])}else{if(CALLIE_GAME.characterSelected=="callie"){createjs.Sound.play(res.s_sfx_sparky_neigh_mp3)}else{if(CALLIE_GAME.characterSelected=="peck"){createjs.Sound.play(res.s_sfx_clementine_neigh_mp3)}}}}var e=this.helpOverlay.action;e.play("demo",false);this.helpOverlay.node.stopAllActions();this.helpOverlay.node.runAction(e)}if(l.a.idName=="Player"&&l.b.idName=="End"){if(!this.endStarted){this.endStarted=true;CALLIE_GAME.controlsOn=false;this.levelRunning=false;this.body.vx=0;this.body.vy=0;this.space.damping=0.05;if(!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.IDLE)){GameLayer.instance.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.RUN,CALLIE_GAME.ACTION_TAGS.JUMP]);this.callieOnHorseAnimation.runAction(CALLIE_GAME.STAND_ACTION);this.stopGallopSound();this.callieOnHorseAnimation.visible=true}if(CALLIE_GAME.badGuy!=0){VO.unlock();VO.play(res.s_cal016_mp3,function(){this.playCaptureSequence()},this)}else{cc.log("tut end");CALLIE_GAME.helpPlaying=false;VO.play(res.s_cal023_mp3,function(){this.playCaptureSequence()},this)}this.stopGallopSound()}}if(l.a.idName=="Player"&&l.b.idName=="Speed"){var g=(CALLIE_GAME.runSpeed*10)*(CALLIE_GAME.speedBoostAmount);this.body.applyImpulse(cp.v(g,0),cp.v(0,0));if(this.body.vx>this.maximumSpeed){this.body.vx=this.maximumSpeed}l.b.spriteRef.removeFromParent();if(!CALLIE_GAME.helpPlaying){if(this.speedSound){if(this.speedSound.playState=="playFinished"){if(CALLIE_GAME.characterSelected=="callie"){var m=Math.floor((Math.random()*2)+1);if(m%2==0){this.speedSound.stop();this.speedSound=createjs.Sound.play(res.s_sfx_callie_yeehaw_mp3)}else{this.speedSound.stop();this.speedSound=createjs.Sound.play(res.s_sfx_callie_whooee_mp3)}}if(CALLIE_GAME.characterSelected=="toby"){this.speedSound.stop();this.speedSound=createjs.Sound.play(res.s_sfx_toby_boost_mp3)}if(CALLIE_GAME.characterSelected=="peck"){var m=Math.floor((Math.random()*2)+1);if(m%2==0){if(this.speedSound){this.speedSound.stop()}this.speedSound=createjs.Sound.play(res.s_sfx_peck_woohoo_mp3)}else{if(this.speedSound){this.speedSound.stop()}this.speedSound=createjs.Sound.play(res.s_sfx_peck_ohyeah_mp3)}}}}else{if(CALLIE_GAME.characterSelected=="callie"){var m=Math.floor((Math.random()*2)+1);if(m%2==0){if(this.speedSound){this.speedSound.stop()}this.speedSound=createjs.Sound.play(res.s_sfx_callie_yeehaw_mp3)}else{if(this.speedSound){this.speedSound.stop()}this.speedSound=createjs.Sound.play(res.s_sfx_callie_whooee_mp3)}}if(CALLIE_GAME.characterSelected=="toby"){if(this.speedSound){this.speedSound.stop()}this.speedSound=createjs.Sound.play(res.s_sfx_toby_boost_mp3)}if(CALLIE_GAME.characterSelected=="peck"){var m=Math.floor((Math.random()*2)+1);if(m%2==0){if(this.speedSound){this.speedSound.stop()}this.speedSound=createjs.Sound.play(res.s_sfx_peck_woohoo_mp3)}else{if(this.speedSound){this.speedSound.stop()}this.speedSound=createjs.Sound.play(res.s_sfx_peck_ohyeah_mp3)}}}}}return true},playCaptureSequence:function(){var m=ccs.load(res.s_ScorePopup_JSON);if(CALLIE_GAME.useBitmapFonts=="true"){m.node.getChildByName("title").setString(CALLIE_GAME.strings.GREAT_JOB)}else{var g=new cc.FontDefinition();g.fontName=CALLIE_GAME.fontTitleName;g.fontSize=CALLIE_GAME.fontTitleSize;g.textAlign=cc.TEXT_ALIGNMENT_CENTER;g.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;g.fillStyle=cc.color(CALLIE_GAME.fontTitleColorRGB[0],CALLIE_GAME.fontTitleColorRGB[1],CALLIE_GAME.fontTitleColorRGB[2]);g.boundingWidth=800;g.boundingHeight=300;var l=m.node.getChildByName("title");var d=new cc.LabelTTF(CALLIE_GAME.strings.GREAT_JOB,g);d.setPosition(l.getPositionX(),l.getPositionY()-5);l.getParent().addChild(d);l.removeFromParent(true);d.setName("sortTitle")}this.scorePopup=m.node;var j=m.node.getChildByName("scoreItems");var a=m.node.getChildByName("itemCount");var c=m.node.getChildByName("nuggetCount");var n=m.node.getChildByName("nextButton");if(CALLIE_GAME.pickupItem!="corn"){var k=cc.textureCache.addImage("media/images/score_"+CALLIE_GAME.pickupItem+".png");var f=new cc.SpriteFrame(k,cc.rect(0,0,k.getContentSize().width,k.getContentSize().height));j.setSpriteFrame(f)}this.sLayer.addChild(m.node);this.nuggetCount=c;this.oldNuggetTotal=CALLIE_GAME.nuggets;if(localStorage["badguy"+CALLIE_GAME.badGuy+"_complete"]!="true"){CALLIE_GAME.nuggets+=5;localStorage.nuggetCount=CALLIE_GAME.nuggets}if(CALLIE_GAME.nuggets>=50){var o={};o.action="nuggets_50";window.trackGameEvent(o)}else{if(CALLIE_GAME.nuggets>=40){var o={};o.action="nuggets_40";window.trackGameEvent(o)}else{if(CALLIE_GAME.nuggets>=30){var o={};o.action="nuggets_30";window.trackGameEvent(o)}else{if(CALLIE_GAME.nuggets>=20){var o={};o.action="nuggets_20";window.trackGameEvent(o)}else{if(CALLIE_GAME.nuggets>=10){var o={};o.action="nuggets_10";window.trackGameEvent(o)}else{if(CALLIE_GAME.nuggets>=5){var o={};o.action="nuggets_5";window.trackGameEvent(o)}}}}}}c.setString(this.oldNuggetTotal);if(localStorage["badguy"+CALLIE_GAME.badGuy+"_complete"]!="true"){VO.play(res.s_nar022a_mp3,function(){VO.play(res.s_nar023_mp3)},this.scoreItem);var h=cc.delayTime(0.25);var b=cc.callFunc(this.totalNuggets,this);var e=cc.sequence(h,b);c.runAction(e)}a.setString(CALLIE_GAME.itemsCollected);n.addTouchEventListener(function(p,q){if(q==0){CALLIE_GAME["badguy"+CALLIE_GAME.badGuy+"_complete"]=true;localStorage["badguy"+CALLIE_GAME.badGuy+"_complete"]=true;cc.director.purgeCachedData();CALLIE_GAME.RAM_ACTION=null;CALLIE_GAME.RUN_ACTION=null;CALLIE_GAME.STAND_ACTION=null;CALLIE_GAME.JUMP_ACTION=null;CALLIE_GAME.ACTION_TAGS=null;CALLIE_GAME.mainSprite=null;CALLIE_GAME.mapFile=null;GameLayer.instance=null;this.map00=CALLIE_GAME.map00=null;CALLIE_GAME.mapInfo=null;this.callieOnHorseAnimation=null;this.sprite=CALLIE_GAME.mainSprite=null;pNode=null;this.pickupEmitterBatchNode=null;this.pickupEmitter=null;this.boxEmitterBatchNode=null;this.boxEmitter=null;this.stoneEmitterBatchNode=null;this.stoneEmitter=null;CALLIE_GAME.currentObjectDropPNG=null;this.objectDropEmitterBatchNode=null;this.objectDropEmitter=null;this.cactusEmitterBatchNode=null;this.cactusEmitter=null;this.tumbleweedEmitterBatchNode=null;this.tumbleweedEmitter=null;StatusLayer.instance=null;this.sLayer=null;this.space=null;this.gallopSound=CALLIE_GAME.gallopSound=null;this.body=null;this.blockSound=null;this.speedSound=null;this.collectSound=null;StatusLayer.instance=null;VO.captionLayer=null;cc.game.hardRefresh(sort_resources,function(){cc.director.runScene(new CaptureSequence())})}},this)},totalNuggets:function(){if(this.oldNuggetTotal<CALLIE_GAME.nuggets){this.oldNuggetTotal++;this.nuggetCount.setString(this.oldNuggetTotal);var c=cc.delayTime(0.25);var a=cc.callFunc(this.totalNuggets,this);var d=cc.sequence(c,a);this.nuggetCount.runAction(d)}if(CALLIE_GAME_MODE.lowFi!="true"){var b=new cc.ParticleSystem(res.s_sparkle_plist);b.x=this.nuggetCount.getPositionX();b.y=this.nuggetCount.getPositionY();b.autoRemoveOnFinish=true;this.scorePopup.addChild(b)}},collisionPre:function(a,b){if(a.a.idName=="Player"&&a.b.idName=="FloatBlock"){if(a.getNormal(0).y>-0.7){a.ignore();return false}else{if(!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.RUN)&&!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.RAM)&&this.body.vx>this.minimumSpeed){GameLayer.instance.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.IDLE,CALLIE_GAME.ACTION_TAGS.JUMP,CALLIE_GAME.RUN_ACTION]);this.callieOnHorseAnimation.runAction(CALLIE_GAME.RUN_ACTION);this.startGallopSound()}this.jumping=false;this.doubleJumping=false}}if(a.b.idName=="Player"&&a.a.idName=="Tumbleweed"){a.ignore();return false}return true},collisionPost:function(a,b){},collisionSeparate:function(a,b){},scaleView:function(){var c=Math.abs((CALLIE_GAME.runSpeed*20)/this.body.vx);if(c>this.maxScale){c=this.maxScale}if(c<this.minScale){c=this.minScale}if(!this.scaleArray){this.scaleArray=[]}this.scaleArray.push(c);if(this.scaleArray.length>100){this.scaleArray.shift()}var b=0;for(var a=0;a<this.scaleArray.length;a++){b+=this.scaleArray[a]}b/=this.scaleArray.length;this.getParent().getParent().setScale(b)},update:function(a){if(this.levelRunning==true){this.scaleView();if(!this.jumping){if(this.body.vx<this.minimumSpeed){if(!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.IDLE)&&!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.RAM)){GameLayer.instance.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.RUN,CALLIE_GAME.ACTION_TAGS.JUMP]);this.callieOnHorseAnimation.runAction(CALLIE_GAME.STAND_ACTION);this.stopGallopSound();this.callieOnHorseAnimation.visible=true}}else{if(!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.RUN)&&!this.callieOnHorseAnimation.getActionByTag(CALLIE_GAME.ACTION_TAGS.RAM)){GameLayer.instance.stopActions(CALLIE_GAME.mainSprite,[CALLIE_GAME.ACTION_TAGS.IDLE,CALLIE_GAME.ACTION_TAGS.JUMP]);this.callieOnHorseAnimation.runAction(CALLIE_GAME.RUN_ACTION);this.startGallopSound()}}}if(this.body.vx<CALLIE_GAME.runSpeed*10){this.body.applyImpulse(cp.v(CALLIE_GAME.runSpeed*10-this.body.vx,0),cp.v(0,0))}}if(this.space){this.space.step(this.spaceStep)}},onEnter:function(){this._super();this.getParent().getParent().setScale(this.maxScale);this.spaceStep=1/cc.game.config[cc.game.CONFIG_KEY.frameRate]}});GameLayer.instance=null;var GameScene=cc.Scene.extend({onEnter:function(){this._super();var m=cc.director.getWinSize();if(!CALLIE_GAME.lastCharacterPosition&&CALLIE_GAME.badGuy!=0){if(CALLIE_GAME.numberOfPlays!="testing"){if(!CALLIE_GAME.numberOfPlays){CALLIE_GAME.numberOfPlays=0}CALLIE_GAME.numberOfPlays++;if(CALLIE_GAME.numberOfPlays<=2){var a=Math.floor((Math.random()*4)+1);res.mapTileVariation=CALLIE_GAME.numberOfPlays%2==0?1:2;res.s_dTilesSD=res["s_dTiles_Easy_"+a+"_1"];CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedEasy}if(CALLIE_GAME.numberOfPlays==3){var a=Math.floor((Math.random()*2)+1);res.mapTileVariation=CALLIE_GAME.numberOfPlays%2==0?1:2;res.s_dTilesSD=res["s_dTiles_Med_"+a+"_1"];CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedMed}if(CALLIE_GAME.numberOfPlays>=4){var a=Math.floor((Math.random()*2)+1);res.mapTileVariation=CALLIE_GAME.numberOfPlays%2==0?1:2;res.s_dTilesSD=res["s_dTiles_Hard_"+a+"_1"];CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedHard}}else{CALLIE_GAME.numberOfPlays=Math.floor((Math.random()*4)+1);res.mapTileVariation=CALLIE_GAME.numberOfPlays%2==0?1:2}CALLIE_GAME.mapFile=res.s_dTilesSD}else{CALLIE_GAME.mapFile=CALLIE_GAME.lastLevelName;cc.log("MAP FILE: "+CALLIE_GAME.mapFile)}if(res.mapTileVariation==2){var k=cc.loader.getRes(CALLIE_GAME.mapFile);var d=k.replace(/sd.png/g,"sd-1.png");CALLIE_GAME.map00=new cc.TMXTiledMap(d,"media/maps")}else{CALLIE_GAME.map00=new cc.TMXTiledMap(CALLIE_GAME.mapFile)}var e=0.04;mapInfoG=CALLIE_GAME.mapInfo;var c=mapInfoG.getTileSize().width;var f=(mapInfoG.getMapSize().width*c);if(CALLIE_GAME.characterSelected=="callie"){CALLIE_GAME.runSpeed*=1.2;CALLIE_GAME.jumpPower=CALLIE_GAME.jumpPowerBase;CALLIE_GAME.doubleJumpPower=CALLIE_GAME.doubleJumpPowerBase}if(CALLIE_GAME.characterSelected=="toby"){CALLIE_GAME.runSpeed*=0.75;CALLIE_GAME.jumpPower=CALLIE_GAME.jumpPowerBase*0.5;CALLIE_GAME.doubleJumpPower=CALLIE_GAME.doubleJumpPowerBase*0.5}if(CALLIE_GAME.characterSelected=="peck"){CALLIE_GAME.runSpeed*=0.95;CALLIE_GAME.jumpPower=CALLIE_GAME.jumpPowerBase;CALLIE_GAME.doubleJumpPower=CALLIE_GAME.doubleJumpPowerBase}if(CALLIE_GAME.numberOfPlays==1){CALLIE_GAME.currentBackground=res.s_BG1_dawn}if(CALLIE_GAME.numberOfPlays==2){CALLIE_GAME.currentBackground=res.s_BG1_noon}if(CALLIE_GAME.numberOfPlays==3){CALLIE_GAME.currentBackground=res.s_BG1_noon}if(CALLIE_GAME.numberOfPlays>=4){CALLIE_GAME.currentBackground=res.s_BG1_dusk}this.bgSprite=new cc.Sprite(CALLIE_GAME.currentBackground);var b=f*e;var g=b+cc.director.getWinSizeInPixels().width/cc.director.getContentScaleFactor();var j=g/this.bgSprite.getContentSize().width;this.bgSprite.setScale((j*1.5));this.bgSprite.anchorX=0;this.bgSprite.anchorY=0.25;pNode=new cc.ParallaxNode();pNode.addChild(this.bgSprite,1,cc.p(e,0.05),cc.p(-100,0));var h=new StatusLayer();gLayer=new GameLayer();pNode.addChild(gLayer,1,cc.p(1,1),cc.p(0,0));gLayer.sLayer=h;var l=new cc.Layer();l.setAnchorPoint(0.25,0.5);l.addChild(pNode);this.addChild(l);this.addChild(h);h.labelCoin.setString(CALLIE_GAME.itemsCollected);gLayer.sLayer=h;gLayer.updateProgress()}});var GameTutorialLayer=GameLayer.extend({playCaptureSequence:function(){CALLIE_GAME.controlsOn=true;localStorage.tutorialPlayed="true";CALLIE_GAME.badGuy=CALLIE_GAME.oldBadGuy;VO.unlock();var a=new GameScene();cc.director.runScene(a)}});GameTutorialLayer.instance=null;var GameTutorialScene=cc.Scene.extend({onEnter:function(){this._super();CALLIE_GAME.helpPlaying=true;var m=cc.director.getWinSize();localStorage.tutorialPlayed="true";CALLIE_GAME.mapFile=res.s_dTilesSD;CALLIE_GAME.map00=new cc.TMXTiledMap(CALLIE_GAME.mapFile);var c=0.04;var g=new cc.TMXMapInfo(CALLIE_GAME.mapFile);var b=g.getTileSize().width;var d=(g.getMapSize().width*b);if(!CALLIE_GAME.numberOfPlays){CALLIE_GAME.numberOfPlays=0}CALLIE_GAME.oldBadGuy=CALLIE_GAME.badGuy;CALLIE_GAME.badGuy=0;CALLIE_GAME.currentBackground=res.s_BG1_dawn;if(CALLIE_GAME.characterSelected=="callie"){CALLIE_GAME.runSpeed*=1.2;CALLIE_GAME.jumpPower=CALLIE_GAME.jumpPowerBase;CALLIE_GAME.doubleJumpPower=CALLIE_GAME.doubleJumpPowerBase}if(CALLIE_GAME.characterSelected=="toby"){CALLIE_GAME.runSpeed*=0.75;CALLIE_GAME.jumpPower=CALLIE_GAME.jumpPowerBase*0.5;CALLIE_GAME.doubleJumpPower=CALLIE_GAME.doubleJumpPowerBase*0.5}if(CALLIE_GAME.characterSelected=="peck"){CALLIE_GAME.runSpeed*=0.95;CALLIE_GAME.jumpPower=CALLIE_GAME.jumpPowerBase;CALLIE_GAME.doubleJumpPower=CALLIE_GAME.doubleJumpPowerBase}this.bgSprite=new cc.Sprite(CALLIE_GAME.currentBackground);var a=d*c;var e=a+cc.director.getWinSizeInPixels().width;var h=e/this.bgSprite.getContentSize().width;this.bgSprite.setScale(h*1.5);this.bgSprite.anchorX=0;this.bgSprite.anchorY=0.25;pNode=new cc.ParallaxNode();pNode.addChild(this.bgSprite,1,cc.p(c,0.05),cc.p(-100,0));var f=new StatusLayer();var k=new GameTutorialLayer();pNode.addChild(k,1,cc.p(1,1),cc.p(0,0));k.sLayer=f;var j=new cc.Layer();j.setAnchorPoint(0.25,0.5);j.addChild(pNode);this.addChild(j);if(localStorage.tutorialPlayed=="true"){CALLIE_GAME.controlsOn=false}var l=new ccui.Button();l.loadTextures(res.skip_btn,res.skip_btn,res.skip_btn);l.setScale(0.65);l.setPosition(837.5,89);f.addChild(l);l.addTouchEventListener(function(n,o){if(o==0){GameTutorialLayer.instance=null;CALLIE_GAME.mapFile=null;CALLIE_GAME.map00=null;cc.director.purgeCachedData();cc.game.hardRefresh(g_resources,function(){var p={};p.action="help_skip";window.trackGameEvent(p);CALLIE_GAME.helpPlaying=false;localStorage.tutorialPlayed="true";VO.unlock();CALLIE_GAME.badGuy=CALLIE_GAME.oldBadGuy;var q=new GameScene();cc.director.runScene(q)})}},this);l.rolloverSound=titleRes.s_nar030_mp3;setupMouseOvers([l],this);this.addChild(f);k.sLayer=f;VO.play(res.s_nar017_mp3,function(){VO.unlock();VO.play(res.s_nar018_mp3,function(){VO.unlock();VO.play(res.s_nar019_mp3,function(){VO.unlock();VO.play(res.s_nar020_mp3,function(){VO.unlock()},this,true)},this,true)},this,true)},this,true)}});var IntroBSequence=cc.Layer.extend({labelCoin:null,labelMeter:null,coins:0,ctor:function(){this._super();this.init()},finished:function(){cc.director.runScene(new ChooseCharacterScene())},init:function(){this._super();var e=cc.director.getWinSize();VO.captionLayer=this;if(CALLIE_GAME_MODE.lowFi!="true"){var a=ccs.load(titleRes.s_intro_b_json);var g=a.node;this.addChild(g);var f=g.getChildByName("skipButton");f.addTouchEventListener(this.touchEvent,this);setupMouseOvers([f],this);var d=a.action;d.startWithTarget(g);d.play("intro",false);g.runAction(d);if(CALLIE_GAME.musicTrack.src){CALLIE_GAME.musicTrack.stop()}CALLIE_GAME.musicTrack=createjs.Sound.play(titleRes.s_mx_introB_mp3);CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume)}else{var c=new cc.Sprite("media/images/introb.jpg");c.setAnchorPoint(0,0);this.addChild(c);var b=new ccui.Button();b.loadTextures(res.skip_btn,res.skip_btn,res.skip_btn);b.setScale(0.75);b.setPosition(878,409);this.addChild(b);b.addTouchEventListener(this.touchEvent,this);setupMouseOvers([b],this)}VO.play(titleRes.s_cal003_mp3,this.finished,this)},touchEvent:function(b,c){var a={};a.action="story_skip";window.trackGameEvent(a);VO.captionLayer=null;cc.director.runScene(new ChooseCharacterScene())}});var IntroBSequenceScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new IntroBSequence();this.addChild(b)}});var IntroSequence=cc.Layer.extend({labelCoin:null,labelMeter:null,coins:0,ctor:function(){this._super();this.init()},finished:function(){cc.director.runScene(new IntroBSequenceScene())},init:function(){this._super();var e=cc.director.getWinSize();VO.captionLayer=this;if(CALLIE_GAME_MODE.lowFi!="true"){var a=ccs.load(titleRes.s_introSequence);var g=a.node;this.addChild(g);var f=g.getChildByName("skipButton");f.addTouchEventListener(this.touchEvent,this);f.rolloverSound=titleRes.s_nar030_mp3;setupMouseOvers([f],this);var d=a.action;d.startWithTarget(g);d.play("zoom",false);g.runAction(d)}else{var c=new cc.Sprite("media/images/introsequence.jpg");c.setAnchorPoint(0,0);this.addChild(c);var b=new ccui.Button();b.loadTextures(res.skip_btn,res.skip_btn,res.skip_btn);b.setScale(0.75);b.setPosition(878,409);this.addChild(b);b.addTouchEventListener(this.touchEvent,this);setupMouseOvers([b],this)}VO.play(titleRes.s_cal002_mp3,function(){this.finished();VO.unlock()},this,true)},touchEvent:function(b,c){var a={};a.action="story_skip";window.trackGameEvent(a);cc.director.runScene(new ChooseCharacterScene())}});var IntroSequenceScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new IntroSequence();this.addChild(b)}});var Jailhouse=cc.Layer.extend({labelCoin:null,labelMeter:null,coins:0,node:null,action:null,button1:null,button2:null,button3:null,button4:null,levelChosen:false,ctor:function(){this._super();this.init();this.levelChosen=false;VO.unlock()},finished:function(){},showMap:function(){if(!localStorage.mapSeen){localStorage.mapSeen=true;var b=cc.delayTime(1);var a=cc.callFunc(this.showMapHelp,this);var d=cc.sequence(b,a);this.runAction(d)}setupMouseOvers([this.button1,this.button2,this.button3,this.button4,this.mapNuggetButton,this.backButton,this.helpButton,this.nuggetButton,this.soundButton],this);var c=this.node.getChildByName("map");this.tAction.play("showMap",false);this.node.stopAllActions();this.node.runAction(this.tAction)},hideMap:function(){var a=this.node.getChildByName("map");this.tAction.play("hideMap",false);this.node.stopAllActions();this.node.runAction(this.tAction);setupMouseOvers([this.backButton,this.helpButton,this.nuggetButton,this.phoneHitArea,this.mapHitArea,this.photoFrame,this.soundButton],this);this.mapShowing=false},buyItem:function(a,c,d){if(!CALLIE_GAME[a]){var e=this.nuggetStore.getChildByName(c);if(CALLIE_GAME.nuggets>=e.string){CALLIE_GAME.nuggets-=e.string;this.storeNuggetCountBag.setString(CALLIE_GAME.nuggets);this.nuggetCount.setString(CALLIE_GAME.nuggets);CALLIE_GAME[a]=true;if(a=="unlockedPhone"){var b={};b.action="unlock_phone_store";window.trackGameEvent(b)}else{if(a=="unlockedPhoto"){var b={};b.action="unlock_picture_store";window.trackGameEvent(b)}else{if(a=="unlockedPrint"){var b={};b.action="unlock_badge_store";window.trackGameEvent(b)}else{if(a=="unlockedPeck"){var b={};b.action="unlock_peck_store";window.trackGameEvent(b)}else{if(a=="unlockedToby"){var b={};b.action="unlock_toby_store";window.trackGameEvent(b)}else{if(a=="unlockedPJs"){var b={};b.action="unlock_maze_store";window.trackGameEvent(b)}}}}}}e.setOpacity(0);this.nuggetStore.getChildByName(d).setOpacity(255);localStorage[a]=true;localStorage.nuggetCount=CALLIE_GAME.nuggets;createjs.Sound.play(jailhouseRes.s_store_purchase_mp3)}else{if(a=="unlockedPhone"){VO.play(jailhouseRes.s_nar016b_mp3);var b={};b.action="no_unlock_phone_store";window.trackGameEvent(b)}if(a=="unlockedPhoto"){VO.play(jailhouseRes.s_nar016b_mp3);var b={};b.action="no_unlock_picture_store";window.trackGameEvent(b)}if(a=="unlockedPrint"){var b={};b.action="no_unlock_badge_store";window.trackGameEvent(b);VO.play(jailhouseRes.s_nar016b_mp3)}if(a=="unlockedPeck"){var b={};b.action="no_unlock_peck_store";window.trackGameEvent(b);VO.play(jailhouseRes.s_nar016b_mp3)}if(a=="unlockedToby"){var b={};b.action="no_unlock_toby_store";window.trackGameEvent(b);VO.play(jailhouseRes.s_nar016b_mp3)}if(a=="unlockedPJs"){var b={};b.action="no_unlock_maze_store";window.trackGameEvent(b);VO.play(jailhouseRes.s_nar016b_mp3)}}}else{if(a=="unlockedPrint"){var b={};b.action="badge";window.trackGameEvent(b);window.open("media/images/localized/pdf/maze.pdf","pdf_win")}if(a=="unlockedPJs"){var b={};b.action="maze";window.trackGameEvent(b);window.open("media/images/localized/pdf/printable_badge.pdf","pdf_win")}}},restorePurchasedItem:function(a,b,c){if(a=="unlockedPhoto"){CALLIE_GAME.photoCount=localStorage.photoCount;var d=new cc.SpriteFrame(jailhouseRes["s_photo_"+CALLIE_GAME.photoCount],cc.rect(0,0,127,127));this.photoFrame.setSpriteFrame(d)}if(localStorage[a]){var e=this.nuggetStore.getChildByName(b);this.storeNuggetCountBag.setString(CALLIE_GAME.nuggets);this.nuggetCount.setString(CALLIE_GAME.nuggets);CALLIE_GAME[a]=true;e.setOpacity(0);this.nuggetStore.getChildByName(c).setOpacity(255)}},setupCallieOutfit:function(k,j){var m;m=k;var d=[];for(var e=0;e<100;e+=3){var a=new cc.SpriteFrame(jailhouseRes[m+"001"],cc.rect(0,0,928,430));d.push(a)}for(var e=1;e<115;e+=3){var h="test";if(e<10){h=jailhouseRes[m+"00"+e]}else{if(e<100){h=jailhouseRes[m+"0"+e]}else{h=jailhouseRes[m+""+e]}}var a=new cc.SpriteFrame(h,cc.rect(0,0,928,430));d.push(a)}var b=new cc.Animation(d,0.08);var p=cc.animate(b);var n=[];var g;g=j;for(var e=0;e<9;e++){var a=new cc.SpriteFrame(jailhouseRes[g+e],cc.rect(0,0,928,430));n.push(a)}var o=new cc.Animation(n,0.04);var l=cc.animate(o);var f=cc.delayTime(3.33);var c=cc.repeatForever(cc.sequence(l,p,l,f));this.callieSprite.stopAllActions();this.callieSprite.runAction(c)},init:function(){this._super();var n=cc.director.getWinSize();VO.captionLayer=this;var d=new Date(localStorage.lastDatePlayed);var E=new Date();if(E.getDate()>d.getDate()){for(var J=1;J<=4;J++){localStorage.removeItem(["badguy"+J+"_complete"])}localStorage.removeItem("wonOnce")}localStorage.lastDatePlayed=Date();var o=ccs.load(jailhouseRes.s_jailhouseScene);this.node=o.node;this.tAction=o.action;this.tAction.startWithTarget(this.node);this.addChild(this.node);if(CALLIE_GAME.useBitmapFonts=="true"){var x=this.node.getChildByName("screenTitle");x.setString(CALLIE_GAME.strings.CALLIES_OFFICE_TITLE);x.setScale(CALLIE_GAME.fontTitleSize/66);var D=this.node.getChildByName("NuggetStore").getChildByName("screenTitle");D.setString(CALLIE_GAME.strings.NUGGET_STORE_TITLE);D.setScale(CALLIE_GAME.fontTitleSize/66);var B=this.node.getChildByName("NuggetStore").getChildByName("funSubtitle");B.setString(CALLIE_GAME.strings.FUN_STUFF);B._labelBMFontRenderer.textAlign=cc.TEXT_ALIGNMENT_CENTER;B.setScale(CALLIE_GAME.fontTitleSize/165);var b=this.node.getChildByName("NuggetStore").getChildByName("printSubtitle");b.setString(CALLIE_GAME.strings.PRINT_OUTS);b._labelBMFontRenderer.textAlign=cc.TEXT_ALIGNMENT_CENTER;b.setScale(CALLIE_GAME.fontTitleSize/165);var A=this.node.getChildByName("NuggetStore").getChildByName("newSubtitle");A.setString(CALLIE_GAME.strings.NEW_CHARACTERS);A._labelBMFontRenderer.textAlign=cc.TEXT_ALIGNMENT_CENTER;A.setScale(CALLIE_GAME.fontTitleSize/165)}else{var v=new cc.FontDefinition();v.fontName=CALLIE_GAME.fontTitleName;v.fontSize=CALLIE_GAME.fontTitleSize;v.textAlign=cc.TEXT_ALIGNMENT_CENTER;v.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;v.fillStyle=cc.color(CALLIE_GAME.fontTitleColorRGB[0],CALLIE_GAME.fontTitleColorRGB[1],CALLIE_GAME.fontTitleColorRGB[2]);v.boundingWidth=800;v.boundingHeight=300;var h=new cc.FontDefinition();h.fontName="Kengwin";h.fontSize="46";h.textAlign=cc.TEXT_ALIGNMENT_CENTER;h.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;h.fillStyle=cc.color(251,245,142);h.boundingWidth=200;h.boundingHeight=100;this.kengwinFontDef=h;var x=this.node.getChildByName("screenTitle");var j=new cc.LabelTTF(CALLIE_GAME.strings.CALLIES_OFFICE_TITLE,v);j.setPosition(x.getPositionX(),x.getPositionY()-20);x.getParent().addChild(j);x.removeFromParent(true);j.setName("screenTitle");var F=this.node.getChildByName("NuggetStore").getChildByName("screenTitle");var a=new cc.LabelTTF(CALLIE_GAME.strings.NUGGET_STORE_TITLE,v);a.setPosition(F.getPositionX(),F.getPositionY()-20);F.getParent().addChild(a);F.removeFromParent();a.setName("screenTitle");var B=this.node.getChildByName("NuggetStore").getChildByName("funSubtitle");var z=new cc.LabelTTF(CALLIE_GAME.strings.FUN_STUFF,v);z.setFontSize(20);z.setPosition(B.getPositionX(),B.getPositionY()-10);B.getParent().addChild(z);B.removeFromParent();z.setName("funSubtitle");var b=this.node.getChildByName("NuggetStore").getChildByName("printSubtitle");var s=new cc.LabelTTF(CALLIE_GAME.strings.PRINT_OUTS,v);s.setFontSize(20);s.setPosition(b.getPositionX(),b.getPositionY()-10);b.getParent().addChild(s);b.removeFromParent();s.setName("printSubtitle");var A=this.node.getChildByName("NuggetStore").getChildByName("newSubtitle");var f=new cc.LabelTTF(CALLIE_GAME.strings.NEW_CHARACTERS,v);f.setFontSize(20);f.setPosition(A.getPositionX(),A.getPositionY()-10);A.getParent().addChild(f);A.removeFromParent();f.setName("newSubtitle")}this.callieSprite=this.node.getChildByName("callieSprite");this.phoneSprite=this.node.getChildByName("phone");this.mapHitArea=this.node.getChildByName("mapHitArea");this.phoneHitArea=this.node.getChildByName("phoneHitArea");this.photoFrame=this.node.getChildByName("photo");this.button1=this.node.getChildByName("map").getChildByName("bg1");this.button2=this.node.getChildByName("map").getChildByName("bg2");this.button3=this.node.getChildByName("map").getChildByName("bg3");this.button4=this.node.getChildByName("map").getChildByName("bg4");this.mapNuggetButton=this.node.getChildByName("map").getChildByName("nuggetButton");this.soundButton=this.node.getChildByName("soundButton");SoundButton.setup(this.soundButton,this);this.greenArrow1=this.node.getChildByName("map").getChildByName("greenArrow_1");this.greenArrow2=this.node.getChildByName("map").getChildByName("greenArrow_2");this.greenArrow3=this.node.getChildByName("map").getChildByName("greenArrow_3");this.greenArrow4=this.node.getChildByName("map").getChildByName("greenArrow_4");this.nuggetStore=this.node.getChildByName("NuggetStore");this.nuggetStore.setLocalZOrder(10);this.nuggetStore.setAnchorPoint(0.5,0.5);this.nuggetButton=this.node.getChildByName("nuggetButton");this.nuggetButton.addTouchEventListener(this.touchEvent,this);if(CALLIE_GAME.useBitmapFonts=="true"){this.storeNuggetCountBag=this.nuggetStore.getChildByName("nuggetCountBag");this.storeNuggetCountBag.setString(CALLIE_GAME.nuggets);this.nuggetStore.getChildByName("nuggetCostPhoto").setString(CALLIE_GAME.photoCost);this.nuggetStore.getChildByName("nuggetCostPJs").setString(CALLIE_GAME.pjsCost);this.nuggetStore.getChildByName("nuggetCostPhone").setString(CALLIE_GAME.phoneCost);this.nuggetStore.getChildByName("nuggetCostPrint").setString(CALLIE_GAME.printCost);this.nuggetStore.getChildByName("nuggetCostToby").setString(CALLIE_GAME.tobyCost);this.nuggetStore.getChildByName("nuggetCostPeck").setString(CALLIE_GAME.peckCost)}else{var g=this.nuggetStore.getChildByName("nuggetCountBag");var r=new cc.LabelTTF(CALLIE_GAME.nuggets,this.kengwinFontDef);r.setFontSize(64);r.setColor(cc.color(123,68,40));r.setPosition(g.getPosition());g.getParent().addChild(r);g.removeFromParent();this.storeNuggetCountBag=r;var G=this.nuggetStore.getChildByName("nuggetCostPhoto");var y=new cc.LabelTTF(CALLIE_GAME.photoCost,this.kengwinFontDef);y.setFontSize(32);y.setPosition(G.getPositionX(),G.getPositionY()-10);G.getParent().addChild(y);G.removeFromParent();y.setName("nuggetCostPhoto");var t=this.nuggetStore.getChildByName("nuggetCostPJs");var u=new cc.LabelTTF(CALLIE_GAME.pjsCost,this.kengwinFontDef);u.setFontSize(32);u.setPosition(t.getPositionX(),t.getPositionY()-10);t.getParent().addChild(u);t.removeFromParent();u.setName("nuggetCostPJs");var I=this.nuggetStore.getChildByName("nuggetCostPhone");var p=new cc.LabelTTF(CALLIE_GAME.phoneCost,this.kengwinFontDef);p.setFontSize(32);p.setPosition(I.getPositionX(),I.getPositionY()-10);I.getParent().addChild(p);I.removeFromParent();p.setName("nuggetCostPhone");var q=this.nuggetStore.getChildByName("nuggetCostPrint");var N=new cc.LabelTTF(CALLIE_GAME.printCost,this.kengwinFontDef);N.setFontSize(32);N.setPosition(q.getPositionX(),q.getPositionY()-10);q.getParent().addChild(N);q.removeFromParent();N.setName("nuggetCostPrint");var w=this.nuggetStore.getChildByName("nuggetCostToby");var e=new cc.LabelTTF(CALLIE_GAME.tobyCost,this.kengwinFontDef);e.setFontSize(32);e.setPosition(w.getPositionX(),w.getPositionY()-10);w.getParent().addChild(e);w.removeFromParent();e.setName("nuggetCostToby");var L=this.nuggetStore.getChildByName("nuggetCostPeck");var k=new cc.LabelTTF(CALLIE_GAME.peckCost,this.kengwinFontDef);k.setFontSize(32);k.setPosition(L.getPositionX(),L.getPositionY()-10);L.getParent().addChild(k);L.removeFromParent();k.setName("nuggetCostPeck")}if(CALLIE_GAME_MODE.lowFi!="true"){this.setupCallieOutfit("s_callie_idle_","s_callie_jailhouse_blink_")}this.nuggetStore.getChildByName("buttonPhoto").rolloverSound=jailhouseRes.s_nar013_mp3;this.nuggetStore.getChildByName("buttonPJs").rolloverSound=jailhouseRes.s_nar014_mp3;this.nuggetStore.getChildByName("buttonPhone").rolloverSound=jailhouseRes.s_nar012_mp3;this.nuggetStore.getChildByName("buttonToby").rolloverSound=jailhouseRes.s_nar016_mp3;this.nuggetStore.getChildByName("buttonPeck").rolloverSound=jailhouseRes.s_nar015_mp3;this.nuggetStore.getChildByName("buttonPrint").rolloverSound=jailhouseRes.s_nar014a_mp3;this.nuggetStore.getChildByName("buttonPhoto").addTouchEventListener(function(O,P){if(P==0){VO.play(jailhouseRes.s_nar013_mp3)}},this);this.nuggetStore.getChildByName("buttonPJs").addTouchEventListener(function(O,P){if(P==0){VO.play(jailhouseRes.s_nar014_mp3)}},this);this.nuggetStore.getChildByName("buttonPhone").addTouchEventListener(function(O,P){if(P==0){VO.play(jailhouseRes.s_nar012_mp3)}},this);this.nuggetStore.getChildByName("buttonPrint").addTouchEventListener(function(O,P){if(P==0){VO.play(jailhouseRes.s_nar014a_mp3)}},this);this.nuggetStore.getChildByName("buttonToby").addTouchEventListener(function(O,P){if(P==0){VO.play(jailhouseRes.s_nar016_mp3)}},this);this.nuggetStore.getChildByName("buttonPeck").addTouchEventListener(function(O,P){if(P==0){VO.play(jailhouseRes.s_nar015_mp3)}},this);this.nuggetStore.getChildByName("buttonPhotoBuy").addTouchEventListener(function(O,P){if(P==0){this.buyItem("unlockedPhoto","nuggetCostPhoto","checkPhoto")}},this);this.nuggetStore.getChildByName("buttonPJsBuy").addTouchEventListener(function(O,P){if(P==0){this.buyItem("unlockedPJs","nuggetCostPJs","checkPJs")}},this);this.nuggetStore.getChildByName("buttonPhoneBuy").addTouchEventListener(function(O,P){if(P==0){this.buyItem("unlockedPhone","nuggetCostPhone","checkPhone")}},this);this.nuggetStore.getChildByName("buttonPrintBuy").addTouchEventListener(function(O,P){if(P==0){this.buyItem("unlockedPrint","nuggetCostPrint","checkPrint")}},this);this.nuggetStore.getChildByName("buttonTobyBuy").addTouchEventListener(function(O,P){if(P==0){this.buyItem("unlockedToby","nuggetCostToby","checkToby")}},this);this.nuggetStore.getChildByName("buttonPeckBuy").addTouchEventListener(function(O,P){if(P==0){this.buyItem("unlockedPeck","nuggetCostPeck","checkPeck")}},this);this.nuggetStore.getChildByName("buttonClose").addTouchEventListener(function(O,P){if(P==0){this.hideShop();this.nuggetStoreShowing=false}},this);this.nuggetStore.getChildByName("funStuffButton").addTouchEventListener(function(O,P){if(P==0){VO.play(jailhouseRes.s_nar011c_mp3)}},this);this.nuggetStore.getChildByName("printOutsButton").addTouchEventListener(function(O,P){if(P==0){VO.play(jailhouseRes.s_nar011d_mp3)}},this);this.nuggetStore.getChildByName("charactersButton").addTouchEventListener(function(O,P){if(P==0){VO.play(jailhouseRes.s_nar011e_mp3)}},this);if(CALLIE_GAME.useBitmapFonts=="true"){this.nuggetCount=this.node.getChildByName("nuggetCount");this.nuggetCount.setString(CALLIE_GAME.nuggets)}else{var M=this.node.getChildByName("nuggetCount");var C=new cc.LabelTTF(CALLIE_GAME.nuggets,this.kengwinFontDef);C.setPosition(M.getPositionX(),M.getPositionY()-10);C.setFontSize(35);M.getParent().addChild(C);M.removeFromParent(true);this.nuggetCount=M}this.backButton=this.node.getChildByName("backButton");this.backButton.addTouchEventListener(this.goBack,this);this.helpButton=this.node.getChildByName("helpButton");this.helpButton.addTouchEventListener(function(O,P){if(P==2){if(this.mapShowing){this.showMapHelp()}else{if(this.nuggetStoreShowing){VO.play(jailhouseRes.s_nar011a_mp3,function(){VO.play(jailhouseRes.s_nar011b_mp3)},this)}else{this.showHelp()}}}},this);var m=0;if(localStorage.badguy1_complete){this.greenArrow1.setOpacity(255);m++}if(localStorage.badguy2_complete){this.greenArrow2.setOpacity(255);m++}if(localStorage.badguy3_complete){this.greenArrow3.setOpacity(255);m++}if(localStorage.badguy4_complete){this.greenArrow4.setOpacity(255);m++}CALLIE_GAME.badGuyCount=m;if(m==4&&!localStorage.wonOnce){localStorage.wonOnce="true";VO.play(jailhouseRes.s_cal037_mp3,function(){VO.play(jailhouseRes.s_cal038_mp3,function(){VO.play(jailhouseRes.s_nar024_mp3);VO.unlock()},this)},this)}var H=cc.callFunc(this.finished,this);var l=cc.delayTime(2);var K=cc.sequence(l,H);this.phoneVoices=[jailhouseRes.s_phone_priscilla2_mp3,jailhouseRes.s_phone_townsfolk_mp3,jailhouseRes.s_phone_governer_mp3,jailhouseRes.s_phone_priscilla_mp3,jailhouseRes.s_phone_farmerstinky_mp3,jailhouseRes.s_phone_peck_mp3,jailhouseRes.s_phone_ellacow2_mp3,jailhouseRes.s_phone_priscilla3_mp3];if(!this.voiceCount){this.voiceCount=0}shuffleArray(this.phoneVoices);this.restorePurchasedItem("unlockedPhoto","nuggetCostPhoto","checkPhoto");this.restorePurchasedItem("unlockedPJs","nuggetCostPJs","checkPJs");this.restorePurchasedItem("unlockedPhone","nuggetCostPhone","checkPhone");this.restorePurchasedItem("unlockedPrint","nuggetCostPrint","checkPrint");this.restorePurchasedItem("unlockedToby","nuggetCostToby","checkToby");this.restorePurchasedItem("unlockedPeck","nuggetCostPeck","checkPeck");this.backButton.rolloverSound=jailhouseRes.s_nar025_mp3;this.helpButton.rolloverSound=jailhouseRes.s_nar029_mp3;this.nuggetButton.rolloverSound=jailhouseRes.s_nar011a_1_mp3;setupMouseOvers([this.backButton,this.helpButton,this.nuggetButton,this.phoneHitArea,this.mapHitArea,this.photoFrame,this.soundButton],this);cc.eventManager.addListener({prevTouchId:-1,event:cc.EventListener.TOUCH_ALL_AT_ONCE,onTouchesBegan:function(X,Q){cc.log("TOUCH");var V=X[0];var Y=cc.p(V.getLocationX(),V.getLocationY());PS=Q.getCurrentTarget().phoneSprite;if(!Q.getCurrentTarget().mapShowing){if(cc.rectContainsPoint(Q.getCurrentTarget().nuggetStore.getBoundingBox(),Y)){}else{if(cc.rectContainsPoint(Q.getCurrentTarget().mapHitArea.getBoundingBox(),Y)){Q.getCurrentTarget().showMap();Q.getCurrentTarget().mapShowing=true}else{if(cc.rectContainsPoint(Q.getCurrentTarget().phoneHitArea.getBoundingBox(),Y)&&Q.getCurrentTarget().phoneSprite.getNumberOfRunningActions()==0){if(!Q.getCurrentTarget().phoneSprite.unhooked){if(Q.getCurrentTarget().phoneAudio){Q.getCurrentTarget().phoneAudio.stop()}if(CALLIE_GAME.unlockedPhone){Q.getCurrentTarget().phoneSprite.unhooked=true;Q.getCurrentTarget().phoneAudio=createjs.Sound.play(jailhouseRes.s_sfx_phone_ring_mp3)}else{Q.getCurrentTarget().phoneAudio=createjs.Sound.play(jailhouseRes.s_sfx_phone_ring_locked_mp3);CALLIE_GAME.helpPlaying=true;Q.getCurrentTarget().officeHelp=ccs.load(jailhouseRes.s_office_help_json);Q.getCurrentTarget().officeHelpAction=Q.getCurrentTarget().officeHelp.action;Q.getCurrentTarget().addChild(Q.getCurrentTarget().officeHelp.node);Q.getCurrentTarget().officeHelpAction.play("nuggetStore",false);Q.getCurrentTarget().officeHelp.node.stopAllActions();Q.getCurrentTarget().officeHelp.node.runAction(Q.getCurrentTarget().officeHelpAction);Q.getCurrentTarget().officeHelp.node.getChildByName("skipButton").addTouchEventListener(function(ab,ac){if(ac==0){VO.unlock();CALLIE_GAME.helpPlaying=false;Q.getCurrentTarget().officeHelp.node.removeFromParent();VO.stop();var aa={};aa.action="help_skip";window.trackGameEvent(aa)}},Q.getCurrentTarget());Q.getCurrentTarget().officeHelp.node.getChildByName("skipToNuggetButton").addTouchEventListener(function(ab,ac){if(ac==0){VO.unlock();CALLIE_GAME.helpPlaying=false;Q.getCurrentTarget().officeHelp.node.removeFromParent();VO.stop();var aa={};aa.action="help_skip";window.trackGameEvent(aa);Q.getCurrentTarget().showShop()}},Q.getCurrentTarget());VO.play(jailhouseRes.s_nar009_alt_mp3,function(){VO.unlock();CALLIE_GAME.helpPlaying=false;Q.getCurrentTarget().officeHelp.node.removeFromParent()},Q.getCurrentTarget().mapHitArea,false,1000)}var P=1;var U=0.05;Q.getCurrentTarget().phoneSprite.runAction(cc.sequence(cc.rotateBy(U,P),cc.rotateBy(U,-P),cc.rotateBy(U,-P),cc.rotateBy(U,P),cc.rotateBy(U,P),cc.rotateBy(U,-P),cc.rotateBy(U,-P),cc.rotateBy(U,P),cc.rotateBy(U,P),cc.rotateBy(U,-P),cc.rotateBy(U,-P),cc.rotateBy(U,P),cc.rotateBy(U,P),cc.rotateBy(U,-P),cc.rotateBy(U,-P),cc.rotateBy(U,P),cc.rotateBy(U,P),cc.rotateBy(U,-P),cc.rotateBy(U,-P),cc.rotateBy(U,P),cc.rotateBy(U,P),cc.rotateBy(U,-P),cc.rotateBy(U,-P),cc.rotateBy(U,P)));var W=cc.delayTime(1.5);var R=cc.callFunc(Q.getCurrentTarget().answerPhone,Q.getCurrentTarget());var T=cc.sequence(W,R);Q.getCurrentTarget().stopAllActions();Q.getCurrentTarget().runAction(T)}else{var S=new cc.SpriteFrame(jailhouseRes.s_jailhousePhoneHooked,cc.rect(0,0,928,430));Q.getCurrentTarget().phoneSprite.setSpriteFrame(S);Q.getCurrentTarget().phoneSprite.unhooked=false;if(Q.getCurrentTarget().phoneAudio){Q.getCurrentTarget().phoneAudio.stop()}Q.getCurrentTarget().phoneAudio=createjs.Sound.play(jailhouseRes.s_sfx_phone_hangup_mp3)}}else{if(cc.rectContainsPoint(Q.getCurrentTarget().photoFrame.getBoundingBox(),Y)){if(CALLIE_GAME.unlockedPhoto){var Z={};Z.action="picture_unlocked";window.trackGameEvent(Z);if(!CALLIE_GAME.photoCount){CALLIE_GAME.photoCount=1}CALLIE_GAME.photoCount++;if(CALLIE_GAME.photoCount>9){CALLIE_GAME.photoCount=1}createjs.Sound.play(jailhouseRes.s_sfx_frame_mp3)}else{var Z={};Z.action="picture_locked";window.trackGameEvent(Z);CALLIE_GAME.photoCount=1;createjs.Sound.play(jailhouseRes.s_sfx_frame_mp3);CALLIE_GAME.helpPlaying=true;Q.getCurrentTarget().officeHelp=ccs.load(jailhouseRes.s_office_help_json);Q.getCurrentTarget().officeHelpAction=Q.getCurrentTarget().officeHelp.action;Q.getCurrentTarget().addChild(Q.getCurrentTarget().officeHelp.node);Q.getCurrentTarget().officeHelpAction.play("nuggetStore",false);Q.getCurrentTarget().officeHelp.node.stopAllActions();Q.getCurrentTarget().officeHelp.node.runAction(Q.getCurrentTarget().officeHelpAction);Q.getCurrentTarget().officeHelp.node.getChildByName("skipButton").addTouchEventListener(function(ab,ac){if(ac==0){VO.unlock();CALLIE_GAME.helpPlaying=false;Q.getCurrentTarget().officeHelp.node.removeFromParent();VO.stop();var aa={};aa.action="help_skip";window.trackGameEvent(aa)}},Q.getCurrentTarget());Q.getCurrentTarget().officeHelp.node.getChildByName("skipToNuggetButton").addTouchEventListener(function(ab,ac){if(ac==0){VO.unlock();CALLIE_GAME.helpPlaying=false;Q.getCurrentTarget().officeHelp.node.removeFromParent();VO.stop();var aa={};aa.action="help_skip";window.trackGameEvent(aa);Q.getCurrentTarget().showShop()}},Q.getCurrentTarget());VO.play(jailhouseRes.s_nar010_alt_mp3,function(){VO.unlock();CALLIE_GAME.helpPlaying=false;Q.getCurrentTarget().officeHelp.node.removeFromParent()},Q.getCurrentTarget())}var O=new cc.ParticleSystem(jailhouseRes.s_sparkle_plist);O.x=Q.getCurrentTarget().photoFrame.getPositionX();O.y=Q.getCurrentTarget().photoFrame.getPositionY();O.autoRemoveOnFinish=true;Q.getCurrentTarget().addChild(O);var S=new cc.SpriteFrame(jailhouseRes["s_photo_"+CALLIE_GAME.photoCount],cc.rect(0,0,127,127));Q.getCurrentTarget().photoFrame.setSpriteFrame(S);localStorage.photoCount=CALLIE_GAME.photoCount}}}}}else{if(cc.rectContainsPoint(Q.getCurrentTarget().mapNuggetButton.getBoundingBox(),Y)){Q.getCurrentTarget().showShop()}if(!Q.getCurrentTarget().levelChosen){if(cc.rectContainsPoint(Q.getCurrentTarget().button1.getBoundingBox(),Y)){Q.getCurrentTarget().levelChosen=true;CALLIE_GAME.badGuy=1;if(localStorage["badguy"+CALLIE_GAME.badGuy+"_complete"]){CALLIE_GAME.pickupItem=Q.getCurrentTarget().randomObject()}else{CALLIE_GAME.pickupItem="corn"}var Z={};Z.action="level_select";Z.action_detail="level_2";window.trackGameEvent(Z);VO.play(jailhouseRes.s_cal006_mp3,function(){if(localStorage.tutorialPlayed!="true"){CALLIE_GAME.lastScene=JailhouseScene;CALLIE_GAME.pickupItem="corn";res.s_dTilesSD=res.s_dTilesTutorial;CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedEasy;VO.captionLayer=null;cc.director.purgeCachedData();cc.game.hardRefresh(g_resources,function(){CALLIE_GAME.helpPlaying=true;this.callieSprite=null;this.phoneSprite=null;this.mapHitArea=null;this.phoneHitArea=null;this.photoFrame=null;this.button1=null;this.button2=null;this.button3=null;this.button4=null;this.mapNuggetButton=null;this.soundButton=null;this.greenArrow1=null;this.greenArrow2=null;this.greenArrow3=null;this.greenArrow4=null;this.nuggetStore=null;this.storeNuggetCountBag=null;this.backButton=null;this.helpButton=null;PS=null;cc.director.runScene(new GameTutorialScene())})}else{Q.getCurrentTarget().loadLevelIntro()}},Q.getCurrentTarget())}if(cc.rectContainsPoint(Q.getCurrentTarget().button2.getBoundingBox(),Y)){Q.getCurrentTarget().levelChosen=true;CALLIE_GAME.badGuy=2;if(localStorage["badguy"+CALLIE_GAME.badGuy+"_complete"]){CALLIE_GAME.pickupItem=Q.getCurrentTarget().randomObject()}else{CALLIE_GAME.pickupItem="money"}var Z={};Z.action="level_select";Z.action_detail="level_3";window.trackGameEvent(Z);VO.play(jailhouseRes.s_cal006_mp3,function(){if(localStorage.tutorialPlayed!="true"){CALLIE_GAME.lastScene=JailhouseScene;CALLIE_GAME.pickupItem="money";res.s_dTilesSD=res.s_dTilesTutorial;CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedEasy;this.callieSprite=null;this.phoneSprite=null;this.mapHitArea=null;this.phoneHitArea=null;this.photoFrame=null;this.button1=null;this.button2=null;this.button3=null;this.button4=null;this.mapNuggetButton=null;this.soundButton=null;this.greenArrow1=null;this.greenArrow2=null;this.greenArrow3=null;this.greenArrow4=null;this.nuggetStore=null;this.storeNuggetCountBag=null;this.backButton=null;this.helpButton=null;PS=null;cc.director.purgeCachedData();cc.game.hardRefresh(g_resources,function(){cc.director.runScene(new GameTutorialScene())})}else{Q.getCurrentTarget().loadLevelIntro()}},Q.getCurrentTarget())}if(cc.rectContainsPoint(Q.getCurrentTarget().button3.getBoundingBox(),Y)){Q.getCurrentTarget().levelChosen=true;CALLIE_GAME.badGuy=3;if(localStorage["badguy"+CALLIE_GAME.badGuy+"_complete"]){CALLIE_GAME.pickupItem=Q.getCurrentTarget().randomObject()}else{CALLIE_GAME.pickupItem="milk"}var Z={};Z.action="level_select";Z.action_detail="level_4";window.trackGameEvent(Z);VO.play(jailhouseRes.s_cal006_mp3,function(){if(localStorage.tutorialPlayed!="true"){CALLIE_GAME.lastScene=JailhouseScene;CALLIE_GAME.pickupItem="milk";res.s_dTilesSD=res.s_dTilesTutorial;CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedEasy;this.callieSprite=null;this.phoneSprite=null;this.mapHitArea=null;this.phoneHitArea=null;this.photoFrame=null;this.button1=null;this.button2=null;this.button3=null;this.button4=null;this.mapNuggetButton=null;this.soundButton=null;this.greenArrow1=null;this.greenArrow2=null;this.greenArrow3=null;this.greenArrow4=null;this.nuggetStore=null;this.storeNuggetCountBag=null;this.backButton=null;this.helpButton=null;PS=null;cc.director.purgeCachedData();cc.game.hardRefresh(g_resources,function(){cc.director.runScene(new GameTutorialScene())})}else{Q.getCurrentTarget().loadLevelIntro()}},Q.getCurrentTarget())}if(cc.rectContainsPoint(Q.getCurrentTarget().button4.getBoundingBox(),Y)){Q.getCurrentTarget().levelChosen=true;CALLIE_GAME.badGuy=4;if(localStorage["badguy"+CALLIE_GAME.badGuy+"_complete"]){CALLIE_GAME.pickupItem=Q.getCurrentTarget().randomObject()}else{CALLIE_GAME.pickupItem="coal"}var Z={};Z.action="level_select";Z.action_detail="level_1";window.trackGameEvent(Z);VO.play(jailhouseRes.s_cal006_mp3,function(){if(localStorage.tutorialPlayed!="true"){CALLIE_GAME.lastScene=JailhouseScene;CALLIE_GAME.pickupItem="coal";res.s_dTilesSD=res.s_dTilesTutorial;CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedEasy;this.callieSprite=null;this.phoneSprite=null;this.mapHitArea=null;this.phoneHitArea=null;this.photoFrame=null;this.button1=null;this.button2=null;this.button3=null;this.button4=null;this.mapNuggetButton=null;this.soundButton=null;this.greenArrow1=null;this.greenArrow2=null;this.greenArrow3=null;this.greenArrow4=null;this.nuggetStore=null;this.storeNuggetCountBag=null;this.backButton=null;this.helpButton=null;PS=null;cc.director.purgeCachedData();cc.game.hardRefresh(g_resources,function(){cc.director.runScene(new GameTutorialScene())})}else{Q.getCurrentTarget().loadLevelIntro()}},Q.getCurrentTarget())}}}},onTouchesMoved:function(Q,P){var R=Q[0];var O=cc.p(R.getLocationX(),R.getLocationY())},onTouchesEnded:function(P,O){}},this);if(CALLIE_GAME.musicTrack.src){CALLIE_GAME.musicTrack.stop()}CALLIE_GAME.musicTrack=createjs.Sound.play(jailhouseRes.s_mx_jailhouse_mp3,{loop:-1});CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume);if(!localStorage.helpShown){localStorage.helpShown=true;this.showHelp();var c={};c.action="help";window.trackGameEvent(c)}cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(P,O){if(P==68&&CALLIE_GAME.levelSelectScreen==true){cc.director.runScene(new LevelSelectScene())}}},this)},showHelp:function(){cc.log("showing help");CALLIE_GAME.helpPlaying=true;this.officeHelp=ccs.load(jailhouseRes.s_office_help_json);this.officeHelpAction=this.officeHelp.action;this.addChild(this.officeHelp.node);this.officeHelp.node.getChildByName("skipButton").addTouchEventListener(function(b,c){if(c==0){VO.unlock();CALLIE_GAME.helpPlaying=false;this.officeHelp.node.removeFromParent();VO.stop();var a={};a.action="help_skip";window.trackGameEvent(a)}},this);VO.play(jailhouseRes.s_nar007a_mp3,function(){VO.unlock();this.officeHelpAction.play("map",false);this.officeHelp.node.stopAllActions();this.officeHelp.node.runAction(this.officeHelpAction);VO.play(jailhouseRes.s_nar007b_mp3,function(){VO.unlock();this.officeHelpAction.play("nuggetStore",false);this.officeHelp.node.stopAllActions();this.officeHelp.node.runAction(this.officeHelpAction);VO.play(jailhouseRes.s_nar011_mp3,function(){VO.unlock();CALLIE_GAME.helpPlaying=false;this.officeHelp.node.removeFromParent()},this,true)},this,true)},this,true)},showMapHelp:function(){CALLIE_GAME.helpPlaying=true;this.officeHelp=ccs.load(jailhouseRes.s_office_help_json);this.officeHelpAction=this.officeHelp.action;this.addChild(this.officeHelp.node);this.officeHelpAction.play("zoomMap",false);this.officeHelp.node.stopAllActions();this.officeHelp.node.runAction(this.officeHelpAction);this.officeHelp.node.getChildByName("skipButton").addTouchEventListener(function(b,c){if(c==0){VO.unlock();CALLIE_GAME.helpPlaying=false;this.officeHelp.node.removeFromParent();VO.stop();var a={};a.action="help_skip";window.trackGameEvent(a)}},this);VO.play(jailhouseRes.s_nar008_mp3,function(){VO.unlock();this.officeHelpAction.play("zoomMap2",false);this.officeHelp.node.stopAllActions();this.officeHelp.node.runAction(this.officeHelpAction);VO.play(jailhouseRes.s_nar008a_mp3,function(){VO.unlock();CALLIE_GAME.helpPlaying=false;this.officeHelp.node.removeFromParent()},this,true)},this,true)},loadLevelIntro:function(){this.callieSprite=null;this.phoneSprite=null;this.mapHitArea=null;this.phoneHitArea=null;this.photoFrame=null;this.button1=null;this.button2=null;this.button3=null;this.button4=null;this.mapNuggetButton=null;this.soundButton=null;this.greenArrow1=null;this.greenArrow2=null;this.greenArrow3=null;this.greenArrow4=null;this.nuggetStore=null;this.storeNuggetCountBag=null;this.backButton=null;this.helpButton=null;PS=null;cc.director.purgeCachedData();cc.game.hardRefresh(g_resources,function(){cc.director.runScene(new LevelIntroScene())})},touchEvent:function(a,b){this.showShop()},showShop:function(a,b){setupMouseOvers([this.helpButton,this.nuggetStore.getChildByName("buttonPhoto"),this.nuggetStore.getChildByName("buttonPJs"),this.nuggetStore.getChildByName("buttonPhone"),this.nuggetStore.getChildByName("buttonToby"),this.nuggetStore.getChildByName("buttonPeck"),this.nuggetStore.getChildByName("buttonPrint"),this.nuggetStore.getChildByName("buttonClose"),this.nuggetStore.getChildByName("buttonPhotoBuy"),this.nuggetStore.getChildByName("buttonPJsBuy"),this.nuggetStore.getChildByName("buttonPhoneBuy"),this.nuggetStore.getChildByName("buttonTobyBuy"),this.nuggetStore.getChildByName("buttonPeckBuy"),this.nuggetStore.getChildByName("buttonPrintBuy")],this);if(CALLIE_GAME.shopShown!=true){CALLIE_GAME.shopShown=true;VO.play(jailhouseRes.s_nar011a_mp3,function(){VO.play(jailhouseRes.s_nar011b_mp3)},this)}var c=cc.moveTo(0.5,cc.p(461,250)).easing(cc.easeBackOut());this.nuggetStore.stopAllActions();this.nuggetStore.runAction(c);this.nuggetStoreShowing=true;if(CALLIE_GAME.musicTrack.src){CALLIE_GAME.musicTrack.stop()}CALLIE_GAME.musicTrack=createjs.Sound.play(jailhouseRes.s_mx_score_screen_mp3,{loop:-1});CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume)},randomObject:function(){if(!CALLIE_GAME.randomCount){CALLIE_GAME.randomCount=0}CALLIE_GAME.randomCount++;var b=["flower","package"];if(CALLIE_GAME.randomCount>b.length){CALLIE_GAME.randomCount=1}var a=b[CALLIE_GAME.randomCount%b.length];return a},hideShop:function(a,b){cc.log("hiding shop");setupMouseOvers([this.backButton,this.helpButton,this.nuggetButton,this.phoneHitArea,this.mapHitArea,this.photoFrame,this.soundButton],this);var c=cc.moveTo(0.5,cc.p(461,-500)).easing(cc.easeBackIn());this.nuggetStore.stopAllActions();this.nuggetStore.runAction(c);if(CALLIE_GAME.musicTrack.src){CALLIE_GAME.musicTrack.stop()}CALLIE_GAME.musicTrack=createjs.Sound.play(jailhouseRes.s_mx_jailhouse_mp3,{loop:-1});CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume);cc.log("shop hidden")},goBack:function(a,b){if(b==0){if(this.mapShowing){this.hideMap()}else{this.callieSprite=null;this.phoneSprite=null;this.mapHitArea=null;this.phoneHitArea=null;this.photoFrame=null;this.button1=null;this.button2=null;this.button3=null;this.button4=null;this.mapNuggetButton=null;this.soundButton=null;this.greenArrow1=null;this.greenArrow2=null;this.greenArrow3=null;this.greenArrow4=null;this.nuggetStore=null;this.storeNuggetCountBag=null;this.backButton=null;this.helpButton=null;PS=null;cc.director.purgeCachedData();cc.game.hardRefresh(title_resources,function(){cc.director.runScene(new ChooseCharacterScene())})}}},answerPhone:function(){if(CALLIE_GAME.unlockedPhone){var b=new cc.SpriteFrame(jailhouseRes.s_jailhousePhoneUnhooked,cc.rect(0,0,928,430));this.phoneSprite.setSpriteFrame(b);var a={};a.action="phone_unlocked";window.trackGameEvent(a);if(this.phoneAudio){this.phoneAudio.stop()}this.phoneAudio=createjs.Sound.play(this.phoneVoices[this.voiceCount]);this.voiceCount++}else{var a={};a.action="phone_locked";window.trackGameEvent(a);this.phoneSprite.unhooked=false}if(this.voiceCount>=this.phoneVoices.length){this.voiceCount=0}}});var JailhouseScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new Jailhouse();this.addChild(b)}});var LevelIntro=cc.Layer.extend({ctor:function(){this._super();this.init()},finished:function(){VO.captionLayer=null;var a=new GameScene();cc.director.runScene(a)},frameEventCalled:function(a){if(a.getEvent()=="smoke"){if(particleSmoke){if(!particleSmoke.hasPlayed){cc.log("play smoke");particleSmoke.hasPlayed=true;particleSmoke.resetSystem()}}}},init:function(){this._super();VO.captionLayer=this;if(CALLIE_GAME_MODE.lowFi!="true"){CALLIE_GAME.badGuys=["",res.s_billyGoattheKid_pose_v01PNG,res.s_oswaldTravis_pose_v01PNG,res.s_milkBandit_pose_v01PNG,res.s_trainBandits_pose_v01PNG];var e=CALLIE_GAME.badGuys[CALLIE_GAME.badGuy];var g=cc.director.getWinSize();ccs.customEasing=1.25;var k=ccs.load(res.s_LevelIntroJson);var b=k.node;this.addChild(b);var f=b.getChildByName("skipButton");f.addTouchEventListener(this.touchEvent,this);f.rolloverSound=titleRes.s_nar030_mp3;setupMouseOvers([f],this);var a=b.getChildByName("badGuy");var j=b.getChildByName("badGuyShadow");var d=new cc.SpriteFrame(e,cc.rect(0,0,928,430));a.setSpriteFrame(d);j.setSpriteFrame(d);particleSmoke=b.getChildByName("smokeParticles");particleSmoke.stopSystem();particleSmoke.hasPlayed=false;var c=k.action;c.startWithTarget(b);c.setFrameEventCallFunc(this.frameEventCalled);c.play("badguyrun",false);b.runAction(c);a.runAction(cc.scaleTo(3,1.5));if(CALLIE_GAME.musicTrack.src){CALLIE_GAME.musicTrack.stop()}CALLIE_GAME.musicTrack=createjs.Sound.play(res.s_mx_presidescroller_mp3);CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume)}else{var h=new cc.Sprite("media/images/levelintro"+CALLIE_GAME.badGuy+".jpg");h.setAnchorPoint(0,0);this.addChild(h);var l=new ccui.Button();l.loadTextures(res.skip_btn,res.skip_btn,res.skip_btn);l.setScale(0.75);l.setPosition(837.52,409);this.addChild(l);l.addTouchEventListener(this.touchEvent,this);setupMouseOvers([l],this)}if(CALLIE_GAME.badGuy==1||CALLIE_GAME.badGuy==3){VO.play(res.s_cal008_mp3,function(){this.finished()},this)}if(CALLIE_GAME.badGuy==2||CALLIE_GAME.badGuy==4){VO.play(res.s_cal007_mp3,function(){this.finished()},this)}},touchEvent:function(b,c){var a={};a.action="story_skip";window.trackGameEvent(a);VO.captionLayer=null;particleSmoke=null;var d=new GameScene();this.stopAllActions();cc.director.runScene(d)}});var LevelIntroScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new LevelIntro();this.addChild(b)}});var LevelSelect=cc.Layer.extend({labelCoin:null,labelMeter:null,coins:0,ctor:function(){this._super();this.init()},init:function(){this._super();LevelSelect.instance=this;var h=cc.director.getWinSize();cc.audioEngine.end();if(!CALLIE_GAME.characterSelected){CALLIE_GAME.characterSelected="callie"}CALLIE_GAME.badGuy=1;var f=ccs.load(res.s_levelSelectJson).node;this.addChild(f);var g=f.getChildByName("easyButton1");var e=f.getChildByName("easyButton2");var d=f.getChildByName("easyButton3");var c=f.getChildByName("easyButton4");var k=f.getChildByName("mediumButton1");var j=f.getChildByName("mediumButton2");var b=f.getChildByName("hardButton1");var a=f.getChildByName("hardButton2");if(!CALLIE_GAME.numberOfPlays){CALLIE_GAME.numberOfPlays=0}f.getChildByName("officeButton").addTouchEventListener(function(l,m){cc.LoaderScene.preload(jail_resources,function(){cc.director.runScene(new JailhouseScene())},this)},this);f.getChildByName("sortButton").addTouchEventListener(function(l,m){cc.LoaderScene.preload(sort_resources,function(){CALLIE_GAME.itemsCollected=43;cc.director.runScene(new SortGameScene())},this)},this);f.getChildByName("nuggets99").addTouchEventListener(function(l,m){localStorage.nuggetCount=CALLIE_GAME.nuggets=99},this);f.getChildByName("resetButton").addTouchEventListener(function(l,m){localStorage.clear();var n=cc.loader._loadTxtSync("media/settings/settings.json");CALLIE_GAME=JSON.parse(n);CALLIE_GAME.itemsCollected=0;CALLIE_GAME.score=0;CALLIE_GAME.nuggets=0;location.reload(true)},this);g.addTouchEventListener(function(l,m){CALLIE_GAME.numberOfPlays="testing";res.s_dTilesSD=res.s_dTiles_Easy_1_1;CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedEasy;cc.LoaderScene.preload(g_resources,function(){cc.director.runScene(new GameScene())},this)},this);e.addTouchEventListener(function(l,m){CALLIE_GAME.numberOfPlays="testing";res.s_dTilesSD=res.s_dTiles_Easy_2_1;CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedEasy;cc.LoaderScene.preload(g_resources,function(){cc.director.runScene(new GameScene())},this)},this);d.addTouchEventListener(function(l,m){CALLIE_GAME.numberOfPlays="testing";res.s_dTilesSD=res.s_dTiles_Easy_3_1;CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedEasy;cc.LoaderScene.preload(g_resources,function(){cc.director.runScene(new GameScene())},this)},this);c.addTouchEventListener(function(l,m){CALLIE_GAME.numberOfPlays="testing";res.s_dTilesSD=res.s_dTiles_Easy_4_1;CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedEasy;cc.LoaderScene.preload(g_resources,function(){cc.director.runScene(new GameScene())},this)},this);k.addTouchEventListener(function(l,m){CALLIE_GAME.numberOfPlays="testing";res.s_dTilesSD=res.s_dTiles_Med_1_1;CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedMed;cc.LoaderScene.preload(g_resources,function(){cc.director.runScene(new GameScene())},this)},this);j.addTouchEventListener(function(l,m){CALLIE_GAME.numberOfPlays="testing";res.s_dTilesSD=res.s_dTiles_Med_2_1;CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedMed;cc.LoaderScene.preload(g_resources,function(){cc.director.runScene(new GameScene())},this)},this);b.addTouchEventListener(function(l,m){CALLIE_GAME.numberOfPlays="testing";res.s_dTilesSD=res.s_dTiles_Hard_1_1;CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedHard;cc.LoaderScene.preload(g_resources,function(){cc.director.runScene(new GameScene())},this)},this);a.addTouchEventListener(function(l,m){CALLIE_GAME.numberOfPlays="testing";res.s_dTilesSD=res.s_dTiles_Hard_2_1;CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedHard;cc.LoaderScene.preload(g_resources,function(){cc.director.runScene(new GameScene())},this)},this)}});var LevelSelectScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new LevelSelect();this.addChild(b)}});LevelSelect.instance=null;var MissionEnd=cc.Layer.extend({ctor:function(){this._super();this.init()},finished:function(){VO.captionLayer=null;cc.director.purgeCachedData();if(typeof window.orientation!=="undefined"){cc.game.hardRefresh(jail_resources,function(){cc.director.runScene(new JailhouseScene())},this,true)}else{cc.game.hardRefresh(jail_resources,function(){cc.director.runScene(new JailhouseScene())},this)}},frameEventCalled:function(a){},init:function(){this._super();var d=cc.director.getWinSize();ccs.customEasing=0.5;CALLIE_GAME.missionComplete=true;VO.captionLayer=this;if(CALLIE_GAME_MODE.lowFi!="true"){var a=ccs.load(res.s_missionEndJson);var e=a.node;this.addChild(e);var c=a.action;c.startWithTarget(e);c.setFrameEventCallFunc(this.frameEventCalled);c.play("zoomIn",false);var h=cc.callFunc(this.finished,this);var f=cc.delayTime(5);var g=cc.sequence(f,h);this.runAction(g);e.runAction(c);if(CALLIE_GAME.musicTrack.src){CALLIE_GAME.musicTrack.stop()}CALLIE_GAME.musicTrack=createjs.Sound.play(res.s_mx_after_level_mp3);CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume)}else{var b=new cc.Sprite("media/images/missionend.jpg");b.setAnchorPoint(0,0);this.addChild(b)}VO.play(res.s_cal036_mp3)},touchEvent:function(a,b){cc.director.purgeCachedData();VO.captionLayer=null;cc.director.purgeCachedData();if(typeof window.orientation!=="undefined"){cc.game.hardRefresh(jail_resources,function(){cc.director.runScene(new JailhouseScene())},this,true)}else{cc.game.hardRefresh(jail_resources,function(){cc.director.runScene(new JailhouseScene())},this)}}});var MissionEndScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new MissionEnd();this.addChild(b)}});var PreJailSequence=cc.Layer.extend({labelCoin:null,labelMeter:null,coins:0,ctor:function(){this._super();this.init()},finished:function(){VO.captionaLayer=null;cc.director.purgeCachedData();if(typeof window.orientation!=="undefined"){cc.game.hardRefresh(jail_resources,function(){cc.director.runScene(new JailhouseScene())},this,true)}else{cc.game.hardRefresh(jail_resources,function(){cc.director.runScene(new JailhouseScene())},this)}},init:function(){this._super();var d=cc.director.getWinSize();VO.captionLayer=this;if(CALLIE_GAME_MODE.lowFi!="true"){var a=ccs.load(sortRes.s_prejail_json);var e=a.node;this.addChild(e);var c=a.action;c.startWithTarget(e);c.play("zoom",false);e.runAction(c)}else{var b=new cc.Sprite("media/images/prejail.jpg");b.setAnchorPoint(0,0);this.addChild(b)}VO.play(sortRes.s_cal036_mp3,function(){this.finished()},this)},touchEvent:function(a,b){cc.director.purgeCachedData();VO.captionLayer=null;cc.director.purgeCachedData();cc.game.hardRefresh(jail_resources,function(){cc.director.runScene(new JailhouseScene())},this,true)}});var PreJailSequenceScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new PreJailSequence();this.addChild(b)}});var PreSortSequence=cc.Layer.extend({labelCoin:null,labelMeter:null,coins:0,ctor:function(){this._super();this.init()},finished:function(){VO.captionLayer=null;cc.director.runScene(new SortGameScene())},init:function(){this._super();var e=cc.director.getWinSize();VO.captionLayer=this;if(CALLIE_GAME_MODE.lowFi!="true"){var a=ccs.load(sortRes.s_presort_json);var g=a.node;this.addChild(g);var f=g.getChildByName("skipButton");f.addTouchEventListener(this.touchEvent,this);setupMouseOvers([f],this);var d=a.action;d.startWithTarget(g);d.play("panZoom",false);g.runAction(d)}else{var c=new cc.Sprite("media/images/presort.jpg");c.setAnchorPoint(0,0);this.addChild(c);var b=new ccui.Button();b.loadTextures(res.skip_btn,res.skip_btn,res.skip_btn);b.setScale(0.75);b.setPosition(837.53,408.99);this.addChild(b);b.addTouchEventListener(this.touchEvent,this);setupMouseOvers([b],this)}VO.play(sortRes.s_cal021_mp3,function(){VO.unlock();this.finished()},this,true)},touchEvent:function(b,c){var a={};a.action="story_skip";window.trackGameEvent(a);VO.captionLayer=null;cc.director.runScene(new SortGameScene())}});var PreSortSequenceScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new PreSortSequence();this.addChild(b)}});var Score=cc.Layer.extend({sLayer:null,ctor:function(){this._super();this.init()},finished:function(){if(CALLIE_GAME.badguy1_complete&&CALLIE_GAME.badguy2_complete&&CALLIE_GAME.badguy3_complete&&CALLIE_GAME.badguy4_complete){cc.director.runScene(new GameEndSequence())}else{cc.director.runScene(new PreJailSequence())}},frameEventCalled:function(a){},countScore:function(){for(var b=CALLIE_GAME.itemsCollected;b>0;b--){CALLIE_GAME.score+=5;CALLIE_GAME.itemsCollected--;var a=this.node.getChildByName("score");a.setString(CALLIE_GAME.score);this.sLayer.labelCoin.setString(CALLIE_GAME.itemsCollected)}var e=cc.callFunc(this.addSortScore,this);var c=cc.delayTime(1);var d=cc.sequence(c,e);this.runAction(d)},closeBag:function(){var b=this.ccsObject.action;b.startWithTarget(this.node);b.setFrameEventCallFunc(this.frameEventCalled);b.play("bag_close",false);var a=this.node.getChildByName("nuggetScore");CALLIE_GAME.nuggets++;localStorage.nuggetCount=CALLIE_GAME.nuggets;a.setString(CALLIE_GAME.nuggets);VO.play(res.s_nar022_mp3,function(){VO.play(res.s_nar023_mp3)},this);var e=cc.callFunc(this.finished,this);var c=cc.delayTime(8);var d=cc.sequence(c,e);this.runAction(d);createjs.Sound.play(res.s_sfx_goldnugget_mp3);this.runAction(d)},openBag:function(){var a=this.ccsObject.action;a.startWithTarget(this.node);a.setFrameEventCallFunc(this.frameEventCalled);a.play("bag_open",false);var d=cc.callFunc(this.closeBag,this);var b=cc.delayTime(1);var c=cc.sequence(b,d);this.runAction(c)},init:function(){this._super();var g=cc.director.getWinSize();ccs.customEasing=1;var j=ccs.load(res.s_scoreSceneJson);this.ccsObject=j;var c=j.node;this.node=c;this.addChild(c);var h=this.node.getChildByName("nuggetScore");h.setString(CALLIE_GAME.nuggets);var b=c.getChildByName("score");b.setString(CALLIE_GAME.score);var d=j.action;d.startWithTarget(c);d.setFrameEventCallFunc(this.frameEventCalled);d.play("score2",false);c.runAction(d);var a=cc.callFunc(this.countScore,this);var f=cc.delayTime(1);var e=cc.sequence(f,a);this.runAction(e);if(CALLIE_GAME.musicTrack.src){CALLIE_GAME.musicTrack.stop()}CALLIE_GAME.musicTrack=createjs.Sound.play(res.s_mx_score_screen_mp3,{loop:-1});CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume)},addSortScore:function(){var a=ccs.load(res.s_scoreSceneJson);CALLIE_GAME.score+=300;var c=this.node.getChildByName("score");c.setString(CALLIE_GAME.score);if(CALLIE_GAME["badguy"+CALLIE_GAME.badGuy+"_complete"]){cc.log("already finished");var f=cc.callFunc(this.finished,this);var d=cc.delayTime(1);var e=cc.sequence(d,f);this.runAction(e)}else{cc.log("firsttime");var b=a.action;b.startWithTarget(a.node);b.setFrameEventCallFunc(this.frameEventCalled);b.play("nugget",false);a.node.runAction(b);var f=cc.callFunc(this.openBag,this);var d=cc.delayTime(1);var e=cc.sequence(d,f);this.runAction(e);CALLIE_GAME["badguy"+CALLIE_GAME.badGuy+"_complete"]=true}},touchEvent:function(a,b){cc.director.runScene(new TitleScene())}});var ScoreScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new Score();this.addChild(b);var c=new StatusLayerScore();b.sLayer=c;this.addChild(c)}});var SignalLayer=cc.Layer.extend({ctor:function(){this._super();SignalLayer.instance=this;this.init()},init:function(){this._super();var b=cc.director.getWinSize();VO.captionLayer=this;var e=ccs.load(titleRes.s_signalScene).node;this.addChild(e);var c=e.getChildByName("Button_1");var d=e.getChildByName("signalText");d.string=CALLIE_GAME.strings.STRONG_SIGNAL;c.addTouchEventListener(this.touchEvent,this);cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(g,f){if(g==68&&CALLIE_GAME.levelSelectScreen==true){cc.director.runScene(new LevelSelectScene())}}},this);var a={};a.action="game_load";window.trackGameEvent(a)},mouseOverCallback:function(){var b=cc.delayTime(1);var a=cc.callFunc(this.rolloverPlay,this);var c=cc.sequence(b,a);this.runAction(c)},playReminder:function(){VO.play(titleRes.s_nar002_mp3)},pressPlay:function(){VO.play(titleRes.s_nar002_mp3)},rolloverPlay:function(){if(cc._canvas.style.cursor=="pointer"){VO.play(titleRes.s_nar003_mp3)}},touchEvent:function(a,b){cc.log(b);if(b==2){VO.captionLayer=null;createjs.Sound.play(titleRes.s_button_mp3,false);cc.director.runScene(new TitleScene())}}});SignalLayer.instance=null;var SignalScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new SignalLayer();this.addChild(b)}});var SortGame=cc.Layer.extend({piece1:null,piece2:null,piece3:null,piece4:null,piece5:null,piece6:null,label1:null,label2:null,label3:null,dropArea1:null,dropArea2:null,dropArea3:null,scoreCount:0,touchListener:null,ctor:function(){this._super();this.init()},finished:function(){},frameEventCalled:function(a){},correct:function(e){if(!this.correctCount){this.correctCount=0}this.correctCount++;cc.log("c count= "+this.correctCount);if(!cc._renderContext._context&&CALLIE_GAME_MODE.lowFi!="true"){var d=new cc.ParticleSystem(sortRes.s_particlePickup);d.x=e.getPositionX();d.y=e.getPositionY();d.autoRemoveOnFinish=true;SortGame.instance.addChild(d)}SortGame.instance.scoreCount++;e.setPosition(-1000,-1000);createjs.Sound.play(sortRes.s_sfx_item_collect_mp3);if(this.correctCount%4==0){VO.play(sortRes["s_cal0"+Math.floor((Math.random()*5)+22)+"_mp3"])}if(SortGame.instance.scoreCount==6||SortGame.instance.scoreCount==CALLIE_GAME.itemsLeftOver){SortGame.instance.scoreCount=0;if(CALLIE_GAME.itemsCollected>0){cc.log("next batch");this.setupLabels();SortGame.instance.finishedOnce=true;if(CALLIE_GAME.itemsCollected-6>=0){CALLIE_GAME.itemsCollected-=6}else{CALLIE_GAME.itemsLeftOver=CALLIE_GAME.itemsCollected;CALLIE_GAME.itemsCollected=0}if(CALLIE_GAME.badGuyCount<4){CALLIE_GAME.nuggets++}if(CALLIE_GAME.nuggets>=50){var a={};a.action="nuggets_50";window.trackGameEvent(a)}else{if(CALLIE_GAME.nuggets>=40){var a={};a.action="nuggets_40";window.trackGameEvent(a)}else{if(CALLIE_GAME.nuggets>=30){var a={};a.action="nuggets_30";window.trackGameEvent(a)}else{if(CALLIE_GAME.nuggets>=20){var a={};a.action="nuggets_20";window.trackGameEvent(a)}else{if(CALLIE_GAME.nuggets>=10){var a={};a.action="nuggets_10";window.trackGameEvent(a)}else{if(CALLIE_GAME.nuggets>=5){var a={};a.action="nuggets_5";window.trackGameEvent(a)}}}}}}localStorage.nuggetCount=CALLIE_GAME.nuggets;SortGame.instance.sLayer.labelCoin.setString(CALLIE_GAME.itemsCollected);SortGame.instance.sLayer.nuggetTotal.setString(CALLIE_GAME.nuggets);var c=[1,2,2,3,1,3];shuffleArray(c);if(CALLIE_GAME.itemsLeftOver){c.length=CALLIE_GAME.itemsLeftOver+0}for(var b=1;b<=c.length;b++){SortGame.instance["piece"+b]=SortGame.instance.node.getChildByName("p"+b);SortGame.instance["piece"+b].setPosition(SortGame.instance["piece"+b].startPosition);SortGame.instance["piece"+b].setSpriteFrame(new cc.SpriteFrame(CALLIE_GAME["sortItem"+c[b-1]],cc.rect(0,0,128,128)));SortGame.instance["piece"+b].tag=c[b-1];SortGame.instance["piece"+b].startPosition=SortGame.instance["piece"+b].getPosition();SortGame.instance["piece"+b].setPosition(SortGame.instance.sLayer.labelCoin.getPosition());SortGame.instance["piece"+b].runAction(cc.moveTo(0.5,SortGame.instance["piece"+b].startPosition).easing(cc.easeSineOut()))}}else{cc.log("out of items");SortGame.instance.scoreCount=0;CALLIE_GAME.itemsLeftOver=0;if(CALLIE_GAME.badGuyCount<4){CALLIE_GAME.nuggets++}SortGame.instance.clockAnimation.stopAllActions();SortGame.instance.nextButton.stopAllActions();this.playEndAudio()}}},nextScene:function(){var l={};l.action="minigame_win";window.trackGameEvent(l);CALLIE_GAME.missionComplete=true;var j=ccs.load(sortRes.s_ScorePopupJSONSort);this.addChild(j.node);this.scorePopup=j.node;if(CALLIE_GAME.useBitmapFonts=="true"){j.node.getChildByName("title").setString(CALLIE_GAME.strings.GREAT_JOB)}else{var f=new cc.FontDefinition();f.fontName=CALLIE_GAME.fontTitleName;f.fontSize=CALLIE_GAME.fontTitleSize;f.textAlign=cc.TEXT_ALIGNMENT_CENTER;f.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;f.fillStyle=cc.color(CALLIE_GAME.fontTitleColorRGB[0],CALLIE_GAME.fontTitleColorRGB[1],CALLIE_GAME.fontTitleColorRGB[2]);f.boundingWidth=800;f.boundingHeight=200;var h=j.node.getChildByName("title");var d=new cc.LabelTTF(CALLIE_GAME.strings.GREAT_JOB,f);d.setPosition(h.getPositionX(),h.getPositionY()-20);h.getParent().addChild(d);h.removeFromParent(true);d.setName("sortTitle")}var a=this.oldNuggetTotal;if(CALLIE_GAME.nuggets>a){VO.play(sortRes.s_nar022a_mp3,function(){VO.play(sortRes.s_nar023_mp3)},this.scoreItem)}var c=j.node.getChildByName("nuggetCount");c.setString(a);this.nuggetCount=c;var g=cc.delayTime(0.25);var b=cc.callFunc(this.totalNuggets,this);var e=cc.sequence(g,b);c.runAction(e);var k=j.node.getChildByName("nextButton");k.addTouchEventListener(function(m,n){if(n==0){CALLIE_GAME.badguy1_complete=localStorage.badguy1_complete;CALLIE_GAME.badguy2_complete=localStorage.badguy2_complete;CALLIE_GAME.badguy3_complete=localStorage.badguy3_complete;CALLIE_GAME.badguy4_complete=localStorage.badguy4_complete;SortGame.instance=null;this.label1=null;this.label2=null;this.label3=null;this.dropArea1=null;this.dropArea2=null;this.dropArea3=null;this.nextButton=null;StatusLayerScore.instance=null;if(CALLIE_GAME.badguy1_complete&&CALLIE_GAME.badguy2_complete&&CALLIE_GAME.badguy3_complete&&CALLIE_GAME.badguy4_complete){cc.director.runScene(new GameEndSequence())}else{cc.director.runScene(new PreJailSequence())}}},this)},totalNuggets:function(){if(this.oldNuggetTotal<CALLIE_GAME.nuggets){this.oldNuggetTotal++;this.nuggetCount.setString(this.oldNuggetTotal);var c=cc.delayTime(0.25);var a=cc.callFunc(this.totalNuggets,this);var d=cc.sequence(c,a);this.nuggetCount.runAction(d)}if(!cc._renderContext._context&&CALLIE_GAME_MODE.lowFi!="true"){var b=new cc.ParticleSystem(sortRes.s_sparkle_plist);b.x=this.nuggetCount.getPositionX();b.y=this.nuggetCount.getPositionY();b.autoRemoveOnFinish=true;this.scorePopup.addChild(b)}},clockFinished:function(){this.clockStopped=true;cc.log("out of time");SortGame.instance.inPlay=false;this.playEndAudio()},playEndAudio:function(){cc.log("end audio");VO.unlock();var a="";for(var b=1;b<=6;b++){SortGame.instance["piece"+b].setOpacity(150)}if(CALLIE_GAME.itemsLeftOver==0&&CALLIE_GAME.itemsCollected==0){a=sortRes.s_cal029_mp3}else{a=sortRes.s_cal029a_mp3}VO.play(a,function(){VO.unlock();var c=sortRes.s_cal030_mp3;if(CALLIE_GAME.pickupItem=="corn"){c=sortRes.s_cal030_mp3}if(CALLIE_GAME.pickupItem=="coal"){c=sortRes.s_cal031_mp3}if(CALLIE_GAME.pickupItem=="flower"){c=sortRes.s_cal032_mp3}if(CALLIE_GAME.pickupItem=="milk"){c=sortRes.s_cal033_mp3}if(CALLIE_GAME.pickupItem=="package"){c=sortRes.s_cal034_mp3}if(CALLIE_GAME.pickupItem=="money"){c=sortRes.s_cal035_mp3}VO.play(c,function(){VO.unlock();this.nextScene()},this,true)},this,true)},setupLabels:function(){var b=CALLIE_GAME.pickupItem;var a=[1,2,3];shuffleArray(a);this.label1=this.node.getChildByName("label1");this.label1.setSpriteFrame(new cc.SpriteFrame(sortRes["s_label_"+b+a[0]],cc.rect(0,0,118,93)));this.label1.tag=a[0];this.label2=this.node.getChildByName("label2");this.label2.setSpriteFrame(new cc.SpriteFrame(sortRes["s_label_"+b+a[1]],cc.rect(0,0,118,93)));this.label2.tag=a[1];this.label3=this.node.getChildByName("label3");this.label3.setSpriteFrame(new cc.SpriteFrame(sortRes["s_label_"+b+a[2]],cc.rect(0,0,118,93)));this.label3.tag=a[2]},init:function(){this._super();CALLIE_GAME.itemsLeftOver=0;var c={};c.action="minigame_start";window.trackGameEvent(c);VO.unlock();SortGame.instance=this;var d=cc.director.getWinSize();ccs.customEasing=1;var a=ccs.load(sortRes.s_sortGameSceneJson);var g=a.node;this.node=g;this.addChild(g);var h=CALLIE_GAME.pickupItem;this.oldNuggetTotal=CALLIE_GAME.nuggets;for(var e=1;e<=3;e++){CALLIE_GAME["sortItem"+e]=sortRes["s_sorting_"+h+e]}var f=[1,2,2,3,1,3];shuffleArray(f);if(CALLIE_GAME.itemsCollected>6){CALLIE_GAME.itemsCollected-=6}else{CALLIE_GAME.itemsLeftOver=CALLIE_GAME.itemsCollected;CALLIE_GAME.itemsCollected=0}if(CALLIE_GAME.itemsLeftOver){f.length=CALLIE_GAME.itemsLeftOver+0}this.touchListener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(l,j){var k=j.getCurrentTarget();if(cc.rectContainsPoint(k.getBoundingBox(),l.getLocation())&&SortGame.instance.inPlay){return true}return false},onTouchMoved:function(n,k){var m=n.getDelta();var j=k.getCurrentTarget();if(j&&SortGame.instance.inPlay){var l=cc.pAdd(m,j.getPosition());j.setPosition(l)}},onTouchEnded:function(l,j){var k=j.getCurrentTarget();if(SortGame.instance.inPlay){if(cc.rectContainsPoint(SortGame.instance.dropArea1,l.getLocation())){if(k.getTag()==SortGame.instance.label1.getTag()){SortGame.instance.correct(k)}else{k.runAction(cc.moveTo(0.33,k.startPosition).easing(cc.easeBackOut()));VO.play(sortRes["s_cal0"+Math.floor((Math.random()*2)+27)+"_mp3"])}}else{if(cc.rectContainsPoint(SortGame.instance.dropArea2,l.getLocation())){if(k.getTag()==SortGame.instance.label2.getTag()){SortGame.instance.correct(k)}else{k.runAction(cc.moveTo(0.33,k.startPosition).easing(cc.easeBackOut()));VO.play(sortRes["s_cal0"+Math.floor((Math.random()*2)+27)+"_mp3"])}}else{if(cc.rectContainsPoint(SortGame.instance.dropArea3,l.getLocation())){if(k.getTag()==SortGame.instance.label3.getTag()){SortGame.instance.correct(k)}else{k.runAction(cc.moveTo(0.33,k.startPosition).easing(cc.easeBackOut()));VO.play(sortRes["s_cal0"+Math.floor((Math.random()*2)+27)+"_mp3"])}}else{k.runAction(cc.moveTo(0.33,k.startPosition).easing(cc.easeBackOut()));VO.play(sortRes["s_cal0"+Math.floor((Math.random()*2)+27)+"_mp3"])}}}}}});for(var e=1;e<=6;e++){this["piece"+e]=this.node.getChildByName("p"+e);this["piece"+e].startPosition=this["piece"+e].getPosition();this["piece"+e].setPosition(-1000,-1000)}var b=[];for(var e=1;e<=f.length;e++){this["piece"+e].setSpriteFrame(new cc.SpriteFrame(CALLIE_GAME["sortItem"+f[e-1]],cc.rect(0,0,128,128)));this["piece"+e].tag=f[e-1];this["piece"+e].setPosition(236,477);this["piece"+e].runAction(cc.moveTo(0.5,this["piece"+e].startPosition).easing(cc.easeSineOut()));cc.eventManager.addListener(this.touchListener.clone(),this["piece"+e]);b.push(this["piece"+e])}setupMouseOvers(b,this);this.setupLabels();this.dropArea1=g.getChildByName("d1").getBoundingBox();this.dropArea2=g.getChildByName("d2").getBoundingBox();this.dropArea3=g.getChildByName("d3").getBoundingBox();this.nextButton=this.node.getChildByName("nextButton");this.nextButton.addTouchEventListener(function(j,k){if(k==2){this.nextScene()}},this);if(CALLIE_GAME.musicTrack.src){CALLIE_GAME.musicTrack.stop()}CALLIE_GAME.musicTrack=createjs.Sound.play(sortRes.s_mx_sortinggame_loop_mp3,{loop:-1});CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume)},onEnter:function(){this._super();cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,d){if(e==68&&CALLIE_GAME.levelSelectScreen==true){cc.director.runScene(new LevelSelectScene())}}},this);if(!localStorage.sortHelpSeen){localStorage.sortHelpSeen=true;this.sLayer.playHelp()}else{var c=cc.delayTime(3);var b=cc.callFunc(SortGame.instance.startClock,SortGame.instance);var a=cc.sequence(c,b);this.runAction(a);StatusLayerScore.instance.playCountdown()}},continueClock:function(){if(SortGame.instance.clockAnimation){SortGame.instance.inPlay=true;SortGame.instance.clockAnimation.resumeSchedulerAndActions()}else{SortGame.instance.startClock()}var c=cc.delayTime(1);var b=cc.callFunc(this.countDownWatch,this);var a=cc.sequence(c,b);this.nextButton.stopAllActions();this.nextButton.runAction(a)},startClock:function(){var a=SortGame.instance.node.getChildByName("clockAnimation");SortGame.instance.clockAnimation=a;cc.spriteFrameCache.addSpriteFrames(sortRes.s_sort_clock_plist);this.spriteSheetClock=new cc.SpriteBatchNode(sortRes.s_sort_clock_png);var h=[];for(var e=1;e<60;e++){var l="clockanim"+e+".png";var b=cc.spriteFrameCache.getSpriteFrame(l);h.push(b)}var d=new cc.Animation(h,0.5);var m=cc.animate(d);var n=cc.callFunc(this.clockFinished,this);var g=cc.sequence(m,n);a.runAction(g);SortGame.instance.inPlay=true;this.countDownCount=30;var f=cc.delayTime(1);var c=cc.callFunc(this.countDownWatch,this);var j=cc.sequence(f,c);this.nextButton.stopAllActions();this.nextButton.runAction(j)},countDownWatch:function(){if(!this.countDownCount){this.countDownCount=30}this.countDownCount--;if(this.countDownCount<7&&this.countDownCount>1){createjs.Sound.play(sortRes.s_sfx_timer_mp3)}if(this.countDownCount==1){createjs.Sound.play(sortRes.s_sfx_whistle_mp3)}if(this.countDownCount>0){var c=cc.delayTime(1);var b=cc.callFunc(this.countDownWatch,this);var a=cc.sequence(c,b);this.nextButton.runAction(a)}}});var SortGameScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var c=new StatusLayerScore();var b=new SortGame();b.sLayer=c;this.addChild(b);SortGame.instance.sLayer.labelCoin.setString(CALLIE_GAME.itemsCollected);this.addChild(c)}});SortGame.TAG_PIECE=4;SortGame.instance=null;var SoundButton=SoundButton||{};SoundButton.setup=function(b,a){if(CALLIE_GAME.soundOff==true){b._onPressStateChangedToDisabled();b.rolloverSound=titleRes.s_nar027_mp3}else{b._onPressStateChangedToNormal();b.rolloverSound=titleRes.s_nar028_mp3}b.addTouchEventListener(function(d,e){if(e==2){if(CALLIE_GAME.soundOff==true){CALLIE_GAME.soundOff=false;b._onPressStateChangedToNormal();CALLIE_GAME.musicVolume=0.5;CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume);var c={};c.action="sound";c.action_detail="on";window.trackGameEvent(c);b.rolloverSound=titleRes.s_nar028_mp3}else{CALLIE_GAME.soundOff=true;b._onPressStateChangedToDisabled();CALLIE_GAME.musicVolume=0;CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume);var c={};c.action="sound";c.action_detail="off";window.trackGameEvent(c);b.rolloverSound=titleRes.s_nar027_mp3}}},a)};var StatusLayer=cc.Layer.extend({labelCoin:null,labelMeter:null,coins:0,objectSymbol:null,callieSymbol:null,ctor:function(){this._super();this.init()},playCountdown:function(){if(CALLIE_GAME.useBitmapFonts=="true"){this.countLabel=new cc.LabelBMFont("3",res.s_font_kengwin_gold_fnt);this.countLabel.setPosition(cc.director.getWinSize().width/2,cc.director.getWinSize().height/2);this.countLabel.setScale(CALLIE_GAME.fontTitleSize/66);this.addChild(this.countLabel)}else{var b=new cc.FontDefinition();b.fontName="Kengwin";b.fontSize="56";b.textAlign=cc.TEXT_ALIGNMENT_CENTER;b.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;b.fillStyle=cc.color(251,245,142);b.boundingWidth=200;b.boundingHeight=100;this.kengwinFontDef=b;this.countLabel=new cc.LabelTTF("3",this.kengwinFontDef);this.countLabel.setPosition(cc.director.getWinSize().width/2,cc.director.getWinSize().height/2);this.addChild(this.countLabel)}createjs.Sound.play(res.s_sfx_timer_mp3);var a=cc.delayTime(1);var d=cc.callFunc(this.countDown,this,this.countLabel);var c=cc.sequence(a,d,a,d,a,d);this.runAction(c)},countDown:function(c,a){var b=a.getString();b--;a.setString(b);if(b==0){a.removeFromParent()}else{createjs.Sound.play(res.s_sfx_timer_mp3)}},setProgress:function(b){if(b>0){var a=this.ccsObject.action;a.startWithTarget(this.node);a.gotoFrameAndPause(b,false);this.node.runAction(a)}},onEnter:function(){this._super();this.objectSymbol=new cc.Sprite("#hud_"+CALLIE_GAME.pickupItem+".png");this.objectSymbol.setPosition(47,464);this.addChild(this.objectSymbol);if(CALLIE_GAME.badGuy>0){this.badGuySymbol=new cc.Sprite("#hud_bg"+CALLIE_GAME.badGuy+".png");this.badGuySymbol.setScale(0.9);this.badGuySymbol.setPosition(cc.p(726,463));this.addChild(this.badGuySymbol)}},init:function(){this._super();StatusLayer.instance=this;var b=cc.director.getWinSize();VO.captionLayer=this;var a=ccs.load(res.s_HUDLayerJSON);this.ccsObject=a;var e=a.node;this.node=e;this.addChild(e);if(CALLIE_GAME.useBitmapFonts=="true"){this.labelCoin=new cc.LabelBMFont(""+CALLIE_GAME.itemsCollected,res.s_font_kengwin_gold_fnt);this.labelCoin.setScale(0.55);this.labelCoin.setPosition(cc.p(b.width*0.1,b.height*0.955));this.addChild(this.labelCoin)}else{var g=new cc.FontDefinition();g.fontName="Kengwin";g.fontSize="46";g.textAlign=cc.TEXT_ALIGNMENT_CENTER;g.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;g.fillStyle=cc.color(251,245,142);g.boundingWidth=200;g.boundingHeight=100;this.kengwinFontDef=g;var c=new cc.LabelTTF(""+CALLIE_GAME.itemsCollected,this.kengwinFontDef);c.setPosition(cc.p(b.width*0.1,b.height*0.93));c.setFontSize(35);this.addChild(c);this.labelCoin=c}this.callieSymbol=e.getChildByName("callie");if(CALLIE_GAME.characterSelected!="callie"){var d=cc.textureCache.addImage("media/images/hud_"+CALLIE_GAME.characterSelected+".png");var f=new cc.SpriteFrame(d,cc.rect(0,0,d.getContentSize().width,d.getContentSize().height));this.callieSymbol.setSpriteFrame(f)}this.helpButton=e.getChildByName("helpButton");this.helpButton.addTouchEventListener(function(j,k){if(!CALLIE_GAME.helpPlaying){CALLIE_GAME.lastCharacterPosition=GameLayer.instance.body.p;if(res.s_dTilesSD!=res.s_dTilesTutorial){CALLIE_GAME.lastLevelName=res.s_dTilesSD}CALLIE_GAME.savedScore=CALLIE_GAME.itemsCollected;if(CALLIE_GAME.gallopSound){CALLIE_GAME.gallopSound.stop()}CALLIE_GAME.lastScene=JailhouseScene;res.s_dTilesSD=res.s_dTilesTutorial;CALLIE_GAME.runSpeed=CALLIE_GAME.runSpeedEasy;var h={};h.action="help";window.trackGameEvent(h);CALLIE_GAME.helpPlaying=true;cc.director.runScene(new GameTutorialScene())}},this);this.soundButton=this.node.getChildByName("soundButton");SoundButton.setup(this.soundButton,this);setupMouseOvers([this.helpButton,this.soundButton],this)}});StatusLayer.instance=null;var StatusLayerScore=cc.Layer.extend({labelCoin:null,labelMeter:null,coins:0,objectSymbol:null,ctor:function(){this._super();this.init()},playCountdown:function(){if(CALLIE_GAME.useBitmapFonts=="true"){this.countLabel=new cc.LabelBMFont("3",res.s_font_kengwin_gold_fnt);this.countLabel.setPosition(cc.director.getWinSize().width/2,cc.director.getWinSize().height/2);this.addChild(this.countLabel)}else{var b=new cc.FontDefinition();b.fontName="Kengwin";b.fontSize="56";b.textAlign=cc.TEXT_ALIGNMENT_CENTER;b.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;b.fillStyle=cc.color(251,245,142);b.boundingWidth=200;b.boundingHeight=100;this.kengwinFontDef=b;this.countLabel=new cc.LabelTTF("3",this.kengwinFontDef);this.countLabel.setPosition(cc.director.getWinSize().width/2,cc.director.getWinSize().height/2);this.addChild(this.countLabel)}createjs.Sound.play(sortRes.s_sfx_timer_mp3);var a=cc.delayTime(1);var d=cc.callFunc(this.countDown,this,this.countLabel);var c=cc.sequence(a,d,a,d,a,d);this.runAction(c)},countDown:function(c,a){var b=a.getString();b--;a.setString(b);if(b==0){a.removeFromParent()}else{createjs.Sound.play(res.s_sfx_timer_mp3)}},onEnter:function(){this._super();this.objectSymbol=new cc.Sprite(sortRes["s_score_hud_"+CALLIE_GAME.pickupItem]);var a=this.node.getChildByName("score_nugget_26").getPosition();a.x+=145;this.objectSymbol.setPosition(a);this.addChild(this.objectSymbol)},init:function(){this._super();StatusLayerScore.instance=this;VO.captionLayer=this;var f=cc.director.getWinSize();var k=ccs.load(sortRes.s_hud_layer_score);var d=k.node;this.addChild(d);this.node=d;if(CALLIE_GAME.useBitmapFonts=="true"){var j=d.getChildByName("sortTitle");j.setString(CALLIE_GAME.strings.SORT_ITEMS_TITLE);j.setScale(CALLIE_GAME.fontTitleSize/66);this.labelCoin=d.getChildByName("itemTotal");this.labelCoin.setString(CALLIE_GAME.itemsCollected);this.nuggetTotal=d.getChildByName("nuggetTotal");this.nuggetTotal.setString(CALLIE_GAME.nuggets)}else{var e=new cc.FontDefinition();e.fontName=CALLIE_GAME.fontTitleName;e.fontSize=CALLIE_GAME.fontTitleSize;e.textAlign=cc.TEXT_ALIGNMENT_CENTER;e.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;e.fillStyle=cc.color(CALLIE_GAME.fontTitleColorRGB[0],CALLIE_GAME.fontTitleColorRGB[1],CALLIE_GAME.fontTitleColorRGB[2]);e.boundingWidth=800;e.boundingHeight=300;var c=new cc.FontDefinition();c.fontName="Kengwin";c.fontSize="32";c.textAlign=cc.TEXT_ALIGNMENT_CENTER;c.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;c.fillStyle=cc.color(251,245,142);c.boundingWidth=200;c.boundingHeight=100;this.kengwinFontDef=c;var h=this.node.getChildByName("sortTitle");var b=new cc.LabelTTF(CALLIE_GAME.strings.SORT_ITEMS_TITLE,e);b.setPosition(h.getPositionX(),h.getPositionY()-20);h.getParent().addChild(b);h.removeFromParent(true);b.setName("sortTitle");var a=this.node.getChildByName("itemTotal");var g=new cc.LabelTTF(CALLIE_GAME.itemsCollected,this.kengwinFontDef);g.setPosition(a.getPositionX(),a.getPositionY()-10);g.setFontSize(35);a.getParent().addChild(g);a.removeFromParent(true);this.labelCoin=g;var a=this.node.getChildByName("nuggetTotal");var g=new cc.LabelTTF(CALLIE_GAME.nuggets,this.kengwinFontDef);g.setPosition(a.getPositionX(),a.getPositionY()-10);g.setFontSize(35);a.getParent().addChild(g);a.removeFromParent(true);this.nuggetTotal=g}this.helpButton=d.getChildByName("helpButton");this.helpButton.addTouchEventListener(function(m,n){if(n==2){var l={};l.action="help";window.trackGameEvent(l);if(this.getNumberOfRunningActions()==0){this.playHelp()}}},this);this.soundButton=d.getChildByName("soundButton");SoundButton.setup(this.soundButton,this);setupMouseOvers([this.helpButton,this.soundButton],this)},playHelp:function(){SortGame.instance.inPlay=false;if(SortGame.instance.clockAnimation){SortGame.instance.clockAnimation.pauseSchedulerAndActions()}SortGame.instance.nextButton.stopAllActions();CALLIE_GAME.helpPlaying=true;this.sortHelp=ccs.load(sortRes.s_sortGameHelpJson);this.sortHelpAction=this.sortHelp.action;this.addChild(this.sortHelp.node);this.sortHelp.node.getChildByName("skipButton").addTouchEventListener(function(c,d){if(d==0){var a={};a.action="help_skip";window.trackGameEvent(a);CALLIE_GAME.helpPlaying=false;this.sortHelp.node.removeFromParent();VO.stop();VO.unlock();var f=cc.delayTime(3);var e=cc.callFunc(SortGame.instance.continueClock,SortGame.instance);var b=cc.sequence(f,e);this.runAction(b);StatusLayerScore.instance.playCountdown()}},this);this.sortHelpAction.play("sort",false);this.sortHelp.node.stopAllActions();this.sortHelp.node.runAction(this.sortHelpAction);VO.play(sortRes.s_nar021_mp3,function(){var c=cc.delayTime(3);var b=cc.callFunc(SortGame.instance.continueClock,SortGame.instance);var a=cc.sequence(c,b);this.runAction(a);StatusLayerScore.instance.playCountdown();VO.unlock();this.sortHelp.node.removeFromParent()},this,true)}});StatusLayerScore.instance=null;var TitleLayer=cc.Layer.extend({labelCoin:null,labelMeter:null,coins:0,sounds:null,ctor:function(){this._super();TitleLayer.instance=this;this.init()},init:function(){this._super();var c=cc.director.getWinSize();VO.captionLayer=this;var e=ccs.load(titleRes.s_mainScene).node;this.addChild(e);var d=e.getChildByName("Button_1");d.addTouchEventListener(this.touchEvent,this);if(CALLIE_GAME.musicTrack){CALLIE_GAME.musicTrack.stop()}if(!CALLIE_GAME.musicVolume){CALLIE_GAME.musicVolume=0.5}CALLIE_GAME.musicTrack=createjs.Sound.play(titleRes.s_mx_title_music_mp3,{loop:-1});CALLIE_GAME.musicTrack.setVolume(CALLIE_GAME.musicVolume);VO.play(titleRes.s_cal001a_mp3,this.pressPlay,this);setupMouseOvers([d],this,this.mouseOverCallback);var f=cc.delayTime(15);var a=cc.callFunc(this.playReminder,this);var g=cc.sequence(f,a);this.runAction(g);cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(j,h){if(j==68&&CALLIE_GAME.levelSelectScreen==true){cc.director.runScene(new LevelSelectScene())}}},this);var b={};b.action="game_load";window.trackGameEvent(b)},mouseOverCallback:function(){var b=cc.delayTime(1);var a=cc.callFunc(this.rolloverPlay,this);var c=cc.sequence(b,a);this.runAction(c)},playReminder:function(){VO.play(titleRes.s_nar002_mp3)},pressPlay:function(){VO.play(titleRes.s_nar002_mp3)},rolloverPlay:function(){if(cc._canvas.style.cursor=="pointer"){VO.play(titleRes.s_nar003_mp3)}},touchEvent:function(a,b){if(b==2){VO.play(titleRes.s_nar003_mp3,function(){var c={};c.action="game_start";c.action_detail="play";window.trackGameEvent(c);TitleLayer.instance=null;VO.captionLayer=null;cc.director.runScene(new AllBadGuysSequenceScene())},this)}}});TitleLayer.instance=null;var TitleScene=cc.Scene.extend({onEnter:function(){this._super();var a=cc.director.getWinSize();var b=new TitleLayer();this.addChild(b)}});var VO=VO||{};VO.captionLayer={};VO.sound_lengths={};VO.lastPlayed={};VO.lastPlayed.src=null;VO.lastContext=null;VO.captionLayer=null;VO.lastCaption=null;VO.unlock=function(){VO.locked=false};VO.stop=function(){if(CALLIE_GAME.captionsOn!="true"){if(VO.lastPlayed.src){VO.lastPlayed.stop()}}if(VO.lastContext){VO.lastContext.stopAllActions();VO.lastContext=null}};VO.removeCaption=function(){if(VO.lastCaption){VO.lastCaption.removeFromParent(true);VO.lastCaption=null}};VO.play=function(k,f,a,j,b){if(!b){b=0}if(!VO.locked){VO.context=a;VO.onComplete=f;if(CALLIE_GAME.captionsOn=="true"){var d=k.substr(k.lastIndexOf("/")+1);d=d.substring(0,d.length-4).toUpperCase();if(VO.lastCaption){VO.lastCaption.removeFromParent(true);VO.lastCaption=null}if(CALLIE_GAME.useBitmapFonts=="true"){cc.log(CALLIE_GAME.strings[d]);this.captionLabel=new cc.LabelBMFont(CALLIE_GAME.strings[d],res.s_font_kengwin_gold_fnt,1600,cc.TEXT_ALIGNMENT_CENTER);this.captionLabel.setPosition(cc.director.getWinSize().width/2,cc.director.getWinSize().height/6);this.captionLabel.setScale(CALLIE_GAME.fontCaptionSize/66)}else{var c=new cc.FontDefinition();c.fontName=CALLIE_GAME.fontCaptionName;c.fontSize=CALLIE_GAME.fontCaptionSize;c.textAlign=cc.TEXT_ALIGNMENT_CENTER;c.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_CENTER;c.fillStyle=cc.color(CALLIE_GAME.fontCaptionColor[0],CALLIE_GAME.fontCaptionColor[1],CALLIE_GAME.fontCaptionColor[2]);c.lineHeight=CALLIE_GAME.fontCaptionLineHeight;this.captionLabel=new cc.LabelTTF(CALLIE_GAME.strings[d],c);this.captionLabel.setDimensions(850,200);this.captionLabel.setPosition(cc.director.getWinSize().width/2,cc.director.getWinSize().height/5);this.captionLabel.enableShadow(cc.color(0,0,0),2,5)}this.captionLayer.addChild(this.captionLabel);VO.lastCaption=this.captionLabel}if(CALLIE_GAME.voOn=="true"){if(VO.lastPlayed.src){VO.lastPlayed.stop()}VO.lastPlayed=createjs.Sound.play(k,{delay:b})}if(VO.lastContext){VO.lastContext.stopAllActions();VO.lastContext=null}if(a){a.stopAllActions();VO.lastContext=a;if(CALLIE_GAME.captionsOn=="true"||CALLIE_GAME.voOn=="false"){for(name in titleRes){if(titleRes[name]==k){VO.audioDuration=CALLIE_GAME.audio_lengths[name]*1;break}}for(name in res){if(res[name]==k){VO.audioDuration=CALLIE_GAME.audio_lengths[name]*1;break}}for(name in sortRes){if(sortRes[name]==k){VO.audioDuration=CALLIE_GAME.audio_lengths[name]*1;break}}for(name in jailhouseRes){if(jailhouseRes[name]==k){VO.audioDuration=CALLIE_GAME.audio_lengths[name]*1;break}}}else{VO.audioDuration=VO.lastPlayed._duration/1000}VO.audioDuration+=b/1000;var g=cc.delayTime(VO.audioDuration);var h=cc.callFunc(f,a);var e=cc.sequence(g,h);a.runAction(e)}if(VO.lastCaption){VO.lastCaption.runAction(cc.sequence(cc.delayTime(VO.audioDuration),cc.callFunc(VO.removeCaption,VO.lastCaption)))}}if(j){VO.locked=true}};function shuffleArray(g){for(var h=g.length-1;h>0;h--){var e=Math.floor(Math.random()*(h+1));var f=g[h];g[h]=g[e];g[e]=f}return g}function clearMouseOvers(a){cc.eventManager.removeListener(a)}function setupMouseOvers(b,a,c){clearMouseOvers(a);cc._canvas.style.cursor="default";a.allButtons=b;a.callback=c;cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseMove:function(f){if(!CALLIE_GAME.helpPlaying){var d=f.getLocation();if("mouse" in cc.sys.capabilities){for(var e=0;e<f.getCurrentTarget().allButtons.length;e++){if(cc.rectContainsPoint(f.getCurrentTarget().allButtons[e].getBoundingBox(),d)&&f.getCurrentTarget().allButtons[e].getParent()){cc._canvas.style.cursor="pointer";if(f.getCurrentTarget().callback&&!f.getCurrentTarget().isMousedOver){f.getCurrentTarget().callback()}if(f.getCurrentTarget().allButtons[e].rolloverSound&&!f.getCurrentTarget().allButtons[e].isMousedOver){setTimeout(function(){if(f.getCurrentTarget().allButtons[e].isMousedOver){VO.play(f.getCurrentTarget().allButtons[e].rolloverSound)}},1000)}f.getCurrentTarget().allButtons[e].isMousedOver=true;break}else{cc._canvas.style.cursor="default";f.getCurrentTarget().allButtons[e].isMousedOver=false}}}}}},a)}window.soundMute=function(a){if(a){cc.audioEngine.setEffectsVolume(0);cc.audioEngine.setMusicVolume(0)}else{cc.audioEngine.setEffectsVolume(1);cc.audioEngine.setMusicVolume(0.5)}};window.gamePause=function(a){if(a){cc.director.pause()}else{cc.director.resume()}};var titleRes={strong_signal_screen:"media/ccstudio/images/strongSignalScreen.jpg",all_bad_guys_sequence:"media/ccstudio/allbadguyssequence.json",bubble_callie:"media/ccstudio/images/bubble_callie.png",bubble_peck:"media/ccstudio/images/bubble_peck.png",bubble_toby:"media/ccstudio/images/bubble_toby.png",characterSelectPopUpBG:"media/ccstudio/images/characterselectpopupbg.png",characterStorePopup_json:"media/ccstudio/characterstorepopup.json",intro_billy:"media/ccstudio/images/intro_billy.png",intro_milk_bandit:"media/ccstudio/images/intro_milkbandit.png",intro_oswalt:"media/ccstudio/images/intro_oswalt.png",intro_train_bandits:"media/ccstudio/images/intro_trainbandits.png",minyagold_font:"media/ccstudio/fonts/minyagold.fnt",minyagold_png:"media/ccstudio/fonts/minyagold.png",no_button:"media/ccstudio/images/nobutton.png",nugget_count_bg:"media/ccstudio/images/nuggetcountbg.png",s_button_mp3:"media/audio/button.mp3",s_cal001_mp3:"media/audio/cal001.mp3",s_cal001a_mp3:"media/audio/cal001a.mp3",s_cal002_mp3:"media/audio/cal002.mp3",s_cal003_mp3:"media/audio/cal003.mp3",s_callie_corner:"media/ccstudio/images/callie_corner_cutscene.png",s_CharacterSelect:"media/ccstudio/characterselect.json",s_chooseBG:"media/ccstudio/images/sc-mail-choose-bg.jpg",s_chooseCallie:"media/ccstudio/images/callie_pose.png",s_choosePeck:"media/ccstudio/images/deputypeck2.png",s_chooseToby:"media/ccstudio/images/sc-mail-gameplay-toby.png",s_dJrFont:"media/ccstudio/fonts/djuniorgold.fnt",s_dJrFontPNG:"media/ccstudio/fonts/djuniorgold.png",s_font_kengwin_gold_fnt:"media/ccstudio/fonts/kengwingold.fnt",s_font_kengwin_gold_png:"media/ccstudio/fonts/kengwingold.png",s_font_kengwin_ttf:{type:"font",name:"kengwin",srcs:["media/ccstudio/fonts/kengwin.ttf"]},s_HUD_BG:"media/ccstudio/images/hud_bg.png",s_HUD_help:"media/ccstudio/images/hud_help.png",s_HUD_sound:"media/ccstudio/images/hud_sound.png",s_HUD_sound_off:"media/ccstudio/images/hud_sound_off.png",s_intro_b_bg:"media/ccstudio/images/intro_part_b_bg.jpg",s_intro_b_callie:"media/ccstudio/images/intro_part_b_callie.png",s_intro_b_json:"media/ccstudio/introb.json",s_intro_b_peck:"media/ccstudio/images/intro_part_b_peck.png",s_intro_b_shadows:"media/ccstudio/images/intro_part_b_shadows.png",s_intro_b_toby:"media/ccstudio/images/intro_part_b_toby.png",s_introSequence:"media/ccstudio/introsequence.json",s_levelSelect:"media/ccstudio/levelselect.json",s_mailBG:"media/ccstudio/images/sc-mail-story-bg.jpg",s_mailCharacters:"media/ccstudio/images/sc-mail-story-characters.png",s_mainScene:"media/ccstudio/mainscene.json",s_signalScene:"media/ccstudio/signalscene.json",s_mx_characterselect_mp3:"media/audio/mx-charselect.mp3",s_mx_introA_mp3:"media/audio/mx-introa.mp3",s_mx_introB_mp3:"media/audio/mx-introb.mp3",s_mx_title_music_mp3:"media/audio/mx-title-music.mp3",s_nar002_mp3:"media/audio/nar002.mp3",s_nar003_mp3:"media/audio/nar003.mp3",s_nar004_mp3:"media/audio/nar004.mp3",s_nar004a_mp3:"media/audio/nar004a.mp3",s_nar005_mp3:"media/audio/nar005.mp3",s_nar005a_mp3:"media/audio/nar005a.mp3",s_nar006_mp3:"media/audio/nar006.mp3",s_nar007_mp3:"media/audio/nar007.mp3",s_nar015_mp3:"media/audio/nar015.mp3",s_nar016_mp3:"media/audio/nar016.mp3",s_nar027_mp3:"media/audio/nar027.mp3",s_nar028_mp3:"media/audio/nar028.mp3",s_nar029_mp3:"media/audio/nar029.mp3",s_nar030_mp3:"media/audio/nar030.mp3",s_nar033_mp3:"media/audio/nar033.mp3",s_nar033a_mp3:"media/audio/nar033a.mp3",s_nar034_mp3:"media/audio/nar034.mp3",s_nar034a_mp3:"media/audio/nar034a.mp3",s_nar035_mp3:"media/audio/nar035.mp3",s_nar035a_mp3:"media/audio/nar035a.mp3",s_nar037_mp3:"media/audio/nar037.mp3",s_nar038_mp3:"media/audio/nar038.mp3",s_store_purchase_mp3:"media/audio/store_purchase.mp3",s_prevButton:"media/ccstudio/images/prevbutton.png",s_SCgoldgettinstorybg:"media/ccstudio/images/sc-gold-gettin-story-bg.jpg",s_score_nugget:"media/ccstudio/images/score_nugget.png",s_smokeParticleTexture:"media/images/particletexture.png",s_smokePlist:"media/ccstudio/particles/smoke.plist",s_titleBG:"media/ccstudio/images/newtitle-greeneyes-button.jpg",s_titlePlayButton:"media/ccstudio/images/playbutton.png",skip_btn:"media/ccstudio/images/sc-btn-skip.png",yes_button:"media/ccstudio/images/yesbutton.png",yes_button_grey:"media/ccstudio/images/yesbuttongrey.png"};var res={s_font_kengwin_ttf:{type:"font",name:"kengwin",srcs:["media/ccstudio/fonts/kengwin.ttf"]},s_gameobjects_plist:"media/images/gameobjects.plist",s_gameobjects_png:"media/images/gameobjects.png",s_BG1_dawn:"media/images/bga-1.jpg",s_BG1_dusk:"media/images/bga-3.jpg",s_BG1_noon:"media/images/bga-2.jpg",s_BG2_dawn:"media/images/bgb-1.jpg",s_BG2_dusk:"media/images/bgb-3.jpg",s_BG2_noon:"media/images/bgb-2.jpg",s_billyGoattheKid_pose_v01PNG:"media/ccstudio/images/billygoatthekid_pose_v01.png",s_blankButton:"media/ccstudio/images/blankbutton.png",s_boxParticleTexture:"media/particles/boxcorner.png",s_boxPlist:"media/particles/boxbreak.plist",s_cactus_png:"media/images/cactus.png",s_cactusParticleTexture:"media/particles/cactuspiece.png",s_cactusPlist:"media/particles/cactusbreak.plist",s_button_mp3:"media/audio/button.mp3",s_cal007_mp3:"media/audio/cal007.mp3",s_cal008_mp3:"media/audio/cal008.mp3",s_cal010_mp3:"media/audio/cal010.mp3",s_cal011_mp3:"media/audio/cal011.mp3",s_cal012_mp3:"media/audio/cal012.mp3",s_cal013_mp3:"media/audio/cal013.mp3",s_cal014_mp3:"media/audio/cal014.mp3",s_cal015_mp3:"media/audio/cal015.mp3",s_cal015a_mp3:"media/audio/cal015a.mp3",s_cal015b_mp3:"media/audio/cal015b.mp3",s_cal015c_mp3:"media/audio/cal015c.mp3",s_cal015d_mp3:"media/audio/cal015d.mp3",s_cal015e_mp3:"media/audio/cal015e.mp3",s_cal015f_mp3:"media/audio/cal015f.mp3",s_cal015g_mp3:"media/audio/cal015g.mp3",s_cal016_mp3:"media/audio/cal016.mp3",s_cal023_mp3:"media/audio/cal023.mp3",s_callieSpriteAnimationPlist:"media/animation/callieanimation.plist",s_callieSpriteAnimationPNG:"media/animation/callierunv8.png",s_callieStartImage:"media/images/callieonhorse-animation_0.png",s_captureSequenceJson:"media/ccstudio/capturesequence.json",s_dJrFont:"media/ccstudio/fonts/djuniorgold.fnt",s_dJrFontPNG:"media/ccstudio/fonts/djuniorgold.png",s_drop_coalParticle:"media/particles/dropcoal.plist",s_drop_cornParticle:"media/particles/dropcorn.plist",s_drop_flowerParticle:"media/particles/dropflower.plist",s_drop_milkParticle:"media/particles/dropmilk.plist",s_drop_moneyParticle:"media/particles/dropmoney.plist",s_drop_packageParticle:"media/particles/droppackage.plist",s_dTiles_Easy_1_1:"media/maps/dtiles_easy_1_1.tmx",s_dTiles_Easy_2_1:"media/maps/dtiles_easy_2_1.tmx",s_dTiles_Easy_3_1:"media/maps/dtiles_easy_3_1.tmx",s_dTiles_Easy_4_1:"media/maps/dtiles_easy_4_1.tmx",s_dTiles_Hard_1_1:"media/maps/dtiles_hard_1_1.tmx",s_dTiles_Hard_2_1:"media/maps/dtiles_hard_2_1.tmx",s_dTiles_Med_1_1:"media/maps/dtiles_med_1_1.tmx",s_dTiles_Med_2_1:"media/maps/dtiles_med_2_1.tmx",s_dTilesTutorial:"media/maps/dtiles_tutorial.tmx",s_font_kengwin_gold_fnt:"media/ccstudio/fonts/kengwingold.fnt",s_font_kengwin_gold_png:"media/ccstudio/fonts/kengwingold.png",s_font_kengwinbrown:"media/ccstudio/fonts/kengwinbrown.fnt",s_font_kengwinbrown_png:"media/ccstudio/fonts/kengwinbrown.png",minyagold_font:"media/ccstudio/fonts/minyagold.fnt",minyagold_png:"media/ccstudio/fonts/minyagold.png",s_hand:"media/ccstudio/images/sc-tutorial-hand.png",s_hand_tap:"media/ccstudio/images/sc-tutorial-hand-tap.png",s_HUD_BG:"media/ccstudio/images/hud_bg.png",s_HUD_BG_FRAME:"media/ccstudio/images/hud_bg_frame.png",s_hud_callie:"media/ccstudio/images/hud_callie.png",s_HUD_CollectFrame:"media/images/hud_collect_frame.png",s_HUD_help:"media/ccstudio/images/hud_help.png",s_HUD_rope:"media/ccstudio/images/hud_rope.png",s_HUD_sound:"media/ccstudio/images/hud_sound.png",s_HUDLayerJSON:"media/ccstudio/hudlayer.json",s_jailDoor:"media/ccstudio/images/jaildoor_v01.png",s_LevelIntroJson:"media/ccstudio/levelintro.json",s_levelSelectBG_JPG:"media/ccstudio/images/levelselectbg.jpg",s_levelSelectJson:"media/ccstudio/levelselect.json",s_loading_bar_bg:"media/images/loading_bar_bg.png",s_map_objects_1:"media/maps/objectsnewarrangementsd.png",s_map_objects_2:"media/maps/objectsnewarrangementsd-1.png",s_map_tiles_1:"media/maps/newtilearrangementsd.png",s_map_tiles_2:"media/maps/newtilearrangementsd-1.png",s_milkBandit_pose_v01PNG:"media/ccstudio/images/milkbandit_pose_v01.png",s_mouse:"media/ccstudio/images/sc-tutorial-mouse.png",s_mouse_click:"media/ccstudio/images/sc-tutorial-mouse-click.png",s_mx_presidescroller_mp3:"media/audio/mx-presidescroller.mp3",s_mx_sidescroller_loop_0_mp3:"media/audio/mx-sidescroller-loop-1.mp3",s_mx_sidescroller_loop_1_mp3:"media/audio/mx-sidescroller-loop-1.mp3",s_mx_sidescroller_loop_2_mp3:"media/audio/mx-sidescroller-loop-2.mp3",s_mx_sidescroller_loop_3_mp3:"media/audio/mx-sidescroller-loop-3.mp3",s_mx_sidescroller_loop_4_mp3:"media/audio/mx-sidescroller-loop-4.mp3",s_nar009_mp3:"media/audio/nar009.mp3",s_nar017_mp3:"media/audio/nar017.mp3",s_nar018_mp3:"media/audio/nar018.mp3",s_nar019_mp3:"media/audio/nar019.mp3",s_nar020_mp3:"media/audio/nar020.mp3",s_nar022_mp3:"media/audio/nar022.mp3",s_nar022a_mp3:"media/audio/nar022a.mp3",s_nar023_mp3:"media/audio/nar023.mp3",s_nar030_mp3:"media/audio/nar030.mp3",s_nextButton:"media/ccstudio/images/nextbutton.png",s_object_coalPNG:"media/particles/object_coal.png",s_object_cornPNG:"media/particles/object_corn.png",s_object_flowerPNG:"media/particles/object_flower.png",s_object_milkPNG:"media/particles/object_milk.png",s_object_moneyPNG:"media/particles/object_money.png",s_object_packagePNG:"media/particles/object_package.png",s_oswaldTravis_pose_v01PNG:"media/ccstudio/images/oswaldtravis_pose_v01.png",s_particlePickup:"media/particles/explodingring.plist",s_particlePickup_png:"media/particles/particletexture.png",s_peckSpriteAnimationPlist:"media/animation/peckanimation.plist",s_peckSpriteAnimationPNG:"media/animation/peckanimation.png",s_SCloadingbar:"media/images/sc-loading-bar.png",s_score_corn:"media/ccstudio/images/score_corn.png",s_score_nugget:"media/ccstudio/images/score_nugget.png",s_score_popup_bg:"media/ccstudio/images/scorepopupbg.png",s_ScorePopup_JSON:"media/ccstudio/scorepopup.json",s_sfx_callie_whooee_mp3:"media/audio/sfx-callie-whooee.mp3",s_sfx_callie_yeehaw_mp3:"media/audio/sfx-callie-yeehaw.mp3",s_sfx_clementine_neigh_mp3:"media/audio/sfx-clementine-neigh.mp3",s_sfx_gallop1_mp3:"media/audio/sfx-gallop1.mp3",s_sfx_gallop2_mp3:"media/audio/sfx-gallop2.mp3",s_sfx_goldnugget_mp3:"media/audio/sfx-goldnugget.mp3",s_sfx_item_bad_mp3:"media/audio/sfx-item-bad.mp3",s_sfx_item_collect_mp3:"media/audio/sfx-item-collect.mp3",s_sfx_peck_ohyeah_mp3:"media/audio/sfx-peck-ohyeah.mp3",s_sfx_peck_woohoo_mp3:"media/audio/sfx-peck-woohoo.mp3",s_sfx_smash_block_mp3:"media/audio/sfx-smash-block.mp3",s_sfx_smash_cactus_mp3:"media/audio/sfx-smash-cactus.mp3",s_sfx_smash_tumbleweed_mp3:"media/audio/sfx-smash-tumbleweed.mp3",s_sfx_sparky_neigh_mp3:"media/audio/sfx-sparky-neigh.mp3",s_sfx_timer_mp3:"media/audio/sfx-timer.mp3",s_sfx_toby_boost_mp3:"media/audio/sfx-toby-boost.mp3",s_sfx_toby_run_mp3:"media/audio/sfx-toby-run.mp3",s_sfx_toby_yay1_mp3:"media/audio/sfx-toby-yay1.mp3",s_sfx_toby_yay2_mp3:"media/audio/sfx-toby-yay2.mp3",s_sfx_toby_yay3_mp3:"media/audio/sfx-toby-yay3.mp3",s_taphelp_json:"media/ccstudio/taphelp.json",s_clickhelp_json:"media/ccstudio/clickhelp.json",s_skybase:"media/images/skybase.jpg",s_smokeParticleTexture:"media/particles/particletexture.png",s_smokePlist:"media/ccstudio/particles/smoke.plist",s_sparkle_plist:"media/particles/sparkletouch.plist",s_sparkle_png:"media/particles/sparkletouchtexture.png",s_stoneParticleTexture:"media/particles/stonebreak.png",s_stonePlist:"media/particles/stonebreak.plist",s_tobySpriteAnimationPlist:"media/animation/tobyanimation.plist",s_tobySpriteAnimationPNG:"media/animation/tobyanimation.png",s_trainBandits_pose_v01PNG:"media/ccstudio/images/trainbandits_pose_v01.png",s_tumbleweedParticleTexture:"media/particles/tumbleweedpiece.png",s_tumbleweedPlist:"media/particles/tumbleweedbreak.plist",skip_btn:"media/ccstudio/images/sc-btn-skip.png"};var sortRes={s_SCgoldgettinstorybg:"media/ccstudio/images/sc-gold-gettin-story-bg.jpg",s_font_kengwin_ttf:{type:"font",name:"kengwin",srcs:["media/ccstudio/fonts/kengwin.ttf"]},minyagold_font:"media/ccstudio/fonts/minyagold.fnt",minyagold_png:"media/ccstudio/fonts/minyagold.png",s_mailBG:"media/ccstudio/images/sc-mail-story-bg.jpg",s_score_bg:"media/ccstudio/images/score_bg.jpg",s_button_mp3:"media/audio/button.mp3",s_cal029a_mp3:"media/audio/cal029a.mp3",s_barrel:"media/ccstudio/images/sc-gold-gettin-game-barrel-2.png",s_blankButton:"media/ccstudio/images/blankbutton.png",s_cal017_mp3:"media/audio/cal017.mp3",s_cal018_mp3:"media/audio/cal018.mp3",s_cal019_mp3:"media/audio/cal019.mp3",s_cal020_mp3:"media/audio/cal020.mp3",s_cal021_mp3:"media/audio/cal021.mp3",s_cal022_mp3:"media/audio/cal022.mp3",s_cal023_mp3:"media/audio/cal023.mp3",s_cal024_mp3:"media/audio/cal024.mp3",s_cal025_mp3:"media/audio/cal025.mp3",s_cal026_mp3:"media/audio/cal026.mp3",s_cal027_mp3:"media/audio/cal027.mp3",s_cal028_mp3:"media/audio/cal028.mp3",s_cal029_mp3:"media/audio/cal029.mp3",s_cal030_mp3:"media/audio/cal030.mp3",s_cal031_mp3:"media/audio/cal031.mp3",s_cal032_mp3:"media/audio/cal032.mp3",s_cal033_mp3:"media/audio/cal033.mp3",s_cal034_mp3:"media/audio/cal034.mp3",s_cal035_mp3:"media/audio/cal035.mp3",s_cal036_mp3:"media/audio/cal036.mp3",s_cal037_mp3:"media/audio/cal037.mp3",s_cal038_mp3:"media/audio/cal038.mp3",s_clock_still:"media/ccstudio/images/clockanim1.png",s_font_kengwin_gold_fnt:"media/ccstudio/fonts/kengwingold.fnt",s_font_kengwin_gold_fnt:"media/ccstudio/fonts/kengwingold.fnt",s_font_kengwin_gold_png:"media/ccstudio/fonts/kengwingold.png",s_font_kengwin_gold_png:"media/ccstudio/fonts/kengwingold.png",s_game_end_bg:"media/ccstudio/images/game_end_bg.jpg",s_game_end_characters:"media/ccstudio/images/game_end_characters.png",s_game_end_json:"media/ccstudio/gameendsequence.json",s_game_end_shadows:"media/ccstudio/images/game_end_shadows.png",s_hud_layer_score:"media/ccstudio/hudlayerscore.json",s_hud_score_bg:"media/images/score_hud_bg.png",s_jailBG1:"media/ccstudio/images/billygoatthekid_jail_v03.jpg",s_jailBG2:"media/images/oswaldtravis_jail_v03.jpg",s_jailBG3:"media/images/milkbandit_jail_v03.jpg",s_jailBG4:"media/images/trainbandits_jail_v03.jpg",s_label_coal1:"media/images/coal1.png",s_label_coal2:"media/images/coal2.png",s_label_coal3:"media/images/coal3.png",s_label_corn1:"media/ccstudio/images/corn1.png",s_label_corn2:"media/ccstudio/images/corn2.png",s_label_corn3:"media/ccstudio/images/corn3.png",s_label_flower1:"media/images/flower1.png",s_label_flower2:"media/images/flower2.png",s_label_flower3:"media/images/flower3.png",s_label_milk1:"media/images/milk1.png",s_label_milk2:"media/images/milk2.png",s_label_milk3:"media/images/milk3.png",s_label_money1:"media/images/money1.png",s_label_money2:"media/images/money2.png",s_label_money3:"media/images/money3.png",s_label_package1:"media/images/box1.png",s_label_package2:"media/images/box2.png",s_label_package3:"media/images/box3.png",s_levelSelectBG_JPG:"media/ccstudio/images/levelselectbg.jpg",s_levelSelectJson:"media/ccstudio/levelselect.json",s_loading_bar_bg:"media/images/loading_bar_bg.png",s_missionEndJson:"media/ccstudio/missionend.json",s_mx_after_level_gameEnd_mp3:"media/audio/mx-after-level-gameend.mp3",s_mx_after_level_mp3:"media/audio/mx-after-level.mp3",s_mx_capture_sequence_mp3:"media/audio/mx-capture-sequence.mp3",s_captureSequenceJson:"media/ccstudio/capturesequence.json",s_mx_sortinggame_loop_mp3:"media/audio/mx-sortinggame_loop.mp3",s_nar021_mp3:"media/audio/nar021.mp3",s_nar022a_mp3:"media/audio/nar022a.mp3",s_nar023_mp3:"media/audio/nar023.mp3",s_nar024_mp3:"media/audio/nar024.mp3",s_nextButton:"media/ccstudio/images/nextbutton.png",s_nextButton:"media/ccstudio/images/nextbutton.png",s_particlePickup:"media/particles/explodingring.plist",s_prejail_json:"media/ccstudio/prejail.json",s_prejail_toby_peck:"media/ccstudio/images/before_jailhouse_toby_peck.png",s_presort_json:"media/ccstudio/presort.json",s_presort_toby_peck:"media/ccstudio/images/before_sort_toby_peck.png",s_SCloadingbar:"media/images/sc-loading-bar.png",s_score_coal:"media/images/score_coal.png",s_score_corn:"media/ccstudio/images/score_corn.png",s_score_flower:"media/images/score_flower.png",s_score_hud_coal:"media/images/hud_coal.png",s_score_hud_corn:"media/images/hud_corn.png",s_score_hud_flower:"media/images/hud_flower.png",s_score_hud_milk:"media/images/hud_milk.png",s_score_hud_money:"media/images/hud_money.png",s_score_hud_package:"media/images/hud_package.png",s_score_milk:"media/images/score_milk.png",s_score_money:"media/images/score_money.png",s_score_nugget:"media/ccstudio/images/score_nugget.png",s_score_package:"media/images/score_package.png",s_score_popup_bg:"media/ccstudio/images/scorepopupbg.png",s_ScorePopupJSONSort:"media/ccstudio/scorepopupsort.json",s_sfx_item_collect_mp3:"media/audio/sfx-item-collect.mp3",s_sfx_jail_closing_shut_mp3:"media/audio/sfx-jail-closing-shut.mp3",s_sfx_timer_mp3:"media/audio/sfx-timer.mp3",s_sfx_whistle_mp3:"media/audio/sfx-whistle.mp3",s_sort_clock_plist:"media/animation/clockframes.plist",s_sort_clock_png:"media/animation/clockframes.png",s_sortGameHelpJson:"media/ccstudio/sortgamehelp.json",s_sortGameSceneJson:"media/ccstudio/sortgame.json",s_sorting_coal1:"media/images/sorting_coal1.png",s_sorting_coal2:"media/images/sorting_coal2.png",s_sorting_coal3:"media/images/sorting_coal3.png",s_sorting_corn1:"media/ccstudio/images/sorting_corn1.png",s_sorting_corn2:"media/ccstudio/images/sorting_corn2.png",s_sorting_corn3:"media/ccstudio/images/sorting_corn3.png",s_sorting_flower1:"media/images/sorting_flower1.png",s_sorting_flower2:"media/images/sorting_flower2.png",s_sorting_flower3:"media/images/sorting_flower3.png",s_sorting_milk1:"media/images/sorting_milk3.png",s_sorting_milk2:"media/images/sorting_milk2.png",s_sorting_milk3:"media/images/sorting_milk1.png",s_sorting_money1:"media/images/sorting_money1.png",s_sorting_money2:"media/images/sorting_money2.png",s_sorting_money3:"media/images/sorting_money3.png",s_sorting_package1:"media/images/sorting_box1.png",s_sorting_package2:"media/images/sorting_box2.png",s_sorting_package3:"media/images/sorting_box3.png",s_sparkle_plist:"media/particles/sparkletouch.plist",s_sparkle_png:"media/particles/sparkletouchtexture.png",skip_btn:"media/ccstudio/images/sc-btn-skip.png"};var jailhouseRes={s_font_kengwin_ttf:{type:"font",name:"kengwin",srcs:["media/ccstudio/fonts/kengwin.ttf"]},s_nar010_alt_mp3:"media/audio/nar010_alt.mp3",s_nar009_alt_mp3:"media/audio/nar009_alt.mp3",s_printerbutton_nuggetstore:"media/ccstudio/images/printerbutton-nuggetstore.jpg",s_button_mp3:"media/audio/button.mp3",s_sfx_phone_ring_locked_mp3:"media/audio/sfx-phone-ring-locked.mp3",s_cal037_mp3:"media/audio/cal037.mp3",s_cal038_mp3:"media/audio/cal038.mp3",s_nar024_mp3:"media/audio/nar024.mp3",s_arrow_point_left:"media/ccstudio/images/arrow_point_left.png",s_arrow_point_right:"media/ccstudio/images/arrow_point_right.png",s_arrow_point_right_down:"media/ccstudio/images/arrow_point_right_down.png",s_arrow_point_up_left:"media/ccstudio/images/arrow_point_up_left.png",s_back_button:"media/images/backbutton.png",s_cal006_mp3:"media/audio/cal006.mp3",s_callie_idle_001:"media/ccstudio/images/callie_idle_turn_v06_001.png",s_callie_idle_004:"media/images/callie_idle_turn_v06_007.png",s_callie_idle_007:"media/images/callie_idle_turn_v06_013.png",s_callie_idle_010:"media/images/callie_idle_turn_v06_019.png",s_callie_idle_013:"media/images/callie_idle_turn_v06_025.png",s_callie_idle_016:"media/images/callie_idle_turn_v06_031.png",s_callie_idle_019:"media/images/callie_idle_turn_v06_037.png",s_callie_idle_022:"media/images/callie_idle_turn_v06_043.png",s_callie_idle_025:"media/images/callie_idle_turn_v06_049.png",s_callie_idle_028:"media/images/callie_idle_turn_v06_055.png",s_callie_idle_031:"media/images/callie_idle_turn_v06_061.png",s_callie_idle_034:"media/images/callie_idle_turn_v06_067.png",s_callie_idle_037:"media/images/callie_idle_turn_v06_073.png",s_callie_idle_040:"media/images/callie_idle_turn_v06_079.png",s_callie_idle_043:"media/images/callie_idle_turn_v06_085.png",s_callie_idle_046:"media/images/callie_idle_turn_v06_091.png",s_callie_idle_049:"media/images/callie_idle_turn_v06_097.png",s_callie_idle_052:"media/images/callie_idle_turn_v06_103.png",s_callie_idle_055:"media/images/callie_idle_turn_v06_109.png",s_callie_image_png:"media/ccstudio/images/sc-sample-silly-servin-bar-callie.png",s_callie_jailhouse_blink_001:"media/images/callie_idle_blink_v06_010.png",s_callie_jailhouse_blink_002:"media/images/callie_idle_blink_v06_011.png",s_callie_jailhouse_blink_003:"media/images/callie_idle_blink_v06_012.png",s_callie_jailhouse_blink_004:"media/images/callie_idle_blink_v06_013.png",s_callie_jailhouse_blink_005:"media/images/callie_idle_blink_v06_014.png",s_callie_jailhouse_blink_005:"media/images/callie_idle_blink_v06_015.png",s_callie_jailhouse_blink_006:"media/images/callie_idle_blink_v06_017.png",s_callie_jailhouse_blink_007:"media/images/callie_idle_blink_v06_016.png",s_callie_jailhouse_blink_009:"media/images/callie_idle_blink_v06_018.png",s_callie_jailhouse_blink_010:"media/images/callie_idle_blink_v06_019.png",s_font_kengwin_gold_fnt:"media/ccstudio/fonts/kengwingold.fnt",s_font_kengwin_gold_png:"media/ccstudio/fonts/kengwingold.png",s_font_kengwinbrown:"media/ccstudio/fonts/kengwinbrown.fnt",s_font_kengwinbrown_png:"media/ccstudio/fonts/kengwinbrown.png",minyagold_font:"media/ccstudio/fonts/minyagold.fnt",minyagold_png:"media/ccstudio/fonts/minyagold.png",s_green_map_arrow:"media/ccstudio/images/greenarrow.png",s_HUD_BG:"media/ccstudio/images/hud_bg.png",s_HUD_help:"media/ccstudio/images/hud_help.png",s_HUD_sound:"media/ccstudio/images/hud_sound.png",s_jailhouseBG:"media/ccstudio/images/jailhouse_bg_v06.jpg",s_jailhousePhoneHooked:"media/ccstudio/images/phone_onhook_v05_clr.png",s_jailhousePhoneUnhooked:"media/images/phone_offhook_v05.png",s_jailhouseScene:"media/ccstudio/jailhouse.json",s_mapLayer:"media/ccstudio/maplayer.json",s_MAPPNG:"media/ccstudio/images/map.png",s_mx_jailhouse_mp3:"media/audio/mx-jailhouse.mp3",s_mx_score_screen_mp3:"media/audio/mx-score-screen.mp3",s_nar005_mp3:"media/audio/nar005.mp3",s_nar007a_mp3:"media/audio/nar007a.mp3",s_nar007b_mp3:"media/audio/nar007b.mp3",s_nar008_mp3:"media/audio/nar008.mp3",s_nar008a_mp3:"media/audio/nar008a.mp3",s_nar009_mp3:"media/audio/nar009.mp3",s_nar010_mp3:"media/audio/nar010.mp3",s_nar011_mp3:"media/audio/nar011.mp3",s_nar011a_1_mp3:"media/audio/nar011a-1.mp3",s_nar011a_mp3:"media/audio/nar011a.mp3",s_nar011b_mp3:"media/audio/nar011b.mp3",s_nar011c_mp3:"media/audio/nar011c.mp3",s_nar011d_mp3:"media/audio/nar011d.mp3",s_nar011e_mp3:"media/audio/nar011e.mp3",s_nar012_mp3:"media/audio/nar012.mp3",s_nar013_mp3:"media/audio/nar013.mp3",s_nar014_mp3:"media/audio/nar014.mp3",s_nar014a_mp3:"media/audio/nar014a.mp3",s_nar015_mp3:"media/audio/nar015.mp3",s_nar016_mp3:"media/audio/nar016.mp3",s_nar016b_mp3:"media/audio/nar016b.mp3",s_nar025_mp3:"media/audio/nar025.mp3",s_nar026_mp3:"media/audio/nar026.mp3",s_nar027_mp3:"media/audio/nar027.mp3",s_nar028_mp3:"media/audio/nar028.mp3",s_nar029_mp3:"media/audio/nar029.mp3",s_phone_ellacow2_mp3:"media/audio/phone-ellacow2.mp3",s_phone_farmerstinky_mp3:"media/audio/phone-farmerstinky.mp3",s_phone_governer_mp3:"media/audio/phone-governor.mp3",s_phone_peck_mp3:"media/audio/phone-peck.mp3",s_phone_priscilla2_mp3:"media/audio/phone-priscilla2.mp3",s_phone_priscilla3_mp3:"media/audio/phone-priscilla3.mp3",s_phone_priscilla_mp3:"media/audio/phone-priscilla.mp3",s_phone_townsfolk_mp3:"media/audio/phone-townsfolk.mp3",s_nugget_button:"media/images/nugget_button.png",s_nugget_store:"media/ccstudio/nuggetstore.json",s_nugget_store_png:"media/ccstudio/images/nuggetstore.png",s_office_help_json:"media/ccstudio/officehelpsequence.json",s_photo_1:"media/ccstudio/images/photo1.png",s_photo_2:"media/images/photo2.png",s_photo_3:"media/images/photo3.png",s_photo_4:"media/images/photo4.png",s_photo_5:"media/images/photo5.png",s_photo_6:"media/images/photo6.png",s_photo_7:"media/images/photo7.png",s_photo_8:"media/images/photo8.png",s_photo_9:"media/images/photo9.png",s_score_nugget:"media/ccstudio/images/score_nugget.png",s_sfx_frame_mp3:"media/audio/sfx-frame.mp3",s_sfx_phone_hangup_mp3:"media/audio/sfx-phone-hangup.mp3",s_sfx_phone_ring_mp3:"media/audio/sfx-phone-ring.mp3",s_sparkle_plist:"media/particles/sparkletouch.plist",s_sparkle_png:"media/particles/sparkletouchtexture.png",s_store_purchase_mp3:"media/audio/store_purchase.mp3",s_sparkle_plist:"media/particles/sparkletouch.plist",s_sparkle_png:"media/particles/sparkletouchtexture.png"};if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){var title_resources=[];for(var i in titleRes){if(typeof titleRes[i]==="string"){titleRes[i]=titleRes[i].replace(".mp3",".ogg");cc.log(titleRes[i]);title_resources.push(titleRes[i])}}var g_resources=[];for(var i in res){if(typeof res[i]==="string"){res[i]=res[i].replace(".mp3",".ogg");g_resources.push(res[i])}}var sort_resources=[];for(var i in sortRes){if(typeof sortRes[i]==="string"){sortRes[i]=sortRes[i].replace(".mp3",".ogg");sort_resources.push(sortRes[i])}}var jail_resources=[];for(var i in jailhouseRes){if(typeof jailhouseRes[i]==="string"){jailhouseRes[i]=jailhouseRes[i].replace(".mp3",".ogg");jail_resources.push(jailhouseRes[i])}}}else{var title_resources=[];for(var i in titleRes){title_resources.push(titleRes[i])}var g_resources=[];for(var i in res){g_resources.push(res[i])}var sort_resources=[];for(var i in sortRes){sort_resources.push(sortRes[i])}var jail_resources=[];for(var i in jailhouseRes){jail_resources.push(jailhouseRes[i])}};