<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Sheriff Callie's Wild West: The Great Bandit Round-Up</title>
    <link rel="icon" type="image/GIF" href="media/icons/favicon.ico" />
    <meta name="full-screen" content="yes" />
    <meta name="screen-orientation" content="landscape" />
    <meta name="x5-fullscreen" content="true" />
    <meta name="360-fullscreen" content="true" />
    <meta name="apple-mobile-web-app-title" content="Sherrif Callie's Wild West: The Great Bandit Round-Up">
    <meta name="robots" content="noindex,nofollow" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="viewport" content="minimal-ui, initial-scale=1, maximum-scale=1, width=device-width, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="HandheldFriendly" content="true" />
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="icons/favicon.png">
    <link rel="shortcut icon" href="./media/images/icons/favicon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="./media/images/icons/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="./media/images/icons/apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="./media/images/icons/apple-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="./media/images/icons/apple-icon-144x144.png" />
    <style>
    body,
    canvas,
    div {
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none;
        -khtml-user-select: none;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }
    html {
        background: url(media/images/ui_images/common/black.png) no-repeat center center fixed;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
    }
    </style>
</head>

<body style="padding:0; margin: 0; background-color:#000">
    <script>
    var ua = window.navigator.userAgent;
    var msie = ua.indexOf("MSIE ");
    var win = ua.indexOf("Windows");
    var oldSize = {};
    if (msie > 0 || win > 0) {
        document.write('<div>');
    } else {
        document.write('<div style="position:absolute;width:100%;height:100%;">');
    }

    function adjustGameSize() {
        if (cc.view) {
            // if(cc.view.getFrameSize.width != window.innerWidth || cc.view.getFrameSize.height != window.innerHeight){
            cc.view.setFrameSize(window.innerWidth, window.innerHeight);
            window.scrollTo(0, 20);
            // }
        }
    }
    window.onresize = function(event) {
        adjustGameSize();
    };

    function getInternetExplorerVersion() {
        var rv = 12;
        if (navigator.appName == 'Microsoft Internet Explorer') {
            var ua = navigator.userAgent;
            var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
            if (re.exec(ua) != null) rv = parseFloat(RegExp.$1);
        } else if (navigator.appName == 'Netscape') {
            var ua = navigator.userAgent;
            var re = new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})");
            if (re.exec(ua) != null) rv = parseFloat(RegExp.$1);
        }
        return rv;
    }
    if (getInternetExplorerVersion() < 11) {
        window.location.href = "unsupported.html";
    }

    function checkCookie() {
        var cookieEnabled = (navigator.cookieEnabled) ? true : false;
        if (typeof navigator.cookieEnabled == "undefined" && !cookieEnabled) {
            document.cookie = "testcookie";
            cookieEnabled = (document.cookie.indexOf("testcookie") != -1) ? true : false;
        }
        return (cookieEnabled) ? true : showCookieFail();
    }

    function showCookieFail() {
        window.location.href = "nocookies.html";
    }
    checkCookie();
    </script>
    <script type="text/javascript">
    var appVer = navigator.appVersion;
    var searchVersion = /\s(\d)_\d/;
    var searchDevice = /\s[(](\w+\s?\w*)[;]\s/;
    var isIPhone = false;
    var isIPad = false;
    if (searchVersion.exec(appVer) && searchDevice.exec(appVer)) {
        var deviceVersion = searchVersion.exec(appVer)[1];
        if ("iPhone" == searchDevice.exec(appVer)[1]) {
            isIPhone = deviceVersion;
        }
        if ("iPhone Simulator" == searchDevice.exec(appVer)[1]) {
            isIPhone = deviceVersion;
        }
        if ("iPad" == searchDevice.exec(appVer)[1]) {
            isIPad = deviceVersion;
        }
    }
    LOFI_MODE = false;
    if (isIPad) {
        if (devicePixelRatio < 2) {
            // iPad or iPad2 detected
            // window.location.href = "unsupported.html";
            LOFI_MODE = true;
        }
    }
    if (isIPhone) {
        if (window.screen.height == 960 / 2) {
            // iPhone4s or lesser detected
            // window.location.href = "unsupported.html";
            LOFI_MODE = true;
        }
    }
    </script>
    <canvas id="gameCanvas" width="928" height="500"></canvas>
    </div>
    <script src="js/libs/frameworks/soundjs/soundjs-0.6.1.min.js"></script>
    <script src="js/libs/frameworks/soundjs/flashaudioplugin-0.6.1.min.js"></script>
    <script>
    CALLIE_GAME_MODE = {};

    function skipSound() {
        CALLIE_GAME_MODE.lowFi = "true";
        createjs.Sound.play = function(arg1, arg2) {
            var soundObject = {};
            soundObject.setVolume = function(arg1) {};
            soundObject.stop = function() {};
            soundObject.play = function(arg1, arg2) {};
            return soundObject;
        };
        createjs.Sound.stop = function() {};
    }
    if (window.devicePixelRatio <= 1 && navigator.userAgent.match(/iPad/i) != null) {
        // iPad2
        skipSound();
    }
    if (window.devicePixelRatio == 2 && window.screen.height == (960 / 2)) {
        // iPhone4s
        skipSound();
    }

    function initSound() {
        if (CALLIE_GAME_MODE.lowFi != "true") {
            createjs.Sound.alternateExtensions = ["mp3", "ogg"];
            createjs.FlashAudioPlugin.swfPath = "js/libs/frameworks/soundjs/flashaudio/";
            var ua = window.navigator.userAgent;
            var msie = ua.indexOf("MSIE ");
            var win = ua.indexOf("Windows");
            var oldSize = {};
            if (getInternetExplorerVersion() == 11) {
                createjs.Sound.registerPlugins(
                    [createjs.FlashAudioPlugin,
                        createjs.WebAudioPlugin,
                        createjs.HTMLAudioPlugin
                    ]);
            } else if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {
                createjs.Sound.registerPlugins(
                    [createjs.HTMLAudioPlugin,
                        createjs.WebAudioPlugin,
                        createjs.FlashAudioPlugin
                    ]);
            } else {
                createjs.Sound.registerPlugins(
                    [createjs.WebAudioPlugin,
                        createjs.HTMLAudioPlugin,
                        createjs.FlashAudioPlugin
                    ]);
                var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)
                if (isChrome) {
                    createjs.Sound.activePlugin.context.destination.channelCount = 1;
                }
            }
        }
    }
    initSound();
    </script>
    <script src="js/libs/cocos2d-3.6.min.js" defer></script>
    <script type="text/javascript" src="require.min.js" defer></script>
    <script type="text/javascript" src="dolWebAnalytics.js"></script>
    <script type="text/javascript" src="gameTrackingProps.js" defer></script>
    <script type="text/javascript" src="gameTracking.js" defer></script>
    <script type="text/javascript" src="global_cto.js" defer></script>
    <script type="text/javascript" src="isl.js" defer></script>
    <script>
    if (window.DeviceOrientationEvent) {
        window.addEventListener('deviceorientation', function(event) {
            checkHeight();
        }, false);
    }
    document.documentElement.style.backgroundImage = 'url(media/images/ui_images/common/black.png)';

    function checkHeight() {
        var gameCanvas = document.getElementById("gameCanvas");
        var cocos2dGameContainer = document.getElementById("cocos2dGameContainer");
        try {
            if (window.orientation == 0 || window.orientation == 180) {
                // gameCanvas.style.display = "none";
                document.documentElement.style.backgroundImage = 'url(media/images/ui_images/common/rotate-image.png)';
                Cocos2dGameContainer.style.display = "none";
                adjustGameSize();
            } else {
                // gameCanvas.style.display = "block";
                document.documentElement.style.backgroundImage = 'url(media/images/ui_images/common/black.png)';
                Cocos2dGameContainer.style.display = "block";
                // adjustGameSize();
            }
        } catch (e) {
            //
        } finally {}
    }
    window.onload = function() {
        runISL();
        //cto.track();
        var fileref = document.createElement('script');
        fileref.setAttribute("type", "text/javascript");
        fileref.setAttribute("src", "gameProps.js");
        document.getElementsByTagName("head")[0].appendChild(fileref);
    }

    function gameStart() {
        console.log("gameStart");
        setTimeout(function() {
            var fileref = document.createElement('script');
            fileref.setAttribute("type", "text/javascript");
            fileref.setAttribute("src", "js/game.min.js");
            document.getElementsByTagName("head")[0].appendChild(fileref);
            setTimeout(adjustGameSize, 500);
        }, 250);
    }
    </script>
</body>

</html>