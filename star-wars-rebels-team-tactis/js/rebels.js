function hasCanvasSupport(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}function gameStart(){window.valid=!0}define("fido/app/Fallback",["require","exports","module"],function(t,e,i){var s=function(t){this.domElement=t||document.body;var e={message:'<p>Uh-oh! It looks like you need to update your browser before you\'ll be able to play this game</p><p>In the meantime, check out <a href="#brand_url">this</a> or <a href="#cbeebies_games_url">this</a>.',brand_url:"http://www.someurl.tld/",games_url:"http://www.someurl.tld/",enabled:!0},i=e.message;i=i.replace("#brand_url",e.brand_url),i=i.replace("#games_url",e.games_url),this.active=!1,this.checkDevice(navigator.userAgent),this.checkCanvas(),this.checkCookies()};s.prototype.constructor=s,s.prototype={checkDevice:function(t){for(var e=[/(Mobile\/8C148)/,/(Mobile\/8C148a)/,/(Mobile\/8A293)/,/(Mobile\/8A306)/,/(Mobile\/8A400)/,/(Mobile\/8B117)/,/(Mobile\/8E128)/,/(Mobile\/8E200)/,/(Mobile\/8E303)/,/(Mobile\/8E401)/,/(Mobile\/8E600)/,/(Mobile\/8E501)/,/(Mobile\/8G4)/,/(Mobile\/8H7)/,/(Mobile\/8J2)/,/(Mobile\/8K2)/,/(Mobile\/8L1)/,/(Mobile\/9A334)/,/(Mobile\/10A523)/,/(Mobile\/9A405)/],i=0;i<e.length;i++)if(t.match(e[i])){var s=ASSET_URL+"img/unsupported.jpg";return this.createBigImage(s),!1}if(/iP[ao]d|iPhone/i.test(t)){var o=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1;if(6>o){var s=ASSET_URL+"img/unsupported.jpg";return this.createBigImage(s),!1}}},checkCanvas:function(){if(!this.hasCanvasSupport()){var t=ASSET_URL+"img/unsupported.jpg";return this.createBigImage(t),!1}return!0},hasCanvasSupport:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},checkCookies:function(){if(!this.cookiesEnabled()){var t=ASSET_URL+"img/cookies.jpg";this.createBigImage(t)}},cookiesEnabled:function(){var t=navigator.cookieEnabled?!0:!1;return"undefined"!=typeof navigator.cookieEnabled||t||(document.cookie="testcookie",t=-1!=document.cookie.indexOf("testcookie")?!0:!1),t},createBigImage2:function(t){var e=document.createElement("div");e.style.backgroundPosition="50% 50%",e.style.backgroundColor="#3b3b3b",e.style.backgroundRepeat="no-repeat",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.bottom="0",e.style.right="0",e.style.zIndex=1e5,e.height="100%",e.width="100%",e.style.backgroundImage="url("+t+")",this.domElement.appendChild(e),this.active=!0},createBigImage:function(t){var e=new Image;e.style.backgroundPosition="50% 50%",e.style.backgroundColor="#3b3b3b",e.style.backgroundRepeat="no-repeat",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.bottom="0",e.style.right="0",e.style.zIndex=1e5,e.src=t,this.domElement.appendChild(e),window.onresize=function(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,s=t/750;s>1&&(s=1),e.width=750*s,e.height=500*s,e.style.left=t/2-750*s/2+"px",e.style.top=i/2-500*s/2+"px"},window.onresize(),this.active=!0}},i.exports=s});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},o=function(t,e,s){i.call(this,t,e,s),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=o.prototype.render},r=1e-10,n=i._internals,a=n.isSelector,h=n.isArray,l=o.prototype=i.to({},.1,{}),c=[];o.version="1.17.0",l.constructor=o,l.kill()._gc=!1,o.killTweensOf=o.killDelayedCallsTo=i.killTweensOf,o.getTweensOf=i.getTweensOf,o.lagSmoothing=i.lagSmoothing,o.ticker=i.ticker,o.render=i.render,l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},l.updateTo=function(t,e){var s,o=this.ratio,r=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(s in t)this.vars[s]=t[s];if(this._initted||r)if(e)this._initted=!1,r&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var n=this._time;this.render(0,!0,!1),this._initted=!1,this.render(n,!0,!1)}else if(this._time>0||r){this._initted=!1,this._init();for(var a,h=1/(1-o),l=this._firstPT;l;)a=l.s+l.c,l.c*=h,l.s=a-l.c,l=l._next}return this},l.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var s,o,a,h,l,c,u,d,p=this._dirty?this.totalDuration():this._totalDuration,f=this._time,m=this._totalTime,g=this._cycle,v=this._duration,y=this._rawPrevTime;if(t>=p?(this._totalTime=p,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(s=!0,o="onComplete",i=i||this._timeline.autoRemoveChildren),0===v&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>y||y===r)&&y!==t&&(i=!0,y>r&&(o="onReverseComplete")),this._rawPrevTime=d=!e||t||y===t?t:r)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===v&&y>0)&&(o="onReverseComplete",s=this._reversed),0>t&&(this._active=!1,0===v&&(this._initted||!this.vars.lazy||i)&&(y>=0&&(i=!0),this._rawPrevTime=d=!e||t||y===t?t:r)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(h=v+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=v-this._time),this._time>v?this._time=v:0>this._time&&(this._time=0)),this._easeType?(l=this._time/v,c=this._easeType,u=this._easePower,(1===c||3===c&&l>=.5)&&(l=1-l),3===c&&(l*=2),1===u?l*=l:2===u?l*=l*l:3===u?l*=l*l*l:4===u&&(l*=l*l*l*l),this.ratio=1===c?1-l:2===c?l:.5>this._time/v?l/2:1-l/2):this.ratio=this._ease.getRatio(this._time/v)),f===this._time&&!i&&g===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=f,this._totalTime=m,this._rawPrevTime=y,this._cycle=g,n.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!s?this.ratio=this._ease.getRatio(this._time/v):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==f&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):o||(o="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===v)&&(e||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==m||s)&&this._callback("onUpdate")),this._cycle!==g&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),o&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this._callback(o),0===v&&this._rawPrevTime===r&&d!==r&&(this._rawPrevTime=0))},o.to=function(t,e,i){return new o(t,e,i)},o.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new o(t,e,i)},o.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new o(t,e,s)},o.staggerTo=o.allTo=function(t,e,r,n,l,u,d){n=n||0;var p,f,m,g,v=r.delay||0,y=[],_=function(){r.onComplete&&r.onComplete.apply(r.onCompleteScope||this,arguments),l.apply(d||r.callbackScope||this,u||c)};for(h(t)||("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=s(t))),t=t||[],0>n&&(t=s(t),t.reverse(),n*=-1),p=t.length-1,m=0;p>=m;m++){f={};for(g in r)f[g]=r[g];f.delay=v,m===p&&l&&(f.onComplete=_),y[m]=new o(t[m],e,f),v+=n}return y},o.staggerFrom=o.allFrom=function(t,e,i,s,r,n,a){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,o.staggerTo(t,e,i,s,r,n,a)},o.staggerFromTo=o.allFromTo=function(t,e,i,s,r,n,a,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,o.staggerTo(t,e,s,r,n,a,h)},o.delayedCall=function(t,e,i,s,r){return new o(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:s,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:r,overwrite:0})},o.set=function(t,e){return new o(t,0,e)},o.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var u=function(t,e){for(var s=[],o=0,r=t._first;r;)r instanceof i?s[o++]=r:(e&&(s[o++]=r),s=s.concat(u(r,e)),o=s.length),r=r._next;return s},d=o.getAllTweens=function(e){return u(t._rootTimeline,e).concat(u(t._rootFramesTimeline,e))};o.killAll=function(t,i,s,o){null==i&&(i=!0),null==s&&(s=!0);var r,n,a,h=d(0!=o),l=h.length,c=i&&s&&o;for(a=0;l>a;a++)n=h[a],(c||n instanceof e||(r=n.target===n.vars.onComplete)&&s||i&&!r)&&(t?n.totalTime(n._reversed?0:n.totalDuration()):n._enabled(!1,!1))},o.killChildTweensOf=function(t,e){if(null!=t){var r,l,c,u,d,p=n.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=s(t)),h(t))for(u=t.length;--u>-1;)o.killChildTweensOf(t[u],e);else{r=[];for(c in p)for(l=p[c].target.parentNode;l;)l===t&&(r=r.concat(p[c].tweens)),l=l.parentNode;for(d=r.length,u=0;d>u;u++)e&&r[u].totalTime(r[u].totalDuration()),r[u]._enabled(!1,!1)}}};var p=function(t,i,s,o){i=i!==!1,s=s!==!1,o=o!==!1;for(var r,n,a=d(o),h=i&&s&&o,l=a.length;--l>-1;)n=a[l],(h||n instanceof e||(r=n.target===n.vars.onComplete)&&s||i&&!r)&&n.paused(t)};return o.pauseAll=function(t,e,i){p(!0,t,e,i)},o.resumeAll=function(t,e,i){p(!1,t,e,i)},o.globalTimeScale=function(e){var s=t._rootTimeline,o=i.ticker.time;return arguments.length?(e=e||r,s._startTime=o-(o-s._startTime)*s._timeScale/e,s=t._rootFramesTimeline,o=i.ticker.frame,s._startTime=o-(o-s._startTime)*s._timeScale/e,s._timeScale=t._rootTimeline._timeScale=e,e):s._timeScale},l.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},l.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},o},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,s,o=this.vars;for(s in o)i=o[s],h(i)&&-1!==i.join("").indexOf("{self}")&&(o[s]=this._swapSelfInParams(i));h(o.tweens)&&this.add(o.tweens,0,o.align,o.stagger)},o=1e-10,r=i._internals,n=s._internals={},a=r.isSelector,h=r.isArray,l=r.lazyTweens,c=r.lazyRender,u=[],d=_gsScope._gsDefine.globals,p=function(t){var e,i={};for(e in t)i[e]=t[e];return i},f=n.pauseCallback=function(t,e,i,s){var r,n=t._timeline,a=n._totalTime,h=t._startTime,l=0>t._rawPrevTime||0===t._rawPrevTime&&n._reversed,c=l?0:o,d=l?o:0;if(e||!this._forcingPlayhead){for(n.pause(h),r=t._prev;r&&r._startTime===h;)r._rawPrevTime=d,r=r._prev;for(r=t._next;r&&r._startTime===h;)r._rawPrevTime=c,r=r._next;e&&e.apply(s||n.vars.callbackScope||n,i||u),(this._forcingPlayhead||!n._paused)&&n.seek(a)}},m=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},g=s.prototype=new e;return s.version="1.17.0",g.constructor=s,g.kill()._gc=g._forcingPlayhead=!1,g.to=function(t,e,s,o){var r=s.repeat&&d.TweenMax||i;return e?this.add(new r(t,e,s),o):this.set(t,s,o)},g.from=function(t,e,s,o){return this.add((s.repeat&&d.TweenMax||i).from(t,e,s),o)},g.fromTo=function(t,e,s,o,r){var n=o.repeat&&d.TweenMax||i;return e?this.add(n.fromTo(t,e,s,o),r):this.set(t,o,r)},g.staggerTo=function(t,e,o,r,n,h,l,c){var u,d=new s({onComplete:h,onCompleteParams:l,callbackScope:c,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],a(t)&&(t=m(t)),r=r||0,0>r&&(t=m(t),t.reverse(),r*=-1),u=0;t.length>u;u++)o.startAt&&(o.startAt=p(o.startAt)),d.to(t[u],e,p(o),u*r);return this.add(d,n)},g.staggerFrom=function(t,e,i,s,o,r,n,a){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,s,o,r,n,a)},g.staggerFromTo=function(t,e,i,s,o,r,n,a,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,s,o,r,n,a,h)},g.call=function(t,e,s,o){return this.add(i.delayedCall(0,t,e,s),o)},g.set=function(t,e,s){return s=this._parseTimeOrLabel(s,0,!0),null==e.immediateRender&&(e.immediateRender=s===this._time&&!this._paused),this.add(new i(t,0,e),s)},s.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var o,r,n=new s(t),a=n._timeline;for(null==e&&(e=!0),a._remove(n,!0),n._startTime=0,n._rawPrevTime=n._time=n._totalTime=a._time,o=a._first;o;)r=o._next,e&&o instanceof i&&o.target===o.vars.onComplete||n.add(o,o._startTime-o._delay),o=r;return a.add(n,0),n},g.add=function(o,r,n,a){var l,c,u,d,p,f;if("number"!=typeof r&&(r=this._parseTimeOrLabel(r,0,!0,o)),!(o instanceof t)){if(o instanceof Array||o&&o.push&&h(o)){for(n=n||"normal",a=a||0,l=r,c=o.length,u=0;c>u;u++)h(d=o[u])&&(d=new s({tweens:d})),this.add(d,l),"string"!=typeof d&&"function"!=typeof d&&("sequence"===n?l=d._startTime+d.totalDuration()/d._timeScale:"start"===n&&(d._startTime-=d.delay())),l+=a;return this._uncache(!0)}if("string"==typeof o)return this.addLabel(o,r);if("function"!=typeof o)throw"Cannot add "+o+" into the timeline; it is not a tween, timeline, function, or string.";o=i.delayedCall(0,o)}if(e.prototype.add.call(this,o,r),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(p=this,f=p.rawTime()>o._startTime;p._timeline;)f&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},g.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&h(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},g._remove=function(t,i){e.prototype._remove.call(this,t,i);var s=this._last;return s?this._time>s._startTime+s._totalDuration/s._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},g.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},g.insert=g.insertMultiple=function(t,e,i,s){return this.add(t,e||0,i,s)},g.appendMultiple=function(t,e,i,s){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,s)},g.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},g.addPause=function(t,e,s,o){var r=i.delayedCall(0,f,["{self}",e,s,o],this);return r.data="isPause",this.add(r,t)},g.removeLabel=function(t){return delete this._labels[t],this},g.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},g._parseTimeOrLabel=function(e,i,s,o){var r;if(o instanceof t&&o.timeline===this)this.remove(o);else if(o&&(o instanceof Array||o.push&&h(o)))for(r=o.length;--r>-1;)o[r]instanceof t&&o[r].timeline===this&&this.remove(o[r]);if("string"==typeof i)return this._parseTimeOrLabel(i,s&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,s);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(r=e.indexOf("="),-1===r)return null==this._labels[e]?s?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(r-1)+"1",10)*Number(e.substr(r+1)),e=r>1?this._parseTimeOrLabel(e.substr(0,r-1),0,s):this.duration()}return Number(e)+i},g.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},g.stop=function(){return this.paused(!0)},g.gotoAndPlay=function(t,e){return this.play(t,e)},g.gotoAndStop=function(t,e){return this.pause(t,e)},g.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,r,n,a,h,u=this._dirty?this.totalDuration():this._totalDuration,d=this._time,p=this._startTime,f=this._timeScale,m=this._paused;if(t>=u)this._totalTime=this._time=u,this._reversed||this._hasPausedChild()||(r=!0,a="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===o)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>o&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:o,t=u+1e-4;else if(1e-7>t)if(this._totalTime=this._time=0,(0!==d||0===this._duration&&this._rawPrevTime!==o&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(a="onReverseComplete",r=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=r=!0,a="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:o,0===t&&r)for(s=this._first;s&&0===s._startTime;)s._duration||(r=!1),s=s._next;t=0,this._initted||(h=!0)}else this._totalTime=this._time=this._rawPrevTime=t;if(this._time!==d&&this._first||i||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==d&&t>0&&(this._active=!0),0===d&&this.vars.onStart&&0!==this._time&&(e||this._callback("onStart")),this._time>=d)for(s=this._first;s&&(n=s._next,!this._paused||m);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=n;else for(s=this._last;s&&(n=s._prev,!this._paused||m);)(s._active||d>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=n;this._onUpdate&&(e||(l.length&&c(),this._callback("onUpdate"))),a&&(this._gc||(p===this._startTime||f!==this._timeScale)&&(0===this._time||u>=this.totalDuration())&&(r&&(l.length&&c(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this._callback(a)))}},g._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof s&&t._hasPausedChild())return!0;t=t._next}return!1},g.getChildren=function(t,e,s,o){o=o||-9999999999;for(var r=[],n=this._first,a=0;n;)o>n._startTime||(n instanceof i?e!==!1&&(r[a++]=n):(s!==!1&&(r[a++]=n),t!==!1&&(r=r.concat(n.getChildren(!0,e,s)),a=r.length))),n=n._next;return r},g.getTweensOf=function(t,e){var s,o,r=this._gc,n=[],a=0;for(r&&this._enabled(!0,!0),s=i.getTweensOf(t),o=s.length;--o>-1;)(s[o].timeline===this||e&&this._contains(s[o]))&&(n[a++]=s[o]);return r&&this._enabled(!1,!0),n},g.recent=function(){return this._recent},g._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},g.shiftChildren=function(t,e,i){i=i||0;for(var s,o=this._first,r=this._labels;o;)o._startTime>=i&&(o._startTime+=t),o=o._next;if(e)for(s in r)r[s]>=i&&(r[s]+=t);return this._uncache(!0)},g._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),s=i.length,o=!1;--s>-1;)i[s]._kill(t,e)&&(o=!0);return o},g.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},g.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},g._enabled=function(t,i){if(t===this._gc)for(var s=this._first;s;)s._enabled(t,!0),s=s._next;return e.prototype._enabled.call(this,t,i)},g.totalTime=function(){this._forcingPlayhead=!0;var e=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,e},g.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},g.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,s=0,o=this._last,r=999999999999;o;)e=o._prev,o._dirty&&o.totalDuration(),o._startTime>r&&this._sortChildren&&!o._paused?this.add(o,o._startTime-o._delay):r=o._startTime,0>o._startTime&&!o._paused&&(s-=o._startTime,this._timeline.smoothChildTiming&&(this._startTime+=o._startTime/this._timeScale),this.shiftChildren(-o._startTime,!1,-9999999999),r=0),i=o._startTime+o._totalDuration/o._timeScale,i>s&&(s=i),o=e;this._duration=this._totalDuration=s,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},g.paused=function(e){if(!e)for(var i=this._first,s=this._time;i;)i._startTime===s&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},g.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},g.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},s},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var s=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},o=1e-10,r=e._internals,n=r.lazyTweens,a=r.lazyRender,h=new i(null,null,1,0),l=s.prototype=new t;return l.constructor=s,l.kill()._gc=!1,s.version="1.17.0",l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},l.addCallback=function(t,i,s,o){return this.add(e.delayedCall(0,t,s,o),i)},l.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),s=i.length,o=this._parseTimeOrLabel(e);--s>-1;)i[s]._startTime===o&&i[s]._enabled(!1,!1);return this},l.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},l.tweenTo=function(t,i){i=i||{};var s,o,r,n={ease:h,useFrames:this.usesFrames(),immediateRender:!1};for(o in i)n[o]=i[o];return n.time=this._parseTimeOrLabel(t),s=Math.abs(Number(n.time)-this._time)/this._timeScale||.001,r=new e(this,s,n),n.onStart=function(){r.target.paused(!0),r.vars.time!==r.target.time()&&s===r.duration()&&r.duration(Math.abs(r.vars.time-r.target.time())/r.target._timeScale),i.onStart&&r._callback("onStart")},r},l.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=i.immediateRender!==!1;var s=this.tweenTo(e,i);return s.duration(Math.abs(s.vars.time-t)/this._timeScale||.001)},l.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,r,h,l,c,u,d=this._dirty?this.totalDuration():this._totalDuration,p=this._duration,f=this._time,m=this._totalTime,g=this._startTime,v=this._timeScale,y=this._rawPrevTime,_=this._paused,x=this._cycle;if(t>=d)this._locked||(this._totalTime=d,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(r=!0,l="onComplete",c=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>y||y===o)&&y!==t&&this._first&&(c=!0,y>o&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:o,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=p,t=p+1e-4);else if(1e-7>t)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==f||0===p&&y!==o&&(y>0||0>t&&y>=0)&&!this._locked)&&(l="onReverseComplete",r=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(c=r=!0,l="onReverseComplete"):y>=0&&this._first&&(c=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=p||!e||t||this._rawPrevTime===t?t:o,0===t&&r)for(s=this._first;s&&0===s._startTime;)s._duration||(r=!1),s=s._next;t=0,this._initted||(c=!0)}else 0===p&&0>y&&(c=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(u=p+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=p-this._time),this._time>p?(this._time=p,t=p+1e-4):0>this._time?this._time=t=0:t=this._time));if(this._cycle!==x&&!this._locked){var b=this._yoyo&&0!==(1&x),w=b===(this._yoyo&&0!==(1&this._cycle)),S=this._totalTime,T=this._cycle,C=this._rawPrevTime,P=this._time;if(this._totalTime=x*p,x>this._cycle?b=!b:this._totalTime+=p,this._time=f,this._rawPrevTime=0===p?y-1e-4:y,this._cycle=x,this._locked=!0,f=b?0:p,this.render(f,e,0===p),e||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),w&&(f=b?p+1e-4:-1e-4,this.render(f,!0,!1)),this._locked=!1,this._paused&&!_)return;this._time=P,this._totalTime=S,this._cycle=T,this._rawPrevTime=C}if(!(this._time!==f&&this._first||i||c))return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&t>0&&(this._active=!0),0===m&&this.vars.onStart&&0!==this._totalTime&&(e||this._callback("onStart")),this._time>=f)for(s=this._first;s&&(h=s._next,!this._paused||_);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=h;else for(s=this._last;s&&(h=s._prev,!this._paused||_);)(s._active||f>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=h;this._onUpdate&&(e||(n.length&&a(),this._callback("onUpdate"))),l&&(this._locked||this._gc||(g===this._startTime||v!==this._timeScale)&&(0===this._time||d>=this.totalDuration())&&(r&&(n.length&&a(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))},l.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var s,o,r=[],n=this.getChildren(t,e,i),a=0,h=n.length;for(s=0;h>s;s++)o=n[s],o.isActive()&&(r[a++]=o);return r},l.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),s=i.length;for(e=0;s>e;e++)if(i[e].time>t)return i[e].name;return null},l.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},l.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},l.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},l.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},l.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},l.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},s},!0),function(){var t=180/Math.PI,e=[],i=[],s=[],o={},r=_gsScope._gsDefine.globals,n=function(t,e,i,s){this.a=t,this.b=e,this.c=i,this.d=s,this.da=s-t,this.ca=i-t,this.ba=e-t},a=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",h=function(t,e,i,s){var o={a:t},r={},n={},a={c:s},h=(t+e)/2,l=(e+i)/2,c=(i+s)/2,u=(h+l)/2,d=(l+c)/2,p=(d-u)/8;return o.b=h+(t-h)/4,r.b=u+p,o.c=r.a=(o.b+r.b)/2,r.c=n.a=(u+d)/2,n.b=d-p,a.b=c+(s-c)/4,n.c=a.a=(n.b+a.b)/2,[o,r,n,a]},l=function(t,o,r,n,a){var l,c,u,d,p,f,m,g,v,y,_,x,b,w=t.length-1,S=0,T=t[0].a;for(l=0;w>l;l++)p=t[S],c=p.a,u=p.d,d=t[S+1].d,a?(_=e[l],x=i[l],b=.25*(x+_)*o/(n?.5:s[l]||.5),f=u-(u-c)*(n?.5*o:0!==_?b/_:0),m=u+(d-u)*(n?.5*o:0!==x?b/x:0),g=u-(f+((m-f)*(3*_/(_+x)+.5)/4||0))):(f=u-.5*(u-c)*o,m=u+.5*(d-u)*o,g=u-(f+m)/2),f+=g,m+=g,p.c=v=f,p.b=0!==l?T:T=p.a+.6*(p.c-p.a),p.da=u-c,p.ca=v-c,p.ba=T-c,r?(y=h(c,T,v,u),t.splice(S,1,y[0],y[1],y[2],y[3]),S+=4):S++,T=m;p=t[S],p.b=T,p.c=T+.4*(p.d-T),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=T-p.a,r&&(y=h(p.a,T,p.c,p.d),t.splice(S,1,y[0],y[1],y[2],y[3]))},c=function(t,s,o,r){var a,h,l,c,u,d,p=[];if(r)for(t=[r].concat(t),h=t.length;--h>-1;)"string"==typeof(d=t[h][s])&&"="===d.charAt(1)&&(t[h][s]=r[s]+Number(d.charAt(0)+d.substr(2)));if(a=t.length-2,0>a)return p[0]=new n(t[0][s],0,0,t[-1>a?0:1][s]),p;for(h=0;a>h;h++)l=t[h][s],c=t[h+1][s],p[h]=new n(l,0,0,c),o&&(u=t[h+2][s],e[h]=(e[h]||0)+(c-l)*(c-l),i[h]=(i[h]||0)+(u-c)*(u-c));return p[h]=new n(t[h][s],0,0,t[h+1][s]),p},u=function(t,r,n,h,u,d){var p,f,m,g,v,y,_,x,b={},w=[],S=d||t[0];u="string"==typeof u?","+u+",":a,null==r&&(r=1);for(f in t[0])w.push(f);if(t.length>1){for(x=t[t.length-1],_=!0,p=w.length;--p>-1;)if(f=w[p],Math.abs(S[f]-x[f])>.05){_=!1;break}_&&(t=t.concat(),d&&t.unshift(d),t.push(t[1]),d=t[t.length-3])}for(e.length=i.length=s.length=0,p=w.length;--p>-1;)f=w[p],o[f]=-1!==u.indexOf(","+f+","),b[f]=c(t,f,o[f],d);for(p=e.length;--p>-1;)e[p]=Math.sqrt(e[p]),i[p]=Math.sqrt(i[p]);if(!h){for(p=w.length;--p>-1;)if(o[f])for(m=b[w[p]],y=m.length-1,g=0;y>g;g++)v=m[g+1].da/i[g]+m[g].da/e[g],
s[g]=(s[g]||0)+v*v;for(p=s.length;--p>-1;)s[p]=Math.sqrt(s[p])}for(p=w.length,g=n?4:1;--p>-1;)f=w[p],m=b[f],l(m,r,n,h,o[f]),_&&(m.splice(0,g),m.splice(m.length-g,g));return b},d=function(t,e,i){e=e||"soft";var s,o,r,a,h,l,c,u,d,p,f,m={},g="cubic"===e?3:2,v="soft"===e,y=[];if(v&&i&&(t=[i].concat(t)),null==t||g+1>t.length)throw"invalid Bezier data";for(d in t[0])y.push(d);for(l=y.length;--l>-1;){for(d=y[l],m[d]=h=[],p=0,u=t.length,c=0;u>c;c++)s=null==i?t[c][d]:"string"==typeof(f=t[c][d])&&"="===f.charAt(1)?i[d]+Number(f.charAt(0)+f.substr(2)):Number(f),v&&c>1&&u-1>c&&(h[p++]=(s+h[p-2])/2),h[p++]=s;for(u=p-g+1,p=0,c=0;u>c;c+=g)s=h[c],o=h[c+1],r=h[c+2],a=2===g?0:h[c+3],h[p++]=f=3===g?new n(s,o,r,a):new n(s,(2*o+s)/3,(2*o+r)/3,r);h.length=p}return m},p=function(t,e,i){for(var s,o,r,n,a,h,l,c,u,d,p,f=1/i,m=t.length;--m>-1;)for(d=t[m],r=d.a,n=d.d-r,a=d.c-r,h=d.b-r,s=o=0,c=1;i>=c;c++)l=f*c,u=1-l,s=o-(o=(l*l*n+3*u*(l*a+u*h))*l),p=m*i+c-1,e[p]=(e[p]||0)+s*s},f=function(t,e){e=e>>0||6;var i,s,o,r,n=[],a=[],h=0,l=0,c=e-1,u=[],d=[];for(i in t)p(t[i],n,e);for(o=n.length,s=0;o>s;s++)h+=Math.sqrt(n[s]),r=s%e,d[r]=h,r===c&&(l+=h,r=s/e>>0,u[r]=d,a[r]=l,h=0,d=[]);return{length:l,lengths:a,segments:u}},m=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var s,o,r,n,a,h=e.values||[],l={},c=h[0],p=e.autoRotate||i.vars.orientToBezier;this._autoRotate=p?p instanceof Array?p:[["x","y","rotation",p===!0?0:Number(p)||0]]:null;for(s in c)this._props.push(s);for(r=this._props.length;--r>-1;)s=this._props[r],this._overwriteProps.push(s),o=this._func[s]="function"==typeof t[s],l[s]=o?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(t[s]),a||l[s]!==h[0][s]&&(a=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?u(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):d(h,e.type,l),this._segCount=this._beziers[s].length,this._timeRes){var m=f(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(p=this._autoRotate)for(this._initialRotations=[],p[0]instanceof Array||(this._autoRotate=p=[p]),r=p.length;--r>-1;){for(n=0;3>n;n++)s=p[r][n],this._func[s]="function"==typeof t[s]?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]:!1;s=p[r][2],this._initialRotations[r]=this._func[s]?this._func[s].call(this._target):this._target[s]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,s,o,r,n,a,h,l,c,u,d=this._segCount,p=this._func,f=this._target,m=e!==this._startRatio;if(this._timeRes){if(c=this._lengths,u=this._curSeg,e*=this._length,o=this._li,e>this._l2&&d-1>o){for(l=d-1;l>o&&e>=(this._l2=c[++o]););this._l1=c[o-1],this._li=o,this._curSeg=u=this._segments[o],this._s2=u[this._s1=this._si=0]}else if(this._l1>e&&o>0){for(;o>0&&(this._l1=c[--o])>=e;);0===o&&this._l1>e?this._l1=0:o++,this._l2=c[o],this._li=o,this._curSeg=u=this._segments[o],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=o,e-=this._l1,o=this._si,e>this._s2&&u.length-1>o){for(l=u.length-1;l>o&&e>=(this._s2=u[++o]););this._s1=u[o-1],this._si=o}else if(this._s1>e&&o>0){for(;o>0&&(this._s1=u[--o])>=e;);0===o&&this._s1>e?this._s1=0:o++,this._s2=u[o],this._si=o}a=(o+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?d-1:d*e>>0,a=(e-i*(1/d))*d;for(s=1-a,o=this._props.length;--o>-1;)r=this._props[o],n=this._beziers[r][i],h=(a*a*n.da+3*s*(a*n.ca+s*n.ba))*a+n.a,this._round[r]&&(h=Math.round(h)),p[r]?f[r](h):f[r]=h;if(this._autoRotate){var g,v,y,_,x,b,w,S=this._autoRotate;for(o=S.length;--o>-1;)r=S[o][2],b=S[o][3]||0,w=S[o][4]===!0?1:t,n=this._beziers[S[o][0]],g=this._beziers[S[o][1]],n&&g&&(n=n[i],g=g[i],v=n.a+(n.b-n.a)*a,_=n.b+(n.c-n.b)*a,v+=(_-v)*a,_+=(n.c+(n.d-n.c)*a-_)*a,y=g.a+(g.b-g.a)*a,x=g.b+(g.c-g.b)*a,y+=(x-y)*a,x+=(g.c+(g.d-g.c)*a-x)*a,h=m?Math.atan2(x-y,_-v)*w+b:this._initialRotations[o],p[r]?f[r](h):f[r]=h)}}}),g=m.prototype;m.bezierThrough=u,m.cubicToQuadratic=h,m._autoCSS=!0,m.quadraticToCubic=function(t,e,i){return new n(t,(2*e+t)/3,(2*e+i)/3,i)},m._cssRegister=function(){var t=r.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,s=e._setPluginRatio,o=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,r,n,a,h){e instanceof Array&&(e={values:e}),h=new m;var l,c,u,d=e.values,p=d.length-1,f=[],g={};if(0>p)return a;for(l=0;p>=l;l++)u=i(t,d[l],n,a,h,p!==l),f[l]=u.end;for(c in e)g[c]=e[c];return g.values=f,a=new o(t,"bezier",0,0,u.pt,2),a.data=u,a.plugin=h,a.setRatio=s,0===g.autoRotate&&(g.autoRotate=!0),!g.autoRotate||g.autoRotate instanceof Array||(l=g.autoRotate===!0?0:Number(g.autoRotate),g.autoRotate=null!=u.end.left?[["left","top","rotation",l,!1]]:null!=u.end.x?[["x","y","rotation",l,!1]]:!1),g.autoRotate&&(n._transform||n._enableTransforms(!1),u.autoRotate=n._target._gsTransform),h._onInitTween(u.proxy,g,n._tween),a}})}},g._roundProps=function(t,e){for(var i=this._overwriteProps,s=i.length;--s>-1;)(t[i[s]]||t.bezier||t.bezierThrough)&&(this._round[i[s]]=e)},g._kill=function(t){var e,i,s=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=s.length;--i>-1;)s[i]===e&&s.splice(i,1);return this._super._kill.call(this,t)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,s,o,r,n=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=n.prototype.setRatio},a=_gsScope._gsDefine.globals,h={},l=n.prototype=new t("css");l.constructor=n,n.version="1.17.0",n.API=2,n.defaultTransformPerspective=0,n.defaultSkewType="compensated",n.defaultSmoothOrigin=!0,l="px",n.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var c,u,d,p,f,m,g=/(?:\d|\-\d|\.\d|\-\.\d)+/g,v=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,y=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,_=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,x=/(?:\d|\-|\+|=|#|\.)*/g,b=/opacity *= *([^)]*)/i,w=/opacity:([^;]*)/i,S=/alpha\(opacity *=.+?\)/i,T=/^(rgb|hsl)/,C=/([A-Z])/g,P=/-([a-z])/gi,A=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,M=function(t,e){return e.toUpperCase()},E=/(?:Left|Right|Width)/i,I=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,k=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,L=/,(?=[^\)]*(?:\(|$))/gi,R=Math.PI/180,O=180/Math.PI,B={},D=document,F=function(t){return D.createElementNS?D.createElementNS("http://www.w3.org/1999/xhtml",t):D.createElement(t)},j=F("div"),N=F("img"),U=n._internals={_specialProps:h},z=navigator.userAgent,G=function(){var t=z.indexOf("Android"),e=F("a");return d=-1!==z.indexOf("Safari")&&-1===z.indexOf("Chrome")&&(-1===t||Number(z.substr(t+8,1))>3),f=d&&6>Number(z.substr(z.indexOf("Version/")+8,1)),p=-1!==z.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(z)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(z))&&(m=parseFloat(RegExp.$1)),e?(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity)):!1}(),H=function(t){return b.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},X=function(t){window.console&&void 0},q="",W="",Y=function(t,e){e=e||j;var i,s,o=e.style;if(void 0!==o[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],s=5;--s>-1&&void 0===o[i[s]+t];);return s>=0?(W=3===s?"ms":i[s],q="-"+W.toLowerCase()+"-",W+t):null},V=D.defaultView?D.defaultView.getComputedStyle:function(){},Z=n.getStyle=function(t,e,i,s,o){var r;return G||"opacity"!==e?(!s&&t.style[e]?r=t.style[e]:(i=i||V(t))?r=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(C,"-$1").toLowerCase()):t.currentStyle&&(r=t.currentStyle[e]),null==o||r&&"none"!==r&&"auto"!==r&&"auto auto"!==r?r:o):H(t)},J=U.convertToPixels=function(t,i,s,o,r){if("px"===o||!o)return s;if("auto"===o||!s)return 0;var a,h,l,c=E.test(i),u=t,d=j.style,p=0>s;if(p&&(s=-s),"%"===o&&-1!==i.indexOf("border"))a=s/100*(c?t.clientWidth:t.clientHeight);else{if(d.cssText="border:0 solid red;position:"+Z(t,"position")+";line-height:0;","%"!==o&&u.appendChild)d[c?"borderLeftWidth":"borderTopWidth"]=s+o;else{if(u=t.parentNode||D.body,h=u._gsCache,l=e.ticker.frame,h&&c&&h.time===l)return h.width*s/100;d[c?"width":"height"]=s+o}u.appendChild(j),a=parseFloat(j[c?"offsetWidth":"offsetHeight"]),u.removeChild(j),c&&"%"===o&&n.cacheWidths!==!1&&(h=u._gsCache=u._gsCache||{},h.time=l,h.width=100*(a/s)),0!==a||r||(a=J(t,i,s,o,!0))}return p?-a:a},K=U.calculateOffset=function(t,e,i){if("absolute"!==Z(t,"position",i))return 0;var s="left"===e?"Left":"Top",o=Z(t,"margin"+s,i);return t["offset"+s]-(J(t,e,parseFloat(o),o.replace(x,""))||0)},Q=function(t,e){var i,s,o,r={};if(e=e||V(t,null))if(i=e.length)for(;--i>-1;)o=e[i],(-1===o.indexOf("-transform")||Tt===o)&&(r[o.replace(P,M)]=e.getPropertyValue(o));else for(i in e)(-1===i.indexOf("Transform")||St===i)&&(r[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===r[i]&&(r[i.replace(P,M)]=e[i]);return G||(r.opacity=H(t)),s=Dt(t,e,!1),r.rotation=s.rotation,r.skewX=s.skewX,r.scaleX=s.scaleX,r.scaleY=s.scaleY,r.x=s.x,r.y=s.y,Pt&&(r.z=s.z,r.rotationX=s.rotationX,r.rotationY=s.rotationY,r.scaleZ=s.scaleZ),r.filters&&delete r.filters,r},$=function(t,e,i,s,o){var r,n,a,h={},l=t.style;for(n in i)"cssText"!==n&&"length"!==n&&isNaN(n)&&(e[n]!==(r=i[n])||o&&o[n])&&-1===n.indexOf("Origin")&&("number"==typeof r||"string"==typeof r)&&(h[n]="auto"!==r||"left"!==n&&"top"!==n?""!==r&&"auto"!==r&&"none"!==r||"string"!=typeof e[n]||""===e[n].replace(_,"")?r:0:K(t,n),void 0!==l[n]&&(a=new pt(l,n,l[n],a)));if(s)for(n in s)"className"!==n&&(h[n]=s[n]);return{difs:h,firstMPT:a}},tt={width:["Left","Right"],height:["Top","Bottom"]},et=["marginLeft","marginRight","marginTop","marginBottom"],it=function(t,e,i){var s=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),o=tt[e],r=o.length;for(i=i||V(t,null);--r>-1;)s-=parseFloat(Z(t,"padding"+o[r],i,!0))||0,s-=parseFloat(Z(t,"border"+o[r]+"Width",i,!0))||0;return s},st=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),s=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],o=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==o?o="center"===s?"50%":"0":"center"===o&&(o="50%"),("center"===s||isNaN(parseFloat(s))&&-1===(s+"").indexOf("="))&&(s="50%"),t=s+" "+o+(i.length>2?" "+i[2]:""),e&&(e.oxp=-1!==s.indexOf("%"),e.oyp=-1!==o.indexOf("%"),e.oxr="="===s.charAt(1),e.oyr="="===o.charAt(1),e.ox=parseFloat(s.replace(_,"")),e.oy=parseFloat(o.replace(_,"")),e.v=t),e||t},ot=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},rt=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)},nt=function(t,e,i,s){var o,r,n,a,h,l=1e-6;return null==t?a=e:"number"==typeof t?a=t:(o=360,r=t.split("_"),h="="===t.charAt(1),n=(h?parseInt(t.charAt(0)+"1",10)*parseFloat(r[0].substr(2)):parseFloat(r[0]))*(-1===t.indexOf("rad")?1:O)-(h?0:e),r.length&&(s&&(s[i]=e+n),-1!==t.indexOf("short")&&(n%=o,n!==n%(o/2)&&(n=0>n?n+o:n-o)),-1!==t.indexOf("_cw")&&0>n?n=(n+9999999999*o)%o-(0|n/o)*o:-1!==t.indexOf("ccw")&&n>0&&(n=(n-9999999999*o)%o-(0|n/o)*o)),a=e+n),l>a&&a>-l&&(a=0),a},at={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ht=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},lt=n.parseColor=function(t){var e,i,s,o,r,n;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),at[t]?at[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),s=t.charAt(3),t="#"+e+e+i+i+s+s),t=parseInt(t.substr(1),16),[t>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(g),o=Number(t[0])%360/360,r=Number(t[1])/100,n=Number(t[2])/100,i=.5>=n?n*(r+1):n+r-n*r,e=2*n-i,t.length>3&&(t[3]=Number(t[3])),t[0]=ht(o+1/3,e,i),t[1]=ht(o,e,i),t[2]=ht(o-1/3,e,i),t):(t=t.match(g)||at.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):at.black},ct="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(l in at)ct+="|"+l+"\\b";ct=RegExp(ct+")","gi");var ut=function(t,e,i,s){if(null==t)return function(t){return t};var o,r=e?(t.match(ct)||[""])[0]:"",n=t.split(r).join("").match(y)||[],a=t.substr(0,t.indexOf(n[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",c=n.length,u=c>0?n[0].replace(g,""):"";return c?o=e?function(t){var e,d,p,f;if("number"==typeof t)t+=u;else if(s&&L.test(t)){for(f=t.replace(L,"|").split("|"),p=0;f.length>p;p++)f[p]=o(f[p]);return f.join(",")}if(e=(t.match(ct)||[r])[0],d=t.split(e).join("").match(y)||[],p=d.length,c>p--)for(;c>++p;)d[p]=i?d[0|(p-1)/2]:n[p];return a+d.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,r,d;if("number"==typeof t)t+=u;else if(s&&L.test(t)){for(r=t.replace(L,"|").split("|"),d=0;r.length>d;d++)r[d]=o(r[d]);return r.join(",")}if(e=t.match(y)||[],d=e.length,c>d--)for(;c>++d;)e[d]=i?e[0|(d-1)/2]:n[d];return a+e.join(l)+h}:function(t){return t}},dt=function(t){return t=t.split(","),function(e,i,s,o,r,n,a){var h,l=(i+"").split(" ");for(a={},h=0;4>h;h++)a[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return o.parse(e,a,r,n)}},pt=(U._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,s,o,r=this.data,n=r.proxy,a=r.firstMPT,h=1e-6;a;)e=n[a.v],a.r?e=Math.round(e):h>e&&e>-h&&(e=0),a.t[a.p]=e,a=a._next;if(r.autoRotate&&(r.autoRotate.rotation=n.rotation),1===t)for(a=r.firstMPT;a;){if(i=a.t,i.type){if(1===i.type){for(o=i.xs0+i.s+i.xs1,s=1;i.l>s;s++)o+=i["xn"+s]+i["xs"+(s+1)];i.e=o}}else i.e=i.s+i.xs0;a=a._next}},function(t,e,i,s,o){this.t=t,this.p=e,this.v=i,this.r=o,s&&(s._prev=this,this._next=s)}),ft=(U._parseToProxy=function(t,e,i,s,o,r){var n,a,h,l,c,u=s,d={},p={},f=i._transform,m=B;for(i._transform=null,B=e,s=c=i.parse(t,e,s,o),B=m,r&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));s&&s!==u;){if(1>=s.type&&(a=s.p,p[a]=s.s+s.c,d[a]=s.s,r||(l=new pt(s,"s",a,l,s.r),s.c=0),1===s.type))for(n=s.l;--n>0;)h="xn"+n,a=s.p+"_"+h,p[a]=s.data[h],d[a]=s[h],r||(l=new pt(s,h,a,l,s.rxp[h]));s=s._next}return{proxy:d,end:p,firstMPT:l,pt:c}},U.CSSPropTween=function(t,e,s,o,n,a,h,l,c,u,d){this.t=t,this.p=e,this.s=s,this.c=o,this.n=h||e,t instanceof ft||r.push(this.n),this.r=l,this.type=a||0,c&&(this.pr=c,i=!0),this.b=void 0===u?s:u,this.e=void 0===d?s+o:d,n&&(this._next=n,n._prev=this)}),mt=function(t,e,i,s,o,r){var n=new ft(t,e,i,s-i,o,-1,r);return n.b=i,n.e=n.xs0=s,n},gt=n.parseComplex=function(t,e,i,s,o,r,n,a,h,l){i=i||r||"",n=new ft(t,e,0,0,n,l?2:1,null,!1,a,i,s),s+="";var u,d,p,f,m,y,_,x,b,w,S,C,P=i.split(", ").join(",").split(" "),A=s.split(", ").join(",").split(" "),M=P.length,E=c!==!1;for((-1!==s.indexOf(",")||-1!==i.indexOf(","))&&(P=P.join(" ").replace(L,", ").split(" "),A=A.join(" ").replace(L,", ").split(" "),M=P.length),M!==A.length&&(P=(r||"").split(" "),M=P.length),n.plugin=h,n.setRatio=l,u=0;M>u;u++)if(f=P[u],m=A[u],x=parseFloat(f),x||0===x)n.appendXtra("",x,ot(m,x),m.replace(v,""),E&&-1!==m.indexOf("px"),!0);else if(o&&("#"===f.charAt(0)||at[f]||T.test(f)))C=","===m.charAt(m.length-1)?"),":")",f=lt(f),m=lt(m),b=f.length+m.length>6,b&&!G&&0===m[3]?(n["xs"+n.l]+=n.l?" transparent":"transparent",n.e=n.e.split(A[u]).join("transparent")):(G||(b=!1),n.appendXtra(b?"rgba(":"rgb(",f[0],m[0]-f[0],",",!0,!0).appendXtra("",f[1],m[1]-f[1],",",!0).appendXtra("",f[2],m[2]-f[2],b?",":C,!0),b&&(f=4>f.length?1:f[3],n.appendXtra("",f,(4>m.length?1:m[3])-f,C,!1)));else if(y=f.match(g)){if(_=m.match(v),!_||_.length!==y.length)return n;for(p=0,d=0;y.length>d;d++)S=y[d],w=f.indexOf(S,p),n.appendXtra(f.substr(p,w-p),Number(S),ot(_[d],S),"",E&&"px"===f.substr(w+S.length,2),0===d),p=w+S.length;n["xs"+n.l]+=f.substr(p)}else n["xs"+n.l]+=n.l?" "+f:f;if(-1!==s.indexOf("=")&&n.data){for(C=n.xs0+n.data.s,u=1;n.l>u;u++)C+=n["xs"+u]+n.data["xn"+u];n.e=C+n["xs"+u]}return n.l||(n.type=-1,n.xs0=n.e),n.xfirst||n},vt=9;for(l=ft.prototype,l.l=l.pr=0;--vt>0;)l["xn"+vt]=0,l["xs"+vt]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(t,e,i,s,o,r){var n=this,a=n.l;return n["xs"+a]+=r&&a?" "+t:t||"",i||0===a||n.plugin?(n.l++,n.type=n.setRatio?2:1,n["xs"+n.l]=s||"",a>0?(n.data["xn"+a]=e+i,n.rxp["xn"+a]=o,n["xn"+a]=e,n.plugin||(n.xfirst=new ft(n,"xn"+a,e,i,n.xfirst||n,0,n.n,o,n.pr),n.xfirst.xs0=0),n):(n.data={s:e+i},n.rxp={},n.s=e,n.c=i,n.r=o,n)):(n["xs"+a]+=e+(s||""),n)};var yt=function(t,e){e=e||{},this.p=e.prefix?Y(t)||t:t,h[t]=h[this.p]=this,this.format=e.formatter||ut(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},_t=U._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var s,o,r=t.split(","),n=e.defaultValue;for(i=i||[n],s=0;r.length>s;s++)e.prefix=0===s&&e.prefix,e.defaultValue=i[s]||n,o=new yt(r[s],e)},xt=function(t){if(!h[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";_t(t,{parser:function(t,i,s,o,r,n,l){var c=a.com.greensock.plugins[e];return c?(c._cssRegister(),h[s].parse(t,i,s,o,r,n,l)):(X("Error: "+e+" js file not loaded."),r)}})}};l=yt.prototype,l.parseComplex=function(t,e,i,s,o,r){var n,a,h,l,c,u,d=this.keyword;if(this.multi&&(L.test(i)||L.test(e)?(a=e.replace(L,"|").split("|"),h=i.replace(L,"|").split("|")):d&&(a=[e],h=[i])),h){for(l=h.length>a.length?h.length:a.length,n=0;l>n;n++)e=a[n]=a[n]||this.dflt,i=h[n]=h[n]||this.dflt,d&&(c=e.indexOf(d),u=i.indexOf(d),c!==u&&(-1===u?a[n]=a[n].split(d).join(""):-1===c&&(a[n]+=" "+d)));e=a.join(", "),i=h.join(", ")}return gt(t,this.p,e,i,this.clrs,this.dflt,s,this.pr,o,r)},l.parse=function(t,e,i,s,r,n){return this.parseComplex(t.style,this.format(Z(t,this.p,o,!1,this.dflt)),this.format(e),r,n)},n.registerSpecialProp=function(t,e,i){_t(t,{parser:function(t,s,o,r,n,a){var h=new ft(t,o,0,0,n,2,o,!1,i);return h.plugin=a,h.setRatio=e(t,s,r._tween,o),h},priority:i})},n.useSVGTransformAttr=d||p;var bt,wt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),St=Y("transform"),Tt=q+"transform",Ct=Y("transformOrigin"),Pt=null!==Y("perspective"),At=U.Transform=function(){this.perspective=parseFloat(n.defaultTransformPerspective)||0,this.force3D=n.defaultForce3D!==!1&&Pt?n.defaultForce3D||"auto":!1},Mt=window.SVGElement,Et=function(t,e,i){var s,o=D.createElementNS("http://www.w3.org/2000/svg",t),r=/([a-z])([A-Z])/g;for(s in i)o.setAttributeNS(null,s.replace(r,"$1-$2").toLowerCase(),i[s]);return e.appendChild(o),o},It=D.documentElement,kt=function(){var t,e,i,s=m||/Android/i.test(z)&&!window.chrome;return D.createElementNS&&!s&&(t=Et("svg",It),e=Et("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().width,e.style[Ct]="50% 50%",e.style[St]="scaleX(0.5)",s=i===e.getBoundingClientRect().width&&!(p&&Pt),It.removeChild(t)),s}(),Lt=function(t,e,i,s,o){var r,a,h,l,c,u,d,p,f,m,g,v,y,_,x=t._gsTransform,b=Bt(t,!0);x&&(y=x.xOrigin,_=x.yOrigin),(!s||2>(r=s.split(" ")).length)&&(d=t.getBBox(),e=st(e).split(" "),r=[(-1!==e[0].indexOf("%")?parseFloat(e[0])/100*d.width:parseFloat(e[0]))+d.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*d.height:parseFloat(e[1]))+d.y]),i.xOrigin=l=parseFloat(r[0]),i.yOrigin=c=parseFloat(r[1]),s&&b!==Ot&&(u=b[0],d=b[1],p=b[2],f=b[3],m=b[4],g=b[5],v=u*f-d*p,a=l*(f/v)+c*(-p/v)+(p*g-f*m)/v,h=l*(-d/v)+c*(u/v)-(u*g-d*m)/v,l=i.xOrigin=r[0]=a,c=i.yOrigin=r[1]=h),x&&(o||o!==!1&&n.defaultSmoothOrigin!==!1?(a=l-y,h=c-_,x.xOffset+=a*b[0]+h*b[2]-a,x.yOffset+=a*b[1]+h*b[3]-h):x.xOffset=x.yOffset=0),t.setAttribute("data-svg-origin",r.join(" "))},Rt=function(t){return!!(Mt&&"function"==typeof t.getBBox&&t.getCTM&&(!t.parentNode||t.parentNode.getBBox&&t.parentNode.getCTM))},Ot=[1,0,0,1,0,0],Bt=function(t,e){var i,s,o,r,n,a=t._gsTransform||new At,h=1e5;if(St?s=Z(t,Tt,null,!0):t.currentStyle&&(s=t.currentStyle.filter.match(I),s=s&&4===s.length?[s[0].substr(4),Number(s[2].substr(4)),Number(s[1].substr(4)),s[3].substr(4),a.x||0,a.y||0].join(","):""),i=!s||"none"===s||"matrix(1, 0, 0, 1, 0, 0)"===s,(a.svg||t.getBBox&&Rt(t))&&(i&&-1!==(t.style[St]+"").indexOf("matrix")&&(s=t.style[St],i=0),o=t.getAttribute("transform"),i&&o&&(-1!==o.indexOf("matrix")?(s=o,i=0):-1!==o.indexOf("translate")&&(s="matrix(1,0,0,1,"+o.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return Ot;for(o=(s||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],vt=o.length;--vt>-1;)r=Number(o[vt]),o[vt]=(n=r-(r|=0))?(0|n*h+(0>n?-.5:.5))/h+r:r;return e&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o},Dt=U.getTransform=function(t,i,s,r){if(t._gsTransform&&s&&!r)return t._gsTransform;var a,h,l,c,u,d,p=s?t._gsTransform||new At:new At,f=0>p.scaleX,m=2e-5,g=1e5,v=Pt?parseFloat(Z(t,Ct,i,!1,"0 0 0").split(" ")[2])||p.zOrigin||0:0,y=parseFloat(n.defaultTransformPerspective)||0;if(p.svg=!(!t.getBBox||!Rt(t)),p.svg&&(Lt(t,Z(t,Ct,o,!1,"50% 50%")+"",p,t.getAttribute("data-svg-origin")),bt=n.useSVGTransformAttr||kt),a=Bt(t),a!==Ot){if(16===a.length){var _,x,b,w,S,T=a[0],C=a[1],P=a[2],A=a[3],M=a[4],E=a[5],I=a[6],k=a[7],L=a[8],R=a[9],B=a[10],D=a[12],F=a[13],j=a[14],N=a[11],U=Math.atan2(I,B);p.zOrigin&&(j=-p.zOrigin,D=L*j-a[12],F=R*j-a[13],j=B*j+p.zOrigin-a[14]),p.rotationX=U*O,U&&(w=Math.cos(-U),S=Math.sin(-U),_=M*w+L*S,x=E*w+R*S,b=I*w+B*S,L=M*-S+L*w,R=E*-S+R*w,B=I*-S+B*w,N=k*-S+N*w,M=_,E=x,I=b),U=Math.atan2(L,B),p.rotationY=U*O,U&&(w=Math.cos(-U),S=Math.sin(-U),_=T*w-L*S,x=C*w-R*S,b=P*w-B*S,R=C*S+R*w,B=P*S+B*w,N=A*S+N*w,T=_,C=x,P=b),U=Math.atan2(C,T),p.rotation=U*O,U&&(w=Math.cos(-U),S=Math.sin(-U),T=T*w+M*S,x=C*w+E*S,E=C*-S+E*w,I=P*-S+I*w,C=x),p.rotationX&&Math.abs(p.rotationX)+Math.abs(p.rotation)>359.9&&(p.rotationX=p.rotation=0,p.rotationY+=180),p.scaleX=(0|Math.sqrt(T*T+C*C)*g+.5)/g,p.scaleY=(0|Math.sqrt(E*E+R*R)*g+.5)/g,p.scaleZ=(0|Math.sqrt(I*I+B*B)*g+.5)/g,p.skewX=0,p.perspective=N?1/(0>N?-N:N):0,p.x=D,p.y=F,p.z=j,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*T-p.yOrigin*M),p.y-=p.yOrigin-(p.yOrigin*C-p.xOrigin*E))}else if(!(Pt&&!r&&a.length&&p.x===a[4]&&p.y===a[5]&&(p.rotationX||p.rotationY)||void 0!==p.x&&"none"===Z(t,"display",i))){var z=a.length>=6,G=z?a[0]:1,H=a[1]||0,X=a[2]||0,q=z?a[3]:1;p.x=a[4]||0,p.y=a[5]||0,l=Math.sqrt(G*G+H*H),c=Math.sqrt(q*q+X*X),u=G||H?Math.atan2(H,G)*O:p.rotation||0,d=X||q?Math.atan2(X,q)*O+u:p.skewX||0,Math.abs(d)>90&&270>Math.abs(d)&&(f?(l*=-1,d+=0>=u?180:-180,u+=0>=u?180:-180):(c*=-1,d+=0>=d?180:-180)),p.scaleX=l,p.scaleY=c,p.rotation=u,p.skewX=d,Pt&&(p.rotationX=p.rotationY=p.z=0,p.perspective=y,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*G+p.yOrigin*X),p.y-=p.yOrigin-(p.xOrigin*H+p.yOrigin*q))}p.zOrigin=v;for(h in p)m>p[h]&&p[h]>-m&&(p[h]=0)}return s&&(t._gsTransform=p,p.svg&&(bt&&t.style[St]?e.delayedCall(.001,function(){Ut(t.style,St)}):!bt&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),p},Ft=function(t){var e,i,s=this.data,o=-s.rotation*R,r=o+s.skewX*R,n=1e5,a=(0|Math.cos(o)*s.scaleX*n)/n,h=(0|Math.sin(o)*s.scaleX*n)/n,l=(0|Math.sin(r)*-s.scaleY*n)/n,c=(0|Math.cos(r)*s.scaleY*n)/n,u=this.t.style,d=this.t.currentStyle;if(d){i=h,h=-l,l=-i,e=d.filter,u.filter="";var p,f,g=this.t.offsetWidth,v=this.t.offsetHeight,y="absolute"!==d.position,_="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+h+", M21="+l+", M22="+c,w=s.x+g*s.xPercent/100,S=s.y+v*s.yPercent/100;if(null!=s.ox&&(p=(s.oxp?.01*g*s.ox:s.ox)-g/2,f=(s.oyp?.01*v*s.oy:s.oy)-v/2,w+=p-(p*a+f*h),S+=f-(p*l+f*c)),y?(p=g/2,f=v/2,_+=", Dx="+(p-(p*a+f*h)+w)+", Dy="+(f-(p*l+f*c)+S)+")"):_+=", sizingMethod='auto expand')",u.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(k,_):_+" "+e,(0===t||1===t)&&1===a&&0===h&&0===l&&1===c&&(y&&-1===_.indexOf("Dx=0, Dy=0")||b.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&u.removeAttribute("filter")),!y){var T,C,P,A=8>m?1:-1;for(p=s.ieOffsetX||0,f=s.ieOffsetY||0,s.ieOffsetX=Math.round((g-((0>a?-a:a)*g+(0>h?-h:h)*v))/2+w),s.ieOffsetY=Math.round((v-((0>c?-c:c)*v+(0>l?-l:l)*g))/2+S),vt=0;4>vt;vt++)C=et[vt],T=d[C],i=-1!==T.indexOf("px")?parseFloat(T):J(this.t,C,parseFloat(T),T.replace(x,""))||0,P=i!==s[C]?2>vt?-s.ieOffsetX:-s.ieOffsetY:2>vt?p-s.ieOffsetX:f-s.ieOffsetY,u[C]=(s[C]=Math.round(i-P*(0===vt||2===vt?1:A)))+"px"}}},jt=U.set3DTransformRatio=U.setTransformRatio=function(t){var e,i,s,o,r,n,a,h,l,c,u,d,f,m,g,v,y,_,x,b,w,S,T,C=this.data,P=this.t.style,A=C.rotation,M=C.rotationX,E=C.rotationY,I=C.scaleX,k=C.scaleY,L=C.scaleZ,O=C.x,B=C.y,D=C.z,F=C.svg,j=C.perspective,N=C.force3D;if(!((1!==t&&0!==t||"auto"!==N||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&N||D||j||E||M)||bt&&F||!Pt)return void(A||C.skewX||F?(A*=R,S=C.skewX*R,T=1e5,e=Math.cos(A)*I,o=Math.sin(A)*I,i=Math.sin(A-S)*-k,r=Math.cos(A-S)*k,S&&"simple"===C.skewType&&(y=Math.tan(S),y=Math.sqrt(1+y*y),i*=y,r*=y,C.skewY&&(e*=y,o*=y)),F&&(O+=C.xOrigin-(C.xOrigin*e+C.yOrigin*i)+C.xOffset,B+=C.yOrigin-(C.xOrigin*o+C.yOrigin*r)+C.yOffset,bt&&(C.xPercent||C.yPercent)&&(m=this.t.getBBox(),O+=.01*C.xPercent*m.width,B+=.01*C.yPercent*m.height),m=1e-6,m>O&&O>-m&&(O=0),m>B&&B>-m&&(B=0)),x=(0|e*T)/T+","+(0|o*T)/T+","+(0|i*T)/T+","+(0|r*T)/T+","+O+","+B+")",F&&bt?this.t.setAttribute("transform","matrix("+x):P[St]=(C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) matrix(":"matrix(")+x):P[St]=(C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) matrix(":"matrix(")+I+",0,0,"+k+","+O+","+B+")");if(p&&(m=1e-4,m>I&&I>-m&&(I=L=2e-5),m>k&&k>-m&&(k=L=2e-5),!j||C.z||C.rotationX||C.rotationY||(j=0)),A||C.skewX)A*=R,g=e=Math.cos(A),v=o=Math.sin(A),C.skewX&&(A-=C.skewX*R,g=Math.cos(A),v=Math.sin(A),"simple"===C.skewType&&(y=Math.tan(C.skewX*R),y=Math.sqrt(1+y*y),g*=y,v*=y,C.skewY&&(e*=y,o*=y))),i=-v,r=g;else{if(!(E||M||1!==L||j||F))return void(P[St]=(C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) translate3d(":"translate3d(")+O+"px,"+B+"px,"+D+"px)"+(1!==I||1!==k?" scale("+I+","+k+")":""));e=r=1,i=o=0}l=1,s=n=a=h=c=u=0,d=j?-1/j:0,f=C.zOrigin,m=1e-6,b=",",w="0",A=E*R,A&&(g=Math.cos(A),v=Math.sin(A),a=-v,c=d*-v,s=e*v,n=o*v,l=g,d*=g,e*=g,o*=g),A=M*R,A&&(g=Math.cos(A),v=Math.sin(A),y=i*g+s*v,_=r*g+n*v,h=l*v,u=d*v,s=i*-v+s*g,n=r*-v+n*g,l*=g,d*=g,i=y,r=_),1!==L&&(s*=L,n*=L,l*=L,d*=L),1!==k&&(i*=k,r*=k,h*=k,u*=k),1!==I&&(e*=I,o*=I,a*=I,c*=I),(f||F)&&(f&&(O+=s*-f,B+=n*-f,D+=l*-f+f),F&&(O+=C.xOrigin-(C.xOrigin*e+C.yOrigin*i)+C.xOffset,B+=C.yOrigin-(C.xOrigin*o+C.yOrigin*r)+C.yOffset),m>O&&O>-m&&(O=w),m>B&&B>-m&&(B=w),m>D&&D>-m&&(D=0)),x=C.xPercent||C.yPercent?"translate("+C.xPercent+"%,"+C.yPercent+"%) matrix3d(":"matrix3d(",x+=(m>e&&e>-m?w:e)+b+(m>o&&o>-m?w:o)+b+(m>a&&a>-m?w:a),x+=b+(m>c&&c>-m?w:c)+b+(m>i&&i>-m?w:i)+b+(m>r&&r>-m?w:r),M||E?(x+=b+(m>h&&h>-m?w:h)+b+(m>u&&u>-m?w:u)+b+(m>s&&s>-m?w:s),x+=b+(m>n&&n>-m?w:n)+b+(m>l&&l>-m?w:l)+b+(m>d&&d>-m?w:d)+b):x+=",0,0,0,0,1,0,",x+=O+b+B+b+D+b+(j?1+-D/j:1)+")",P[St]=x};l=At.prototype,l.x=l.y=l.z=l.skewX=l.skewY=l.rotation=l.rotationX=l.rotationY=l.zOrigin=l.xPercent=l.yPercent=l.xOffset=l.yOffset=0,l.scaleX=l.scaleY=l.scaleZ=1,_t("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,s,r,a,h){if(s._lastParsedTransform===h)return r;s._lastParsedTransform=h;var l,c,u,d,p,f,m,g,v,y=t._gsTransform,_=s._transform=Dt(t,o,!0,h.parseTransform),x=t.style,b=1e-6,w=wt.length,S=h,T={},C="transformOrigin";if("string"==typeof S.transform&&St)u=j.style,u[St]=S.transform,u.display="block",u.position="absolute",D.body.appendChild(j),l=Dt(j,null,!1),D.body.removeChild(j),null!=S.xPercent&&(l.xPercent=rt(S.xPercent,_.xPercent)),null!=S.yPercent&&(l.yPercent=rt(S.yPercent,_.yPercent));else if("object"==typeof S){if(l={scaleX:rt(null!=S.scaleX?S.scaleX:S.scale,_.scaleX),scaleY:rt(null!=S.scaleY?S.scaleY:S.scale,_.scaleY),scaleZ:rt(S.scaleZ,_.scaleZ),x:rt(S.x,_.x),y:rt(S.y,_.y),z:rt(S.z,_.z),xPercent:rt(S.xPercent,_.xPercent),yPercent:rt(S.yPercent,_.yPercent),perspective:rt(S.transformPerspective,_.perspective)},m=S.directionalRotation,null!=m)if("object"==typeof m)for(u in m)S[u]=m[u];else S.rotation=m;"string"==typeof S.x&&-1!==S.x.indexOf("%")&&(l.x=0,l.xPercent=rt(S.x,_.xPercent)),"string"==typeof S.y&&-1!==S.y.indexOf("%")&&(l.y=0,l.yPercent=rt(S.y,_.yPercent)),l.rotation=nt("rotation"in S?S.rotation:"shortRotation"in S?S.shortRotation+"_short":"rotationZ"in S?S.rotationZ:_.rotation,_.rotation,"rotation",T),Pt&&(l.rotationX=nt("rotationX"in S?S.rotationX:"shortRotationX"in S?S.shortRotationX+"_short":_.rotationX||0,_.rotationX,"rotationX",T),l.rotationY=nt("rotationY"in S?S.rotationY:"shortRotationY"in S?S.shortRotationY+"_short":_.rotationY||0,_.rotationY,"rotationY",T)),l.skewX=null==S.skewX?_.skewX:nt(S.skewX,_.skewX),l.skewY=null==S.skewY?_.skewY:nt(S.skewY,_.skewY),(c=l.skewY-_.skewY)&&(l.skewX+=c,l.rotation+=c)}for(Pt&&null!=S.force3D&&(_.force3D=S.force3D,f=!0),_.skewType=S.skewType||_.skewType||n.defaultSkewType,p=_.force3D||_.z||_.rotationX||_.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,p||null==S.scale||(l.scaleZ=1);--w>-1;)i=wt[w],d=l[i]-_[i],(d>b||-b>d||null!=S[i]||null!=B[i])&&(f=!0,r=new ft(_,i,_[i],d,r),i in T&&(r.e=T[i]),r.xs0=0,r.plugin=a,s._overwriteProps.push(r.n));return d=S.transformOrigin,_.svg&&(d||S.svgOrigin)&&(g=_.xOffset,v=_.yOffset,Lt(t,st(d),l,S.svgOrigin,S.smoothOrigin),r=mt(_,"xOrigin",(y?_:l).xOrigin,l.xOrigin,r,C),r=mt(_,"yOrigin",(y?_:l).yOrigin,l.yOrigin,r,C),(g!==_.xOffset||v!==_.yOffset)&&(r=mt(_,"xOffset",y?g:_.xOffset,_.xOffset,r,C),r=mt(_,"yOffset",y?v:_.yOffset,_.yOffset,r,C)),d=bt?null:"0px 0px"),(d||Pt&&p&&_.zOrigin)&&(St?(f=!0,i=Ct,d=(d||Z(t,i,o,!1,"50% 50%"))+"",r=new ft(x,i,0,0,r,-1,C),r.b=x[i],r.plugin=a,Pt?(u=_.zOrigin,d=d.split(" "),_.zOrigin=(d.length>2&&(0===u||"0px"!==d[2])?parseFloat(d[2]):u)||0,r.xs0=r.e=d[0]+" "+(d[1]||"50%")+" 0px",r=new ft(_,"zOrigin",0,0,r,-1,r.n),r.b=u,r.xs0=r.e=_.zOrigin):r.xs0=r.e=d):st(d+"",_)),f&&(s._transformType=_.svg&&bt||!p&&3!==this._transformType?2:3),r},prefix:!0}),_t("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),_t("borderRadius",{defaultValue:"0px",parser:function(t,e,i,r,n){e=this.format(e);var a,h,l,c,u,d,p,f,m,g,v,y,_,x,b,w,S=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],T=t.style;for(m=parseFloat(t.offsetWidth),g=parseFloat(t.offsetHeight),a=e.split(" "),h=0;S.length>h;h++)this.p.indexOf("border")&&(S[h]=Y(S[h])),u=c=Z(t,S[h],o,!1,"0px"),-1!==u.indexOf(" ")&&(c=u.split(" "),u=c[0],c=c[1]),d=l=a[h],p=parseFloat(u),y=u.substr((p+"").length),_="="===d.charAt(1),_?(f=parseInt(d.charAt(0)+"1",10),d=d.substr(2),f*=parseFloat(d),v=d.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(d),v=d.substr((f+"").length)),""===v&&(v=s[i]||y),v!==y&&(x=J(t,"borderLeft",p,y),b=J(t,"borderTop",p,y),"%"===v?(u=100*(x/m)+"%",c=100*(b/g)+"%"):"em"===v?(w=J(t,"borderLeft",1,"em"),u=x/w+"em",c=b/w+"em"):(u=x+"px",c=b+"px"),_&&(d=parseFloat(u)+f+v,
l=parseFloat(c)+f+v)),n=gt(T,S[h],u+" "+c,d+" "+l,!1,"0px",n);return n},prefix:!0,formatter:ut("0px 0px 0px 0px",!1,!0)}),_t("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,s,r,n){var a,h,l,c,u,d,p="background-position",f=o||V(t,null),g=this.format((f?m?f.getPropertyValue(p+"-x")+" "+f.getPropertyValue(p+"-y"):f.getPropertyValue(p):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(-1!==g.indexOf("%")!=(-1!==v.indexOf("%"))&&(d=Z(t,"backgroundImage").replace(A,""),d&&"none"!==d)){for(a=g.split(" "),h=v.split(" "),N.setAttribute("src",d),l=2;--l>-1;)g=a[l],c=-1!==g.indexOf("%"),c!==(-1!==h[l].indexOf("%"))&&(u=0===l?t.offsetWidth-N.width:t.offsetHeight-N.height,a[l]=c?parseFloat(g)/100*u+"px":100*(parseFloat(g)/u)+"%");g=a.join(" ")}return this.parseComplex(t.style,g,v,r,n)},formatter:st}),_t("backgroundSize",{defaultValue:"0 0",formatter:st}),_t("perspective",{defaultValue:"0px",prefix:!0}),_t("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),_t("transformStyle",{prefix:!0}),_t("backfaceVisibility",{prefix:!0}),_t("userSelect",{prefix:!0}),_t("margin",{parser:dt("marginTop,marginRight,marginBottom,marginLeft")}),_t("padding",{parser:dt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),_t("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,s,r,n){var a,h,l;return 9>m?(h=t.currentStyle,l=8>m?" ":",",a="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(a=this.format(Z(t,this.p,o,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,r,n)}}),_t("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),_t("autoRound,strictUnits",{parser:function(t,e,i,s,o){return o}}),_t("border",{defaultValue:"0px solid #000",parser:function(t,e,i,s,r,n){return this.parseComplex(t.style,this.format(Z(t,"borderTopWidth",o,!1,"0px")+" "+Z(t,"borderTopStyle",o,!1,"solid")+" "+Z(t,"borderTopColor",o,!1,"#000")),this.format(e),r,n)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(ct)||["#000"])[0]}}),_t("borderWidth",{parser:dt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),_t("float,cssFloat,styleFloat",{parser:function(t,e,i,s,o){var r=t.style,n="cssFloat"in r?"cssFloat":"styleFloat";return new ft(r,n,0,0,o,-1,i,!1,0,r[n],e)}});var Nt=function(t){var e,i=this.t,s=i.filter||Z(this.data,"filter")||"",o=0|this.s+this.c*t;100===o&&(-1===s.indexOf("atrix(")&&-1===s.indexOf("radient(")&&-1===s.indexOf("oader(")?(i.removeAttribute("filter"),e=!Z(this.data,"filter")):(i.filter=s.replace(S,""),e=!0)),e||(this.xn1&&(i.filter=s=s||"alpha(opacity="+o+")"),-1===s.indexOf("pacity")?0===o&&this.xn1||(i.filter=s+" alpha(opacity="+o+")"):i.filter=s.replace(b,"opacity="+o))};_t("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,s,r,n){var a=parseFloat(Z(t,"opacity",o,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),l&&1===a&&"hidden"===Z(t,"visibility",o)&&0!==e&&(a=0),G?r=new ft(h,"opacity",a,e-a,r):(r=new ft(h,"opacity",100*a,100*(e-a),r),r.xn1=l?1:0,h.zoom=1,r.type=2,r.b="alpha(opacity="+r.s+")",r.e="alpha(opacity="+(r.s+r.c)+")",r.data=t,r.plugin=n,r.setRatio=Nt),l&&(r=new ft(h,"visibility",0,0,r,-1,null,!1,0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit"),r.xs0="inherit",s._overwriteProps.push(r.n),s._overwriteProps.push(i)),r}});var Ut=function(t,e){e&&(t.removeProperty?(("ms"===e.substr(0,2)||"webkit"===e.substr(0,6))&&(e="-"+e),t.removeProperty(e.replace(C,"-$1").toLowerCase())):t.removeAttribute(e))},zt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Ut(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};_t("className",{parser:function(t,e,s,r,n,a,h){var l,c,u,d,p,f=t.getAttribute("class")||"",m=t.style.cssText;if(n=r._classNamePT=new ft(t,s,0,0,n,2),n.setRatio=zt,n.pr=-11,i=!0,n.b=f,c=Q(t,o),u=t._gsClassPT){for(d={},p=u.data;p;)d[p.p]=1,p=p._next;u.setRatio(1)}return t._gsClassPT=n,n.e="="!==e.charAt(1)?e:f.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",n.e),l=$(t,c,Q(t),h,d),t.setAttribute("class",f),n.data=l.firstMPT,t.style.cssText=m,n=n.xfirst=r.parse(t,l.difs,n,a)}});var Gt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,s,o,r,n=this.t.style,a=h.transform.parse;if("all"===this.e)n.cssText="",o=!0;else for(e=this.e.split(" ").join("").split(","),s=e.length;--s>-1;)i=e[s],h[i]&&(h[i].parse===a?o=!0:i="transformOrigin"===i?Ct:h[i].p),Ut(n,i);o&&(Ut(n,St),r=this.t._gsTransform,r&&(r.svg&&this.t.removeAttribute("data-svg-origin"),delete this.t._gsTransform))}};for(_t("clearProps",{parser:function(t,e,s,o,r){return r=new ft(t,s,0,0,r,2),r.setRatio=Gt,r.e=e,r.pr=-10,r.data=o._tween,i=!0,r}}),l="bezier,throwProps,physicsProps,physics2D".split(","),vt=l.length;vt--;)xt(l[vt]);l=n.prototype,l._firstPT=l._lastParsedTransform=l._transform=null,l._onInitTween=function(t,e,a){if(!t.nodeType)return!1;this._target=t,this._tween=a,this._vars=e,c=e.autoRound,i=!1,s=e.suffixMap||n.suffixMap,o=V(t,""),r=this._overwriteProps;var l,p,m,g,v,y,_,x,b,S=t.style;if(u&&""===S.zIndex&&(l=Z(t,"zIndex",o),("auto"===l||""===l)&&this._addLazySet(S,"zIndex",0)),"string"==typeof e&&(g=S.cssText,l=Q(t,o),S.cssText=g+";"+e,l=$(t,l,Q(t)).difs,!G&&w.test(e)&&(l.opacity=parseFloat(RegExp.$1)),e=l,S.cssText=g),this._firstPT=p=e.className?h.className.parse(t,e.className,"className",this,null,null,e):this.parse(t,e,null),this._transformType){for(b=3===this._transformType,St?d&&(u=!0,""===S.zIndex&&(_=Z(t,"zIndex",o),("auto"===_||""===_)&&this._addLazySet(S,"zIndex",0)),f&&this._addLazySet(S,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(b?"visible":"hidden"))):S.zoom=1,m=p;m&&m._next;)m=m._next;x=new ft(t,"transform",0,0,null,2),this._linkCSSP(x,null,m),x.setRatio=St?jt:Ft,x.data=this._transform||Dt(t,o,!0),x.tween=a,x.pr=-1,r.pop()}if(i){for(;p;){for(y=p._next,m=g;m&&m.pr>p.pr;)m=m._next;(p._prev=m?m._prev:v)?p._prev._next=p:g=p,(p._next=m)?m._prev=p:v=p,p=y}this._firstPT=g}return!0},l.parse=function(t,e,i,r){var n,a,l,u,d,p,f,m,g,v,y=t.style;for(n in e)p=e[n],a=h[n],a?i=a.parse(t,p,n,this,i,r,e):(d=Z(t,n,o)+"",g="string"==typeof p,"color"===n||"fill"===n||"stroke"===n||-1!==n.indexOf("Color")||g&&T.test(p)?(g||(p=lt(p),p=(p.length>3?"rgba(":"rgb(")+p.join(",")+")"),i=gt(y,n,d,p,!0,"transparent",i,0,r)):!g||-1===p.indexOf(" ")&&-1===p.indexOf(",")?(l=parseFloat(d),f=l||0===l?d.substr((l+"").length):"",(""===d||"auto"===d)&&("width"===n||"height"===n?(l=it(t,n,o),f="px"):"left"===n||"top"===n?(l=K(t,n,o),f="px"):(l="opacity"!==n?0:1,f="")),v=g&&"="===p.charAt(1),v?(u=parseInt(p.charAt(0)+"1",10),p=p.substr(2),u*=parseFloat(p),m=p.replace(x,"")):(u=parseFloat(p),m=g?p.replace(x,""):""),""===m&&(m=n in s?s[n]:f),p=u||0===u?(v?u+l:u)+m:e[n],f!==m&&""!==m&&(u||0===u)&&l&&(l=J(t,n,l,f),"%"===m?(l/=J(t,n,100,"%")/100,e.strictUnits!==!0&&(d=l+"%")):"em"===m?l/=J(t,n,1,"em"):"px"!==m&&(u=J(t,n,u,m),m="px"),v&&(u||0===u)&&(p=u+l+m)),v&&(u+=l),!l&&0!==l||!u&&0!==u?void 0!==y[n]&&(p||"NaN"!=p+""&&null!=p)?(i=new ft(y,n,u||l||0,0,i,-1,n,!1,0,d,p),i.xs0="none"!==p||"display"!==n&&-1===n.indexOf("Style")?p:d):X("invalid "+n+" tween value: "+e[n]):(i=new ft(y,n,l,u-l,i,0,n,c!==!1&&("px"===m||"zIndex"===n),0,d,p),i.xs0=m)):i=gt(y,n,d,p,!0,null,i,0,r)),r&&i&&!i.plugin&&(i.plugin=r);return i},l.setRatio=function(t){var e,i,s,o=this._firstPT,r=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;o;){if(e=o.c*t+o.s,o.r?e=Math.round(e):r>e&&e>-r&&(e=0),o.type)if(1===o.type)if(s=o.l,2===s)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2;else if(3===s)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3;else if(4===s)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3+o.xn3+o.xs4;else if(5===s)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3+o.xn3+o.xs4+o.xn4+o.xs5;else{for(i=o.xs0+e+o.xs1,s=1;o.l>s;s++)i+=o["xn"+s]+o["xs"+(s+1)];o.t[o.p]=i}else-1===o.type?o.t[o.p]=o.xs0:o.setRatio&&o.setRatio(t);else o.t[o.p]=e+o.xs0;o=o._next}else for(;o;)2!==o.type?o.t[o.p]=o.b:o.setRatio(t),o=o._next;else for(;o;){if(2!==o.type)if(o.r&&-1!==o.type)if(e=Math.round(o.s+o.c),o.type){if(1===o.type){for(s=o.l,i=o.xs0+e+o.xs1,s=1;o.l>s;s++)i+=o["xn"+s]+o["xs"+(s+1)];o.t[o.p]=i}}else o.t[o.p]=e+o.xs0;else o.t[o.p]=o.e;else o.setRatio(t);o=o._next}},l._enableTransforms=function(t){this._transform=this._transform||Dt(this._target,o,!0),this._transformType=this._transform.svg&&bt||!t&&3!==this._transformType?2:3};var Ht=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};l._addLazySet=function(t,e,i){var s=this._firstPT=new ft(t,e,0,0,this._firstPT,2);s.e=i,s.setRatio=Ht,s.data=this},l._linkCSSP=function(t,e,i,s){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,s=!0),i?i._next=t:s||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},l._kill=function(e){var i,s,o,r=e;if(e.autoAlpha||e.alpha){r={};for(s in e)r[s]=e[s];r.opacity=1,r.autoAlpha&&(r.visibility=1)}return e.className&&(i=this._classNamePT)&&(o=i.xfirst,o&&o._prev?this._linkCSSP(o._prev,i._next,o._prev._prev):o===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,o._prev),this._classNamePT=null),t.prototype._kill.call(this,r)};var Xt=function(t,e,i){var s,o,r,n;if(t.slice)for(o=t.length;--o>-1;)Xt(t[o],e,i);else for(s=t.childNodes,o=s.length;--o>-1;)r=s[o],n=r.type,r.style&&(e.push(Q(r)),i&&i.push(r)),1!==n&&9!==n&&11!==n||!r.childNodes.length||Xt(r,e,i)};return n.cascadeTo=function(t,i,s){var o,r,n,a,h=e.to(t,i,s),l=[h],c=[],u=[],d=[],p=e._internals.reservedProps;for(t=h._targets||h.target,Xt(t,c,d),h.render(i,!0,!0),Xt(t,u),h.render(0,!0,!0),h._enabled(!0),o=d.length;--o>-1;)if(r=$(d[o],c[o],u[o]),r.firstMPT){r=r.difs;for(n in s)p[n]&&(r[n]=s[n]);a={};for(n in r)a[n]=c[o][n];l.push(e.fromTo(d[o],i,a,r))}return l},t.activate([n]),n},!0),function(){var t=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=t.prototype;e._onInitAllProps=function(){for(var t,e,i,s=this._tween,o=s.vars.roundProps instanceof Array?s.vars.roundProps:s.vars.roundProps.split(","),r=o.length,n={},a=s._propLookup.roundProps;--r>-1;)n[o[r]]=1;for(r=o.length;--r>-1;)for(t=o[r],e=s._firstPT;e;)i=e._next,e.pg?e.t._roundProps(n,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:s._firstPT===e&&(s._firstPT=i),e._next=e._prev=null,s._propLookup[t]=a),e=i;return!1},e._add=function(t,e,i,s){this._addTween(t,e,i,i+s,e,!0),this._overwriteProps.push(e)}}(),function(){var t=/(?:\d|\-|\+|=|#|\.)*/g,e=/[A-Za-z%]/g;_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.4.0",init:function(i,s){var o,r,n,a,h;if("function"!=typeof i.setAttribute)return!1;this._target=i,this._proxy={},this._start={},this._end={},this._suffix={};for(o in s)this._start[o]=this._proxy[o]=r=i.getAttribute(o)+"",this._end[o]=n=s[o]+"",this._suffix[o]=a=e.test(n)?n.replace(t,""):e.test(r)?r.replace(t,""):"",a&&(h=n.indexOf(a),-1!==h&&(n=n.substr(0,h))),this._addTween(this._proxy,o,parseFloat(r),n,o)||(this._suffix[o]=""),"="===n.charAt(1)&&(this._end[o]=this._firstPT.s+this._firstPT.c+a),this._overwriteProps.push(o);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,s=i.length,o=1===t?this._end:t?this._proxy:this._start,r=o===this._proxy;--s>-1;)e=i[s],this._target.setAttribute(e,o[e]+(r?this._suffix[e]:""))}})}(),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,s,o,r,n,a,h=e.useRadians===!0?2*Math.PI:360,l=1e-6;for(i in e)"useRadians"!==i&&(a=(e[i]+"").split("_"),s=a[0],o=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),r=this.finals[i]="string"==typeof s&&"="===s.charAt(1)?o+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0,n=r-o,a.length&&(s=a.join("_"),-1!==s.indexOf("short")&&(n%=h,n!==n%(h/2)&&(n=0>n?n+h:n-h)),-1!==s.indexOf("_cw")&&0>n?n=(n+9999999999*h)%h-(0|n/h)*h:-1!==s.indexOf("ccw")&&n>0&&(n=(n-9999999999*h)%h-(0|n/h)*h)),(n>l||-l>n)&&(this._addTween(t,i,o,o+n,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,s,o=_gsScope.GreenSockGlobals||_gsScope,r=o.com.greensock,n=2*Math.PI,a=Math.PI/2,h=r._class,l=function(e,i){var s=h("easing."+e,function(){},!0),o=s.prototype=new t;return o.constructor=s,o.getRatio=i,s},c=t.register||function(){},u=function(t,e,i,s){var o=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new s},!0);return c(o,t),o},d=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},p=function(e,i){var s=h("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),o=s.prototype=new t;return o.constructor=s,o.getRatio=i,o.config=function(t){return new s(t)},s},f=u("Back",p("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),p("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),p("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=h("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),g=m.prototype=new t;return g.constructor=m,g.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),g.config=m.config=function(t,e,i){return new m(t,e,i)},e=h("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),g=e.prototype=new t,g.constructor=e,g.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},g.config=e.config=function(t){return new e(t)},i=h("easing.RoughEase",function(e){e=e||{};for(var i,s,o,r,n,a,h=e.taper||"none",l=[],c=0,u=0|(e.points||20),p=u,f=e.randomize!==!1,m=e.clamp===!0,g=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=f?Math.random():1/u*p,s=g?g.getRatio(i):i,"none"===h?o=v:"out"===h?(r=1-i,o=r*r*v):"in"===h?o=i*i*v:.5>i?(r=2*i,o=.5*r*r*v):(r=2*(1-i),o=.5*r*r*v),f?s+=Math.random()*o-.5*o:p%2?s+=.5*o:s-=.5*o,m&&(s>1?s=1:0>s&&(s=0)),l[c++]={x:i,y:s};for(l.sort(function(t,e){return t.x-e.x}),a=new d(1,1,null),p=u;--p>-1;)n=l[p],a=new d(n.x,n.y,a);this._prev=new d(0,0,0!==a.t?a:a.next)},!0),g=i.prototype=new t,g.constructor=i,g.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},g.config=function(t){return new i(t)},i.ease=new i,u("Bounce",l("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),l("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),u("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),s=function(e,i,s){var o=h("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||s)/(1>t?t:1),this._p3=this._p2/n*(Math.asin(1/this._p1)||0),this._p2=n/this._p2},!0),r=o.prototype=new t;return r.constructor=o,r.getRatio=i,r.config=function(t,e){return new o(t,e)},o},u("Elastic",s("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),s("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2))},.3),s("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)+1},.45)),u("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),u("Sine",l("SineOut",function(t){return Math.sin(t*a)}),l("SineIn",function(t){return-Math.cos(t*a)+1}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),c(o.SlowMo,"SlowMo","ease,"),c(i,"RoughEase","ease,"),c(e,"SteppedEase","ease,"),f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t,e){var i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!i.TweenLite){var s,o,r,n,a,h=function(t){var e,s=t.split("."),o=i;for(e=0;s.length>e;e++)o[s[e]]=o=o[s[e]]||{};return o},l=h("com.greensock"),c=1e-10,u=function(t){var e,i=[],s=t.length;for(e=0;e!==s;i.push(t[e++]));return i},d=function(){},p=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),f={},m=function(s,o,r,n){this.sc=f[s]?f[s].sc:[],f[s]=this,this.gsClass=null,this.func=r;var a=[];this.check=function(l){for(var c,u,d,p,g=o.length,v=g;--g>-1;)(c=f[o[g]]||new m(o[g],[])).gsClass?(a[g]=c.gsClass,v--):l&&c.sc.push(this);if(0===v&&r)for(u=("com.greensock."+s).split("."),d=u.pop(),p=h(u.join("."))[d]=this.gsClass=r.apply(r,a),n&&(i[d]=p,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+s.split(".").pop(),[],function(){return p}):s===e&&"undefined"!=typeof module&&module.exports&&(module.exports=p)),g=0;this.sc.length>g;g++)this.sc[g].check()},this.check(!0)},g=t._gsDefine=function(t,e,i,s){return new m(t,e,i,s)},v=l._class=function(t,e,i){return e=e||function(){},g(t,[],function(){return e},i),e};g.globals=i;var y=[0,0,1,1],_=[],x=v("easing.Ease",function(t,e,i,s){this._func=t,this._type=i||0,this._power=s||0,this._params=e?y.concat(e):y},!0),b=x.map={},w=x.register=function(t,e,i,s){for(var o,r,n,a,h=e.split(","),c=h.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--c>-1;)for(r=h[c],o=s?v("easing."+r,null,!0):l.easing[r]||{},n=u.length;--n>-1;)a=u[n],b[r+"."+a]=b[a+r]=o[a]=t.getRatio?t:t[a]||new t};for(r=x.prototype,r._calcEnd=!1,r.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,s=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?s*=s:2===i?s*=s*s:3===i?s*=s*s*s:4===i&&(s*=s*s*s*s),1===e?1-s:2===e?s:.5>t?s/2:1-s/2},s=["Linear","Quad","Cubic","Quart","Quint,Strong"],o=s.length;--o>-1;)r=s[o]+",Power"+o,w(new x(null,null,1,o),r,"easeOut",!0),w(new x(null,null,2,o),r,"easeIn"+(0===o?",easeNone":"")),w(new x(null,null,3,o),r,"easeInOut");b.linear=l.easing.Linear.easeIn,b.swing=l.easing.Quad.easeInOut;var S=v("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});r=S.prototype,r.addEventListener=function(t,e,i,s,o){o=o||0;var r,h,l=this._listeners[t],c=0;for(null==l&&(this._listeners[t]=l=[]),h=l.length;--h>-1;)r=l[h],r.c===e&&r.s===i?l.splice(h,1):0===c&&o>r.pr&&(c=h+1);l.splice(c,0,{c:e,s:i,up:s,pr:o}),this!==n||a||n.wake()},r.removeEventListener=function(t,e){var i,s=this._listeners[t];if(s)for(i=s.length;--i>-1;)if(s[i].c===e)return void s.splice(i,1)},r.dispatchEvent=function(t){var e,i,s,o=this._listeners[t];if(o)for(e=o.length,i=this._eventTarget;--e>-1;)s=o[e],s&&(s.up?s.c.call(s.s||i,{type:t,target:i}):s.c.call(s.s||i))};var T=t.requestAnimationFrame,C=t.cancelAnimationFrame,P=Date.now||function(){return(new Date).getTime()},A=P();for(s=["ms","moz","webkit","o"],o=s.length;--o>-1&&!T;)T=t[s[o]+"RequestAnimationFrame"],C=t[s[o]+"CancelAnimationFrame"]||t[s[o]+"CancelRequestAnimationFrame"];v("Ticker",function(t,e){var i,s,o,r,h,l=this,u=P(),p=e!==!1&&T,f=500,m=33,g="tick",v=function(t){var e,n,a=P()-A;a>f&&(u+=a-m),A+=a,l.time=(A-u)/1e3,e=l.time-h,(!i||e>0||t===!0)&&(l.frame++,h+=e+(e>=r?.004:r-e),n=!0),t!==!0&&(o=s(v)),n&&l.dispatchEvent(g)};S.call(l),l.time=l.frame=0,l.tick=function(){v(!0)},l.lagSmoothing=function(t,e){f=t||1/c,m=Math.min(e,f,0)},l.sleep=function(){null!=o&&(p&&C?C(o):clearTimeout(o),s=d,o=null,l===n&&(a=!1))},l.wake=function(){null!==o?l.sleep():l.frame>10&&(A=P()-f+5),s=0===i?d:p&&T?T:function(t){return setTimeout(t,0|1e3*(h-l.time)+1)},l===n&&(a=!0),v(2)},l.fps=function(t){return arguments.length?(i=t,r=1/(i||60),h=this.time+r,void l.wake()):i},l.useRAF=function(t){return arguments.length?(l.sleep(),p=t,void l.fps(i)):p},l.fps(t),setTimeout(function(){p&&5>l.frame&&l.useRAF(!1)},1500)}),r=l.Ticker.prototype=new l.events.EventDispatcher,r.constructor=l.Ticker;var M=v("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,H){a||n.wake();var i=this.vars.useFrames?G:H;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});n=M.ticker=new l.Ticker,r=M.prototype,r._dirty=r._gc=r._initted=r._paused=!1,r._totalTime=r._time=0,r._rawPrevTime=-1,r._next=r._last=r._onUpdate=r._timeline=r.timeline=null,r._paused=!1;var E=function(){a&&P()-A>2e3&&n.wake(),setTimeout(E,2e3)};E(),r.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},r.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},r.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},r.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},r.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},r.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},r.render=function(){},r.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},r.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},r._enabled=function(t,e){return a||n.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},r._kill=function(){return this._enabled(!1,!1)},r.kill=function(t,e){return this._kill(t,e),this},r._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},r._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},r._callback=function(t){var e=this.vars;e[t].apply(e[t+"Scope"]||e.callbackScope||this,e[t+"Params"]||_)},r.eventCallback=function(t,e,i,s){if("on"===(t||"").substr(0,2)){var o=this.vars;if(1===arguments.length)return o[t];null==e?delete o[t]:(o[t]=e,o[t+"Params"]=p(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,o[t+"Scope"]=s),"onUpdate"===t&&(this._onUpdate=e)}return this},r.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},r.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},r.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},r.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},r.totalTime=function(t,e,i){if(a||n.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var s=this._totalDuration,o=this._timeline;if(t>s&&!i&&(t=s),this._startTime=(this._paused?this._pauseTime:o._time)-(this._reversed?s-t:t)/this._timeScale,o._dirty||this._uncache(!1),o._timeline)for(;o._timeline;)o._timeline._time!==(o._startTime+o._totalTime)/o._timeScale&&o.totalTime(o._totalTime,!0),o=o._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(this.render(t,e,!1),O.length&&q())}return this},r.progress=r.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},r.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},r.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},r.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||c,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},r.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},r.paused=function(t){if(!arguments.length)return this._paused;var e,i,s=this._timeline;return t!=this._paused&&s&&(a||t||n.wake(),e=s.rawTime(),i=e-this._pauseTime,!t&&s.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&this.render(s.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,!0,!0)),this._gc&&!t&&this._enabled(!0,!1),this};var I=v("core.SimpleTimeline",function(t){M.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});r=I.prototype=new M,r.constructor=I,r.kill()._gc=!1,r._first=r._last=r._recent=null,r._sortChildren=!1,r.add=r.insert=function(t,e){var i,s;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(s=t._startTime;i&&i._startTime>s;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._recent=t,this._timeline&&this._uncache(!0),this},r._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},r.render=function(t,e,i){var s,o=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;o;)s=o._next,(o._active||t>=o._startTime&&!o._paused)&&(o._reversed?o.render((o._dirty?o.totalDuration():o._totalDuration)-(t-o._startTime)*o._timeScale,e,i):o.render((t-o._startTime)*o._timeScale,e,i)),o=s},r.rawTime=function(){return a||n.wake(),this._totalTime};var k=v("TweenLite",function(e,i,s){if(M.call(this,i,s),this.render=k.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:k.selector(e)||e;var o,r,n,a=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?z[k.defaultOverwrite]:"number"==typeof h?h>>0:z[h],(a||e instanceof Array||e.push&&p(e))&&"number"!=typeof e[0])for(this._targets=n=u(e),this._propLookup=[],this._siblings=[],o=0;n.length>o;o++)r=n[o],r?"string"!=typeof r?r.length&&r!==t&&r[0]&&(r[0]===t||r[0].nodeType&&r[0].style&&!r.nodeType)?(n.splice(o--,1),this._targets=n=n.concat(u(r))):(this._siblings[o]=W(r,this,!1),1===h&&this._siblings[o].length>1&&V(r,this,null,1,this._siblings[o])):(r=n[o--]=k.selector(r),"string"==typeof r&&n.splice(o+1,1)):n.splice(o--,1);else this._propLookup={},this._siblings=W(e,this,!1),1===h&&this._siblings.length>1&&V(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-c,this.render(-this._delay))},!0),L=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},R=function(t,e){var i,s={};for(i in t)U[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!F[i]||F[i]&&F[i]._autoCSS)||(s[i]=t[i],delete t[i]);t.css=s};r=k.prototype=new M,r.constructor=k,r.kill()._gc=!1,r.ratio=0,r._firstPT=r._targets=r._overwrittenProps=r._startAt=null,r._notifyPluginsOfEnabled=r._lazy=!1,k.version="1.17.0",k.defaultEase=r._ease=new x(null,null,1,1),k.defaultOverwrite="auto",k.ticker=n,k.autoSleep=120,k.lagSmoothing=function(t,e){n.lagSmoothing(t,e)},k.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(k.selector=i,i(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var O=[],B={},D=k._internals={isArray:p,isSelector:L,lazyTweens:O},F=k._plugins={},j=D.tweenLookup={},N=0,U=D.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1},z={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},G=M._rootFramesTimeline=new I,H=M._rootTimeline=new I,X=30,q=D.lazyRender=function(){var t,e=O.length;for(B={};--e>-1;)t=O[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);O.length=0};H._startTime=n.time,G._startTime=n.frame,H._active=G._active=!0,setTimeout(q,1),M._updateRoot=k.render=function(){var t,e,i;if(O.length&&q(),H.render((n.time-H._startTime)*H._timeScale,!1,!1),G.render((n.frame-G._startTime)*G._timeScale,!1,!1),O.length&&q(),n.frame>=X){X=n.frame+(parseInt(k.autoSleep,10)||120);for(i in j){for(e=j[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete j[i]}if(i=H._first,(!i||i._paused)&&k.autoSleep&&!G._first&&1===n._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||n.sleep()}}},n.addEventListener("tick",M._updateRoot);var W=function(t,e,i){var s,o,r=t._gsTweenID;if(j[r||(t._gsTweenID=r="t"+N++)]||(j[r]={target:t,tweens:[]}),e&&(s=j[r].tweens,s[o=s.length]=e,i))for(;--o>-1;)s[o]===e&&s.splice(o,1);return j[r].tweens},Y=function(t,e,i,s){var o,r,n=t.vars.onOverwrite;return n&&(o=n(t,e,i,s)),n=k.onOverwrite,n&&(r=n(t,e,i,s)),o!==!1&&r!==!1;
},V=function(t,e,i,s,o){var r,n,a,h;if(1===s||s>=4){for(h=o.length,r=0;h>r;r++)if((a=o[r])!==e)a._gc||a._kill(null,t,e)&&(n=!0);else if(5===s)break;return n}var l,u=e._startTime+c,d=[],p=0,f=0===e._duration;for(r=o.length;--r>-1;)(a=o[r])===e||a._gc||a._paused||(a._timeline!==e._timeline?(l=l||Z(e,0,f),0===Z(a,l,f)&&(d[p++]=a)):u>=a._startTime&&a._startTime+a.totalDuration()/a._timeScale>u&&((f||!a._initted)&&2e-10>=u-a._startTime||(d[p++]=a)));for(r=p;--r>-1;)if(a=d[r],2===s&&a._kill(i,t,e)&&(n=!0),2!==s||!a._firstPT&&a._initted){if(2!==s&&!Y(a,e))continue;a._enabled(!1,!1)&&(n=!0)}return n},Z=function(t,e,i){for(var s=t._timeline,o=s._timeScale,r=t._startTime;s._timeline;){if(r+=s._startTime,o*=s._timeScale,s._paused)return-100;s=s._timeline}return r/=o,r>e?r-e:i&&r===e||!t._initted&&2*c>r-e?c:(r+=t.totalDuration()/t._timeScale/o)>e+c?0:r-e-c};r._init=function(){var t,e,i,s,o,r=this.vars,n=this._overwrittenProps,a=this._duration,h=!!r.immediateRender,l=r.ease;if(r.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),o={};for(s in r.startAt)o[s]=r.startAt[s];if(o.overwrite=!1,o.immediateRender=!0,o.lazy=h&&r.lazy!==!1,o.startAt=o.delay=null,this._startAt=k.to(this.target,0,o),h)if(this._time>0)this._startAt=null;else if(0!==a)return}else if(r.runBackwards&&0!==a)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(h=!1),i={};for(s in r)U[s]&&"autoCSS"!==s||(i[s]=r[s]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&r.lazy!==!1,i.immediateRender=h,this._startAt=k.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=l=l?l instanceof x?l:"function"==typeof l?new x(l,r.easeParams):b[l]||k.defaultEase:k.defaultEase,r.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,r.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],n?n[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,n);if(e&&k._onPluginEvent("_onInitAllProps",this),n&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),r.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=r.onUpdate,this._initted=!0},r._initProps=function(e,i,s,o){var r,n,a,h,l,c;if(null==e)return!1;B[e._gsTweenID]&&q(),this.vars.css||e.style&&e!==t&&e.nodeType&&F.css&&this.vars.autoCSS!==!1&&R(this.vars,e);for(r in this.vars){if(c=this.vars[r],U[r])c&&(c instanceof Array||c.push&&p(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[r]=c=this._swapSelfInParams(c,this));else if(F[r]&&(h=new F[r])._onInitTween(e,this.vars[r],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:r,pg:!0,pr:h._priority},n=h._overwriteProps.length;--n>-1;)i[h._overwriteProps[n]]=this._firstPT;(h._priority||h._onInitAllProps)&&(a=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[r]=l={_next:this._firstPT,t:e,p:r,f:"function"==typeof e[r],n:r,pg:!1,pr:0},l.s=l.f?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(e[r]),l.c="string"==typeof c&&"="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*Number(c.substr(2)):Number(c)-l.s||0;l&&l._next&&(l._next._prev=l)}return o&&this._kill(o,e)?this._initProps(e,i,s,o):this._overwrite>1&&this._firstPT&&s.length>1&&V(e,this,i,this._overwrite,s)?(this._kill(i,e),this._initProps(e,i,s,o)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(B[e._gsTweenID]=!0),a)},r.render=function(t,e,i){var s,o,r,n,a=this._time,h=this._duration,l=this._rawPrevTime;if(t>=h)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(s=!0,o="onComplete",i=i||this._timeline.autoRemoveChildren),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>l||l===c&&"isPause"!==this.data)&&l!==t&&(i=!0,l>c&&(o="onReverseComplete")),this._rawPrevTime=n=!e||t||l===t?t:c);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===h&&l>0)&&(o="onReverseComplete",s=this._reversed),0>t&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(l!==c||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=n=!e||t||l===t?t:c)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/h,d=this._easeType,p=this._easePower;(1===d||3===d&&u>=.5)&&(u=1-u),3===d&&(u*=2),1===p?u*=u:2===p?u*=u*u:3===p?u*=u*u*u:4===p&&(u*=u*u*u*u),this.ratio=1===d?1-u:2===d?u:.5>t/h?u/2:1-u/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=l,O.push(this),void(this._lazy=[t,e]);this._time&&!s?this.ratio=this._ease.getRatio(this._time/h):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):o||(o="_dummyGS")),this.vars.onStart&&(0!==this._time||0===h)&&(e||this._callback("onStart"))),r=this._firstPT;r;)r.f?r.t[r.p](r.c*this.ratio+r.s):r.t[r.p]=r.c*this.ratio+r.s,r=r._next;this._onUpdate&&(0>t&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,i),e||(this._time!==a||s)&&this._callback("onUpdate")),o&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this._callback(o),0===h&&this._rawPrevTime===c&&n!==c&&(this._rawPrevTime=0))}},r._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:k.selector(e)||e;var s,o,r,n,a,h,l,c,u,d=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((p(e)||L(e))&&"number"!=typeof e[0])for(s=e.length;--s>-1;)this._kill(t,e[s],i)&&(h=!0);else{if(this._targets){for(s=this._targets.length;--s>-1;)if(e===this._targets[s]){a=this._propLookup[s]||{},this._overwrittenProps=this._overwrittenProps||[],o=this._overwrittenProps[s]=t?this._overwrittenProps[s]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,o=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(l=t||a,c=t!==o&&"all"!==o&&t!==a&&("object"!=typeof t||!t._tempKill),i&&(k.onOverwrite||this.vars.onOverwrite)){for(r in l)a[r]&&(u||(u=[]),u.push(r));if((u||!t)&&!Y(this,i,e,u))return!1}for(r in l)(n=a[r])&&(d&&(n.f?n.t[n.p](n.s):n.t[n.p]=n.s,h=!0),n.pg&&n.t._kill(l)&&(h=!0),n.pg&&0!==n.t._overwriteProps.length||(n._prev?n._prev._next=n._next:n===this._firstPT&&(this._firstPT=n._next),n._next&&(n._next._prev=n._prev),n._next=n._prev=null),delete a[r]),c&&(o[r]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},r.invalidate=function(){return this._notifyPluginsOfEnabled&&k._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],M.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-c,this.render(-this._delay)),this},r._enabled=function(t,e){if(a||n.wake(),t&&this._gc){var i,s=this._targets;if(s)for(i=s.length;--i>-1;)this._siblings[i]=W(s[i],this,!0);else this._siblings=W(this.target,this,!0)}return M.prototype._enabled.call(this,t,e),this._notifyPluginsOfEnabled&&this._firstPT?k._onPluginEvent(t?"_onEnable":"_onDisable",this):!1},k.to=function(t,e,i){return new k(t,e,i)},k.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new k(t,e,i)},k.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new k(t,e,s)},k.delayedCall=function(t,e,i,s,o){return new k(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:s,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:o,overwrite:0})},k.set=function(t,e){return new k(t,0,e)},k.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:k.selector(t)||t;var i,s,o,r;if((p(t)||L(t))&&"number"!=typeof t[0]){for(i=t.length,s=[];--i>-1;)s=s.concat(k.getTweensOf(t[i],e));for(i=s.length;--i>-1;)for(r=s[i],o=i;--o>-1;)r===s[o]&&s.splice(i,1)}else for(s=W(t).concat(),i=s.length;--i>-1;)(s[i]._gc||e&&!s[i].isActive())&&s.splice(i,1);return s},k.killTweensOf=k.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var s=k.getTweensOf(t,e),o=s.length;--o>-1;)s[o]._kill(i,t)};var J=v("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=J.prototype},!0);if(r=J.prototype,J.version="1.10.1",J.API=2,r._firstPT=null,r._addTween=function(t,e,i,s,o,r){var n,a;return null!=s&&(n="number"==typeof s||"="!==s.charAt(1)?Number(s)-Number(i):parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)))?(this._firstPT=a={_next:this._firstPT,t:t,p:e,s:i,c:n,f:"function"==typeof t[e],n:o||e,r:r},a._next&&(a._next._prev=a),a):void 0},r.setRatio=function(t){for(var e,i=this._firstPT,s=1e-6;i;)e=i.c*t+i.s,i.r?e=Math.round(e):s>e&&e>-s&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},r._kill=function(t){var e,i=this._overwriteProps,s=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;s;)null!=t[s.n]&&(s._next&&(s._next._prev=s._prev),s._prev?(s._prev._next=s._next,s._prev=null):this._firstPT===s&&(this._firstPT=s._next)),s=s._next;return!1},r._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},k._onPluginEvent=function(t,e){var i,s,o,r,n,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(n=a._next,s=o;s&&s.pr>a.pr;)s=s._next;(a._prev=s?s._prev:r)?a._prev._next=a:o=a,(a._next=s)?s._prev=a:r=a,a=n}a=e._firstPT=o}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(i=!0),a=a._next;return i},J.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===J.API&&(F[(new t[e])._propName]=t[e]);return!0},g.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,s=t.priority||0,o=t.overwriteProps,r={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},n=v("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){J.call(this,i,s),this._overwriteProps=o||[]},t.global===!0),a=n.prototype=new J(i);a.constructor=n,n.API=t.API;for(e in r)"function"==typeof t[e]&&(a[r[e]]=t[e]);return n.version=t.version,J.activate([n]),n},s=t._gsQueue){for(o=0;s.length>o;o++)s[o]();for(r in f)f[r].func||t.console.log("GSAP encountered missing dependency: com.greensock."+r)}a=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax"),define("TWEEN",function(){}),(window._gsQueue||(window._gsQueue=[])).push(function(){window._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,s,o=window.GreenSockGlobals||window,r=o.com.greensock,n=2*Math.PI,a=Math.PI/2,h=r._class,l=function(e,i){var s=h("easing."+e,function(){},!0),o=s.prototype=new t;return o.constructor=s,o.getRatio=i,s},c=t.register||function(){},u=function(t,e,i,s){var o=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new s},!0);return c(o,t),o},d=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},p=function(e,i){var s=h("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),o=s.prototype=new t;return o.constructor=s,o.getRatio=i,o.config=function(t){return new s(t)},s},f=u("Back",p("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),p("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),p("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=h("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),g=m.prototype=new t;return g.constructor=m,g.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),g.config=m.config=function(t,e,i){return new m(t,e,i)},e=h("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),g=e.prototype=new t,g.constructor=e,g.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},g.config=e.config=function(t){return new e(t)},i=h("easing.RoughEase",function(e){e=e||{};for(var i,s,o,r,n,a,h=e.taper||"none",l=[],c=0,u=0|(e.points||20),p=u,f=e.randomize!==!1,m=e.clamp===!0,g=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=f?Math.random():1/u*p,s=g?g.getRatio(i):i,"none"===h?o=v:"out"===h?(r=1-i,o=r*r*v):"in"===h?o=i*i*v:.5>i?(r=2*i,o=.5*r*r*v):(r=2*(1-i),o=.5*r*r*v),f?s+=Math.random()*o-.5*o:p%2?s+=.5*o:s-=.5*o,m&&(s>1?s=1:0>s&&(s=0)),l[c++]={x:i,y:s};for(l.sort(function(t,e){return t.x-e.x}),a=new d(1,1,null),p=u;--p>-1;)n=l[p],a=new d(n.x,n.y,a);this._prev=new d(0,0,0!==a.t?a:a.next)},!0),g=i.prototype=new t,g.constructor=i,g.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},g.config=function(t){return new i(t)},i.ease=new i,u("Bounce",l("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),l("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),u("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),s=function(e,i,s){var o=h("easing."+e,function(t,e){this._p1=t||1,this._p2=e||s,this._p3=this._p2/n*(Math.asin(1/this._p1)||0)},!0),r=o.prototype=new t;return r.constructor=o,r.getRatio=i,r.config=function(t,e){return new o(t,e)},o},u("Elastic",s("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*n/this._p2)+1},.3),s("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*n/this._p2))},.3),s("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*n/this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*n/this._p2)+1},.45)),u("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),u("Sine",l("SineOut",function(t){return Math.sin(t*a)}),l("SineIn",function(t){return-Math.cos(t*a)+1}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),c(o.SlowMo,"SlowMo","ease,"),c(i,"RoughEase","ease,"),c(e,"SteppedEase","ease,"),f},!0)}),window._gsDefine&&window._gsQueue.pop()(),define("EASEPACK",function(){}),(window._gsQueue||(window._gsQueue=[])).push(function(){window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,s,o,r,n=function(){t.call(this,"css"),this._overwriteProps.length=0},a={},h=n.prototype=new t("css");h.constructor=n,n.version="1.9.6",n.API=2,n.defaultTransformPerspective=0,h="px",n.suffixMap={top:h,right:h,bottom:h,left:h,width:h,height:h,fontSize:h,padding:h,margin:h,perspective:h};var l,c,u,d,p,f,m=/(?:\d|\-\d|\.\d|\-\.\d)+/g,g=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,v=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,y=/[^\d\-\.]/g,_=/(?:\d|\-|\+|=|#|\.)*/g,x=/opacity *= *([^)]*)/,b=/opacity:([^;]*)/,w=/alpha\(opacity *=.+?\)/i,S=/^(rgb|hsl)/,T=/([A-Z])/g,C=/-([a-z])/gi,P=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,A=function(t,e){return e.toUpperCase()},M=/(?:Left|Right|Width)/i,E=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,I=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,k=/,(?=[^\)]*(?:\(|$))/gi,L=Math.PI/180,R=180/Math.PI,O={},B=document,D=B.createElement("div"),F=B.createElement("img"),j=n._internals={_specialProps:a},N=navigator.userAgent,U=function(){var t,e=N.indexOf("Android"),i=B.createElement("div");return u=-1!==N.indexOf("Safari")&&-1===N.indexOf("Chrome")&&(-1===e||Number(N.substr(e+8,1))>3),p=u&&6>Number(N.substr(N.indexOf("Version/")+8,1)),d=-1!==N.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N),f=parseFloat(RegExp.$1),i.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",t=i.getElementsByTagName("a")[0],t?/^0.55/.test(t.style.opacity):!1}(),z=function(t){return x.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},G=function(t){window.console&&void 0},H="",X="",q=function(t,e){e=e||D;var i,s,o=e.style;if(void 0!==o[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],s=5;--s>-1&&void 0===o[i[s]+t];);return s>=0?(X=3===s?"ms":i[s],H="-"+X.toLowerCase()+"-",X+t):null},W=B.defaultView?B.defaultView.getComputedStyle:function(){},Y=n.getStyle=function(t,e,i,s,o){var r;return U||"opacity"!==e?(!s&&t.style[e]?r=t.style[e]:(i=i||W(t,null))?(t=i.getPropertyValue(e.replace(T,"-$1").toLowerCase()),r=t||i.length?t:i[e]):t.currentStyle&&(i=t.currentStyle,r=i[e]),null==o||r&&"none"!==r&&"auto"!==r&&"auto auto"!==r?r:o):z(t)},V=function(t,e,i,s,o){if("px"===s||!s)return i;if("auto"===s||!i)return 0;var r,n=M.test(e),a=t,h=D.style,l=0>i;return l&&(i=-i),"%"===s&&-1!==e.indexOf("border")?r=i/100*(n?t.clientWidth:t.clientHeight):(h.cssText="border-style:solid; border-width:0; position:absolute; line-height:0;","%"!==s&&a.appendChild?h[n?"borderLeftWidth":"borderTopWidth"]=i+s:(a=t.parentNode||B.body,h[n?"width":"height"]=i+s),a.appendChild(D),r=parseFloat(D[n?"offsetWidth":"offsetHeight"]),a.removeChild(D),0!==r||o||(r=V(t,e,i,s,!0))),l?-r:r},Z=function(t,e,i){if("absolute"!==Y(t,"position",i))return 0;var s="left"===e?"Left":"Top",o=Y(t,"margin"+s,i);return t["offset"+s]-(V(t,e,parseFloat(o),o.replace(_,""))||0)},J=function(t,e){var i,s,o={};if(e=e||W(t,null))if(i=e.length)for(;--i>-1;)o[e[i].replace(C,A)]=e.getPropertyValue(e[i]);else for(i in e)o[i]=e[i];else if(e=t.currentStyle||t.style)for(i in e)o[i.replace(C,A)]=e[i];return U||(o.opacity=z(t)),s=St(t,e,!1),o.rotation=s.rotation*R,o.skewX=s.skewX*R,o.scaleX=s.scaleX,o.scaleY=s.scaleY,o.x=s.x,o.y=s.y,wt&&(o.z=s.z,o.rotationX=s.rotationX*R,o.rotationY=s.rotationY*R,o.scaleZ=s.scaleZ),o.filters&&delete o.filters,o},K=function(t,e,i,s,o){var r,n,a,h={},l=t.style;for(n in i)"cssText"!==n&&"length"!==n&&isNaN(n)&&(e[n]!==(r=i[n])||o&&o[n])&&-1===n.indexOf("Origin")&&("number"==typeof r||"string"==typeof r)&&(h[n]="auto"!==r||"left"!==n&&"top"!==n?""!==r&&"auto"!==r&&"none"!==r||"string"!=typeof e[n]||""===e[n].replace(y,"")?r:0:Z(t,n),void 0!==l[n]&&(a=new ut(l,n,l[n],a)));if(s)for(n in s)"className"!==n&&(h[n]=s[n]);return{difs:h,firstMPT:a}},Q={width:["Left","Right"],height:["Top","Bottom"]},$=["marginLeft","marginRight","marginTop","marginBottom"],tt=function(t,e,i){var s=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),o=Q[e],r=o.length;for(i=i||W(t,null);--r>-1;)s-=parseFloat(Y(t,"padding"+o[r],i,!0))||0,s-=parseFloat(Y(t,"border"+o[r]+"Width",i,!0))||0;return s},et=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),s=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],o=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==o?o="0":"center"===o&&(o="50%"),("center"===s||isNaN(parseFloat(s)))&&(s="50%"),e&&(e.oxp=-1!==s.indexOf("%"),e.oyp=-1!==o.indexOf("%"),e.oxr="="===s.charAt(1),e.oyr="="===o.charAt(1),e.ox=parseFloat(s.replace(y,"")),e.oy=parseFloat(o.replace(y,""))),s+" "+o+(i.length>2?" "+i[2]:"")},it=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},st=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*Number(t.substr(2))+e:parseFloat(t)},ot=function(t,e,i,s){var o,r,n,a,h=1e-6;return null==t?a=e:"number"==typeof t?a=t*L:(o=2*Math.PI,r=t.split("_"),n=Number(r[0].replace(y,""))*(-1===t.indexOf("rad")?L:1)-("="===t.charAt(1)?0:e),r.length&&(s&&(s[i]=e+n),-1!==t.indexOf("short")&&(n%=o,n!==n%(o/2)&&(n=0>n?n+o:n-o)),-1!==t.indexOf("_cw")&&0>n?n=(n+9999999999*o)%o-(0|n/o)*o:-1!==t.indexOf("ccw")&&n>0&&(n=(n-9999999999*o)%o-(0|n/o)*o)),a=e+n),h>a&&a>-h&&(a=0),a},rt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},nt=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},at=function(t){var e,i,s,o,r,n;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),rt[t]?rt[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),s=t.charAt(3),t="#"+e+e+i+i+s+s),t=parseInt(t.substr(1),16),[t>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(m),o=Number(t[0])%360/360,r=Number(t[1])/100,n=Number(t[2])/100,i=.5>=n?n*(r+1):n+r-n*r,e=2*n-i,t.length>3&&(t[3]=Number(t[3])),t[0]=nt(o+1/3,e,i),t[1]=nt(o,e,i),t[2]=nt(o-1/3,e,i),t):(t=t.match(m)||rt.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):rt.black},ht="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(h in rt)ht+="|"+h+"\\b";ht=RegExp(ht+")","gi");var lt=function(t,e,i,s){if(null==t)return function(t){return t};var o,r=e?(t.match(ht)||[""])[0]:"",n=t.split(r).join("").match(v)||[],a=t.substr(0,t.indexOf(n[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",c=n.length,u=c>0?n[0].replace(m,""):"";return c?o=e?function(t){var e,d,p,f;if("number"==typeof t)t+=u;else if(s&&k.test(t)){for(f=t.replace(k,"|").split("|"),p=0;f.length>p;p++)f[p]=o(f[p]);return f.join(",")}if(e=(t.match(ht)||[r])[0],d=t.split(e).join("").match(v)||[],p=d.length,c>p--)for(;c>++p;)d[p]=i?d[0|(p-1)/2]:n[p];return a+d.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,r,d;if("number"==typeof t)t+=u;else if(s&&k.test(t)){for(r=t.replace(k,"|").split("|"),d=0;r.length>d;d++)r[d]=o(r[d]);return r.join(",")}if(e=t.match(v)||[],d=e.length,c>d--)for(;c>++d;)e[d]=i?e[0|(d-1)/2]:n[d];return a+e.join(l)+h}:function(t){return t}},ct=function(t){return t=t.split(","),function(e,i,s,o,r,n,a){var h,l=(i+"").split(" ");for(a={},h=0;4>h;h++)a[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return o.parse(e,a,r,n)}},ut=(j._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,s,o,r=this.data,n=r.proxy,a=r.firstMPT,h=1e-6;a;)e=n[a.v],a.r?e=e>0?0|e+.5:0|e-.5:h>e&&e>-h&&(e=0),a.t[a.p]=e,a=a._next;if(r.autoRotate&&(r.autoRotate.rotation=n.rotation),1===t)for(a=r.firstMPT;a;){if(i=a.t,i.type){if(1===i.type){for(o=i.xs0+i.s+i.xs1,s=1;i.l>s;s++)o+=i["xn"+s]+i["xs"+(s+1)];i.e=o}}else i.e=i.s+i.xs0;a=a._next}},function(t,e,i,s,o){this.t=t,this.p=e,this.v=i,this.r=o,s&&(s._prev=this,this._next=s)}),dt=(j._parseToProxy=function(t,e,i,s,o,r){var n,a,h,l,c,u=s,d={},p={},f=i._transform,m=O;for(i._transform=null,O=e,s=c=i.parse(t,e,s,o),O=m,r&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));s&&s!==u;){if(1>=s.type&&(a=s.p,p[a]=s.s+s.c,d[a]=s.s,r||(l=new ut(s,"s",a,l,s.r),s.c=0),1===s.type))for(n=s.l;--n>0;)h="xn"+n,a=s.p+"_"+h,p[a]=s.data[h],d[a]=s[h],r||(l=new ut(s,h,a,l,s.rxp[h]));s=s._next}return{proxy:d,end:p,firstMPT:l,pt:c}},j.CSSPropTween=function(t,e,s,o,n,a,h,l,c,u,d){this.t=t,this.p=e,this.s=s,this.c=o,this.n=h||"css_"+e,t instanceof dt||r.push(this.n),this.r=l,this.type=a||0,c&&(this.pr=c,i=!0),this.b=void 0===u?s:u,this.e=void 0===d?s+o:d,n&&(this._next=n,n._prev=this)}),pt=n.parseComplex=function(t,e,i,s,o,r,n,a,h,c){n=new dt(t,e,0,0,n,c?2:1,null,!1,a,i,s),s+="";var u,d,p,f,v,y,_,x,b,w,T,C,P=i.split(", ").join(",").split(" "),A=s.split(", ").join(",").split(" "),M=P.length,E=l!==!1;for((-1!==s.indexOf(",")||-1!==i.indexOf(","))&&(P=P.join(" ").replace(k,", ").split(" "),A=A.join(" ").replace(k,", ").split(" "),M=P.length),M!==A.length&&(P=(r||"").split(" "),M=P.length),n.plugin=h,n.setRatio=c,u=0;M>u;u++)if(f=P[u],v=A[u],x=parseFloat(f),x||0===x)n.appendXtra("",x,it(v,x),v.replace(g,""),E&&-1!==v.indexOf("px"),!0);else if(o&&("#"===f.charAt(0)||rt[f]||S.test(f)))C=","===v.charAt(v.length-1)?"),":")",f=at(f),v=at(v),b=f.length+v.length>6,b&&!U&&0===v[3]?(n["xs"+n.l]+=n.l?" transparent":"transparent",n.e=n.e.split(A[u]).join("transparent")):(U||(b=!1),n.appendXtra(b?"rgba(":"rgb(",f[0],v[0]-f[0],",",!0,!0).appendXtra("",f[1],v[1]-f[1],",",!0).appendXtra("",f[2],v[2]-f[2],b?",":C,!0),b&&(f=4>f.length?1:f[3],n.appendXtra("",f,(4>v.length?1:v[3])-f,C,!1)));else if(y=f.match(m)){if(_=v.match(g),!_||_.length!==y.length)return n;for(p=0,d=0;y.length>d;d++)T=y[d],w=f.indexOf(T,p),n.appendXtra(f.substr(p,w-p),Number(T),it(_[d],T),"",E&&"px"===f.substr(w+T.length,2),0===d),p=w+T.length;n["xs"+n.l]+=f.substr(p)}else n["xs"+n.l]+=n.l?" "+f:f;if(-1!==s.indexOf("=")&&n.data){for(C=n.xs0+n.data.s,u=1;n.l>u;u++)C+=n["xs"+u]+n.data["xn"+u];n.e=C+n["xs"+u]}return n.l||(n.type=-1,n.xs0=n.e),n.xfirst||n},ft=9;for(h=dt.prototype,h.l=h.pr=0;--ft>0;)h["xn"+ft]=0,h["xs"+ft]="";h.xs0="",h._next=h._prev=h.xfirst=h.data=h.plugin=h.setRatio=h.rxp=null,h.appendXtra=function(t,e,i,s,o,r){var n=this,a=n.l;return n["xs"+a]+=r&&a?" "+t:t||"",i||0===a||n.plugin?(n.l++,n.type=n.setRatio?2:1,n["xs"+n.l]=s||"",a>0?(n.data["xn"+a]=e+i,n.rxp["xn"+a]=o,n["xn"+a]=e,n.plugin||(n.xfirst=new dt(n,"xn"+a,e,i,n.xfirst||n,0,n.n,o,n.pr),n.xfirst.xs0=0),n):(n.data={s:e+i},n.rxp={},n.s=e,n.c=i,n.r=o,n)):(n["xs"+a]+=e+(s||""),n)};var mt=function(t,e){e=e||{},this.p=e.prefix?q(t)||t:t,a[t]=a[this.p]=this,this.format=e.formatter||lt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},gt=j._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var s,o,r=t.split(","),n=e.defaultValue;for(i=i||[n],s=0;r.length>s;s++)e.prefix=0===s&&e.prefix,e.defaultValue=i[s]||n,o=new mt(r[s],e)},vt=function(t){if(!a[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";gt(t,{parser:function(t,i,s,o,r,n,h){var l=(window.GreenSockGlobals||window).com.greensock.plugins[e];return l?(l._cssRegister(),a[s].parse(t,i,s,o,r,n,h)):(G("Error: "+e+" js file not loaded."),r)}})}};h=mt.prototype,h.parseComplex=function(t,e,i,s,o,r){var n,a,h,l,c,u,d=this.keyword;if(this.multi&&(k.test(i)||k.test(e)?(a=e.replace(k,"|").split("|"),h=i.replace(k,"|").split("|")):d&&(a=[e],h=[i])),h){for(l=h.length>a.length?h.length:a.length,n=0;l>n;n++)e=a[n]=a[n]||this.dflt,i=h[n]=h[n]||this.dflt,d&&(c=e.indexOf(d),u=i.indexOf(d),c!==u&&(i=-1===u?h:a,i[n]+=" "+d));e=a.join(", "),i=h.join(", ")}return pt(t,this.p,e,i,this.clrs,this.dflt,s,this.pr,o,r)},h.parse=function(t,e,i,s,r,n){return this.parseComplex(t.style,this.format(Y(t,this.p,o,!1,this.dflt)),this.format(e),r,n)},n.registerSpecialProp=function(t,e,i){gt(t,{parser:function(t,s,o,r,n,a){var h=new dt(t,o,0,0,n,2,o,!1,i);return h.plugin=a,h.setRatio=e(t,s,r._tween,o),h},priority:i})};var yt="scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(","),_t=q("transform"),xt=H+"transform",bt=q("transformOrigin"),wt=null!==q("perspective"),St=function(t,e,i){var s,o,r,a,h,l,c,u,d,p,f,m,g,v=i?t._gsTransform||{skewY:0}:{skewY:0},y=0>v.scaleX,_=2e-5,x=1e5,b=-Math.PI+1e-4,w=Math.PI-1e-4,S=wt?parseFloat(Y(t,bt,e,!1,"0 0 0").split(" ")[2])||v.zOrigin||0:0;if(_t)s=Y(t,xt,e,!0);else if(t.currentStyle)if(s=t.currentStyle.filter.match(E),s&&4===s.length)s=[s[0].substr(4),Number(s[2].substr(4)),Number(s[1].substr(4)),s[3].substr(4),v.x||0,v.y||0].join(",");else{if(null!=v.x)return v;s=""}for(o=(s||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],r=o.length;--r>-1;)a=Number(o[r]),o[r]=(h=a-(a|=0))?(0|h*x+(0>h?-.5:.5))/x+a:a;if(16===o.length){var T=o[8],C=o[9],P=o[10],A=o[12],M=o[13],I=o[14];if(v.zOrigin&&(I=-v.zOrigin,A=T*I-o[12],M=C*I-o[13],I=P*I+v.zOrigin-o[14]),!i||null==v.rotationX){var k,L,R,O,B,D,F,j=o[0],N=o[1],U=o[2],z=o[3],G=o[4],H=o[5],X=o[6],q=o[7],W=o[11],V=v.rotationX=Math.atan2(X,P),Z=b>V||V>w;V&&(O=Math.cos(-V),B=Math.sin(-V),k=G*O+T*B,L=H*O+C*B,R=X*O+P*B,T=G*-B+T*O,C=H*-B+C*O,P=X*-B+P*O,W=q*-B+W*O,G=k,H=L,X=R),V=v.rotationY=Math.atan2(T,j),V&&(D=b>V||V>w,O=Math.cos(-V),B=Math.sin(-V),k=j*O-T*B,L=N*O-C*B,R=U*O-P*B,C=N*B+C*O,P=U*B+P*O,W=z*B+W*O,j=k,N=L,U=R),V=v.rotation=Math.atan2(N,H),V&&(F=b>V||V>w,O=Math.cos(-V),B=Math.sin(-V),j=j*O+G*B,L=N*O+H*B,H=N*-B+H*O,X=U*-B+X*O,N=L),F&&Z?v.rotation=v.rotationX=0:F&&D?v.rotation=v.rotationY=0:D&&Z&&(v.rotationY=v.rotationX=0),v.scaleX=(0|Math.sqrt(j*j+N*N)*x+.5)/x,v.scaleY=(0|Math.sqrt(H*H+C*C)*x+.5)/x,v.scaleZ=(0|Math.sqrt(X*X+P*P)*x+.5)/x,v.skewX=0,v.perspective=W?1/(0>W?-W:W):0,v.x=A,v.y=M,v.z=I}}else if(!(wt&&0!==o.length&&v.x===o[4]&&v.y===o[5]&&(v.rotationX||v.rotationY)||void 0!==v.x&&"none"===Y(t,"display",e))){var J=o.length>=6,K=J?o[0]:1,Q=o[1]||0,$=o[2]||0,tt=J?o[3]:1;v.x=o[4]||0,v.y=o[5]||0,l=Math.sqrt(K*K+Q*Q),c=Math.sqrt(tt*tt+$*$),u=K||Q?Math.atan2(Q,K):v.rotation||0,d=$||tt?Math.atan2($,tt)+u:v.skewX||0,p=l-Math.abs(v.scaleX||0),f=c-Math.abs(v.scaleY||0),Math.abs(d)>Math.PI/2&&Math.abs(d)<1.5*Math.PI&&(y?(l*=-1,d+=0>=u?Math.PI:-Math.PI,u+=0>=u?Math.PI:-Math.PI):(c*=-1,d+=0>=d?Math.PI:-Math.PI)),m=(u-v.rotation)%Math.PI,g=(d-v.skewX)%Math.PI,(void 0===v.skewX||p>_||-_>p||f>_||-_>f||m>b&&w>m&&!1|m*x||g>b&&w>g&&!1|g*x)&&(v.scaleX=l,v.scaleY=c,v.rotation=u,v.skewX=d),wt&&(v.rotationX=v.rotationY=v.z=0,v.perspective=parseFloat(n.defaultTransformPerspective)||0,v.scaleZ=1)}v.zOrigin=S;for(r in v)_>v[r]&&v[r]>-_&&(v[r]=0);return i&&(t._gsTransform=v),v},Tt=function(t){var e,i,s=this.data,o=-s.rotation,r=o+s.skewX,n=1e5,a=(0|Math.cos(o)*s.scaleX*n)/n,h=(0|Math.sin(o)*s.scaleX*n)/n,l=(0|Math.sin(r)*-s.scaleY*n)/n,c=(0|Math.cos(r)*s.scaleY*n)/n,u=this.t.style,d=this.t.currentStyle;if(d){i=h,h=-l,l=-i,e=d.filter,u.filter="";var p,m,g=this.t.offsetWidth,v=this.t.offsetHeight,y="absolute"!==d.position,b="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+h+", M21="+l+", M22="+c,w=s.x,S=s.y;if(null!=s.ox&&(p=(s.oxp?.01*g*s.ox:s.ox)-g/2,m=(s.oyp?.01*v*s.oy:s.oy)-v/2,w+=p-(p*a+m*h),S+=m-(p*l+m*c)),y)p=g/2,m=v/2,b+=", Dx="+(p-(p*a+m*h)+w)+", Dy="+(m-(p*l+m*c)+S)+")";else{var T,C,P,A=8>f?1:-1;for(p=s.ieOffsetX||0,m=s.ieOffsetY||0,s.ieOffsetX=Math.round((g-((0>a?-a:a)*g+(0>h?-h:h)*v))/2+w),s.ieOffsetY=Math.round((v-((0>c?-c:c)*v+(0>l?-l:l)*g))/2+S),ft=0;4>ft;ft++)C=$[ft],T=d[C],i=-1!==T.indexOf("px")?parseFloat(T):V(this.t,C,parseFloat(T),T.replace(_,""))||0,
P=i!==s[C]?2>ft?-s.ieOffsetX:-s.ieOffsetY:2>ft?p-s.ieOffsetX:m-s.ieOffsetY,u[C]=(s[C]=Math.round(i-P*(0===ft||2===ft?1:A)))+"px";b+=", sizingMethod='auto expand')"}u.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(I,b):b+" "+e,(0===t||1===t)&&1===a&&0===h&&0===l&&1===c&&(y&&-1===b.indexOf("Dx=0, Dy=0")||x.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf("gradient(")&&u.removeAttribute("filter"))}},Ct=function(){var t,e,i,s,o,r,n,a,h,l=this.data,c=this.t.style,u=l.perspective,p=l.scaleX,f=0,m=0,g=0,v=0,y=l.scaleY,_=0,x=0,b=0,w=0,S=l.scaleZ,T=0,C=0,P=0,A=u?-1/u:0,M=l.rotation,E=l.zOrigin,I=1e5;d&&(n=c.top?"top":c.bottom?"bottom":parseFloat(Y(this.t,"top",null,!1))?"bottom":"top",i=Y(this.t,n,null,!1),a=parseFloat(i)||0,h=i.substr((a+"").length)||"px",l._ffFix=!l._ffFix,c[n]=(l._ffFix?a+.05:a-.05)+h),(M||l.skewX)&&(i=p*Math.cos(M),s=y*Math.sin(M),M-=l.skewX,f=p*-Math.sin(M),y*=Math.cos(M),p=i,v=s),M=l.rotationY,M&&(t=Math.cos(M),e=Math.sin(M),i=p*t,s=v*t,o=S*-e,r=A*-e,m=p*e,_=v*e,S*=t,A*=t,p=i,v=s,b=o,C=r),M=l.rotationX,M&&(t=Math.cos(M),e=Math.sin(M),i=f*t+m*e,s=y*t+_*e,o=w*t+S*e,r=P*t+A*e,m=f*-e+m*t,_=y*-e+_*t,S=w*-e+S*t,A=P*-e+A*t,f=i,y=s,w=o,P=r),E&&(T-=E,g=m*T,x=_*T,T=S*T+E),g=(i=(g+=l.x)-(g|=0))?(0|i*I+(0>i?-.5:.5))/I+g:g,x=(i=(x+=l.y)-(x|=0))?(0|i*I+(0>i?-.5:.5))/I+x:x,T=(i=(T+=l.z)-(T|=0))?(0|i*I+(0>i?-.5:.5))/I+T:T,c[_t]="matrix3d("+[(0|p*I)/I,(0|v*I)/I,(0|b*I)/I,(0|C*I)/I,(0|f*I)/I,(0|y*I)/I,(0|w*I)/I,(0|P*I)/I,(0|m*I)/I,(0|_*I)/I,(0|S*I)/I,(0|A*I)/I,g,x,T,u?1+-T/u:1].join(",")+")"},Pt=function(){var t,e,i,s,o,r,n,a,h,l=this.data,c=this.t,u=c.style;d&&(t=u.top?"top":u.bottom?"bottom":parseFloat(Y(c,"top",null,!1))?"bottom":"top",e=Y(c,t,null,!1),i=parseFloat(e)||0,s=e.substr((i+"").length)||"px",l._ffFix=!l._ffFix,u[t]=(l._ffFix?i+.05:i-.05)+s),l.rotation||l.skewX?(o=l.rotation,r=o-l.skewX,n=1e5,a=l.scaleX*n,h=l.scaleY*n,u[_t]="matrix("+(0|Math.cos(o)*a)/n+","+(0|Math.sin(o)*a)/n+","+(0|Math.sin(r)*-h)/n+","+(0|Math.cos(r)*h)/n+","+l.x+","+l.y+")"):u[_t]="matrix("+l.scaleX+",0,0,"+l.scaleY+","+l.x+","+l.y+")"};gt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation",{parser:function(t,e,i,s,r,n,a){if(s._transform)return r;var h,l,c,u,d,p,f,m=s._transform=St(t,o,!0),g=t.style,v=1e-6,y=yt.length,_=a,x={};if("string"==typeof _.transform&&_t)c=g.cssText,g[_t]=_.transform,g.display="block",h=St(t,null,!1),g.cssText=c;else if("object"==typeof _){if(h={scaleX:st(null!=_.scaleX?_.scaleX:_.scale,m.scaleX),scaleY:st(null!=_.scaleY?_.scaleY:_.scale,m.scaleY),scaleZ:st(null!=_.scaleZ?_.scaleZ:_.scale,m.scaleZ),x:st(_.x,m.x),y:st(_.y,m.y),z:st(_.z,m.z),perspective:st(_.transformPerspective,m.perspective)},f=_.directionalRotation,null!=f)if("object"==typeof f)for(c in f)_[c]=f[c];else _.rotation=f;h.rotation=ot("rotation"in _?_.rotation:"shortRotation"in _?_.shortRotation+"_short":"rotationZ"in _?_.rotationZ:m.rotation*R,m.rotation,"rotation",x),wt&&(h.rotationX=ot("rotationX"in _?_.rotationX:"shortRotationX"in _?_.shortRotationX+"_short":m.rotationX*R||0,m.rotationX,"rotationX",x),h.rotationY=ot("rotationY"in _?_.rotationY:"shortRotationY"in _?_.shortRotationY+"_short":m.rotationY*R||0,m.rotationY,"rotationY",x)),h.skewX=null==_.skewX?m.skewX:ot(_.skewX,m.skewX),h.skewY=null==_.skewY?m.skewY:ot(_.skewY,m.skewY),(l=h.skewY-m.skewY)&&(h.skewX+=l,h.rotation+=l)}for(d=m.z||m.rotationX||m.rotationY||h.z||h.rotationX||h.rotationY||h.perspective,d||null==_.scale||(h.scaleZ=1);--y>-1;)i=yt[y],u=h[i]-m[i],(u>v||-v>u||null!=O[i])&&(p=!0,r=new dt(m,i,m[i],u,r),i in x&&(r.e=x[i]),r.xs0=0,r.plugin=n,s._overwriteProps.push(r.n));return u=_.transformOrigin,(u||wt&&d&&m.zOrigin)&&(_t?(p=!0,u=(u||Y(t,i,o,!1,"50% 50%"))+"",i=bt,r=new dt(g,i,0,0,r,-1,"css_transformOrigin"),r.b=g[i],r.plugin=n,wt?(c=m.zOrigin,u=u.split(" "),m.zOrigin=(u.length>2?parseFloat(u[2]):c)||0,r.xs0=r.e=g[i]=u[0]+" "+(u[1]||"50%")+" 0px",r=new dt(m,"zOrigin",0,0,r,-1,r.n),r.b=c,r.xs0=r.e=m.zOrigin):r.xs0=r.e=g[i]=u):et(u+"",m)),p&&(s._transformType=d||3===this._transformType?3:2),r},prefix:!0}),gt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),gt("borderRadius",{defaultValue:"0px",parser:function(t,e,i,r,n){e=this.format(e);var a,h,l,c,u,d,p,f,m,g,v,y,_,x,b,w,S=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],T=t.style;for(m=parseFloat(t.offsetWidth),g=parseFloat(t.offsetHeight),a=e.split(" "),h=0;S.length>h;h++)this.p.indexOf("border")&&(S[h]=q(S[h])),u=c=Y(t,S[h],o,!1,"0px"),-1!==u.indexOf(" ")&&(c=u.split(" "),u=c[0],c=c[1]),d=l=a[h],p=parseFloat(u),y=u.substr((p+"").length),_="="===d.charAt(1),_?(f=parseInt(d.charAt(0)+"1",10),d=d.substr(2),f*=parseFloat(d),v=d.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(d),v=d.substr((f+"").length)),""===v&&(v=s[i]||y),v!==y&&(x=V(t,"borderLeft",p,y),b=V(t,"borderTop",p,y),"%"===v?(u=100*(x/m)+"%",c=100*(b/g)+"%"):"em"===v?(w=V(t,"borderLeft",1,"em"),u=x/w+"em",c=b/w+"em"):(u=x+"px",c=b+"px"),_&&(d=parseFloat(u)+f+v,l=parseFloat(c)+f+v)),n=pt(T,S[h],u+" "+c,d+" "+l,!1,"0px",n);return n},prefix:!0,formatter:lt("0px 0px 0px 0px",!1,!0)}),gt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,s,r,n){var a,h,l,c,u,d,p="background-position",m=o||W(t,null),g=this.format((m?f?m.getPropertyValue(p+"-x")+" "+m.getPropertyValue(p+"-y"):m.getPropertyValue(p):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(-1!==g.indexOf("%")!=(-1!==v.indexOf("%"))&&(d=Y(t,"backgroundImage").replace(P,""),d&&"none"!==d)){for(a=g.split(" "),h=v.split(" "),F.setAttribute("src",d),l=2;--l>-1;)g=a[l],c=-1!==g.indexOf("%"),c!==(-1!==h[l].indexOf("%"))&&(u=0===l?t.offsetWidth-F.width:t.offsetHeight-F.height,a[l]=c?parseFloat(g)/100*u+"px":100*(parseFloat(g)/u)+"%");g=a.join(" ")}return this.parseComplex(t.style,g,v,r,n)},formatter:et}),gt("backgroundSize",{defaultValue:"0 0",formatter:et}),gt("perspective",{defaultValue:"0px",prefix:!0}),gt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),gt("transformStyle",{prefix:!0}),gt("backfaceVisibility",{prefix:!0}),gt("margin",{parser:ct("marginTop,marginRight,marginBottom,marginLeft")}),gt("padding",{parser:ct("paddingTop,paddingRight,paddingBottom,paddingLeft")}),gt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,s,r,n){var a,h,l;return 9>f?(h=t.currentStyle,l=8>f?" ":",",a="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(a=this.format(Y(t,this.p,o,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,r,n)}}),gt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),gt("autoRound,strictUnits",{parser:function(t,e,i,s,o){return o}}),gt("border",{defaultValue:"0px solid #000",parser:function(t,e,i,s,r,n){return this.parseComplex(t.style,this.format(Y(t,"borderTopWidth",o,!1,"0px")+" "+Y(t,"borderTopStyle",o,!1,"solid")+" "+Y(t,"borderTopColor",o,!1,"#000")),this.format(e),r,n)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(ht)||["#000"])[0]}}),gt("float,cssFloat,styleFloat",{parser:function(t,e,i,s,o){var r=t.style,n="cssFloat"in r?"cssFloat":"styleFloat";return new dt(r,n,0,0,o,-1,i,!1,0,r[n],e)}});var At=function(t){var e,i=this.t,s=i.filter,o=0|this.s+this.c*t;100===o&&(-1===s.indexOf("atrix(")&&-1===s.indexOf("radient(")?(i.removeAttribute("filter"),e=!Y(this.data,"filter")):(i.filter=s.replace(w,""),e=!0)),e||(this.xn1&&(i.filter=s=s||"alpha(opacity=100)"),-1===s.indexOf("opacity")?i.filter+=" alpha(opacity="+o+")":i.filter=s.replace(x,"opacity="+o))};gt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,s,r,n){var a,h=parseFloat(Y(t,"opacity",o,!1,"1")),l=t.style;return e=parseFloat(e),"autoAlpha"===i&&(a=Y(t,"visibility",o),1===h&&"hidden"===a&&0!==e&&(h=0),r=new dt(l,"visibility",0,0,r,-1,null,!1,0,0!==h?"visible":"hidden",0===e?"hidden":"visible"),r.xs0="visible",s._overwriteProps.push(r.n)),U?r=new dt(l,"opacity",h,e-h,r):(r=new dt(l,"opacity",100*h,100*(e-h),r),r.xn1="autoAlpha"===i?1:0,l.zoom=1,r.type=2,r.b="alpha(opacity="+r.s+")",r.e="alpha(opacity="+(r.s+r.c)+")",r.data=t,r.plugin=n,r.setRatio=At),r}});var Mt=function(t,e){e&&(t.removeProperty?t.removeProperty(e.replace(T,"-$1").toLowerCase()):t.removeAttribute(e))},Et=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.className=0===t?this.b:this.e;for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Mt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.className!==this.e&&(this.t.className=this.e)};gt("className",{parser:function(t,e,s,r,n,a,h){var l,c,u,d,p,f=t.className,m=t.style.cssText;if(n=r._classNamePT=new dt(t,s,0,0,n,2),n.setRatio=Et,n.pr=-11,i=!0,n.b=f,c=J(t,o),u=t._gsClassPT){for(d={},p=u.data;p;)d[p.p]=1,p=p._next;u.setRatio(1)}return t._gsClassPT=n,n.e="="!==e.charAt(1)?e:f.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),r._tween._duration&&(t.className=n.e,l=K(t,c,J(t),h,d),t.className=f,n.data=l.firstMPT,t.style.cssText=m,n=n.xfirst=r.parse(t,l.difs,n,a)),n}});var It=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration)for(var e,i="all"===this.e,s=this.t.style,o=i?s.cssText.split(";"):this.e.split(","),r=o.length,n=a.transform.parse;--r>-1;)e=o[r],i&&(e=e.substr(0,e.indexOf(":")).split(" ").join("")),a[e]&&(e=a[e].parse===n?_t:a[e].p),Mt(s,e)};for(gt("clearProps",{parser:function(t,e,s,o,r){return r=new dt(t,s,0,0,r,2),r.setRatio=It,r.e=e,r.pr=-10,r.data=o._tween,i=!0,r}}),h="bezier,throwProps,physicsProps,physics2D".split(","),ft=h.length;ft--;)vt(h[ft]);h=n.prototype,h._firstPT=null,h._onInitTween=function(t,e,a){if(!t.nodeType)return!1;this._target=t,this._tween=a,this._vars=e,l=e.autoRound,i=!1,s=e.suffixMap||n.suffixMap,o=W(t,""),r=this._overwriteProps;var h,d,f,m,g,v,y,_,x,w=t.style;if(c&&""===w.zIndex&&(h=Y(t,"zIndex",o),("auto"===h||""===h)&&(w.zIndex=0)),"string"==typeof e&&(m=w.cssText,h=J(t,o),w.cssText=m+";"+e,h=K(t,h,J(t)).difs,!U&&b.test(e)&&(h.opacity=parseFloat(RegExp.$1)),e=h,w.cssText=m),this._firstPT=d=this.parse(t,e,null),this._transformType){for(x=3===this._transformType,_t?u&&(c=!0,""===w.zIndex&&(y=Y(t,"zIndex",o),("auto"===y||""===y)&&(w.zIndex=0)),p&&(w.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(x?"visible":"hidden"))):w.zoom=1,f=d;f&&f._next;)f=f._next;_=new dt(t,"transform",0,0,null,2),this._linkCSSP(_,null,f),_.setRatio=x&&wt?Ct:_t?Pt:Tt,_.data=this._transform||St(t,o,!0),r.pop()}if(i){for(;d;){for(v=d._next,f=m;f&&f.pr>d.pr;)f=f._next;(d._prev=f?f._prev:g)?d._prev._next=d:m=d,(d._next=f)?f._prev=d:g=d,d=v}this._firstPT=m}return!0},h.parse=function(t,e,i,r){var n,h,c,u,d,p,f,m,g,v,y=t.style;for(n in e)p=e[n],h=a[n],h?i=h.parse(t,p,n,this,i,r,e):(d=Y(t,n,o)+"",g="string"==typeof p,"color"===n||"fill"===n||"stroke"===n||-1!==n.indexOf("Color")||g&&S.test(p)?(g||(p=at(p),p=(p.length>3?"rgba(":"rgb(")+p.join(",")+")"),i=pt(y,n,d,p,!0,"transparent",i,0,r)):!g||-1===p.indexOf(" ")&&-1===p.indexOf(",")?(c=parseFloat(d),f=c||0===c?d.substr((c+"").length):"",(""===d||"auto"===d)&&("width"===n||"height"===n?(c=tt(t,n,o),f="px"):"left"===n||"top"===n?(c=Z(t,n,o),f="px"):(c="opacity"!==n?0:1,f="")),v=g&&"="===p.charAt(1),v?(u=parseInt(p.charAt(0)+"1",10),p=p.substr(2),u*=parseFloat(p),m=p.replace(_,"")):(u=parseFloat(p),m=g?p.substr((u+"").length)||"":""),""===m&&(m=s[n]||f),p=u||0===u?(v?u+c:u)+m:e[n],f!==m&&""!==m&&(u||0===u)&&(c||0===c)&&(c=V(t,n,c,f),"%"===m?(c/=V(t,n,100,"%")/100,c>100&&(c=100),e.strictUnits!==!0&&(d=c+"%")):"em"===m?c/=V(t,n,1,"em"):(u=V(t,n,u,m),m="px"),v&&(u||0===u)&&(p=u+c+m)),v&&(u+=c),!c&&0!==c||!u&&0!==u?p||"NaN"!=p+""&&null!=p?(i=new dt(y,n,u||c||0,0,i,-1,"css_"+n,!1,0,d,p),i.xs0="none"!==p||"display"!==n&&-1===n.indexOf("Style")?p:d):G("invalid "+n+" tween value: "+e[n]):(i=new dt(y,n,c,u-c,i,0,"css_"+n,l!==!1&&("px"===m||"zIndex"===n),0,d,p),i.xs0=m)):i=pt(y,n,d,p,!0,null,i,0,r)),r&&i&&!i.plugin&&(i.plugin=r);return i},h.setRatio=function(t){var e,i,s,o=this._firstPT,r=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;o;){if(e=o.c*t+o.s,o.r?e=e>0?0|e+.5:0|e-.5:r>e&&e>-r&&(e=0),o.type)if(1===o.type)if(s=o.l,2===s)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2;else if(3===s)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3;else if(4===s)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3+o.xn3+o.xs4;else if(5===s)o.t[o.p]=o.xs0+e+o.xs1+o.xn1+o.xs2+o.xn2+o.xs3+o.xn3+o.xs4+o.xn4+o.xs5;else{for(i=o.xs0+e+o.xs1,s=1;o.l>s;s++)i+=o["xn"+s]+o["xs"+(s+1)];o.t[o.p]=i}else-1===o.type?o.t[o.p]=o.xs0:o.setRatio&&o.setRatio(t);else o.t[o.p]=e+o.xs0;o=o._next}else for(;o;)2!==o.type?o.t[o.p]=o.b:o.setRatio(t),o=o._next;else for(;o;)2!==o.type?o.t[o.p]=o.e:o.setRatio(t),o=o._next},h._enableTransforms=function(t){this._transformType=t||3===this._transformType?3:2},h._linkCSSP=function(t,e,i,s){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),i?i._next=t:s||null!==this._firstPT||(this._firstPT=t),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next),t._next=e,t._prev=i),t},h._kill=function(e){var i,s,o,r=e;if(e.css_autoAlpha||e.css_alpha){r={};for(s in e)r[s]=e[s];r.css_opacity=1,r.css_autoAlpha&&(r.css_visibility=1)}return e.css_className&&(i=this._classNamePT)&&(o=i.xfirst,o&&o._prev?this._linkCSSP(o._prev,i._next,o._prev._prev):o===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,o._prev),this._classNamePT=null),t.prototype._kill.call(this,r)};var kt=function(t,e,i){var s,o,r,n;if(t.slice)for(o=t.length;--o>-1;)kt(t[o],e,i);else for(s=t.childNodes,o=s.length;--o>-1;)r=s[o],n=r.type,r.style&&(e.push(J(r)),i&&i.push(r)),1!==n&&9!==n&&11!==n||!r.childNodes.length||kt(r,e,i)};return n.cascadeTo=function(t,i,s){var o,r,n,a=e.to(t,i,s),h=[a],l=[],c=[],u=[],d=e._internals.reservedProps;for(t=a._targets||a.target,kt(t,l,u),a.render(i,!0),kt(t,c),a.render(0,!0),a._enabled(!0),o=u.length;--o>-1;)if(r=K(u[o],l[o],c[o]),r.firstMPT){r=r.difs;for(n in s)d[n]&&(r[n]=s[n]);h.push(e.to(u[o],i,r))}return h},t.activate([n]),n},!0)}),window._gsDefine&&window._gsQueue.pop()(),define("CSSPACK",function(){});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){var t=180/Math.PI,e=[],i=[],s=[],o={},r=_gsScope._gsDefine.globals,n=function(t,e,i,s){this.a=t,this.b=e,this.c=i,this.d=s,this.da=s-t,this.ca=i-t,this.ba=e-t},a=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",h=function(t,e,i,s){var o={a:t},r={},n={},a={c:s},h=(t+e)/2,l=(e+i)/2,c=(i+s)/2,u=(h+l)/2,d=(l+c)/2,p=(d-u)/8;return o.b=h+(t-h)/4,r.b=u+p,o.c=r.a=(o.b+r.b)/2,r.c=n.a=(u+d)/2,n.b=d-p,a.b=c+(s-c)/4,n.c=a.a=(n.b+a.b)/2,[o,r,n,a]},l=function(t,o,r,n,a){var l,c,u,d,p,f,m,g,v,y,_,x,b,w=t.length-1,S=0,T=t[0].a;for(l=0;w>l;l++)p=t[S],c=p.a,u=p.d,d=t[S+1].d,a?(_=e[l],x=i[l],b=.25*(x+_)*o/(n?.5:s[l]||.5),f=u-(u-c)*(n?.5*o:0!==_?b/_:0),m=u+(d-u)*(n?.5*o:0!==x?b/x:0),g=u-(f+((m-f)*(3*_/(_+x)+.5)/4||0))):(f=u-.5*(u-c)*o,m=u+.5*(d-u)*o,g=u-(f+m)/2),f+=g,m+=g,p.c=v=f,p.b=0!==l?T:T=p.a+.6*(p.c-p.a),p.da=u-c,p.ca=v-c,p.ba=T-c,r?(y=h(c,T,v,u),t.splice(S,1,y[0],y[1],y[2],y[3]),S+=4):S++,T=m;p=t[S],p.b=T,p.c=T+.4*(p.d-T),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=T-p.a,r&&(y=h(p.a,T,p.c,p.d),t.splice(S,1,y[0],y[1],y[2],y[3]))},c=function(t,s,o,r){var a,h,l,c,u,d,p=[];if(r)for(t=[r].concat(t),h=t.length;--h>-1;)"string"==typeof(d=t[h][s])&&"="===d.charAt(1)&&(t[h][s]=r[s]+Number(d.charAt(0)+d.substr(2)));if(a=t.length-2,0>a)return p[0]=new n(t[0][s],0,0,t[-1>a?0:1][s]),p;for(h=0;a>h;h++)l=t[h][s],c=t[h+1][s],p[h]=new n(l,0,0,c),o&&(u=t[h+2][s],e[h]=(e[h]||0)+(c-l)*(c-l),i[h]=(i[h]||0)+(u-c)*(u-c));return p[h]=new n(t[h][s],0,0,t[h+1][s]),p},u=function(t,r,n,h,u,d){var p,f,m,g,v,y,_,x,b={},w=[],S=d||t[0];u="string"==typeof u?","+u+",":a,null==r&&(r=1);for(f in t[0])w.push(f);if(t.length>1){for(x=t[t.length-1],_=!0,p=w.length;--p>-1;)if(f=w[p],Math.abs(S[f]-x[f])>.05){_=!1;break}_&&(t=t.concat(),d&&t.unshift(d),t.push(t[1]),d=t[t.length-3])}for(e.length=i.length=s.length=0,p=w.length;--p>-1;)f=w[p],o[f]=-1!==u.indexOf(","+f+","),b[f]=c(t,f,o[f],d);for(p=e.length;--p>-1;)e[p]=Math.sqrt(e[p]),i[p]=Math.sqrt(i[p]);if(!h){for(p=w.length;--p>-1;)if(o[f])for(m=b[w[p]],y=m.length-1,g=0;y>g;g++)v=m[g+1].da/i[g]+m[g].da/e[g],s[g]=(s[g]||0)+v*v;for(p=s.length;--p>-1;)s[p]=Math.sqrt(s[p])}for(p=w.length,g=n?4:1;--p>-1;)f=w[p],m=b[f],l(m,r,n,h,o[f]),_&&(m.splice(0,g),m.splice(m.length-g,g));return b},d=function(t,e,i){e=e||"soft";var s,o,r,a,h,l,c,u,d,p,f,m={},g="cubic"===e?3:2,v="soft"===e,y=[];if(v&&i&&(t=[i].concat(t)),null==t||g+1>t.length)throw"invalid Bezier data";for(d in t[0])y.push(d);for(l=y.length;--l>-1;){for(d=y[l],m[d]=h=[],p=0,u=t.length,c=0;u>c;c++)s=null==i?t[c][d]:"string"==typeof(f=t[c][d])&&"="===f.charAt(1)?i[d]+Number(f.charAt(0)+f.substr(2)):Number(f),v&&c>1&&u-1>c&&(h[p++]=(s+h[p-2])/2),h[p++]=s;for(u=p-g+1,p=0,c=0;u>c;c+=g)s=h[c],o=h[c+1],r=h[c+2],a=2===g?0:h[c+3],h[p++]=f=3===g?new n(s,o,r,a):new n(s,(2*o+s)/3,(2*o+r)/3,r);h.length=p}return m},p=function(t,e,i){for(var s,o,r,n,a,h,l,c,u,d,p,f=1/i,m=t.length;--m>-1;)for(d=t[m],r=d.a,n=d.d-r,a=d.c-r,h=d.b-r,s=o=0,c=1;i>=c;c++)l=f*c,u=1-l,s=o-(o=(l*l*n+3*u*(l*a+u*h))*l),p=m*i+c-1,e[p]=(e[p]||0)+s*s},f=function(t,e){e=e>>0||6;var i,s,o,r,n=[],a=[],h=0,l=0,c=e-1,u=[],d=[];for(i in t)p(t[i],n,e);for(o=n.length,s=0;o>s;s++)h+=Math.sqrt(n[s]),r=s%e,d[r]=h,r===c&&(l+=h,r=s/e>>0,u[r]=d,a[r]=l,h=0,d=[]);return{length:l,lengths:a,segments:u}},m=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var s,o,r,n,a,h=e.values||[],l={},c=h[0],p=e.autoRotate||i.vars.orientToBezier;this._autoRotate=p?p instanceof Array?p:[["x","y","rotation",p===!0?0:Number(p)||0]]:null;for(s in c)this._props.push(s);for(r=this._props.length;--r>-1;)s=this._props[r],this._overwriteProps.push(s),o=this._func[s]="function"==typeof t[s],l[s]=o?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(t[s]),a||l[s]!==h[0][s]&&(a=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?u(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):d(h,e.type,l),this._segCount=this._beziers[s].length,this._timeRes){var m=f(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(p=this._autoRotate)for(this._initialRotations=[],p[0]instanceof Array||(this._autoRotate=p=[p]),r=p.length;--r>-1;){for(n=0;3>n;n++)s=p[r][n],this._func[s]="function"==typeof t[s]?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]:!1;s=p[r][2],this._initialRotations[r]=this._func[s]?this._func[s].call(this._target):this._target[s]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,s,o,r,n,a,h,l,c,u,d=this._segCount,p=this._func,f=this._target,m=e!==this._startRatio;if(this._timeRes){if(c=this._lengths,u=this._curSeg,e*=this._length,o=this._li,e>this._l2&&d-1>o){for(l=d-1;l>o&&e>=(this._l2=c[++o]););this._l1=c[o-1],this._li=o,this._curSeg=u=this._segments[o],this._s2=u[this._s1=this._si=0]}else if(this._l1>e&&o>0){for(;o>0&&(this._l1=c[--o])>=e;);0===o&&this._l1>e?this._l1=0:o++,this._l2=c[o],this._li=o,this._curSeg=u=this._segments[o],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=o,e-=this._l1,o=this._si,e>this._s2&&u.length-1>o){for(l=u.length-1;l>o&&e>=(this._s2=u[++o]););this._s1=u[o-1],this._si=o}else if(this._s1>e&&o>0){for(;o>0&&(this._s1=u[--o])>=e;);0===o&&this._s1>e?this._s1=0:o++,this._s2=u[o],this._si=o}a=(o+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?d-1:d*e>>0,a=(e-i*(1/d))*d;for(s=1-a,o=this._props.length;--o>-1;)r=this._props[o],n=this._beziers[r][i],h=(a*a*n.da+3*s*(a*n.ca+s*n.ba))*a+n.a,this._round[r]&&(h=Math.round(h)),p[r]?f[r](h):f[r]=h;if(this._autoRotate){var g,v,y,_,x,b,w,S=this._autoRotate;for(o=S.length;--o>-1;)r=S[o][2],b=S[o][3]||0,w=S[o][4]===!0?1:t,n=this._beziers[S[o][0]],g=this._beziers[S[o][1]],n&&g&&(n=n[i],g=g[i],v=n.a+(n.b-n.a)*a,_=n.b+(n.c-n.b)*a,v+=(_-v)*a,_+=(n.c+(n.d-n.c)*a-_)*a,y=g.a+(g.b-g.a)*a,x=g.b+(g.c-g.b)*a,y+=(x-y)*a,x+=(g.c+(g.d-g.c)*a-x)*a,h=m?Math.atan2(x-y,_-v)*w+b:this._initialRotations[o],p[r]?f[r](h):f[r]=h)}}}),g=m.prototype;m.bezierThrough=u,m.cubicToQuadratic=h,m._autoCSS=!0,m.quadraticToCubic=function(t,e,i){return new n(t,(2*e+t)/3,(2*e+i)/3,i)},m._cssRegister=function(){var t=r.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,s=e._setPluginRatio,o=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,r,n,a,h){e instanceof Array&&(e={values:e}),h=new m;var l,c,u,d=e.values,p=d.length-1,f=[],g={};if(0>p)return a;for(l=0;p>=l;l++)u=i(t,d[l],n,a,h,p!==l),f[l]=u.end;for(c in e)g[c]=e[c];return g.values=f,a=new o(t,"bezier",0,0,u.pt,2),a.data=u,a.plugin=h,a.setRatio=s,0===g.autoRotate&&(g.autoRotate=!0),!g.autoRotate||g.autoRotate instanceof Array||(l=g.autoRotate===!0?0:Number(g.autoRotate),g.autoRotate=null!=u.end.left?[["left","top","rotation",l,!1]]:null!=u.end.x?[["x","y","rotation",l,!1]]:!1),g.autoRotate&&(n._transform||n._enableTransforms(!1),u.autoRotate=n._target._gsTransform),h._onInitTween(u.proxy,g,n._tween),a}})}},g._roundProps=function(t,e){for(var i=this._overwriteProps,s=i.length;--s>-1;)(t[i[s]]||t.bezier||t.bezierThrough)&&(this._round[i[s]]=e)},g._kill=function(t){var e,i,s=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=s.length;--i>-1;)s[i]===e&&s.splice(i,1);return this._super._kill.call(this,t)}}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t){var e=function(){return(_gsScope.GreenSockGlobals||_gsScope)[t]};"function"==typeof define&&define.amd?define("BEZIER",["TWEEN"],e):"undefined"!=typeof module&&module.exports&&(require("../TweenLite.js"),module.exports=e())}("BezierPlugin"),!function(){var t={},e=null,i=!0,s=!1;try{"undefined"!=typeof AudioContext?e=new AudioContext:"undefined"!=typeof webkitAudioContext?e=new webkitAudioContext:i=!1}catch(o){i=!1}if(!i)if("undefined"!=typeof Audio)try{new Audio}catch(o){s=!0}else s=!0;if(i){var r="undefined"==typeof e.createGain?e.createGainNode():e.createGain();r.gain.value=1,r.connect(e.destination)}var n=function(t){this._volume=1,this._muted=!1,this.usingWebAudio=i,this.ctx=e,this.noAudio=s,this._howls=[],this._codecs=t,this.iOSAutoEnable=!0};n.prototype={volume:function(t){var e=this;if(t=parseFloat(t),t>=0&&1>=t){e._volume=t,i&&(r.gain.value=t);for(var s in e._howls)if(e._howls.hasOwnProperty(s)&&e._howls[s]._webAudio===!1)for(var o=0;o<e._howls[s]._audioNode.length;o++)e._howls[s]._audioNode[o].volume=e._howls[s]._volume*e._volume;return e}return i?r.gain.value:e._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(t){var e=this;e._muted=t,i&&(r.gain.value=t?0:e._volume);for(var s in e._howls)if(e._howls.hasOwnProperty(s)&&e._howls[s]._webAudio===!1)for(var o=0;o<e._howls[s]._audioNode.length;o++)e._howls[s]._audioNode[o].muted=t},codecs:function(t){return this._codecs[t]},_enableiOSAudio:function(){var t=this;if(!e||!t._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){t._iOSEnabled=!1;var i=function(){var s=e.createBuffer(1,1,22050),o=e.createBufferSource();o.buffer=s,o.connect(e.destination),"undefined"==typeof o.start?o.noteOn(0):o.start(0),setTimeout(function(){(o.playbackState===o.PLAYING_STATE||o.playbackState===o.FINISHED_STATE)&&(t._iOSEnabled=!0,t.iOSAutoEnable=!1,window.removeEventListener("touchstart",i,!1))},0)};return window.addEventListener("touchstart",i,!1),t}}};var a=null,h={};s||(a=new Audio,h={mp3:!!a.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var l=new n(h),c=function(t){var s=this;s._autoplay=t.autoplay||!1,s._buffer=t.buffer||!1,s._duration=t.duration||0,s._format=t.format||null,s._loop=t.loop||!1,s._loaded=!1,s._sprite=t.sprite||{},s._src=t.src||"",s._pos3d=t.pos3d||[0,0,-.5],s._volume=void 0!==t.volume?t.volume:1,s._urls=t.urls||[],s._rate=t.rate||1,s._model=t.model||null,s._onload=[t.onload||function(){}],s._onloaderror=[t.onloaderror||function(){}],s._onend=[t.onend||function(){}],s._onpause=[t.onpause||function(){}],s._onplay=[t.onplay||function(){}],s._onendTimer=[],s._webAudio=i&&!s._buffer,s._audioNode=[],s._webAudio&&s._setupAudioNode(),"undefined"!=typeof e&&e&&l.iOSAutoEnable&&l._enableiOSAudio(),l._howls.push(s),s.load()};if(c.prototype={load:function(){var t=this,e=null;if(s)return void t.on("loaderror");for(var i=0;i<t._urls.length;i++){var o,r;if(t._format)o=t._format;else{if(r=t._urls[i],o=/^data:audio\/([^;,]+);/i.exec(r),o||(o=/\.([^.]+)$/.exec(r.split("?",1)[0])),!o)return void t.on("loaderror");o=o[1].toLowerCase()}if(h[o]){e=t._urls[i];break}}if(!e)return void t.on("loaderror");if(t._src=e,t._webAudio)u(t,e);else{var a=new Audio;a.addEventListener("error",function(){a.error&&4===a.error.code&&(n.noAudio=!0),t.on("loaderror",{type:a.error?a.error.code:0})},!1),t._audioNode.push(a),a.src=e,a._pos=0,a.preload="auto",a.volume=l._muted?0:t._volume*l.volume();var c=function(){t._duration=Math.ceil(10*a.duration)/10,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play(),a.removeEventListener("canplaythrough",c,!1)};a.addEventListener("canplaythrough",c,!1),a.load()}return t},urls:function(t){var e=this;return t?(e.stop(),e._urls="string"==typeof t?[t]:t,e._loaded=!1,e.load(),e):e._urls},play:function(t,i){var s=this;return"function"==typeof t&&(i=t),t&&"function"!=typeof t||(t="_default"),s._loaded?s._sprite[t]?(s._inactiveNode(function(o){o._sprite=t;var r=o._pos>0?o._pos:s._sprite[t][0]/1e3,n=0;s._webAudio?(n=s._sprite[t][1]/1e3-o._pos,o._pos>0&&(r=s._sprite[t][0]/1e3+r)):n=s._sprite[t][1]/1e3-(r-s._sprite[t][0]/1e3);var a,h=!(!s._loop&&!s._sprite[t][2]),c="string"==typeof i?i:Math.round(Date.now()*Math.random())+"";if(function(){var e={id:c,sprite:t,loop:h};a=setTimeout(function(){!s._webAudio&&h&&s.stop(e.id).play(t,e.id),s._webAudio&&!h&&(s._nodeById(e.id).paused=!0,s._nodeById(e.id)._pos=0,s._clearEndTimer(e.id)),s._webAudio||h||s.stop(e.id),s.on("end",c)},1e3*n),s._onendTimer.push({timer:a,id:e.id})}(),s._webAudio){var u=s._sprite[t][0]/1e3,d=s._sprite[t][1]/1e3;o.id=c,o.paused=!1,f(s,[h,u,d],c),s._playStart=e.currentTime,o.gain.value=s._volume,"undefined"==typeof o.bufferSource.start?h?o.bufferSource.noteGrainOn(0,r,86400):o.bufferSource.noteGrainOn(0,r,n):h?o.bufferSource.start(0,r,86400):o.bufferSource.start(0,r,n)}else{if(4!==o.readyState&&(o.readyState||!navigator.isCocoonJS))return s._clearEndTimer(c),function(){var e=s,r=t,n=i,a=o,h=function(){e.play(r,n),a.removeEventListener("canplaythrough",h,!1)};a.addEventListener("canplaythrough",h,!1)}(),s;o.readyState=4,o.id=c,o.currentTime=r,o.muted=l._muted||o.muted,o.volume=s._volume*l.volume(),setTimeout(function(){o.play()},0)}return s.on("play"),"function"==typeof i&&i(c),s}),s):("function"==typeof i&&i(),s):(s.on("load",function(){s.play(t,i)}),s)},pause:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.pause(t)}),e;e._clearEndTimer(t);var i=t?e._nodeById(t):e._activeNode();if(i)if(i._pos=e.pos(null,t),e._webAudio){if(!i.bufferSource||i.paused)return e;i.paused=!0,"undefined"==typeof i.bufferSource.stop?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else i.pause();return e.on("pause"),e},stop:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.stop(t)}),e;e._clearEndTimer(t);var i=t?e._nodeById(t):e._activeNode();if(i)if(i._pos=0,e._webAudio){if(!i.bufferSource||i.paused)return e;i.paused=!0,"undefined"==typeof i.bufferSource.stop?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else isNaN(i.duration)||(i.pause(),i.currentTime=0);return e},mute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.mute(t)}),e;var i=t?e._nodeById(t):e._activeNode();return i&&(e._webAudio?i.gain.value=0:i.muted=!0),e},unmute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.unmute(t)}),e;var i=t?e._nodeById(t):e._activeNode();return i&&(e._webAudio?i.gain.value=e._volume:i.muted=!1),e},volume:function(t,e){var i=this;if(t=parseFloat(t),t>=0&&1>=t){if(i._volume=t,!i._loaded)return i.on("play",function(){i.volume(t,e)}),i;var s=e?i._nodeById(e):i._activeNode();return s&&(i._webAudio?s.gain.value=t:s.volume=t*l.volume()),i}return i._volume},loop:function(t){var e=this;return"boolean"==typeof t?(e._loop=t,e):e._loop},sprite:function(t){var e=this;return"object"==typeof t?(e._sprite=t,e):e._sprite},pos:function(t,i){var s=this;if(!s._loaded)return s.on("load",function(){s.pos(t)}),"number"==typeof t?s:s._pos||0;t=parseFloat(t);var o=i?s._nodeById(i):s._activeNode();if(o)return t>=0?(s.pause(i),o._pos=t,s.play(o._sprite,i),s):s._webAudio?o._pos+(e.currentTime-s._playStart):o.currentTime;if(t>=0)return s;for(var r=0;r<s._audioNode.length;r++)if(s._audioNode[r].paused&&4===s._audioNode[r].readyState)return s._webAudio?s._audioNode[r]._pos:s._audioNode[r].currentTime},pos3d:function(t,e,i,s){var o=this;if(e="undefined"!=typeof e&&e?e:0,i="undefined"!=typeof i&&i?i:-.5,!o._loaded)return o.on("play",function(){o.pos3d(t,e,i,s)}),o;if(!(t>=0||0>t))return o._pos3d;if(o._webAudio){var r=s?o._nodeById(s):o._activeNode();r&&(o._pos3d=[t,e,i],r.panner.setPosition(t,e,i),r.panner.panningModel=o._model||"HRTF")}return o},fade:function(t,e,i,s,o){var r=this,n=Math.abs(t-e),a=t>e?"down":"up",h=n/.01,l=i/h;if(!r._loaded)return r.on("load",function(){r.fade(t,e,i,s,o)}),r;r.volume(t,o);for(var c=1;h>=c;c++)!function(){var t=r._volume+("up"===a?.01:-.01)*c,i=Math.round(1e3*t)/1e3,n=e;setTimeout(function(){r.volume(i,o),i===n&&s&&s()},l*c)}()},fadeIn:function(t,e,i){return this.volume(0).play().fade(0,t,e,i)},fadeOut:function(t,e,i,s){var o=this;return o.fade(o._volume,t,e,function(){i&&i(),o.pause(s),o.on("end")},s)},_nodeById:function(t){for(var e=this,i=e._audioNode[0],s=0;s<e._audioNode.length;s++)if(e._audioNode[s].id===t){i=e._audioNode[s];break}return i},_activeNode:function(){for(var t=this,e=null,i=0;i<t._audioNode.length;i++)if(!t._audioNode[i].paused){e=t._audioNode[i];break}return t._drainPool(),e},_inactiveNode:function(t){for(var e=this,i=null,s=0;s<e._audioNode.length;s++)if(e._audioNode[s].paused&&4===e._audioNode[s].readyState){t(e._audioNode[s]),i=!0;break}if(e._drainPool(),!i){var o;if(e._webAudio)o=e._setupAudioNode(),t(o);else{e.load(),o=e._audioNode[e._audioNode.length-1];var r=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",n=function(){o.removeEventListener(r,n,!1),t(o)};o.addEventListener(r,n,!1);
}}},_drainPool:function(){var t,e=this,i=0;for(t=0;t<e._audioNode.length;t++)e._audioNode[t].paused&&i++;for(t=e._audioNode.length-1;t>=0&&!(5>=i);t--)e._audioNode[t].paused&&(e._webAudio&&e._audioNode[t].disconnect(0),i--,e._audioNode.splice(t,1))},_clearEndTimer:function(t){for(var e=this,i=0,s=0;s<e._onendTimer.length;s++)if(e._onendTimer[s].id===t){i=s;break}var o=e._onendTimer[i];o&&(clearTimeout(o.timer),e._onendTimer.splice(i,1))},_setupAudioNode:function(){var t=this,i=t._audioNode,s=t._audioNode.length;return i[s]="undefined"==typeof e.createGain?e.createGainNode():e.createGain(),i[s].gain.value=t._volume,i[s].paused=!0,i[s]._pos=0,i[s].readyState=4,i[s].connect(r),i[s].panner=e.createPanner(),i[s].panner.panningModel=t._model||"equalpower",i[s].panner.setPosition(t._pos3d[0],t._pos3d[1],t._pos3d[2]),i[s].panner.connect(i[s]),i[s]},on:function(t,e){var i=this,s=i["_on"+t];if("function"==typeof e)s.push(e);else for(var o=0;o<s.length;o++)e?s[o].call(i,e):s[o].call(i);return i},off:function(t,e){var i=this,s=i["_on"+t],o=e?e.toString():null;if(o){for(var r=0;r<s.length;r++)if(o===s[r].toString()){s.splice(r,1);break}}else i["_on"+t]=[];return i},unload:function(){for(var e=this,i=e._audioNode,s=0;s<e._audioNode.length;s++)i[s].paused||(e.stop(i[s].id),e.on("end",i[s].id)),e._webAudio?i[s].disconnect(0):i[s].src="";for(s=0;s<e._onendTimer.length;s++)clearTimeout(e._onendTimer[s].timer);var o=l._howls.indexOf(e);null!==o&&o>=0&&l._howls.splice(o,1),delete t[e._src],e=null}},i)var u=function(e,i){if(i in t)return e._duration=t[i].duration,void p(e);if(/^data:[^;]+;base64,/.test(i)){for(var s=atob(i.split(",")[1]),o=new Uint8Array(s.length),r=0;r<s.length;++r)o[r]=s.charCodeAt(r);d(o.buffer,e,i)}else{var n=new XMLHttpRequest;n.open("GET",i,!0),n.responseType="arraybuffer",n.onload=function(){d(n.response,e,i)},n.onerror=function(){e._webAudio&&(e._buffer=!0,e._webAudio=!1,e._audioNode=[],delete e._gainNode,delete t[i],e.load())};try{n.send()}catch(a){n.onerror()}}},d=function(i,s,o){e.decodeAudioData(i,function(e){e&&(t[o]=e,p(s,e))},function(t){s.on("loaderror")})},p=function(t,e){t._duration=e?e.duration:t._duration,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play()},f=function(i,s,o){var r=i._nodeById(o);r.bufferSource=e.createBufferSource(),r.bufferSource.buffer=t[i._src],r.bufferSource.connect(r.panner),r.bufferSource.loop=s[0],s[0]&&(r.bufferSource.loopStart=s[1],r.bufferSource.loopEnd=s[1]+s[2]),r.bufferSource.playbackRate.value=i._rate};"function"==typeof define&&define.amd&&define("HOWLER",[],function(){return{Howler:l,Howl:c}}),"undefined"!=typeof exports&&(exports.Howler=l,exports.Howl=c),"undefined"!=typeof window&&(window.Howler=l,window.Howl=c)}(),function(t,e){function i(i,s){function o(t){return pt.preferFlash&&nt&&!pt.ignoreFlash&&pt.flash[t]!==e&&pt.flash[t]}function r(t){return function(e){var i,s=this._s;return i=s&&s._a?t.call(this,e):null}}this.setupOptions={url:i||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=s||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20140901",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var n,a,h,l,c,u,d,p,f,m,g,v,y,_,x,b,w,S,T,C,P,A,M,E,I,k,L,R,O,B,D,F,j,N,U,z,G,H,X,q,W,Y,V,Z,J,K,Q,$,tt,et,it,st,ot,rt,nt,at,ht,lt,ct,ut,dt,pt=this,ft=null,mt=null,gt=navigator.userAgent,vt=t.location.href.toString(),yt=document,_t=[],xt=!1,bt=!1,wt=!1,St=!1,Tt=!1,Ct=8,Pt=null,At=null,Mt=!1,Et=!1,It=0,kt=null,Lt=[],Rt=null,Ot=Array.prototype.slice,Bt=!1,Dt=0,Ft=gt.match(/(ipad|iphone|ipod)/i),jt=gt.match(/android/i),Nt=gt.match(/msie/i),Ut=gt.match(/webkit/i),zt=gt.match(/safari/i)&&!gt.match(/chrome/i),Gt=gt.match(/opera/i),Ht=gt.match(/(mobile|pre\/|xoom)/i)||Ft||jt,Xt=!vt.match(/usehtml5audio/i)&&!vt.match(/sm2\-ignorebadua/i)&&zt&&!gt.match(/silk/i)&&gt.match(/OS X 10_6_([3-7])/i),qt=(t.console!==e&&console.log!==e,yt.hasFocus!==e?yt.hasFocus():null),Wt=zt&&(yt.hasFocus===e||!yt.hasFocus()),Yt=!Wt,Vt=/(mp3|mp4|mpa|m4a|m4b)/i,Zt=1e3,Jt="about:blank",Kt="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",Qt=yt.location?yt.location.protocol.match(/http/i):null,$t=Qt?"":"http://",te=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,ee=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],ie=new RegExp("\\.("+ee.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Qt,z={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==e&&(Gt&&opera!==e&&opera.version()<10?new Audio(null):new Audio).canPlayType!==e}catch(t){return!1}}(),this.setup=function(t){var i=!pt.url;return t!==e&&wt&&Rt&&pt.ok()&&(t.flashVersion!==e||t.url!==e||t.html5Test!==e),f(t),t&&(i&&E&&t.url!==e&&pt.beginDelayedInit(),E||t.url===e||"complete"!==yt.readyState||setTimeout(A,1)),pt},this.ok=function(){return Rt?wt&&!St:pt.useHTML5Audio&&pt.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return a(e)||yt[e]||t[e]},this.createSound=function(t,i){function s(){return r=G(r),pt.sounds[r.id]=new n(r),pt.soundIDs.push(r.id),pt.sounds[r.id]}var o,r,a=null;if(!wt||!pt.ok())return!1;if(i!==e&&(t={id:t,url:i}),r=p(t),r.url=Z(r.url),void 0===r.id&&(r.id=pt.setupOptions.idPrefix+Dt++),q(r.id,!0))return pt.sounds[r.id];if(Q(r))a=s(),a._setup_html5(r);else{if(pt.html5Only)return s();if(pt.html5.usingFlash&&r.url&&r.url.match(/data\:/i))return s();u>8&&null===r.isMovieStar&&(r.isMovieStar=!!(r.serverURL||(r.type?r.type.match(te):!1)||r.url&&r.url.match(ie))),r=H(r,o),a=s(),8===u?mt._createSound(r.id,r.loops||1,r.usePolicyFile):(mt._createSound(r.id,r.url,r.usePeakData,r.useWaveformData,r.useEQData,r.isMovieStar,r.isMovieStar?r.bufferTime:!1,r.loops||1,r.serverURL,r.duration||null,r.autoPlay,!0,r.autoLoad,r.usePolicyFile),r.serverURL||(a.connected=!0,r.onconnect&&r.onconnect.apply(a))),r.serverURL||!r.autoLoad&&!r.autoPlay||a.load(r)}return!r.serverURL&&r.autoPlay&&a.play(),a},this.destroySound=function(t,e){if(!q(t))return!1;var i,s=pt.sounds[t];for(s._iO={},s.stop(),s.unload(),i=0;i<pt.soundIDs.length;i++)if(pt.soundIDs[i]===t){pt.soundIDs.splice(i,1);break}return e||s.destruct(!0),s=null,delete pt.sounds[t],!0},this.load=function(t,e){return q(t)?pt.sounds[t].load(e):!1},this.unload=function(t){return q(t)?pt.sounds[t].unload():!1},this.onPosition=function(t,e,i,s){return q(t)?pt.sounds[t].onposition(e,i,s):!1},this.onposition=this.onPosition,this.clearOnPosition=function(t,e,i){return q(t)?pt.sounds[t].clearOnPosition(e,i):!1},this.play=function(t,e){var i=null,s=e&&!(e instanceof Object);if(!wt||!pt.ok())return!1;if(q(t,s))s&&(e={url:e});else{if(!s)return!1;s&&(e={url:e}),e&&e.url&&(e.id=t,i=pt.createSound(e).play())}return null===i&&(i=pt.sounds[t].play(e)),i},this.start=this.play,this.setPosition=function(t,e){return q(t)?pt.sounds[t].setPosition(e):!1},this.stop=function(t){return q(t)?pt.sounds[t].stop():!1},this.stopAll=function(){var t;for(t in pt.sounds)pt.sounds.hasOwnProperty(t)&&pt.sounds[t].stop()},this.pause=function(t){return q(t)?pt.sounds[t].pause():!1},this.pauseAll=function(){var t;for(t=pt.soundIDs.length-1;t>=0;t--)pt.sounds[pt.soundIDs[t]].pause()},this.resume=function(t){return q(t)?pt.sounds[t].resume():!1},this.resumeAll=function(){var t;for(t=pt.soundIDs.length-1;t>=0;t--)pt.sounds[pt.soundIDs[t]].resume()},this.togglePause=function(t){return q(t)?pt.sounds[t].togglePause():!1},this.setPan=function(t,e){return q(t)?pt.sounds[t].setPan(e):!1},this.setVolume=function(t,e){return q(t)?pt.sounds[t].setVolume(e):!1},this.mute=function(t){var e=0;if(t instanceof String&&(t=null),t)return q(t)?pt.sounds[t].mute():!1;for(e=pt.soundIDs.length-1;e>=0;e--)pt.sounds[pt.soundIDs[e]].mute();return pt.muted=!0,!0},this.muteAll=function(){pt.mute()},this.unmute=function(t){var e;if(t instanceof String&&(t=null),t)return q(t)?pt.sounds[t].unmute():!1;for(e=pt.soundIDs.length-1;e>=0;e--)pt.sounds[pt.soundIDs[e]].unmute();return pt.muted=!1,!0},this.unmuteAll=function(){pt.unmute()},this.toggleMute=function(t){return q(t)?pt.sounds[t].toggleMute():!1},this.getMemoryUse=function(){var t=0;return mt&&8!==u&&(t=parseInt(mt._getMemoryUse(),10)),t},this.disable=function(i){var s;if(i===e&&(i=!1),St)return!1;for(St=!0,s=pt.soundIDs.length-1;s>=0;s--)B(pt.sounds[pt.soundIDs[s]]);return d(i),ot.remove(t,"load",y),!0},this.canPlayMIME=function(t){var e;return pt.hasHTML5&&(e=$({type:t})),!e&&Rt&&(e=t&&pt.ok()?!!((u>8?t.match(te):null)||t.match(pt.mimePattern)):null),e},this.canPlayURL=function(t){var e;return pt.hasHTML5&&(e=$({url:t})),!e&&Rt&&(e=t&&pt.ok()?!!t.match(pt.filePattern):null),e},this.canPlayLink=function(t){return t.type!==e&&t.type&&pt.canPlayMIME(t.type)?!0:pt.canPlayURL(t.href)},this.getSoundById=function(t,e){if(!t)return null;var i=pt.sounds[t];return i},this.onready=function(e,i){var s="onready",o=!1;if("function"!=typeof e)throw j("needFunction",s);return i||(i=t),g(s,e,i),v(),o=!0,o},this.ontimeout=function(e,i){var s="ontimeout",o=!1;if("function"!=typeof e)throw j("needFunction",s);return i||(i=t),g(s,e,i),v({type:s}),o=!0,o},this._writeDebug=function(t,e){return!0},this._wD=this._writeDebug,this._debug=function(){},this.reboot=function(e,i){var s,o,r;for(s=pt.soundIDs.length-1;s>=0;s--)pt.sounds[pt.soundIDs[s]].destruct();if(mt)try{Nt&&(At=mt.innerHTML),Pt=mt.parentNode.removeChild(mt)}catch(n){}if(At=Pt=Rt=mt=null,pt.enabled=E=wt=Mt=Et=xt=bt=St=Bt=pt.swfLoaded=!1,pt.soundIDs=[],pt.sounds={},Dt=0,e)_t=[];else for(s in _t)if(_t.hasOwnProperty(s))for(o=0,r=_t[s].length;r>o;o++)_t[s][o].fired=!1;return pt.html5={usingFlash:null},pt.flash={},pt.html5Only=!1,pt.ignoreFlash=!1,t.setTimeout(function(){P(),i||pt.beginDelayedInit()},20),pt},this.reset=function(){return pt.reboot(!0,!0)},this.getMoviePercent=function(){return mt&&"PercentLoaded"in mt?mt.PercentLoaded():null},this.beginDelayedInit=function(){Tt=!0,A(),setTimeout(function(){return Et?!1:(k(),C(),Et=!0,!0)},20),_()},this.destruct=function(){pt.disable(!0)},n=function(t){var i,s,o,r,n,a,h,l,c,d,f=this,m=!1,g=[],v=0,y=null;c={duration:null,time:null},this.id=t.id,this.sID=this.id,this.url=t.url,this.options=p(t),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,d=this.url?!1:!0,this.id3={},this._debug=function(){},this.load=function(t){var i,s=null;if(t!==e?f._iO=p(t,f.options):(t=f.options,f._iO=t,y&&y!==f.url&&(f._iO.url=f.url,f.url=null)),f._iO.url||(f._iO.url=f.url),f._iO.url=Z(f._iO.url),f.instanceOptions=f._iO,i=f._iO,!i.url&&!f.url)return f;if(i.url===f.url&&0!==f.readyState&&2!==f.readyState)return 3===f.readyState&&i.onload&&dt(f,function(){i.onload.apply(f,[!!f.duration])}),f;if(f.loaded=!1,f.readyState=1,f.playState=0,f.id3={},Q(i))s=f._setup_html5(i),s._called_load||(f._html5_canplay=!1,f.url!==i.url&&(f._a.src=i.url,f.setPosition(0)),f._a.autobuffer="auto",f._a.preload="auto",f._a._called_load=!0);else{if(pt.html5Only)return f;if(f._iO.url&&f._iO.url.match(/data\:/i))return f;try{f.isHTML5=!1,f._iO=H(G(i)),f._iO.autoPlay&&(f._iO.position||f._iO.from)&&(f._iO.autoPlay=!1),i=f._iO,8===u?mt._load(f.id,i.url,i.stream,i.autoPlay,i.usePolicyFile):mt._load(f.id,i.url,!!i.stream,!!i.autoPlay,i.loops||1,!!i.autoLoad,i.usePolicyFile)}catch(o){L({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return f.url=i.url,f},this.unload=function(){return 0!==f.readyState&&(f.isHTML5?(r(),f._a&&(f._a.pause(),y=et(f._a))):8===u?mt._unload(f.id,Jt):mt._unload(f.id),i()),f},this.destruct=function(t){f.isHTML5?(r(),f._a&&(f._a.pause(),et(f._a),Bt||o(),f._a._s=null,f._a=null)):(f._iO.onfailure=null,mt._destroySound(f.id)),t||pt.destroySound(f.id,!0)},this.play=function(t,i){var s,o,r,h,c,g,v=!0,y=null;if(i=i===e?!0:i,t||(t={}),f.url&&(f._iO.url=f.url),f._iO=p(f._iO,f.options),f._iO=p(t,f._iO),f._iO.url=Z(f._iO.url),f.instanceOptions=f._iO,!f.isHTML5&&f._iO.serverURL&&!f.connected)return f.getAutoPlay()||f.setAutoPlay(!0),f;if(Q(f._iO)&&(f._setup_html5(f._iO),n()),1!==f.playState||f.paused||(s=f._iO.multiShot,s||(f.isHTML5&&f.setPosition(f._iO.position),y=f)),null!==y)return y;if(t.url&&t.url!==f.url&&(f.readyState||f.isHTML5||8!==u||!d?f.load(f._iO):d=!1),f.loaded||(0===f.readyState?(f.isHTML5||pt.html5Only?f.isHTML5?f.load(f._iO):y=f:(f._iO.autoPlay=!0,f.load(f._iO)),f.instanceOptions=f._iO):2===f.readyState&&(y=f)),null!==y)return y;if(!f.isHTML5&&9===u&&f.position>0&&f.position===f.duration&&(t.position=0),f.paused&&f.position>=0&&(!f._iO.serverURL||f.position>0))f.resume();else{if(f._iO=p(t,f._iO),(!f.isHTML5&&null!==f._iO.position&&f._iO.position>0||null!==f._iO.from&&f._iO.from>0||null!==f._iO.to)&&0===f.instanceCount&&0===f.playState&&!f._iO.serverURL){if(r=function(){f._iO=p(t,f._iO),f.play(f._iO)},f.isHTML5&&!f._html5_canplay?(f.load({_oncanplay:r}),y=!1):f.isHTML5||f.loaded||f.readyState&&2===f.readyState||(f.load({onload:r}),y=!1),null!==y)return y;f._iO=l()}(!f.instanceCount||f._iO.multiShotEvents||f.isHTML5&&f._iO.multiShot&&!Bt||!f.isHTML5&&u>8&&!f.getAutoPlay())&&f.instanceCount++,f._iO.onposition&&0===f.playState&&a(f),f.playState=1,f.paused=!1,f.position=f._iO.position===e||isNaN(f._iO.position)?0:f._iO.position,f.isHTML5||(f._iO=H(G(f._iO))),f._iO.onplay&&i&&(f._iO.onplay.apply(f),m=!0),f.setVolume(f._iO.volume,!0),f.setPan(f._iO.pan,!0),f.isHTML5?f.instanceCount<2?(n(),o=f._setup_html5(),f.setPosition(f._iO.position),o.play()):(h=new Audio(f._iO.url),c=function(){ot.remove(h,"ended",c),f._onfinish(f),et(h),h=null},g=function(){ot.remove(h,"canplay",g);try{h.currentTime=f._iO.position/Zt}catch(t){}h.play()},ot.add(h,"ended",c),void 0!==f._iO.volume&&(h.volume=Math.max(0,Math.min(1,f._iO.volume/100))),f.muted&&(h.muted=!0),f._iO.position?ot.add(h,"canplay",g):h.play()):(v=mt._start(f.id,f._iO.loops||1,9===u?f.position:f.position/Zt,f._iO.multiShot||!1),9!==u||v||f._iO.onplayerror&&f._iO.onplayerror.apply(f))}return f},this.start=this.play,this.stop=function(t){var e,i=f._iO;return 1===f.playState&&(f._onbufferchange(0),f._resetOnPosition(0),f.paused=!1,f.isHTML5||(f.playState=0),h(),i.to&&f.clearOnPosition(i.to),f.isHTML5?f._a&&(e=f.position,f.setPosition(0),f.position=e,f._a.pause(),f.playState=0,f._onTimer(),r()):(mt._stop(f.id,t),i.serverURL&&f.unload()),f.instanceCount=0,f._iO={},i.onstop&&i.onstop.apply(f)),f},this.setAutoPlay=function(t){f._iO.autoPlay=t,f.isHTML5||(mt._setAutoPlay(f.id,t),t&&(f.instanceCount||1!==f.readyState||f.instanceCount++))},this.getAutoPlay=function(){return f._iO.autoPlay},this.setPosition=function(t){t===e&&(t=0);var i,s,o=f.isHTML5?Math.max(t,0):Math.min(f.duration||f._iO.duration,Math.max(t,0));if(f.position=o,s=f.position/Zt,f._resetOnPosition(f.position),f._iO.position=o,f.isHTML5){if(f._a){if(f._html5_canplay){if(f._a.currentTime!==s)try{f._a.currentTime=s,(0===f.playState||f.paused)&&f._a.pause()}catch(r){}}else if(s)return f;f.paused&&f._onTimer(!0)}}else i=9===u?f.position:s,f.readyState&&2!==f.readyState&&mt._setPosition(f.id,i,f.paused||!f.playState,f._iO.multiShot);return f},this.pause=function(t){return f.paused||0===f.playState&&1!==f.readyState?f:(f.paused=!0,f.isHTML5?(f._setup_html5().pause(),r()):(t||t===e)&&mt._pause(f.id,f._iO.multiShot),f._iO.onpause&&f._iO.onpause.apply(f),f)},this.resume=function(){var t=f._iO;return f.paused?(f.paused=!1,f.playState=1,f.isHTML5?(f._setup_html5().play(),n()):(t.isMovieStar&&!t.serverURL&&f.setPosition(f.position),mt._pause(f.id,t.multiShot)),!m&&t.onplay?(t.onplay.apply(f),m=!0):t.onresume&&t.onresume.apply(f),f):f},this.togglePause=function(){return 0===f.playState?(f.play({position:9!==u||f.isHTML5?f.position/Zt:f.position}),f):(f.paused?f.resume():f.pause(),f)},this.setPan=function(t,i){return t===e&&(t=0),i===e&&(i=!1),f.isHTML5||mt._setPan(f.id,t),f._iO.pan=t,i||(f.pan=t,f.options.pan=t),f},this.setVolume=function(t,i){return t===e&&(t=100),i===e&&(i=!1),f.isHTML5?f._a&&(pt.muted&&!f.muted&&(f.muted=!0,f._a.muted=!0),f._a.volume=Math.max(0,Math.min(1,t/100))):mt._setVolume(f.id,pt.muted&&!f.muted||f.muted?0:t),f._iO.volume=t,i||(f.volume=t,f.options.volume=t),f},this.mute=function(){return f.muted=!0,f.isHTML5?f._a&&(f._a.muted=!0):mt._setVolume(f.id,0),f},this.unmute=function(){f.muted=!1;var t=f._iO.volume!==e;return f.isHTML5?f._a&&(f._a.muted=!1):mt._setVolume(f.id,t?f._iO.volume:f.options.volume),f},this.toggleMute=function(){return f.muted?f.unmute():f.mute()},this.onPosition=function(t,i,s){return g.push({position:parseInt(t,10),method:i,scope:s!==e?s:f,fired:!1}),f},this.onposition=this.onPosition,this.clearOnPosition=function(t,e){var i;if(t=parseInt(t,10),isNaN(t))return!1;for(i=0;i<g.length;i++)t===g[i].position&&(e&&e!==g[i].method||(g[i].fired&&v--,g.splice(i,1)))},this._processOnPosition=function(){var t,e,i=g.length;if(!i||!f.playState||v>=i)return!1;for(t=i-1;t>=0;t--)e=g[t],!e.fired&&f.position>=e.position&&(e.fired=!0,v++,e.method.apply(e.scope,[e.position]),i=g.length);return!0},this._resetOnPosition=function(t){var e,i,s=g.length;if(!s)return!1;for(e=s-1;e>=0;e--)i=g[e],i.fired&&t<=i.position&&(i.fired=!1,v--);return!0},l=function(){var t,e,i=f._iO,s=i.from,o=i.to;return e=function(){f.clearOnPosition(o,e),f.stop()},t=function(){null===o||isNaN(o)||f.onPosition(o,e)},null===s||isNaN(s)||(i.position=s,i.multiShot=!1,t()),i},a=function(){var t,e=f._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&f.onPosition(parseInt(t,10),e[t])},h=function(){var t,e=f._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&f.clearOnPosition(parseInt(t,10))},n=function(){f.isHTML5&&W(f)},r=function(){f.isHTML5&&Y(f)},i=function(t){t||(g=[],v=0),m=!1,f._hasTimer=null,f._a=null,f._html5_canplay=!1,f.bytesLoaded=null,f.bytesTotal=null,f.duration=f._iO&&f._iO.duration?f._iO.duration:null,f.durationEstimate=null,f.buffered=[],f.eqData=[],f.eqData.left=[],f.eqData.right=[],f.failures=0,f.isBuffering=!1,f.instanceOptions={},f.instanceCount=0,f.loaded=!1,f.metadata={},f.readyState=0,f.muted=!1,f.paused=!1,f.peakData={left:0,right:0},f.waveformData={left:[],right:[]},f.playState=0,f.position=null,f.id3={}},i(),this._onTimer=function(t){var e,i,s=!1,o={};return f._hasTimer||t?(f._a&&(t||(f.playState>0||1===f.readyState)&&!f.paused)&&(e=f._get_html5_duration(),e!==c.duration&&(c.duration=e,f.duration=e,s=!0),f.durationEstimate=f.duration,i=f._a.currentTime*Zt||0,i!==c.time&&(c.time=i,s=!0),(s||t)&&f._whileplaying(i,o,o,o,o)),s):void 0},this._get_html5_duration=function(){var t=f._iO,e=f._a&&f._a.duration?f._a.duration*Zt:t&&t.duration?t.duration:null,i=e&&!isNaN(e)&&e!==1/0?e:null;return i},this._apply_loop=function(t,e){t.loop=e>1?"loop":""},this._setup_html5=function(t){var e,o=p(f._iO,t),r=Bt?ft:f._a,n=decodeURI(o.url);if(Bt?n===decodeURI(rt)&&(e=!0):n===decodeURI(y)&&(e=!0),r){if(r._s)if(Bt)r._s&&r._s.playState&&!e&&r._s.stop();else if(!Bt&&n===decodeURI(y))return f._apply_loop(r,o.loops),r;e||(y&&i(!1),r.src=o.url,f.url=o.url,y=o.url,rt=o.url,r._called_load=!1)}else o.autoLoad||o.autoPlay?(f._a=new Audio(o.url),f._a.load()):f._a=Gt&&opera.version()<10?new Audio(null):new Audio,r=f._a,r._called_load=!1,Bt&&(ft=r);return f.isHTML5=!0,f._a=r,r._s=f,s(),f._apply_loop(r,o.loops),o.autoLoad||o.autoPlay?f.load():(r.autobuffer=!1,r.preload="auto"),r},s=function(){function t(t,e,i){return f._a?f._a.addEventListener(t,e,i||!1):null}if(f._a._added_events)return!1;var e;f._a._added_events=!0;for(e in lt)lt.hasOwnProperty(e)&&t(e,lt[e]);return!0},o=function(){function t(t,e,i){return f._a?f._a.removeEventListener(t,e,i||!1):null}var e;f._a._added_events=!1;for(e in lt)lt.hasOwnProperty(e)&&t(e,lt[e])},this._onload=function(t){var e=!!t||!f.isHTML5&&8===u&&f.duration;return f.loaded=e,f.readyState=e?3:2,f._onbufferchange(0),f._iO.onload&&dt(f,function(){f._iO.onload.apply(f,[e])}),!0},this._onbufferchange=function(t){return 0===f.playState?!1:t&&f.isBuffering||!t&&!f.isBuffering?!1:(f.isBuffering=1===t,f._iO.onbufferchange&&f._iO.onbufferchange.apply(f,[t]),!0)},this._onsuspend=function(){return f._iO.onsuspend&&f._iO.onsuspend.apply(f),!0},this._onfailure=function(t,e,i){f.failures++,f._iO.onfailure&&1===f.failures&&f._iO.onfailure(t,e,i)},this._onwarning=function(t,e,i){f._iO.onwarning&&f._iO.onwarning(t,e,i)},this._onfinish=function(){var t=f._iO.onfinish;f._onbufferchange(0),f._resetOnPosition(0),f.instanceCount&&(f.instanceCount--,f.instanceCount||(h(),f.playState=0,f.paused=!1,f.instanceCount=0,f.instanceOptions={},f._iO={},r(),f.isHTML5&&(f.position=0)),(!f.instanceCount||f._iO.multiShotEvents)&&t&&dt(f,function(){t.apply(f)}))},this._whileloading=function(t,e,i,s){var o=f._iO;f.bytesLoaded=t,f.bytesTotal=e,f.duration=Math.floor(i),f.bufferLength=s,f.isHTML5||o.isMovieStar?f.durationEstimate=f.duration:o.duration?f.durationEstimate=f.duration>o.duration?f.duration:o.duration:f.durationEstimate=parseInt(f.bytesTotal/f.bytesLoaded*f.duration,10),f.isHTML5||(f.buffered=[{start:0,end:f.duration}]),(3!==f.readyState||f.isHTML5)&&o.whileloading&&o.whileloading.apply(f)},this._whileplaying=function(t,i,s,o,r){var n,a=f._iO;return isNaN(t)||null===t?!1:(f.position=Math.max(0,t),f._processOnPosition(),!f.isHTML5&&u>8&&(a.usePeakData&&i!==e&&i&&(f.peakData={left:i.leftPeak,right:i.rightPeak}),a.useWaveformData&&s!==e&&s&&(f.waveformData={left:s.split(","),right:o.split(",")}),a.useEQData&&r!==e&&r&&r.leftEQ&&(n=r.leftEQ.split(","),f.eqData=n,f.eqData.left=n,r.rightEQ!==e&&r.rightEQ&&(f.eqData.right=r.rightEQ.split(",")))),1===f.playState&&(f.isHTML5||8!==u||f.position||!f.isBuffering||f._onbufferchange(0),a.whileplaying&&a.whileplaying.apply(f)),!0)},this._oncaptiondata=function(t){f.captiondata=t,f._iO.oncaptiondata&&f._iO.oncaptiondata.apply(f,[t])},this._onmetadata=function(t,e){var i,s,o={};for(i=0,s=t.length;s>i;i++)o[t[i]]=e[i];f.metadata=o,f._iO.onmetadata&&f._iO.onmetadata.call(f,f.metadata)},this._onid3=function(t,e){var i,s,o=[];for(i=0,s=t.length;s>i;i++)o[t[i]]=e[i];f.id3=p(f.id3,o),f._iO.onid3&&f._iO.onid3.apply(f)},this._onconnect=function(t){t=1===t,f.connected=t,t&&(f.failures=0,q(f.id)&&(f.getAutoPlay()?f.play(e,f.getAutoPlay()):f._iO.autoLoad&&f.load()),f._iO.onconnect&&f._iO.onconnect.apply(f,[t]))},this._ondataerror=function(t){f.playState>0&&f._iO.ondataerror&&f._iO.ondataerror.apply(f)}},I=function(){return yt.body||yt.getElementsByTagName("div")[0]},a=function(t){return yt.getElementById(t)},p=function(t,i){var s,o,r=t||{};s=i===e?pt.defaultOptions:i;for(o in s)s.hasOwnProperty(o)&&r[o]===e&&("object"!=typeof s[o]||null===s[o]?r[o]=s[o]:r[o]=p(r[o],s[o]));return r},dt=function(e,i){e.isHTML5||8!==u?i():t.setTimeout(i,0)},m={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},f=function(t,i){var s,o=!0,r=i!==e,n=pt.setupOptions,a=m;for(s in t)if(t.hasOwnProperty(s))if("object"!=typeof t[s]||null===t[s]||t[s]instanceof Array||t[s]instanceof RegExp)r&&a[i]!==e?pt[i][s]=t[s]:n[s]!==e?(pt.setupOptions[s]=t[s],pt[s]=t[s]):a[s]===e?o=!1:pt[s]instanceof Function?pt[s].apply(pt,t[s]instanceof Array?t[s]:[t[s]]):pt[s]=t[s];else{if(a[s]!==e)return f(t[s],s);o=!1}return o},ot=function(){function e(t){var e=Ot.call(t),i=e.length;return r?(e[1]="on"+e[1],i>3&&e.pop()):3===i&&e.push(!1),e}function i(t,e){var i=t.shift(),s=[n[e]];r?i[s](t[0],t[1]):i[s].apply(i,t)}function s(){i(e(arguments),"add")}function o(){i(e(arguments),"remove")}var r=t.attachEvent,n={add:r?"attachEvent":"addEventListener",remove:r?"detachEvent":"removeEventListener"};return{add:s,remove:o}}(),lt={abort:r(function(){}),canplay:r(function(){var t,i=this._s;if(i._html5_canplay)return!0;if(i._html5_canplay=!0,i._onbufferchange(0),t=i._iO.position===e||isNaN(i._iO.position)?null:i._iO.position/Zt,this.currentTime!==t)try{this.currentTime=t}catch(s){}i._iO._oncanplay&&i._iO._oncanplay()}),canplaythrough:r(function(){var t=this._s;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))}),durationchange:r(function(){var t,e=this._s;t=e._get_html5_duration(),isNaN(t)||t===e.duration||(e.durationEstimate=e.duration=t)}),ended:r(function(){var t=this._s;t._onfinish()}),error:r(function(){this._s._onload(!1)}),loadeddata:r(function(){var t=this._s;t._loaded||zt||(t.duration=t._get_html5_duration())}),loadedmetadata:r(function(){}),loadstart:r(function(){this._s._onbufferchange(1)}),play:r(function(){this._s._onbufferchange(0)}),playing:r(function(){this._s._onbufferchange(0)}),progress:r(function(t){var e,i,s=this._s,o=0,r=("progress"===t.type,t.target.buffered),n=t.loaded||0,a=t.total||1;if(s.buffered=[],r&&r.length){for(e=0,i=r.length;i>e;e++)s.buffered.push({start:r.start(e)*Zt,end:r.end(e)*Zt});o=(r.end(0)-r.start(0))*Zt,n=Math.min(1,o/(t.target.duration*Zt))}isNaN(n)||(s._whileloading(n,a,s._get_html5_duration()),n&&a&&n===a&&lt.canplaythrough.call(this,t))}),ratechange:r(function(){}),suspend:r(function(t){var e=this._s;lt.progress.call(this,t),e._onsuspend()}),stalled:r(function(){}),timeupdate:r(function(){this._s._onTimer()}),waiting:r(function(){var t=this._s;t._onbufferchange(1)})},Q=function(t){var e;return e=t&&(t.type||t.url||t.serverURL)?t.serverURL||t.type&&o(t.type)?!1:t.type?$({type:t.type}):$({url:t.url})||pt.html5Only||t.url.match(/data\:/i):!1},et=function(t){var e;return t&&(e=zt?Jt:pt.html5.canPlayType("audio/wav")?Kt:Jt,t.src=e,void 0!==t._called_unload&&(t._called_load=!1)),Bt&&(rt=null),e},$=function(t){if(!pt.useHTML5Audio||!pt.hasHTML5)return!1;var i,s,r,n,a=t.url||null,h=t.type||null,l=pt.audioFormats;if(h&&pt.html5[h]!==e)return pt.html5[h]&&!o(h);if(!tt){tt=[];for(n in l)l.hasOwnProperty(n)&&(tt.push(n),l[n].related&&(tt=tt.concat(l[n].related)));tt=new RegExp("\\.("+tt.join("|")+")(\\?.*)?$","i")}return r=a?a.toLowerCase().match(tt):null,r&&r.length?r=r[1]:h?(s=h.indexOf(";"),r=(-1!==s?h.substr(0,s):h).substr(6)):i=!1,r&&pt.html5[r]!==e?i=pt.html5[r]&&!o(r):(h="audio/"+r,i=pt.html5.canPlayType({type:h}),pt.html5[r]=i,i=i&&pt.html5[h]&&!o(h)),i},st=function(){function t(t){var e,i,s=!1,o=!1;if(!n||"function"!=typeof n.canPlayType)return s;if(t instanceof Array){for(r=0,i=t.length;i>r;r++)(pt.html5[t[r]]||n.canPlayType(t[r]).match(pt.html5Test))&&(o=!0,pt.html5[t[r]]=!0,pt.flash[t[r]]=!!t[r].match(Vt));s=o}else e=n&&"function"==typeof n.canPlayType?n.canPlayType(t):!1,s=!(!e||!e.match(pt.html5Test));return s}if(!pt.useHTML5Audio||!pt.hasHTML5)return pt.html5.usingFlash=!0,Rt=!0,!1;var i,s,o,r,n=Audio!==e?Gt&&opera.version()<10?new Audio(null):new Audio:null,a={};o=pt.audioFormats;for(i in o)if(o.hasOwnProperty(i)&&(s="audio/"+i,a[i]=t(o[i].type),a[s]=a[i],i.match(Vt)?(pt.flash[i]=!0,pt.flash[s]=!0):(pt.flash[i]=!1,pt.flash[s]=!1),o[i]&&o[i].related))for(r=o[i].related.length-1;r>=0;r--)a["audio/"+o[i].related[r]]=a[i],pt.html5[o[i].related[r]]=a[i],pt.flash[o[i].related[r]]=a[i];return a.canPlayType=n?t:null,pt.html5=p(pt.html5,a),pt.html5.usingFlash=K(),Rt=pt.html5.usingFlash,!0},T={},j=function(){},G=function(t){return 8===u&&t.loops>1&&t.stream&&(t.stream=!1),t},H=function(t,e){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(t.usePolicyFile=!0),t},X=function(t){},h=function(){return!1},B=function(t){var e;for(e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=h);e=null},D=function(t){t===e&&(t=!1),(St||t)&&pt.disable(t)},F=function(t){var e,i=null;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(i=t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return e=(t&&-1!==t.lastIndexOf("/")?t.substr(0,t.lastIndexOf("/")+1):"./")+pt.movieURL,pt.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},w=function(){u=parseInt(pt.flashVersion,10),8!==u&&9!==u&&(pt.flashVersion=u=Ct);var t=pt.debugMode||pt.debugFlash?"_debug.swf":".swf";pt.useHTML5Audio&&!pt.html5Only&&pt.audioFormats.mp4.required&&9>u&&(pt.flashVersion=u=9),pt.version=pt.versionNumber+(pt.html5Only?" (HTML5-only mode)":9===u?" (AS3/Flash 9)":" (AS2/Flash 8)"),u>8?(pt.defaultOptions=p(pt.defaultOptions,pt.flash9Options),pt.features.buffering=!0,pt.defaultOptions=p(pt.defaultOptions,pt.movieStarOptions),pt.filePatterns.flash9=new RegExp("\\.(mp3|"+ee.join("|")+")(\\?.*)?$","i"),pt.features.movieStar=!0):pt.features.movieStar=!1,pt.filePattern=pt.filePatterns[8!==u?"flash9":"flash8"],pt.movieURL=(8===u?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),pt.features.peakData=pt.features.waveformData=pt.features.eqData=u>8},R=function(t,e){return mt?void mt._setPolling(t,e):!1},O=function(){},q=this.getSoundById,U=function(){var t=[];return pt.debugMode&&t.push(z.sm2Debug),pt.debugFlash&&t.push(z.flashDebug),pt.useHighPerformance&&t.push(z.highPerf),t.join(" ")},N=function(){var t=(j("fbHandler"),pt.getMoviePercent()),e=z,i={type:"FLASHBLOCK"};return pt.html5Only?!1:void(pt.ok()?pt.oMC&&(pt.oMC.className=[U(),e.swfDefault,e.swfLoaded+(pt.didFlashBlock?" "+e.swfUnblocked:"")].join(" ")):(Rt&&(pt.oMC.className=U()+" "+e.swfDefault+" "+(null===t?e.swfTimedout:e.swfError)),pt.didFlashBlock=!0,v({type:"ontimeout",ignoreInit:!0,error:i}),L(i)))},g=function(t,i,s){_t[t]===e&&(_t[t]=[]),_t[t].push({method:i,scope:s||null,fired:!1})},v=function(t){if(t||(t={type:pt.ok()?"onready":"ontimeout"}),!wt&&t&&!t.ignoreInit)return!1;if("ontimeout"===t.type&&(pt.ok()||St&&!t.ignoreInit))return!1;var e,i,s={success:t&&t.ignoreInit?pt.ok():!St},o=t&&t.type?_t[t.type]||[]:[],r=[],n=[s],a=Rt&&!pt.ok();for(t.error&&(n[0].error=t.error),e=0,i=o.length;i>e;e++)o[e].fired!==!0&&r.push(o[e]);if(r.length)for(e=0,i=r.length;i>e;e++)r[e].scope?r[e].method.apply(r[e].scope,n):r[e].method.apply(this,n),a||(r[e].fired=!0);return!0},y=function(){t.setTimeout(function(){pt.useFlashBlock&&N(),v(),"function"==typeof pt.onload&&pt.onload.apply(t),pt.waitForWindowLoad&&ot.add(t,"load",y)},1)},at=function(){if(nt!==e)return nt;var i,s,o,r=!1,n=navigator,a=n.plugins,h=t.ActiveXObject;if(a&&a.length)s="application/x-shockwave-flash",
o=n.mimeTypes,o&&o[s]&&o[s].enabledPlugin&&o[s].enabledPlugin.description&&(r=!0);else if(h!==e&&!gt.match(/MSAppHost/i)){try{i=new h("ShockwaveFlash.ShockwaveFlash")}catch(l){i=null}r=!!i,i=null}return nt=r,r},K=function(){var t,e,i=pt.audioFormats,s=Ft&&!!gt.match(/os (1|2|3_0|3_1)\s/i);if(s?(pt.hasHTML5=!1,pt.html5Only=!0,pt.oMC&&(pt.oMC.style.display="none")):pt.useHTML5Audio&&(pt.html5&&pt.html5.canPlayType||(pt.hasHTML5=!1)),pt.useHTML5Audio&&pt.hasHTML5){J=!0;for(e in i)i.hasOwnProperty(e)&&i[e].required&&(pt.html5.canPlayType(i[e].type)?pt.preferFlash&&(pt.flash[e]||pt.flash[i[e].type])&&(t=!0):(J=!1,t=!0))}return pt.ignoreFlash&&(t=!1,J=!0),pt.html5Only=pt.hasHTML5&&pt.useHTML5Audio&&!t,!pt.html5Only},Z=function(t){var e,i,s,o=0;if(t instanceof Array){for(e=0,i=t.length;i>e;e++)if(t[e]instanceof Object){if(pt.canPlayMIME(t[e].type)){o=e;break}}else if(pt.canPlayURL(t[e])){o=e;break}t[o].url&&(t[o]=t[o].url),s=t[o]}else s=t;return s},W=function(t){t._hasTimer||(t._hasTimer=!0,!Ht&&pt.html5PollingInterval&&(null===kt&&0===It&&(kt=setInterval(V,pt.html5PollingInterval)),It++))},Y=function(t){t._hasTimer&&(t._hasTimer=!1,!Ht&&pt.html5PollingInterval&&It--)},V=function(){var t;if(null!==kt&&!It)return clearInterval(kt),kt=null,!1;for(t=pt.soundIDs.length-1;t>=0;t--)pt.sounds[pt.soundIDs[t]].isHTML5&&pt.sounds[pt.soundIDs[t]]._hasTimer&&pt.sounds[pt.soundIDs[t]]._onTimer()},L=function(i){i=i!==e?i:{},"function"==typeof pt.onerror&&pt.onerror.apply(t,[{type:i.type!==e?i.type:null}]),i.fatal!==e&&i.fatal&&pt.disable()},ht=function(){if(!Xt||!at())return!1;var t,e,i=pt.audioFormats;for(e in i)if(i.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(pt.html5[e]=!1,i[e]&&i[e].related))for(t=i[e].related.length-1;t>=0;t--)pt.html5[i[e].related[t]]=!1},this._setSandboxType=function(t){},this._externalInterfaceOK=function(t){if(pt.swfLoaded)return!1;pt.swfLoaded=!0,Wt=!1,Xt&&ht(),setTimeout(c,Nt?100:1)},k=function(t,i){function s(){}function o(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(xt&&bt)return!1;if(pt.html5Only)return w(),s(),pt.oMC=a(pt.movieID),c(),xt=!0,bt=!0,!1;var r,n,h,l,u,d,p,f,m=i||pt.url,g=pt.altURL||m,v="JS/Flash audio component (SoundManager 2)",y=I(),_=U(),x=null,b=yt.getElementsByTagName("html")[0];if(x=b&&b.dir&&b.dir.match(/rtl/i),t=t===e?pt.id:t,w(),pt.url=F(Qt?m:g),i=pt.url,pt.wmode=!pt.wmode&&pt.useHighPerformance?"transparent":pt.wmode,null!==pt.wmode&&(gt.match(/msie 8/i)||!Nt&&!pt.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Lt.push(T.spcWmode),pt.wmode=null),r={name:t,id:t,src:i,quality:"high",allowScriptAccess:pt.allowScriptAccess,bgcolor:pt.bgColor,pluginspage:$t+"www.macromedia.com/go/getflashplayer",title:v,type:"application/x-shockwave-flash",wmode:pt.wmode,hasPriority:"true"},pt.debugFlash&&(r.FlashVars="debug=1"),pt.wmode||delete r.wmode,Nt)n=yt.createElement("div"),l=['<object id="'+t+'" data="'+i+'" type="'+r.type+'" title="'+r.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+$t+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',o("movie",i),o("AllowScriptAccess",pt.allowScriptAccess),o("quality",r.quality),pt.wmode?o("wmode",pt.wmode):"",o("bgcolor",pt.bgColor),o("hasPriority","true"),pt.debugFlash?o("FlashVars",r.FlashVars):"","</object>"].join("");else{n=yt.createElement("embed");for(h in r)r.hasOwnProperty(h)&&n.setAttribute(h,r[h])}if(O(),_=U(),y=I())if(pt.oMC=a(pt.movieID)||yt.createElement("div"),pt.oMC.id)f=pt.oMC.className,pt.oMC.className=(f?f+" ":z.swfDefault)+(_?" "+_:""),pt.oMC.appendChild(n),Nt&&(u=pt.oMC.appendChild(yt.createElement("div")),u.className=z.swfBox,u.innerHTML=l),bt=!0;else{if(pt.oMC.id=pt.movieID,pt.oMC.className=z.swfDefault+" "+_,d=null,u=null,pt.useFlashBlock||(pt.useHighPerformance?d={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(d={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},x&&(d.left=Math.abs(parseInt(d.left,10))+"px"))),Ut&&(pt.oMC.style.zIndex=1e4),!pt.debugFlash)for(p in d)d.hasOwnProperty(p)&&(pt.oMC.style[p]=d[p]);try{Nt||pt.oMC.appendChild(n),y.appendChild(pt.oMC),Nt&&(u=pt.oMC.appendChild(yt.createElement("div")),u.className=z.swfBox,u.innerHTML=l),bt=!0}catch(S){throw new Error(j("domError")+" \n"+S.toString())}}return xt=!0,s(),!0},C=function(){return pt.html5Only?(k(),!1):mt?!1:pt.url?(mt=pt.getMovie(pt.id),mt||(Pt?(Nt?pt.oMC.innerHTML=At:pt.oMC.appendChild(Pt),Pt=null,xt=!0):k(pt.id,pt.url),mt=pt.getMovie(pt.id)),"function"==typeof pt.oninitmovie&&setTimeout(pt.oninitmovie,1),!0):!1},_=function(){setTimeout(x,1e3)},b=function(){t.setTimeout(function(){pt.setup({preferFlash:!1}).reboot(),pt.didFlashBlock=!0,pt.beginDelayedInit()},1)},x=function(){var e,i=!1;return pt.url?Mt?!1:(Mt=!0,ot.remove(t,"load",_),nt&&Wt&&!qt?!1:(wt||(e=pt.getMoviePercent(),e>0&&100>e&&(i=!0)),void setTimeout(function(){return e=pt.getMoviePercent(),i?(Mt=!1,t.setTimeout(_,1),!1):void(!wt&&Yt&&(null===e?pt.useFlashBlock||0===pt.flashLoadTimeout?pt.useFlashBlock&&N():!pt.useFlashBlock&&J?b():v({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}}):0===pt.flashLoadTimeout||(!pt.useFlashBlock&&J?b():D(!0))))},pt.flashLoadTimeout))):!1},S=function(){function e(){ot.remove(t,"focus",S)}return qt||!Wt?(e(),!0):(Yt=!0,qt=!0,Mt=!1,_(),e(),!0)},ut=function(){},ct=function(){},d=function(e){if(wt)return!1;if(pt.html5Only)return wt=!0,y(),!0;var i,s=pt.useFlashBlock&&pt.flashLoadTimeout&&!pt.getMoviePercent(),o=!0;return s||(wt=!0),i={type:!nt&&Rt?"NO_FLASH":"INIT_TIMEOUT"},(St||e)&&(pt.useFlashBlock&&pt.oMC&&(pt.oMC.className=U()+" "+(null===pt.getMoviePercent()?z.swfTimedout:z.swfError)),v({type:"ontimeout",error:i,ignoreInit:!0}),L(i),o=!1),St||(pt.waitForWindowLoad&&!Tt?ot.add(t,"load",y):y()),o},l=function(){var t,i=pt.setupOptions;for(t in i)i.hasOwnProperty(t)&&(pt[t]===e?pt[t]=i[t]:pt[t]!==i[t]&&(pt.setupOptions[t]=pt[t]))},c=function(){function e(){ot.remove(t,"load",pt.beginDelayedInit)}if(wt)return!1;if(pt.html5Only)return wt||(e(),pt.enabled=!0,d()),!0;C();try{mt._externalInterfaceTest(!1),R(!0,pt.flashPollingInterval||(pt.useHighPerformance?10:50)),pt.debugMode||mt._disableDebug(),pt.enabled=!0,pt.html5Only||ot.add(t,"unload",h)}catch(i){return L({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),D(!0),d(),!1}return d(),e(),!0},A=function(){return E?!1:(E=!0,l(),O(),!nt&&pt.hasHTML5&&pt.setup({useHTML5Audio:!0,preferFlash:!1}),st(),!nt&&Rt&&(Lt.push(T.needFlash),pt.setup({flashLoadTimeout:1})),yt.removeEventListener&&yt.removeEventListener("DOMContentLoaded",A,!1),C(),!0)},it=function(){return"complete"===yt.readyState&&(A(),yt.detachEvent("onreadystatechange",it)),!0},M=function(){Tt=!0,A(),ot.remove(t,"load",M)},P=function(){Ht&&(pt.setupOptions.useHTML5Audio=!0,pt.setupOptions.preferFlash=!1,(Ft||jt&&!gt.match(/android\s2\.3/i))&&(Ft&&(pt.ignoreFlash=!0),Bt=!0))},P(),at(),ot.add(t,"focus",S),ot.add(t,"load",_),ot.add(t,"load",M),yt.addEventListener?yt.addEventListener("DOMContentLoaded",A,!1):yt.attachEvent?yt.attachEvent("onreadystatechange",it):L({type:"NO_DOM2_EVENTS",fatal:!0})}if(!t||!t.document)throw new Error("SoundManager requires a browser with window and document objects.");var s=null;void 0!==t.SM2_DEFER&&SM2_DEFER||(s=new i),"object"==typeof module&&module&&"object"==typeof module.exports?(t.soundManager=s,module.exports.SoundManager=i,module.exports.soundManager=s):"function"==typeof define&&define.amd?define("SM2",s):(t.SoundManager=i,t.soundManager=s)}(window),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("PIXI",[],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.PIXI=t()}}(function(){var t;return function e(t,i,s){function o(n,a){if(!i[n]){if(!t[n]){var h="function"==typeof require&&require;if(!a&&h)return h(n,!0);if(r)return r(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[n]={exports:{}};t[n][0].call(c.exports,function(e){var i=t[n][1][e];return o(i?i:e)},c,c.exports,e,t,i,s)}return i[n].exports}for(var r="function"==typeof require&&require,n=0;n<s.length;n++)o(s[n]);return o}({1:[function(e,i,s){(function(e,s){!function(){function o(){}function r(t){return t}function n(t){return!!t}function a(t){return!t}function h(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function l(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function c(t){return U(t)||"number"==typeof t.length&&t.length>=0&&t.length%1===0}function u(t,e){for(var i=-1,s=t.length;++i<s;)e(t[i],i,t)}function d(t,e){for(var i=-1,s=t.length,o=Array(s);++i<s;)o[i]=e(t[i],i,t);return o}function p(t){return d(Array(t),function(t,e){return e})}function f(t,e,i){return u(t,function(t,s,o){i=e(i,t,s,o)}),i}function m(t,e){u(G(t),function(i){e(t[i],i)})}function g(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}function v(t){var e,i,s=-1;return c(t)?(e=t.length,function(){return s++,e>s?s:null}):(i=G(t),e=i.length,function(){return s++,e>s?i[s]:null})}function y(t,e){return e=null==e?t.length-1:+e,function(){for(var i=Math.max(arguments.length-e,0),s=Array(i),o=0;i>o;o++)s[o]=arguments[o+e];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,arguments[0],s)}}}function _(t){return function(e,i,s){return t(e,s)}}function x(t){return function(e,i,s){s=l(s||o),e=e||[];var r=v(e);if(0>=t)return s(null);var n=!1,a=0,c=!1;!function u(){if(n&&0>=a)return s(null);for(;t>a&&!c;){var o=r();if(null===o)return n=!0,void(0>=a&&s(null));a+=1,i(e[o],o,h(function(t){a-=1,t?(s(t),c=!0):u()}))}}()}}function b(t){return function(e,i,s){return t(F.eachOf,e,i,s)}}function w(t){return function(e,i,s,o){return t(x(i),e,s,o)}}function S(t){return function(e,i,s){return t(F.eachOfSeries,e,i,s)}}function T(t,e,i,s){s=l(s||o),e=e||[];var r=c(e)?[]:{};t(e,function(t,e,s){i(t,function(t,i){r[e]=i,s(t)})},function(t){s(t,r)})}function C(t,e,i,s){var o=[];t(e,function(t,e,s){i(t,function(i){i&&o.push({index:e,value:t}),s()})},function(){s(d(o.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function P(t,e,i,s){C(t,e,function(t,e){i(t,function(t){e(!t)})},s)}function A(t,e,i){return function(s,o,r,n){function a(){n&&n(i(!1,void 0))}function h(t,s,o){return n?void r(t,function(s){n&&e(s)&&(n(i(!0,t)),n=r=!1),o()}):o()}arguments.length>3?t(s,o,h,a):(n=r,r=o,t(s,h,a))}}function M(t,e){return e}function E(t,e,i){i=i||o;var s=c(e)?[]:{};t(e,function(t,e,i){t(y(function(t,o){o.length<=1&&(o=o[0]),s[e]=o,i(t)}))},function(t){i(t,s)})}function I(t,e,i,s){var o=[];t(e,function(t,e,s){i(t,function(t,e){o=o.concat(e||[]),s(t)})},function(t){s(t,o)})}function k(t,e,i){function s(t,e,i,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");return t.started=!0,U(e)||(e=[e]),0===e.length&&t.idle()?F.setImmediate(function(){t.drain()}):(u(e,function(e){var r={data:e,callback:s||o};i?t.tasks.unshift(r):t.tasks.push(r),t.tasks.length===t.concurrency&&t.saturated()}),void F.setImmediate(t.process))}function r(t,e){return function(){n-=1;var i=!1,s=arguments;u(e,function(t){u(a,function(e,s){e!==t||i||(a.splice(s,1),i=!0)}),t.callback.apply(t,s)}),t.tasks.length+n===0&&t.drain(),t.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var n=0,a=[],l={tasks:[],concurrency:e,payload:i,saturated:o,empty:o,drain:o,started:!1,paused:!1,push:function(t,e){s(l,t,!1,e)},kill:function(){l.drain=o,l.tasks=[]},unshift:function(t,e){s(l,t,!0,e)},process:function(){for(;!l.paused&&n<l.concurrency&&l.tasks.length;){var e=l.payload?l.tasks.splice(0,l.payload):l.tasks.splice(0,l.tasks.length),i=d(e,function(t){return t.data});0===l.tasks.length&&l.empty(),n+=1,a.push(e[0]);var s=h(r(l,e));t(i,s)}},length:function(){return l.tasks.length},running:function(){return n},workersList:function(){return a},idle:function(){return l.tasks.length+n===0},pause:function(){l.paused=!0},resume:function(){if(l.paused!==!1){l.paused=!1;for(var t=Math.min(l.concurrency,l.tasks.length),e=1;t>=e;e++)F.setImmediate(l.process)}}};return l}function L(t){return y(function(e,i){e.apply(null,i.concat([y(function(e,i){"object"==typeof console&&(e?console.error&&void 0:console[t]&&u(i,function(t){}))})]))})}function R(t){return function(e,i,s){t(p(e),i,s)}}function O(t){return y(function(e,i){var s=y(function(i){var s=this,o=i.pop();return t(e,function(t,e,o){t.apply(s,i.concat([o]))},o)});return i.length?s.apply(this,i):s})}function B(t){return y(function(e){var i=e.pop();e.push(function(){var t=arguments;s?F.setImmediate(function(){i.apply(null,t)}):i.apply(null,t)});var s=!0;t.apply(this,e),s=!1})}var D,F={},j="object"==typeof self&&self.self===self&&self||"object"==typeof s&&s.global===s&&s||this;null!=j&&(D=j.async),F.noConflict=function(){return j.async=D,F};var N=Object.prototype.toString,U=Array.isArray||function(t){return"[object Array]"===N.call(t)},z=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},G=Object.keys||function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e},H="function"==typeof setImmediate&&setImmediate,X=H?function(t){H(t)}:function(t){setTimeout(t,0)};"object"==typeof e&&"function"==typeof e.nextTick?F.nextTick=e.nextTick:F.nextTick=X,F.setImmediate=H?X:F.nextTick,F.forEach=F.each=function(t,e,i){return F.eachOf(t,_(e),i)},F.forEachSeries=F.eachSeries=function(t,e,i){return F.eachOfSeries(t,_(e),i)},F.forEachLimit=F.eachLimit=function(t,e,i,s){return x(e)(t,_(i),s)},F.forEachOf=F.eachOf=function(t,e,i){function s(t){a--,t?i(t):null===r&&0>=a&&i(null)}i=l(i||o),t=t||[];for(var r,n=v(t),a=0;null!=(r=n());)a+=1,e(t[r],r,h(s));0===a&&i(null)},F.forEachOfSeries=F.eachOfSeries=function(t,e,i){function s(){var o=!0;return null===n?i(null):(e(t[n],n,h(function(t){if(t)i(t);else{if(n=r(),null===n)return i(null);o?F.setImmediate(s):s()}})),void(o=!1))}i=l(i||o),t=t||[];var r=v(t),n=r();s()},F.forEachOfLimit=F.eachOfLimit=function(t,e,i,s){x(e)(t,i,s)},F.map=b(T),F.mapSeries=S(T),F.mapLimit=w(T),F.inject=F.foldl=F.reduce=function(t,e,i,s){F.eachOfSeries(t,function(t,s,o){i(e,t,function(t,i){e=i,o(t)})},function(t){s(t,e)})},F.foldr=F.reduceRight=function(t,e,i,s){var o=d(t,r).reverse();F.reduce(o,e,i,s)},F.transform=function(t,e,i,s){3===arguments.length&&(s=i,i=e,e=U(t)?[]:{}),F.eachOf(t,function(t,s,o){i(e,t,s,o)},function(t){s(t,e)})},F.select=F.filter=b(C),F.selectLimit=F.filterLimit=w(C),F.selectSeries=F.filterSeries=S(C),F.reject=b(P),F.rejectLimit=w(P),F.rejectSeries=S(P),F.any=F.some=A(F.eachOf,n,r),F.someLimit=A(F.eachOfLimit,n,r),F.all=F.every=A(F.eachOf,a,a),F.everyLimit=A(F.eachOfLimit,a,a),F.detect=A(F.eachOf,r,M),F.detectSeries=A(F.eachOfSeries,r,M),F.detectLimit=A(F.eachOfLimit,r,M),F.sortBy=function(t,e,i){function s(t,e){var i=t.criteria,s=e.criteria;return s>i?-1:i>s?1:0}F.map(t,function(t,i){e(t,function(e,s){e?i(e):i(null,{value:t,criteria:s})})},function(t,e){return t?i(t):void i(null,d(e.sort(s),function(t){return t.value}))})},F.auto=function(t,e,i){function s(t){v.unshift(t)}function r(t){var e=g(v,t);e>=0&&v.splice(e,1)}function n(){h--,u(v.slice(0),function(t){t()})}"function"==typeof arguments[1]&&(i=e,e=null),i=l(i||o);var a=G(t),h=a.length;if(!h)return i(null);e||(e=h);var c={},d=0,p=!1,v=[];s(function(){h||i(null,c)}),u(a,function(o){function a(){return e>d&&f(_,function(t,e){return t&&c.hasOwnProperty(e)},!0)&&!c.hasOwnProperty(o)}function h(){a()&&(d++,r(h),u[u.length-1](v,c))}if(!p){for(var l,u=U(t[o])?t[o]:[t[o]],v=y(function(t,e){if(d--,e.length<=1&&(e=e[0]),t){var s={};m(c,function(t,e){s[e]=t}),s[o]=e,p=!0,i(t,s)}else c[o]=e,F.setImmediate(n)}),_=u.slice(0,u.length-1),x=_.length;x--;){if(!(l=t[_[x]]))throw new Error("Has nonexistent dependency in "+_.join(", "));if(U(l)&&g(l,o)>=0)throw new Error("Has cyclic dependencies")}a()?(d++,u[u.length-1](v,c)):s(h)}})},F.retry=function(t,e,i){function s(t,e){if("number"==typeof e)t.times=parseInt(e,10)||r;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||r,t.interval=parseInt(e.interval,10)||n}}function o(t,e){function i(t,i){return function(s){t(function(t,e){s(!t||i,{err:t,result:e})},e)}}function s(t){return function(e){setTimeout(function(){e(null)},t)}}for(;h.times;){var o=!(h.times-=1);a.push(i(h.task,o)),!o&&h.interval>0&&a.push(s(h.interval))}F.series(a,function(e,i){i=i[i.length-1],(t||h.callback)(i.err,i.result)})}var r=5,n=0,a=[],h={times:r,interval:n},l=arguments.length;if(1>l||l>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=l&&"function"==typeof t&&(i=e,e=t),"function"!=typeof t&&s(h,t),h.callback=i,h.task=e,h.callback?o():o},F.waterfall=function(t,e){function i(t){return y(function(s,o){if(s)e.apply(null,[s].concat(o));else{var r=t.next();r?o.push(i(r)):o.push(e),B(t).apply(null,o)}})}if(e=l(e||o),!U(t)){var s=new Error("First argument to waterfall must be an array of functions");return e(s)}return t.length?void i(F.iterator(t))():e()},F.parallel=function(t,e){E(F.eachOf,t,e)},F.parallelLimit=function(t,e,i){E(x(e),t,i)},F.series=function(t,e){E(F.eachOfSeries,t,e)},F.iterator=function(t){function e(i){function s(){return t.length&&t[i].apply(null,arguments),s.next()}return s.next=function(){return i<t.length-1?e(i+1):null},s}return e(0)},F.apply=y(function(t,e){return y(function(i){return t.apply(null,e.concat(i))})}),F.concat=b(I),F.concatSeries=S(I),F.whilst=function(t,e,i){if(i=i||o,t()){var s=y(function(o,r){o?i(o):t.apply(this,r)?e(s):i.apply(null,[null].concat(r))});e(s)}else i(null)},F.doWhilst=function(t,e,i){var s=0;return F.whilst(function(){return++s<=1||e.apply(this,arguments)},t,i)},F.until=function(t,e,i){return F.whilst(function(){return!t.apply(this,arguments)},e,i)},F.doUntil=function(t,e,i){return F.doWhilst(t,function(){return!e.apply(this,arguments)},i)},F.during=function(t,e,i){i=i||o;var s=y(function(e,s){e?i(e):(s.push(r),t.apply(this,s))}),r=function(t,o){t?i(t):o?e(s):i(null)};t(r)},F.doDuring=function(t,e,i){var s=0;F.during(function(t){s++<1?t(null,!0):e.apply(this,arguments)},t,i)},F.queue=function(t,e){var i=k(function(e,i){t(e[0],i)},e,1);return i},F.priorityQueue=function(t,e){function i(t,e){return t.priority-e.priority}function s(t,e,i){for(var s=-1,o=t.length-1;o>s;){var r=s+(o-s+1>>>1);i(e,t[r])>=0?s=r:o=r-1}return s}function r(t,e,r,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");return t.started=!0,U(e)||(e=[e]),0===e.length?F.setImmediate(function(){t.drain()}):void u(e,function(e){var a={data:e,priority:r,callback:"function"==typeof n?n:o};t.tasks.splice(s(t.tasks,a,i)+1,0,a),t.tasks.length===t.concurrency&&t.saturated(),F.setImmediate(t.process)})}var n=F.queue(t,e);return n.push=function(t,e,i){r(n,t,e,i)},delete n.unshift,n},F.cargo=function(t,e){return k(t,1,e)},F.log=L("log"),F.dir=L("dir"),F.memoize=function(t,e){var i={},s={},o=Object.prototype.hasOwnProperty;e=e||r;var n=y(function(r){var n=r.pop(),a=e.apply(null,r);o.call(i,a)?F.setImmediate(function(){n.apply(null,i[a])}):o.call(s,a)?s[a].push(n):(s[a]=[n],t.apply(null,r.concat([y(function(t){i[a]=t;var e=s[a];delete s[a];for(var o=0,r=e.length;r>o;o++)e[o].apply(null,t)})])))});return n.memo=i,n.unmemoized=t,n},F.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},F.times=R(F.map),F.timesSeries=R(F.mapSeries),F.timesLimit=function(t,e,i,s){return F.mapLimit(p(t),e,i,s)},F.seq=function(){var t=arguments;return y(function(e){var i=this,s=e[e.length-1];"function"==typeof s?e.pop():s=o,F.reduce(t,e,function(t,e,s){e.apply(i,t.concat([y(function(t,e){s(t,e)})]))},function(t,e){s.apply(i,[t].concat(e))})})},F.compose=function(){return F.seq.apply(null,Array.prototype.reverse.call(arguments))},F.applyEach=O(F.eachOf),F.applyEachSeries=O(F.eachOfSeries),F.forever=function(t,e){function i(t){return t?s(t):void r(i)}var s=h(e||o),r=B(t);i()},F.ensureAsync=B,F.constant=y(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),F.wrapSync=F.asyncify=function(t){return y(function(e){var i,s=e.pop();try{i=t.apply(this,e)}catch(o){return s(o)}z(i)&&"function"==typeof i.then?i.then(function(t){s(null,t)})["catch"](function(t){s(t.message?t:new Error(t))}):s(null,i)})},"object"==typeof i&&i.exports?i.exports=F:"function"==typeof t&&t.amd?t([],function(){return F}):j.async=F}()}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],2:[function(t,e,i){(function(t){function e(t,e){for(var i=0,s=t.length-1;s>=0;s--){var o=t[s];"."===o?t.splice(s,1):".."===o?(t.splice(s,1),i++):i&&(t.splice(s,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function s(t,e){if(t.filter)return t.filter(e);for(var i=[],s=0;s<t.length;s++)e(t[s],s,t)&&i.push(t[s]);return i}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(t){return o.exec(t).slice(1)};i.resolve=function(){for(var i="",o=!1,r=arguments.length-1;r>=-1&&!o;r--){var n=r>=0?arguments[r]:t.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(i=n+"/"+i,o="/"===n.charAt(0))}return i=e(s(i.split("/"),function(t){return!!t}),!o).join("/"),(o?"/":"")+i||"."},i.normalize=function(t){var o=i.isAbsolute(t),r="/"===n(t,-1);return t=e(s(t.split("/"),function(t){return!!t}),!o).join("/"),t||o||(t="."),t&&r&&(t+="/"),(o?"/":"")+t},i.isAbsolute=function(t){return"/"===t.charAt(0)},i.join=function(){var t=Array.prototype.slice.call(arguments,0);return i.normalize(s(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},i.relative=function(t,e){function s(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=i.resolve(t).substr(1),e=i.resolve(e).substr(1);for(var o=s(t.split("/")),r=s(e.split("/")),n=Math.min(o.length,r.length),a=n,h=0;n>h;h++)if(o[h]!==r[h]){a=h;break}for(var l=[],h=a;h<o.length;h++)l.push("..");return l=l.concat(r.slice(a)),l.join("/")},i.sep="/",i.delimiter=":",i.dirname=function(t){var e=r(t),i=e[0],s=e[1];return i||s?(s&&(s=s.substr(0,s.length-1)),i+s):"."},i.basename=function(t,e){var i=r(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},i.extname=function(t){return r(t)[3]};var n="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return 0>e&&(e=t.length+e),t.substr(e,i)}}).call(this,t("_process"))},{_process:3}],3:[function(t,e,i){function s(){c=!1,a.length?l=a.concat(l):u=-1,l.length&&o()}function o(){if(!c){var t=setTimeout(s);c=!0;for(var e=l.length;e;){for(a=l,l=[];++u<e;)a&&a[u].run();u=-1,e=l.length}a=null,c=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function n(){}var a,h=e.exports={},l=[],c=!1,u=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new r(t,e)),1!==l.length||c||setTimeout(o,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=n,h.addListener=n,h.once=n,h.off=n,h.removeListener=n,h.removeAllListeners=n,h.emit=n,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],4:[function(e,i,s){(function(e){!function(o){function r(t){throw new RangeError(O[t])}function n(t,e){for(var i=t.length,s=[];i--;)s[i]=e(t[i]);return s}function a(t,e){var i=t.split("@"),s="";i.length>1&&(s=i[0]+"@",t=i[1]),t=t.replace(R,".");var o=t.split("."),r=n(o,e).join(".");return s+r}function h(t){for(var e,i,s=[],o=0,r=t.length;r>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&r>o?(i=t.charCodeAt(o++),56320==(64512&i)?s.push(((1023&e)<<10)+(1023&i)+65536):(s.push(e),o--)):s.push(e);return s}function l(t){return n(t,function(t){var e="";return t>65535&&(t-=65536,e+=F(t>>>10&1023|55296),t=56320|1023&t),e+=F(t)}).join("")}function c(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:S}function u(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function d(t,e,i){var s=0;for(t=i?D(t/A):t>>1,t+=D(t/e);t>B*C>>1;s+=S)t=D(t/B);return D(s+(B+1)*t/(t+P))}function p(t){var e,i,s,o,n,a,h,u,p,f,m=[],g=t.length,v=0,y=E,_=M;for(i=t.lastIndexOf(I),0>i&&(i=0),s=0;i>s;++s)t.charCodeAt(s)>=128&&r("not-basic"),m.push(t.charCodeAt(s));for(o=i>0?i+1:0;g>o;){for(n=v,a=1,h=S;o>=g&&r("invalid-input"),u=c(t.charCodeAt(o++)),(u>=S||u>D((w-v)/a))&&r("overflow"),v+=u*a,p=_>=h?T:h>=_+C?C:h-_,!(p>u);h+=S)f=S-p,a>D(w/f)&&r("overflow"),a*=f;e=m.length+1,_=d(v-n,e,0==n),D(v/e)>w-y&&r("overflow"),y+=D(v/e),v%=e,m.splice(v++,0,y)}return l(m)}function f(t){var e,i,s,o,n,a,l,c,p,f,m,g,v,y,_,x=[];for(t=h(t),g=t.length,e=E,i=0,n=M,a=0;g>a;++a)m=t[a],128>m&&x.push(F(m));for(s=o=x.length,o&&x.push(I);g>s;){for(l=w,a=0;g>a;++a)m=t[a],m>=e&&l>m&&(l=m);for(v=s+1,l-e>D((w-i)/v)&&r("overflow"),i+=(l-e)*v,e=l,a=0;g>a;++a)if(m=t[a],e>m&&++i>w&&r("overflow"),m==e){for(c=i,p=S;f=n>=p?T:p>=n+C?C:p-n,!(f>c);p+=S)_=c-f,y=S-f,x.push(F(u(f+_%y,0))),c=D(_/y);x.push(F(u(c,0))),n=d(i,v,s==o),i=0,++s}++i,++e}return x.join("")}function m(t){return a(t,function(t){return k.test(t)?p(t.slice(4).toLowerCase()):t})}function g(t){return a(t,function(t){return L.test(t)?"xn--"+f(t):t})}var v="object"==typeof s&&s&&!s.nodeType&&s,y="object"==typeof i&&i&&!i.nodeType&&i,_="object"==typeof e&&e;_.global!==_&&_.window!==_&&_.self!==_||(o=_);var x,b,w=2147483647,S=36,T=1,C=26,P=38,A=700,M=72,E=128,I="-",k=/^xn--/,L=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=S-T,D=Math.floor,F=String.fromCharCode;if(x={version:"1.3.2",ucs2:{decode:h,encode:l},decode:p,encode:f,toASCII:g,toUnicode:m},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return x});else if(v&&y)if(i.exports==v)y.exports=x;else for(b in x)x.hasOwnProperty(b)&&(v[b]=x[b]);else o.punycode=x}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,i){function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,r){e=e||"&",i=i||"=";var n={};if("string"!=typeof t||0===t.length)return n;var a=/\+/g;t=t.split(e);var h=1e3;r&&"number"==typeof r.maxKeys&&(h=r.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var c=0;l>c;++c){var u,d,p,f,m=t[c].replace(a,"%20"),g=m.indexOf(i);g>=0?(u=m.substr(0,g),d=m.substr(g+1)):(u=m,d=""),p=decodeURIComponent(u),f=decodeURIComponent(d),s(n,p)?o(n[p])?n[p].push(f):n[p]=[n[p],f]:n[p]=f}return n};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],6:[function(t,e,i){function s(t,e){if(t.map)return t.map(e);for(var i=[],s=0;s<t.length;s++)i.push(e(t[s],s));return i}var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?s(n(t),function(n){var a=encodeURIComponent(o(n))+i;return r(t[n])?s(t[n],function(t){return a+encodeURIComponent(o(t))}).join(e):a+encodeURIComponent(o(t[n]))}).join(e):a?encodeURIComponent(o(a))+i+encodeURIComponent(o(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],7:[function(t,e,i){i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":5,"./encode":6}],8:[function(t,e,i){function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,i){if(t&&l(t)&&t instanceof s)return t;var o=new s;return o.parse(t,e,i),o}function r(t){return h(t)&&(t=o(t)),t instanceof s?t.format():s.prototype.format.call(t)}function n(t,e){return o(t,!1,!0).resolve(e)}function a(t,e){return t?o(t,!1,!0).resolveObject(e):e}function h(t){return"string"==typeof t}function l(t){return"object"==typeof t&&null!==t}function c(t){return null===t}function u(t){return null==t}var d=t("punycode");i.parse=o,i.resolve=n,i.resolveObject=a,i.format=r,i.Url=s;var p=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(g),y=["%","/","?",";","#"].concat(v),_=["/","?","#"],x=255,b=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,S={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},P=t("querystring");s.prototype.parse=function(t,e,i){if(!h(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t;s=s.trim();var o=p.exec(s);if(o){o=o[0];var r=o.toLowerCase();this.protocol=r,s=s.substr(o.length)}if(i||o||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var n="//"===s.substr(0,2);!n||o&&T[o]||(s=s.substr(2),this.slashes=!0)}if(!T[o]&&(n||o&&!C[o])){for(var a=-1,l=0;l<_.length;l++){var c=s.indexOf(_[l]);-1!==c&&(-1===a||a>c)&&(a=c)}var u,f;f=-1===a?s.lastIndexOf("@"):s.lastIndexOf("@",a),-1!==f&&(u=s.slice(0,f),s=s.slice(f+1),this.auth=decodeURIComponent(u)),a=-1;for(var l=0;l<y.length;l++){var c=s.indexOf(y[l]);-1!==c&&(-1===a||a>c)&&(a=c)}-1===a&&(a=s.length),this.host=s.slice(0,a),s=s.slice(a),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),l=0,A=g.length;A>l;l++){var M=g[l];if(M&&!M.match(b)){for(var E="",I=0,k=M.length;k>I;I++)E+=M.charCodeAt(I)>127?"x":M[I];if(!E.match(b)){var L=g.slice(0,l),R=g.slice(l+1),O=M.match(w);O&&(L.push(O[1]),R.unshift(O[2])),R.length&&(s="/"+R.join(".")+s),this.hostname=L.join(".");break}}}if(this.hostname.length>x?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var B=this.hostname.split("."),D=[],l=0;l<B.length;++l){var F=B[l];D.push(F.match(/[^A-Za-z0-9_-]/)?"xn--"+d.encode(F):F)}this.hostname=D.join(".")}var j=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+j,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!S[r])for(var l=0,A=v.length;A>l;l++){var U=v[l],z=encodeURIComponent(U);z===U&&(z=escape(U)),s=s.split(U).join(z)}var G=s.indexOf("#");-1!==G&&(this.hash=s.substr(G),s=s.slice(0,G));var H=s.indexOf("?");if(-1!==H?(this.search=s.substr(H),this.query=s.substr(H+1),e&&(this.query=P.parse(this.query)),s=s.slice(0,H)):e&&(this.search="",this.query={}),s&&(this.pathname=s),C[r]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",F=this.search||"";this.path=j+F}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",s=this.hash||"",o=!1,r="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(r=P.stringify(this.query));var n=this.search||r&&"?"+r||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||C[e])&&o!==!1?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),s&&"#"!==s.charAt(0)&&(s="#"+s),
n&&"?"!==n.charAt(0)&&(n="?"+n),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),n=n.replace("#","%23"),e+o+i+n+s},s.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(h(t)){var e=new s;e.parse(t,!1,!0),t=e}var i=new s;if(Object.keys(this).forEach(function(t){i[t]=this[t]},this),i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(i[e]=t[e])}),C[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i;if(t.protocol&&t.protocol!==i.protocol){if(!C[t.protocol])return Object.keys(t).forEach(function(e){i[e]=t[e]}),i.href=i.format(),i;if(i.protocol=t.protocol,t.host||T[t.protocol])i.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),i.pathname=o.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var r=i.pathname||"",n=i.search||"";i.path=r+n}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var a=i.pathname&&"/"===i.pathname.charAt(0),l=t.host||t.pathname&&"/"===t.pathname.charAt(0),d=l||a||i.host&&t.pathname,p=d,f=i.pathname&&i.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],m=i.protocol&&!C[i.protocol];if(m&&(i.hostname="",i.port=null,i.host&&(""===f[0]?f[0]=i.host:f.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),d=d&&(""===o[0]||""===f[0])),l)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,f=o;else if(o.length)f||(f=[]),f.pop(),f=f.concat(o),i.search=t.search,i.query=t.query;else if(!u(t.search)){if(m){i.hostname=i.host=f.shift();var g=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;g&&(i.auth=g.shift(),i.host=i.hostname=g.shift())}return i.search=t.search,i.query=t.query,c(i.pathname)&&c(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!f.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var v=f.slice(-1)[0],y=(i.host||t.host)&&("."===v||".."===v)||""===v,_=0,x=f.length;x>=0;x--)v=f[x],"."==v?f.splice(x,1):".."===v?(f.splice(x,1),_++):_&&(f.splice(x,1),_--);if(!d&&!p)for(;_--;_)f.unshift("..");!d||""===f[0]||f[0]&&"/"===f[0].charAt(0)||f.unshift(""),y&&"/"!==f.join("/").substr(-1)&&f.push("");var b=""===f[0]||f[0]&&"/"===f[0].charAt(0);if(m){i.hostname=i.host=b?"":f.length?f.shift():"";var g=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;g&&(i.auth=g.shift(),i.host=i.hostname=g.shift())}return d=d||i.host&&f.length,d&&!b&&f.unshift(""),f.length?i.pathname=f.join("/"):(i.pathname=null,i.path=null),c(i.pathname)&&c(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},s.prototype.parseHost=function(){var t=this.host,e=f.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:4,querystring:7}],9:[function(t,e,i){function s(t,e,i){i=i||2;var s=e&&e.length,r=s?e[0]*i:t.length,a=o(t,0,r,i,!0),h=[];if(!a)return h;var l,c,d,p,f,m,g;if(s&&(a=u(t,e,a,i)),t.length>80*i){l=d=t[0],c=p=t[1];for(var v=i;r>v;v+=i)f=t[v],m=t[v+1],l>f&&(l=f),c>m&&(c=m),f>d&&(d=f),m>p&&(p=m);g=Math.max(d-l,p-c)}return n(a,h,i,l,c,g),h}function o(t,e,i,s,o){var r,n;if(o===k(t,e,i,s)>0)for(r=e;i>r;r+=s)n=M(r,t[r],t[r+1],n);else for(r=i-s;r>=e;r-=s)n=M(r,t[r],t[r+1],n);return n&&w(n,n.next)&&(E(n),n=n.next),n}function r(t,e){if(!t)return t;e||(e=t);var i,s=t;do if(i=!1,s.steiner||!w(s,s.next)&&0!==b(s.prev,s,s.next))s=s.next;else{if(E(s),s=e=s.prev,s===s.next)return null;i=!0}while(i||s!==e);return e}function n(t,e,i,s,o,u,d){if(t){!d&&u&&m(t,s,o,u);for(var p,f,g=t;t.prev!==t.next;)if(p=t.prev,f=t.next,u?h(t,s,o,u):a(t))e.push(p.i/i),e.push(t.i/i),e.push(f.i/i),E(t),t=f.next,g=f.next;else if(t=f,t===g){d?1===d?(t=l(t,e,i),n(t,e,i,s,o,u,2)):2===d&&c(t,e,i,s,o,u):n(r(t),e,i,s,o,u,1);break}}}function a(t){var e=t.prev,i=t,s=t.next;if(b(e,i,s)>=0)return!1;for(var o=t.next.next;o!==t.prev;){if(_(e.x,e.y,i.x,i.y,s.x,s.y,o.x,o.y)&&b(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function h(t,e,i,s){var o=t.prev,r=t,n=t.next;if(b(o,r,n)>=0)return!1;for(var a=o.x<r.x?o.x<n.x?o.x:n.x:r.x<n.x?r.x:n.x,h=o.y<r.y?o.y<n.y?o.y:n.y:r.y<n.y?r.y:n.y,l=o.x>r.x?o.x>n.x?o.x:n.x:r.x>n.x?r.x:n.x,c=o.y>r.y?o.y>n.y?o.y:n.y:r.y>n.y?r.y:n.y,u=v(a,h,e,i,s),d=v(l,c,e,i,s),p=t.nextZ;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&_(o.x,o.y,r.x,r.y,n.x,n.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=u;){if(p!==t.prev&&p!==t.next&&_(o.x,o.y,r.x,r.y,n.x,n.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function l(t,e,i){var s=t;do{var o=s.prev,r=s.next.next;!w(o,r)&&S(o,s,s.next,r)&&C(o,r)&&C(r,o)&&(e.push(o.i/i),e.push(s.i/i),e.push(r.i/i),E(s),E(s.next),s=t=r),s=s.next}while(s!==t);return s}function c(t,e,i,s,o,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&x(h,l)){var c=A(h,l);return h=r(h,h.next),c=r(c,c.next),n(h,e,i,s,o,a),void n(c,e,i,s,o,a)}l=l.next}h=h.next}while(h!==t)}function u(t,e,i,s){var n,a,h,l,c,u=[];for(n=0,a=e.length;a>n;n++)h=e[n]*s,l=a-1>n?e[n+1]*s:t.length,c=o(t,h,l,s,!1),c===c.next&&(c.steiner=!0),u.push(y(c));for(u.sort(d),n=0;n<u.length;n++)p(u[n],i),i=r(i,i.next);return i}function d(t,e){return t.x-e.x}function p(t,e){if(e=f(t,e)){var i=A(e,t);r(i,i.next)}}function f(t,e){var i,s=e,o=t.x,r=t.y,n=-(1/0);do{if(r<=s.y&&r>=s.next.y){var a=s.x+(r-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(o>=a&&a>n){if(n=a,a===o){if(r===s.y)return s;if(r===s.next.y)return s.next}i=s.x<s.next.x?s:s.next}}s=s.next}while(s!==e);if(!i)return null;if(o===n)return i.prev;var h,l=i,c=i.x,u=i.y,d=1/0;for(s=i.next;s!==l;)o>=s.x&&s.x>=c&&_(u>r?o:n,r,c,u,u>r?n:o,r,s.x,s.y)&&(h=Math.abs(r-s.y)/(o-s.x),(d>h||h===d&&s.x>i.x)&&C(s,t)&&(i=s,d=h)),s=s.next;return i}function m(t,e,i,s){var o=t;do null===o.z&&(o.z=v(o.x,o.y,e,i,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,g(o)}function g(t){var e,i,s,o,r,n,a,h,l=1;do{for(i=t,t=null,r=null,n=0;i;){for(n++,s=i,a=0,e=0;l>e&&(a++,s=s.nextZ);e++);for(h=l;a>0||h>0&&s;)0===a?(o=s,s=s.nextZ,h--):0!==h&&s?i.z<=s.z?(o=i,i=i.nextZ,a--):(o=s,s=s.nextZ,h--):(o=i,i=i.nextZ,a--),r?r.nextZ=o:t=o,o.prevZ=r,r=o;i=s}r.nextZ=null,l*=2}while(n>1);return t}function v(t,e,i,s,o){return t=32767*(t-i)/o,e=32767*(e-s)/o,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function y(t){var e=t,i=t;do e.x<i.x&&(i=e),e=e.next;while(e!==t);return i}function _(t,e,i,s,o,r,n,a){return(o-n)*(e-a)-(t-n)*(r-a)>=0&&(t-n)*(s-a)-(i-n)*(e-a)>=0&&(i-n)*(r-a)-(o-n)*(s-a)>=0}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!T(t,e)&&C(t,e)&&C(e,t)&&P(t,e)}function b(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function S(t,e,i,s){return w(t,e)&&w(i,s)||w(t,s)&&w(i,e)?!0:b(t,e,i)>0!=b(t,e,s)>0&&b(i,s,t)>0!=b(i,s,e)>0}function T(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&S(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function C(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function P(t,e){var i=t,s=!1,o=(t.x+e.x)/2,r=(t.y+e.y)/2;do i.y>r!=i.next.y>r&&o<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next;while(i!==t);return s}function A(t,e){var i=new I(t.i,t.x,t.y),s=new I(e.i,e.x,e.y),o=t.next,r=e.prev;return t.next=e,e.prev=t,i.next=o,o.prev=i,s.next=i,i.prev=s,r.next=s,s.prev=r,s}function M(t,e,i,s){var o=new I(t,e,i);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function I(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(t,e,i,s){for(var o=0,r=e,n=i-s;i>r;r+=s)o+=(t[n]-t[r])*(t[r+1]+t[n+1]),n=r;return o}e.exports=s,s.deviation=function(t,e,i,s){var o=e&&e.length,r=o?e[0]*i:t.length,n=Math.abs(k(t,0,r,i));if(o)for(var a=0,h=e.length;h>a;a++){var l=e[a]*i,c=h-1>a?e[a+1]*i:t.length;n-=Math.abs(k(t,l,c,i))}var u=0;for(a=0;a<s.length;a+=3){var d=s[a]*i,p=s[a+1]*i,f=s[a+2]*i;u+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===n&&0===u?0:Math.abs((u-n)/n)},s.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},s=0,o=0;o<t.length;o++){for(var r=0;r<t[o].length;r++)for(var n=0;e>n;n++)i.vertices.push(t[o][r][n]);o>0&&(s+=t[o-1].length,i.holes.push(s))}return i}},{}],10:[function(t,e,i){function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(){}var r=Object.prototype.hasOwnProperty,n="function"!=typeof Object.create?"~":!1;o.prototype._events=void 0,o.prototype.eventNames=function(){var t,e=this._events,i=[];if(!e)return i;for(t in e)r.call(e,t)&&i.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(t,e){var i=n?n+t:t,s=this._events&&this._events[i];if(e)return!!s;if(!s)return[];if(s.fn)return[s.fn];for(var o=0,r=s.length,a=new Array(r);r>o;o++)a[o]=s[o].fn;return a},o.prototype.emit=function(t,e,i,s,o,r){var a=n?n+t:t;if(!this._events||!this._events[a])return!1;var h,l,c=this._events[a],u=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,s),!0;case 5:return c.fn.call(c.context,e,i,s,o),!0;case 6:return c.fn.call(c.context,e,i,s,o,r),!0}for(l=1,h=new Array(u-1);u>l;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var d,p=c.length;for(l=0;p>l;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;default:if(!h)for(d=1,h=new Array(u-1);u>d;d++)h[d-1]=arguments[d];c[l].fn.apply(c[l].context,h)}}return!0},o.prototype.on=function(t,e,i){var o=new s(e,i||this),r=n?n+t:t;return this._events||(this._events=n?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):this._events[r]=o,this},o.prototype.once=function(t,e,i){var o=new s(e,i||this,!0),r=n?n+t:t;return this._events||(this._events=n?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):this._events[r]=o,this},o.prototype.removeListener=function(t,e,i,s){var o=n?n+t:t;if(!this._events||!this._events[o])return this;var r=this._events[o],a=[];if(e)if(r.fn)(r.fn!==e||s&&!r.once||i&&r.context!==i)&&a.push(r);else for(var h=0,l=r.length;l>h;h++)(r[h].fn!==e||s&&!r[h].once||i&&r[h].context!==i)&&a.push(r[h]);return a.length?this._events[o]=1===a.length?a[0]:a:delete this._events[o],this},o.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[n?n+t:t]:this._events=n?{}:Object.create(null),this):this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=n,"undefined"!=typeof e&&(e.exports=o)},{}],11:[function(t,e,i){function s(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(t,e){for(var i,n,a=s(t),h=1;h<arguments.length;h++){i=Object(arguments[h]);for(var l in i)o.call(i,l)&&(a[l]=i[l]);if(Object.getOwnPropertySymbols){n=Object.getOwnPropertySymbols(i);for(var c=0;c<n.length;c++)r.call(i,n[c])&&(a[n[c]]=i[n[c]])}}return a}},{}],12:[function(e,i,s){(function(e){!function(){function s(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(o,arguments)}}var o,r,n={};o=this,null!=o&&(r=o.async),n.noConflict=function(){return o.async=r,n};var a=Object.prototype.toString,h=Array.isArray||function(t){return"[object Array]"===a.call(t)},l=function(t,e){for(var i=0;i<t.length;i+=1)e(t[i],i,t)},c=function(t,e){if(t.map)return t.map(e);var i=[];return l(t,function(t,s,o){i.push(e(t,s,o))}),i},u=function(t,e,i){return t.reduce?t.reduce(e,i):(l(t,function(t,s,o){i=e(i,t,s,o)}),i)},d=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e};"undefined"!=typeof e&&e.nextTick?(n.nextTick=e.nextTick,"undefined"!=typeof setImmediate?n.setImmediate=function(t){setImmediate(t)}:n.setImmediate=n.nextTick):"function"==typeof setImmediate?(n.nextTick=function(t){setImmediate(t)},n.setImmediate=n.nextTick):(n.nextTick=function(t){setTimeout(t,0)},n.setImmediate=n.nextTick),n.each=function(t,e,i){function o(e){e?(i(e),i=function(){}):(r+=1,r>=t.length&&i())}if(i=i||function(){},!t.length)return i();var r=0;l(t,function(t){e(t,s(o))})},n.forEach=n.each,n.eachSeries=function(t,e,i){if(i=i||function(){},!t.length)return i();var s=0,o=function(){e(t[s],function(e){e?(i(e),i=function(){}):(s+=1,s>=t.length?i():o())})};o()},n.forEachSeries=n.eachSeries,n.eachLimit=function(t,e,i,s){var o=p(e);o.apply(null,[t,i,s])},n.forEachLimit=n.eachLimit;var p=function(t){return function(e,i,s){if(s=s||function(){},!e.length||0>=t)return s();var o=0,r=0,n=0;!function a(){if(o>=e.length)return s();for(;t>n&&r<e.length;)r+=1,n+=1,i(e[r-1],function(t){t?(s(t),s=function(){}):(o+=1,n-=1,o>=e.length?s():a())})}()}},f=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[n.each].concat(e))}},m=function(t,e){return function(){var i=Array.prototype.slice.call(arguments);return e.apply(null,[p(t)].concat(i))}},g=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[n.eachSeries].concat(e))}},v=function(t,e,i,s){if(e=c(e,function(t,e){return{index:e,value:t}}),s){var o=[];t(e,function(t,e){i(t.value,function(i,s){o[t.index]=s,e(i)})},function(t){s(t,o)})}else t(e,function(t,e){i(t.value,function(t){e(t)})})};n.map=f(v),n.mapSeries=g(v),n.mapLimit=function(t,e,i,s){return y(e)(t,i,s)};var y=function(t){return m(t,v)};n.reduce=function(t,e,i,s){n.eachSeries(t,function(t,s){i(e,t,function(t,i){e=i,s(t)})},function(t){s(t,e)})},n.inject=n.reduce,n.foldl=n.reduce,n.reduceRight=function(t,e,i,s){var o=c(t,function(t){return t}).reverse();n.reduce(o,e,i,s)},n.foldr=n.reduceRight;var _=function(t,e,i,s){var o=[];e=c(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){i(t.value,function(i){i&&o.push(t),e()})},function(t){s(c(o.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};n.filter=f(_),n.filterSeries=g(_),n.select=n.filter,n.selectSeries=n.filterSeries;var x=function(t,e,i,s){var o=[];e=c(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){i(t.value,function(i){i||o.push(t),e()})},function(t){s(c(o.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};n.reject=f(x),n.rejectSeries=g(x);var b=function(t,e,i,s){t(e,function(t,e){i(t,function(i){i?(s(t),s=function(){}):e()})},function(t){s()})};n.detect=f(b),n.detectSeries=g(b),n.some=function(t,e,i){n.each(t,function(t,s){e(t,function(t){t&&(i(!0),i=function(){}),s()})},function(t){i(!1)})},n.any=n.some,n.every=function(t,e,i){n.each(t,function(t,s){e(t,function(t){t||(i(!1),i=function(){}),s()})},function(t){i(!0)})},n.all=n.every,n.sortBy=function(t,e,i){n.map(t,function(t,i){e(t,function(e,s){e?i(e):i(null,{value:t,criteria:s})})},function(t,e){if(t)return i(t);var s=function(t,e){var i=t.criteria,s=e.criteria;return s>i?-1:i>s?1:0};i(null,c(e.sort(s),function(t){return t.value}))})},n.auto=function(t,e){e=e||function(){};var i=d(t),s=i.length;if(!s)return e();var o={},r=[],a=function(t){r.unshift(t)},c=function(t){for(var e=0;e<r.length;e+=1)if(r[e]===t)return void r.splice(e,1)},p=function(){s--,l(r.slice(0),function(t){t()})};a(function(){if(!s){var t=e;e=function(){},t(null,o)}}),l(i,function(i){var s=h(t[i])?t[i]:[t[i]],r=function(t){var s=Array.prototype.slice.call(arguments,1);if(s.length<=1&&(s=s[0]),t){var r={};l(d(o),function(t){r[t]=o[t]}),r[i]=s,e(t,r),e=function(){}}else o[i]=s,n.setImmediate(p)},f=s.slice(0,Math.abs(s.length-1))||[],m=function(){return u(f,function(t,e){return t&&o.hasOwnProperty(e)},!0)&&!o.hasOwnProperty(i)};if(m())s[s.length-1](r,o);else{var g=function(){m()&&(c(g),s[s.length-1](r,o))};a(g)}})},n.retry=function(t,e,i){var s=5,o=[];"function"==typeof t&&(i=e,e=t,t=s),t=parseInt(t,10)||s;var r=function(s,r){for(var a=function(t,e){return function(i){t(function(t,s){i(!t||e,{err:t,result:s})},r)}};t;)o.push(a(e,!(t-=1)));n.series(o,function(t,e){e=e[e.length-1],(s||i)(e.err,e.result)})};return i?r():r},n.waterfall=function(t,e){if(e=e||function(){},!h(t)){var i=new Error("First argument to waterfall must be an array of functions");return e(i)}if(!t.length)return e();var s=function(t){return function(i){if(i)e.apply(null,arguments),e=function(){};else{var o=Array.prototype.slice.call(arguments,1),r=t.next();r?o.push(s(r)):o.push(e),n.setImmediate(function(){t.apply(null,o)})}}};s(n.iterator(t))()};var w=function(t,e,i){if(i=i||function(){},h(e))t.map(e,function(t,e){t&&t(function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e.call(null,t,i)})},i);else{var s={};t.each(d(e),function(t,i){e[t](function(e){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),s[t]=o,i(e)})},function(t){i(t,s)})}};n.parallel=function(t,e){w({map:n.map,each:n.each},t,e)},n.parallelLimit=function(t,e,i){w({map:y(e),each:p(e)},t,i)},n.series=function(t,e){if(e=e||function(){},h(t))n.mapSeries(t,function(t,e){t&&t(function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e.call(null,t,i)})},e);else{var i={};n.eachSeries(d(t),function(e,s){t[e](function(t){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),i[e]=o,s(t)})},function(t){e(t,i)})}},n.iterator=function(t){var e=function(i){var s=function(){return t.length&&t[i].apply(null,arguments),s.next()};return s.next=function(){return i<t.length-1?e(i+1):null},s};return e(0)},n.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var S=function(t,e,i,s){var o=[];t(e,function(t,e){i(t,function(t,i){o=o.concat(i||[]),e(t)})},function(t){s(t,o)})};n.concat=f(S),n.concatSeries=g(S),n.whilst=function(t,e,i){t()?e(function(s){return s?i(s):void n.whilst(t,e,i)}):i()},n.doWhilst=function(t,e,i){t(function(s){if(s)return i(s);var o=Array.prototype.slice.call(arguments,1);e.apply(null,o)?n.doWhilst(t,e,i):i()})},n.until=function(t,e,i){t()?i():e(function(s){return s?i(s):void n.until(t,e,i)})},n.doUntil=function(t,e,i){t(function(s){if(s)return i(s);var o=Array.prototype.slice.call(arguments,1);e.apply(null,o)?i():n.doUntil(t,e,i)})},n.queue=function(t,e){function i(t,e,i,s){return t.started||(t.started=!0),h(e)||(e=[e]),0==e.length?n.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var o={data:e,callback:"function"==typeof s?s:null};i?t.tasks.unshift(o):t.tasks.push(o),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),n.setImmediate(t.process)})}void 0===e&&(e=1);var o=0,r={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){i(r,t,!1,e)},kill:function(){r.drain=null,r.tasks=[]},unshift:function(t,e){i(r,t,!0,e)},process:function(){if(!r.paused&&o<r.concurrency&&r.tasks.length){var e=r.tasks.shift();r.empty&&0===r.tasks.length&&r.empty(),o+=1;var i=function(){o-=1,e.callback&&e.callback.apply(e,arguments),r.drain&&r.tasks.length+o===0&&r.drain(),r.process()},n=s(i);t(e.data,n)}},length:function(){return r.tasks.length},running:function(){return o},idle:function(){return r.tasks.length+o===0},pause:function(){r.paused!==!0&&(r.paused=!0)},resume:function(){if(r.paused!==!1){r.paused=!1;for(var t=1;t<=r.concurrency;t++)n.setImmediate(r.process)}}};return r},n.priorityQueue=function(t,e){function i(t,e){return t.priority-e.priority}function s(t,e,i){for(var s=-1,o=t.length-1;o>s;){var r=s+(o-s+1>>>1);i(e,t[r])>=0?s=r:o=r-1}return s}function o(t,e,o,r){return t.started||(t.started=!0),h(e)||(e=[e]),0==e.length?n.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var a={data:e,priority:o,callback:"function"==typeof r?r:null};t.tasks.splice(s(t.tasks,a,i)+1,0,a),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),n.setImmediate(t.process)})}var r=n.queue(t,e);return r.push=function(t,e,i){o(r,t,e,i)},delete r.unshift,r},n.cargo=function(t,e){var i=!1,s=[],o={tasks:s,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,i){h(t)||(t=[t]),l(t,function(t){s.push({data:t,callback:"function"==typeof i?i:null}),o.drained=!1,o.saturated&&s.length===e&&o.saturated()}),n.setImmediate(o.process)},process:function r(){if(!i){if(0===s.length)return o.drain&&!o.drained&&o.drain(),void(o.drained=!0);var n="number"==typeof e?s.splice(0,e):s.splice(0,s.length),a=c(n,function(t){return t.data});o.empty&&o.empty(),i=!0,t(a,function(){i=!1;var t=arguments;l(n,function(e){e.callback&&e.callback.apply(null,t)}),r()})}},length:function(){return s.length},running:function(){return i}};return o};var T=function(t){return function(e){var i=Array.prototype.slice.call(arguments,1);e.apply(null,i.concat([function(e){var i=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&void 0:console[t]&&l(i,function(t){}))}]))}};n.log=T("log"),n.dir=T("dir"),n.memoize=function(t,e){var i={},s={};e=e||function(t){return t};var o=function(){var o=Array.prototype.slice.call(arguments),r=o.pop(),a=e.apply(null,o);a in i?n.nextTick(function(){r.apply(null,i[a])}):a in s?s[a].push(r):(s[a]=[r],t.apply(null,o.concat([function(){i[a]=arguments;var t=s[a];delete s[a];for(var e=0,o=t.length;o>e;e++)t[e].apply(null,arguments)}])))};return o.memo=i,o.unmemoized=t,o},n.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},n.times=function(t,e,i){for(var s=[],o=0;t>o;o++)s.push(o);return n.map(s,e,i)},n.timesSeries=function(t,e,i){for(var s=[],o=0;t>o;o++)s.push(o);return n.mapSeries(s,e,i)},n.seq=function(){var t=arguments;return function(){var e=this,i=Array.prototype.slice.call(arguments),s=i.pop();n.reduce(t,i,function(t,i,s){i.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);s(t,e)}]))},function(t,i){s.apply(e,[t].concat(i))})}},n.compose=function(){return n.seq.apply(null,Array.prototype.reverse.call(arguments))};var C=function(t,e){var i=function(){var i=this,s=Array.prototype.slice.call(arguments),o=s.pop();return t(e,function(t,e){t.apply(i,s.concat([e]))},o)};if(arguments.length>2){var s=Array.prototype.slice.call(arguments,2);return i.apply(this,s)}return i};n.applyEach=f(C),n.applyEachSeries=g(C),n.forever=function(t,e){function i(s){if(s){if(e)return e(s);throw s}t(i)}i()},"undefined"!=typeof i&&i.exports?i.exports=n:"undefined"!=typeof t&&t.amd?t([],function(){return n}):o.async=n}()}).call(this,e("_process"))},{_process:3}],13:[function(t,e,i){function s(t,e){a.call(this),e=e||10,this.baseUrl=t||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._boundOnLoad=this._onLoad.bind(this),this._buffer=[],this._numToLoad=0,this._queue=o.queue(this._boundLoadResource,e),this.resources={}}var o=t("async"),r=t("url"),n=t("./Resource"),a=t("eventemitter3");s.prototype=Object.create(a.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.add=s.prototype.enqueue=function(t,e,i,s){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if("object"==typeof t&&(s=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(s=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(s=i,i=null),this.resources[t])throw new Error('Resource with name "'+t+'" already exists.');return e=this._handleBaseUrl(e),this.resources[t]=new n(t,e,i),"function"==typeof s&&this.resources[t].once("afterMiddleware",s),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[t]),this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[t]),this._progressChunk=100/this._buffer.length),this},s.prototype._handleBaseUrl=function(t){var e=r.parse(t);return e.protocol||0===e.pathname.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t},s.prototype.before=s.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},s.prototype.after=s.prototype.use=function(t){return this._afterMiddleware.push(t),this},s.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1,this.resources={}},s.prototype.load=function(t){if("function"==typeof t&&this.once("complete",t),this._queue.started)return this;this.emit("start",this);for(var e=0;e<this._buffer.length;++e)this._queue.push(this._buffer[e]);return this._buffer.length=0,this},s.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,this._runMiddleware(t,this._beforeMiddleware,function(){t.load(i._boundOnLoad)})},s.prototype._onComplete=function(){this.emit("complete",this,this.resources)},s.prototype._onLoad=function(t){this.progress+=this._progressChunk,this.emit("progress",this,t),this._runMiddleware(t,this._afterMiddleware,function(){t.emit("afterMiddleware",t),this._numToLoad--,0===this._numToLoad&&(this.progress=100,this._onComplete()),t.error?this.emit("error",t.error,this,t):this.emit("load",this,t)}),t._dequeue()},s.prototype._runMiddleware=function(t,e,i){var s=this;o.eachSeries(e,function(e,i){e.call(s,t,i)},i.bind(this,t))},s.LOAD_TYPE=n.LOAD_TYPE,s.XHR_READY_STATE=n.XHR_READY_STATE,s.XHR_RESPONSE_TYPE=n.XHR_RESPONSE_TYPE},{"./Resource":14,async:12,eventemitter3:10,url:8}],14:[function(t,e,i){function s(t,e,i){if(n.call(this),i=i||{},"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");this.name=t,this.url=e,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function o(t){return t.toString().replace("object ","")}function r(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}var n=t("eventemitter3"),a=t("url"),h=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;s.prototype=Object.create(n.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.emit("complete",this)},s.prototype.load=function(t){switch(this.emit("start",this),t&&this.once("complete",t),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case s.LOAD_TYPE.IMAGE:this._loadImage();break;case s.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case s.LOAD_TYPE.VIDEO:this._loadElement("video");break;case s.LOAD_TYPE.XHR:default:h&&this.crossOrigin?this._loadXdr():this._loadXhr()}},s.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.data.src=this.url,this.isImage=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},s.prototype._loadElement=function(t){if("audio"===t&&"undefined"!=typeof Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return this.error=new Error("Unsupported element "+t),void this.complete();if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this["is"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},s.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=s.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},s.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){t.send()},0)},s.prototype._createSource=function(t,e,i){i||(i=t+"/"+e.substr(e.lastIndexOf(".")+1));var s=document.createElement("source");return s.src=e,s.type=i,s},s.prototype._onError=function(t){this.error=new Error("Failed to load element using "+t.target.nodeName),this.complete()},s.prototype._onProgress=function(t){t&&t.lengthComputable&&this.emit("progress",this,t.loaded/t.total)},s.prototype._xhrOnError=function(){this.error=new Error(o(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"'),this.complete()},s.prototype._xhrOnAbort=function(){this.error=new Error(o(this.xhr)+" Request was aborted by the user."),this.complete()},s.prototype._xdrOnTimeout=function(){this.error=new Error(o(this.xhr)+" Request timed out."),this.complete()},s.prototype._xhrOnLoad=function(){var t=this.xhr,e=void 0!==t.status?t.status:200;
if(200===e||204===e||0===e&&t.responseText.length>0)if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText;else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.isJson=!0}catch(i){this.error=new Error("Error trying to parse loaded json:",i)}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var o=new DOMParser;this.data=o.parseFromString(t.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=t.responseText,this.data=r}this.isXml=!0}catch(i){this.error=new Error("Error trying to parse loaded xml:",i)}else this.data=t.response||t.responseText;else this.error=new Error("["+t.status+"]"+t.statusText+":"+t.responseURL);this.complete()},s.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,l||(l=document.createElement("a")),l.href=t,t=a.parse(l.href);var i=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"},s.prototype._determineXhrType=function(){return s._xhrTypeMap[this._getExtension()]||s.XHR_RESPONSE_TYPE.TEXT},s.prototype._determineLoadType=function(){return s._loadTypeMap[this._getExtension()]||s.LOAD_TYPE.XHR},s.prototype._getExtension=function(){var t,e=this.url;if(this.isDataUrl){var i=e.indexOf("/");t=e.substring(i+1,e.indexOf(";",i))}else{var s=e.indexOf("?");-1!==s&&(e=e.substring(0,s)),t=e.substring(e.lastIndexOf(".")+1)}return t},s.prototype._getMimeFromXhrType=function(t){switch(t){case s.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case s.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case s.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case s.XHR_RESPONSE_TYPE.JSON:return"application/json";case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},s.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},s.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},s.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},s._loadTypeMap={gif:s.LOAD_TYPE.IMAGE,png:s.LOAD_TYPE.IMAGE,bmp:s.LOAD_TYPE.IMAGE,jpg:s.LOAD_TYPE.IMAGE,jpeg:s.LOAD_TYPE.IMAGE,tif:s.LOAD_TYPE.IMAGE,tiff:s.LOAD_TYPE.IMAGE,webp:s.LOAD_TYPE.IMAGE,tga:s.LOAD_TYPE.IMAGE},s._xhrTypeMap={xhtml:s.XHR_RESPONSE_TYPE.DOCUMENT,html:s.XHR_RESPONSE_TYPE.DOCUMENT,htm:s.XHR_RESPONSE_TYPE.DOCUMENT,xml:s.XHR_RESPONSE_TYPE.DOCUMENT,tmx:s.XHR_RESPONSE_TYPE.DOCUMENT,tsx:s.XHR_RESPONSE_TYPE.DOCUMENT,svg:s.XHR_RESPONSE_TYPE.DOCUMENT,gif:s.XHR_RESPONSE_TYPE.BLOB,png:s.XHR_RESPONSE_TYPE.BLOB,bmp:s.XHR_RESPONSE_TYPE.BLOB,jpg:s.XHR_RESPONSE_TYPE.BLOB,jpeg:s.XHR_RESPONSE_TYPE.BLOB,tif:s.XHR_RESPONSE_TYPE.BLOB,tiff:s.XHR_RESPONSE_TYPE.BLOB,webp:s.XHR_RESPONSE_TYPE.BLOB,tga:s.XHR_RESPONSE_TYPE.BLOB,json:s.XHR_RESPONSE_TYPE.JSON,text:s.XHR_RESPONSE_TYPE.TEXT,txt:s.XHR_RESPONSE_TYPE.TEXT},s.setExtensionLoadType=function(t,e){r(s._loadTypeMap,t,e)},s.setExtensionXhrType=function(t,e){r(s._xhrTypeMap,t,e)}},{eventemitter3:10,url:8}],15:[function(t,e,i){e.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(t){for(var e,i="",s=new Array(4),o=0,r=0,n=0;o<t.length;){for(e=new Array(3),r=0;r<e.length;r++)o<t.length?e[r]=255&t.charCodeAt(o++):e[r]=0;switch(s[0]=e[0]>>2,s[1]=(3&e[0])<<4|e[1]>>4,s[2]=(15&e[1])<<2|e[2]>>6,s[3]=63&e[2],n=o-(t.length-1)){case 2:s[3]=64,s[2]=64;break;case 1:s[3]=64}for(r=0;r<s.length;r++)i+=this._keyStr.charAt(s[r])}return i}}},{}],16:[function(t,e,i){e.exports=t("./Loader"),e.exports.Resource=t("./Resource"),e.exports.middleware={caching:{memory:t("./middlewares/caching/memory")},parsing:{blob:t("./middlewares/parsing/blob")}}},{"./Loader":13,"./Resource":14,"./middlewares/caching/memory":17,"./middlewares/parsing/blob":18}],17:[function(t,e,i){var s={};e.exports=function(){return function(t,e){s[t.url]?(t.data=s[t.url],t.complete()):t.once("complete",function(){s[this.url]=this.data}),e()}}},{}],18:[function(t,e,i){var s=t("../../Resource"),o=t("../../b64");window.URL=window.URL||window.webkitURL,e.exports=function(){return function(t,e){if(!t.data)return e();if(t.xhr&&t.xhrType===s.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=URL.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=i,t.isImage=!0,t.data.onload=function(){URL.revokeObjectURL(i),t.data.onload=null,e()}}}else{var r=t.xhr.getResponseHeader("content-type");r&&0===r.indexOf("image")&&(t.data=new Image,t.data.src="data:"+r+";base64,"+o.encodeBinary(t.xhr.responseText),t.isImage=!0,t.data.onload=function(){t.data.onload=null,e()})}else e()}}},{"../../Resource":14,"../../b64":15}],19:[function(t,e,i){function s(t){var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,window.addEventListener("keydown",this._onKeyDown,!1)}var o=t("../core");Object.assign(o.DisplayObject.prototype,t("./accessibleTarget")),s.prototype.constructor=s,e.exports=s,s.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode.appendChild(this.div))},s.prototype.deactivate=function(){this.isActive&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode.removeChild(this.div))},s.prototype.updateAccessibleObjects=function(t){if(t.visible&&(t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId),t.interactiveChildren))for(var e=t.children,i=e.length-1;i>=0;i--)this.updateAccessibleObjects(e[i])},s.prototype.update=function(){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,s=this.div;s.style.left=t.left+"px",s.style.top=t.top+"px",s.style.width=this.renderer.width+"px",s.style.height=this.renderer.height+"px";for(var r=0;r<this.children.length;r++){var n=this.children[r];if(n.renderId!==this.renderId)n._accessibleActive=!1,o.utils.removeItems(this.children,r,1),this.div.removeChild(n._accessibleDiv),this.pool.push(n._accessibleDiv),n._accessibleDiv=null,r--,0===this.children.length&&this.deactivate();else{s=n._accessibleDiv;var a=n.hitArea,h=n.worldTransform;n.hitArea?(s.style.left=(h.tx+a.x*h.a)*e+"px",s.style.top=(h.ty+a.y*h.d)*i+"px",s.style.width=a.width*h.a*e+"px",s.style.height=a.height*h.d*i+"px"):(a=n.getBounds(),this.capHitArea(a),s.style.left=a.x*e+"px",s.style.top=a.y*i+"px",s.style.width=a.width*e+"px",s.style.height=a.height*i+"px")}}this.renderId++},s.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},s.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.title=t.accessibleTitle||"displayObject "+this.tabIndex,t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},s.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},s.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},s.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},s.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},s.prototype._onMouseMove=function(){this.deactivate()},s.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},o.WebGLRenderer.registerPlugin("accessibility",s),o.CanvasRenderer.registerPlugin("accessibility",s)},{"../core":29,"./accessibleTarget":20}],20:[function(t,e,i){var s={accessible:!1,accessibleTitle:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};e.exports=s},{}],21:[function(t,e,i){e.exports={accessibleTarget:t("./accessibleTarget"),AccessibilityManager:t("./AccessibilityManager")}},{"./AccessibilityManager":19,"./accessibleTarget":20}],22:[function(t,e,i){var s={VERSION:"3.0.11",PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};e.exports=s},{}],23:[function(t,e,i){function s(){n.call(this),this.children=[]}var o=t("../math"),r=t("../utils"),n=t("./DisplayObject"),a=t("../textures/RenderTexture"),h=new o.Matrix;s.prototype=Object.create(n.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;0!==e?this.scale.x=t/e:this.scale.x=1,this._width=t}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;0!==e?this.scale.y=t/e:this.scale.y=1,this._height=t}}}),s.prototype.onChildrenChange=function(){},s.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;e>i;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},s.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.onChildrenChange(e),t.emit("added",this),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},s.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),s=this.getChildIndex(e);if(0>i||0>s)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[i]=e,this.children[s]=t,this.onChildrenChange(s>i?i:s)}},s.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},s.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);r.removeItems(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},s.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[t]},s.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;e>i;i++)this.removeChild(arguments[i]);else{var s=this.children.indexOf(t);if(-1===s)return;t.parent=null,r.removeItems(this.children,s,1),this.onChildrenChange(s),t.emit("removed",this)}return t},s.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,r.removeItems(this.children,t,1),this.onChildrenChange(t),e.emit("removed",this),e},s.prototype.removeChildren=function(t,e){var i,s,o=t||0,r="number"==typeof e?e:this.children.length,n=r-o;if(n>0&&r>=n){for(i=this.children.splice(o,n),s=0;s<i.length;++s)i[s].parent=null;for(this.onChildrenChange(t),s=0;s<i.length;++s)i[s].emit("removed",this);return i}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},s.prototype.generateTexture=function(t,e,i){var s=this.getLocalBounds(),o=new a(t,0|s.width,0|s.height,i,e);return h.tx=-s.x,h.ty=-s.y,o.render(this,h),o},s.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var t=0,e=this.children.length;e>t;++t)this.children[t].updateTransform()}},s.prototype.containerUpdateTransform=s.prototype.updateTransform,s.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return o.Rectangle.EMPTY;for(var t,e,i,s=1/0,r=1/0,n=-(1/0),a=-(1/0),h=!1,l=0,c=this.children.length;c>l;++l){var u=this.children[l];u.visible&&(h=!0,t=this.children[l].getBounds(),s=s<t.x?s:t.x,r=r<t.y?r:t.y,e=t.width+t.x,i=t.height+t.y,n=n>e?n:e,a=a>i?a:i)}if(!h)return o.Rectangle.EMPTY;var d=this._bounds;d.x=s,d.y=r,d.width=n-s,d.height=a-r,this._currentBounds=d}return this._currentBounds},s.prototype.containerGetBounds=s.prototype.getBounds,s.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=o.Matrix.IDENTITY;for(var e=0,i=this.children.length;i>e;++e)this.children[e].updateTransform();return this.worldTransform=t,this._currentBounds=null,this.getBounds(o.Matrix.IDENTITY)},s.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var e,i;if(this._mask||this._filters){for(t.currentRenderer.flush(),this._filters&&this._filters.length&&t.filterManager.pushFilter(this,this._filters),this._mask&&t.maskManager.pushMask(this,this._mask),t.currentRenderer.start(),this._renderWebGL(t),e=0,i=this.children.length;i>e;e++)this.children[e].renderWebGL(t);t.currentRenderer.flush(),this._mask&&t.maskManager.popMask(this,this._mask),this._filters&&t.filterManager.popFilter(),t.currentRenderer.start()}else for(this._renderWebGL(t),e=0,i=this.children.length;i>e;++e)this.children[e].renderWebGL(t)}},s.prototype._renderWebGL=function(t){},s.prototype._renderCanvas=function(t){},s.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask,t),this._renderCanvas(t);for(var e=0,i=this.children.length;i>e;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},s.prototype.destroy=function(t){if(n.prototype.destroy.call(this),t)for(var e=0,i=this.children.length;i>e;++e)this.children[e].destroy(t);this.removeChildren(),this.children=null}},{"../math":33,"../textures/RenderTexture":71,"../utils":77,"./DisplayObject":24}],24:[function(t,e,i){function s(){n.call(this),this.position=new o.Point,this.scale=new o.Point(1,1),this.pivot=new o.Point(0,0),this.skew=new o.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new o.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new o.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null}var o=t("../math"),r=t("../textures/RenderTexture"),n=t("eventemitter3"),a=t("../const"),h=new o.Matrix,l={worldTransform:new o.Matrix,worldAlpha:1,children:[]};s.prototype=Object.create(n.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},worldVisible:{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},mask:{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}}),s.prototype.updateTransform=function(){var t,e,i,s,o,r,n=this.parent.worldTransform,l=this.worldTransform;this.skew.x||this.skew.y?(h.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,this.skew.x,this.skew.y),l.a=h.a*n.a+h.b*n.c,l.b=h.a*n.b+h.b*n.d,l.c=h.c*n.a+h.d*n.c,l.d=h.c*n.b+h.d*n.d,l.tx=h.tx*n.a+h.ty*n.c+n.tx,l.ty=h.tx*n.b+h.ty*n.d+n.ty):this.rotation%a.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,i=-this._sr*this.scale.y,s=this._cr*this.scale.y,o=this.position.x,r=this.position.y,(this.pivot.x||this.pivot.y)&&(o-=this.pivot.x*t+this.pivot.y*i,r-=this.pivot.x*e+this.pivot.y*s),l.a=t*n.a+e*n.c,l.b=t*n.b+e*n.d,l.c=i*n.a+s*n.c,l.d=i*n.b+s*n.d,l.tx=o*n.a+r*n.c+n.tx,l.ty=o*n.b+r*n.d+n.ty):(t=this.scale.x,s=this.scale.y,o=this.position.x-this.pivot.x*t,r=this.position.y-this.pivot.y*s,l.a=t*n.a,l.b=t*n.b,l.c=s*n.c,l.d=s*n.d,l.tx=o*n.a+r*n.c+n.tx,l.ty=o*n.b+r*n.d+n.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},s.prototype.displayObjectUpdateTransform=s.prototype.updateTransform,s.prototype.getBounds=function(t){return o.Rectangle.EMPTY},s.prototype.getLocalBounds=function(){return this.getBounds(o.Matrix.IDENTITY)},s.prototype.toGlobal=function(t){return this.parent?this.displayObjectUpdateTransform():(this.parent=l,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.apply(t)},s.prototype.toLocal=function(t,e,i){return e&&(t=e.toGlobal(t)),this.parent?this.displayObjectUpdateTransform():(this.parent=l,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.applyInverse(t,i)},s.prototype.renderWebGL=function(t){},s.prototype.renderCanvas=function(t){},s.prototype.generateTexture=function(t,e,i){var s=this.getLocalBounds(),o=new r(t,0|s.width,0|s.height,e,i);return h.tx=-s.x,h.ty=-s.y,o.render(this,h),o},s.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},s.prototype.setTransform=function(t,e,i,s,o,r,n,a,h){return this.position.x=t||0,this.position.y=e||0,this.scale.x=i?i:1,this.scale.y=s?s:1,this.rotation=o||0,this.skew.x=r||0,this.skew.y=n||0,this.pivot.x=a||0,this.pivot.y=h||0,this},s.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.skew=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},{"../const":22,"../math":33,"../textures/RenderTexture":71,eventemitter3:10}],25:[function(t,e,i){function s(){o.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=c.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new l.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var o=t("../display/Container"),r=t("../textures/Texture"),n=t("../renderers/canvas/utils/CanvasBuffer"),a=t("../renderers/canvas/utils/CanvasGraphics"),h=t("./GraphicsData"),l=t("../math"),c=t("../const"),u=new l.Point;s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.clone=function(){var t=new s;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=!0,t.glDirty=!0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},s.prototype.lineStyle=function(t,e,i){if(this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=void 0===i?1:i,this.currentPath)if(this.currentPath.shape.points.length){var s=new l.Polygon(this.currentPath.shape.points.slice(-2));s.closed=!1,this.drawShape(s)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},s.prototype.moveTo=function(t,e){var i=new l.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},s.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},s.prototype.quadraticCurveTo=function(t,e,i,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o,r,n=20,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var h=a[a.length-2],l=a[a.length-1],c=0,u=1;n>=u;++u)c=u/n,o=h+(t-h)*c,r=l+(e-l)*c,a.push(o+(t+(i-t)*c-o)*c,r+(e+(s-e)*c-r)*c);return this.dirty=this.boundsDirty=!0,this},s.prototype.bezierCurveTo=function(t,e,i,s,o,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var n,a,h,l,c,u=20,d=this.currentPath.shape.points,p=d[d.length-2],f=d[d.length-1],m=0,g=1;u>=g;++g)m=g/u,n=1-m,a=n*n,h=a*n,l=m*m,c=l*m,d.push(h*p+3*a*m*t+3*n*l*i+c*o,h*f+3*a*m*e+3*n*l*s+c*r);return this.dirty=this.boundsDirty=!0,this},s.prototype.arcTo=function(t,e,i,s,o){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var r=this.currentPath.shape.points,n=r[r.length-2],a=r[r.length-1],h=a-e,l=n-t,c=s-e,u=i-t,d=Math.abs(h*u-l*c);if(1e-8>d||0===o)r[r.length-2]===t&&r[r.length-1]===e||r.push(t,e);else{var p=h*h+l*l,f=c*c+u*u,m=h*c+l*u,g=o*Math.sqrt(p)/d,v=o*Math.sqrt(f)/d,y=g*m/p,_=v*m/f,x=g*u+v*l,b=g*c+v*h,w=l*(v+y),S=h*(v+y),T=u*(g+_),C=c*(g+_),P=Math.atan2(S-b,w-x),A=Math.atan2(C-b,T-x);this.arc(x+t,b+e,o,P,A,l*c>u*h)}return this.dirty=this.boundsDirty=!0,this},s.prototype.arc=function(t,e,i,s,o,r){if(r=r||!1,s===o)return this;!r&&s>=o?o+=2*Math.PI:r&&o>=s&&(s+=2*Math.PI);var n=r?-1*(s-o):o-s,a=40*Math.ceil(Math.abs(n)/(2*Math.PI));if(0===n)return this;var h=t+Math.cos(s)*i,l=e+Math.sin(s)*i;this.currentPath?this.currentPath.shape.points.push(h,l):this.moveTo(h,l);for(var c=this.currentPath.shape.points,u=n/(2*a),d=2*u,p=Math.cos(u),f=Math.sin(u),m=a-1,g=m%1/m,v=0;m>=v;v++){var y=v+g*v,_=u+s+d*y,x=Math.cos(_),b=-Math.sin(_);c.push((p*x+f*b)*i+t,(p*-b+f*x)*i+e)}return this.dirty=this.boundsDirty=!0,this},s.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},s.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},s.prototype.drawRect=function(t,e,i,s){return this.drawShape(new l.Rectangle(t,e,i,s)),this},s.prototype.drawRoundedRect=function(t,e,i,s,o){return this.drawShape(new l.RoundedRectangle(t,e,i,s,o)),this},s.prototype.drawCircle=function(t,e,i){return this.drawShape(new l.Circle(t,e,i)),this},s.prototype.drawEllipse=function(t,e,i,s){return this.drawShape(new l.Ellipse(t,e,i,s)),this},s.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof l.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var s=0;s<e.length;++s)e[s]=arguments[s]}var o=new l.Polygon(e);return o.closed=i,this.drawShape(o),this},s.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},s.prototype.generateTexture=function(t,e,i){e=e||1;var s=this.getLocalBounds(),o=new n(s.width*e,s.height*e),h=r.fromCanvas(o.canvas,i);return h.baseTexture.resolution=e,o.context.scale(e,e),o.context.translate(-s.x,-s.y),a.renderGraphics(this,o.context),h},s.prototype._renderWebGL=function(t){this.glDirty&&(this.dirty=!0,this.glDirty=!1),t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this)},s.prototype._renderCanvas=function(t){if(this.isMask!==!0){this._prevTint!==this.tint&&(this.dirty=!0);var e=t.context,i=this.worldTransform,s=t.blendModes[this.blendMode];s!==e.globalCompositeOperation&&(e.globalCompositeOperation=s);var o=t.resolution;e.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),a.renderGraphics(this,e)}},s.prototype.getBounds=function(t){if(!this._currentBounds){if(!this.renderable)return l.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var e=this._localBounds,i=e.x,s=e.width+e.x,o=e.y,r=e.height+e.y,n=t||this.worldTransform,a=n.a,h=n.b,c=n.c,u=n.d,d=n.tx,p=n.ty,f=a*s+c*r+d,m=u*r+h*s+p,g=a*i+c*r+d,v=u*r+h*i+p,y=a*i+c*o+d,_=u*o+h*i+p,x=a*s+c*o+d,b=u*o+h*s+p,w=f,S=m,T=f,C=m;T=T>g?g:T,T=T>y?y:T,T=T>x?x:T,C=C>v?v:C,C=C>_?_:C,C=C>b?b:C,w=g>w?g:w,w=y>w?y:w,w=x>w?x:w,S=v>S?v:S,S=_>S?_:S,S=b>S?b:S,this._bounds.x=T,this._bounds.width=w-T,this._bounds.y=C,this._bounds.height=S-C,this._currentBounds=this._bounds}return this._currentBounds},s.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,u);for(var e=this.graphicsData,i=0;i<e.length;i++){var s=e[i];if(s.fill&&s.shape&&s.shape.contains(u.x,u.y))return!0}return!1},s.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),i=1/0,s=-(1/0);if(this.graphicsData.length)for(var o,r,n,a,h,l,u=0;u<this.graphicsData.length;u++){var d=this.graphicsData[u],p=d.type,f=d.lineWidth;if(o=d.shape,p===c.SHAPES.RECT||p===c.SHAPES.RREC)n=o.x-f/2,a=o.y-f/2,h=o.width+f,l=o.height+f,t=t>n?n:t,e=n+h>e?n+h:e,i=i>a?a:i,s=a+l>s?a+l:s;else if(p===c.SHAPES.CIRC)n=o.x,a=o.y,h=o.radius+f/2,l=o.radius+f/2,t=t>n-h?n-h:t,e=n+h>e?n+h:e,i=i>a-l?a-l:i,s=a+l>s?a+l:s;else if(p===c.SHAPES.ELIP)n=o.x,a=o.y,h=o.width+f/2,l=o.height+f/2,t=t>n-h?n-h:t,e=n+h>e?n+h:e,i=i>a-l?a-l:i,s=a+l>s?a+l:s;else{r=o.points;for(var m=0;m<r.length;m+=2)n=r[m],a=r[m+1],t=t>n-f?n-f:t,e=n+f>e?n+f:e,i=i>a-f?a-f:i,s=a+f>s?a+f:s}}else t=0,e=0,i=0,s=0;var g=this.boundsPadding;this._localBounds.x=t-g,this._localBounds.width=e-t+2*g,this._localBounds.y=i-g,this._localBounds.height=s-i+2*g},s.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new h(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===c.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty=this.boundsDirty=!0,e},s.prototype.destroy=function(){o.prototype.destroy.apply(this,arguments);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();for(var e in this._webgl)for(var i=0;i<this._webgl[e].data.length;++i)this._webgl[e].data[i].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{"../const":22,"../display/Container":23,"../math":33,"../renderers/canvas/utils/CanvasBuffer":45,"../renderers/canvas/utils/CanvasGraphics":46,"../textures/Texture":72,"./GraphicsData":26}],26:[function(t,e,i){function s(t,e,i,s,o,r,n){this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this._lineTint=e,this.fillColor=s,this.fillAlpha=o,this._fillTint=s,this.fill=r,this.shape=n,this.type=n.type}s.prototype.constructor=s,e.exports=s,s.prototype.clone=function(){return new s(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},s.prototype.destroy=function(){this.shape=null}},{}],27:[function(t,e,i){function s(t){a.call(this,t),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}var o=t("../../utils"),r=t("../../math"),n=t("../../const"),a=t("../../renderers/webgl/utils/ObjectRenderer"),h=t("../../renderers/webgl/WebGLRenderer"),l=t("./WebGLGraphicsData"),c=t("earcut");s.prototype=Object.create(a.prototype),s.prototype.constructor=s,e.exports=s,h.registerPlugin("graphics",s),s.prototype.onContextChange=function(){},s.prototype.destroy=function(){a.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},s.prototype.render=function(t){var e,i=this.renderer,s=i.gl,r=i.shaderManager.plugins.primitiveShader;!t.dirty&&t._webGL[s.id]||this.updateGraphics(t);var n=t._webGL[s.id];i.blendModeManager.setBlendMode(t.blendMode);for(var a=0,h=n.data.length;h>a;a++)e=n.data[a],1===n.data[a].mode?(i.stencilManager.pushStencil(t,e),s.uniform1f(i.shaderManager.complexPrimitiveShader.uniforms.alpha._location,t.worldAlpha*e.alpha),s.drawElements(s.TRIANGLE_FAN,4,s.UNSIGNED_SHORT,2*(e.indices.length-4)),i.stencilManager.popStencil(t,e)):(r=i.shaderManager.primitiveShader,i.shaderManager.setShader(r),s.uniformMatrix3fv(r.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),s.uniformMatrix3fv(r.uniforms.projectionMatrix._location,!1,i.currentRenderTarget.projectionMatrix.toArray(!0)),s.uniform3fv(r.uniforms.tint._location,o.hex2rgb(t.tint)),s.uniform1f(r.uniforms.alpha._location,t.worldAlpha),s.bindBuffer(s.ARRAY_BUFFER,e.buffer),s.vertexAttribPointer(r.attributes.aVertexPosition,2,s.FLOAT,!1,24,0),s.vertexAttribPointer(r.attributes.aColor,4,s.FLOAT,!1,24,8),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e.indexBuffer),s.drawElements(s.TRIANGLE_STRIP,e.indices.length,s.UNSIGNED_SHORT,0)),i.drawCount++},s.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[e.id];i||(i=t._webGL[e.id]={lastIndex:0,data:[],gl:e}),t.dirty=!1;var s;if(t.clearDirty){for(t.clearDirty=!1,s=0;s<i.data.length;s++){var o=i.data[s];o.reset(),this.graphicsDataPool.push(o)}i.data=[],i.lastIndex=0}var r;for(s=i.lastIndex;s<t.graphicsData.length;s++){var a=t.graphicsData[s];if(a.type===n.SHAPES.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]===a.points[a.points.length-2]&&a.points[1]===a.points[a.points.length-1]||a.points.push(a.points[0],a.points[1])),a.fill&&a.points.length>=6)if(a.points.length<2*this.maximumSimplePolySize){r=this.switchMode(i,0);var h=this.buildPoly(a,r);h||(r=this.switchMode(i,1),this.buildComplexPoly(a,r))}else r=this.switchMode(i,1),this.buildComplexPoly(a,r);a.lineWidth>0&&(r=this.switchMode(i,0),this.buildLine(a,r))}else r=this.switchMode(i,0),a.type===n.SHAPES.RECT?this.buildRectangle(a,r):a.type===n.SHAPES.CIRC||a.type===n.SHAPES.ELIP?this.buildCircle(a,r):a.type===n.SHAPES.RREC&&this.buildRoundedRectangle(a,r);i.lastIndex++}for(s=0;s<i.data.length;s++)r=i.data[s],r.dirty&&r.upload()},s.prototype.switchMode=function(t,e){var i;return t.data.length?(i=t.data[t.data.length-1],(i.points.length>32e4||i.mode!==e||1===e)&&(i=this.graphicsDataPool.pop()||new l(t.gl),i.mode=e,t.data.push(i))):(i=this.graphicsDataPool.pop()||new l(t.gl),i.mode=e,t.data.push(i)),i.dirty=!0,i},s.prototype.buildRectangle=function(t,e){var i=t.shape,s=i.x,r=i.y,n=i.width,a=i.height;if(t.fill){var h=o.hex2rgb(t.fillColor),l=t.fillAlpha,c=h[0]*l,u=h[1]*l,d=h[2]*l,p=e.points,f=e.indices,m=p.length/6;p.push(s,r),p.push(c,u,d,l),p.push(s+n,r),p.push(c,u,d,l),p.push(s,r+a),p.push(c,u,d,l),p.push(s+n,r+a),p.push(c,u,d,l),f.push(m,m,m+1,m+2,m+3,m+3);
}if(t.lineWidth){var g=t.points;t.points=[s,r,s+n,r,s+n,r+a,s,r+a,s,r],this.buildLine(t,e),t.points=g}},s.prototype.buildRoundedRectangle=function(t,e){var i=t.shape,s=i.x,r=i.y,n=i.width,a=i.height,h=i.radius,l=[];if(l.push(s,r+h),this.quadraticBezierCurve(s,r+a-h,s,r+a,s+h,r+a,l),this.quadraticBezierCurve(s+n-h,r+a,s+n,r+a,s+n,r+a-h,l),this.quadraticBezierCurve(s+n,r+h,s+n,r,s+n-h,r,l),this.quadraticBezierCurve(s+h,r,s,r,s,r+h+1e-10,l),t.fill){var u=o.hex2rgb(t.fillColor),d=t.fillAlpha,p=u[0]*d,f=u[1]*d,m=u[2]*d,g=e.points,v=e.indices,y=g.length/6,_=c(l,null,2),x=0;for(x=0;x<_.length;x+=3)v.push(_[x]+y),v.push(_[x]+y),v.push(_[x+1]+y),v.push(_[x+2]+y),v.push(_[x+2]+y);for(x=0;x<l.length;x++)g.push(l[x],l[++x],p,f,m,d)}if(t.lineWidth){var b=t.points;t.points=l,this.buildLine(t,e),t.points=b}},s.prototype.quadraticBezierCurve=function(t,e,i,s,o,r,n){function a(t,e,i){var s=e-t;return t+s*i}for(var h,l,c,u,d,p,f=20,m=n||[],g=0,v=0;f>=v;v++)g=v/f,h=a(t,i,g),l=a(e,s,g),c=a(i,o,g),u=a(s,r,g),d=a(h,c,g),p=a(l,u,g),m.push(d,p);return m},s.prototype.buildCircle=function(t,e){var i,s,r=t.shape,a=r.x,h=r.y;t.type===n.SHAPES.CIRC?(i=r.radius,s=r.radius):(i=r.width,s=r.height);var l=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),c=2*Math.PI/l,u=0;if(t.fill){var d=o.hex2rgb(t.fillColor),p=t.fillAlpha,f=d[0]*p,m=d[1]*p,g=d[2]*p,v=e.points,y=e.indices,_=v.length/6;for(y.push(_),u=0;l+1>u;u++)v.push(a,h,f,m,g,p),v.push(a+Math.sin(c*u)*i,h+Math.cos(c*u)*s,f,m,g,p),y.push(_++,_++);y.push(_-1)}if(t.lineWidth){var x=t.points;for(t.points=[],u=0;l+1>u;u++)t.points.push(a+Math.sin(c*u)*i,h+Math.cos(c*u)*s);this.buildLine(t,e),t.points=x}},s.prototype.buildLine=function(t,e){var i=0,s=t.points;if(0!==s.length){var n=new r.Point(s[0],s[1]),a=new r.Point(s[s.length-2],s[s.length-1]);if(n.x===a.x&&n.y===a.y){s=s.slice(),s.pop(),s.pop(),a=new r.Point(s[s.length-2],s[s.length-1]);var h=a.x+.5*(n.x-a.x),l=a.y+.5*(n.y-a.y);s.unshift(h,l),s.push(h,l)}var c,u,d,p,f,m,g,v,y,_,x,b,w,S,T,C,P,A,M,E,I,k,L,R=e.points,O=e.indices,B=s.length/2,D=s.length,F=R.length/6,j=t.lineWidth/2,N=o.hex2rgb(t.lineColor),U=t.lineAlpha,z=N[0]*U,G=N[1]*U,H=N[2]*U;for(d=s[0],p=s[1],f=s[2],m=s[3],y=-(p-m),_=d-f,L=Math.sqrt(y*y+_*_),y/=L,_/=L,y*=j,_*=j,R.push(d-y,p-_,z,G,H,U),R.push(d+y,p+_,z,G,H,U),i=1;B-1>i;i++)d=s[2*(i-1)],p=s[2*(i-1)+1],f=s[2*i],m=s[2*i+1],g=s[2*(i+1)],v=s[2*(i+1)+1],y=-(p-m),_=d-f,L=Math.sqrt(y*y+_*_),y/=L,_/=L,y*=j,_*=j,x=-(m-v),b=f-g,L=Math.sqrt(x*x+b*b),x/=L,b/=L,x*=j,b*=j,T=-_+p-(-_+m),C=-y+f-(-y+d),P=(-y+d)*(-_+m)-(-y+f)*(-_+p),A=-b+v-(-b+m),M=-x+f-(-x+g),E=(-x+g)*(-b+m)-(-x+f)*(-b+v),I=T*M-A*C,Math.abs(I)<.1?(I+=10.1,R.push(f-y,m-_,z,G,H,U),R.push(f+y,m+_,z,G,H,U)):(c=(C*E-M*P)/I,u=(A*P-T*E)/I,k=(c-f)*(c-f)+(u-m)*(u-m),k>19600?(w=y-x,S=_-b,L=Math.sqrt(w*w+S*S),w/=L,S/=L,w*=j,S*=j,R.push(f-w,m-S),R.push(z,G,H,U),R.push(f+w,m+S),R.push(z,G,H,U),R.push(f-w,m-S),R.push(z,G,H,U),D++):(R.push(c,u),R.push(z,G,H,U),R.push(f-(c-f),m-(u-m)),R.push(z,G,H,U)));for(d=s[2*(B-2)],p=s[2*(B-2)+1],f=s[2*(B-1)],m=s[2*(B-1)+1],y=-(p-m),_=d-f,L=Math.sqrt(y*y+_*_),y/=L,_/=L,y*=j,_*=j,R.push(f-y,m-_),R.push(z,G,H,U),R.push(f+y,m+_),R.push(z,G,H,U),O.push(F),i=0;D>i;i++)O.push(F++);O.push(F-1)}},s.prototype.buildComplexPoly=function(t,e){var i=t.points.slice();if(!(i.length<6)){var s=e.indices;e.points=i,e.alpha=t.fillAlpha,e.color=o.hex2rgb(t.fillColor);for(var r,n,a=1/0,h=-(1/0),l=1/0,c=-(1/0),u=0;u<i.length;u+=2)r=i[u],n=i[u+1],a=a>r?r:a,h=r>h?r:h,l=l>n?n:l,c=n>c?n:c;i.push(a,l,h,l,h,c,a,c);var d=i.length/2;for(u=0;d>u;u++)s.push(u)}},s.prototype.buildPoly=function(t,e){var i=t.points;if(!(i.length<6)){var s=e.points,r=e.indices,n=i.length/2,a=o.hex2rgb(t.fillColor),h=t.fillAlpha,l=a[0]*h,u=a[1]*h,d=a[2]*h,p=c(i,null,2);if(!p)return!1;var f=s.length/6,m=0;for(m=0;m<p.length;m+=3)r.push(p[m]+f),r.push(p[m]+f),r.push(p[m+1]+f),r.push(p[m+2]+f),r.push(p[m+2]+f);for(m=0;n>m;m++)s.push(i[2*m],i[2*m+1],l,u,d,h);return!0}}},{"../../const":22,"../../math":33,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63,"../../utils":77,"./WebGLGraphicsData":28,earcut:9}],28:[function(t,e,i){function s(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}s.prototype.constructor=s,e.exports=s,s.prototype.reset=function(){this.points.length=0,this.indices.length=0},s.prototype.upload=function(){var t=this.gl;this.glPoints=new Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndices,t.STATIC_DRAW),this.dirty=!1},s.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{}],29:[function(t,e,i){var s=e.exports=Object.assign(t("./const"),t("./math"),{utils:t("./utils"),ticker:t("./ticker"),DisplayObject:t("./display/DisplayObject"),Container:t("./display/Container"),Sprite:t("./sprites/Sprite"),ParticleContainer:t("./particles/ParticleContainer"),SpriteRenderer:t("./sprites/webgl/SpriteRenderer"),ParticleRenderer:t("./particles/webgl/ParticleRenderer"),Text:t("./text/Text"),Graphics:t("./graphics/Graphics"),GraphicsData:t("./graphics/GraphicsData"),GraphicsRenderer:t("./graphics/webgl/GraphicsRenderer"),Texture:t("./textures/Texture"),BaseTexture:t("./textures/BaseTexture"),RenderTexture:t("./textures/RenderTexture"),VideoBaseTexture:t("./textures/VideoBaseTexture"),TextureUvs:t("./textures/TextureUvs"),CanvasRenderer:t("./renderers/canvas/CanvasRenderer"),CanvasGraphics:t("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:t("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:t("./renderers/webgl/WebGLRenderer"),WebGLManager:t("./renderers/webgl/managers/WebGLManager"),ShaderManager:t("./renderers/webgl/managers/ShaderManager"),Shader:t("./renderers/webgl/shaders/Shader"),TextureShader:t("./renderers/webgl/shaders/TextureShader"),PrimitiveShader:t("./renderers/webgl/shaders/PrimitiveShader"),ComplexPrimitiveShader:t("./renderers/webgl/shaders/ComplexPrimitiveShader"),ObjectRenderer:t("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:t("./renderers/webgl/utils/RenderTarget"),AbstractFilter:t("./renderers/webgl/filters/AbstractFilter"),FXAAFilter:t("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:t("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(t,e,i,o){return t=t||800,e=e||600,!o&&s.utils.isWebGLSupported()?new s.WebGLRenderer(t,e,i):new s.CanvasRenderer(t,e,i)}})},{"./const":22,"./display/Container":23,"./display/DisplayObject":24,"./graphics/Graphics":25,"./graphics/GraphicsData":26,"./graphics/webgl/GraphicsRenderer":27,"./math":33,"./particles/ParticleContainer":39,"./particles/webgl/ParticleRenderer":41,"./renderers/canvas/CanvasRenderer":44,"./renderers/canvas/utils/CanvasBuffer":45,"./renderers/canvas/utils/CanvasGraphics":46,"./renderers/webgl/WebGLRenderer":49,"./renderers/webgl/filters/AbstractFilter":50,"./renderers/webgl/filters/FXAAFilter":51,"./renderers/webgl/filters/SpriteMaskFilter":52,"./renderers/webgl/managers/ShaderManager":56,"./renderers/webgl/managers/WebGLManager":58,"./renderers/webgl/shaders/ComplexPrimitiveShader":59,"./renderers/webgl/shaders/PrimitiveShader":60,"./renderers/webgl/shaders/Shader":61,"./renderers/webgl/shaders/TextureShader":62,"./renderers/webgl/utils/ObjectRenderer":63,"./renderers/webgl/utils/RenderTarget":65,"./sprites/Sprite":67,"./sprites/webgl/SpriteRenderer":68,"./text/Text":69,"./textures/BaseTexture":70,"./textures/RenderTexture":71,"./textures/Texture":72,"./textures/TextureUvs":73,"./textures/VideoBaseTexture":74,"./ticker":76,"./utils":77}],30:[function(t,e,i){function s(t){return 0>t?-1:t>0?1:0}function o(){for(var t=0;16>t;t++){var e=[];u.push(e);for(var i=0;16>i;i++)for(var o=s(r[t]*r[i]+a[t]*n[i]),d=s(n[t]*r[i]+h[t]*n[i]),p=s(r[t]*a[i]+a[t]*h[i]),f=s(n[t]*a[i]+h[t]*h[i]),m=0;16>m;m++)if(r[m]===o&&n[m]===d&&a[m]===p&&h[m]===f){e.push(m);break}}for(t=0;16>t;t++){var g=new c;g.set(r[t],n[t],a[t],h[t],0,0),l.push(g)}}var r=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],n=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],c=t("./Matrix"),u=[];o();var d={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return r[t]},uY:function(t){return n[t]},vX:function(t){return a[t]},vY:function(t){return h[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return u[t][e]},sub:function(t,e){return u[t][d.inv(e)]},rotate180:function(t){return 4^t},isSwapWidthHeight:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?d.S:d.N:2*Math.abs(e)<=Math.abs(t)?t>0?d.E:d.W:e>0?t>0?d.SE:d.SW:t>0?d.NE:d.NW},matrixAppendRotationInv:function(t,e,i,s){var o=l[d.inv(e)];i=i||0,s=s||0,o.tx=i,o.ty=s,t.append(o)}};e.exports=d},{"./Matrix":31}],31:[function(t,e,i){function s(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var o=t("./Point");s.prototype.constructor=s,e.exports=s,s.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},s.prototype.set=function(t,e,i,s,o,r){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=o,this.ty=r,this},s.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},s.prototype.apply=function(t,e){e=e||new o;var i=t.x,s=t.y;return e.x=this.a*i+this.c*s+this.tx,e.y=this.b*i+this.d*s+this.ty,e},s.prototype.applyInverse=function(t,e){e=e||new o;var i=1/(this.a*this.d+this.c*-this.b),s=t.x,r=t.y;return e.x=this.d*i*s+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,e},s.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},s.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},s.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),s=this.a,o=this.c,r=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=o*e-this.d*i,this.d=o*i+this.d*e,this.tx=r*e-this.ty*i,this.ty=r*i+this.ty*e,this},s.prototype.append=function(t){var e=this.a,i=this.b,s=this.c,o=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*o,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*o,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*o+this.ty,this},s.prototype.setTransform=function(t,e,i,s,o,r,n,a,h){var l,c,u,d,p,f,m,g,v,y;return p=Math.sin(n),f=Math.cos(n),m=Math.cos(h),g=Math.sin(h),v=-Math.sin(a),y=Math.cos(a),l=f*o,c=p*o,u=-p*r,d=f*r,this.a=m*l+g*u,this.b=m*c+g*d,this.c=v*l+y*u,this.d=v*c+y*d,this.tx=t+(i*l+s*u),this.ty=e+(i*c+s*d),this},s.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,s=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},s.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,s=this.d,o=this.tx,r=t*s-e*i;return this.a=s/r,this.b=-e/r,this.c=-i/r,this.d=t/r,this.tx=(i*this.ty-s*o)/r,this.ty=-(t*this.ty-e*o)/r,this},s.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},s.prototype.clone=function(){var t=new s;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},s.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},s.IDENTITY=new s,s.TEMP_MATRIX=new s},{"./Point":32}],32:[function(t,e,i){function s(t,e){this.x=t||0,this.y=e||0}s.prototype.constructor=s,e.exports=s,s.prototype.clone=function(){return new s(this.x,this.y)},s.prototype.copy=function(t){this.set(t.x,t.y)},s.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},s.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)}},{}],33:[function(t,e,i){e.exports={Point:t("./Point"),Matrix:t("./Matrix"),GroupD8:t("./GroupD8"),Circle:t("./shapes/Circle"),Ellipse:t("./shapes/Ellipse"),Polygon:t("./shapes/Polygon"),Rectangle:t("./shapes/Rectangle"),RoundedRectangle:t("./shapes/RoundedRectangle")}},{"./GroupD8":30,"./Matrix":31,"./Point":32,"./shapes/Circle":34,"./shapes/Ellipse":35,"./shapes/Polygon":36,"./shapes/Rectangle":37,"./shapes/RoundedRectangle":38}],34:[function(t,e,i){function s(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0,this.type=r.SHAPES.CIRC}var o=t("./Rectangle"),r=t("../../const");s.prototype.constructor=s,e.exports=s,s.prototype.clone=function(){return new s(this.x,this.y,this.radius)},s.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.x-t,s=this.y-e,o=this.radius*this.radius;return i*=i,s*=s,o>=i+s},s.prototype.getBounds=function(){return new o(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":22,"./Rectangle":37}],35:[function(t,e,i){function s(t,e,i,s){this.x=t||0,this.y=e||0,this.width=i||0,this.height=s||0,this.type=r.SHAPES.ELIP}var o=t("./Rectangle"),r=t("../../const");s.prototype.constructor=s,e.exports=s,s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height)},s.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,s=(e-this.y)/this.height;return i*=i,s*=s,1>=i+s},s.prototype.getBounds=function(){return new o(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":22,"./Rectangle":37}],36:[function(t,e,i){function s(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}if(e[0]instanceof o){for(var s=[],n=0,a=e.length;a>n;n++)s.push(e[n].x,e[n].y);e=s}this.closed=!0,this.points=e,this.type=r.SHAPES.POLY}var o=t("../Point"),r=t("../../const");s.prototype.constructor=s,e.exports=s,s.prototype.clone=function(){return new s(this.points.slice())},s.prototype.contains=function(t,e){for(var i=!1,s=this.points.length/2,o=0,r=s-1;s>o;r=o++){var n=this.points[2*o],a=this.points[2*o+1],h=this.points[2*r],l=this.points[2*r+1],c=a>e!=l>e&&(h-n)*(e-a)/(l-a)+n>t;c&&(i=!i)}return i}},{"../../const":22,"../Point":32}],37:[function(t,e,i){function s(t,e,i,s){this.x=t||0,this.y=e||0,this.width=i||0,this.height=s||0,this.type=o.SHAPES.RECT}var o=t("../../const");s.prototype.constructor=s,e.exports=s,s.EMPTY=new s(0,0,0,0),s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height)},s.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}},{"../../const":22}],38:[function(t,e,i){function s(t,e,i,s,r){this.x=t||0,this.y=e||0,this.width=i||0,this.height=s||0,this.radius=r||20,this.type=o.SHAPES.RREC}var o=t("../../const");s.prototype.constructor=s,e.exports=s,s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.radius)},s.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}},{"../../const":22}],39:[function(t,e,i){function s(t,e,i){o.call(this),i=i||15e3,t=t||15e3;var s=16384;i>s&&(i=s),i>t&&(i=t),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=i,this._buffers=null,this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=r.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(e)}var o=t("../display/Container"),r=t("../const");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},s.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},s.prototype.renderWebGL=function(t){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},s.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},s.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,s=!0,o=0,r=0,n=0,a=0,h=t.blendModes[this.blendMode];h!==e.globalCompositeOperation&&(e.globalCompositeOperation=h),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var c=this.children[l];if(c.visible){var u=c.texture.frame;if(e.globalAlpha=this.worldAlpha*c.alpha,c.rotation%(2*Math.PI)===0)s&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),s=!1),o=c.anchor.x*(-u.width*c.scale.x)+c.position.x+.5,r=c.anchor.y*(-u.height*c.scale.y)+c.position.y+.5,n=u.width*c.scale.x,a=u.height*c.scale.y;else{s||(s=!0),c.displayObjectUpdateTransform();var d=c.worldTransform;t.roundPixels?e.setTransform(d.a,d.b,d.c,d.d,0|d.tx,0|d.ty):e.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),o=c.anchor.x*-u.width+.5,r=c.anchor.y*-u.height+.5,n=u.width,a=u.height}e.drawImage(c.texture.baseTexture.source,u.x,u.y,u.width,u.height,o,r,n,a)}}}},s.prototype.destroy=function(){if(o.prototype.destroy.apply(this,arguments),this._buffers)for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._properties=null,this._buffers=null}},{"../const":22,"../display/Container":23}],40:[function(t,e,i){function s(t,e,i,s){this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=s,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<e.length;o++){var r=e[o];i[o]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}s.prototype.constructor=s,e.exports=s,s.prototype.initBuffers=function(){var t,e,i=this.gl,s=0;for(this.dynamicStride=0,t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],e.offset=s,s+=e.size,this.dynamicStride+=e.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.dynamicBuffer),i.bufferData(i.ARRAY_BUFFER,this.dynamicData,i.DYNAMIC_DRAW);var o=0;for(this.staticStride=0,t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],e.offset=o,o+=e.size,this.staticStride+=e.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.staticBuffer),i.bufferData(i.ARRAY_BUFFER,this.staticData,i.DYNAMIC_DRAW)},s.prototype.uploadDynamic=function(t,e,i){for(var s=this.gl,o=0;o<this.dynamicProperties.length;o++){var r=this.dynamicProperties[o];r.uploadFunction(t,e,i,this.dynamicData,this.dynamicStride,r.offset)}s.bindBuffer(s.ARRAY_BUFFER,this.dynamicBuffer),s.bufferSubData(s.ARRAY_BUFFER,0,this.dynamicData)},s.prototype.uploadStatic=function(t,e,i){for(var s=this.gl,o=0;o<this.staticProperties.length;o++){var r=this.staticProperties[o];r.uploadFunction(t,e,i,this.staticData,this.staticStride,r.offset)}s.bindBuffer(s.ARRAY_BUFFER,this.staticBuffer),s.bufferSubData(s.ARRAY_BUFFER,0,this.staticData)},s.prototype.bind=function(){var t,e,i=this.gl;for(i.bindBuffer(i.ARRAY_BUFFER,this.dynamicBuffer),t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],i.vertexAttribPointer(e.attribute,e.size,i.FLOAT,!1,4*this.dynamicStride,4*e.offset);for(i.bindBuffer(i.ARRAY_BUFFER,this.staticBuffer),t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],i.vertexAttribPointer(e.attribute,e.size,i.FLOAT,!1,4*this.staticStride,4*e.offset)},s.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},{}],41:[function(t,e,i){function s(t){o.call(this,t);var e=98304;this.indices=new Uint16Array(e);for(var i=0,s=0;e>i;i+=6,s+=4)this.indices[i+0]=s+0,this.indices[i+1]=s+1,this.indices[i+2]=s+2,this.indices[i+3]=s+0,this.indices[i+4]=s+2,this.indices[i+5]=s+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new h.Matrix}var o=t("../../renderers/webgl/utils/ObjectRenderer"),r=t("../../renderers/webgl/WebGLRenderer"),n=t("./ParticleShader"),a=t("./ParticleBuffer"),h=t("../../math");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,r.registerPlugin("particle",s),s.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new n(this.renderer.shaderManager),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},s.prototype.start=function(){var t=this.renderer.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.shader;this.renderer.shaderManager.setShader(e)},s.prototype.render=function(t){var e=t.children,i=e.length,s=t._maxSize,o=t._batchSize;if(0!==i){i>s&&(i=s),t._buffers||(t._buffers=this.generateBuffers(t)),this.renderer.blendModeManager.setBlendMode(t.blendMode);var r=this.renderer.gl,n=t.worldTransform.copy(this.tempMatrix);n.prepend(this.renderer.currentRenderTarget.projectionMatrix),r.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,n.toArray(!0)),r.uniform1f(this.shader.uniforms.uAlpha._location,t.worldAlpha);var a=e[0]._texture.baseTexture;if(a._glTextures[r.id])r.bindTexture(r.TEXTURE_2D,a._glTextures[r.id]);else{if(!this.renderer.updateTexture(a))return;t._properties[0]&&t._properties[3]||(t._bufferToUpdate=0)}for(var h=0,l=0;i>h;h+=o,l+=1){var c=i-h;c>o&&(c=o);var u=t._buffers[l];u.uploadDynamic(e,h,c),t._bufferToUpdate===l&&(u.uploadStatic(e,h,c),t._bufferToUpdate=l+1),u.bind(this.shader),r.drawElements(r.TRIANGLES,6*c,r.UNSIGNED_SHORT,0),this.renderer.drawCount++}}},s.prototype.generateBuffers=function(t){var e,i=this.renderer.gl,s=[],o=t._maxSize,r=t._batchSize,n=t._properties;for(e=0;o>e;e+=r)s.push(new a(i,this.properties,n,r));return s},s.prototype.uploadVertices=function(t,e,i,s,o,r){for(var n,a,h,l,c,u,d,p,f,m=0;i>m;m++)n=t[e+m],a=n._texture,l=n.scale.x,c=n.scale.y,a.trim?(h=a.trim,d=h.x-n.anchor.x*h.width,u=d+a.crop.width,f=h.y-n.anchor.y*h.height,p=f+a.crop.height):(u=a._frame.width*(1-n.anchor.x),d=a._frame.width*-n.anchor.x,p=a._frame.height*(1-n.anchor.y),f=a._frame.height*-n.anchor.y),s[r]=d*l,s[r+1]=f*c,s[r+o]=u*l,s[r+o+1]=f*c,s[r+2*o]=u*l,s[r+2*o+1]=p*c,s[r+3*o]=d*l,s[r+3*o+1]=p*c,r+=4*o},s.prototype.uploadPosition=function(t,e,i,s,o,r){for(var n=0;i>n;n++){var a=t[e+n].position;s[r]=a.x,s[r+1]=a.y,s[r+o]=a.x,s[r+o+1]=a.y,s[r+2*o]=a.x,s[r+2*o+1]=a.y,s[r+3*o]=a.x,s[r+3*o+1]=a.y,r+=4*o}},s.prototype.uploadRotation=function(t,e,i,s,o,r){for(var n=0;i>n;n++){var a=t[e+n].rotation;s[r]=a,s[r+o]=a,s[r+2*o]=a,s[r+3*o]=a,r+=4*o}},s.prototype.uploadUvs=function(t,e,i,s,o,r){for(var n=0;i>n;n++){var a=t[e+n]._texture._uvs;a?(s[r]=a.x0,s[r+1]=a.y0,s[r+o]=a.x1,s[r+o+1]=a.y1,s[r+2*o]=a.x2,s[r+2*o+1]=a.y2,s[r+3*o]=a.x3,s[r+3*o+1]=a.y3,r+=4*o):(s[r]=0,s[r+1]=0,s[r+o]=0,s[r+o+1]=0,s[r+2*o]=0,s[r+2*o+1]=0,s[r+3*o]=0,s[r+3*o+1]=0,r+=4*o)}},s.prototype.uploadAlpha=function(t,e,i,s,o,r){for(var n=0;i>n;n++){var a=t[e+n].alpha;s[r]=a,s[r+o]=a,s[r+2*o]=a,s[r+3*o]=a,r+=4*o}},s.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),o.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../math":33,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63,"./ParticleBuffer":40,"./ParticleShader":42}],42:[function(t,e,i){function s(t){o.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var o=t("../../renderers/webgl/shaders/TextureShader");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s},{"../../renderers/webgl/shaders/TextureShader":62}],43:[function(t,e,i){function s(t,e,i,s){if(a.call(this),o.sayHello(t),s)for(var h in n.DEFAULT_RENDER_OPTIONS)"undefined"==typeof s[h]&&(s[h]=n.DEFAULT_RENDER_OPTIONS[h]);else s=n.DEFAULT_RENDER_OPTIONS;this.type=n.RENDERER_TYPE.UNKNOWN,this.width=e||800,this.height=i||600,this.view=s.view||document.createElement("canvas"),this.resolution=s.resolution,this.transparent=s.transparent,this.autoResize=s.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=s.preserveDrawingBuffer,this.clearBeforeRender=s.clearBeforeRender,this.roundPixels=s.roundPixels,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=s.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new r.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var o=t("../utils"),r=t("../math"),n=t("../const"),a=t("eventemitter3");s.prototype=Object.create(a.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=o.hex2string(t),o.hex2rgb(t,this._backgroundColorRgb)}}}),s.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},s.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=n.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{"../const":22,"../math":33,"../utils":77,eventemitter3:10}],44:[function(t,e,i){function s(t,e,i){i=i||{},o.call(this,"Canvas",t,e,i),this.type=h.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new r,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new a.Matrix,worldAlpha:1},this.resize(t,e)}var o=t("../SystemRenderer"),r=t("./utils/CanvasMaskManager"),n=t("../../utils"),a=t("../../math"),h=t("../../const");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,n.pluginTarget.mixin(s),s.prototype.render=function(t){this.emit("prerender");var e=t.parent;this._lastObjectRendered=t,t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.context.globalCompositeOperation=this.blendModes[h.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t,this.context),this.emit("postrender")},s.prototype.destroy=function(t){this.destroyPlugins(),o.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},s.prototype.renderDisplayObject=function(t,e){var i=this.context;this.context=e,t.renderCanvas(this),this.context=i},s.prototype.resize=function(t,e){o.prototype.resize.call(this,t,e),this.smoothProperty&&(this.context[this.smoothProperty]=h.SCALE_MODES.DEFAULT===h.SCALE_MODES.LINEAR)},s.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},n.canUseNewCanvasBlendModes()?(this.blendModes[h.BLEND_MODES.NORMAL]="source-over",this.blendModes[h.BLEND_MODES.ADD]="lighter",this.blendModes[h.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[h.BLEND_MODES.SCREEN]="screen",this.blendModes[h.BLEND_MODES.OVERLAY]="overlay",this.blendModes[h.BLEND_MODES.DARKEN]="darken",this.blendModes[h.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[h.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[h.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[h.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[h.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[h.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[h.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[h.BLEND_MODES.HUE]="hue",this.blendModes[h.BLEND_MODES.SATURATION]="saturate",this.blendModes[h.BLEND_MODES.COLOR]="color",this.blendModes[h.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[h.BLEND_MODES.NORMAL]="source-over",this.blendModes[h.BLEND_MODES.ADD]="lighter",this.blendModes[h.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[h.BLEND_MODES.SCREEN]="source-over",this.blendModes[h.BLEND_MODES.OVERLAY]="source-over",this.blendModes[h.BLEND_MODES.DARKEN]="source-over",this.blendModes[h.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[h.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[h.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[h.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[h.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[h.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[h.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[h.BLEND_MODES.HUE]="source-over",this.blendModes[h.BLEND_MODES.SATURATION]="source-over",
this.blendModes[h.BLEND_MODES.COLOR]="source-over",this.blendModes[h.BLEND_MODES.LUMINOSITY]="source-over"))}},{"../../const":22,"../../math":33,"../../utils":77,"../SystemRenderer":43,"./utils/CanvasMaskManager":47}],45:[function(t,e,i){function s(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e}s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{width:{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},height:{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}}),s.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},s.prototype.resize=function(t,e){this.canvas.width=t,this.canvas.height=e},s.prototype.destroy=function(){this.context=null,this.canvas=null}},{}],46:[function(t,e,i){var s=t("../../../const"),o={};e.exports=o,o.renderGraphics=function(t,e){var i=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var o=0;o<t.graphicsData.length;o++){var r=t.graphicsData[o],n=r.shape,a=r._fillTint,h=r._lineTint;if(e.lineWidth=r.lineWidth,r.type===s.SHAPES.POLY){e.beginPath();var l=n.points;e.moveTo(l[0],l[1]);for(var c=1;c<l.length/2;c++)e.lineTo(l[2*c],l[2*c+1]);n.closed&&e.lineTo(l[0],l[1]),l[0]===l[l.length-2]&&l[1]===l[l.length-1]&&e.closePath(),r.fill&&(e.globalAlpha=r.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),r.lineWidth&&(e.globalAlpha=r.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(r.type===s.SHAPES.RECT)(r.fillColor||0===r.fillColor)&&(e.globalAlpha=r.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fillRect(n.x,n.y,n.width,n.height)),r.lineWidth&&(e.globalAlpha=r.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.strokeRect(n.x,n.y,n.width,n.height));else if(r.type===s.SHAPES.CIRC)e.beginPath(),e.arc(n.x,n.y,n.radius,0,2*Math.PI),e.closePath(),r.fill&&(e.globalAlpha=r.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),r.lineWidth&&(e.globalAlpha=r.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke());else if(r.type===s.SHAPES.ELIP){var u=2*n.width,d=2*n.height,p=n.x-u/2,f=n.y-d/2;e.beginPath();var m=.5522848,g=u/2*m,v=d/2*m,y=p+u,_=f+d,x=p+u/2,b=f+d/2;e.moveTo(p,b),e.bezierCurveTo(p,b-v,x-g,f,x,f),e.bezierCurveTo(x+g,f,y,b-v,y,b),e.bezierCurveTo(y,b+v,x+g,_,x,_),e.bezierCurveTo(x-g,_,p,b+v,p,b),e.closePath(),r.fill&&(e.globalAlpha=r.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),r.lineWidth&&(e.globalAlpha=r.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(r.type===s.SHAPES.RREC){var w=n.x,S=n.y,T=n.width,C=n.height,P=n.radius,A=Math.min(T,C)/2|0;P=P>A?A:P,e.beginPath(),e.moveTo(w,S+P),e.lineTo(w,S+C-P),e.quadraticCurveTo(w,S+C,w+P,S+C),e.lineTo(w+T-P,S+C),e.quadraticCurveTo(w+T,S+C,w+T,S+C-P),e.lineTo(w+T,S+P),e.quadraticCurveTo(w+T,S,w+T-P,S),e.lineTo(w+P,S),e.quadraticCurveTo(w,S,w,S+P),e.closePath(),(r.fillColor||0===r.fillColor)&&(e.globalAlpha=r.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),r.lineWidth&&(e.globalAlpha=r.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}}},o.renderGraphicsMask=function(t,e){var i=t.graphicsData.length;if(0!==i){e.beginPath();for(var o=0;i>o;o++){var r=t.graphicsData[o],n=r.shape;if(r.type===s.SHAPES.POLY){var a=n.points;e.moveTo(a[0],a[1]);for(var h=1;h<a.length/2;h++)e.lineTo(a[2*h],a[2*h+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(r.type===s.SHAPES.RECT)e.rect(n.x,n.y,n.width,n.height),e.closePath();else if(r.type===s.SHAPES.CIRC)e.arc(n.x,n.y,n.radius,0,2*Math.PI),e.closePath();else if(r.type===s.SHAPES.ELIP){var l=2*n.width,c=2*n.height,u=n.x-l/2,d=n.y-c/2,p=.5522848,f=l/2*p,m=c/2*p,g=u+l,v=d+c,y=u+l/2,_=d+c/2;e.moveTo(u,_),e.bezierCurveTo(u,_-m,y-f,d,y,d),e.bezierCurveTo(y+f,d,g,_-m,g,_),e.bezierCurveTo(g,_+m,y+f,v,y,v),e.bezierCurveTo(y-f,v,u,_+m,u,_),e.closePath()}else if(r.type===s.SHAPES.RREC){var x=n.x,b=n.y,w=n.width,S=n.height,T=n.radius,C=Math.min(w,S)/2|0;T=T>C?C:T,e.moveTo(x,b+T),e.lineTo(x,b+S-T),e.quadraticCurveTo(x,b+S,x+T,b+S),e.lineTo(x+w-T,b+S),e.quadraticCurveTo(x+w,b+S,x+w,b+S-T),e.lineTo(x+w,b+T),e.quadraticCurveTo(x+w,b,x+w-T,b),e.lineTo(x+T,b),e.quadraticCurveTo(x,b,x,b+T),e.closePath()}}}},o.updateGraphicsTint=function(t){if(16777215!==t.tint||t._prevTint!==t.tint){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,s=(255&t.tint)/255,o=0;o<t.graphicsData.length;o++){var r=t.graphicsData[o],n=0|r.fillColor,a=0|r.lineColor;r._fillTint=((n>>16&255)/255*e*255<<16)+((n>>8&255)/255*i*255<<8)+(255&n)/255*s*255,r._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*s*255}}}},{"../../../const":22}],47:[function(t,e,i){function s(){}var o=t("./CanvasGraphics");s.prototype.constructor=s,e.exports=s,s.prototype.pushMask=function(t,e){e.context.save();var i=t.alpha,s=t.worldTransform,r=e.resolution;e.context.setTransform(s.a*r,s.b*r,s.c*r,s.d*r,s.tx*r,s.ty*r),t.texture||(o.renderGraphicsMask(t,e.context),e.context.clip()),t.worldAlpha=i},s.prototype.popMask=function(t){t.context.restore()},s.prototype.destroy=function(){}},{"./CanvasGraphics":46}],48:[function(t,e,i){var s=t("../../../utils"),o={};e.exports=o,o.getTintedTexture=function(t,e){var i=t.texture;e=o.roundColor(e);var s="#"+("00000"+(0|e).toString(16)).substr(-6);if(i.tintCache=i.tintCache||{},i.tintCache[s])return i.tintCache[s];var r=o.canvas||document.createElement("canvas");if(o.tintMethod(i,e,r),o.convertTintToImage){var n=new Image;n.src=r.toDataURL(),i.tintCache[s]=n}else i.tintCache[s]=r,o.canvas=null;return r},o.tintWithMultiply=function(t,e,i){var s=i.getContext("2d"),o=t.baseTexture.resolution,r=t.crop.clone();r.x*=o,r.y*=o,r.width*=o,r.height*=o,i.width=r.width,i.height=r.height,s.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),s.fillRect(0,0,r.width,r.height),s.globalCompositeOperation="multiply",s.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),s.globalCompositeOperation="destination-atop",s.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},o.tintWithOverlay=function(t,e,i){var s=i.getContext("2d"),o=t.baseTexture.resolution,r=t.crop.clone();r.x*=o,r.y*=o,r.width*=o,r.height*=o,i.width=r.width,i.height=r.height,s.globalCompositeOperation="copy",s.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),s.fillRect(0,0,r.width,r.height),s.globalCompositeOperation="destination-atop",s.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},o.tintWithPerPixel=function(t,e,i){var o=i.getContext("2d"),r=t.baseTexture.resolution,n=t.crop.clone();n.x*=r,n.y*=r,n.width*=r,n.height*=r,i.width=n.width,i.height=n.height,o.globalCompositeOperation="copy",o.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height);for(var a=s.hex2rgb(e),h=a[0],l=a[1],c=a[2],u=o.getImageData(0,0,n.width,n.height),d=u.data,p=0;p<d.length;p+=4)d[p+0]*=h,d[p+1]*=l,d[p+2]*=c;o.putImageData(u,0,0)},o.roundColor=function(t){var e=o.cacheStepsPerColorChannel,i=s.hex2rgb(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),s.rgb2hex(i)},o.cacheStepsPerColorChannel=8,o.convertTintToImage=!1,o.canUseMultiply=s.canUseNewCanvasBlendModes(),o.tintMethod=o.canUseMultiply?o.tintWithMultiply:o.tintWithPerPixel},{"../../../utils":77}],49:[function(t,e,i){function s(t,e,i){i=i||{},o.call(this,"WebGL",t,e,i),this.type=f.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!i.forceFXAA&&i.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:i.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new r(this),this.maskManager=new n(this),this.stencilManager=new a(this),this.filterManager=new h(this),this.blendModeManager=new l(this),this.currentRenderTarget=null,this.currentRenderer=new u(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._managedTextures=[],this._renderTargetStack=[]}var o=t("../SystemRenderer"),r=t("./managers/ShaderManager"),n=t("./managers/MaskManager"),a=t("./managers/StencilManager"),h=t("./managers/FilterManager"),l=t("./managers/BlendModeManager"),c=t("./utils/RenderTarget"),u=t("./utils/ObjectRenderer"),d=t("./filters/FXAAFilter"),p=t("../../utils"),f=t("../../const");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,p.pluginTarget.mixin(s),s.glContextId=0,s.prototype._createContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=s.glContextId++,t.id=this.glContextId,t.renderer=this},s.prototype._initContext=function(){var t=this.gl;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.renderTarget=new c(t,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",t),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!t.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new d])},s.prototype.render=function(t){if(this.emit("prerender"),!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=t,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,t.filterArea=this.renderTarget.size,t.filters=this._FXAAFilter);var e=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e;var i=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?i.clearColor(0,0,0,0):i.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),i.clear(i.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.renderTarget),this.emit("postrender")}},s.prototype.renderDisplayObject=function(t,e,i){this.setRenderTarget(e),i&&e.clear(),this.filterManager.setFilterStack(e.filterStack),t.renderWebGL(this),this.currentRenderer.flush()},s.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},s.prototype.setRenderTarget=function(t){this.currentRenderTarget!==t&&(this.currentRenderTarget=t,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(t.stencilMaskStack))},s.prototype.resize=function(t,e){o.prototype.resize.call(this,t,e),this.filterManager.resize(t,e),this.renderTarget.resize(t,e),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},s.prototype.updateTexture=function(t){if(t=t.baseTexture||t,t.hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture(),t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t)),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._glTextures[e.id]}},s.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded&&t._glTextures[this.gl.id]&&(this.gl.deleteTexture(t._glTextures[this.gl.id]),delete t._glTextures[this.gl.id],!e)){var i=this._managedTextures.indexOf(t);-1!==i&&p.removeItems(this._managedTextures,i,1)}},s.prototype.handleContextLost=function(t){t.preventDefault()},s.prototype.handleContextRestored=function(){this._initContext();for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.gl.id]&&delete e._glTextures[this.gl.id]}},s.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var e=0;e<this._managedTextures.length;++e){var i=this._managedTextures[e];this.destroyTexture(i,!0),i.off("update",this.updateTexture,this),i.off("dispose",this.destroyTexture,this)}o.prototype.destroy.call(this,t),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.blendModeManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this._managedTextures=null,this.drawCount=0,this.gl.useProgram(null),this.gl.flush(),this.gl=null},s.prototype._mapGlModes=function(){var t=this.gl;this.blendModes||(this.blendModes={},this.blendModes[f.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],this.blendModes[f.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SCREEN]=[t.SRC_ALPHA,t.ONE],this.blendModes[f.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[f.DRAW_MODES.POINTS]=t.POINTS,this.drawModes[f.DRAW_MODES.LINES]=t.LINES,this.drawModes[f.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,this.drawModes[f.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLES]=t.TRIANGLES,this.drawModes[f.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN)}},{"../../const":22,"../../utils":77,"../SystemRenderer":43,"./filters/FXAAFilter":51,"./managers/BlendModeManager":53,"./managers/FilterManager":54,"./managers/MaskManager":55,"./managers/ShaderManager":56,"./managers/StencilManager":57,"./utils/ObjectRenderer":63,"./utils/RenderTarget":65}],50:[function(t,e,i){function s(t,e,i){this.shaders=[],this.padding=0,this.uniforms=i||{},this.vertexSrc=t||o.defaultVertexSrc,this.fragmentSrc=e||o.defaultFragmentSrc}var o=t("../shaders/TextureShader");s.prototype.constructor=s,e.exports=s,s.prototype.getShader=function(t){var e=t.gl,i=this.shaders[e.id];return i||(i=new o(t.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[e.id]=i),i},s.prototype.applyFilter=function(t,e,i,s){var o=this.getShader(t);t.filterManager.applyFilter(o,e,i,s)},s.prototype.syncUniform=function(t){for(var e=0,i=this.shaders.length;i>e;++e)this.shaders[e].syncUniform(t)}},{"../shaders/TextureShader":62}],51:[function(t,e,i){function s(){o.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}var o=t("./AbstractFilter");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.applyFilter=function(t,e,i){var s=t.filterManager,o=this.getShader(t);s.applyFilter(o,e,i)}},{"./AbstractFilter":50}],52:[function(t,e,i){function s(t){var e=new r.Matrix;o.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:t._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:e.toArray(!0)}}),this.maskSprite=t,this.maskMatrix=e}var o=t("./AbstractFilter"),r=t("../../../math");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.applyFilter=function(t,e,i){var s=t.filterManager;this.uniforms.mask.value=this.maskSprite._texture,s.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var o=this.getShader(t);s.applyFilter(o,e,i)},Object.defineProperties(s.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})},{"../../../math":33,"./AbstractFilter":50}],53:[function(t,e,i){function s(t){o.call(this,t),this.currentBlendMode=99999}var o=t("./WebGLManager");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(e[0],e[1]),!0}},{"./WebGLManager":58}],54:[function(t,e,i){function s(t){o.call(this,t),this.filterStack=[],this.filterStack.push({renderTarget:t.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new h.Rectangle(0,0,t.width,t.height),this.currentFrame=null}var o=t("./WebGLManager"),r=t("../utils/RenderTarget"),n=t("../../../const"),a=t("../utils/Quad"),h=t("../../../math");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.onContextChange=function(){this.texturePool.length=0;var t=this.renderer.gl;this.quad=new a(t)},s.prototype.setFilterStack=function(t){this.filterStack=t},s.prototype.pushFilter=function(t,e){var i=t.filterArea?t.filterArea.clone():t.getBounds();i.x=0|i.x,i.y=0|i.y,i.width=0|i.width,i.height=0|i.height;var s=0|e[0].padding;if(i.x-=s,i.y-=s,i.width+=2*s,i.height+=2*s,this.renderer.currentRenderTarget.transform){var o=this.renderer.currentRenderTarget.transform;i.x+=o.tx,i.y+=o.ty,this.capFilterArea(i),i.x-=o.tx,i.y-=o.ty}else this.capFilterArea(i);if(i.width>0&&i.height>0){this.currentFrame=i;var r=this.getRenderTarget();this.renderer.setRenderTarget(r),r.clear(),this.filterStack.push({renderTarget:r,filter:e})}else this.filterStack.push({renderTarget:null,filter:e})},s.prototype.popFilter=function(){var t=this.filterStack.pop(),e=this.filterStack[this.filterStack.length-1],i=t.renderTarget;if(t.renderTarget){var s=e.renderTarget,o=this.renderer.gl;this.currentFrame=i.frame,this.quad.map(this.textureSize,i.frame),o.bindBuffer(o.ARRAY_BUFFER,this.quad.vertexBuffer),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var r=t.filter;if(o.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,o.FLOAT,!1,0,0),o.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,o.FLOAT,!1,0,32),o.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,o.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(n.BLEND_MODES.NORMAL),1===r.length)r[0].uniforms.dimensions&&(r[0].uniforms.dimensions.value[0]=this.renderer.width,r[0].uniforms.dimensions.value[1]=this.renderer.height,r[0].uniforms.dimensions.value[2]=this.quad.vertices[0],r[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),r[0].applyFilter(this.renderer,i,s),this.returnRenderTarget(i);else{for(var a=i,h=this.getRenderTarget(!0),l=0;l<r.length-1;l++){var c=r[l];c.uniforms.dimensions&&(c.uniforms.dimensions.value[0]=this.renderer.width,c.uniforms.dimensions.value[1]=this.renderer.height,c.uniforms.dimensions.value[2]=this.quad.vertices[0],c.uniforms.dimensions.value[3]=this.quad.vertices[5]),c.applyFilter(this.renderer,a,h);var u=a;a=h,h=u}r[r.length-1].applyFilter(this.renderer,a,s),this.returnRenderTarget(a),this.returnRenderTarget(h)}return t.filter}},s.prototype.getRenderTarget=function(t){var e=this.texturePool.pop()||new r(this.renderer.gl,this.textureSize.width,this.textureSize.height,n.SCALE_MODES.LINEAR,this.renderer.resolution*n.FILTER_RESOLUTION);return e.frame=this.currentFrame,t&&e.clear(!0),e},s.prototype.returnRenderTarget=function(t){this.texturePool.push(t)},s.prototype.applyFilter=function(t,e,i,s){var o=this.renderer.gl;this.renderer.setRenderTarget(i),s&&i.clear(),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),this.renderer.drawCount++},s.prototype.calculateMappedMatrix=function(t,e,i){var s=e.worldTransform.copy(h.Matrix.TEMP_MATRIX),o=e._texture.baseTexture,r=i.identity(),n=this.textureSize.height/this.textureSize.width;r.translate(t.x/this.textureSize.width,t.y/this.textureSize.height),r.scale(1,n);var a=this.textureSize.width/o.width,l=this.textureSize.height/o.height;return s.tx/=o.width*a,s.ty/=o.width*a,s.invert(),r.prepend(s),r.scale(1,1/n),r.scale(a,l),r.translate(e.anchor.x,e.anchor.y),r},s.prototype.capFilterArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.textureSize.width&&(t.width=this.textureSize.width-t.x),t.y+t.height>this.textureSize.height&&(t.height=this.textureSize.height-t.y)},s.prototype.resize=function(t,e){this.textureSize.width=t,this.textureSize.height=e;for(var i=0;i<this.texturePool.length;i++)this.texturePool[i].resize(t,e)},s.prototype.destroy=function(){this.quad.destroy(),o.prototype.destroy.call(this),this.filterStack=null,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null}},{"../../../const":22,"../../../math":33,"../utils/Quad":64,"../utils/RenderTarget":65,"./WebGLManager":58}],55:[function(t,e,i){function s(t){o.call(this,t),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var o=t("./WebGLManager"),r=t("../filters/SpriteMaskFilter");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.pushMask=function(t,e){e.texture?this.pushSpriteMask(t,e):this.pushStencilMask(t,e)},s.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.popStencilMask(t,e)},s.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool.pop();i||(i=[new r(e)]),i[0].maskSprite=e,this.renderer.filterManager.pushFilter(t,i)},s.prototype.popSpriteMask=function(){var t=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(t)},s.prototype.pushStencilMask=function(t,e){this.renderer.stencilManager.pushMask(e)},s.prototype.popStencilMask=function(t,e){this.renderer.stencilManager.popMask(e)}},{"../filters/SpriteMaskFilter":52,"./WebGLManager":58}],56:[function(t,e,i){function s(t){o.call(this,t),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var o=t("./WebGLManager"),r=t("../shaders/TextureShader"),n=t("../shaders/ComplexPrimitiveShader"),a=t("../shaders/PrimitiveShader"),h=t("../../../utils");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,h.pluginTarget.mixin(s),e.exports=s,s.prototype.onContextChange=function(){this.initPlugins();var t=this.renderer.gl;this.maxAttibs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.defaultShader=new r(this),this.primitiveShader=new a(this),this.complexPrimitiveShader=new n(this)},s.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(var i in t)this.tempAttribState[t[i]]=!0;var s=this.renderer.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],
this.attribState[e]?s.enableVertexAttribArray(e):s.disableVertexAttribArray(e))},s.prototype.setShader=function(t){return this._currentId===t.uid?!1:(this._currentId=t.uid,this.currentShader=t,this.renderer.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},s.prototype.destroy=function(){this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),o.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{"../../../utils":77,"../shaders/ComplexPrimitiveShader":59,"../shaders/PrimitiveShader":60,"../shaders/TextureShader":62,"./WebGLManager":58}],57:[function(t,e,i){function s(t){o.call(this,t),this.stencilMaskStack=null}var o=t("./WebGLManager"),r=t("../../../utils");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.stencilStack.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},s.prototype.pushStencil=function(t,e){this.renderer.currentRenderTarget.attachStencilBuffer();var i=this.renderer.gl,s=this.stencilMaskStack;this.bindGraphics(t,e),0===s.stencilStack.length&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),s.reverse=!0,s.count=0),s.stencilStack.push(e);var o=s.count;i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),1===e.mode?(i.drawElements(i.TRIANGLE_FAN,e.indices.length-4,i.UNSIGNED_SHORT,0),s.reverse?(i.stencilFunc(i.EQUAL,255-o,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,o,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(e.indices.length-4)),s.reverse?i.stencilFunc(i.EQUAL,255-(o+1),255):i.stencilFunc(i.EQUAL,o+1,255),s.reverse=!s.reverse):(s.reverse?(i.stencilFunc(i.EQUAL,o,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,255-o,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_STRIP,e.indices.length,i.UNSIGNED_SHORT,0),s.reverse?i.stencilFunc(i.EQUAL,o+1,255):i.stencilFunc(i.EQUAL,255-(o+1),255)),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),s.count++},s.prototype.bindGraphics=function(t,e){var i,s=this.renderer.gl;1===e.mode?(i=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(i),s.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),s.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),s.uniform3fv(i.uniforms.tint._location,r.hex2rgb(t.tint)),s.uniform3fv(i.uniforms.color._location,e.color),s.uniform1f(i.uniforms.alpha._location,t.worldAlpha),s.bindBuffer(s.ARRAY_BUFFER,e.buffer),s.vertexAttribPointer(i.attributes.aVertexPosition,2,s.FLOAT,!1,8,0),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(i=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(i),s.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),s.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),s.uniform3fv(i.uniforms.tint._location,r.hex2rgb(t.tint)),s.uniform1f(i.uniforms.alpha._location,t.worldAlpha),s.bindBuffer(s.ARRAY_BUFFER,e.buffer),s.vertexAttribPointer(i.attributes.aVertexPosition,2,s.FLOAT,!1,24,0),s.vertexAttribPointer(i.attributes.aColor,4,s.FLOAT,!1,24,8),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},s.prototype.popStencil=function(t,e){var i=this.renderer.gl,s=this.stencilMaskStack;if(s.stencilStack.pop(),s.count--,0===s.stencilStack.length)i.disable(i.STENCIL_TEST);else{var o=s.count;this.bindGraphics(t,e),i.colorMask(!1,!1,!1,!1),1===e.mode?(s.reverse=!s.reverse,s.reverse?(i.stencilFunc(i.EQUAL,255-(o+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,o+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(e.indices.length-4)),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),i.drawElements(i.TRIANGLE_FAN,e.indices.length-4,i.UNSIGNED_SHORT,0),this.renderer.drawCount+=2,s.reverse?i.stencilFunc(i.EQUAL,o,255):i.stencilFunc(i.EQUAL,255-o,255)):(s.reverse?(i.stencilFunc(i.EQUAL,o+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,255-(o+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_STRIP,e.indices.length,i.UNSIGNED_SHORT,0),this.renderer.drawCount++,s.reverse?i.stencilFunc(i.EQUAL,o,255):i.stencilFunc(i.EQUAL,255-o,255)),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}},s.prototype.destroy=function(){o.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},s.prototype.pushMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),t.dirty&&this.renderer.plugins.graphics.updateGraphics(t,this.renderer.gl),t._webGL[this.renderer.gl.id].data.length&&this.pushStencil(t,t._webGL[this.renderer.gl.id].data[0])},s.prototype.popMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(t,t._webGL[this.renderer.gl.id].data[0])}},{"../../../utils":77,"./WebGLManager":58}],58:[function(t,e,i){function s(t){this.renderer=t,this.renderer.on("context",this.onContextChange,this)}s.prototype.constructor=s,e.exports=s,s.prototype.onContextChange=function(){},s.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],59:[function(t,e,i){function s(t){o.call(this,t,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var o=t("./Shader");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s},{"./Shader":61}],60:[function(t,e,i){function s(t){o.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var o=t("./Shader");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s},{"./Shader":61}],61:[function(t,e,i){function s(t,e,i,s,r){if(!e||!i)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=o.uid(),this.gl=t.renderer.gl,this.shaderManager=t,this.program=null,this.uniforms=s||{},this.attributes=r||{},this.textureCount=1,this.vertexSrc=e,this.fragmentSrc=i,this.init()}var o=t("../../../utils");s.prototype.constructor=s,e.exports=s,s.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},s.prototype.cacheUniformLocations=function(t){for(var e=0;e<t.length;++e)this.uniforms[t[e]]._location=this.gl.getUniformLocation(this.program,t[e])},s.prototype.cacheAttributeLocations=function(t){for(var e=0;e<t.length;++e)this.attributes[t[e]]=this.gl.getAttribLocation(this.program,t[e])},s.prototype.compile=function(){var t=this.gl,e=this._glCompile(t.VERTEX_SHADER,this.vertexSrc),i=this._glCompile(t.FRAGMENT_SHADER,this.fragmentSrc),s=t.createProgram();return t.attachShader(s,e),t.attachShader(s,i),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(""!==t.getProgramInfoLog(s)&&void 0,t.deleteProgram(s),s=null),t.deleteShader(e),t.deleteShader(i),this.program=s},s.prototype.syncUniform=function(t){var e,i,s=t._location,r=t.value,n=this.gl;switch(t.type){case"b":case"bool":case"boolean":n.uniform1i(s,r?1:0);break;case"i":case"1i":n.uniform1i(s,r);break;case"f":case"1f":n.uniform1f(s,r);break;case"2f":n.uniform2f(s,r[0],r[1]);break;case"3f":n.uniform3f(s,r[0],r[1],r[2]);break;case"4f":n.uniform4f(s,r[0],r[1],r[2],r[3]);break;case"v2":n.uniform2f(s,r.x,r.y);break;case"v3":n.uniform3f(s,r.x,r.y,r.z);break;case"v4":n.uniform4f(s,r.x,r.y,r.z,r.w);break;case"1iv":n.uniform1iv(s,r);break;case"2iv":n.uniform2iv(s,r);break;case"3iv":n.uniform3iv(s,r);break;case"4iv":n.uniform4iv(s,r);break;case"1fv":n.uniform1fv(s,r);break;case"2fv":n.uniform2fv(s,r);break;case"3fv":n.uniform3fv(s,r);break;case"4fv":n.uniform4fv(s,r);break;case"m2":case"mat2":case"Matrix2fv":n.uniformMatrix2fv(s,t.transpose,r);break;case"m3":case"mat3":case"Matrix3fv":n.uniformMatrix3fv(s,t.transpose,r);break;case"m4":case"mat4":case"Matrix4fv":n.uniformMatrix4fv(s,t.transpose,r);break;case"c":"number"==typeof r&&(r=o.hex2rgb(r)),n.uniform3f(s,r[0],r[1],r[2]);break;case"iv1":n.uniform1iv(s,r);break;case"iv":n.uniform3iv(s,r);break;case"fv1":n.uniform1fv(s,r);break;case"fv":n.uniform3fv(s,r);break;case"v2v":for(t._array||(t._array=new Float32Array(2*r.length)),e=0,i=r.length;i>e;++e)t._array[2*e]=r[e].x,t._array[2*e+1]=r[e].y;n.uniform2fv(s,t._array);break;case"v3v":for(t._array||(t._array=new Float32Array(3*r.length)),e=0,i=r.length;i>e;++e)t._array[3*e]=r[e].x,t._array[3*e+1]=r[e].y,t._array[3*e+2]=r[e].z;n.uniform3fv(s,t._array);break;case"v4v":for(t._array||(t._array=new Float32Array(4*r.length)),e=0,i=r.length;i>e;++e)t._array[4*e]=r[e].x,t._array[4*e+1]=r[e].y,t._array[4*e+2]=r[e].z,t._array[4*e+3]=r[e].w;n.uniform4fv(s,t._array);break;case"t":case"sampler2D":if(!t.value||!t.value.baseTexture.hasLoaded)break;n.activeTexture(n["TEXTURE"+this.textureCount]);var a=t.value.baseTexture._glTextures[n.id];a||(this.initSampler2D(t),a=t.value.baseTexture._glTextures[n.id]),n.bindTexture(n.TEXTURE_2D,a),n.uniform1i(t._location,this.textureCount),this.textureCount++}},s.prototype.syncUniforms=function(){this.textureCount=1;for(var t in this.uniforms)this.syncUniform(this.uniforms[t])},s.prototype.initSampler2D=function(t){var e=this.gl,i=t.value.baseTexture;if(i.hasLoaded)if(t.textureData){var s=t.textureData;i._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,i._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,s.luminance?e.LUMINANCE:e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,s.magFilter?s.magFilter:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,s.wrapS?s.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,s.wrapS?s.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,s.wrapT?s.wrapT:e.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(i)},s.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},s.prototype._glCompile=function(t,e){var i=this.gl.createShader(t);return this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:null}},{"../../../utils":77}],62:[function(t,e,i){function s(t,e,i,r,n){var a={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(r)for(var h in r)a[h]=r[h];var l={aVertexPosition:0,aTextureCoord:0,aColor:0};if(n)for(var c in n)l[c]=n[c];e=e||s.defaultVertexSrc,i=i||s.defaultFragmentSrc,o.call(this,t,e,i,a,l)}var o=t("./Shader");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),s.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":61}],63:[function(t,e,i){function s(t){o.call(this,t)}var o=t("../managers/WebGLManager");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.start=function(){},s.prototype.stop=function(){this.flush()},s.prototype.flush=function(){},s.prototype.render=function(t){}},{"../managers/WebGLManager":58}],64:[function(t,e,i){function s(t){this.gl=t,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.upload()}s.prototype.constructor=s,s.prototype.map=function(t,e){var i=0,s=0;this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+e.width/t.width,this.uvs[3]=s,this.uvs[4]=i+e.width/t.width,this.uvs[5]=s+e.height/t.height,this.uvs[6]=i,this.uvs[7]=s+e.height/t.height,i=e.x,s=e.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+e.width,this.vertices[3]=s,this.vertices[4]=i+e.width,this.vertices[5]=s+e.height,this.vertices[6]=i,this.vertices[7]=s+e.height,this.upload()},s.prototype.upload=function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this.uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this.colors)},s.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},e.exports=s},{}],65:[function(t,e,i){var s=t("../../../math"),o=t("../../../utils"),r=t("../../../const"),n=t("./StencilMaskStack"),a=function(t,e,i,a,h,l){if(this.gl=t,this.frameBuffer=null,this.texture=null,this.size=new s.Rectangle(0,0,1,1),this.resolution=h||r.RESOLUTION,this.projectionMatrix=new s.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new n,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=a||r.SCALE_MODES.DEFAULT,this.root=l,!this.root){this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,a===r.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,a===r.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST);var c=o.isPowerOfTwo(e,i);c?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}this.resize(e,i)};a.prototype.constructor=a,e.exports=a,a.prototype.clear=function(t){var e=this.gl;t&&e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},a.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var t=this.gl;this.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencilBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},a.prototype.activate=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer);var e=this.frame||this.size;this.calculateProjection(e),this.transform&&this.projectionMatrix.append(this.transform),t.viewport(0,0,e.width*this.resolution,e.height*this.resolution)},a.prototype.calculateProjection=function(t){var e=this.projectionMatrix;e.identity(),this.root?(e.a=1/t.width*2,e.d=-1/t.height*2,e.tx=-1-t.x*e.a,e.ty=1-t.y*e.d):(e.a=1/t.width*2,e.d=1/t.height*2,e.tx=-1-t.x*e.a,e.ty=-1-t.y*e.d)},a.prototype.resize=function(t,e){if(t=0|t,e=0|e,this.size.width!==t||this.size.height!==e){if(this.size.width=t,this.size.height=e,!this.root){var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t*this.resolution,e*this.resolution,0,i.RGBA,i.UNSIGNED_BYTE,null),this.stencilBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencilBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t*this.resolution,e*this.resolution))}var s=this.frame||this.size;this.calculateProjection(s)}},a.prototype.destroy=function(){var t=this.gl;t.deleteRenderbuffer(this.stencilBuffer),t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{"../../../const":22,"../../../math":33,"../../../utils":77,"./StencilMaskStack":66}],66:[function(t,e,i){function s(){this.stencilStack=[],this.reverse=!0,this.count=0}s.prototype.constructor=s,e.exports=s},{}],67:[function(t,e,i){function s(t){n.call(this),this.anchor=new o.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=l.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=t||r.EMPTY}var o=t("../math"),r=t("../textures/Texture"),n=t("../display/Container"),a=t("../renderers/canvas/utils/CanvasTinter"),h=t("../utils"),l=t("../const"),c=new o.Point,u=o.GroupD8,d=new o.Matrix;s.prototype=Object.create(n.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(t){var e=h.sign(this.scale.x)||1;this.scale.x=e*t/this.texture._frame.width,this._width=t}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(t){var e=h.sign(this.scale.y)||1;this.scale.y=e*t/this.texture._frame.height,this._height=t}},texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),s.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=h.sign(this.scale.x)*this._width/this.texture.frame.width),this._height&&(this.scale.y=h.sign(this.scale.y)*this._height/this.texture.frame.height)},s.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this)},s.prototype.getBounds=function(t){if(!this._currentBounds){var e,i,s,o,r=this._texture._frame.width,n=this._texture._frame.height,a=r*(1-this.anchor.x),h=r*-this.anchor.x,l=n*(1-this.anchor.y),c=n*-this.anchor.y,u=t||this.worldTransform,d=u.a,p=u.b,f=u.c,m=u.d,g=u.tx,v=u.ty,y=d*h+f*c+g,_=m*c+p*h+v,x=d*a+f*c+g,b=m*c+p*a+v,w=d*a+f*l+g,S=m*l+p*a+v,T=d*h+f*l+g,C=m*l+p*h+v;if(e=y,e=e>x?x:e,e=e>w?w:e,e=e>T?T:e,s=_,s=s>b?b:s,s=s>S?S:s,s=s>C?C:s,i=y,i=x>i?x:i,i=w>i?w:i,i=T>i?T:i,o=_,o=b>o?b:o,o=S>o?S:o,o=C>o?C:o,this.children.length){var P=this.containerGetBounds();a=P.x,h=P.x+P.width,l=P.y,c=P.y+P.height,e=a>e?e:a,s=l>s?s:l,i=i>h?i:h,o=o>c?o:c}var A=this._bounds;A.x=e,A.width=i-e,A.y=s,A.height=o-s,this._currentBounds=A}return this._currentBounds},s.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},s.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);var e,i=this._texture._frame.width,s=this._texture._frame.height,o=-i*this.anchor.x;return c.x>o&&c.x<o+i&&(e=-s*this.anchor.y,c.y>e&&c.y<e+s)},s.prototype._renderCanvas=function(t){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)){var e=t.blendModes[this.blendMode];if(e!==t.context.globalCompositeOperation&&(t.context.globalCompositeOperation=e),this.texture.valid){var i,s,o=this._texture,r=this.worldTransform,n=o.crop.width,h=o.crop.height;t.context.globalAlpha=this.worldAlpha;var c=o.baseTexture.scaleMode===l.SCALE_MODES.LINEAR;t.smoothProperty&&t.context[t.smoothProperty]!==c&&(t.context[t.smoothProperty]=c),2===(3&o.rotate)&&(n=o.crop.height,h=o.crop.width),o.trim?(i=o.crop.width/2+o.trim.x-this.anchor.x*o.trim.width,s=o.crop.height/2+o.trim.y-this.anchor.y*o.trim.height):(i=(.5-this.anchor.x)*o._frame.width,s=(.5-this.anchor.y)*o._frame.height),o.rotate&&(r.copy(d),r=d,u.matrixAppendRotationInv(r,o.rotate,i,s),i=0,s=0),i-=n/2,s-=h/2,t.roundPixels?(t.context.setTransform(r.a,r.b,r.c,r.d,r.tx*t.resolution|0,r.ty*t.resolution|0),i=0|i,s=0|s):t.context.setTransform(r.a,r.b,r.c,r.d,r.tx*t.resolution,r.ty*t.resolution);var p=o.baseTexture.resolution;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=a.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,n*p,h*p,i*t.resolution,s*t.resolution,n*t.resolution,h*t.resolution)):t.context.drawImage(o.baseTexture.source,o.crop.x*p,o.crop.y*p,n*p,h*p,i*t.resolution,s*t.resolution,n*t.resolution,h*t.resolution)}}},s.prototype.destroy=function(t,e){n.prototype.destroy.call(this),this.anchor=null,t&&this._texture.destroy(e),this._texture=null,this.shader=null},s.fromFrame=function(t){var e=h.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new s(e)},s.fromImage=function(t,e,i){return new s(r.fromImage(t,e,i))}},{"../const":22,"../display/Container":23,"../math":33,"../renderers/canvas/utils/CanvasTinter":48,"../textures/Texture":72,"../utils":77}],68:[function(t,e,i){function s(t){o.call(this,t),this.vertSize=5,this.IOSFix=!0,this.vertByteSize=4*this.vertSize,this.size=n.SPRITE_BATCH_SIZE;var e=4*this.size*this.vertByteSize,i=6*this.size;this.vertices=new ArrayBuffer(e),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(i);for(var s=0,r=0;i>s;s+=6,r+=4)this.indices[s+0]=r+0,this.indices[s+1]=r+1,this.indices[s+2]=r+2,this.indices[s+3]=r+0,this.indices[s+4]=r+2,this.indices[s+5]=r+3;this.currentBatchSize=0,this.sprites=[],this.shader=null,this.vertexBufferCount=0,this.vertexBufferMax=1,this.vertexBuffers=[],t.on("prerender",this.onPrerender,this)}var o=t("../../renderers/webgl/utils/ObjectRenderer"),r=t("../../renderers/webgl/WebGLRenderer"),n=t("../../const");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,r.registerPlugin("sprite",s),s.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader;for(var e=0;e<this.vertexBufferMax;e++)this.vertexBuffers[e]=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffers[e]),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW);this.vertexBuffer=this.vertexBuffers[0],t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.currentBlendMode=99999},s.prototype.onPrerender=function(){this.vertexBufferCount=0},s.prototype.render=function(t){var e=t._texture;this.currentBatchSize>=this.size&&this.flush();var i=e._uvs;if(i){var s,o,r,n,a=t.anchor.x,h=t.anchor.y;if(e.trim&&void 0===t.tileScale){var l=e.trim;o=l.x-a*l.width,s=o+e.crop.width,n=l.y-h*l.height,r=n+e.crop.height}else s=e._frame.width*(1-a),o=e._frame.width*-a,r=e._frame.height*(1-h),n=e._frame.height*-h;var c=this.currentBatchSize*this.vertByteSize,u=t.worldTransform,d=u.a,p=u.b,f=u.c,m=u.d,g=u.tx,v=u.ty,y=this.colors,_=this.positions;if(this.renderer.roundPixels){var x=this.renderer.resolution;_[c]=((d*o+f*n+g)*x|0)/x,_[c+1]=((m*n+p*o+v)*x|0)/x,_[c+5]=((d*s+f*n+g)*x|0)/x,_[c+6]=((m*n+p*s+v)*x|0)/x,_[c+10]=((d*s+f*r+g)*x|0)/x,_[c+11]=((m*r+p*s+v)*x|0)/x,_[c+15]=((d*o+f*r+g)*x|0)/x,_[c+16]=((m*r+p*o+v)*x|0)/x}else _[c]=d*o+f*n+g,_[c+1]=m*n+p*o+v,_[c+5]=d*s+f*n+g,_[c+6]=m*n+p*s+v,_[c+10]=d*s+f*r+g,_[c+11]=m*r+p*s+v,_[c+15]=d*o+f*r+g,_[c+16]=m*r+p*o+v;_[c+2]=i.x0,_[c+3]=i.y0,_[c+7]=i.x1,_[c+8]=i.y1,_[c+12]=i.x2,_[c+13]=i.y2,_[c+17]=i.x3,_[c+18]=i.y3;var b=t.tint;y[c+4]=y[c+9]=y[c+14]=y[c+19]=(b>>16)+(65280&b)+((255&b)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},s.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.renderer.gl;if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var i=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);e.bufferSubData(e.ARRAY_BUFFER,0,i)}for(var s,o,r,n,a=0,h=0,l=null,c=this.renderer.blendModeManager.currentBlendMode,u=null,d=!1,p=!1,f=0,m=this.currentBatchSize;m>f;f++)n=this.sprites[f],s=n._texture.baseTexture,o=n.blendMode,r=n.shader||this.shader,d=c!==o,p=u!==r,(l!==s||d||p)&&(this.renderBatch(l,a,h),h=f,a=0,l=s,d&&(c=o,this.renderer.blendModeManager.setBlendMode(c)),p&&(u=r,t=u.shaders?u.shaders[e.id]:u,t||(t=u.getShader(this.renderer)),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),e.activeTexture(e.TEXTURE0))),a++;this.renderBatch(l,a,h),this.currentBatchSize=0,this.IOSFix&&this.nextBuffer()}},s.prototype.renderBatch=function(t,e,i){if(0!==e){var s=this.renderer.gl;t._glTextures[s.id]?s.bindTexture(s.TEXTURE_2D,t._glTextures[s.id]):this.renderer.updateTexture(t),s.drawElements(s.TRIANGLES,6*e,s.UNSIGNED_SHORT,6*i*2),this.renderer.drawCount++}},s.prototype.start=function(){var t=this.renderer.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.nextBuffer()},s.prototype.nextBuffer=function(){var t=this.renderer.gl;this.vertexBufferCount>this.vertexBufferMax-1?(this.vertexBufferMax++,this.vertexBuffers[this.vertexBufferCount]=t.createBuffer(),this.vertexBuffer=this.vertexBuffers[this.vertexBufferCount],t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW)):(this.vertexBuffer=this.vertexBuffers[this.vertexBufferCount],t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer));var e=this.vertByteSize;t.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,t.FLOAT,!1,e,8),t.vertexAttribPointer(this.shader.attributes.aColor,4,t.UNSIGNED_BYTE,!0,e,16),this.vertexBufferCount++},s.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),o.prototype.destroy.call(this),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},{"../../const":22,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63}],69:[function(t,e,i){function s(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||h.RESOLUTION,this._text=null,this._style=null;var s=r.fromCanvas(this.canvas);s.trim=new n.Rectangle,o.call(this,s),this.text=t,this.style=e}var o=t("../sprites/Sprite"),r=t("../textures/Texture"),n=t("../math"),a=t("../utils"),h=t("../const");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.fontPropertiesCache={},s.fontPropertiesCanvas=document.createElement("canvas"),s.fontPropertiesContext=s.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(s.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(t){this.scale.x=t/this._texture._frame.width,this._width=t}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(t){this.scale.y=t/this._texture._frame.height,this._height=t}},style:{get:function(){return this._style},set:function(t){t=t||{},"number"==typeof t.fill&&(t.fill=a.hex2string(t.fill)),"number"==typeof t.stroke&&(t.stroke=a.hex2string(t.stroke)),"number"==typeof t.dropShadowColor&&(t.dropShadowColor=a.hex2string(t.dropShadowColor)),t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.breakWords=t.breakWords||!1,t.letterSpacing=t.letterSpacing||0,t.dropShadow=t.dropShadow||!1,t.dropShadowColor=t.dropShadowColor||"#000000",t.dropShadowAngle=void 0!==t.dropShadowAngle?t.dropShadowAngle:Math.PI/6,t.dropShadowDistance=void 0!==t.dropShadowDistance?t.dropShadowDistance:5,t.dropShadowBlur=void 0!==t.dropShadowBlur?t.dropShadowBlur:0,t.padding=t.padding||0,t.textBaseline=t.textBaseline||"alphabetic",t.lineJoin=t.lineJoin||"miter",t.miterLimit=t.miterLimit||10,this._style=t,this.dirty=!0}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),s.prototype.updateText=function(){var t=this._style;this.context.font=t.font;for(var e=t.wordWrap?this.wordWrap(this._text):this._text,i=e.split(/(?:\r\n|\r|\n)/),s=new Array(i.length),o=0,r=this.determineFontProperties(t.font),n=0;n<i.length;n++){var a=this.context.measureText(i[n]).width+(i[n].length-1)*t.letterSpacing;s[n]=a,o=Math.max(o,a)}var h=o+t.strokeThickness;t.dropShadow&&(h+=t.dropShadowDistance),this.canvas.width=Math.ceil((h+this.context.lineWidth)*this.resolution);var l=this.style.lineHeight||r.fontSize+t.strokeThickness,c=l*i.length;t.dropShadow&&(c+=t.dropShadowDistance),this.canvas.height=Math.ceil((c+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=t.font,this.context.strokeStyle=t.stroke,this.context.lineWidth=t.strokeThickness,this.context.textBaseline=t.textBaseline,this.context.lineJoin=t.lineJoin,this.context.miterLimit=t.miterLimit;var u,d;if(t.dropShadow){t.dropShadowBlur>0?(this.context.shadowColor=t.dropShadowColor,this.context.shadowBlur=t.dropShadowBlur):this.context.fillStyle=t.dropShadowColor;var p=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,f=Math.sin(t.dropShadowAngle)*t.dropShadowDistance;for(n=0;n<i.length;n++)u=t.strokeThickness/2,d=t.strokeThickness/2+n*l+r.ascent,"right"===t.align?u+=o-s[n]:"center"===t.align&&(u+=(o-s[n])/2),t.fill&&this.drawLetterSpacing(i[n],u+p,d+f+t.padding)}for(this.context.fillStyle=t.fill,n=0;n<i.length;n++)u=t.strokeThickness/2,d=t.strokeThickness/2+n*l+r.ascent,"right"===t.align?u+=o-s[n]:"center"===t.align&&(u+=(o-s[n])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(i[n],u,d+t.padding,!0),t.fill&&this.drawLetterSpacing(i[n],u,d+t.padding);this.updateTexture()},s.prototype.drawLetterSpacing=function(t,e,i,s){var o=this._style,r=o.letterSpacing;if(0===r)return void(s?this.context.strokeText(t,e,i):this.context.fillText(t,e,i));for(var n,a=String.prototype.split.call(t,""),h=0,l=e;h<t.length;)n=a[h++],s?this.context.strokeText(n,l,i):this.context.fillText(n,l,i),
l+=this.context.measureText(n).width+r},s.prototype.updateTexture=function(){var t=this._texture,e=this._style;t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.crop.width=t._frame.width=this.canvas.width/this.resolution,t.crop.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=0,t.trim.y=-e.padding,t.trim.width=t._frame.width,t.trim.height=t._frame.height-2*e.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},s.prototype.renderWebGL=function(t){this.dirty&&this.updateText(),o.prototype.renderWebGL.call(this,t)},s.prototype._renderCanvas=function(t){this.dirty&&this.updateText(),o.prototype._renderCanvas.call(this,t)},s.prototype.determineFontProperties=function(t){var e=s.fontPropertiesCache[t];if(!e){e={};var i=s.fontPropertiesCanvas,o=s.fontPropertiesContext;o.font=t;var r=Math.ceil(o.measureText("|MÉq").width),n=Math.ceil(o.measureText("M").width),a=2*n;n=1.4*n|0,i.width=r,i.height=a,o.fillStyle="#f00",o.fillRect(0,0,r,a),o.font=t,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText("|MÉq",0,n);var h,l,c=o.getImageData(0,0,r,a).data,u=c.length,d=4*r,p=0,f=!1;for(h=0;n>h;h++){for(l=0;d>l;l+=4)if(255!==c[p+l]){f=!0;break}if(f)break;p+=d}for(e.ascent=n-h,p=u-d,f=!1,h=a;h>n;h--){for(l=0;d>l;l+=4)if(255!==c[p+l]){f=!0;break}if(f)break;p-=d}e.descent=h-n,e.fontSize=e.ascent+e.descent,s.fontPropertiesCache[t]=e}return e},s.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),s=this._style.wordWrapWidth,o=0;o<i.length;o++){for(var r=s,n=i[o].split(" "),a=0;a<n.length;a++){var h=this.context.measureText(n[a]).width;if(this._style.breakWords&&h>s)for(var l=n[a].split(""),c=0;c<l.length;c++){var u=this.context.measureText(l[c]).width;u>r?(e+="\n"+l[c],r=s-u):(0===c&&(e+=" "),e+=l[c],r-=u)}else{var d=h+this.context.measureText(" ").width;0===a||d>r?(a>0&&(e+="\n"),e+=n[a],r=s-h):(r-=d,e+=" "+n[a])}}o<i.length-1&&(e+="\n")}return e},s.prototype.getBounds=function(t){return this.dirty&&this.updateText(),o.prototype.getBounds.call(this,t)},s.prototype.destroy=function(t){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===t?!0:t)}},{"../const":22,"../math":33,"../sprites/Sprite":67,"../textures/Texture":72,"../utils":77}],70:[function(t,e,i){function s(t,e,i){n.call(this),this.uid=o.uid(),this.resolution=i||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=e||r.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures={},t&&this.loadSource(t)}var o=t("../utils"),r=t("../const"),n=t("eventemitter3");s.prototype=Object.create(n.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=o.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},s.prototype.loadSource=function(t){var e=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=t,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!t.getContext){this.isLoading=!0;var i=this;t.onload=function(){t.onload=null,t.onerror=null,i.isLoading&&(i.isLoading=!1,i._sourceLoaded(),i.emit("loaded",i))},t.onerror=function(){t.onload=null,t.onerror=null,i.isLoading&&(i.isLoading=!1,i.emit("error",i))},t.complete&&t.src&&(this.isLoading=!1,t.onload=null,t.onerror=null,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this))}},s.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},s.prototype.destroy=function(){this.imageUrl?(delete o.BaseTextureCache[this.imageUrl],delete o.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete o.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},s.prototype.dispose=function(){this.emit("dispose",this)},s.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},s.fromImage=function(t,e,i){var r=o.BaseTextureCache[t];if(void 0===e&&0!==t.indexOf("data:")&&(e=!0),!r){var n=new Image;e&&(n.crossOrigin=""),r=new s(n,i),r.imageUrl=t,n.src=t,o.BaseTextureCache[t]=r,r.resolution=o.getResolutionOfUrl(t)}return r},s.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+o.uid());var i=o.BaseTextureCache[t._pixiId];return i||(i=new s(t,e),o.BaseTextureCache[t._pixiId]=i),i}},{"../const":22,"../utils":77,eventemitter3:10}],71:[function(t,e,i){function s(t,e,i,s,u){if(!t)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");e=e||100,i=i||100,u=u||c.RESOLUTION;var d=new o;if(d.width=e,d.height=i,d.resolution=u,d.scaleMode=s||c.SCALE_MODES.DEFAULT,d.hasLoaded=!0,r.call(this,d,new l.Rectangle(0,0,e,i)),this.width=e,this.height=i,this.resolution=u,this.render=null,this.renderer=t,this.renderer.type===c.RENDERER_TYPE.WEBGL){var p=this.renderer.gl;this.textureBuffer=new n(p,this.width,this.height,d.scaleMode,this.resolution),this.baseTexture._glTextures[p.id]=this.textureBuffer.texture,this.filterManager=new a(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(e,i),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new h(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var o=t("./BaseTexture"),r=t("./Texture"),n=t("../renderers/webgl/utils/RenderTarget"),a=t("../renderers/webgl/managers/FilterManager"),h=t("../renderers/canvas/utils/CanvasBuffer"),l=t("../math"),c=t("../const"),u=new l.Matrix;s.prototype=Object.create(r.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.resize=function(t,e,i){t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=this._frame.width=this.crop.width=t,this.height=this._frame.height=this.crop.height=e,i&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},s.prototype.clear=function(){this.valid&&(this.renderer.type===c.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},s.prototype.renderWebGL=function(t,e,i,s){if(this.valid){if(s=void 0!==s?s:!0,this.textureBuffer.transform=e,this.textureBuffer.activate(),t.worldAlpha=1,s){t.worldTransform.identity(),t.currentBounds=null;var o,r,n=t.children;for(o=0,r=n.length;r>o;++o)n[o].updateTransform()}var a=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(t,this.textureBuffer,i),this.renderer.filterManager=a}},s.prototype.renderCanvas=function(t,e,i,s){if(this.valid){s=!!s;var o=u;o.identity(),e&&o.append(e);var r=t.worldTransform;t.worldTransform=o,t.worldAlpha=1;var n,a,h=t.children;for(n=0,a=h.length;a>n;++n)h[n].updateTransform();i&&this.textureBuffer.clear();var l=this.textureBuffer.context,c=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,l),this.renderer.resolution=c,t.worldTransform===o&&(t.worldTransform=r)}},s.prototype.destroy=function(){r.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},s.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},s.prototype.getBase64=function(){return this.getCanvas().toDataURL()},s.prototype.getCanvas=function(){if(this.renderer.type===c.RENDERER_TYPE.WEBGL){var t=this.renderer.gl,e=this.textureBuffer.size.width,i=this.textureBuffer.size.height,s=new Uint8Array(4*e*i);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,i,t.RGBA,t.UNSIGNED_BYTE,s),t.bindFramebuffer(t.FRAMEBUFFER,null);var o=new h(e,i),r=o.context.getImageData(0,0,e,i);return r.data.set(s),o.context.putImageData(r,0,0),o.canvas}return this.textureBuffer.canvas},s.prototype.getPixels=function(){var t,e;if(this.renderer.type===c.RENDERER_TYPE.WEBGL){var i=this.renderer.gl;t=this.textureBuffer.size.width,e=this.textureBuffer.size.height;var s=new Uint8Array(4*t*e);return i.bindFramebuffer(i.FRAMEBUFFER,this.textureBuffer.frameBuffer),i.readPixels(0,0,t,e,i.RGBA,i.UNSIGNED_BYTE,s),i.bindFramebuffer(i.FRAMEBUFFER,null),s}return t=this.textureBuffer.canvas.width,e=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,t,e).data},s.prototype.getPixel=function(t,e){if(this.renderer.type===c.RENDERER_TYPE.WEBGL){var i=this.renderer.gl,s=new Uint8Array(4);return i.bindFramebuffer(i.FRAMEBUFFER,this.textureBuffer.frameBuffer),i.readPixels(t,e,1,1,i.RGBA,i.UNSIGNED_BYTE,s),i.bindFramebuffer(i.FRAMEBUFFER,null),s}return this.textureBuffer.canvas.getContext("2d").getImageData(t,e,1,1).data}},{"../const":22,"../math":33,"../renderers/canvas/utils/CanvasBuffer":45,"../renderers/webgl/managers/FilterManager":54,"../renderers/webgl/utils/RenderTarget":65,"./BaseTexture":70,"./Texture":72}],72:[function(t,e,i){function s(t,e,i,o,r){if(a.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new h.Rectangle(0,0,1,1)),t instanceof s&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=o,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=i||e,this._rotate=+(r||0),r===!0)this._rotate=2;else if(this._rotate%2!==0)throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually";t.hasLoaded?(this.noFrame&&(e=new h.Rectangle(0,0,t.width,t.height),t.on("update",this.onBaseTextureUpdated,this)),this.frame=e):t.once("loaded",this.onBaseTextureLoaded,this)}var o=t("./BaseTexture"),r=t("./VideoBaseTexture"),n=t("./TextureUvs"),a=t("eventemitter3"),h=t("../math"),l=t("../utils");s.prototype=Object.create(a.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{frame:{get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,this.width=t.width,this.height=t.height,!this.trim&&!this.rotate&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=t,this.valid&&this._updateUvs()}},rotate:{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}}}),s.prototype.update=function(){this.baseTexture.update()},s.prototype.onBaseTextureLoaded=function(t){this.noFrame?this.frame=new h.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.emit("update",this)},s.prototype.onBaseTextureUpdated=function(t){this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},s.prototype.destroy=function(t){this.baseTexture&&(t&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},s.prototype.clone=function(){return new s(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},s.prototype._updateUvs=function(){this._uvs||(this._uvs=new n),this._uvs.set(this.crop,this.baseTexture,this.rotate)},s.fromImage=function(t,e,i){var r=l.TextureCache[t];return r||(r=new s(o.fromImage(t,e,i)),l.TextureCache[t]=r),r},s.fromFrame=function(t){var e=l.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},s.fromCanvas=function(t,e){return new s(o.fromCanvas(t,e))},s.fromVideo=function(t,e){return"string"==typeof t?s.fromVideoUrl(t,e):new s(r.fromVideo(t,e))},s.fromVideoUrl=function(t,e){return new s(r.fromUrl(t,e))},s.addTextureToCache=function(t,e){l.TextureCache[e]=t},s.removeTextureFromCache=function(t){var e=l.TextureCache[t];return delete l.TextureCache[t],delete l.BaseTextureCache[t],e},s.EMPTY=new s(new o)},{"../math":33,"../utils":77,"./BaseTexture":70,"./TextureUvs":73,"./VideoBaseTexture":74,eventemitter3:10}],73:[function(t,e,i){function s(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}e.exports=s;var o=t("../math/GroupD8");s.prototype.set=function(t,e,i){var s=e.width,r=e.height;if(i){var n=o.isSwapWidthHeight(i),a=(n?t.height:t.width)/2/s,h=(n?t.width:t.height)/2/r,l=t.x/s+a,c=t.y/r+h;i=o.add(i,o.NW),this.x0=l+a*o.uX(i),this.y0=c+h*o.uY(i),i=o.add(i,2),this.x1=l+a*o.uX(i),this.y1=c+h*o.uY(i),i=o.add(i,2),this.x2=l+a*o.uX(i),this.y2=c+h*o.uY(i),i=o.add(i,2),this.x3=l+a*o.uX(i),this.y3=c+h*o.uY(i)}else this.x0=t.x/s,this.y0=t.y/r,this.x1=(t.x+t.width)/s,this.y1=t.y/r,this.x2=(t.x+t.width)/s,this.y2=(t.y+t.height)/r,this.x3=t.x/s,this.y3=(t.y+t.height)/r}},{"../math/GroupD8":30}],74:[function(t,e,i){function s(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),r.call(this,t,e),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),t.complete||(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function o(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=t,i.type=e,i}var r=t("./BaseTexture"),n=t("../utils");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,e.exports=s,s.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},s.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},s.prototype._onPlayStop=function(){this.autoUpdate=!1},s.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},s.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete n.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),r.prototype.destroy.call(this)},s.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+n.uid());var i=n.BaseTextureCache[t._pixiId];return i||(i=new s(t,e),n.BaseTextureCache[t._pixiId]=i),i},s.fromUrl=function(t,e){var i=document.createElement("video");if(Array.isArray(t))for(var r=0;r<t.length;++r)i.appendChild(o(t[r].src||t[r],t[r].mime));else i.appendChild(o(t.src||t,t.mime));return i.load(),i.play(),s.fromVideo(i,e)},s.fromUrls=s.fromUrl},{"../utils":77,"./BaseTexture":70}],75:[function(t,e,i){function s(){var t=this;this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._emitter.listeners(n,!0)&&(t._requestId=requestAnimationFrame(t._tick)))},this._emitter=new r,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/o.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var o=t("../const"),r=t("eventemitter3"),n="tick";Object.defineProperties(s.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,o.TARGET_FPMS);this._maxElapsedMS=1/e}}}),s.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(n,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},s.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},s.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},s.prototype.add=function(t,e){return this._emitter.on(n,t,e),this._startIfPossible(),this},s.prototype.addOnce=function(t,e){return this._emitter.once(n,t,e),this._startIfPossible(),this},s.prototype.remove=function(t,e){return this._emitter.off(n,t,e),this._emitter.listeners(n,!0)||this._cancelIfNeeded(),this},s.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},s.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},s.prototype.update=function(t){var e;t=t||performance.now(),e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*o.TARGET_FPMS*this.speed,this._emitter.emit(n,this.deltaTime),this.lastTime=t},e.exports=s},{"../const":22,eventemitter3:10}],76:[function(t,e,i){var s=t("./Ticker"),o=new s;o.autoStart=!0,e.exports={shared:o,Ticker:s}},{"./Ticker":75}],77:[function(t,e,i){var s=t("../const"),o=e.exports={_uid:0,_saidHello:!1,EventEmitter:t("eventemitter3"),pluginTarget:t("./pluginTarget"),async:t("async"),uid:function(){return++o._uid},hex2rgb:function(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},hex2string:function(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#"+t},rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",e="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",i=new Image;i.src=t+"AP804Oa6"+e;var s=new Image;s.src=t+"/wCKxvRF"+e;var o=document.createElement("canvas");o.width=6,o.height=1;var r=o.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(i,0,0),r.drawImage(s,2,0);var n=r.getImageData(2,0,1,1).data;return 255===n[0]&&0===n[1]&&0===n[2]},getNextPowerOfTwo:function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},isPowerOfTwo:function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},getResolutionOfUrl:function(t){var e=s.RETINA_PREFIX.exec(t);return e?parseFloat(e[1]):1},sayHello:function(t){if(!o._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+s.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+s.VERSION+" - "+t+" - http://www.pixijs.com/");o._saidHello=!0}},isWebGLSupported:function(){var t={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return!(!i||!i.getContextAttributes().stencil)}catch(s){return!1}},sign:function(t){return t?0>t?-1:1:0},removeItems:function(t,e,i){var s=t.length;if(!(e>=s||0===i)){i=e+i>s?s-e:i;for(var o=e,r=s-i;r>o;++o)t[o]=t[o+i];t.length=r}},TextureCache:{},BaseTextureCache:{}}},{"../const":22,"./pluginTarget":78,async:1,eventemitter3:10}],78:[function(t,e,i){function s(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}e.exports={mixin:function(t){s(t)}}},{}],79:[function(t,e,i){var s=t("./core"),o=t("./mesh"),r=t("./extras"),n=t("./filters");s.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},s.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(s,{Stage:{get:function(){return s.Container}},DisplayObjectContainer:{get:function(){return s.Container}},Strip:{get:function(){return o.Mesh}},Rope:{get:function(){return o.Rope}},MovieClip:{get:function(){return r.MovieClip}},TilingSprite:{get:function(){return r.TilingSprite}},BitmapText:{get:function(){return r.BitmapText}},blendModes:{get:function(){return s.BLEND_MODES}},scaleModes:{get:function(){return s.SCALE_MODES}},BaseTextureCache:{get:function(){return s.utils.BaseTextureCache}},TextureCache:{get:function(){return s.utils.TextureCache}},math:{get:function(){return s}}}),s.Sprite.prototype.setTexture=function(t){void(this.texture=t)},r.BitmapText.prototype.setText=function(t){void(this.text=t)},s.Text.prototype.setText=function(t){void(this.text=t)},s.Text.prototype.setStyle=function(t){void(this.style=t)},s.Texture.prototype.setFrame=function(t){void(this.frame=t)},Object.defineProperties(n,{AbstractFilter:{get:function(){return s.AbstractFilter}},FXAAFilter:{get:function(){return s.FXAAFilter}},SpriteMaskFilter:{get:function(){return s.SpriteMaskFilter}}}),s.utils.uuid=function(){return s.utils.uid()}},{"./core":29,"./extras":86,"./filters":103,"./mesh":128}],80:[function(t,e,i){function s(t,e){o.Container.call(this),e=e||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},this.font=e.font,this._text=t,this.maxWidth=0,this.maxLineHeight=0,this.dirty=!1,this.updateText()}var o=t("../core");s.prototype=Object.create(o.Container.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{tint:{get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):s.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),s.prototype.updateText=function(){for(var t=s.fonts[this._font.name],e=new o.Point,i=null,r=[],n=0,a=0,h=[],l=0,c=this._font.size/t.size,u=-1,d=0,p=0;p<this.text.length;p++){var f=this.text.charCodeAt(p);if(u=/(\s)/.test(this.text.charAt(p))?p:u,/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))h.push(n),a=Math.max(a,n),l++,e.x=0,e.y+=t.lineHeight,i=null;else if(-1!==u&&this.maxWidth>0&&e.x*c>this.maxWidth)o.utils.removeItems(r,u,p-u),p=u,u=-1,h.push(n),a=Math.max(a,n),l++,e.x=0,e.y+=t.lineHeight,i=null;else{var m=t.chars[f];m&&(i&&m.kerning[i]&&(e.x+=m.kerning[i]),r.push({texture:m.texture,line:l,charCode:f,position:new o.Point(e.x+m.xOffset,e.y+m.yOffset)}),n=e.x+(m.texture.width+m.xOffset),e.x+=m.xAdvance,d=Math.max(d,m.yOffset+m.texture.height),i=f)}}h.push(n),a=Math.max(a,n);var g=[];for(p=0;l>=p;p++){var v=0;"right"===this._font.align?v=a-h[p]:"center"===this._font.align&&(v=(a-h[p])/2),g.push(v)}var y=r.length,_=this.tint;for(p=0;y>p;p++){var x=this._glyphs[p];x?x.texture=r[p].texture:(x=new o.Sprite(r[p].texture),this._glyphs.push(x)),x.position.x=(r[p].position.x+g[r[p].line])*c,x.position.y=r[p].position.y*c,x.scale.x=x.scale.y=c,x.tint=_,x.parent||this.addChild(x)}for(p=y;p<this._glyphs.length;++p)this.removeChild(this._glyphs[p]);this.textWidth=a*c,this.textHeight=(e.y+t.lineHeight)*c,this.maxLineHeight=d*c},s.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},s.prototype.getLocalBounds=function(){return this.validate(),o.Container.prototype.getLocalBounds.call(this)},s.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},s.fonts={}},{"../core":29}],81:[function(t,e,i){function s(t){o.Sprite.call(this,t[0]instanceof o.Texture?t[0]:t[0].texture),this._textures=null,this._durations=null,this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var o=t("../core");s.prototype=Object.create(o.Sprite.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(t){if(t[0]instanceof o.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}}},currentFrame:{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return 0>t&&(t+=this._textures.length),t}}}),s.prototype.stop=function(){this.playing&&(this.playing=!1,o.ticker.shared.remove(this.update,this))},s.prototype.play=function(){this.playing||(this.playing=!0,o.ticker.shared.add(this.update,this))},s.prototype.gotoAndStop=function(t){this.stop(),this._currentTime=t,this._texture=this._textures[this.currentFrame]},s.prototype.gotoAndPlay=function(t){this._currentTime=t,this.play()},s.prototype.update=function(t){var e=this.animationSpeed*t;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;0>i;)this._currentTime--,i+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):this._texture=this._textures[this.currentFrame]},s.prototype.destroy=function(){this.stop(),o.Sprite.prototype.destroy.call(this)},s.fromFrames=function(t){for(var e=[],i=0;i<t.length;++i)e.push(new o.Texture.fromFrame(t[i]));return new s(e)},s.fromImages=function(t){for(var e=[],i=0;i<t.length;++i)e.push(new o.Texture.fromImage(t[i]));return new s(e)}},{"../core":29}],82:[function(t,e,i){function s(t,e,i){o.Sprite.call(this,t),this.tileScale=new o.Point(1,1),this.tilePosition=new o.Point(0,0),this._width=e||100,this._height=i||100,this._uvs=new o.TextureUvs,this._canvasPattern=null,this.shader=new o.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}var o=t("../core"),r=new o.Point,n=t("../core/renderers/canvas/utils/CanvasTinter");s.prototype=Object.create(o.Sprite.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t}},height:{get:function(){return this._height},set:function(t){this._height=t}}}),s.prototype._onTextureUpdate=function(){},s.prototype._renderWebGL=function(t){var e=this._texture;if(e&&e._uvs){var i=e._uvs,s=e._frame.width,o=e._frame.height,r=e.baseTexture.width,n=e.baseTexture.height;e._uvs=this._uvs,e._frame.width=this.width,e._frame.height=this.height,this.shader.uniforms.uPixelSize.value[0]=1/r,this.shader.uniforms.uPixelSize.value[1]=1/n,this.shader.uniforms.uFrame.value[0]=i.x0,this.shader.uniforms.uFrame.value[1]=i.y0,this.shader.uniforms.uFrame.value[2]=i.x1-i.x0,this.shader.uniforms.uFrame.value[3]=i.y2-i.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(s*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(o*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=r/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=n/this._height*this.tileScale.y,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this),e._uvs=i,e._frame.width=s,e._frame.height=o}},s.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,s=this.worldTransform,r=t.resolution,a=e.baseTexture,h=this.tilePosition.x/this.tileScale.x%e._frame.width,l=this.tilePosition.y/this.tileScale.y%e._frame.height;if(!this._canvasPattern){var c=new o.CanvasBuffer(e._frame.width*r,e._frame.height*r);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=n.getTintedTexture(this,this.tint)),c.context.drawImage(this.tintedTexture,0,0)):c.context.drawImage(a.source,-e._frame.x*r,-e._frame.y*r),this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(s.a*r,s.b*r,s.c*r,s.d*r,s.tx*r,s.ty*r),i.scale(this.tileScale.x/r,this.tileScale.y/r),i.translate(h+this.anchor.x*-this._width,l+this.anchor.y*-this._height);var u=t.blendModes[this.blendMode];u!==t.context.globalCompositeOperation&&(i.globalCompositeOperation=u),i.fillStyle=this._canvasPattern,i.fillRect(-h,-l,this._width*r/this.tileScale.x,this._height*r/this.tileScale.y)}},s.prototype.getBounds=function(){var t,e,i,s,o=this._width,r=this._height,n=o*(1-this.anchor.x),a=o*-this.anchor.x,h=r*(1-this.anchor.y),l=r*-this.anchor.y,c=this.worldTransform,u=c.a,d=c.b,p=c.c,f=c.d,m=c.tx,g=c.ty,v=u*a+p*l+m,y=f*l+d*a+g,_=u*n+p*l+m,x=f*l+d*n+g,b=u*n+p*h+m,w=f*h+d*n+g,S=u*a+p*h+m,T=f*h+d*a+g;t=v,t=t>_?_:t,t=t>b?b:t,t=t>S?S:t,i=y,i=i>x?x:i,i=i>w?w:i,i=i>T?T:i,e=v,e=_>e?_:e,e=b>e?b:e,e=S>e?S:e,s=y,s=x>s?x:s,s=w>s?w:s,s=T>s?T:s;var C=this._bounds;return C.x=t,C.width=e-t,C.y=i,C.height=s-i,this._currentBounds=C,C},s.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,r);var e,i=this._width,s=this._height,o=-i*this.anchor.x;return r.x>o&&r.x<o+i&&(e=-s*this.anchor.y,r.y>e&&r.y<e+s)},s.prototype.destroy=function(){o.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},s.fromFrame=function(t,e,i){var r=o.utils.TextureCache[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);
return new s(r,e,i)},s.fromImage=function(t,e,i,r,n){return new s(o.Texture.fromImage(t,r,n),e,i)}},{"../core":29,"../core/renderers/canvas/utils/CanvasTinter":48}],83:[function(t,e,i){var s=t("../core"),o=s.DisplayObject,r=new s.Matrix;o.prototype._cacheAsBitmap=!1,o.prototype._originalRenderWebGL=null,o.prototype._originalRenderCanvas=null,o.prototype._originalUpdateTransform=null,o.prototype._originalHitTest=null,o.prototype._originalDestroy=null,o.prototype._cachedSprite=null,Object.defineProperties(o.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),o.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cachedSprite.worldAlpha=this.worldAlpha,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this._cachedSprite))},o.prototype._initCachedDisplayObject=function(t){if(!this._cachedSprite){t.currentRenderer.flush();var e=this.getLocalBounds().clone();if(this._filters){var i=this._filters[0].padding;e.x-=i,e.y-=i,e.width+=2*i,e.height+=2*i}var o=t.currentRenderTarget,n=t.filterManager.filterStack,a=new s.RenderTexture(t,0|e.width,0|e.height),h=r;h.tx=-e.x,h.ty=-e.y,this.renderWebGL=this._originalRenderWebGL,a.render(this,h,!0,!0),t.setRenderTarget(o),t.filterManager.filterStack=n,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new s.Sprite(a),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},o.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(t))},o.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cachedSprite){var e=this.getLocalBounds(),i=t.context,o=new s.RenderTexture(t,0|e.width,0|e.height),n=r;n.tx=-e.x,n.ty=-e.y,this.renderCanvas=this._originalRenderCanvas,o.render(this,n,!0),t.context=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new s.Sprite(o),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},o.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},o.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},o.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},{"../core":29}],84:[function(t,e,i){var s=t("../core");s.DisplayObject.prototype.name=null,s.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":29}],85:[function(t,e,i){var s=t("../core");s.DisplayObject.prototype.getGlobalPosition=function(t){return t=t||new s.Point,this.parent?(this.displayObjectUpdateTransform(),t.x=this.worldTransform.tx,t.y=this.worldTransform.ty):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":29}],86:[function(t,e,i){t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition"),e.exports={MovieClip:t("./MovieClip"),TilingSprite:t("./TilingSprite"),BitmapText:t("./BitmapText")}},{"./BitmapText":80,"./MovieClip":81,"./TilingSprite":82,"./cacheAsBitmap":83,"./getChildByName":84,"./getGlobalPosition":85}],87:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":29}],88:[function(t,e,i){function s(){o.AbstractFilter.call(this),this.blurXFilter=new r,this.blurYFilter=new n,this.defaultFilter=new o.AbstractFilter}var o=t("../../core"),r=t("../blur/BlurXFilter"),n=t("../blur/BlurYFilter");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.applyFilter=function(t,e,i){var s=t.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(t,e,i),this.blurXFilter.applyFilter(t,e,s),t.blendModeManager.setBlendMode(o.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(t,s,i),t.blendModeManager.setBlendMode(o.BLEND_MODES.NORMAL),t.filterManager.returnRenderTarget(s)},Object.defineProperties(s.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":29,"../blur/BlurXFilter":91,"../blur/BlurYFilter":92}],89:[function(t,e,i){function s(t,e){o.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:t||0},dirY:{type:"1f",value:e||0}}),this.defaultFilter=new o.AbstractFilter,this.passes=1,this.dirX=t||0,this.dirY=e||0,this.strength=4}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.applyFilter=function(t,e,i,s){var o=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(o,e,i,s);else{var r=t.filterManager.getRenderTarget(!0);t.filterManager.applyFilter(o,e,r,s);for(var n=0;n<this.passes-2;n++)t.filterManager.applyFilter(o,r,r,s);t.filterManager.applyFilter(o,r,i,s),t.filterManager.returnRenderTarget(r)}},Object.defineProperties(s.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}},dirX:{get:function(){return this.dirX},set:function(t){this.uniforms.dirX.value=t}},dirY:{get:function(){return this.dirY},set:function(t){this.uniforms.dirY.value=t}}})},{"../../core":29}],90:[function(t,e,i){function s(){o.AbstractFilter.call(this),this.blurXFilter=new r,this.blurYFilter=new n}var o=t("../../core"),r=t("./BlurXFilter"),n=t("./BlurYFilter");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.applyFilter=function(t,e,i){var s=t.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(t,e,s),this.blurYFilter.applyFilter(t,s,i),t.filterManager.returnRenderTarget(s)},Object.defineProperties(s.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.padding=.5*Math.abs(t),this.blurXFilter.blur=this.blurYFilter.blur=t}},passes:{get:function(){return this.blurXFilter.passes},set:function(t){this.blurXFilter.passes=this.blurYFilter.passes=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":29,"./BlurXFilter":91,"./BlurYFilter":92}],91:[function(t,e,i){function s(){o.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.applyFilter=function(t,e,i,s){var o=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(o,e,i,s);else{for(var r=t.filterManager.getRenderTarget(!0),n=e,a=r,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(o,n,a,!0);var l=a;a=n,n=l}t.filterManager.applyFilter(o,n,i,s),t.filterManager.returnRenderTarget(r)}},Object.defineProperties(s.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":29}],92:[function(t,e,i){function s(){o.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.applyFilter=function(t,e,i,s){var o=this.getShader(t);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(o,e,i,s);else{for(var r=t.filterManager.getRenderTarget(!0),n=e,a=r,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(o,n,a,!0);var l=a;a=n,n=l}t.filterManager.applyFilter(o,n,i,s),t.filterManager.returnRenderTarget(r)}},Object.defineProperties(s.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":29}],93:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{delta:{type:"v2",value:{x:.1,y:0}}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s},{"../../core":29}],94:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4] * c.a;\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9] * c.a;\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14] * c.a;\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19] * c.a;\n\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,s.prototype._loadMatrix=function(t,e){e=!!e;var i=t;e&&(this._multiply(i,this.uniforms.m.value,t),i=this._colorMatrix(i)),this.uniforms.m.value=i},s.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19],t},s.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},s.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},s.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},s.prototype.grayscale=s.prototype.greyscale,s.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},s.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),s=Math.sin(t),o=.213,r=.715,n=.072,a=[o+i*(1-o)+s*-o,r+i*-r+s*-r,n+i*-n+s*(1-n),0,0,o+i*-o+.143*s,r+i*(1-r)+.14*s,n+i*-n+s*-.283,0,0,o+i*-o+s*-(1-o),r+i*-r+s*r,n+i*(1-n)+s*n,0,0,0,0,0,1,0];this._loadMatrix(a,e)},s.prototype.contrast=function(t,e){var i=(t||0)+1,s=-128*(i-1),o=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(o,e)},s.prototype.saturate=function(t,e){var i=2*(t||0)/3+1,s=(i-1)*-.5,o=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(o,e)},s.prototype.desaturate=function(t){this.saturate(-1)},s.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},s.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},s.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},s.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},s.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},s.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},s.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},s.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},s.prototype.colorTone=function(t,e,i,s,o){t=t||.2,e=e||.15,i=i||16770432,s=s||3375104;var r=(i>>16&255)/255,n=(i>>8&255)/255,a=(255&i)/255,h=(s>>16&255)/255,l=(s>>8&255)/255,c=(255&s)/255,u=[.3,.59,.11,0,0,r,n,a,t,0,h,l,c,e,0,r-h,n-l,a-c,0,0];this._loadMatrix(u,o)},s.prototype.night=function(t,e){t=t||.1;var i=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},s.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},s.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},s.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperties(s.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(t){this.uniforms.m.value=t}}})},{"../../core":29}],95:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}})},{"../../core":29}],96:[function(t,e,i){function s(t,e,i){o.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(t)},texelSize:{type:"v2",value:{x:1/e,y:1/i}}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=new Float32Array(t)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(t){this.uniforms.texelSize.value.x=1/t}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(t){this.uniforms.texelSize.value.y=1/t}}})},{"../../core":29}],97:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s},{"../../core":29}],98:[function(t,e,i){function s(t,e){var i=new o.Matrix;t.renderable=!1,o.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision mediump float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:t.texture},otherMatrix:{type:"mat3",value:i.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=t,this.maskMatrix=i,null!==e&&void 0!==e||(e=20),this.scale=new o.Point(e,e)}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.applyFilter=function(t,e,i){var s=t.filterManager;s.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/e.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/e.frame.height);var o=this.getShader(t);s.applyFilter(o,e,i)},Object.defineProperties(s.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(t){this.uniforms.mapSampler.value=t}}})},{"../../core":29}],99:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":29}],100:[function(t,e,i){function s(){o.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.applyFilter=function(t,e,i,s){var o=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(o,e,i,s);else{
for(var r=t.filterManager.getRenderTarget(!0),n=e,a=r,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(o,n,a,s);var l=a;a=n,n=l}t.filterManager.applyFilter(o,n,i,s),t.filterManager.returnRenderTarget(r)}},Object.defineProperties(s.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}}})},{"../../core":29}],101:[function(t,e,i){function s(){o.AbstractFilter.call(this),this.blurXFilter=new r,this.blurYTintFilter=new n,this.defaultFilter=new o.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=o.BLEND_MODES.MULTIPLY}var o=t("../../core"),r=t("../blur/BlurXFilter"),n=t("./BlurYTintFilter");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.applyFilter=function(t,e,i){var s=t.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(t,e,s),t.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(t,s,i),t.blendModeManager.setBlendMode(o.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(t,e,i),t.filterManager.returnRenderTarget(s)},Object.defineProperties(s.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYTintFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(t){this.blurYTintFilter.blur=t}},color:{get:function(){return o.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(t){this.blurYTintFilter.uniforms.color.value=o.utils.hex2rgb(t)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(t){this.blurYTintFilter.uniforms.alpha.value=t}},distance:{get:function(){return this._distance},set:function(t){this._dirtyPosition=!0,this._distance=t}},angle:{get:function(){return this._angle},set:function(t){this._dirtyPosition=!0,this._angle=t}}})},{"../../core":29,"../blur/BlurXFilter":91,"./BlurYTintFilter":100}],102:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}})},{"../../core":29}],103:[function(t,e,i){e.exports={AsciiFilter:t("./ascii/AsciiFilter"),BloomFilter:t("./bloom/BloomFilter"),BlurFilter:t("./blur/BlurFilter"),BlurXFilter:t("./blur/BlurXFilter"),BlurYFilter:t("./blur/BlurYFilter"),BlurDirFilter:t("./blur/BlurDirFilter"),ColorMatrixFilter:t("./color/ColorMatrixFilter"),ColorStepFilter:t("./color/ColorStepFilter"),ConvolutionFilter:t("./convolution/ConvolutionFilter"),CrossHatchFilter:t("./crosshatch/CrossHatchFilter"),DisplacementFilter:t("./displacement/DisplacementFilter"),DotScreenFilter:t("./dot/DotScreenFilter"),GrayFilter:t("./gray/GrayFilter"),DropShadowFilter:t("./dropshadow/DropShadowFilter"),InvertFilter:t("./invert/InvertFilter"),NoiseFilter:t("./noise/NoiseFilter"),PixelateFilter:t("./pixelate/PixelateFilter"),RGBSplitFilter:t("./rgb/RGBSplitFilter"),ShockwaveFilter:t("./shockwave/ShockwaveFilter"),SepiaFilter:t("./sepia/SepiaFilter"),SmartBlurFilter:t("./blur/SmartBlurFilter"),TiltShiftFilter:t("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:t("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:t("./tiltshift/TiltShiftYFilter"),TwistFilter:t("./twist/TwistFilter")}},{"./ascii/AsciiFilter":87,"./bloom/BloomFilter":88,"./blur/BlurDirFilter":89,"./blur/BlurFilter":90,"./blur/BlurXFilter":91,"./blur/BlurYFilter":92,"./blur/SmartBlurFilter":93,"./color/ColorMatrixFilter":94,"./color/ColorStepFilter":95,"./convolution/ConvolutionFilter":96,"./crosshatch/CrossHatchFilter":97,"./displacement/DisplacementFilter":98,"./dot/DotScreenFilter":99,"./dropshadow/DropShadowFilter":101,"./gray/GrayFilter":102,"./invert/InvertFilter":104,"./noise/NoiseFilter":105,"./pixelate/PixelateFilter":106,"./rgb/RGBSplitFilter":107,"./sepia/SepiaFilter":108,"./shockwave/ShockwaveFilter":109,"./tiltshift/TiltShiftFilter":111,"./tiltshift/TiltShiftXFilter":112,"./tiltshift/TiltShiftYFilter":113,"./twist/TwistFilter":114}],104:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}})},{"../../core":29}],105:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:.5}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(t){this.uniforms.noise.value=t}}})},{"../../core":29}],106:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":29}],107:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}},green:{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}},blue:{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}})},{"../../core":29}],108:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}})},{"../../core":29}],109:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(t){this.uniforms.center.value=t}},params:{get:function(){return this.uniforms.params.value},set:function(t){this.uniforms.params.value=t}},time:{get:function(){return this.uniforms.time.value},set:function(t){this.uniforms.time.value=t}}})},{"../../core":29}],110:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(s.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(t){this.uniforms.blur.value=t}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(t){this.uniforms.gradientBlur.value=t}},start:{get:function(){return this.uniforms.start.value},set:function(t){this.uniforms.start.value=t,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(t){this.uniforms.end.value=t,this.updateDelta()}}})},{"../../core":29}],111:[function(t,e,i){function s(){o.AbstractFilter.call(this),this.tiltShiftXFilter=new r,this.tiltShiftYFilter=new n}var o=t("../../core"),r=t("./TiltShiftXFilter"),n=t("./TiltShiftYFilter");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.applyFilter=function(t,e,i){var s=t.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(t,e,s),this.tiltShiftYFilter.applyFilter(t,s,i),t.filterManager.returnRenderTarget(s)},Object.defineProperties(s.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t}}})},{"../../core":29,"./TiltShiftXFilter":112,"./TiltShiftYFilter":113}],112:[function(t,e,i){function s(){o.call(this)}var o=t("./TiltShiftAxisFilter");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=t/i,this.uniforms.delta.value.y=e/i}},{"./TiltShiftAxisFilter":110}],113:[function(t,e,i){function s(){o.call(this)}var o=t("./TiltShiftAxisFilter");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=-e/i,this.uniforms.delta.value.y=t/i}},{"./TiltShiftAxisFilter":110}],114:[function(t,e,i){function s(){o.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var o=t("../../core");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}},radius:{get:function(){return this.uniforms.radius.value},set:function(t){this.uniforms.radius.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":29}],115:[function(t,e,i){(function(i){t("./polyfill");var s=e.exports=t("./core");s.extras=t("./extras"),s.filters=t("./filters"),s.interaction=t("./interaction"),s.loaders=t("./loaders"),s.mesh=t("./mesh"),s.accessibility=t("./accessibility"),s.loader=new s.loaders.Loader,Object.assign(s,t("./deprecation")),i.PIXI=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":21,"./core":29,"./deprecation":79,"./extras":86,"./filters":103,"./interaction":118,"./loaders":121,"./mesh":128,"./polyfill":133}],116:[function(t,e,i){function s(){this.global=new o.Point,this.target=null,this.originalEvent=null}var o=t("../core");s.prototype.constructor=s,e.exports=s,s.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}},{"../core":29}],117:[function(t,e,i){function s(t,e){e=e||{},this.renderer=t,this.autoPreventDefault=void 0!==e.autoPreventDefault?e.autoPreventDefault:!0,this.interactionFrequency=e.interactionFrequency||10,this.mouse=new r,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this._tempPoint=new o.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var o=t("../core"),r=t("./InteractionData");Object.assign(o.DisplayObject.prototype,t("./interactiveTarget")),s.prototype.constructor=s,e.exports=s,s.prototype.setTargetElement=function(t,e){this.removeEvents(),this.interactionDOMElement=t,this.resolution=e||1,this.addEvents()},s.prototype.addEvents=function(){this.interactionDOMElement&&(o.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},s.prototype.removeEvents=function(){this.interactionDOMElement&&(o.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},s.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},s.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.target=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},s.prototype.mapPositionToPoint=function(t,e,i){var s=this.interactionDOMElement.getBoundingClientRect();t.x=(e-s.left)*(this.interactionDOMElement.width/s.width)/this.resolution,t.y=(i-s.top)*(this.interactionDOMElement.height/s.height)/this.resolution},s.prototype.processInteractive=function(t,e,i,s,o){if(!e||!e.visible)return!1;var r=!1,n=o=e.interactive||o;if(e.hitArea&&(n=!1),e.interactiveChildren)for(var a=e.children,h=a.length-1;h>=0;h--){var l=a[h];if(this.processInteractive(t,l,i,s,n)){if(!l.parent)continue;r=!0,n=!1,s=!1}}return o&&(s&&!r&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),r=e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):e.containsPoint&&(r=e.containsPoint(t))),e.interactive&&i(e,r)),r},s.prototype.onMouseDown=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},s.prototype.processMouseDown=function(t,e){var i=this.mouse.originalEvent,s=2===i.button||3===i.which;e&&(t[s?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(t,s?"rightdown":"mousedown",this.eventData))},s.prototype.onMouseUp=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},s.prototype.processMouseUp=function(t,e){var i=this.mouse.originalEvent,s=2===i.button||3===i.which,o=s?"_isRightDown":"_isLeftDown";e?(this.dispatchEvent(t,s?"rightup":"mouseup",this.eventData),t[o]&&(t[o]=!1,this.dispatchEvent(t,s?"rightclick":"click",this.eventData))):t[o]&&(t[o]=!1,this.dispatchEvent(t,s?"rightupoutside":"mouseupoutside",this.eventData))},s.prototype.onMouseMove=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.didMove=!0,this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},s.prototype.processMouseMove=function(t,e){this.processMouseOverOut(t,e),this.moveWhenInside&&!e||this.dispatchEvent(t,"mousemove",this.eventData)},s.prototype.onMouseOut=function(t){this.mouse.originalEvent=t,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.interactionDOMElement.style.cursor="inherit",this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)},s.prototype.processMouseOverOut=function(t,e){e?(t._over||(t._over=!0,this.dispatchEvent(t,"mouseover",this.eventData)),t.buttonMode&&(this.cursor=t.defaultCursor)):t._over&&(t._over=!1,this.dispatchEvent(t,"mouseout",this.eventData))},s.prototype.onTouchStart=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,s=0;i>s;s++){var o=e[s],r=this.getTouchData(o);r.originalEvent=t,this.eventData.data=r,this.eventData.stopped=!1,this.processInteractive(r.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(r)}},s.prototype.processTouchStart=function(t,e){e&&(t._touchDown=!0,this.dispatchEvent(t,"touchstart",this.eventData))},s.prototype.onTouchEnd=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,s=0;i>s;s++){var o=e[s],r=this.getTouchData(o);r.originalEvent=t,this.eventData.data=r,this.eventData.stopped=!1,this.processInteractive(r.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(r)}},s.prototype.processTouchEnd=function(t,e){e?(this.dispatchEvent(t,"touchend",this.eventData),t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"tap",this.eventData))):t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"touchendoutside",this.eventData))},s.prototype.onTouchMove=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,s=0;i>s;s++){var o=e[s],r=this.getTouchData(o);r.originalEvent=t,this.eventData.data=r,this.eventData.stopped=!1,this.processInteractive(r.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside),this.returnTouchData(r)}},s.prototype.processTouchMove=function(t,e){this.moveWhenInside&&!e||this.dispatchEvent(t,"touchmove",this.eventData)},s.prototype.getTouchData=function(t){var e=this.interactiveDataPool.pop();return e||(e=new r),e.identifier=t.identifier,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&(e.global.x=e.global.x/this.resolution,e.global.y=e.global.y/this.resolution),t.globalX=e.global.x,t.globalY=e.global.y,e},s.prototype.returnTouchData=function(t){this.interactiveDataPool.push(t)},s.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},o.WebGLRenderer.registerPlugin("interaction",s),o.CanvasRenderer.registerPlugin("interaction",s)},{"../core":29,"./InteractionData":116,"./interactiveTarget":119}],118:[function(t,e,i){e.exports={InteractionData:t("./InteractionData"),InteractionManager:t("./InteractionManager"),interactiveTarget:t("./interactiveTarget")}},{"./InteractionData":116,"./InteractionManager":117,"./interactiveTarget":119}],119:[function(t,e,i){var s={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1};e.exports=s},{}],120:[function(t,e,i){function s(t,e){var i={},s=t.data.getElementsByTagName("info")[0],o=t.data.getElementsByTagName("common")[0];i.font=s.getAttribute("face"),i.size=parseInt(s.getAttribute("size"),10),i.lineHeight=parseInt(o.getAttribute("lineHeight"),10),i.chars={};for(var a=t.data.getElementsByTagName("char"),h=0;h<a.length;h++){var l=parseInt(a[h].getAttribute("id"),10),c=new r.Rectangle(parseInt(a[h].getAttribute("x"),10)+e.frame.x,parseInt(a[h].getAttribute("y"),10)+e.frame.y,parseInt(a[h].getAttribute("width"),10),parseInt(a[h].getAttribute("height"),10));i.chars[l]={xOffset:parseInt(a[h].getAttribute("xoffset"),10),yOffset:parseInt(a[h].getAttribute("yoffset"),10),xAdvance:parseInt(a[h].getAttribute("xadvance"),10),kerning:{},texture:new r.Texture(e.baseTexture,c)}}var u=t.data.getElementsByTagName("kerning");for(h=0;h<u.length;h++){var d=parseInt(u[h].getAttribute("first"),10),p=parseInt(u[h].getAttribute("second"),10),f=parseInt(u[h].getAttribute("amount"),10);i.chars[p]&&(i.chars[p].kerning[d]=f)}t.bitmapFont=i,n.BitmapText.fonts[i.font]=i}var o=t("resource-loader").Resource,r=t("../core"),n=t("../extras"),a=t("path");e.exports=function(){return function(t,e){if(!t.data||!t.isXml)return e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return e();var i=a.dirname(t.url);"."===i&&(i=""),this.baseUrl&&i&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/"),i=i.replace(this.baseUrl,"")),i&&"/"!==i.charAt(i.length-1)&&(i+="/");var n=i+t.data.getElementsByTagName("page")[0].getAttribute("file");if(r.utils.TextureCache[n])s(t,r.utils.TextureCache[n]),e();else{var h={crossOrigin:t.crossOrigin,loadType:o.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata};this.add(t.name+"_image",n,h,function(i){s(t,i.texture),e()})}}}},{"../core":29,"../extras":86,path:2,"resource-loader":16}],121:[function(t,e,i){e.exports={Loader:t("./loader"),bitmapFontParser:t("./bitmapFontParser"),spritesheetParser:t("./spritesheetParser"),textureParser:t("./textureParser"),Resource:t("resource-loader").Resource}},{"./bitmapFontParser":120,"./loader":122,"./spritesheetParser":123,"./textureParser":124,"resource-loader":16}],122:[function(t,e,i){function s(t,e){o.call(this,t,e);for(var i=0;i<s._pixiMiddleware.length;++i)this.use(s._pixiMiddleware[i]())}var o=t("resource-loader"),r=t("./textureParser"),n=t("./spritesheetParser"),a=t("./bitmapFontParser");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s._pixiMiddleware=[o.middleware.parsing.blob,r,n,a],s.addPixiMiddleware=function(t){s._pixiMiddleware.push(t)};var h=o.Resource;h.setExtensionXhrType("fnt",h.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":120,"./spritesheetParser":123,"./textureParser":124,"resource-loader":16}],123:[function(t,e,i){var s=t("resource-loader").Resource,o=t("path"),r=t("../core"),n=t("async"),a=1e3;e.exports=function(){return function(t,e){var i=t.name+"_image";if(!t.data||!t.isJson||!t.data.frames||this.resources[i])return e();var h={crossOrigin:t.crossOrigin,loadType:s.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata},l=o.dirname(t.url.replace(this.baseUrl,""));this.add(i,l+"/"+t.data.meta.image,h,function(i){function s(e,s){for(var o=e;s>o-e&&o<c.length;){var n=l[c[o]],a=n.frame;if(a){var h=null,d=null;if(h=n.rotated?new r.Rectangle(a.x,a.y,a.h,a.w):new r.Rectangle(a.x,a.y,a.w,a.h),n.trimmed&&(d=new r.Rectangle(n.spriteSourceSize.x/u,n.spriteSourceSize.y/u,n.sourceSize.w/u,n.sourceSize.h/u)),n.rotated){var p=h.width;h.width=h.height,h.height=p}h.x/=u,h.y/=u,h.width/=u,h.height/=u,t.textures[c[o]]=new r.Texture(i.texture.baseTexture,h,h.clone(),d,n.rotated),r.utils.TextureCache[c[o]]=t.textures[c[o]]}o++}}function o(){return d*a<c.length}function h(t){s(d*a,a),d++,setTimeout(t,0)}t.textures={};var l=t.data.frames,c=Object.keys(l),u=r.utils.getResolutionOfUrl(t.url),d=0;c.length<=a?(s(0,a),e()):n.whilst(o,h,e)})}}},{"../core":29,async:1,path:2,"resource-loader":16}],124:[function(t,e,i){var s=t("../core");e.exports=function(){return function(t,e){if(t.data&&t.isImage){var i=new s.BaseTexture(t.data,null,s.utils.getResolutionOfUrl(t.url));i.imageUrl=t.url,t.texture=new s.Texture(i),s.utils.BaseTextureCache[t.url]=i,s.utils.TextureCache[t.url]=t.texture}e()}}},{"../core":29}],125:[function(t,e,i){function s(t,e,i,r,n){o.Container.call(this),this._texture=null,this.uvs=i||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=r||new Uint16Array([0,1,3,2]),this.dirty=!0,this.blendMode=o.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=n||s.DRAW_MODES.TRIANGLE_MESH,this.texture=t,this.shader=null}var o=t("../core"),r=new o.Point,n=new o.Polygon;s.prototype=Object.create(o.Container.prototype),s.prototype.constructor=s,e.exports=s,Object.defineProperties(s.prototype,{texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),s.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.mesh),t.plugins.mesh.render(this)},s.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform,o=t.resolution;
t.roundPixels?e.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o|0,i.ty*o|0):e.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),this.drawMode===s.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(e):this._renderCanvasTriangles(e)},s.prototype._renderCanvasTriangleMesh=function(t){for(var e=this.vertices,i=this.uvs,s=e.length/2,o=0;s-2>o;o++){var r=2*o;this._renderCanvasDrawTriangle(t,e,i,r,r+2,r+4)}},s.prototype._renderCanvasTriangles=function(t){for(var e=this.vertices,i=this.uvs,s=this.indices,o=s.length,r=0;o>r;r+=3){var n=2*s[r],a=2*s[r+1],h=2*s[r+2];this._renderCanvasDrawTriangle(t,e,i,n,a,h)}},s.prototype._renderCanvasDrawTriangle=function(t,e,i,s,o,r){var n=this._texture.baseTexture,a=n.source,h=n.width,l=n.height,c=e[s],u=e[o],d=e[r],p=e[s+1],f=e[o+1],m=e[r+1],g=i[s]*n.width,v=i[o]*n.width,y=i[r]*n.width,_=i[s+1]*n.height,x=i[o+1]*n.height,b=i[r+1]*n.height;if(this.canvasPadding>0){var w=this.canvasPadding/this.worldTransform.a,S=this.canvasPadding/this.worldTransform.d,T=(c+u+d)/3,C=(p+f+m)/3,P=c-T,A=p-C,M=Math.sqrt(P*P+A*A);c=T+P/M*(M+w),p=C+A/M*(M+S),P=u-T,A=f-C,M=Math.sqrt(P*P+A*A),u=T+P/M*(M+w),f=C+A/M*(M+S),P=d-T,A=m-C,M=Math.sqrt(P*P+A*A),d=T+P/M*(M+w),m=C+A/M*(M+S)}t.save(),t.beginPath(),t.moveTo(c,p),t.lineTo(u,f),t.lineTo(d,m),t.closePath(),t.clip();var E=g*x+_*y+v*b-x*y-_*v-g*b,I=c*x+_*d+u*b-x*d-_*u-c*b,k=g*u+c*y+v*d-u*y-c*v-g*d,L=g*x*d+_*u*y+c*v*b-c*x*y-_*v*d-g*u*b,R=p*x+_*m+f*b-x*m-_*f-p*b,O=g*f+p*y+v*m-f*y-p*v-g*m,B=g*x*m+_*f*y+p*v*b-p*x*y-_*v*m-g*f*b;t.transform(I/E,R/E,k/E,O/E,L/E,B/E),t.drawImage(a,0,0,h*n.resolution,l*n.resolution,0,0,h,l),t.restore()},s.prototype.renderMeshFlat=function(t){var e=this.context,i=t.vertices,s=i.length/2;e.beginPath();for(var o=1;s-2>o;o++){var r=2*o,n=i[r],a=i[r+2],h=i[r+4],l=i[r+1],c=i[r+3],u=i[r+5];e.moveTo(n,l),e.lineTo(a,c),e.lineTo(h,u)}e.fillStyle="#FF0000",e.fill(),e.closePath()},s.prototype._onTextureUpdate=function(){this.updateFrame=!0},s.prototype.getBounds=function(t){if(!this._currentBounds){for(var e=t||this.worldTransform,i=e.a,s=e.b,r=e.c,n=e.d,a=e.tx,h=e.ty,l=-(1/0),c=-(1/0),u=1/0,d=1/0,p=this.vertices,f=0,m=p.length;m>f;f+=2){var g=p[f],v=p[f+1],y=i*g+r*v+a,_=n*v+s*g+h;u=u>y?y:u,d=d>_?_:d,l=y>l?y:l,c=_>c?_:c}if(u===-(1/0)||c===1/0)return o.Rectangle.EMPTY;var x=this._bounds;x.x=u,x.width=l-u,x.y=d,x.height=c-d,this._currentBounds=x}return this._currentBounds},s.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,r);var e,i,o=this.vertices,a=n.points;if(this.drawMode===s.DRAW_MODES.TRIANGLES){var h=this.indices;for(i=this.indices.length,e=0;i>e;e+=3){var l=2*h[e],c=2*h[e+1],u=2*h[e+2];if(a[0]=o[l],a[1]=o[l+1],a[2]=o[c],a[3]=o[c+1],a[4]=o[u],a[5]=o[u+1],n.contains(r.x,r.y))return!0}}else for(i=o.length,e=0;i>e;e+=6)if(a[0]=o[e],a[1]=o[e+1],a[2]=o[e+2],a[3]=o[e+3],a[4]=o[e+4],a[5]=o[e+5],n.contains(r.x,r.y))return!0;return!1},s.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":29}],126:[function(t,e,i){function s(t,e,i){o.call(this,t),this._ready=!0,this.segmentsX=e||10,this.segmentsY=i||10,this.drawMode=o.DRAW_MODES.TRIANGLES,this.refresh()}var o=t("./Mesh");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.refresh=function(){var t=this.segmentsX*this.segmentsY,e=[],i=[],s=[],o=[],r=this.texture,n=this.segmentsX-1,a=this.segmentsY-1,h=0,l=r.width/n,c=r.height/a;for(h=0;t>h;h++){var u=h%this.segmentsX,d=h/this.segmentsX|0;e.push(u*l,d*c),s.push(r._uvs.x0+(r._uvs.x1-r._uvs.x0)*(u/(this.segmentsX-1)),r._uvs.y0+(r._uvs.y3-r._uvs.y0)*(d/(this.segmentsY-1)))}var p=n*a;for(h=0;p>h;h++){var f=h%n,m=h/n|0,g=m*this.segmentsX+f,v=m*this.segmentsX+f+1,y=(m+1)*this.segmentsX+f,_=(m+1)*this.segmentsX+f+1;o.push(g,v,y),o.push(v,_,y)}this.vertices=new Float32Array(e),this.uvs=new Float32Array(s),this.colors=new Float32Array(i),this.indices=new Uint16Array(o)},s.prototype._onTextureUpdate=function(){o.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},{"./Mesh":125}],127:[function(t,e,i){function s(t,e){o.call(this,t),this.points=e,this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length),this._ready=!0,this.refresh()}var o=t("./Mesh"),r=t("../core");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){var e=this.uvs,i=this.indices,s=this.colors,o=this._texture._uvs,n=new r.Point(o.x0,o.y0),a=new r.Point(o.x2-o.x0,o.y2-o.y0);e[0]=0+n.x,e[1]=0+n.y,e[2]=0+n.x,e[3]=1*a.y+n.y,s[0]=1,s[1]=1,i[0]=0,i[1]=1;for(var h,l,c,u=t.length,d=1;u>d;d++)h=t[d],l=4*d,c=d/(u-1),e[l]=c*a.x+n.x,e[l+1]=0+n.y,e[l+2]=c*a.x+n.x,e[l+3]=1*a.y+n.y,l=2*d,s[l]=1,s[l+1]=1,l=2*d,i[l]=l,i[l+1]=l+1;this.dirty=!0}},s.prototype._onTextureUpdate=function(){o.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},s.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e,i,s,o,r,n,a=t[0],h=0,l=0,c=this.vertices,u=t.length,d=0;u>d;d++)i=t[d],s=4*d,e=d<t.length-1?t[d+1]:i,l=-(e.x-a.x),h=e.y-a.y,o=10*(1-d/(u-1)),o>1&&(o=1),r=Math.sqrt(h*h+l*l),n=this._texture.height/2,h/=r,l/=r,h*=n,l*=n,c[s]=i.x+h,c[s+1]=i.y+l,c[s+2]=i.x-h,c[s+3]=i.y-l,a=i;this.containerUpdateTransform()}}},{"../core":29,"./Mesh":125}],128:[function(t,e,i){e.exports={Mesh:t("./Mesh"),Plane:t("./Plane"),Rope:t("./Rope"),MeshRenderer:t("./webgl/MeshRenderer"),MeshShader:t("./webgl/MeshShader")}},{"./Mesh":125,"./Plane":126,"./Rope":127,"./webgl/MeshRenderer":129,"./webgl/MeshShader":130}],129:[function(t,e,i){function s(t){o.ObjectRenderer.call(this,t),this.indices=new Uint16Array(15e3);for(var e=0,i=0;15e3>e;e+=6,i+=4)this.indices[e+0]=i+0,this.indices[e+1]=i+1,this.indices[e+2]=i+2,this.indices[e+3]=i+0,this.indices[e+4]=i+2,this.indices[e+5]=i+3;this.currentShader=null}var o=t("../../core"),r=t("../Mesh");s.prototype=Object.create(o.ObjectRenderer.prototype),s.prototype.constructor=s,e.exports=s,o.WebGLRenderer.registerPlugin("mesh",s),s.prototype.onContextChange=function(){},s.prototype.render=function(t){t._vertexBuffer||this._initWebGL(t);var e=this.renderer,i=e.gl,s=t._texture.baseTexture,o=t.shader,n=t.drawMode===r.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;e.blendModeManager.setBlendMode(t.blendMode),o=o?o.shaders[i.id]||o.getShader(e):e.shaderManager.plugins.meshShader,this.renderer.shaderManager.setShader(o),o.uniforms.translationMatrix.value=t.worldTransform.toArray(!0),o.uniforms.projectionMatrix.value=e.currentRenderTarget.projectionMatrix.toArray(!0),o.uniforms.alpha.value=t.worldAlpha,o.syncUniforms(),t.dirty?(t.dirty=!1,i.bindBuffer(i.ARRAY_BUFFER,t._vertexBuffer),i.bufferData(i.ARRAY_BUFFER,t.vertices,i.STATIC_DRAW),i.vertexAttribPointer(o.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.bufferData(i.ARRAY_BUFFER,t.uvs,i.STATIC_DRAW),i.vertexAttribPointer(o.attributes.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),s._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,s._glTextures[i.id]):this.renderer.updateTexture(s),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t._indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.indices,i.STATIC_DRAW)):(i.bindBuffer(i.ARRAY_BUFFER,t._vertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,t.vertices),i.vertexAttribPointer(o.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.vertexAttribPointer(o.attributes.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),s._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,s._glTextures[i.id]):this.renderer.updateTexture(s),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t._indexBuffer),i.bufferSubData(i.ELEMENT_ARRAY_BUFFER,0,t.indices)),i.drawElements(n,t.indices.length,i.UNSIGNED_SHORT,0)},s.prototype._initWebGL=function(t){var e=this.renderer.gl;t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.STATIC_DRAW),t.colors&&(t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW)),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW)},s.prototype.flush=function(){},s.prototype.start=function(){this.currentShader=null},s.prototype.destroy=function(){o.ObjectRenderer.prototype.destroy.call(this)}},{"../../core":29,"../Mesh":125}],130:[function(t,e,i){function s(t){o.Shader.call(this,t,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var o=t("../../core");s.prototype=Object.create(o.Shader.prototype),s.prototype.constructor=s,e.exports=s,o.ShaderManager.registerPlugin("meshShader",s)},{"../../core":29}],131:[function(t,e,i){Math.sign||(Math.sign=function(t){return t=+t,0===t||isNaN(t)?t:t>0?1:-1})},{}],132:[function(t,e,i){Object.assign||(Object.assign=t("object-assign"))},{"object-assign":11}],133:[function(t,e,i){t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign")},{"./Math.sign":131,"./Object.assign":132,"./requestAnimationFrame":134}],134:[function(t,e,i){(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),s=["ms","moz","webkit","o"],o=0;o<s.length&&!t.requestAnimationFrame;++o)t.requestAnimationFrame=t[s[o]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[s[o]+"CancelAnimationFrame"]||t[s[o]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),s=16+i-e;return 0>s&&(s=0),i=e,setTimeout(function(){i=Date.now(),t(performance.now())},s)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[115])(115)}),define("text",["module"],function(t){var e,i,s,o,r,n=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,h=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),u=l&&location.hostname,d=l&&(location.port||void 0),p={},f=t.config&&t.config()||{};return e={version:"2.0.14",strip:function(t){if(t){t=t.replace(a,"");var e=t.match(h);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var t,e,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){i=n[e];try{t=new ActiveXObject(i)}catch(s){}if(t){n=[i];break}}return t},parseName:function(t){var e,i,s,o=!1,r=t.lastIndexOf("."),n=0===t.indexOf("./")||0===t.indexOf("../");return-1!==r&&(!n||r>1)?(e=t.substring(0,r),i=t.substring(r+1)):e=t,s=i||e,r=s.indexOf("!"),-1!==r&&(o="strip"===s.substring(r+1),s=s.substring(0,r),i?i=s:e=s),{moduleName:e,ext:i,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,i,s,o){var r,n,a,h=e.xdRegExp.exec(t);return h?(r=h[2],n=h[3],n=n.split(":"),a=n[1],n=n[0],!(r&&r!==i||n&&n.toLowerCase()!==s.toLowerCase()||(a||n)&&a!==o)):!0},finishLoad:function(t,i,s,o){s=i?e.strip(s):s,f.isBuild&&(p[t]=s),o(s)},load:function(t,i,s,o){if(o&&o.isBuild&&!o.inlineText)return void s();f.isBuild=o&&o.isBuild;var r=e.parseName(t),n=r.moduleName+(r.ext?"."+r.ext:""),a=i.toUrl(n),h=f.useXhr||e.useXhr;return 0===a.indexOf("empty:")?void s():void(!l||h(a,c,u,d)?e.get(a,function(i){e.finishLoad(t,r.strip,i,s)},function(t){s.error&&s.error(t)}):i([n],function(t){e.finishLoad(r.moduleName+"."+r.ext,r.strip,t,s)}))},write:function(t,i,s,o){if(p.hasOwnProperty(i)){var r=e.jsEscape(p[i]);s.asModule(t+"!"+i,"define(function () { return '"+r+"';});\n")}},writeFile:function(t,i,s,o,r){var n=e.parseName(i),a=n.ext?"."+n.ext:"",h=n.moduleName+a,l=s.toUrl(n.moduleName+a)+".js";e.load(h,s,function(i){var s=function(t){return o(l,t)};s.asModule=function(t,e){return o.asModule(t,l,e)},e.write(t,h,s,r)},r)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),e.get=function(t,e,s){try{var o=i.readFileSync(t,"utf8");"\ufeff"===o[0]&&(o=o.substring(1)),e(o)}catch(r){s&&s(r)}}):"xhr"===f.env||!f.env&&e.createXhr()?e.get=function(t,i,s,o){var r,n=e.createXhr();if(n.open("GET",t,!0),o)for(r in o)o.hasOwnProperty(r)&&n.setRequestHeader(r.toLowerCase(),o[r]);f.onXhr&&f.onXhr(n,t),n.onreadystatechange=function(e){var o,r;4===n.readyState&&(o=n.status||0,o>399&&600>o?(r=new Error(t+" HTTP status: "+o),r.xhr=n,s&&s(r)):i(n.responseText),f.onXhrComplete&&f.onXhrComplete(n,t))},n.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var i,s,o="utf-8",r=new java.io.File(t),n=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),o)),h="";try{for(i=new java.lang.StringBuffer,s=a.readLine(),s&&s.length()&&65279===s.charAt(0)&&(s=s.substring(1)),null!==s&&i.append(s);null!==(s=a.readLine());)i.append(n),i.append(s);h=String(i.toString())}finally{a.close()}e(h)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(s=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in s,e.get=function(t,e){var i,n,a,h={};r&&(t=t.replace(/\//g,"\\")),a=new FileUtils.File(t);try{i=s["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),i.init(a,1,0,!1),n=s["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),n.init(i,"utf-8",i.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),n.readString(i.available(),h),n.close(),i.close(),e(h.value)}catch(l){throw new Error((a&&a.path||"")+": "+l)}}),e}),define("text!../media/img/game/characters/ez.atlas",[],function(){return"\nez.png\nsize: 256,64\nformat: RGBA8888\nfilter: Linear,Linear\nrepeat: none\nEzra Final/Ez_0001_L-arm-low\n  rotate: false\n  xy: 174, 30\n  size: 9, 32\n  orig: 9, 32\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0002_L-Leg-up\n  rotate: false\n  xy: 74, 27\n  size: 13, 35\n  orig: 13, 35\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0003_L-Leg-low\n  rotate: false\n  xy: 25, 26\n  size: 23, 36\n  orig: 23, 36\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0004_R-Leg-Up\n  rotate: false\n  xy: 89, 27\n  size: 12, 35\n  orig: 12, 35\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0006_R-leg-low\n  rotate: false\n  xy: 50, 27\n  size: 22, 35\n  orig: 22, 35\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0009_R-torso\n  rotate: false\n  xy: 2, 9\n  size: 21, 53\n  orig: 21, 53\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0010_R-head\n  rotate: false\n  xy: 103, 37\n  size: 21, 25\n  orig: 21, 25\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0010_R-head-copy\n  rotate: false\n  xy: 126, 37\n  size: 21, 25\n  orig: 21, 25\n  offset: 0, 0\n  index: -1\nEzra Final/LArmBack\n  rotate: false\n  xy: 185, 30\n  size: 9, 32\n  orig: 9, 32\n  offset: 0, 0\n  index: -1\nEzra Final/LArmGaunlet\n  rotate: false\n  xy: 162, 29\n  size: 10, 33\n  orig: 10, 33\n  offset: 0, 0\n  index: -1\nEzra Final/force_arm\n  rotate: false\n  xy: 25, 2\n  size: 34, 22\n  orig: 49, 46\n  offset: 8, 9\n  index: -1\nEzra Final/pouchOpen\n  rotate: false\n  xy: 77, 4\n  size: 15, 21\n  orig: 15, 21\n  offset: 0, 0\n  index: -1\nezra_pieces/ez_0005_fore-arm-1\n  rotate: false\n  xy: 149, 29\n  size: 11, 33\n  orig: 11, 33\n  offset: 0, 0\n  index: -1\nezra_pieces/ez_0006_top-arm-2\n  rotate: false\n  xy: 209, 33\n  size: 11, 29\n  orig: 11, 29\n  offset: 0, 0\n  index: -1\nezra_pieces/ez_0007_top-arm-1\n  rotate: false\n  xy: 196, 32\n  size: 11, 30\n  orig: 11, 30\n  offset: 0, 0\n  index: -1\nezra_pieces/ez_0008_pack\n  rotate: false\n  xy: 61, 2\n  size: 14, 23\n  orig: 14, 23\n  offset: 0, 0\n  index: -1\n"}),define("text!../media/img/game/characters/Sab.atlas",[],function(){return"\nSab.png\nsize: 64,256\nformat: RGBA8888\nfilter: Linear,Linear\nrepeat: none\nEzra Final/Ez_0010_R-head-copy\n  rotate: false\n  xy: 2, 8\n  size: 21, 25\n  orig: 21, 25\n  offset: 0, 0\n  index: -1\nEzra Final/pouchOpen\n  rotate: false\n  xy: 22, 120\n  size: 15, 21\n  orig: 15, 21\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0000_L-arm-up\n  rotate: false\n  xy: 32, 49\n  size: 12, 33\n  orig: 12, 33\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0001_L-arm-low\n  rotate: false\n  xy: 16, 38\n  size: 14, 34\n  orig: 14, 34\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0001_R-Leg-up\n  rotate: false\n  xy: 2, 74\n  size: 12, 37\n  orig: 12, 37\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0002_L-Leg-up\n  rotate: false\n  xy: 22, 143\n  size: 12, 37\n  orig: 12, 37\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0002_R-Arm-up\n  rotate: false\n  xy: 41, 14\n  size: 13, 33\n  orig: 13, 33\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0003_L-Leg-low\n  rotate: false\n  xy: 2, 113\n  size: 18, 35\n  orig: 18, 35\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0003_R-Arm-low\n  rotate: false\n  xy: 36, 146\n  size: 14, 34\n  orig: 14, 34\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0004_L-Arm-up\n  rotate: false\n  xy: 46, 112\n  size: 12, 32\n  orig: 12, 32\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0004_R-arm-up\n  rotate: false\n  xy: 46, 78\n  size: 12, 32\n  orig: 12, 32\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0005_L-Arm-low\n  rotate: false\n  xy: 25, 2\n  size: 14, 34\n  orig: 14, 34\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0005_R-arm-low\n  rotate: false\n  xy: 30, 84\n  size: 14, 34\n  orig: 14, 34\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0006_L-Leg-up\n  rotate: false\n  xy: 2, 35\n  size: 12, 37\n  orig: 12, 37\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0006_R-Leg-up\n  rotate: false\n  xy: 16, 74\n  size: 12, 37\n  orig: 12, 37\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0007_L-Leg-low\n  rotate: false\n  xy: 22, 219\n  size: 19, 35\n  orig: 19, 35\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0007_R-Leg-low\n  rotate: false\n  xy: 43, 220\n  size: 19, 34\n  orig: 19, 34\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0008_Head\n  rotate: false\n  xy: 43, 195\n  size: 19, 23\n  orig: 19, 23\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0009_L-torso\n  rotate: false\n  xy: 2, 203\n  size: 18, 51\n  orig: 18, 51\n  offset: 0, 0\n  index: -1\nSabFinal/SabL__0009_R-Torso\n  rotate: false\n  xy: 2, 150\n  size: 18, 51\n  orig: 18, 51\n  offset: 0, 0\n  index: -1\nSabFinal/SabR__0003_L-Leg-low\n  rotate: false\n  xy: 22, 182\n  size: 18, 35\n  orig: 18, 35\n  offset: 0, 0\n  index: -1\n"}),define("text!../media/img/game/characters/stormtrooper.atlas",[],function(){return"\nstormtrooper.png\nsize: 64,256\nformat: RGBA8888\nfilter: Linear,Linear\nrepeat: none\nEzra Final/Ez_0002_L-Leg-up\n  rotate: false\n  xy: 25, 121\n  size: 13, 35\n  orig: 13, 35\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0003_L-Leg-low\n  rotate: false\n  xy: 28, 185\n  size: 23, 36\n  orig: 23, 36\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0004_R-Leg-Up\n  rotate: false\n  xy: 26, 84\n  size: 12, 35\n  orig: 12, 35\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0006_R-leg-low\n  rotate: false\n  xy: 2, 72\n  size: 22, 35\n  orig: 22, 35\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0009_R-torso\n  rotate: false\n  xy: 2, 109\n  size: 21, 53\n  orig: 21, 53\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0010_R-head\n  rotate: false\n  xy: 28, 158\n  size: 21, 25\n  orig: 21, 25\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0010_R-head-copy\n  rotate: false\n  xy: 40, 126\n  size: 21, 25\n  orig: 21, 25\n  offset: 0, 0\n  index: -1\nezra_pieces/ez_0007_top-arm-1\n  rotate: false\n  xy: 51, 153\n  size: 11, 30\n  orig: 11, 30\n  offset: 0, 0\n  index: -1\nstormtrooper/troop__0000_arm_hipgun\n  rotate: false\n  xy: 2, 223\n  size: 50, 31\n  orig: 50, 31\n  offset: 0, 0\n  index: -1\nstormtrooper/troop__0001_arm-empty\n  rotate: false\n  xy: 17, 3\n  size: 44, 31\n  orig: 47, 31\n  offset: 0, 0\n  index: -1\nstormtrooper/troop__0001_thigh\n  rotate: false\n  xy: 2, 2\n  size: 13, 32\n  orig: 13, 32\n  offset: 0, 0\n  index: -1\nstormtrooper/troop__0002_shin\n  rotate: false\n  xy: 2, 36\n  size: 20, 34\n  orig: 20, 34\n  offset: 0, 0\n  index: -1\nstormtrooper/troop__0003_head\n  rotate: false\n  xy: 40, 102\n  size: 18, 22\n  orig: 18, 22\n  offset: 0, 0\n  index: -1\nstormtrooper/troop__0004_torso\n  rotate: false\n  xy: 2, 164\n  size: 24, 57\n  orig: 24, 57\n  offset: 0, 0\n  index: -1\n"}),define("text!../media/img/game/characters/zeb.atlas",[],function(){return"\nzeb.png\nsize: 256,256\nformat: RGBA8888\nfilter: Linear,Linear\nrepeat: none\nZebFinal/ZebL__0000_R-Leg-up\n  rotate: false\n  xy: 101, 121\n  size: 21, 45\n  orig: 21, 45\n  offset: 0, 0\n  index: -1\nZebFinal/ZebL__0001_R-Leg-low\n  rotate: false\n  xy: 71, 120\n  size: 28, 46\n  orig: 28, 46\n  offset: 0, 0\n  index: -1\nZebFinal/ZebL__0003_R-Arm-low\n  rotate: false\n  xy: 124, 117\n  size: 19, 49\n  orig: 19, 49\n  offset: 0, 0\n  index: -1\nZebFinal/ZebL__0006_L-Leg-up\n  rotate: false\n  xy: 204, 194\n  size: 21, 45\n  orig: 21, 45\n  offset: 0, 0\n  index: -1\nZebFinal/ZebL__0007_L-Leg-low\n  rotate: false\n  xy: 174, 193\n  size: 28, 46\n  orig: 28, 46\n  offset: 0, 0\n  index: -1\nZebFinal/ZebR__0002_L-Arm-up\n  rotate: false\n  xy: 227, 196\n  size: 19, 43\n  orig: 19, 43\n  offset: 0, 0\n  index: -1\nZebFinal/ZebR__0004_R-Arm-up\n  rotate: false\n  xy: 145, 124\n  size: 19, 42\n  orig: 20, 42\n  offset: 0, 0\n  index: -1\nZebFinal/ZebR__0005_R-Arm-low\n  rotate: false\n  xy: 39, 25\n  size: 20, 50\n  orig: 20, 50\n  offset: 0, 0\n  index: -1\nZebFinal/ZebR__0008_Head\n  rotate: false\n  xy: 71, 92\n  size: 22, 26\n  orig: 22, 26\n  offset: 0, 0\n  index: -1\nZebFinal/ZebR__0009_R-Torso\n  rotate: false\n  xy: 2, 2\n  size: 35, 73\n  orig: 36, 73\n  offset: 0, 0\n  index: -1\nZebFinal/ZebR__crouch\n  rotate: false\n  xy: 71, 168\n  size: 101, 71\n  orig: 101, 71\n  offset: 0, 0\n  index: -1\nZebFinal/ZebR__idle\n  rotate: false\n  xy: 2, 77\n  size: 67, 162\n  orig: 67, 162\n  offset: 0, 0\n  index: -1\n"}),define("text!../media/img/game/characters/vader.atlas",[],function(){return"\nvader.png\nsize: 256,128\nformat: RGBA8888\nfilter: Linear,Linear\nrepeat: none\nvader/vader__0000_front-cape\n  rotate: false\n  xy: 2, 3\n  size: 31, 114\n  orig: 31, 114\n  offset: 0, 0\n  index: -1\nvader/vader__0001_back-forearm\n  rotate: false\n  xy: 196, 53\n  size: 14, 36\n  orig: 14, 36\n  offset: 0, 0\n  index: -1\nvader/vader__0002_Layer-19\n  rotate: false\n  xy: 179, 51\n  size: 15, 38\n  orig: 15, 38\n  offset: 0, 0\n  index: -1\nvader/vader__0003_skirt\n  rotate: false\n  xy: 102, 8\n  size: 32, 70\n  orig: 32, 70\n  offset: 0, 0\n  index: -1\nvader/vader__0004_arm\n  rotate: false\n  xy: 212, 57\n  size: 15, 32\n  orig: 15, 32\n  offset: 0, 0\n  index: -1\nvader/vader__0005_shin\n  rotate: false\n  xy: 232, 76\n  size: 22, 41\n  orig: 22, 41\n  offset: 0, 0\n  index: -1\nvader/vader__0006_thigh\n  rotate: false\n  xy: 162, 48\n  size: 15, 41\n  orig: 15, 41\n  offset: 0, 0\n  index: -1\nvader/vader__0007_torso\n  rotate: false\n  xy: 136, 24\n  size: 24, 54\n  orig: 24, 54\n  offset: 0, 0\n  index: -1\nvader/vader__0008_backskirt\n  rotate: false\n  xy: 67, 6\n  size: 33, 72\n  orig: 33, 72\n  offset: 0, 0\n  index: -1\nvader/vader__0009_Back-cape\n  rotate: false\n  xy: 35, 2\n  size: 30, 115\n  orig: 30, 115\n  offset: 0, 0\n  index: -1\nvader/vader__0010_head\n  rotate: false\n  xy: 162, 23\n  size: 22, 23\n  orig: 22, 23\n  offset: 0, 0\n  index: -1\nvader/vader__0011_grabbing\n  rotate: false\n  xy: 160, 91\n  size: 70, 26\n  orig: 70, 26\n  offset: 0, 0\n  index: -1\nvader/vader__0012_saber\n  rotate: false\n  xy: 67, 80\n  size: 91, 37\n  orig: 91, 37\n  offset: 0, 0\n  index: -1\n"}),define("text!../media/img/game/characters/stormtrooper_busy.atlas",[],function(){return"\nstormtrooper_busy.png\nsize: 64,256\nformat: RGBA8888\nfilter: Linear,Linear\nrepeat: none\nEzra Final/Ez_0002_L-Leg-up\n  rotate: false\n  xy: 25, 121\n  size: 13, 35\n  orig: 13, 35\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0003_L-Leg-low\n  rotate: false\n  xy: 28, 185\n  size: 23, 36\n  orig: 23, 36\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0004_R-Leg-Up\n  rotate: false\n  xy: 26, 84\n  size: 12, 35\n  orig: 12, 35\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0006_R-leg-low\n  rotate: false\n  xy: 2, 72\n  size: 22, 35\n  orig: 22, 35\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0009_R-torso\n  rotate: false\n  xy: 2, 109\n  size: 21, 53\n  orig: 21, 53\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0010_R-head\n  rotate: false\n  xy: 28, 158\n  size: 21, 25\n  orig: 21, 25\n  offset: 0, 0\n  index: -1\nEzra Final/Ez_0010_R-head-copy\n  rotate: false\n  xy: 40, 126\n  size: 21, 25\n  orig: 21, 25\n  offset: 0, 0\n  index: -1\nezra_pieces/ez_0007_top-arm-1\n  rotate: false\n  xy: 51, 153\n  size: 11, 30\n  orig: 11, 30\n  offset: 0, 0\n  index: -1\nstormtrooper/troop__0000_arm_hipgun\n  rotate: false\n  xy: 2, 223\n  size: 50, 31\n  orig: 50, 31\n  offset: 0, 0\n  index: -1\nstormtrooper/troop__0001_arm-empty\n  rotate: false\n  xy: 17, 3\n  size: 44, 31\n  orig: 47, 31\n  offset: 0, 0\n  index: -1\nstormtrooper/troop__0001_thigh\n  rotate: false\n  xy: 2, 2\n  size: 13, 32\n  orig: 13, 32\n  offset: 0, 0\n  index: -1\nstormtrooper/troop__0002_shin\n  rotate: false\n  xy: 2, 36\n  size: 20, 34\n  orig: 20, 34\n  offset: 0, 0\n  index: -1\nstormtrooper/troop__0003_head\n  rotate: false\n  xy: 40, 102\n  size: 18, 22\n  orig: 18, 22\n  offset: 0, 0\n  index: -1\nstormtrooper/troop__0004_torso\n  rotate: false\n  xy: 2, 164\n  size: 24, 57\n  orig: 24, 57\n  offset: 0, 0\n  index: -1\n"}),define("AtlasData",["require","exports","module","text!../media/img/game/characters/ez.atlas","text!../media/img/game/characters/Sab.atlas","text!../media/img/game/characters/stormtrooper.atlas","text!../media/img/game/characters/zeb.atlas","text!../media/img/game/characters/vader.atlas","text!../media/img/game/characters/stormtrooper_busy.atlas"],function(t,e,i){var s={ez:t("text!../media/img/game/characters/ez.atlas"),Sab:t("text!../media/img/game/characters/Sab.atlas"),stormtrooper:t("text!../media/img/game/characters/stormtrooper.atlas"),zeb:t("text!../media/img/game/characters/zeb.atlas"),vader:t("text!../media/img/game/characters/vader.atlas"),stormtrooper_busy:t("text!../media/img/game/characters/stormtrooper_busy.atlas")};return s}),function(t){function e(t,e,i,s,o){this._listener=e,this._isOnce=i,this.context=s,this._signal=t,this._priority=o||0}function i(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function s(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){s.prototype.dispatch.apply(t,arguments)}}e.prototype={active:!0,params:null,execute:function(t){var e,i;return this.active&&this._listener&&(i=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,i),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},s.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,i,s,o){var r,n=this._indexOfListener(t,s);if(-1!==n){if(r=this._bindings[n],r.isOnce()!==i)throw new Error("You cannot add"+(i?"":"Once")+"() then add"+(i?"Once":"")+"() the same listener without removing the relationship first.")}else r=new e(this,t,i,s,o),this._addBinding(r);return this.memorize&&this._prevParams&&r.execute(this._prevParams),r},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var i,s=this._bindings.length;s--;)if(i=this._bindings[s],i._listener===t&&i.context===e)return s;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,s){return i(t,"add"),this._registerListener(t,!1,e,s)},addOnce:function(t,e,s){return i(t,"addOnce"),this._registerListener(t,!0,e,s)},remove:function(t,e){i(t,"remove");var s=this._indexOfListener(t,e);return-1!==s&&(this._bindings[s]._destroy(),this._bindings.splice(s,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,i=Array.prototype.slice.call(arguments),s=this._bindings.length;if(this.memorize&&(this._prevParams=i),s){e=this._bindings.slice(),this._shouldPropagate=!0;do s--;while(e[s]&&this._shouldPropagate&&e[s].execute(i)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var o=s;o.Signal=s,"function"==typeof define&&define.amd?define("signals",[],function(){return o}):"undefined"!=typeof module&&module.exports?module.exports=o:t.signals=o}(this),define("fido/loader/Cache",["require","exports","module"],function(t,e,i){var s=function(){this._json={},this._text={}};s.prototype.addJson=function(t,e){this._json[e]=t},s.prototype.addText=function(t,e){this._text[e]=t},s.prototype.getJson=function(t){return this._json[t]?this._json[t]:null},s.prototype.getText=function(t){return this._text[t]?this._text[t]:void 0},i.exports=new s}),function(t,e,i){function s(t,e,i){return t.call.apply(t.bind,arguments)}function o(t,e,i){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,s),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function r(t,e,i){return r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:o,r.apply(null,arguments)}function n(t,e){this.J=t,this.t=e||t,this.C=this.t.document}function a(t,i,s){t=t.C.getElementsByTagName(i)[0],
t||(t=e.documentElement),t&&t.lastChild&&t.insertBefore(s,t.lastChild)}function h(t,e){function i(){t.C.body?e():setTimeout(i,0)}i()}function l(t,e,i){e=e||[],i=i||[];for(var s=t.className.split(/\s+/),o=0;o<e.length;o+=1){for(var r=!1,n=0;n<s.length;n+=1)if(e[o]===s[n]){r=!0;break}r||s.push(e[o])}for(e=[],o=0;o<s.length;o+=1){for(r=!1,n=0;n<i.length;n+=1)if(s[o]===i[n]){r=!0;break}r||e.push(s[o])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function c(t,e){for(var i=t.className.split(/\s+/),s=0,o=i.length;o>s;s++)if(i[s]==e)return!0;return!1}function u(t){if("string"==typeof t.ma)return t.ma;var e=t.t.location.protocol;return"about:"==e&&(e=t.J.location.protocol),"https:"==e?"https:":"http:"}function d(t,e){var i=t.createElement("link",{rel:"stylesheet",href:e}),s=!1;i.onload=function(){s||(s=!0)},i.onerror=function(){s||(s=!0)},a(t,"head",i)}function p(e,i,s,o){var r=e.C.getElementsByTagName("head")[0];if(r){var n=e.createElement("script",{src:i}),a=!1;return n.onload=n.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,s&&s(null),n.onload=n.onreadystatechange=null,"HEAD"==n.parentNode.tagName&&r.removeChild(n))},r.appendChild(n),t.setTimeout(function(){a||(a=!0,s&&s(Error("Script load timeout")))},o||5e3),n}return null}function f(t,e){this.X=t,this.fa=e}function m(t,e,i,s){this.c=null!=t?t:null,this.g=null!=e?e:null,this.A=null!=i?i:null,this.e=null!=s?s:null}function g(t){t=Q.exec(t);var e=null,i=null,s=null,o=null;return t&&(null!==t[1]&&t[1]&&(e=parseInt(t[1],10)),null!==t[2]&&t[2]&&(i=parseInt(t[2],10)),null!==t[3]&&t[3]&&(s=parseInt(t[3],10)),null!==t[4]&&t[4]&&(o=/^[0-9]+$/.test(t[4])?parseInt(t[4],10):t[4])),new m(e,i,s,o)}function v(t,e,i,s,o,r,n,a){this.M=t,this.k=a}function y(t){this.a=t}function _(t){var e=w(t.a,/(iPod|iPad|iPhone|Android|Windows Phone|BB\d{2}|BlackBerry)/,1);return""!=e?(/BB\d{2}/.test(e)&&(e="BlackBerry"),e):(t=w(t.a,/(Linux|Mac_PowerPC|Macintosh|Windows|CrOS|PlayStation|CrKey)/,1),""!=t?("Mac_PowerPC"==t?t="Macintosh":"PlayStation"==t&&(t="Linux"),t):"Unknown")}function x(t){var e=w(t.a,/(OS X|Windows NT|Android) ([^;)]+)/,2);if(e||(e=w(t.a,/Windows Phone( OS)? ([^;)]+)/,2))||(e=w(t.a,/(iPhone )?OS ([\d_]+)/,2)))return e;if(e=w(t.a,/(?:Linux|CrOS|CrKey) ([^;)]+)/,1))for(var e=e.split(/\s/),i=0;i<e.length;i+=1)if(/^[\d\._]+$/.test(e[i]))return e[i];return(t=w(t.a,/(BB\d{2}|BlackBerry).*?Version\/([^\s]*)/,2))?t:"Unknown"}function b(t){var e=_(t),i=g(x(t)),s=g(w(t.a,/AppleWeb(?:K|k)it\/([\d\.\+]+)/,1)),o="Unknown",r=new m,r="Unknown",n=!1;return/OPR\/[\d.]+/.test(t.a)?o="Opera":-1!=t.a.indexOf("Chrome")||-1!=t.a.indexOf("CrMo")||-1!=t.a.indexOf("CriOS")?o="Chrome":/Silk\/\d/.test(t.a)?o="Silk":"BlackBerry"==e||"Android"==e?o="BuiltinBrowser":-1!=t.a.indexOf("PhantomJS")?o="PhantomJS":-1!=t.a.indexOf("Safari")?o="Safari":-1!=t.a.indexOf("AdobeAIR")?o="AdobeAIR":-1!=t.a.indexOf("PlayStation")&&(o="BuiltinBrowser"),"BuiltinBrowser"==o?r="Unknown":"Silk"==o?r=w(t.a,/Silk\/([\d\._]+)/,1):"Chrome"==o?r=w(t.a,/(Chrome|CrMo|CriOS)\/([\d\.]+)/,2):-1!=t.a.indexOf("Version/")?r=w(t.a,/Version\/([\d\.\w]+)/,1):"AdobeAIR"==o?r=w(t.a,/AdobeAIR\/([\d\.]+)/,1):"Opera"==o?r=w(t.a,/OPR\/([\d.]+)/,1):"PhantomJS"==o&&(r=w(t.a,/PhantomJS\/([\d.]+)/,1)),r=g(r),n="AdobeAIR"==o?2<r.c||2==r.c&&5<=r.g:"BlackBerry"==e?10<=i.c:"Android"==e?2<i.c||2==i.c&&1<i.g:526<=s.c||525<=s.c&&13<=s.g,new v(o,0,0,0,0,0,0,new f(n,536>s.c||536==s.c&&11>s.g))}function w(t,e,i){return(t=t.match(e))&&t[i]?t[i]:""}function S(t){this.la=t||"-"}function T(t,e){this.M=t,this.Y=4,this.N="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.N=i[1],this.Y=parseInt(i[2],10))}function C(t){return t.N+t.Y}function P(t){var e=4,i="n",s=null;return t&&((s=t.match(/(normal|oblique|italic)/i))&&s[1]&&(i=s[1].substr(0,1).toLowerCase()),(s=t.match(/([1-9]00|normal|bold)/i))&&s[1]&&(/bold/i.test(s[1])?e=7:/[1-9]00/.test(s[1])&&(e=parseInt(s[1].substr(0,1),10)))),i+e}function A(t,e){this.d=t,this.p=t.t.document.documentElement,this.P=e,this.j="wf",this.h=new S("-"),this.ga=!1!==e.events,this.B=!1!==e.classes}function M(t){if(t.B){var e=c(t.p,t.h.e(t.j,"active")),i=[],s=[t.h.e(t.j,"loading")];e||i.push(t.h.e(t.j,"inactive")),l(t.p,i,s)}E(t,"inactive")}function E(t,e,i){t.ga&&t.P[e]&&(i?t.P[e](i.getName(),C(i)):t.P[e]())}function I(){this.w={}}function k(t,e){this.d=t,this.G=e,this.m=this.d.createElement("span",{"aria-hidden":"true"},this.G)}function L(t){a(t.d,"body",t.m)}function R(t){var e;e=[];for(var i=t.M.split(/,\s*/),s=0;s<i.length;s++){var o=i[s].replace(/['"]/g,"");-1==o.indexOf(" ")?e.push(o):e.push("'"+o+"'")}return e=e.join(","),i="normal","o"===t.N?i="oblique":"i"===t.N&&(i="italic"),"display:block;position:absolute;top:-999px;left:-999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+e+";"+("font-style:"+i+";font-weight:"+(t.Y+"00")+";")}function O(t,e,i,s,o,r,n,a){this.Z=t,this.ja=e,this.d=i,this.s=s,this.G=a||"BESbswy",this.k=o,this.I={},this.W=r||3e3,this.ba=n||null,this.F=this.D=null,t=new k(this.d,this.G),L(t);for(var h in tt)tt.hasOwnProperty(h)&&(e=new T(tt[h],C(this.s)),e=R(e),t.m.style.cssText=e,this.I[tt[h]]=t.m.offsetWidth);t.remove()}function B(t,e,i){for(var s in tt)if(tt.hasOwnProperty(s)&&e===t.I[tt[s]]&&i===t.I[tt[s]])return!0;return!1}function D(t){var e=t.D.m.offsetWidth,i=t.F.m.offsetWidth;e===t.I.serif&&i===t.I["sans-serif"]||t.k.fa&&B(t,e,i)?K()-t.na>=t.W?t.k.fa&&B(t,e,i)&&(null===t.ba||t.ba.hasOwnProperty(t.s.getName()))?j(t,t.Z):j(t,t.ja):F(t):j(t,t.Z)}function F(t){setTimeout(r(function(){D(this)},t),25)}function j(t,e){t.D.remove(),t.F.remove(),e(t.s)}function N(t,e,i,s){this.d=e,this.u=i,this.R=0,this.da=this.aa=!1,this.W=s,this.k=t.k}function U(t,e,i,s,o){if(i=i||{},0===e.length&&o)M(t.u);else for(t.R+=e.length,o&&(t.aa=o),o=0;o<e.length;o++){var n=e[o],a=i[n.getName()],h=t.u,c=n;h.B&&l(h.p,[h.h.e(h.j,c.getName(),C(c).toString(),"loading")]),E(h,"fontloading",c),h=null,h=new O(r(t.ha,t),r(t.ia,t),t.d,n,t.k,t.W,s,a),h.start()}}function z(t){0==--t.R&&t.aa&&(t.da?(t=t.u,t.B&&l(t.p,[t.h.e(t.j,"active")],[t.h.e(t.j,"loading"),t.h.e(t.j,"inactive")]),E(t,"active")):M(t.u))}function G(t){this.J=t,this.v=new I,this.oa=new y(t.navigator.userAgent),this.a=this.oa.parse(),this.T=this.U=0,this.Q=this.S=!0}function H(t,e,i,s,o){var r=0==--t.U;(t.Q||t.S)&&setTimeout(function(){U(e,i,s||null,o||null,r)},0)}function X(t,e,i){this.O=t?t:e+et,this.q=[],this.V=[],this.ea=i||""}function q(t){this.q=t,this.ca=[],this.L={}}function W(t,e){this.a=new y(navigator.userAgent).parse(),this.d=t,this.f=e}function Y(t,e){this.d=t,this.f=e,this.o=[]}function V(t,e){this.d=t,this.f=e,this.o=[]}function Z(t,e){this.d=t,this.f=e,this.o=[]}function J(t,e){this.d=t,this.f=e}var K=Date.now||function(){return+new Date};n.prototype.createElement=function(t,e,i){if(t=this.C.createElement(t),e)for(var s in e)e.hasOwnProperty(s)&&("style"==s?t.style.cssText=e[s]:t.setAttribute(s,e[s]));return i&&t.appendChild(this.C.createTextNode(i)),t};var Q=/^([0-9]+)(?:[\._-]([0-9]+))?(?:[\._-]([0-9]+))?(?:[\._+-]?(.*))?$/;m.prototype.compare=function(t){return this.c>t.c||this.c===t.c&&this.g>t.g||this.c===t.c&&this.g===t.g&&this.A>t.A?1:this.c<t.c||this.c===t.c&&this.g<t.g||this.c===t.c&&this.g===t.g&&this.A<t.A?-1:0},m.prototype.toString=function(){return[this.c,this.g||"",this.A||"",this.e||""].join("")},v.prototype.getName=function(){return this.M};var $=new v("Unknown",0,0,0,0,0,0,new f(!1,!1));y.prototype.parse=function(){var t;if(-1!=this.a.indexOf("MSIE")||-1!=this.a.indexOf("Trident/")){t=_(this);var e=g(x(this)),i=null,s=w(this.a,/Trident\/([\d\w\.]+)/,1),i=g(-1!=this.a.indexOf("MSIE")?w(this.a,/MSIE ([\d\w\.]+)/,1):w(this.a,/rv:([\d\w\.]+)/,1));""!=s&&g(s),t=new v("MSIE",0,0,0,0,0,0,new f("Windows"==t&&6<=i.c||"Windows Phone"==t&&8<=e.c,!1))}else if(-1!=this.a.indexOf("Opera"))t:if(t=g(w(this.a,/Presto\/([\d\w\.]+)/,1)),g(x(this)),null!==t.c||g(w(this.a,/rv:([^\)]+)/,1)),-1!=this.a.indexOf("Opera Mini/"))t=g(w(this.a,/Opera Mini\/([\d\.]+)/,1)),t=new v("OperaMini",0,0,0,_(this),0,0,new f(!1,!1));else{if(-1!=this.a.indexOf("Version/")&&(t=g(w(this.a,/Version\/([\d\.]+)/,1)),null!==t.c)){t=new v("Opera",0,0,0,_(this),0,0,new f(10<=t.c,!1));break t}t=g(w(this.a,/Opera[\/ ]([\d\.]+)/,1)),t=null!==t.c?new v("Opera",0,0,0,_(this),0,0,new f(10<=t.c,!1)):new v("Opera",0,0,0,_(this),0,0,new f(!1,!1))}else/OPR\/[\d.]+/.test(this.a)?t=b(this):/AppleWeb(K|k)it/.test(this.a)?t=b(this):-1!=this.a.indexOf("Gecko")?(t="Unknown",e=new m,g(x(this)),e=!1,-1!=this.a.indexOf("Firefox")?(t="Firefox",e=g(w(this.a,/Firefox\/([\d\w\.]+)/,1)),e=3<=e.c&&5<=e.g):-1!=this.a.indexOf("Mozilla")&&(t="Mozilla"),i=g(w(this.a,/rv:([^\)]+)/,1)),e||(e=1<i.c||1==i.c&&9<i.g||1==i.c&&9==i.g&&2<=i.A),t=new v(t,0,0,0,_(this),0,0,new f(e,!1))):t=$;return t},S.prototype.e=function(t){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.la)},T.prototype.getName=function(){return this.M},k.prototype.remove=function(){var t=this.m;t.parentNode&&t.parentNode.removeChild(t)};var tt={ra:"serif",qa:"sans-serif",pa:"monospace"};O.prototype.start=function(){this.D=new k(this.d,this.G),L(this.D),this.F=new k(this.d,this.G),L(this.F),this.na=K();var t=new T(this.s.getName()+",serif",C(this.s)),t=R(t);this.D.m.style.cssText=t,t=new T(this.s.getName()+",sans-serif",C(this.s)),t=R(t),this.F.m.style.cssText=t,D(this)},N.prototype.ha=function(t){var e=this.u;e.B&&l(e.p,[e.h.e(e.j,t.getName(),C(t).toString(),"active")],[e.h.e(e.j,t.getName(),C(t).toString(),"loading"),e.h.e(e.j,t.getName(),C(t).toString(),"inactive")]),E(e,"fontactive",t),this.da=!0,z(this)},N.prototype.ia=function(t){var e=this.u;if(e.B){var i=c(e.p,e.h.e(e.j,t.getName(),C(t).toString(),"active")),s=[],o=[e.h.e(e.j,t.getName(),C(t).toString(),"loading")];i||s.push(e.h.e(e.j,t.getName(),C(t).toString(),"inactive")),l(e.p,s,o)}E(e,"fontinactive",t),z(this)},G.prototype.load=function(t){this.d=new n(this.J,t.context||this.J),this.S=!1!==t.events,this.Q=!1!==t.classes;var e=new A(this.d,t),i=[],s=t.timeout;e.B&&l(e.p,[e.h.e(e.j,"loading")]),E(e,"loading");var o,i=this.v,a=this.d,h=[];for(o in t)if(t.hasOwnProperty(o)){var c=i.w[o];c&&h.push(c(t[o],a))}for(i=h,this.T=this.U=i.length,t=new N(this.a,this.d,e,s),s=0,o=i.length;o>s;s++)a=i[s],a.K(this.a,r(this.ka,this,a,e,t))},G.prototype.ka=function(t,e,i,s){var o=this;s?t.load(function(t,e,s){H(o,i,t,e,s)}):(t=0==--this.U,this.T--,t&&0==this.T?M(e):(this.Q||this.S)&&U(i,[],{},null,t))};var et="//fonts.googleapis.com/css";X.prototype.e=function(){if(0==this.q.length)throw Error("No fonts to load!");if(-1!=this.O.indexOf("kit="))return this.O;for(var t=this.q.length,e=[],i=0;t>i;i++)e.push(this.q[i].replace(/ /g,"+"));return t=this.O+"?family="+e.join("%7C"),0<this.V.length&&(t+="&subset="+this.V.join(",")),0<this.ea.length&&(t+="&text="+encodeURIComponent(this.ea)),t};var it={latin:"BESbswy",cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},st={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ot={i:"i",italic:"i",n:"n",normal:"n"},rt=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;q.prototype.parse=function(){for(var t=this.q.length,e=0;t>e;e++){var i=this.q[e].split(":"),s=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var r,n=i[1];if(r=[],n)for(var n=n.split(","),a=n.length,h=0;a>h;h++){var l;if(l=n[h],l.match(/^[\w-]+$/)){l=rt.exec(l.toLowerCase());var c=void 0;if(null==l)c="";else{if(c=void 0,c=l[1],null==c||""==c)c="4";else var u=st[c],c=u?u:isNaN(c)?"4":c.substr(0,1);l=l[2],c=[null==l||""==l?"n":ot[l],c].join("")}l=c}else l="";l&&r.push(l)}0<r.length&&(o=r),3==i.length&&(i=i[2],r=[],i=i?i.split(","):r,0<i.length&&(i=it[i[0]])&&(this.L[s]=i))}for(this.L[s]||(i=it[s])&&(this.L[s]=i),i=0;i<o.length;i+=1)this.ca.push(new T(s,o[i]))}};var nt={Arimo:!0,Cousine:!0,Tinos:!0};W.prototype.K=function(t,e){e(t.k.X)},W.prototype.load=function(t){var e=this.d;"MSIE"==this.a.getName()&&1!=this.f.blocking?h(e,r(this.$,this,t)):this.$(t)},W.prototype.$=function(t){for(var e=this.d,i=new X(this.f.api,u(e),this.f.text),s=this.f.families,o=s.length,r=0;o>r;r++){var n=s[r].split(":");3==n.length&&i.V.push(n.pop());var a="";2==n.length&&""!=n[1]&&(a=":"),i.q.push(n.join(a))}s=new q(s),s.parse(),d(e,i.e()),t(s.ca,s.L,nt)},Y.prototype.H=function(t){var e=this.d;return u(this.d)+(this.f.api||"//f.fontdeck.com/s/css/js/")+(e.t.location.hostname||e.J.location.hostname)+"/"+t+".js"},Y.prototype.K=function(t,e){var i=this.f.id,s=this.d.t,o=this;i?(s.__webfontfontdeckmodule__||(s.__webfontfontdeckmodule__={}),s.__webfontfontdeckmodule__[i]=function(t,i){for(var s=0,r=i.fonts.length;r>s;++s){var n=i.fonts[s];o.o.push(new T(n.name,P("font-weight:"+n.weight+";font-style:"+n.style)))}e(t)},p(this.d,this.H(i),function(t){t&&e(!1)})):e(!1)},Y.prototype.load=function(t){t(this.o)},V.prototype.H=function(t){var e=u(this.d);return(this.f.api||e+"//use.typekit.net")+"/"+t+".js"},V.prototype.K=function(t,e){var i=this.f.id,s=this.d.t,o=this;i?p(this.d,this.H(i),function(t){if(t)e(!1);else{if(s.Typekit&&s.Typekit.config&&s.Typekit.config.fn){t=s.Typekit.config.fn;for(var i=0;i<t.length;i+=2)for(var r=t[i],n=t[i+1],a=0;a<n.length;a++)o.o.push(new T(r,n[a]));try{s.Typekit.load({events:!1,classes:!1})}catch(h){}}e(!0)}},2e3):e(!1)},V.prototype.load=function(t){t(this.o)},Z.prototype.K=function(t,e){var i=this,s=i.f.projectId,o=i.f.version;if(s){var r=i.d.t;p(this.d,i.H(s,o),function(o){if(o)e(!1);else{if(r["__mti_fntLst"+s]&&(o=r["__mti_fntLst"+s]()))for(var n=0;n<o.length;n++)i.o.push(new T(o[n].fontfamily));e(t.k.X)}}).id="__MonotypeAPIScript__"+s}else e(!1)},Z.prototype.H=function(t,e){var i=u(this.d),s=(this.f.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return i+"//"+s+"/"+t+".js"+(e?"?v="+e:"")},Z.prototype.load=function(t){t(this.o)},J.prototype.load=function(t){var e,i,s=this.f.urls||[],o=this.f.families||[],r=this.f.testStrings||{};for(e=0,i=s.length;i>e;e++)d(this.d,s[e]);for(s=[],e=0,i=o.length;i>e;e++){var n=o[e].split(":");if(n[1])for(var a=n[1].split(","),h=0;h<a.length;h+=1)s.push(new T(n[0],a[h]));else s.push(new T(n[0]))}t(s,r)},J.prototype.K=function(t,e){return e(t.k.X)};var at=new G(this);at.v.w.custom=function(t,e){return new J(e,t)},at.v.w.fontdeck=function(t,e){return new Y(e,t)},at.v.w.monotype=function(t,e){return new Z(e,t)},at.v.w.typekit=function(t,e){return new V(e,t)},at.v.w.google=function(t,e){return new W(e,t)},this.WebFont||(this.WebFont={},this.WebFont.load=r(at.load,at),this.WebFontConfig&&at.load(this.WebFontConfig))}(this,document),define("fido/loader/WebFontLoader",function(){}),define("fido/loader/Loader",["require","exports","module","PIXI","signals","fido/loader/Cache","fido/loader/WebFontLoader"],function(t,e,i){var s=t("PIXI"),o=t("signals"),r=t("fido/loader/Cache"),n=(t("fido/loader/WebFontLoader"),function(){this.crossdomain=!1,window.XDomainRequest&&this.crossdomain?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=function(){},this.ajaxRequest.ontimeout=function(){},this.ajaxRequest.onprogress=function(){}):window.XMLHttpRequest&&(this.ajaxRequest=new window.XMLHttpRequest),this.ajaxRequest.onload=this._onFileLoaded.bind(this),this.ajaxRequest.onreadystatechange=function(t){},this.fileCount=0,this.filesToLoad=[],this.fontsToLoad=[],this.pixiAssetsToLoad=[],this.soundsToLoad=[],this.customToLoad=[],this.onComplete=new o,this.onProgress=new o});n.prototype.addFonts=function(t){this.fontsToLoad=this.fontsToLoad.concat(t)},n.prototype.addText=function(t,e){var i={url:t,id:e,type:n.TEXT};this.filesToLoad.push(i)},n.prototype.addJson=function(t,e){var i={url:t,id:e,type:n.JSON};this.filesToLoad.push(i)},n.prototype.addPixiAssets=function(t){this.pixiAssetsToLoad=this.pixiAssetsToLoad.concat(t)},n.prototype.addCSS=function(t){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)},n.prototype.addCustom=function(t){var e={object:t,type:n.CUSTOM};this.filesToLoad.push(e)},n.prototype.load=function(){this._loadFonts()},n.prototype._loadFiles=function(){this.fileCount=0,this.filesToLoad.length?this._loadNextFile():this._loadPixiAssets()},n.prototype._loadNextFile=function(){var t=this.filesToLoad[this.fileCount];t.type===n.CUSTOM?(t.object.onLoaded.addOnce(this._onFileLoaded,this),t.object.load()):(this.ajaxRequest.open("GET",t.url,!0),this.ajaxRequest.send())},n.prototype._onFileLoaded=function(){var t=this.filesToLoad[this.fileCount];if(t.type===n.CUSTOM);else if(200!==this.ajaxRequest.status);else switch(t.type){case n.TEXT:var e=this.ajaxRequest.responseText;r.addText(e,t.id);break;case n.JSON:var i=JSON.parse(this.ajaxRequest.responseText);r.addJson(i,t.id)}this.fileCount++,this._onProgress(),this.fileCount===this.filesToLoad.length?this._loadPixiAssets():this._loadNextFile()},n.prototype._loadPixiAssets=function(){return 0===this.pixiAssetsToLoad.length?void this._onComplete():(this.pixiAssetLoader=new s.loaders.Loader,this.pixiAssetLoader.add(this.pixiAssetsToLoad),this.pixiAssetLoader.on("progress",this._onProgress,this),void this.pixiAssetLoader.load(this._onComplete.bind(this)))},n.prototype._loadFonts=function(){return 0===this.fontsToLoad.length?void this._loadFiles():(WebFont.load({custom:{families:this.fontsToLoad,urls:[ASSET_URL+"./css/fonts.css"]},active:function(){for(var t=0;t<this.fontsToLoad.length;t++){var e=new s.Text("cheeky",{font:"32px "+this.fontsToLoad[t]});e.updateText()}}.bind(this)}),void this._loadFiles())},n.prototype._onComplete=function(t,e){s.loadedResources=e,this.onProgress.dispatch(1),this.onComplete.dispatch()},n.prototype._onProgress=function(){var t=(this.filesToLoad.length+this.pixiAssetsToLoad.length,this.fileCount);this.pixiAssetLoader&&(t=this.pixiAssetLoader.progress),this.onProgress.dispatch(.01*t)},n.TEXT=0,n.JSON=1,n.CUSTOM=2,i.exports=n}),define("fido/app/transitions/AlphaTransition",["require","exports","module"],function(t,e,i){AlphaTransition=function(){},AlphaTransition.constructor=AlphaTransition,AlphaTransition.prototype.begin=function(t,e,i){this.screenManager=t,this.currentScreen=e,this.nextScreen=i,this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.currentScreen,.4,{alpha:0,onComplete:this.onFadeout.bind(this)})):this.onFadeout()},AlphaTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen),this.currentScreen.alpha=1),this.nextScreen.alpha=0,this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),TweenLite.to(this.nextScreen,.4,{alpha:1,onComplete:this.onFadein.bind(this)}),this.screenManager.container.addChild(this.nextScreen)},AlphaTransition.prototype.onFadein=function(){this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.onTransitionComplete()},AlphaTransition.prototype.resize=function(t,e){this.w=t,this.h=e},i.exports=AlphaTransition}),define("fido/app/transitions/ColorTransition",["require","exports","module"],function(t,e,i){ColorTransition=function(){this.colorRect=(new PIXI.Graphics).beginFill(0).drawRect(0,0,2e3,1e3),this.colorRect.alpha=0},ColorTransition.constructor=ColorTransition,ColorTransition.prototype.begin=function(t,e,i){this.screenManager=t,this.currentScreen=e,this.nextScreen=i,this.screenManager.container.addChild(this.colorRect),this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.colorRect,.4,{alpha:1,onComplete:this.onFadeout.bind(this)})):this.onFadeout()},ColorTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen),this.currentScreen.alpha=1),this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),this.screenManager.container.addChild(this.nextScreen),this.screenManager.container.addChild(this.colorRect),TweenLite.to(this.colorRect,.4,{alpha:0,onComplete:this.onFadein.bind(this)})},ColorTransition.prototype.onFadein=function(){this.screenManager.container.removeChild(this.colorRect),this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.onTransitionComplete()},ColorTransition.prototype.resize=function(t,e){(this.w!==t||this.h!==e)&&(this.w=t,this.h=e,this.colorRect.scale.x=t/100,this.colorRect.scale.y=e/100)},i.exports=ColorTransition}),define("fido/app/ScreenManager",["require","exports","module","PIXI","./transitions/AlphaTransition","./transitions/ColorTransition"],function(t,e,i){var s=t("PIXI"),o=t("./transitions/AlphaTransition"),r=t("./transitions/ColorTransition"),n=function(t,e,i){this.container=t||new s.Container,this.screens={},this.currentScreen,this.fading=!1,this.w=e||400,this.h=i||400,this.history=[],this.defaultTransition=Device.instance.iPad||Device.instance.isMobile?new r:new o,this.transition=this.defaultTransition,this.active=!1};n.constructor=n,n.prototype.gotoScreenByID=function(t,e){var i=this.screens[t];if(!i)throw new Error("screen not found with id : "+t);this.gotoScreen(i,e)},n.prototype.addScreen=function(t,e){this.screens[e]=t,t.id=e,t.screenManager=this},n.prototype.goBack=function(){this.history.pop();var t=this.history.pop();t&&this.gotoScreen(t)},n.prototype.getScreenId=function(t){for(var e in this.screens)if(this.screens[e]===t)return e;return null},n.prototype.gotoScreen=function(t,e){if(this.currentScreen!==t&&(this.history.push(t),this.nextScreen=t,!this.active)){this.active=!0,this.transition=t.transition||this.defaultTransition,this.transition.onResize&&this.transition.onResize(this.w,this.h);var i=this.currentScreen;this.nextScreen&&this.nextScreen.resize&&this.nextScreen.resize(this.w,this.h),this.currentScreen=t,this.transition.begin(this,i,this.nextScreen)}},n.prototype.onTransitionComplete=function(){this.active=!1,this.currentScreen!=this.nextScreen&&this.gotoScreen(this.nextScreen)},n.prototype.resize=function(t,e){this.w=t,this.h=e,this.transition.onResize&&this.transition.onResize(t,e),this.currentScreen&&this.currentScreen.resize&&this.currentScreen.resize(t,e)},i.exports=n}),define("fido/system/Ticker",["require","exports","module","signals"],function(t,e,i){var s=t("signals"),o=function(t){this.onUpdate=new s,this.updateBind=this.update.bind(this),this.active=!1,this.maxDelta=t||2,this.deltaTime=1,this.timeElapsed=0,this.lastTime=0,this.speed=1};o.prototype.start=function(){this.active||(this.active=!0,requestAnimationFrame(this.updateBind))},o.prototype.stop=function(){this.active&&(this.active=!1)},o.prototype.update=function(){if(this.active){requestAnimationFrame(this.updateBind);var t=(new Date).getTime(),e=t-this.lastTime;e>100&&(e=100),this.deltaTime=.06*e,this.deltaTime*=this.speed,this.deltaTime>this.maxDelta&&(this.deltaTime=this.maxDelta),this.onUpdate.dispatch(this.deltaTime),this.lastTime=t}},o.prototype.add=function(t,e){this.onUpdate.add(t,e)},o.prototype.remove=function(t,e){this.onUpdate.remove(t,e)},o.instance=new o,i.exports=o}),define("fido/system/Device",["require","exports","module"],function(t,e,i){Device=function(){this.arora=!1,this.chrome=!1,this.chromeIOS=!1,this.epiphany=!1,this.firefox=!1,this.mobileSafari=!1,this.ie=!1,this.ieVersion=0,this.trident=!1,this.tridentVersion=0,this.midori=!1,this.opera=!1,this.safari=!1,this.silk=!1,this.webApp=!1,this.cocoonJS=!1,this.android=!1,this.chromeOS=!1,this.iOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.desktop=!1,this.pixelRatio=0,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.blob=!1,this.canvas=!1,this.localStorage=!1,this.file=!1,this.fileSystem=!1,this.webGL=!1,this.worker=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1;var t=navigator.userAgent;this._checkBrowser(t),this._checkOS(t),this._checkDevice(t),this._checkAudio(),this._checkFeatures(),this._checkIsMobile(),this._checkIsTouch()},Device.prototype._checkBrowser=function(t){/Arora/.test(t)?this.arora=!0:/CriOS/.test(t)?this.chromeIOS=!0:/Opera|OPR|op/.test(t)?(this.opera=!0,this.chrome=!1):/Chrome/.test(t)?this.chrome=!0:/Epiphany/.test(t)?this.epiphany=!0:/Firefox/.test(t)?this.firefox=!0:/Mobile Safari/.test(t)?this.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)||navigator.userAgent.match(/Trident.*rv[ :]*11\./)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(t)?this.midori=!0:/Safari/.test(t)?this.safari=!0:/\bSilk\b/.test(t)?this.silk=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(this.ie=!0,this.trident=!0,this.tridentVersion=parseInt(RegExp.$1,10),this.ieVersion=parseInt(RegExp.$3,10)),navigator.standalone&&(this.webApp=!0),navigator.isCocoonJS&&(this.cocoonJS=!0)},Device.prototype._checkOS=function(t){/Android/.test(t)?this.android=!0:/CrOS/.test(t)?this.chromeOS=!0:/iP[ao]d|iPhone/i.test(t)?(this.iOS=!0,this.iOS_version=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1):/Linux/.test(t)?this.linux=!0:/Mac OS/.test(t)?this.macOS=!0:/Windows/.test(t)&&(this.windows=!0),(this.windows||this.macOS||this.linux||this.chromeOS)&&(this.desktop=!0)},Device.prototype._checkDevice=function(){this.pixelRatio=window.devicePixelRatio||1,this.iPhone=-1!==navigator.userAgent.toLowerCase().indexOf("iphone"),this.iPhone4=2===this.pixelRatio&&this.iPhone,this.iPhone4&&(this.iPhone4=480==window.screen.height&&320==window.screen.width||480==window.screen.width&&320==window.screen.height),this.iPad=-1!==navigator.userAgent.toLowerCase().indexOf("ipad")},Device.prototype._checkFeatures=function(){"undefined"!=typeof window.Blob&&(this.blob=!0),this.canvas=!!window.CanvasRenderingContext2D;try{this.localStorage=!!localStorage.getItem}catch(t){this.localStorage=!1}this.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),this.fileSystem=!!window.requestFileSystem,this.webGL=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}(),(this.android||this.ie)&&(this.webGL=!1),this.worker=!!window.Worker,("ontouchstart"in document.documentElement||window.navigator.msPointerEnabled)&&(this.touch=!0)},Device.prototype._checkAudio=function(){this.audioData=!!window.Audio,this.webaudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),e=!1;try{(e=!!t.canPlayType)&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.ogg=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(this.mp3=!0),t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(this.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(this.m4a=!0))}catch(i){}},Device.prototype._checkIsMobile=function(){var t=!1;!function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),this.isMobile=t,this.mobile=t},Device.prototype._checkIsTouch=function(){this.isTouch="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},Device.prototype.getInfo=function(){var t="DEVICE OUTPUT\n\n";return t+="---\n",t+="Browser Info :: \n",t+="Arora : "+this.arora+"\n",t+="Chrome : "+this.chrome+"\n",t+="Epiphany : "+this.epiphany+"\n",t+="Firefox : "+this.firefox+"\n",t+="Mobile Safari : "+this.mobileSafari+"\n",t+="IE : "+this.ie,t+=this.ie?" (Version "+this.ieVersion+")\n":"\n",t+="Midori : "+this.midori+"\n",t+="Opera : "+this.opera+"\n",t+="Safari : "+this.safari+"\n",t+="Web App : "+this.webApp+"\n",t+="CocoonJS : "+this.cocoonJS+"\n",t+="Android : "+this.android+"\n",t+="---\n",t+="Operating System :: \n",t+="Chrome OS : "+this.chromeOS+"\n",t+="iOS : "+this.iOS+"\n",t+="Linux : "+this.linux+"\n",t+="Mac OS : "+this.macOS+"\n",t+="Windows : "+this.windows+"\n",t+="Desktop : "+this.desktop+"\n",t+="---\n",t+="Device Type : \n",t+="Pixel Ratio : "+this.pixelRatio+"\n",t+="iPhone : "+this.iPhone+"\n",t+="iPhone 4 : "+this.iPhone4+"\n",t+="iPad : "+this.iPad+"\n",t+="---\n",t+="Features :: \n",t+="Blob : "+this.blob+"\n",t+="Canvas : "+this.canvas+"\n",t+="LocalStorage : "+this.localStorage+"\n",t+="File : "+this.file+"\n",t+="File System : "+this.fileSystem+"\n",t+="WebGL : "+this.webGL+"\n",t+="Workers : "+this.worker+"\n",t+="---\n",t+="Audio :: \n",t+="AudioData : "+this.audioData+"\n",t+="WebAudio : "+this.webAudio+"\n",t+="Supports .ogg : "+this.ogg+"\n",t+="Supports Opus : "+this.opus+"\n",t+="Supports .mp3 : "+this.mp3+"\n",t+="Supports .wav : "+this.wav+"\n",t+="Supports .m4a : "+this.m4a+"\n",t+="Supports .webm : "+this.webm},Object.defineProperty(Device.prototype,"ie9",{get:function(){return this.ie&&9===this.ieVersion}}),Object.defineProperty(Device.prototype,"useSM2",{get:function(){return this.ie||this.opera}}),Device.instance=new Device,i.exports=Device}),define("fido/utils/FrameWait",["require","exports","module"],function(t,e,i){var s=function(){this.updateBind=this.update.bind(this),this.waits=[]};s.prototype.wait=function(t,e){var i={callback:t,count:e||2};this.waits.push(i),requestAnimationFrame(this.updateBind)},s.prototype.update=function(){for(var t=this.waits.length-1;t>=0;t--){var e=this.waits[t];e.count--,e.count<=0&&(e.callback(),this.waits.splice(t,1))}this.waits.length>0&&requestAnimationFrame(this.updateBind);
},i.exports=new s}),define("fido/app/LoaderScreen",["require","exports","module","PIXI","fido/system/Ticker","fido/utils/FrameWait","signals"],function(t,e,i){var s=t("PIXI"),o=t("fido/system/Ticker"),r=t("fido/utils/FrameWait"),n=t("signals"),a=function(t){s.Container.call(this),this.app=t,this.easeLoad=0,this.targetLoad=0,this.onReady=new n,this.onComplete=new n,this.initLoader()};a.prototype=Object.create(s.Container.prototype),a.prototype.initLoader=function(){o.instance.add(this.update,this),this.resize(this.w,this.h),r.wait(this.showLoader.bind(this))},a.prototype.showLoader=function(){this.onReady.dispatch()},a.prototype.update=function(){this.easeLoad+=.3*(this.targetLoad-this.easeLoad),this.easeLoad>.99&&(this.easeLoad=1,o.instance.remove(this.update,this),this.onComplete.dispatch())},a.prototype.updateProgress=function(t){this.targetLoad=t},a.prototype.onHide=function(){o.instance.remove(this.update,this)},a.prototype.resize=function(t,e){this.w=t,this.h=e,this.barBg},i.exports=a}),define("fido/app/OrientationManager",["require","exports","module","fido/system/Ticker","fido/system/Device","signals","fido/app/App"],function(t,e,i){var s=t("fido/system/Ticker"),o=t("fido/system/Device"),r=t("signals"),n=(t("fido/app/App"),function(t){if(this.mode=t,this.onRotationChanged=new r,this.rotationWarning=!0,this.orientation,this.rotateScreen=document.createElement("div"),this.rotateScreen.style.backgroundPosition="50% 50%",this.rotateScreen.style.backgroundColor="#3b3b3b",this.rotateScreen.style.backgroundRepeat="no-repeat",this.rotateScreen.style.position="absolute",this.rotateScreen.style.backgroundSize="cover",this.rotateScreen.style.top="0",this.rotateScreen.style.left="0",this.rotateScreen.style.bottom="0",this.rotateScreen.style.right="0",this.rotateScreen.style.zIndex=1e7,this.rotateScreen.style.display="none",this.rotateScreen.height="100%",this.rotateScreen.width="100%",this.changeRotationImage(ASSET_URL+"img/orientation_iphone.png"),o.instance.iPad&&this.changeRotationImage(ASSET_URL+"img/orientation_ipad.png"),document.body.appendChild(this.rotateScreen),o.instance.firefox){var e=window.matchMedia("(orientation: portrait)");e.addListener(this.checkOrientationChangesFirefox.bind(this))}this.supportsOrientationChange="onorientationchange"in window,this.supportsOrientationChange&&(this.orientation=window.orientation,window.addEventListener("orientationchange",this.checkOrientationChanges.bind(this),!1),this.checkOrientationChanges()),this.supportsOrientationEvent="DeviceOrientationEvent"in window});n.prototype.constructor=n,n.prototype.checkOrientationResize=function(t){},n.prototype.changeRotationImage=function(t){this.rotateScreen.style.backgroundImage="url("+t+")"},n.prototype.checkOrientationChangesFirefox=function(){var t=screen.orientation||screen.mozOrientation||screen.msOrientation;"landscape-primary"===t?this.orientation=90:"landscape-secondary"===t&&(this.orientation=-90),this.onRotationChanged.dispatch(this.orientation)},n.prototype.checkOrientationChanges=function(){this.orientation=window.orientation,this.onRotationChanged.dispatch(window.orientation)},n.prototype.check=function(t,e){if(!o.instance.desktop){var i=0===this.mode?e>t:t>e;i?(s.instance.stop(),this.rotateScreen.style.display="block"):(s.instance.start(),this.rotateScreen.style.display="none")}},n.prototype.updateDeviceOrientation=function(t){this.alpha=t.alpha,this.beta=t.beta,this.gamma=t.gamma},i.exports=n}),define("fido/app/TranslationManager",["require","exports","module","fido/loader/Cache"],function(t,e,i){var s=t("fido/loader/Cache"),o=function(t,e){this.debug=e.debug||!1,this.app=t,this.app.preloader.addJson(e.stringsUrl||ASSET_URL+"json/strings.json","strings"),this.app.preloader.onComplete.addOnce(this.onPreloaderComplete,this)};o.prototype.constructor=o,o.prototype.onPreloaderComplete=function(){if(window.translations=s.getJson("strings").strings,this.debug)for(var t in window.translations)window.translations[t]+=window.translations[t]},i.exports=o}),define("fido/app/App",["require","exports","module","PIXI","fido/loader/Loader","fido/app/ScreenManager","fido/system/Ticker","fido/system/Device","fido/app/LoaderScreen","fido/app/OrientationManager","fido/app/TranslationManager","signals"],function(t,e,i){var s=t("PIXI"),o=t("fido/loader/Loader"),r=t("fido/app/ScreenManager"),n=t("fido/system/Ticker"),a=t("fido/system/Device"),h=t("fido/app/LoaderScreen"),l=t("fido/app/OrientationManager"),c=t("fido/app/TranslationManager"),u=t("signals"),d=function(t){t=t||d.defaultOptions,this.options={};for(var e in d.defaultOptions)this.options[e]=t[e]||d.defaultOptions[e];this.setupPixi(),n.instance.start(),n.instance.add(this.update,this),this.screenManager=new r(null,300,300),this.preloader=new o,this.loader=new o,this.translation=new c(this,t),this.onReady=new u,this.options.orientationMode!==d.orientationModes.BOTH&&(this.orientationManager=new l(this.options.orientationMode)),this.stage.addChild(this.screenManager.container)};d.prototype.setupPixi=function(){var t=this.options;t.forceCanvas||a.instance.android&&!a.instance.chrome?(this.renderer=new s.CanvasRenderer(t.width,t.height),this.renderer.clearBeforeRender=!0):this.renderer=s.autoDetectRenderer(t.width,t.height),window.WEBGL=s.isWebGL=this.renderer instanceof s.WebGLRenderer,window.renderer=this.renderer,this.view=this.renderer.view,this.stage=new s.Container,this.view.style.position="absolute",this.view.addEventListener("mousedown",function(){window.focus()},!0),s.stage=this.stage},d.prototype.update=function(){this.renderer.render(this.stage)},d.prototype.startup=function(){this.options.config&&this.preloader.addJson(this.options.config,"config"),this.preloader.onComplete.addOnce(this.onPreloadComplete,this),this.preloader.load()},d.prototype.onPreloadComplete=function(){this.loaderScreen=new this.options.loaderScreen(this),this.loaderScreen.onReady.addOnce(this.onLoaderScreenReady,this),this.loaderScreen.onComplete.addOnce(this.onLoaderScreenComplete,this),this.onPreload&&this.onPreload(),this.screenManager.addScreen(this.loaderScreen,"loader"),this.screenManager.gotoScreenByID("loader")},d.prototype.onLoaderScreenReady=function(){this.loader.onComplete.addOnce(this.onAssetsLoaded,this),this.loader.onProgress.add(this.onProgresss,this),this.loader.load()},d.prototype.onAssetsLoaded=function(){},d.prototype.onProgresss=function(t){this.loaderScreen.updateProgress(t)},d.prototype.onLoaderScreenComplete=function(){this.onReady.dispatch()},d.prototype.resize=function(t,e){this.orientationManager&&this.orientationManager.check(t,e),this.options.resizeMode===d.resizeModes.DEFUALT?(this.renderer.resize(t,e),this.view.style.width="auto",this.view.style.height="auto"):this["this"].options.resizeMode===d.resizeModes.CSS_RESIZE_PRESERVE_RATIO||this.options.resizeMode===d.resizeModes.CSS_RESIZE&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},d.resizeModes={DEFUALT:0,CSS_RESIZE_PRESERVE_RATIO:1,CSS_RESIZE:2},d.orientationModes={LANDSCAPE:0,PORTRAIT:1,BOTH:2},d.defaultOptions={width:800,height:600,forceCanvas:!1,backgroundColor:16777215,resizeMode:d.resizeModes.DEFUALT,orientationMode:d.orientationModes.LANDSCAPE,loaderScreen:h,config:null},i.exports=d}),define("fido/system/VisibilityChecker",["require","exports","module","signals"],function(t,e,i){var s=t("signals"),o=function(){"undefined"!=typeof document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):"undefined"!=typeof document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),this.onHide=new s,this.onShow=new s,this.init()};o.prototype.handleVisibilityChange=function(){document[this.hidden]?this.onHide.dispatch():this.onShow.dispatch()},o.prototype.init=function(){document.addEventListener(this.visibilityChange,this.handleVisibilityChange.bind(this),!1)},i.exports=new o}),define("fido/sound/SoundManagerTwo",["require","exports","module","signals","fido/system/VisibilityChecker","SM2"],function(t,e,i){var s=t("signals"),o=t("fido/system/VisibilityChecker"),r=t("SM2"),n=function(){this.disabled=!1,this.preload=!0,this.sounds={},this.groups={},this.globalVolume=1,this.isMuted=!1,this.onFade=new s,this.onMuteToggle=new s};n.prototype.addSound=function(t,e,i){if(!this.disabled&&!this.sounds[e]){i=i||{};var s=r.createSound({url:t+".mp3",autoPlay:i.autoplay||!1,volume:i.volume?100*i.volume:100,loops:i.loop?1/0:1});s.__volume=s.volume,this.sounds[e]=s}},n.prototype.addGroup=function(t,e){if(!this.disabled&&!this.groups[e]){var i={index:0,type:0,sounds:t};this.groups[e]=i}},n.prototype.play=function(t){return this.disabled||!this.sounds[t]?void!this.sounds[t]:void(this.sounds[t].needsLooping?this.loopSound(this.sounds[t]):this.sounds[t].play())},n.prototype.pause=function(t){this.disabled||this.sounds[t].pause()},n.prototype.isPaused=function(t){return this.sounds[t].paused},n.prototype.getSound=function(){return!1},n.prototype.resume=function(t){this.disabled||this.sounds[t].resume()},n.prototype.pauseAll=function(){for(var t in this.sounds)this.sounds[t].pause()},n.prototype.resumeAll=function(){for(var t in this.sounds)this.sounds[t].resume()},n.prototype.fadeTo=function(t,e,i,s){"undefined"==typeof i&&(i=2.5),"undefined"==typeof s&&(s=null),"undefined"!=typeof e&&this.setVolume(t,e)},n.prototype.isPlaying=function(t){return 1===this.sounds[t].playState},n.prototype.playGroup=function(t){if(!this.disabled){var e=this.groups[t],i=Math.random()*e.sounds.length|0;this.sounds[e.sounds[i]].play()}},n.prototype.setVolume=function(t,e){if(!this.disabled){var i=this.sounds[t],s=100*e;i.setVolume(s*this.globalVolume)}},n.prototype.stop=function(t){this.disabled||this.sounds[t].stop()},n.prototype.setGlobalVolume=function(t){this.globalVolume=t;for(var e in this.sounds){var i=this.sounds[e];this.setVolume(e,.1*i.volume)}},n.prototype.mute=function(t){"undefined"==typeof t&&(t=!0),this.isMuted=!0,r.mute(),t&&this.onMuteToggle.dispatch(!0)},n.prototype.unmute=function(t){"undefined"==typeof t&&(t=!0),this.isMuted=!1,r.unmute(),t&&this.onMuteToggle.dispatch(!1)},n.prototype.check=function(){this.lastSeen=Date.now();var t=function(){lastSeen=Date.now(),setTimeout(t,50)};t();var i=document.getElementById("music");i.addEventListener("timeupdate",function(){Date.now()-e.lastSeen>100&&this.pause()},!1)},n.sfx=n.music=new n,o.onHide.add(r.mute,r),o.onShow.add(r.unmute,r),i.exports=n}),define("fido/sound/SoundManager",["require","exports","module","signals","fido/system/VisibilityChecker"],function(t,e,i){var s=t("signals"),o=t("fido/system/VisibilityChecker"),r=function(){this.disabled=!1,this.preload=!0,this.currentSound=null,this.sounds={},this.groups={},this.globalVolume=1,this.isMuted=!1,window.onfocus=this._onFocus.bind(this),this.onMuteToggle=new s};r.prototype._onFocus=function(){this.isMuted?this.mute():this.unmute()},r.prototype.addSound=function(t,e,i){if(!this.disabled&&!this.sounds[e]){i=i||{};var s=new Howl({urls:[t+".mp3",t+".ogg"],autoplay:i.autoplay||!1,loop:i.loop||!1,volume:i.volume||1});s.realVolume=i.volume||1,this.sounds[e]=s}},r.prototype.addSounds=function(t,e){for(var i=0;i<t.length;i++){var s=t[i];this.addSound(e+s,s)}},r.prototype.addGroup=function(t,e){if(!this.disabled&&!this.groups[e]){var i={index:0,type:0,sounds:t};this.groups[e]=i}},r.prototype.getSoundAtId=function(t){return this.sounds[t]},r.prototype.getSound=function(t){return this.currentSound},r.prototype.play=function(t,e){return this.disabled||!this.sounds[t]?void!this.sounds[t]:(e&&this.sounds[t].volume(e),this.sounds[t].play(),this.currentSound=this.sounds[t],this.currentSound)},r.prototype.fadeTo=function(t,e,i){if("undefined"==typeof i&&(i=2.5),"undefined"==typeof callback&&(callback=null),"undefined"!=typeof e){var s=this.sounds[t];s&&TweenLite.to(s,i,{_volume:e,onUpdate:this.actuallyChangeVolume.bind(this),onComplete:this.stopAndReset.bind(this),onCompleteParams:[t],onUpdateParams:["{self}",t]})}},r.prototype.actuallyChangeVolume=function(t,e){this.setVolume(e,t.target._volume)},r.prototype.stopAndReset=function(t){this.stop(t),this.setVolume(t,1),this.stop(t)},r.prototype.isPlaying=function(t){return this.disabled?void 0:!this.sounds[t]._audioNode[0].paused},r.prototype.playGroup=function(t){if(!this.disabled&&this.groups[t]){var e=this.groups[t],i=Math.random()*e.sounds.length|0;this.sounds[e.sounds[i]].play(),this.currentSound=this.sounds[e.sounds[i]]}},r.prototype.setVolume=function(t,e){if(!this.disabled){var i=this.sounds[t];i.realVolume=e,i.volume(e*this.globalVolume)}},r.prototype.stop=function(t){!this.disabled&&this.sounds[t]&&this.sounds[t].stop()},r.prototype.stopAll=function(){if(!this.disabled)for(var t in this.sounds)this.sounds[t].stop()},r.prototype.setPlaybackSpeed=function(t,e){if(!this.disabled){var i=this.sounds[t];i._playbackSpeed=e;var s="music"==t?0:1;i._webAudio&&Howler._howls[s]._audioNode[0]&&(Howler._howls[s]._audioNode[0].bufferSource.playbackRate.value=e)}},r.prototype.getPlaybackSpeed=function(t){if(!this.disabled){var e=this.sounds[t];return e._playbackSpeed||1}},r.prototype.setGlobalVolume=function(t){this.globalVolume=t;for(var e in this.sounds){var i=this.sounds[e];i.volume(i.realVolume*t)}},r.prototype.mute=function(){this.isMuted=!0,Howler.mute(),this.onMuteToggle.dispatch(!0)},r.prototype.unmute=function(){this.isMuted=!1,Howler.unmute(),this.onMuteToggle.dispatch(!1)},r.prototype.check=function(){this.lastSeen=Date.now();var t=function(){lastSeen=Date.now(),setTimeout(t,50)};t();var i=document.getElementById("music");i.addEventListener("timeupdate",function(){Date.now()-e.lastSeen>100&&this.pause()},!1)},r.sfx=new r,r.music=new r,r.sfx.disabled=!Howler.usingWebAudio,o.onHide.add(Howler.mute,Howler),o.onShow.add(function(){r.sfx.isMuted||Howler.unmute()}),i.exports=r}),define("fido/sound/SoundBridge",["require","exports","module","fido/system/Device","fido/sound/SoundManagerTwo","fido/sound/SoundManager"],function(t,e,i){var s=t("fido/system/Device");if(s.instance.useSM2)var o=t("fido/sound/SoundManagerTwo");else var o=t("fido/sound/SoundManager");if(window.noSound)var r={play:function(){},stop:function(){},setVolume:function(){},getVolume:function(){},addSound:function(){}},o={music:r,sfx:r};i.exports=o}),define("fido/ui/buttons/AbstractButton",["require","exports","module","signals","PIXI"],function(t,e,i){var s=t("signals"),o=t("PIXI"),r=function(){o.Container.call(this),this.view=this,this.onPress=new s,this.onDown=new s,this.onUp=new s,this.onHover=new s,this.onOut=new s,this.mousedown=this.touchstart=this.onDown.dispatch.bind(this,this),this.mouseup=this.touchend=this.onUp.dispatch.bind(this,this),this.click=this.tap=this.onPress.dispatch.bind(this,this),this.mouseover=this.onHover.dispatch.bind(this,this),this.touchendoutside=this.mouseupoutside=this.mouseout=this.onOut.dispatch.bind(this,this),this.onDown.add(this.down,this),this.onUp.add(this.up,this),this.onHover.add(this.hover,this),this.onOut.add(this.out,this),this._scale=new o.Point,this.enable()};r.prototype=Object.create(o.Container.prototype),r.prototype.constructor=r,r.prototype.setSize=function(t){switch(t){case"small":this.scale.set(.5);break;case"big":this.scale.set(2);break;default:this.scale.set(1)}},r.prototype.enable=function(){this.interactive=!0,this.buttonMode=!0},r.prototype.disable=function(){this.interactive=!1,this.buttonMode=!1},r.prototype.down=function(t,e){},r.prototype.up=function(t,e){},r.prototype.hover=function(t,e){},r.prototype.out=function(t,e){},r.prototype.show=function(){this.visible=!0,this.enable()},r.prototype.hide=function(){this.disable(),this.visible=!1},i.exports=r}),define("starwars/buttons/IconButton",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","fido/sound/SoundManager"],function(t,e,i){var s=t("PIXI"),o=t("fido/ui/buttons/AbstractButton"),r=t("fido/sound/SoundManager"),n=function(t){o.call(this),this.cacheAsBitmap=!0,this.background=new s.Sprite.fromFrame("border_disc_blue.png"),this.background.anchor.set(.5),this.addChild(this.background),this.icon=new s.Sprite,this.icon.anchor.set(.5),this.addChild(this.icon),this.setIcon(t)};n.prototype=Object.create(o.prototype),n.prototype.constructor=n,Object.defineProperty(n.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._updateFromBackgroundColor()}}),n.prototype._updateFromBackgroundColor=function(){this.background.texture=s.Texture.fromFrame("border_disc_"+this._backgroundColor+".png")},n.prototype.setIcon=function(t){t&&(this.cacheAsBitmap=!1,this.icon.texture=s.Texture.fromFrame(t),this.cacheAsBitmap=!0)},n.prototype.setSize=function(t){switch(t){case"small":this.scale.set(.5);break;case"big":this.scale.set(2);break;default:this.scale.set(1)}},n.prototype.show=function(t){var e=this.cacheAsBitmap;this.cacheAsBitmap=!1,this.visible=!0,this.enable(),s.isWebGL?(t=t||.4,TweenLite.to(this.icon,t,{alpha:1,onComplete:function(){this.enable(),this.cacheAsBitmap=e},onCompleteScope:this,ease:Power4.easeOut}),TweenLite.to(this.icon.scale,t,{x:1,y:1,ease:Back.easeOut}),TweenLite.to(this.background,.5*t,{alpha:1,ease:Power4.easeOut}),TweenLite.to(this.background.scale,.5*t,{x:1,y:1,ease:Back.easeOut})):(this.icon.alpha=1,this.background.alpha=1,this.icon.scale.x=this.icon.scale.y=1,this.background.scale.x=this.background.scale.y=1,this.cacheAsBitmap=e)},n.prototype.hide=function(t){var e=this.cacheAsBitmap;this.cacheAsBitmap=!1,this.disable(),s.isWebGL?(t=t||.2,TweenLite.to(this.icon,t,{alpha:0,onComplete:function(){this.visible=!1,this.cacheAsBitmap=e},onCompleteScope:this,ease:Power2.easeIn}),TweenLite.to(this.icon.scale,t,{x:0,y:0,ease:Power2.easeIn}),TweenLite.to(this.background,t,{alpha:0,ease:Power2.easeIn}),TweenLite.to(this.background.scale,t,{x:0,y:0,ease:Power2.easeIn})):(this.icon.alpha=0,this.background.alpha=0,this.icon.scale.x=this.icon.scale.y=0,this.background.scale.x=this.background.scale.y=0)},n.prototype.down=function(){o.prototype.down.call(this)},n.prototype.up=function(){r.sfx.play("selectbeep")},n.prototype.hover=function(){var t=this.cacheAsBitmap;this.cacheAsBitmap=!1;var e=.4;TweenLite.to(this.icon.scale,e,{x:1.3,y:1.3,onComplete:function(){this.cacheAsBitmap=t},onCompleteScope:this,ease:Elastic.easeOut}),TweenLite.to(this.background.scale,.5*e,{x:1.2,y:1.2,ease:Power4.easeOut})},n.prototype.out=function(){var t=this.cacheAsBitmap;this.cacheAsBitmap=!1;var e=.2;TweenLite.to(this.icon.scale,e,{x:1,y:1,onComplete:function(){this.cacheAsBitmap=t},onCompleteScope:this,ease:Power2.easeOut}),TweenLite.to(this.background.scale,e,{x:1,y:1,ease:Power2.easeOut})},i.exports=n}),define("starwars/buttons/GoldenButton",["require","exports","module","PIXI","./IconButton","fido/system/Device"],function(t,e,i){var s=t("PIXI"),o=t("./IconButton"),r=(t("fido/system/Device"),function(t,e){o.call(this,t),this._backgroundColor="blue",e=e||{},this.rings=[];for(var i=0;3>i;i++){var r=new s.Sprite.fromFrame("inner_detail_blue_large"+(i||"")+".png");r.anchor.set(.5),r.blendMode=s.isWebGL?s.BLEND_MODES.ADD:0,r._defaultAlpha=.3,r.alpha=r._defaultAlpha,r._defaultScale=1;var n=i%2?1:-1;TweenMax.to(r,10+10*Math.random(),{rotation:2*Math.PI*n,ease:Linear.easeOut,repeat:-1}),this.addChild(r),this.rings.push(r)}this.outerRingContainer=new s.Container,this.addChild(this.outerRingContainer),this.outerRing=new s.Sprite.fromFrame("ring_large.png"),this.outerRing.anchor.set(.5),this.outerRingContainer.addChild(this.outerRing),this.groove=new s.Sprite.fromFrame("big_button_groove.png"),this.groove.anchor.set(.5),this.outerRingContainer.addChild(this.groove),this.setSize("normal"),s.isWebGL||this.addChild(this.icon)});r.prototype=Object.create(o.prototype),r.prototype.constructor=r,Object.defineProperty(r.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._updateFromBackgroundColor()}}),r.prototype.hideRings=function(){for(var t=0;t<this.rings.length;t++)this.rings[t].visible=!1},r.prototype.showRings=function(){for(var t=0;t<this.rings.length;t++)this.rings[t].visible=!0},r.prototype._updateFromBackgroundColor=function(){"blue"!==this._backgroundColor&&(this.icon.blendMode=s.isWebGL&&s.isWebGL?s.BLEND_MODES.ADD:0),this.background.texture=s.Texture.fromFrame("inner_disc_"+this._backgroundColor+"_small.png")},r.prototype.setSize=function(t){for(var e=0;e<this.rings.length;e++){var i=this.rings[e];i._defaultScale="small"===t?.5:1,i.scale.set(i._defaultScale)}"small"===t?(this._updateFromBackgroundColor(),this.outerRing.texture=s.Texture.fromFrame("ring_small.png"),this.groove.texture=s.Texture.fromFrame("small_button_groove.png"),this.hideRings()):(this.background.texture=s.Texture.fromFrame("inner_disc_blue_large.png"),this.outerRing.texture=s.Texture.fromFrame("ring_large.png"),this.scale.set("big"===t?1.5:1),this.showRings())},r.prototype.show=function(t){t=t||.4,o.prototype.show.call(this,t),s.isWebGL?(TweenLite.to(this.outerRingContainer,.95*t,{alpha:1,delay:.05*t,ease:Power2.easeOut}),TweenLite.to(this.outerRingContainer.scale,.95*t,{x:1,y:1,delay:.05*t,ease:Back.easeOut}),TweenLite.to(this.groove,.95*t,{rotation:0,delay:.05*t,ease:Back.easeOut}),TweenLite.to(this.icon,t,{rotation:0,ease:Back.easeOut})):(this.outerRingContainer.alpha=1,this.outerRingContainer.scale.x=this.outerRingContainer.scale.y=1,this.groove.rotation=0,this.icon.rotation=0)},r.prototype.hide=function(t){t=t||.2,o.prototype.hide.call(this,t),s.isWebGL?(TweenLite.to(this.outerRingContainer,t,{alpha:0,ease:Power2.easeIn}),TweenLite.to(this.outerRingContainer.scale,t,{x:0,y:0,ease:Back.easeIn}),TweenLite.to(this.groove,t,{rotation:.25*-Math.PI,ease:Back.easeIn}),TweenLite.to(this.icon,t,{rotation:.25*Math.PI,ease:Back.easeIn})):(this.outerRingContainer.alpha=0,this.outerRingContainer.scale.x=this.outerRingContainer.scale.y=0,this.groove.rotation=.25*-Math.PI,this.icon.rotation=.25*Math.PI)},r.prototype.hover=function(){var t=.8;this.cacheAsBitmap=!1,TweenLite.to(this.icon.scale,t,{x:1.3,y:1.3,onComplete:function(){},onCompleteScope:this,ease:Elastic.easeOut}),TweenLite.to(this.background.scale,.5*t,{x:1.1,y:1.1,ease:Power4.easeOut}),TweenLite.to(this.outerRingContainer.scale,.5*t,{x:1.1,y:1.1,ease:Power4.easeOut}),TweenLite.to(this.groove,.5*t,{rotation:.5*Math.PI,ease:Back.easeOut});for(var e=0;e<this.rings.length;e++){var i=this.rings[e];TweenLite.to(i,.5*t,{alpha:2*i._defaultAlpha,ease:Power4.easeOut});var s=(1-.2*e)*i._defaultScale;i._defaultScale<1&&(s+=.4*i._defaultScale),TweenLite.to(i.scale,.5*t,{x:s,y:s,ease:Power4.easeOut})}},r.prototype.out=function(){var t=.2;this.cacheAsBitmap=!1,TweenLite.to(this.icon.scale,t,{x:1,y:1,onComplete:function(){this.cacheAsBitmap=!0},onCompleteScope:this,ease:Power2.easeOut}),TweenLite.to(this.background.scale,t,{x:1,y:1,ease:Power2.easeOut}),TweenLite.to(this.outerRingContainer.scale,t,{x:1,y:1,ease:Power2.easeOut}),TweenLite.to(this.groove,t,{rotation:0,ease:Power2.easeOut});for(var e=0;e<this.rings.length;e++){var i=this.rings[e];TweenLite.to(i,t,{alpha:i._defaultAlpha,ease:Power2.easeOut}),TweenLite.to(i.scale,t,{x:i._defaultScale,y:i._defaultScale,ease:Power2.easeOut})}},i.exports=r}),define("fido/utils/CircleMask",["require","exports","module","PIXI"],function(t,e,i){var s=t("PIXI"),o=function(){s.Graphics.call(this),this.thickness=10,this.startRads=0,this.endRads=Math.PI,this.xRadius=100,this.yRadius=100,this._ratio=0,this.redraw()};o.prototype=Object.create(s.Graphics.prototype),Object.defineProperty(o.prototype,"ratio",{get:function(){return this._ratio},set:function(t){this._ratio=t,this._ratio>1?this._ratio=1:this._ratio<0&&(this._ratio=0),this.redraw()}}),o.prototype.redraw=function(){var t=this._ratio*Math.PI*2;t*=.3,this.clear(),this.beginFill(16711680);var e=8,i=2*Math.PI/e,s=Math.ceil(8*this._ratio);8*this._ratio%1;this.moveTo(0,0);for(var o=0;s>o;o++){var r=o*i;this.lineTo(-100*Math.sin(r),-100*Math.cos(r))}var r=this._ratio*Math.PI*2;this.lineTo(-100*Math.sin(r),-100*Math.cos(r)),this.endFill()},i.exports=o}),define("starwars/loader/LoadingBar",["require","exports","module","PIXI","../buttons/GoldenButton","fido/utils/CircleMask"],function(t,e,i){var s=t("PIXI"),o=t("../buttons/GoldenButton"),r=t("fido/utils/CircleMask"),n=function(){s.Container.call(this),this.background=new o,this.background.disable(),this.background.x=1,this.addChild(this.background);var t=new s.Sprite.fromFrame("inline_circle_loader_button.png");t.scale.set(.74),t.anchor.x=.5,t.anchor.y=.5,t.tint=0,this.addChild(t),this.circleMask=new r,this.circleMask.scale.x*=-1,this.addChild(this.circleMask);var e=new s.Sprite.fromFrame("inline_circle_loader_button.png");e.scale.set(.74),e.anchor.x=.5,e.anchor.y=.5,e.mask=this.circleMask,this.addChild(e),this.percentageText=new s.Text("100",{font:"36px "+window.MAIN_FONT,fill:"#FAC943",dropShadow:!0,dropShadowAngle:Math.PI/2,dropShadowDistance:3,dropShadowColor:"rgba(0, 0, 0, .4)"}),this.percentageText.anchor.set(.5),this.percentageText.x=2,this.addChild(this.percentageText)};n.prototype=Object.create(s.Container.prototype),n.prototype.constructor=n,n.prototype.setProgress=function(t){this.circleMask.ratio=t+.02,this.percentageText.text=Math.floor(100*t)},i.exports=n}),define("text!starwars/shaders/lightspeed.glsl",[],function(){return"precision highp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform float intensity;\nuniform float starPositionOffset;\nuniform vec2 offset;\nuniform vec4 dimensions;\nuniform float scale;\n\nfloat rand(float n){\n  return fract(sin(n) * 43758.5453123);\n}\n\nvec4 mapStar(vec2 position, float intensity, float angleOffset) {\n\n  vec4 color = vec4(vec3(0.), 1.);\n\n  float angle = atan(position.y, position.x) + angleOffset;\n\n  float angleNumber = 20.;\n\n  float random = rand(floor(angle * angleNumber) * 100.);\n\n  float distance = random;\n  distance += starPositionOffset * .001;\n  distance = fract(distance);\n\n  float fragDistance = length(position);\n\n  float size = smoothstep(-.1, 2., intensity);\n\n  float bounded = step(distance, fragDistance) * step(fragDistance, distance + size);\n  bounded += step(fragDistance, fract(distance + size)) * step(fract(distance + size), distance);\n\n  color.rgb = mix(vec3(0.), vec3(1.), bounded);\n\n  color.r *= .3;\n  color.g *= .7 + random * .3;\n  color.b *= 2.;\n\n  // hard edges\n  float angleCenter = abs(fract(angle * angleNumber) * 2. - 1.);\n  color.a = step(angleCenter, smoothstep(-.2, 1., intensity));\n\n  // smooth gradient\n  color.a *= 1. - angleCenter;\n\n  color.a *= smoothstep(0., 1., fragDistance);\n  color.a *= cos(pow(random, 5.) * starPositionOffset * .001) * .5 + .5;\n\n  return color;\n}\n\nvoid main() {\n  vec2 position = (vTextureCoord * 2. - 1.) * (1. / scale);\n  position *= dimensions.y / dimensions.x;\n  position += offset * (1. / scale);\n\n  vec4 color = vec4(vec3(0.05), 1.);\n\n  for(float i = 0.; i < 2.; i++) {\n  	vec4 starColor = mapStar(position, intensity, i * 20.);\n    color.rgb += starColor.rgb * starColor.a;\n  }\n\n	gl_FragColor = color;\n}\n"}),define("starwars/filters/LightSpeedFilter",["require","exports","module","PIXI","fido/system/Ticker","text!../shaders/lightspeed.glsl"],function(t,e,i){function s(){this.speed=1,o.AbstractFilter.call(this,null,n,{intensity:{type:"f",value:0},starPositionOffset:{type:"f",value:0},scale:{type:"f",value:1},offset:{type:"2fv",value:[0,0]},dimensions:{type:"4fv",value:[0,0,0,0]}}),this.start()}var o=t("PIXI"),r=t("fido/system/Ticker"),n=t("text!../shaders/lightspeed.glsl");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,s.prototype.start=function(){r.instance.add(this.update,this)},s.prototype.stop=function(){r.instance.remove(this.update,this)},s.prototype.setIntensity=function(t){this.uniforms.intensity.value=t},s.prototype.enterLightSpeed=function(t){t=t||3,TweenLite.to(this.uniforms.intensity,t,{value:1,ease:Power3.easeIn})},s.prototype.leaveLightSpeed=function(t){t=t||1,TweenLite.to(this.uniforms.intensity,t,{value:0,ease:Power3.easeOut,onComplete:function(){this.stop()}.bind(this)})},s.prototype.update=function(){this.uniforms.starPositionOffset.value+=this.speed+40*this.intensity},Object.defineProperties(s.prototype,{intensity:{get:function(){return this.uniforms.intensity.value},set:function(t){this.uniforms.intensity.value=t}}}),i.exports=s}),define("fido/app/Screen",["require","exports","module","PIXI"],function(t,e,i){var s=t("PIXI"),o=function(t){this.app=t,this.id="",s.Container.call(this)};o.prototype=Object.create(s.Container.prototype),o.prototype.onHide=function(){},o.prototype.onHidden=function(){},o.prototype.onShow=function(){},o.prototype.onShown=function(){},o.prototype.resize=function(t,e){},i.exports=o}),define("starwars/filters/GlowFilter",["require","exports","module","PIXI"],function(t,e,i){function s(t,e,i,s,r,n,a){o.AbstractFilter.call(this,null,["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float distance;","uniform float outerStrength;","uniform float innerStrength;","uniform vec4 glowColor;","uniform float pixelWidth;","uniform float pixelHeight;","vec2 px = vec2(pixelWidth, pixelHeight);","void main(void) {","    const float PI = 3.14159265358979323846264;","    vec4 ownColor = texture2D(uSampler, vTextureCoord);","    vec4 curColor;","    float totalAlpha = 0.0;","    float maxTotalAlpha = 0.0;","    float cosAngle;","    float sinAngle;","    for (float angle = 0.0; angle <= PI * 2.0; angle += "+(1/a/i).toFixed(7)+") {","       cosAngle = cos(angle);","       sinAngle = sin(angle);","       for (float curDistance = 1.0; curDistance <= "+i.toFixed(7)+"; curDistance++) {","           curColor = texture2D(uSampler, vec2(vTextureCoord.x + cosAngle * curDistance * px.x, vTextureCoord.y + sinAngle * curDistance * px.y));","           totalAlpha += (distance - curDistance) * curColor.a;","           maxTotalAlpha += (distance - curDistance);","       }","    }","    maxTotalAlpha = max(maxTotalAlpha, 0.0001);","    ownColor.a = max(ownColor.a, 0.0001);","    ownColor.rgb = ownColor.rgb / ownColor.a;","    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);","    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;","    float resultAlpha = (ownColor.a + outerGlowAlpha);","    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);","}"].join("\n"),{distance:{type:"1f",value:i},outerStrength:{type:"1f",value:0},innerStrength:{type:"1f",value:0},glowColor:{type:"4f",value:new Float32Array([0,0,0,1])},pixelWidth:{type:"1f",value:0},pixelHeight:{type:"1f",value:0}}),a=Math.pow(a,1/3),this.quality=a,this.uniforms.distance.value*=a,t*=a,e*=a,this.color=n,this.outerStrength=s,this.innerStrength=r,this.viewWidth=t,this.viewHeight=e}var o=t("PIXI");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,Object.defineProperties(s.prototype,{color:{get:function(){return o.utils.rgb2hex(this.uniforms.glowColor.value)},set:function(t){o.utils.hex2rgb(t,this.uniforms.glowColor.value)}},outerStrength:{get:function(){return this.uniforms.outerStrength.value},set:function(t){this.uniforms.outerStrength.value=t}},innerStrength:{get:function(){return this.uniforms.innerStrength.value},set:function(t){this.uniforms.innerStrength.value=t}},viewWidth:{get:function(){return 1/this.uniforms.pixelWidth.value},set:function(t){this.uniforms.pixelWidth.value=1/t}},viewHeight:{get:function(){return 1/this.uniforms.pixelHeight.value},set:function(t){this.uniforms.pixelHeight.value=1/t;
}}}),i.exports=s}),define("starwars/app/FontUtils",["require","exports","module"],function(t,e,i){var s=function(){};s.prototype.init=function(){window.FONTS_EXTENDED?(window.MAIN_FONT="Arial",window.SECONDARY_FONT="Arial"):(window.MAIN_FONT="naked_power_rgregular",window.SECONDARY_FONT="naked_powerlight")},i.exports=new s}),define("starwars/loader/LoaderScreen",["require","exports","module","PIXI","fido/system/Ticker","./LoadingBar","../filters/LightSpeedFilter","signals","fido/app/Screen","fido/loader/Loader","../filters/GlowFilter","starwars/buttons/GoldenButton","fido/system/Device","fido/loader/Cache","starwars/app/FontUtils"],function(t,e,i){var s=t("PIXI"),o=t("fido/system/Ticker"),r=t("./LoadingBar"),n=t("../filters/LightSpeedFilter"),a=t("signals"),h=t("fido/app/Screen"),l=t("fido/loader/Loader"),c=t("../filters/GlowFilter"),u=t("starwars/buttons/GoldenButton"),d=t("fido/system/Device"),p=t("fido/loader/Cache"),f=t("starwars/app/FontUtils"),m=function(t){h.call(this,t),this.progress=0,this.easedProgress=0,this.counter=0,this.loader=new l,this.loader.addPixiAssets([SHARED_ASSET_URL+"images/ui_elements_shared.json",SHARED_ASSET_URL+"images/ui_elements_rebels.json",SHARED_ASSET_URL+"images/jedi_font.xml"]),p.getJson("config").config||(p.getJson("config").config=p.getJson("config")),window.FONTS_EXTENDED="true"===p.getJson("config").config.FONTS_EXTENDED,f.init(),this.loader.addJson(SHARED_ASSET_URL+"json/events.json","events"),this.loader.addCSS(SHARED_ASSET_URL+"css/fonts.css"),this.loader.onComplete.add(this.onAssetsLoaded,this),this.loader.load(),t.loader.onProgress.add(this.onProgress,this),this.onReady=new a,this.onComplete=new a,this.touchContinue=!d.instance.desktop&&!window.activateOnStart};m.prototype=Object.create(h.prototype),m.prototype.constructor=m,m.prototype.onAssetsLoaded=function(){s.isWebGL&&(this.lightSpeedFilter=new n),this.background=new s.Sprite.fromFrame("canvas_hyperspace.png"),s.isWebGL||(this.background.anchor.set(.5),this.background.position.x=this.app.safeSize.width/2,this.background.position.y=this.app.safeSize.height/2),this.background.filters=s.isWebGL?[this.lightSpeedFilter]:null,this.addChild(this.background);var t=new s.Text("Naked Powerlight",{font:"20px "+ +window.SECONDARY_FONT});t.updateText(),window.FONTS_EXTENDED?this.text=new s.Text(translations.STR_LOADING.toUpperCase(),{font:"30px "+window.MAIN_FONT,fill:"#fed95c",stroke:"#fddd54",strokeThickness:1}):this.text=new s.extras.BitmapText(translations.STR_LOADING.toLowerCase(),{font:"30px Star Jedi",align:"right"}),s.isWebGL&&(this.text.filters=[new c(256,256,2,1,0,9536030,1)]),this.text.pivot.x=.5*this.text.width,this.text.pivot.y=.5*this.text.height,this.addChild(this.text),this.starWarsLoader=new r,this.addChild(this.starWarsLoader),this.app.loader.load(),this.touchContinue&&(this.continueButton=new u("icon_play.png"),this.continueButton.onPress.add(function(){d.instance.android&&(document.body.requestFullScreen?document.body.requestFullScreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullScreen&&document.body.webkitRequestFullScreen()),this.continueButton.interactive=!1,TweenLite.to(this.continueButton.view.scale,.4,{x:0,y:0,ease:Back.easeIn}),TweenLite.to(this.continueButton.view,.3,{alpha:0,ease:Sine.easeIn,delay:.1}),this.onComplete.dispatch()},this)),this.resize(),o.instance.add(this.update,this)},m.prototype.update=function(){this.counter+=.05;var t=.2*(this.progress-this.easedProgress);t>.01&&(t=.01),this.easedProgress+=t;var e=this.easeInOutExpo(100*this.easedProgress,0,1,60);s.isWebGL?(this.background.position.x=Math.random()*e*2,this.background.position.y=Math.random()*e*2,this.lightSpeedFilter.setIntensity(e)):this.background.scale.set(this.easedProgress>.99?6:6*this.easedProgress),this.starWarsLoader.setProgress(this.easedProgress>.99?1:this.easedProgress),this.easedProgress>.99&&(o.instance.remove(this.update,this),this.complete()),this.text.alpha=.5*Math.abs(Math.cos(this.counter))+.5},m.prototype.easeInOutExpo=function(t,e,i,s){return t/=s/2,1>t?i/2*Math.pow(2,10*(t-1))+e:(t--,i/2*(-Math.pow(2,-10*t)+2)+e)},m.prototype.complete=function(){setTimeout(function(){this.touchContinue?(this.addChild(this.continueButton),this.continueButton.alpha=0,TweenLite.to(this.continueButton.view,.3,{alpha:1})):this.onComplete.dispatch()}.bind(this),1500),s.isWebGL&&this.lightSpeedFilter.leaveLightSpeed(),s.isWebGl||TweenLite.to(this.background.scale,1,{x:12,y:12,onComplete:function(){TweenLite.to(this.background.scale,.2,{x:0,y:0,ease:Power3.easeOut})}.bind(this),ease:Power3.easeOut});var t=.6,e=.6,i=.05;TweenLite.to(this.text.scale,t,{x:0,y:0,delay:e,ease:Back.easeIn}),TweenLite.to(this.text,t,{y:.5*this.screenHeight,delay:e,ease:Back.easeIn}),TweenLite.to(this.text,t,{alpha:0,delay:e,ease:Power2.easeIn}),TweenLite.to(this.starWarsLoader,t,{alpha:0,delay:e+i,ease:Power2.easeIn}),TweenLite.to(this.starWarsLoader.scale,t,{x:0,y:0,delay:e+i,ease:Back.easeIn,onComplete:function(){this.app.renderer.clearBeforeRender=!0}.bind(this)})},m.prototype.onProgress=function(t){this.progress=t},m.prototype.onHide=function(){o.instance.remove(this.update,this)},m.prototype.resize=function(t,e){this.screenWidth=t||this.screenWidth,this.screenHeight=e||this.screenHeight,this.starWarsLoader&&(this.starWarsLoader.x=.5*this.screenWidth,this.starWarsLoader.y=.5*this.screenHeight),this.text&&(this.text.x=.5*this.screenWidth,this.text.y=.5*this.screenHeight+.5*this.starWarsLoader.height),this.background&&s.isWebGL&&(this.background.width=this.screenWidth,this.background.height=this.screenHeight),this.continueButton&&(this.continueButton.view.position.x=this.screenWidth/2,this.continueButton.view.position.y=this.screenHeight/2)},i.exports=m}),define("fido/utils/Utils",["require","exports","module","PIXI"],function(t,e,i){var s=t("PIXI"),o={};o.trimTexture=function(t,e,i,s,o){e=e||0,i=i||0,s=s||0,o=o||0;var r=t._frame;r.x+=e,r.y+=s,r.width-=e+i,r.height-=s+o,t.frame=r,t._updateUvs()},o.getTexturesFromFrames=function(t){for(var e=[],i=0;i<t.length;i++)e.push(new s.Texture.fromFrame(t[i]));return e},o.getTexturesFromImages=function(t){for(var e=[],i=0;i<t.length;i++)e.push(new s.Texture.fromImage(t[i]));return e},o.getTexturesFromFramesWithPrefix=function(t,e,i,o){var r=[];void 0==i&&(i=0);for(var n=0;e>n;n++){var a=n+i,h=t.replace("%%",10>a?"0"+a:a);if(o)var h=t.replace("%%",a);r.push(new s.Texture.fromFrame(h))}return r},o.formatTime=function(t){if(999999===t)return"00:00:00";var t=t/.06,e=t/60/1e3|0;t-=60*e*1e3;var i=t/1e3|0;t-=1e3*i;var s=t/10|0;return t-=10*s,(10>e?"0":"")+e+":"+(10>i?"0":"")+i+":"+(10>s?"0":"")+s},o.formatTimeSeconds=function(t){if(999999===t)return"00:00";var t=t/.06,e=t/60/1e3|0;t-=60*e*1e3;var i=t/1e3|0;return t-=1e3*i,(10>e?"0":"")+e+":"+(10>i?"0":"")+i},o.pad=function(t,e){var i="0000"+t;return i.substr(i.length-e)},o.shuffle=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),s=t[e];t[e]=t[i],t[i]=s}return t},o.formatScore=function(t){for(var e=t.toString().split(""),i="",s=e.length,o=s%3-1,r=0;s>r;r++)i+=e[r],(r-o)%3==0&&r!=s-1&&(i+=",");return i},o.formatNumber=function(t){if(ones=t%10,tens=Math.floor(t/10)%10,1==tens)return t+"th";switch(ones){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd";default:return t+"th"}},o.formatName=function(t){for(var e=t.split(" "),i=e.length-1;i>=0;i--)0!==e[i].length&&(wordArray=e[i].split(""),wordArray[0]=wordArray[0].toUpperCase(),e[i]=wordArray.join(""));return word=e.join(" "),word},window.console||(window.console={log:function(t){}}),o.get_query=function(t){for(var e=location.href,i=e.substring(e.indexOf("?")+1).split("&"),s=0,o={};s<i.length;s++)i[s]=i[s].split("="),o[i[s][0]]=decodeURIComponent(i[s][1]);return o.hasOwnProperty(t)?o[t]:!1},o.toCamelCase=function(t){var e=/\s([a-z]|[A-Z])/,i=t.trim();return i=i.toLowerCase(),i=i.replace(e,function(t,e){return e.toUpperCase()})},o.defaults=function(t,e){t=t||{};for(var i in e)i in t||(t[i]=e[i]);return t},o.fitText=o.resizeText=function(t,e,i,s){s=s||"w",t.scale.set(1),i&&(t.text=i);var o=0;o="w"===s?e/t.width:e/t.height,o>1&&(o=1),t.scale.set(o)},o.resizeMultipleTexts=function(t,e,i){for(var s=0;s<t.length;s++){var o=t[s];o.scale.set(1)}var r=0;if(i)for(var s=0;s<t.length;s++){var o=t[s];o.text=i[s]}for(var s=0;s<t.length;s++){var o=t[s];o.width>r&&(r=o.width)}var n=e/r;n>1&&(n=1);for(var s=0;s<t.length;s++)t[s].scale.set(n)},i.exports=o}),define("fido/app/transitions/DigitalTransition",["require","exports","module"],function(t,e,i){DigitalTransition=function(){},DigitalTransition.constructor=DigitalTransition,DigitalTransition.prototype.begin=function(t,e,i){this.screenManager=t,this.currentScreen=e,this.nextScreen=i,this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.currentScreen.scale,.1,{x:1.5,y:0,ease:Sine.easeOut,onComplete:this.onFadeout.bind(this)})):this.onFadeout()},DigitalTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen),this.currentScreen.alpha=1),this.nextScreen.scale.y=0,this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),TweenLite.to(this.nextScreen.scale,.4,{x:1,y:1,ease:Elastic.easeOut,onComplete:this.onFadein.bind(this)}),this.screenManager.container.addChild(this.nextScreen)},DigitalTransition.prototype.onFadein=function(){this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.onTransitionComplete()},DigitalTransition.prototype.resize=function(t,e){this.w=t,this.h=e},i.exports=DigitalTransition}),define("starwars/filters/GlitchCathodic",["require","exports","module","PIXI"],function(t,e,i){function s(){o.AbstractFilter.call(this,null,["precision highp float;","uniform sampler2D Texture0;","uniform float time;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main()","{","vec4 color = texture2D(Texture0, vTextureCoord).rgba;","color -= abs(sin(vTextureCoord.y * 200.0 + time * 2.5)) * 0.04; // (1) ","color -= abs(sin(vTextureCoord.y * 400.0 - time * 5.0)) * 0.02; // (2)","gl_FragColor = color;","}"].join("\n"),{time:{type:"f",value:1}})}var o=t("PIXI");s.prototype=Object.create(o.AbstractFilter.prototype),s.prototype.constructor=s,Object.defineProperties(s.prototype,{time:{get:function(){return this.uniforms.time.value},set:function(t){this.uniforms.time=t}}}),i.exports=s}),define("starwars/overlays/AlertPanel",["require","exports","module","PIXI","signals","fido/app/ScreenManager","fido/app/transitions/DigitalTransition","starwars/buttons/GoldenButton","fido/app/Screen","starwars/filters/GlitchCathodic","fido/system/Ticker"],function(t,e,i){var s=t("PIXI"),o=t("signals"),r=(t("fido/app/ScreenManager"),t("fido/app/transitions/DigitalTransition"),t("starwars/buttons/GoldenButton")),n=(t("fido/app/Screen"),t("starwars/filters/GlitchCathodic"),t("fido/system/Ticker")),a=function(t,e){s.Container.call(this),this.app=t,this.blur=e,this.onShow=new o,this.onHide=new o,this.positionRatio=1,this.counter=0,this.container=new s.Sprite,this.container.anchor.set(.5),this.container.position.x=this.app.safeSize.width/2,this.container.position.y=this.app.safeSize.height/2,this.view=new s.Container,s.isWebGL&&this.blur?(this.black=(new s.Graphics).beginFill(6962028).drawRect(0,0,100,100),this.black.alpha=.7,this.black.interactive=!0,this.black.blendMode=s.BLEND_MODES.MULTIPLY,this.black.hitArea=new s.Rectangle(0,0,1e4,1e4)):(this.black=(new s.Graphics).beginFill(5592405).drawRect(0,0,100,100),this.black.alpha=0,this.black.interactive=!0,this.black.hitArea=new s.Rectangle(0,0,1e4,1e4)),this.view.visible=!1,!Device.instance.ie&&this.blur&&s.isWebGL&&(this.rt=new s.RenderTexture(this.app.renderer,1136,745,0,.25),this.bg=new s.Sprite(this.rt),this.view.addChild(this.bg),this.blurX=new s.filters.BlurXFilter,this.blurX.blur=30,this.blurY=new s.filters.BlurYFilter,this.blurY.blur=30,this.blurX.passes=8,this.blurY.passes=8),this.view.addChild(this.black),this.view.addChild(this.container),this.bg2=new s.Sprite.fromFrame("generic_comms_panel.png"),this.bg2.anchor.set(.5),this.container.addChild(this.bg2),this.nextButton=new r("icon_play.png"),this.nextButton.setSize("small"),this.nextButton.onPress.add(this.next,this),this.nextButton.x=this.bg2.width/2-10,this.nextButton.y=this.bg2.height/2-25,this.bg2.addChild(this.nextButton);var i={font:"40px "+window.MAIN_FONT,fill:"#eeffff",stroke:"#fddd54",strokeThickness:1};this.formatInfo={font:"20px "+window.MAIN_FONT,fill:"#eeffff",wordWrap:!0,lineHeight:28,wordWrapWidth:.8*this.bg2.width,align:"center"},this.formatInfoWithImage={font:"24px "+window.SECONDARY_FONT,fill:"#eeffff",wordWrap:!0,lineHeight:28,wordWrapWidth:.7*this.bg2.width,align:"left"},this.title=new s.Text("",i),this.title.anchor.x=this.title.anchor.y=.5,this.title.position.y=-this.bg2.height/2-25,this.sprite=new s.Sprite,this.sprite.anchor.y=.5,this.sprite.position.x=-this.bg2.width/2+20,this.sprite.position.y=0,this.info=new s.Text("",this.formatInfo),this.info.anchor.x=.5,this.info.anchor.y=.5,this.container.addChild(this.title),this.container.addChild(this.sprite),this.container.addChild(this.info)};a.prototype=Object.create(s.Container.prototype),a.prototype.setPosition=function(t){this.positionRatio=t||this.positionRatio,this.container.position.x=this.app.safeSize.width/2*this.positionRatio,this.container.position.y=this.app.safeSize.height/2*this.positionRatio},a.prototype.resize=function(t,e){this.black.scale.set(t/100,e/100)},a.prototype.update=function(){this.counter-=.04,s.isWebGL},a.prototype.next=function(){this.index+1>=this.data.length?this.hide():(this.index++,this.display(this.index))},a.prototype.display=function(t){var e=this.data[t];this.title.text=e.title||"",e.img?(this.info.style=this.formatInfoWithImage,this.info.position.x=30,this.sprite.visible=!0,this.sprite.texture=new s.Texture.fromFrame(e.img)):(this.info.style=this.formatInfo,this.info.position.x=0,this.sprite.visible=!1),this.info.text=translations[e.text]||e.text;var i=.75*this.bg2.height/this.info.height;this.info.scale.set(Math.min(i,1)),TweenLite.fromTo(this.info,.4,{alpha:0},{alpha:1}),TweenLite.fromTo(this.info,.4,{y:-10},{y:0,ease:Back.easeOut})},a.prototype.hide=function(){this.onHide.dispatch(),s.isWebGL?(TweenLite.to(this.container.scale,.1,{x:1.5,y:0,ease:Sine.easeOut}),TweenLite.to(this.view,.3,{alpha:0,onComplete:function(){this.view.visible=!1,n.instance.remove(this.update,this)}.bind(this)})):(this.container.scale.x=1.5,this.container.scale.y=0,this.view.visible=!1,n.instance.remove(this.update,this))},a.prototype.show=function(t,e){if(n.instance.add(this.update,this),e=e||{},this.nextButton.visible=e.hasNextButton!==!1,this.black.visible=this.nextButton.visible,this.setPosition(),this.container.position.x+=e.offsetX||0,this.container.position.y+=e.offsetY||0,this.onShow.dispatch(),!Device.instance.ie&&this.blur&&s.isWebGL){var i=this.app.stage;i.filters=[this.blurX,this.blurY],this.rt.render(i),this.bg.visible=!0,i.filters=null}this.view.visible=!0,this.view.alpha=0,this.container.scale.set(1.5,0),s.isWebGL?(TweenLite.to(this.view,.3,{alpha:1}),TweenLite.to(this.container.scale,.4,{delay:.2,x:1,y:1,ease:Elastic.easeOut})):(this.view.alpha=1,this.container.scale.x=this.container.scale.y=1),this.index=0,this.data=t,this.display(this.index)},i.exports=a}),define("fido/system/LocalStorage",["require","exports","module"],function(t,e,i){var s=function(t){this.id=t||"com.goodboydigital",this.canSave=!1;try{localStorage.setItem(this.id+".access",!0),localStorage.removeItem(this.id+".access",!0),this.canSave=!0}catch(e){}};s.prototype.store=function(t,e){this.canSave&&localStorage.setItem(this.id+"."+t,e)},s.prototype.get=function(t){return this.canSave?localStorage.getItem(this.id+"."+t):void 0},s.prototype.storeObject=function(t,e){this.canSave&&localStorage.setItem(this.id+"."+t,JSON.stringify(e))},s.prototype.getObject=function(t){return this.canSave?JSON.parse(localStorage.getItem(this.id+"."+t)):void 0},s.prototype.remove=function(t){this.canSave&&localStorage.removeItem(this.id+"."+t)},s.prototype.reset=function(){if(this.canSave)for(var t in localStorage)-1!==t.indexOf(this.id+".")&&localStorage.removeItem(t)},i.exports=s}),define("starwars/app/AlertPanelManager",["require","exports","module","PIXI","starwars/overlays/AlertPanel","fido/system/LocalStorage","signals"],function(t,e,i){var s=t("PIXI"),o=t("starwars/overlays/AlertPanel"),r=t("fido/system/LocalStorage"),n=t("signals"),a=function(t,e,i){this.app=t,e||(e="com.disney.arcade.panels_"),this.currentPanelId="",this.onHide=new n,this.onShow=new n,this.view=new s.Container,this.canComeBack=!1,this.alertPanel=new o(t,i),this.alertPanel.onHide.add(this.onPanelHidden,this),this.view.addChild(this.alertPanel.view),this.localStorage=new r(e),this.save={alertPanels:{}}};a.prototype.constructor=a,a.prototype.load=function(t){var e=this.localStorage.getObject("savePanels");if(e)this.save=e;else{for(var i in t){var s=t[i];this.save.alertPanels[i]=s;for(var o=0;o<s.length;o++)this.save.alertPanels[i]=s[o]}this.localStorage.storeObject("savePanels",this.save)}for(var i in t)for(var r=t[i].slides,o=0;o<r.length;o++){var n=r[o];this.save.alertPanels[i].slides[o].text=n.text}},a.prototype.onPanelHidden=function(){this.setAlertPanelState(this.currentPanelId,!1),this.onHide.dispatch()},a.prototype.setAlertPanelState=function(t,e){var i=this.save.alertPanels[t];i&&(i.state=e),this.saveToStorage()},a.prototype.show=function(t,e){e=e||{},this.canComeBack=e.canComeBack,void 0===this.canComeBack&&(this.canComeBack=!1),this.currentPanelId=t;var i=this.save.alertPanels[this.currentPanelId];i&&i.state&&(this.onShow.dispatch(),this.alertPanel.show(i.slides,e))},a.prototype.showCustom=function(t,e){this.alertPanel.show([{text:t}],e)},a.prototype.hide=function(t){this.save.alertPanels[this.currentPanelId];this.alertPanel.hide()},a.prototype.getState=function(t){var e=this.save.alertPanels[t];return e?e.state:void 0},a.prototype.addEvents=function(t){var e=this.save.alertPanels.events;if(!e||""!==e.lastAccess&&e.lastAccess!==(new Date).toDateString()){for(var e={lastAccess:"",slides:[]},i=0;i<t.length;i++)e.slides.push({text:t[i]});this.save.alertPanels.events=e}},a.prototype.showEvents=function(){var t=this.save.alertPanels.events,e=(new Date).toDateString();t.lastAccess!==e&&(this.onShow.dispatch(),this.alertPanel.show(t.slides),t.lastAccess=e,this.saveToStorage())},a.prototype.resize=function(t,e){this.alertPanel.resize(t,e)},a.prototype.saveToStorage=function(){this.canComeBack||this.localStorage.storeObject("savePanels",this.save)},i.exports=a}),define("fido/ui/buttons/DefaultButton",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","fido/sound/SoundManager"],function(t,e,i){var s=t("PIXI"),o=t("fido/ui/buttons/AbstractButton"),r=(t("fido/sound/SoundManager"),function(t,e,i,r){this.isOnlyIcon=!1;var n;t?(n=new s.Sprite.fromFrame(t),n.anchor.set(.5)):(n=new s.Container,this.isOnlyIcon=!0),o.call(this,n),this.normalTexture=t,this.downTexture=e||this.normalTexture,this.hoverTexture=i||this.normalTexture,r&&(this.icon=new s.Sprite.fromFrame(r),this.icon.anchor.set(.5),this.addChild(this.icon)),this.onDown.add(this._onDown,this),this.onUp.add(this._onUp,this),this.onHover.add(this._onHover,this),this.onOut.add(this._onMouseOut,this)});r.prototype=Object.create(o.prototype),r.prototype._onDown=function(){this.isOnlyIcon||(this.view.texture=s.Texture.fromFrame(this.downTexture))},r.prototype._onHover=function(){this.isOnlyIcon||(this.view.texture=s.Texture.fromFrame(this.hoverTexture))},r.prototype._onMouseOut=function(){this.isOnlyIcon||(this.view.texture=s.Texture.fromFrame(this.normalTexture))},r.prototype._onUp=function(){this.isOnlyIcon||(this.view.texture=s.Texture.fromFrame(this.normalTexture))},r.prototype.setIcon=function(t){this.icon.texture=s.Texture.fromFrame(t)},r.prototype.setSize=function(t){this.defaultScale=t,this.overScale=1.1*t},r.prototype.fromFrames=function(t,e,i,o){return new r(s.Texture.fromFrame(t),s.Texture.fromFrame(e),s.Texture.fromFrame(i),o?s.Texture.fromFrame(o):null)},r.gameSpecificButton=function(t){var e=new r("bigbutton_up.png","bigbutton_down.png","bigbutton_over.png",t?t:null);return e.defaultScale=1,t&&(e.icon.pivot.y=13),e},i.exports=r}),define("com/rebels/app/buttons/IconButton",["require","exports","module","PIXI","fido/ui/buttons/DefaultButton"],function(t,e,i){var s=(t("PIXI"),t("fido/ui/buttons/DefaultButton")),o={small:function(t){var e=new s("icon_play.png","icon_play.png","icon_play.png",t?t:null);return e.defaultScale=1,e},big:function(t){var e=new s("icon_play.png","icon_play.png","icon_play.png",t?t:null);return e.defaultScale=1,e},close:function(t){var e=new s("inner_disc_red_small.png","redbutton_down.png","redbutton_over.png",t?t:null);return e.defaultScale=1,e}};i.exports=o}),define("fido/physics/DoubleSpring",["require","exports","module"],function(t,e,i){var s=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0,this.y=0,this.ay=0,this.dy=0,this.ty=0,this.max=30,this.damp=.75,this.springiness=.09,this.max=160,this.damp=.85,this.springiness=.29};s.constructor=s,s.prototype.update=function(){this.ax=(this.tx-this.x)*this.springiness,this.dx+=this.ax,this.dx*=this.damp,this.dx<-this.max?this.dx=-this.max:this.dx>this.max&&(this.dx=this.max),this.x+=this.dx,this.ay=(this.ty-this.y)*this.springiness,this.dy+=this.ay,this.dy*=this.damp,this.dy<-this.max?this.dy=-this.max:this.dy>this.max&&(this.dy=this.max),this.y+=this.dy},s.prototype.reset=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0,this.y=0,this.ay=0,this.dy=0,this.ty=0},i.exports=s}),define("fido/physics/Spring",["require","exports","module"],function(t,e,i){var s=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0,this.max=160,this.damp=.8,this.springiness=.1};s.prototype.update=function(){this.ax=(this.tx-this.x)*this.springiness,this.dx+=this.ax,this.dx*=this.damp,this.dx<-this.max?this.dx=-this.max:this.dx>this.max&&(this.dx=this.max),this.x+=this.dx},s.prototype.reset=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0},i.exports=s}),define("fido/ui/PixiScrollbar",["require","exports","module","../physics/Spring","fido/system/Ticker","./PixiTrackpad"],function(t,e,i){var s=(t("../physics/Spring"),t("fido/system/Ticker"));t("./PixiTrackpad");PixiScrollBar=function(t){this.topMargin=15,this.bottomMargin=15,this.yTouchOffset=0,this.dragging=!1,this.trackpad=t.trackpad,this.targetPosition={x:0,y:0},this.container=t.target,this.guideLine=new PIXI.Sprite,this.guideLine.anchor.set(1,0),this.guideLine.position.x=630,this.guideLine.position.y=1,this.guideLine.height=229,this.guideLine.hitArea=new PIXI.Rectangle(-10,0,40,300),this.guideLine.interactive=!1,this.guideLine.buttonMode=!1,this.guideButton=new PIXI.Sprite,this.guideButton.anchor.set(1,.5),this.guideButton.position.x=642,this.guideButton.hitArea=new PIXI.Rectangle(-100,-100,400,300),this.guideButton.position.y=this.topMargin+.5*this.guideButton.height,this.guideButton.interactive=!0,this.guideButton.buttonMode=!0,this.container.addChild(this.guideLine),this.container.addChild(this.guideButton),this.guideButton.touchstart=this.guideButton.mousedown=this.onDown.bind(this),this.guideButton.touchend=this.guideButton.touchendoutside=this.guideButton.mouseup=this.guideButton.mouseupoutside=this.onUp.bind(this),this.guideButton.mousemove=this.guideButton.touchmove=this.onMove.bind(this),this.panelHeight=this.container.viewHeight,this.scrollHeight=this.container.scrollHeight-this.panelHeight,this.scrollableDistance=this.panelHeight-this.topMargin-this.bottomMargin-this.guideButton.height,this.scrollBarRatio=this.scrollHeight/this.scrollableDistance,s.instance.add(this.update,this)},PixiScrollBar.prototype.onDown=function(t){alert(2),this.dragging=!0,this.yTouchOffset=t.data.getLocalPosition(this.guideButton).y,this.onMove(t)},PixiScrollBar.prototype.onUp=function(){alert(2434),this.dragging=!1,this.yTouchOffset=0},PixiScrollBar.prototype.onMove=function(t){this.dragging===!0&&(this.targetPosition=t.data.getLocalPosition(this.container),this.targetPosition.y<this.topMargin+.5*this.guideButton.height&&(this.targetPosition.y=this.topMargin+.5*this.guideButton.height),this.targetPosition.y>this.scrollableDistance+this.topMargin+.5*this.guideButton.height&&(this.targetPosition.y=this.scrollableDistance+this.topMargin+.5*this.guideButton.height))},PixiScrollBar.prototype.update=function(){if(this.dragging){var t=-((this.guideButton.position.y-this.topMargin-.5*this.guideButton.height)*this.scrollBarRatio);this.trackpad.easeToPosition(0,t),this.guideButton.position.y=this.targetPosition.y}else this.guideButton.position.y=-1*this.trackpad.valueY/this.scrollBarRatio+this.topMargin+.5*this.guideButton.height},i.exports=PixiScrollBar}),define("fido/ui/PixiTrackpad",["require","exports","module","../physics/DoubleSpring","./PixiScrollbar","fido/system/Device","signals"],function(t,e,i){var s=t("../physics/DoubleSpring"),o=t("./PixiScrollbar"),r=t("fido/system/Device"),n=t("signals");PixiTrackpad=function(t){this.spring=new s,this.onScrollUpdate=new n;var e=t.scrollbarClass||o;this.target=t.target,this.value=0,this.easingValue=0,this.dragOffset=0,this.dragging=!1,this.speed=0,this.size=1024,this.maxSlots=1,this.capMovement=!0,this.prevPosition=0,this.valueY=0,this.easingValueY=0,this.dragOffsetY=0,this.speedY=0,this.prevPositionY=0,this.didMove=!1,this.didMoveY=!1,this.target.interactive=!0,this.scrollMin=-(1/0),this.scrollMax=0,this.scrollMinY=-(1/0),this.scrollMaxY=0,this.snapTo=!1,t.scrollbar===!0&&r.instance.mobile===!1&&r.instance.iPad===!1&&(this.scrollBar=new e({target:t.scrollTarget,trackpad:this})),this._onDownBinded=this.onDown.bind(this),this._onUpBinded=this.onUp.bind(this),this._onMoveBinded=this.onMove.bind(this),this.target.on("touchstart",this._onDownBinded).on("mousedown",this._onDownBinded)},PixiTrackpad.constructor=PixiTrackpad,PixiTrackpad.prototype.unlock=function(){this.locked=!1,this.speed=0,this.easingValue=this.value,this.easingValueY=this.valueY,this.speedY=0,this.speedX=0,window.onmousewheel=this.onMouseWheel.bind(this)},PixiTrackpad.prototype.lock=function(){this.locked=!0,window.onmousewheel=null},PixiTrackpad.prototype.update=function(){if(this.value+=.3*(this.easingValue-this.value),this.valueY+=.3*(this.easingValueY-this.valueY),!this.locked)if(this.dragging){var t=this.easingValue-this.prevPosition;t*=.7,this.speed+=.5*(t-this.speed),this.prevPosition=this.easingValue;var e=this.easingValueY-this.prevPositionY;e*=.7,this.speedY+=.5*(e-this.speedY),this.prevPositionY=this.easingValueY}else this.snapTo?(this.spring.update(),this.easingValue=this.spring.x,this.easingValueY=this.spring.y,this.capMovement&&(this.easingValue>this.scrollMax?this.easingValue+=.3*(this.scrollMax-this.easingValue):this.easingValue<this.scrollMin&&(this.easingValue+=.3*(this.scrollMin-this.easingValue)),this.easingValueY>this.scrollMaxY?this.easingValueY+=.3*(this.scrollMaxY-this.easingValueY):this.easingValueY<this.scrollMinY&&(this.easingValueY+=.3*(this.scrollMinY-this.easingValueY)))):(this.speed*=.95,this.easingValue+=this.speed,this.speedY*=.95,this.easingValueY+=this.speedY,this.capMovement&&(this.easingValue>this.scrollMax?this.easingValue+=.3*(this.scrollMax-this.easingValue):this.easingValue<this.scrollMin&&(this.easingValue+=.3*(this.scrollMin-this.easingValue)),this.easingValueY>this.scrollMaxY?this.easingValueY+=.3*(this.scrollMaxY-this.easingValueY):this.easingValueY<this.scrollMinY&&(this.easingValueY+=.3*(this.scrollMinY-this.easingValueY))))},PixiTrackpad.prototype.stop=function(){this.speed=0,this.speedY=0,this.value=this.prevPosition=this.easingValue,this.valueY=this.prevPositionY=this.easingValueY},PixiTrackpad.prototype.setPosition=function(t,e){this.value=this.easingValue=t,this.valueY=this.easingValueY=e},PixiTrackpad.prototype.easeToPosition=function(t,e){this.easingValue=t,this.easingValueY=e},PixiTrackpad.prototype.onDown=function(t){this.locked||(this.speed=0,this.speedY=0,this.stop(),this.didMove=!1,this.didMoveY=!1,this.checkX=t.data.global.x,this.checkY=t.data.global.y,this.dragging=!0,this.dragOffset=t.data.global.x-this.value,this.dragOffsetY=t.data.global.y-this.valueY,this.target.on("touchend",this._onUpBinded).on("touchendoutside",this._onUpBinded).on("mouseup",this._onUpBinded).on("mouseupoutside",this._onUpBinded).on("touchmove",this._onMoveBinded).on("mousemove",this._onMoveBinded))},PixiTrackpad.prototype.onMouseWheel=function(t){this.target.interactive&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.locked||(this.speed=.15*t.wheelDeltaX,this.speedY=.15*t.wheelDeltaY))},PixiTrackpad.prototype.onUp=function(){if(!this.locked){if(this.dragging=!1,this.snapTo){if(this.didMove){this.spring.dx=this.speed;var t;t=this.speed<0?Math.floor(this.easingValue/this.size):Math.ceil(this.easingValue/this.size),this.capMovement&&(t>0?t=0:t<-this.maxSlots&&(t=-this.maxSlots)),this.spring.tx=t*this.size,this.spring.dy=this.speedY,t=this.speedY<0?Math.floor(this.easingValueY/this.size):Math.ceil(this.easingValueY/this.size),this.capMovement&&(t>0?t=0:t<-this.maxSlots&&(t=-this.maxSlots)),this.spring.ty=t*this.size}this.spring.x=this.easingValue,this.spring.y=this.easingValueY}this.cap(),this.target.off("touchend",this._onUpBinded).off("touchendoutside",this._onUpBinded).off("mouseup",this._onUpBinded).off("mouseupoutside",this._onUpBinded).off("touchmove",this._onMoveBinded).off("mousemove",this._onMoveBinded)}},PixiTrackpad.prototype.cap=function(){this.capMovement&&(this.snapTo&&(this.spring.tx>this.scrollMax?this.spring.tx=this.scrollMax:this.spring.tx<this.scrollMin&&(this.spring.tx=this.scrollMin)),this.snapTo&&(this.spring.ty>this.scrollMaxY?this.spring.ty=this.scrollMaxY:this.spring.ty<this.scrollMinY&&(this.spring.ty=this.scrollMinY)))},PixiTrackpad.prototype.setSlot=function(t,e){this.spring.tx=t*-this.size,e&&(this.value=this.easingValue=this.spring.x=this.spring.tx),this.cap()},PixiTrackpad.prototype.setSlotY=function(t){this.spring.ty=t*-this.size,this.cap()},PixiTrackpad.prototype.nextSlot=function(){this.spring.tx-=this.size,this.spring.tx<-(this.maxSlots*this.size)&&(this.spring.tx=-(this.maxSlots*this.size)),this.cap()},PixiTrackpad.prototype.nextSlotY=function(){this.spring.ty-=this.size,this.spring.ty<-(this.maxSlots*this.size)&&(this.spring.ty=-(this.maxSlots*this.size)),this.cap()},PixiTrackpad.prototype.previousSlot=function(){this.spring.tx+=this.size,this.cap()},PixiTrackpad.prototype.previousSlotY=function(){this.spring.ty+=this.size,this.cap()},PixiTrackpad.prototype.setSize=function(t){this.size=t,this.scrollbar&&this.scrollBar.setSize(t)},PixiTrackpad.prototype.setSlots=function(t){this.maxSlots=t-1},PixiTrackpad.prototype.onMove=function(t){if(!this.locked){var e;e=Math.abs(this.checkX-t.data.global.x),e>10&&(this.didMove=!0),e=Math.abs(this.checkY-t.data.global.y),e>10&&(this.didMove=!0),this.easingValue=t.data.global.x-this.dragOffset,this.easingValueY=t.data.global.y-this.dragOffsetY,this.capMovement&&(this.easingValue>this.scrollMax?this.easingValue=this.scrollMax+.3*(this.easingValue-this.scrollMax):this.easingValue<this.scrollMin&&(this.easingValue=this.scrollMin+.3*(this.easingValue-this.scrollMin)),this.easingValueY>this.scrollMaxY?this.easingValueY=this.scrollMaxY+.3*(this.easingValueY-this.scrollMaxY):this.easingValueY<this.scrollMinY&&(this.easingValueY=this.scrollMinY+.3*(this.easingValueY-this.scrollMinY)))}},i.exports=PixiTrackpad}),define("com/rebels/app/system/GameSaveManager",["require","exports","module","fido/system/LocalStorage","signals","fido/loader/Cache"],function(t,e,i){var s=t("fido/system/LocalStorage"),o=t("signals"),r=t("fido/loader/Cache"),n=function(){this.onLoaded=new o,this.localStorage=new s("com.disney.rebels.game_20"),this.save=null,this.state=-1,
this.allComplete=!1};n.prototype.loadGame=function(){this.loadGameFromLocalStorage()},n.prototype.loadGameFromLocalStorage=function(){var t=this.localStorage.getObject("save");t||(t=new a,this.localStorage.storeObject("save",t)),this.save=t,t.allComplete===!0&&(this.allComplete=!0),this.onLoaded.dispatch()},n.prototype.saveLevelDetails=function(t,e,i){if(!(t>this.save.worlds.length-1||e>this.save.worlds[t].levels.length-1)){var s=this.save.worlds[t].levels[e];0===s.time&&(s.time=i.time),s.time>i.time&&(s.time=i.time),s.totalPickups=i.totalPickups,s.numPickups=i.numPickups,s.score<i.score&&(s.score=i.score),s.starRating<i.starRating&&(s.starRating=i.starRating),this.saveToStorage()}},n.prototype.completeLevel=function(t,e){t>this.save.worlds.length-1||e>this.save.worlds[t].levels.length-1||this.save.worlds[t].levels[e].complete!==!0&&(this.save.worlds[t].levels[e].complete=!0,this.saveToStorage())},n.prototype.getNextLevel=function(t,e){var i=this.save.worlds[t];if(!i)return!1;var s=e+1;if(!(s<=i.levels.length-1)){if(t+1<=this.save.worlds.length-1&&this.save.worlds[t+1].levels[0]){var o=Object.create(this.save.worlds[t+1].levels[0]);return o.index=0,o.worldIndex=t+1,o}return!1}if(i.levels[s]){var o=Object.create(i.levels[s]);return o.index=s,o.worldIndex=t,o}},n.prototype.getNextLevelState=function(t,e){var i=this.save.worlds[t];if(!i)return this.allComplete=!0,this.save.allComplete=!0,void this.saveToStorage();var s=e+1;return s<=i.levels.length-1?i.levels[s].unlocked===!0?n.LevelStates.Already_Unlocked:n.LevelStates.Unlocked:t+1<=this.save.worlds.length-1&&this.save.worlds[t+1].levels[0].unlocked===!0?n.LevelStates.Already_Unlocked:n.LevelStates.World_Complete},n.prototype.unlockNextLevel=function(t,e){var i=this.save.worlds[t],s=e+1;return s<=i.levels.length-1?i.levels[s].unlocked===!0?(this.state=n.LevelStates.Already_Unlocked,null):(i.levels[s].unlocked=!0,this.state=n.LevelStates.Unlocked,this.saveToStorage(),s):(this.state=n.LevelStates.World_Complete,null)},n.prototype.saveName=function(t){this.save.name=t,this.saveToStorage()},n.prototype.unlockWorld=function(t){if(t>this.save.worlds.length-1)return null;var e=this.save.worlds[t];return e.unlocked=!0,e.levels[0].unlocked=!0,this.saveToStorage(),e},n.prototype.setAlertPanelState=function(t,e){var i=this.save.alertPanels[t];i.state=e,this.saveToStorage()},n.prototype.resetState=function(){this.state=-1},n.prototype.saveToStorage=function(){this.localStorage.storeObject("save",this.save)};var a=function(){this.name="",this.levelStates={},this.worlds=[],this.alertPanels={},this.allComplete=!1,this.createFromJson()};a.prototype.constructor=a,a.prototype.createFromJson=function(){var t=r.getJson("levels");this.worlds=t.worlds;var e=0;for(var i in t.worlds){var s=t.worlds[i];this.levelStates[s.id]=t.worlds[i].unlocked===!0?1:0;for(var o=0;o<s.levels.length;o++)s.levels[o].num=e,e++}var n=r.getJson("alertPanels");for(var i in n){var a=n[i];this.alertPanels[i]=a;for(var o=0;o<a.length;o++)this.alertPanels[i]=a[o]}},n.LevelStates={Locked:0,Unlocked:1,Already_Unlocked:2},n.instance=new n,i.exports=n}),define("com/rebels/game/GameConfig",["require","exports","module","com/rebels/app/system/GameSaveManager","com/rebels/game/LevelManager"],function(t,e,i){function s(){this.levelIndex=0,this.levelId="",this.worldIndex=0,this.globalLevelNumber="",this.levels={force:0,jump:0,bomb:1},this.deathType=null}var o=(t("com/rebels/app/system/GameSaveManager"),t("com/rebels/game/LevelManager"));s.prototype.nextStep=function(){this.levelIndex=o.currentLevelIndex,this.levelId=o.currentLevel.id,this.worldIndex=o.currentWorldIndex},s.instance=new s,i.exports=s.instance}),define("com/rebels/game/LevelManager",["require","exports","module","com/rebels/app/system/GameSaveManager","signals","com/rebels/game/GameConfig"],function(t,e,i){var s=t("com/rebels/app/system/GameSaveManager"),o=t("signals"),r=(t("com/rebels/game/GameConfig"),function(){this.stageComplete=!1,this.levelComplete=!1,this.allComplete=!1,this.currentWorld={},this.currentWorldIndex=0,this.currentLevel={},this.currentLevelIndex=0,this.stageCompleted=0,this.onWorldFinished=new o});r.prototype.init=function(t,e){this.currentWorldIndex=t,this.GameConfig=e},r.prototype.restart=function(){this.levelComplete=!1,this.worldComplete=!1,this.levelUnlocked=!1,this.currentLevelIndex=this.GameConfig.levelIndex},r.prototype.onLevelComplete=function(){var t=s.instance;this.levelComplete=!0;var e=this.GameConfig.levelIndex;t.completeLevel(this.GameConfig.worldIndex,e);var i=t.getNextLevelState(this.GameConfig.worldIndex,e);if(i===s.LevelStates.Unlocked){var o=t.unlockNextLevel(this.GameConfig.worldIndex,e);o&&(this.currentLevelIndex=o,this.currentLevel=s.instance.save.worlds[this.currentWorldIndex].levels[o],this.levelUnlocked=!0)}else if(i===s.LevelStates.Already_Unlocked){var o=s.instance.getNextLevel(this.GameConfig.worldIndex,this.GameConfig.levelIndex);this.currentLevelIndex=o.index,this.currentLevel=o,this.currentWorldIndex=o.worldIndex}else i===s.LevelStates.World_Complete&&this.onWorldComplete()},r.prototype.getNextLevel=function(){var t=s.instance.getNextLevelState(this.currentWorldIndex,this.currentLevelIndex);return t===s.LevelStates.World_Complete?!1:void 0},r.prototype.onAllComplete=function(){this.allComplete=!0},r.prototype.onWorldComplete=function(){this.onWorldFinished.dispatch(this.currentWorldIndex),this.currentWorldIndex++;var t=s.instance.unlockWorld(this.currentWorldIndex);t?(this.GameConfig.levelId=t.levels[0].id,this.GameConfig.levelIndex=0,this.currentLevel=t.levels[0],this.currentLevelIndex=0,this.levelUnlocked=!0,s.instance.resetState()):s.instance.allComplete=!0},i.exports=new r}),define("fido/utils/Math2",["require","exports","module"],function(t,e,i){var s={};s.TWO_PI=2*Math.PI,s.random=function(t,e){return t=t||0,e=void 0===e?1:e,t+Math.random()*(e-t)},s.randomInt=function(t,e){return t+Math.random()*(e-t)|0},s.randomSeed=function(t,e,i){min=t,max=e,i=i||1,i=(9301*i+49297)%233280;var s=i/233280;return min+s*(max-min)},s.randomChance=function(t,e){return s.randomSeed(0,1,e)>t},s.cap=function(t,e,i){return e>t?e:t>i?i:t},s.sign=function(t){return 0>t?-1:t>0?1:0},s.randomChoice=function(t,e){return Math.random()<.5?t:e},s.map=function(t,e,i,s,o){return(o-s)*((t-e)/(i-e))+s},s.smallestAngle=function(t,e){t%=2*Math.PI,0>t&&(t+=2*Math.PI);var i=e-t,s=e+2*Math.PI-t,o=e-2*Math.PI-t,r=Math.abs(i),n=Math.abs(s),a=Math.abs(o),h=i;return r>n&&a>n?h=s:r>a&&n>a&&(h=o),h},s.wrap=function(t,e,i){var s=i-e;return t-=e,t%=s,0>t&&(t+=s),t+=e},i.exports=s}),define("com/rebels/app/screens/Map/MapNode",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","com/rebels/app/system/GameSaveManager","starwars/buttons/GoldenButton","fido/utils/Utils"],function(t,e,i){var s=t("PIXI"),o=t("fido/ui/buttons/AbstractButton"),r=t("com/rebels/app/system/GameSaveManager"),n=t("starwars/buttons/GoldenButton"),a=(t("fido/utils/Utils"),["star_02_on.png","star_02_on.png","star_02_on.png"]),h=function(){o.call(this),this.worldIndex=0,this.levelindex=0,this.id="",this.data={},this.playButton=new n("icon_play.png"),this.playButton.setSize("medium"),this.addChild(this.playButton);var t={font:"42px "+window.SECONDARY_FONT,fill:"#acdef7",dropShadow:!0,dropShadowColor:"rgba(0,150,255,0.5)",dropShadowDistance:3,dropShadowAngle:Math.PI/2,stroke:"#0072ff",strokeThickness:3,align:"center"};this.number=new s.Text("hey there",t),this.number.anchor.set(.5),this.number.y=-120,this.addChild(this.number),this.time=new s.Text("--:--:--",{font:"24px "+window.SECONDARY_FONT,fill:"#acdef7",dropShadow:!0,dropShadowColor:"rgba(50,70,160,0.5)",dropShadowDistance:2,dropShadowAngle:Math.PI/2,stroke:"#0072ff",strokeThickness:1,align:"center"}),this.time.anchor.set(.5),this.time.y=195,this.addChild(this.time),this.stars=[];this._starScale=.5,this.padlock=new s.Sprite.fromFrame("padlock2.png"),this.padlock.anchor.set(.5),this.padlock.y=-5,this.padlock.alpha=.8,this.addChild(this.padlock);for(var e=0;3>e;e++){var i=new s.Sprite.fromFrame("star_off.png");i.anchor.set(.5),i.scale.set(this._starScale),i.x=-65+65*e,i.y=130,i.y+=1===e?0:-30,this.addChild(i),this.stars.push(i)}this.playButton.onHover.add(this.grow,this),this.playButton.onOut.add(this.shrink,this)};h.prototype=Object.create(o.prototype),h.prototype.updateData=function(t){var e=r.instance.save,i=window.translations.STR_LEVELS_BEST_SCORE,o=e.worlds[this.worldIndex].levels[this.levelIndex];o.unlocked||window.cheat?this.unlock():this.lock(),this.number.text=this.globalLevelNumber+1,o.score>0?this.time.text=i+"\n"+o.score:this.time.text=i+"\n0";for(var n=0;n<o.starRating;n++)this.stars[n].texture=s.Texture.fromFrame(a[n])},h.prototype.unlock=function(){this.interactive=!0,this.playButton.cacheAsBitmap=!1,this.playButton.icon.visible=!0,this.playButton.enable(),this.playButton.cacheAsBitmap=!0,this.padlock.visible=!1;for(var t=0;t<this.stars.length;t++)this.stars[t].visible=!0;this.time.visible=!0},h.prototype.lock=function(){this.interactive=!1,this.playButton.cacheAsBitmap=!1,this.playButton.icon.visible=!1,this.playButton.cacheAsBitmap=!0,this.playButton.disable(),this.padlock.visible=!0;for(var t=0;t<this.stars.length;t++)this.stars[t].visible=!1;this.time.visible=!1},h.prototype.grow=function(){TweenLite.to(this.time.scale,.4,{x:1.1,y:1.1,ease:Expo.easeOut,overwrite:!0}),TweenLite.to(this.number.scale,.4,{x:1.1,y:1.1,ease:Circ.easeOut,overwrite:!0}),this.time.alpha=.4,TweenLite.to(this.time,.6,{alpha:1,delay:.1,ease:Elastic.easeOut.config(1,.3)})},h.prototype.shrink=function(){TweenLite.to(this.time.scale,.4,{x:1,y:1,overwrite:!0}),TweenLite.to(this.time,.6,{alpha:1,overwrite:!0,ease:Elastic.easeOut.config(1,.3)}),TweenLite.to(this.number.scale,.4,{x:1,y:1,ease:Circ.easeOut,overwrite:!0})},i.exports=h}),define("com/rebels/app/screens/Map/MapLink",["require","exports","module","PIXI"],function(t,e,i){var s=t("PIXI"),o=function(t){var t=s.Texture.fromFrame("world_select_line.png");s.Sprite.call(this,t),this.anchor.y=.5,this.blendMode=s.isWebGL?s.BLEND_MODES.ADD:0,this.node1=null,this.node2=null};o.prototype=Object.create(s.Sprite.prototype),o.prototype.updateCulling=function(){this.node1.visible||this.node2.visible?this.visible=!0:this.visible=!1},i.exports=o}),define("com/rebels/app/screens/Map/MapBackground",["require","exports","module","PIXI","com/rebels/app/system/GameSaveManager"],function(t,e,i){var s=t("PIXI"),o=t("com/rebels/app/system/GameSaveManager"),r=function(t){s.Graphics.call(this),this.worldIndex=t,this.viewWidth=0;var e=o.instance.save,i=e.worlds[t];this.name=window.translations[i.name],this.masked=null};r.prototype=Object.create(s.Graphics.prototype),r.prototype.resize=function(t,e){this.clear(),this.lineStyle(2,0,1).beginFill(8421504*Math.random()-8421504),this.drawRect(0,0,t,e).endFill(),this.viewWidth=t},i.exports=r}),define("com/rebels/game/scripts/BustedScriptTitle",["require","exports","module","PIXI"],function(t,e,i){var s=t("PIXI"),o=function(t){s.Container.call(this),this.title=null,window.FONTS_EXTENDED?(this.title=new s.Text(t.toUpperCase(),{font:"70px "+window.MAIN_FONT,fill:"#fed95c",stroke:"#fddd54",strokeThickness:1,align:"center"}),this.title.anchor.x=this.title.anchor.y=.5,this.blurredTitle=new s.Text(t.toUpperCase(),{font:"70px "+window.MAIN_FONT,fill:"#ffbc29",align:"center"}),this.blurredTitle.anchor.x=this.blurredTitle.anchor.y=.5,this.blurredTitle.alpha=.8,this.blurredTitle.position=this.title.position,this.addChild(this.title),this.addChild(this.blurredTitle),s.isWebGL&&(this.blurFilter=new s.filters.BlurFilter,this.blurFilter.passes=5,this.blurFilter.blur=40)):(this.title=new s.extras.BitmapText(t,{font:"71px Star Jedi"}),this.title.pivot.y=60,this.title.position.x=-this.title.width/2,this.addChild(this.title))};o.prototype=Object.create(s.Container.prototype),o.prototype.onHide=function(){window.flipLanguage&&(this.blurredTitle.filters=null)},Object.defineProperties(o.prototype,{text:{get:function(){return this.title.text},set:function(t){this.title.text=t,window.flipLanguage?(this.blurredTitle.text=this.title.text,this.blurredTitle.filters=s.isWebGL?[this.blurFilter]:null):this.title.position.x=-this.title.width/2}}}),i.exports=o}),define("com/rebels/app/screens/Map/Map",["require","exports","module","PIXI","fido/utils/Math2","./MapNode","./MapLink","./MapBackground","signals","com/rebels/game/scripts/BustedScriptTitle"],function(t,e,i){var s=t("PIXI"),o=t("fido/utils/Math2"),r=t("./MapNode"),n=t("./MapLink"),a=t("./MapBackground"),h=t("signals"),l=(t("com/rebels/game/scripts/BustedScriptTitle"),[ASSET_URL+"img/game/background_lothal_training.jpg",ASSET_URL+"img/game/background_lothal_night.jpg",ASSET_URL+"img/game/background_garel.jpg",ASSET_URL+"img/game/background_imperial.jpg"]),c=(ASSET_URL+"img/game/ui_bgs/background_locked.jpg",function(){s.Container.call(this),this.bounds=new s.Rectangle(-60,0,1200,640),this.nodes=[],this.backgrounds=[];for(var t=0;t<l.length;t++){var e=l[t],i=new s.Sprite.fromImage(e);i.width=1336,i.height=640,this.addChild(i),this.backgrounds.push(i)}this.masks=new s.Container,this.addChild(this.masks),this.nodeContainer=new s.Container,this.nodeContainer.y=230,this.addChild(this.nodeContainer),this.links=new s.Container,this.onButtonPressed=new h;var o={font:"32px "+window.SECONDARY_FONT,fill:"#acdef7",dropShadow:!0,dropShadowColor:"rgba(0,150,255,0.5)",dropShadowDistance:3,dropShadowAngle:Math.PI/2,stroke:"#0072ff",strokeThickness:3,align:"center"};({font:"44px "+window.SECONDARY_FONT,fill:"#acdef7",dropShadow:!0,dropShadowColor:"rgba(0,150,255,0.5)",dropShadowDistance:3,dropShadowAngle:Math.PI/2,stroke:"#0072ff",strokeThickness:3,align:"center"});this.locked=!0;this.copy=new s.Text("hey there",o),this.copy.anchor.x=.5,this.copy.x=568,this.copy.y=80,this.addChild(this.copy),this.breakpoints=[],this.currentBreakpoint=0,this.titleCache=null,this.maxWidth=1e3});c.prototype=Object.create(s.Container.prototype),c.prototype.init=function(t){var e=0,i=115,n=360;this.nodeContainer.addChild(this.links),this.breakpoints.push(0);for(var h=0;h<t.length;h++){for(var l=t[h],c=0,u=0;u<l.levels.length;u++){var d=l.levels[u],p=new r;p.id=d.id,p.worldIndex=h,p.levelIndex=u,p.globalLevelNumber=e,p.x=i+n*e,p.y=90+o.randomInt(-30,30),p.onPress.add(this.bridgeSignal,this),this.nodes.push(p),this.nodeContainer.addChild(p),0===u&&(c=p.x),e++}var f=p.x+n/2,m=new s.Sprite.fromFrame("world_divider.png");m.anchor.x=.5,m.x=f,m.height=640,this.breakpoints.push(m.x);var g=new a(h);h===t.length-1?g.resize(c+.5*n,this.bounds.height):g.resize(f-c+.5*n,this.bounds.height),g.x=c-.5*n,this.masks.addChild(g),this.backgrounds[h].mask=g,g.masked=this.backgrounds[h],this.maxWidth=m.x+50,h!==t.length-1&&(this.nodeContainer.addChild(m),m.y=-m.parent.y)}this.createLinks()},c.prototype.createLinks=function(){for(var t=0;t<this.nodes.length-1;t++){var e=this.nodes[t],i=this.nodes[(t+1)%this.nodes.length],s=i.x-e.x,o=i.y-e.y,r=new n;r.width=Math.sqrt(s*s+o*o),r.scale.y=1,r.x=e.x,r.y=e.y,r.node1=e,r.node2=i,r.rotation=Math.atan2(o,s),this.links.addChild(r)}},c.prototype.bridgeSignal=function(t){this.currentBreakpoint=this.breakpoints[t.worldIndex],this.onButtonPressed.dispatch(t)},c.prototype.updateNodes=function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].updateData(t)},c.prototype.nodeCulling=function(){for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.x+this.nodeContainer.x>this.bounds.width?e.visible=!1:e.x+this.nodeContainer.x<this.bounds.x?e.visible=!1:e.visible=!0}},c.prototype.backgroundCulling=function(){for(var t=null,e=null,i=0;i<this.masks.children.length;i++){var s=this.masks.children[i];this.backgrounds[i].x=(s.x+this.masks.x)/s.viewWidth*300,s.x+this.masks.x>this.bounds.width?(s.visible=!1,s.masked.visible=!1):s.x+s.viewWidth+this.masks.x<this.bounds.x?(s.visible=!1,s.masked.visible=!1):(s.visible=!0,s.masked.visible=!0,t=s.name.replace("\n"," "))}this.setTitle(t,e)},c.prototype.setTitle=function(t,e){this.titleCache!==t&&(this.titleCache=t,TweenLite.to(this.copy,.2,{alpha:0,onComplete:function(){this.copy.text=t,TweenLite.to(this.copy,.2,{alpha:1})}.bind(this)}))},c.prototype.move=function(t){if(!(this.nodeContainer.x+.1*(t-this.nodeContainer.x)>=20||this.nodeContainer.x+.1*(t-this.nodeContainer.x)<=-this.maxWidth+1140)){this.nodeContainer.x+=.1*(t-this.nodeContainer.x),this.masks.x+=.1*(t-this.masks.x),this.nodeCulling(),this.backgroundCulling();for(var e=0;e<this.links.children.length;e++)this.links.children[e].updateCulling()}},i.exports=c}),define("text!starwars/shaders/glitch.glsl",[],function(){return"precision highp float;\n\n#define PI 3.141592653589793\n#define PI2 6.283185307179586\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\n\nuniform float time;\nuniform float seed;\nuniform float verticalLinesIntensity;\nuniform float horizontalLinesIntensity;\nuniform float flashIntensity;\nuniform float noiseIntensity;\nuniform float glitchOffset;\nuniform float glitchIntensity;\n\nvec3 rgb2hsv(vec3 c){\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n        vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n        vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n        float d = q.x - min(q.w, q.y);\n        float e = 1.0e-10;\n        return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c){\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat rand(float n){return fract(sin(n) * 43758.5453123);}\n\nvec4 horizontalGlitch() {\n  vec4 color = vec4(0.);\n  vec2 uv = vTextureCoord;\n  float offset = (rand(uv.y + time) - .5) * (glitchOffset / dimensions.x);\n  uv.x += offset * glitchIntensity;\n  // @damien help !!\n  //uv.x = min(max(0.0,uv.x),1.0);\n  color = texture2D(uSampler, uv);\n  return color;\n}\n\nvec3 toStarWarsBlue(vec3 hsvColor) {\n  hsvColor.x = .59;\n  hsvColor.y = hsvColor.y * .7 + .15;\n  return hsvColor;\n}\n\nvoid main(void)\n{\n  vec4 color = horizontalGlitch();\n\n  float offsetedTime = time + seed;\n\n  vec2 fragCoord = vTextureCoord * dimensions.xy;\n  fragCoord.y *= -1.;\n\n  vec3 hsvColor = rgb2hsv(color.rgb);\n\n  // hsvColor = toStarWarsBlue(hsvColor);\n\n  // noise\n  float noise = rand(1. + fragCoord.y + fragCoord.x * offsetedTime);\n  hsvColor.z += noise * .2 * noiseIntensity;\n\n  // vertical lines\n  hsvColor.z += .2 * step(mod(fragCoord.x, 3.), 1.) * verticalLinesIntensity;\n\n  // horizontal lines\n  float offset = rand(fragCoord.y * fragCoord.x + fragCoord.x * offsetedTime) * 10.;\n  float ratio = step(rand(50. + fragCoord.y + fragCoord.x * offsetedTime), .2);\n  float timeShift = cos(offsetedTime) * 200.;\n  hsvColor.z += .4 * step(mod(fragCoord.y + offset + offsetedTime * 400. + timeShift, 200.), 10.) * ratio * horizontalLinesIntensity;\n\n  // horizontal rectangles\n  float offset3 = rand(ceil(fragCoord.y * 0.01));\n  hsvColor.z += .15 * step(mod(fragCoord.y + offsetedTime * 15000., 2000. + 10000. * offset3), 400. + 800. * offset3) * flashIntensity;\n\n  color.rgb = hsv2rgb(hsvColor);\n  color.rgb *= color.a;\n\n	gl_FragColor = color;\n\n\n}\n"}),define("starwars/filters/GlitchFilter",["require","exports","module","PIXI","fido/system/Ticker","text!../shaders/glitch.glsl"],function(t,e,i){var s=t("PIXI"),o=t("fido/system/Ticker"),r=t("text!../shaders/glitch.glsl"),n=function(){s.AbstractFilter.call(this,null,r,{time:{type:"f",value:0},dimensions:{type:"4fv",value:[0,0,0,0]},seed:{type:"f",value:100*Math.random()},glitchOffset:{type:"f",value:4},glitchIntensity:{type:"f",value:0},noiseIntensity:{type:"f",value:1},verticalLinesIntensity:{type:"f",value:1},horizontalLinesIntensity:{type:"f",value:1},flashIntensity:{type:"f",value:1}}),this.start()};n.prototype=Object.create(s.AbstractFilter.prototype),n.prototype.constructor=n,n.prototype.start=function(){function t(){var t=this.timeline.timeScale();t=t>1?.5+Math.random():4+4*Math.random(),this.timeline.timeScale(t)}this.timeline=new TimelineMax({repeat:-1,onRepeat:t,onRepeatScope:this}),t.call(this),this.timeline.to(this.uniforms.glitchIntensity,.4,{value:1,delay:4,ease:Power3.easeInOut}),this.timeline.to(this.uniforms.glitchIntensity,.4,{value:0,ease:Power3.easeInOut}),o.instance.add(this.update,this)},n.prototype.stop=function(){this.timeline.kill(),o.instance.remove(this.update,this)},n.prototype.update=function(t){this.uniforms.time.value+=t/100},i.exports=n}),define("starwars/buttons/ScrollButton",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","../filters/GlitchFilter"],function(t,e,i){var s=t("PIXI"),o=t("fido/ui/buttons/AbstractButton"),r=(t("../filters/GlitchFilter"),function(){o.call(this),this.background=new s.Sprite.fromFrame("arcade_scroll_left_tab.png"),this.background.anchor.set(0,.5),this.addChild(this.background),this.icon=new s.Sprite.fromFrame("arcade_scroll_left_arrow.png"),this.icon.anchor.set(.5),this.icon.x=30,this.addChild(this.icon)});r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.show=function(t){t=t||.4,this.enable(),this.visible=!0,TweenLite.to(this,.4,{alpha:1}),TweenLite.to(this.background,t,{x:0,alpha:1}),TweenLite.to(this.icon,t,{x:30,alpha:1})},r.prototype.hide=function(t){t=t||.4,this.disable(),TweenLite.to(this.background,t,{x:-this.background.width,alpha:0,onComplete:function(){this.visible=!1},onCompleteScope:this}),TweenLite.to(this.icon,t,{x:-this.background.width,alpha:0})},r.prototype.hover=function(){TweenLite.to(this.background.scale,.2,{x:1.1,y:1.1,ease:Back.easeOut}),TweenLite.to(this.icon.scale,.2,{x:1.1,y:1.1,ease:Back.easeOut}),TweenLite.to(this.icon,.2,{x:25,ease:Back.easeOut})},r.prototype.out=function(){TweenLite.to(this.background.scale,.2,{x:1,y:1}),TweenLite.to(this.icon,.2,{x:30})},i.exports=r}),define("fido/effects/Sparkles",["require","exports","module","PIXI","fido/system/Ticker","fido/utils/Math2"],function(t,e,i){var s=t("PIXI"),o=t("fido/system/Ticker"),r=t("fido/utils/Math2"),n=function(t,e,i){s.Container.call(this),this.total=i||5,this.sparkles=[],this.sparkleDimension=e||new s.Circle(0,0,50);for(var o=0;o<this.total;o++){var n;n=0===t.length?new s.Sprite:s.Sprite.fromFrame(t[Math.floor(Math.random()*t.length)]||"sparkle.png"),n.anchor.set(.5),n.life=0,s.isWebGL&&(n.blendMode=s.BLEND_MODES.ADD),n.life=o/this.total*100,n.initialScale=.6+r.random(-.4,.4),this.addChild(n)}this.x=this.sparkleDimension.x,this.y=this.sparkleDimension.y,this.sparkleDimension.type===s.SHAPES.CIRC&&(this.innerRadius=.7*this.sparkleDimension.radius,this.outerRadius=this.sparkleDimension.radius,this.range=this.outerRadius-this.innerRadius)};n.prototype=Object.create(s.Container.prototype),n.prototype.constructor=n,n.prototype.updateTransform=function(){if(this.visible){for(var t=this.children,e=t.length-1;e>=0;e--){var i=t[e];i.life-=3*o.instance.deltaTime,i.rotation+=.1*o.instance.deltaTime,i.scale.set(i.initialScale*Math.sin(i.life/100*Math.PI)),i.life<0&&(i.life=100,this.sparkleDimension.type===s.SHAPES.CIRC?(i.x=this.innerRadius*r.randomChoice(-1,1)+r.random(0,this.range),i.y=this.innerRadius*r.randomChoice(-1,1)+r.random(0,this.range)):this.sparkleDimension.type===s.SHAPES.RECT&&(i.x=r.random(0,this.sparkleDimension.width),i.y=r.random(0,this.sparkleDimension.height)))}s.Container.prototype.updateTransform.call(this)}},i.exports=n}),define("fido/shop/ItemGroup",["require","exports","module"],function(t,e,i){var s=function(t,e){"undefined"==typeof e&&(e=[]),"undefined"==typeof t&&(t=""),this._items=e,this.name=t};s.prototype={addItems:function(t){for(var e=0;e<t.length;e++)this.addItem(t[e])},addItem:function(t){this._items.push(t)},hasItem:function(t){var e=this._items.indexOf(t);return-1!==e?!0:void 0},getItem:function(t){return this.hasItem(t)?t:void 0},getNumItems:function(){return this._items.length},getItemAt:function(t){return 0>t||t>this._items.length-1?null:this._items[t]},getBoughtItems:function(){for(var t=[],e=0;e<this._items.length;e++)this._items[e].purchased&&t.push(this._items[e]);return t},unlockNext:function(t){var e=this._items.indexOf(t);e+1<this._items.length&&this._items[e+1].unlock()},lockItem:function(t){targetItem=this.getItem(t),targetItem.lock()},unlockItem:function(t){targetItem=this.getItem(t),targetItem.unlock()}},i.exports=s}),define("com/rebels/app/shop/ItemButton",["require","exports","module","PIXI","signals","fido/physics/Spring"],function(t,e,i){var s=t("PIXI"),o=t("signals"),r=(t("fido/physics/Spring"),function(t){s.Container.call(this),this.item=t,this.onPress=new o,this.onDown=new o,this.onUp=new o,this.onHover=new o,this.onMouseOut=new o,this.interactive=!0,this.buttonMode=!0,this.mousedown=this.touchstart=this.onDown.dispatch.bind(this,this),this.mouseup=this.touchend=this.onUp.dispatch.bind(this,this),this.mouseover=this.onHover.dispatch.bind(this,this),this.click=this.tap=this.onPress.dispatch.bind(this,this),this.touchendoutside=this.mouseupoutside=this.mouseout=this.onMouseOut.dispatch.bind(this,this),this.description=null,this.image=null,this.currentScale=new s.Point,this.isLocked=!1,this.purchased=!1,this.activeBackgroundTexture=s.Texture.fromFrame(t.textureInactive||"shop_upgrade_node_add.png"),this.inactiveBackgroundTexture=s.Texture.fromFrame(t.textureInactive||"shop_upgrade_node_off.png"),this.lockedBackgroundTexture=s.Texture.fromFrame(t.textureInactive||"shop_upgrade_node_off.png"),this.boughtBackgroundTexture=s.Texture.fromFrame(t.textureActive||"shop_upgrade_node_on.png"),this.init()});r.prototype=Object.create(s.Container.prototype),r.prototype.constructor=r,r.prototype.init=function(){this.button=new s.Sprite(this.activeBackgroundTexture),this.button.anchor.set(.5),this.addChild(this.button),this.currentScale.set(1)},r.prototype.bought=function(){this.button.texture=this.boughtBackgroundTexture,this.purchased=!0,this.deselect(),this.purchased=!0},r.prototype.lock=function(){this.button.texture=this.lockedBackgroundTexture,this.setInteractive(!1),this.isLocked=!0},r.prototype.unlock=function(){this.button.texture=this.activeBackgroundTexture,this.isLocked=!1,this.setInteractive(!0)},r.prototype.select=function(){this.purchased?this.button.texture=this.boughtBackgroundTexture:this.button.texture=this.activeBackgroundTexture,this.selected=!0},r.prototype.deselect=function(){this.purchased?this.button.texture=this.boughtBackgroundTexture:this.button.texture=this.inactiveBackgroundTexture,this.selected=!1},r.prototype.setInteractive=function(t){t?(this.interactive=!0,this.buttonMode=!0):(this.interactive=!1,this.buttonMode=!1)},r.prototype.updateTransform=function(){s.Container.prototype.updateTransform.call(this)},i.exports=r}),define("com/rebels/app/shop/Item",["require","exports","module","PIXI","com/rebels/app/shop/ItemButton"],function(t,e,i){var s=t("PIXI"),o=t("com/rebels/app/shop/ItemButton"),r=function(t){var e={currentLevel:1,price:100,thumbnail:new s.Text("IMAGE",{font:"6px Arial"}),image:new s.Text("IMAGE",{font:"10px Arial"}),name:"Magic box",textureActive:"",textureInactive:"",type:"",purchased:!1,active:!0,name:"Magic box",description:"Description of the super-magical awesome expensive thing"};if(t){for(var i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);this.options=t}else this.options=e;this.thumbnail=this.options.thumbnail,this.description=this.options.description,this.imageUrl=this.options.imageUrl,this.name=this.options.name,this.id=this.options.id,this.type=this.options.type,this.purchased=this.options.purchased,this.active=this.options.active,this.locked=!1,this.price=100,this.textureActive=this.options.textureActive,this.textureInactive=this.options.textureInactive,this.init()};r.prototype.constructor=r,r.prototype.init=function(){this.price=this.options.price,this.view=new o(this)},r.prototype.bought=function(){this.purchased=!0,this.view.bought()},r.prototype.lock=function(){this.locked=!0,this.view.lock()},r.prototype.unlock=function(){this.locked=!1,this.view.unlock()},i.exports=r}),define("com/rebels/app/shop/ShopSystem",["require","exports","module","signals","fido/system/LocalStorage","fido/shop/ItemGroup","com/rebels/app/shop/Item","fido/loader/Cache"],function(t,e,i){var s=t("signals"),o=t("fido/system/LocalStorage"),r=t("fido/shop/ItemGroup"),n=t("com/rebels/app/shop/Item"),a=(t("fido/loader/Cache"),function(t){this.translate=!0;var e={startAmount:window.cheat?5e5:0};if(t){for(var i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);this.options=t}else this.options=e;this._wallet=this.options.startAmount,this._items=[],this._groups=[],this.onChange=new s,this.onChange.add(this.saveToStorage,this),this.localStorage=new o(window.cheat?"com.starwars.rebelrerererecheatrere":"com.starwars.rebelrererererere"),this.onLoaded=new s,this.loadSaveData()});a.prototype={buyItem:function(t){if(-1!=this._items.indexOf(t)){if(this.canBuyItem(t)){this.spendMoney(t.price),t.bought();var e=this.findParentGroup(t);return e&&e.unlockNext(t),this.onChange.dispatch(),!0}return!1}return!1},toggleItemState:function(t,e){return-1!=this._items.indexOf(t)?(t.active=e,this.onChange.dispatch(),!1):!1},canBuyAnyItem:function(){for(var t=0;t<this._items.length;t++)if(this.canBuyItem(this._items[t]))return!0;return!1},canBuyItem:function(t){return t.purchased?!1:this._wallet>=t.price?!0:!1},spendMoney:function(t){this._wallet-=t,this.onChange.dispatch()},earnMoney:function(t){this._wallet+=t,this.onChange.dispatch()},_setMoney:function(t){this._wallet=t,this.onChange.dispatch()},getMoney:function(){return this._wallet},findParentGroup:function(t){for(var e=0;e<this._groups.length;e++)if(this._groups[e].hasItem(t))return this._groups[e];return!1},createGroup:function(t,e){var i=new r(t,e);return this._groups.push(i),i},getNumGroups:function(){return this._groups.length},getGroupAt:function(t){return 0>t||t>this._groups.length-1?null:this._groups[t]},addItems:function(t){for(var e=0;e<t.length;e++)this.addItem(t[e])},addItem:function(t){this._items.push(t)},getNumItems:function(){return this._items.length},getAtId:function(t){for(var e=0,i=this._items.length;i>e;e++)if(this._items[e].id===t)return this._items[e]},loadFromJson:function(t){for(var e=Object.keys(t.groups),i=e.length,s=0;i>s;s++)for(var o=this.createGroup(e[s]),r=0,a=0;a<t.groups[e[s]].length;a++){var h=t.groups[e[s]][a],l={id:h.id,currentLevel:1,price:h.price,thumbnail:h.thumbnail,imageUrl:h.imageUrl,description:this.translate?translations[h.description]:h.description,type:h.type,textureActive:h.textureActive,textureInactive:h.textureInactive,name:h.name,purchased:h.purchased,active:h.active},c=new n(l);c.group=o,this.addItem(c),o.addItem(c),l.purchased&&(c.bought(),r++),a>r&&!l.purchased&&o.lockItem(c)}},updateFromSave:function(){if(this.hasStoredData()){for(var t=this.loadSaveData(),e=0;e<t.items.length;e++){var i=t.items[e],s=this.getAtId(i.id);s&&(i.locked?s.lock():s.unlock(),i.purchased&&s.bought(),i.active?s.active=!0:s.active=!1)}t.amount&&t.amount!==this.getMoney()?this._setMoney(t.amount):this.onChange.dispatch()}},createSaveData:function(){for(var t={items:[],amount:this.getMoney()},e=0;e<this._items.length;e++){var i=this._items[e],s={id:i.id,purchased:i.purchased,active:i.active,locked:i.locked};t.items.push(s)}return t},loadSaveData:function(){var t=this.localStorage.getObject("saveData");return t?(this.onLoaded.dispatch(),t):null},hasStoredData:function(){return null!==this.loadSaveData()?!0:!1},saveToStorage:function(){var t=this.createSaveData();this.localStorage.storeObject("saveData",t)},removeStorage:function(){this.localStorage.remove("saveData")},parse:function(t,e){if("function"==typeof t){var i=t.call(e,this._items,this._groups,this);return i}}},i.exports=a}),function(t){function e(){this._callbacks=[]}function i(t){function i(t){return function(){r+=1,o[t]=Array.prototype.slice.call(arguments),r===n&&s.done(o)}}var s=new e,o=[];if(!t||!t.length)return s.done(o),
s;for(var r=0,n=t.length,a=0;n>a;a++)t[a].then(i(a));return s}function s(t,i){var o=new e;return 0===t.length?o.done.apply(o,i):t[0].apply(null,i).then(function(){t.splice(0,1),s(t,arguments).then(function(){o.done.apply(o,arguments)})}),o}function o(t){var e="";if("string"==typeof t)e=t;else{var i=encodeURIComponent;for(var s in t)t.hasOwnProperty(s)&&(e+="&"+i(s)+"="+i(t[s]))}return e}function r(){var t;if(window.XMLHttpRequest)t=new XMLHttpRequest;else if(window.ActiveXObject)try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}return t}function n(t,i,s,n){function a(){l.abort(),u.done(h.ETIMEOUT,"",l)}var l,c,u=new e;s=s||{},n=n||{};try{l=r()}catch(d){return u.done(h.ENOXHR,""),u}"GET"===t&&s?(c=o(s),i+="?"+c,c=null):"POST"===t&&s&&(c=JSON.stringify(s)),l.open(t,i),s!=c&&"GET"===t&&l.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var p in n)n.hasOwnProperty(p)&&l.setRequestHeader(p,n[p]);var f=h.ajaxTimeout;if(f)var m=setTimeout(a,f);return l.onreadystatechange=function(){if(f&&clearTimeout(m),4===l.readyState){var t=!l.status||(l.status<200||l.status>=300)&&304!==l.status;u.done(t,l.responseText,l)}},l.send(c),u}function a(t){return function(e,i,s){return n(t,e,i,s)}}e.prototype.then=function(t,i){var s;return this._isdone?s=t.apply(i,this.result):(s=new e,this._callbacks.push(function(){var e=t.apply(i,arguments);e&&"function"==typeof e.then&&e.then(s.done,s)})),s},e.prototype.done=function(){this.result=arguments,this._isdone=!0;for(var t=0;t<this._callbacks.length;t++)this._callbacks[t].apply(null,arguments);this._callbacks=[]};var h={Promise:e,join:i,chain:s,ajax:n,get:a("GET"),post:a("POST"),put:a("PUT"),del:a("DELETE"),ENOXHR:1,ETIMEOUT:2,ajaxTimeout:0};"function"==typeof define&&define.amd?define("libs/disney/tracking_new/promise",[],function(){return h}):t.promise=h}(this),function(){function t(){document.cookie="testcookie";var t=-1!==document.cookie.indexOf("testcookie")?!0:!1,e=navigator.cookieEnabled?!0:!1;return t&&e}var e=this,i=i||{};i.tempCookie={};var s=t();i.setCookie=function(t,e,o){if(s){var r=new Date;r.setDate(r.getDate()+o);var n=escape(e)+(null==o?"":"; expires="+r.toUTCString());document.cookie=t+"="+n}else i.tempCookie[t]=e},i.getCookie=function(t){if(s){var e=document.cookie,o=e.indexOf(" "+t+"=");if(-1===o&&(o=e.indexOf(t+"=")),-1===o)e=null;else{o=e.indexOf("=",o)+1;var r=e.indexOf(";",o);-1===r&&(r=e.length),e=unescape(e.substring(o,r))}return e}return i.tempCookie[t]},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports.COOKIE_HELPER=i):"undefined"!=typeof define&&define.amd?define("libs/disney/tracking_new/CookieHelper",i):e.COOKIE_HELPER=i}.call(this),define("tracker",["require","exports","module","libs/disney/tracking_new/promise","libs/disney/tracking_new/CookieHelper","fido/system/Device"],function(t,e,i){var s=t("libs/disney/tracking_new/promise"),o=t("libs/disney/tracking_new/CookieHelper"),r=t("fido/system/Device"),n=n||{};n.host="https://api.disney.com/datatech/serverlog/v1/json",n.headers={"Content-Type":"application/json",Authorization:"FD BB838628-FD2E-42E9-9833-155C2F416DE8:3286AB989D759BB4DAC3392D994071A454F45F1A16DD942F"},n.app="starwarsarcade_bd_bd",n.user_id=null,n.app_locale="en_GB",n.tag=null,n.transaction_id=null,n.browser_id=null,n.network="bd",n.view_network="bd",n.newUser=!1,n.init=function(t){n.browser_id=n.getBrowserId(),n.user_id=n.browser_id,n.transaction_id=n.getSessionId(),n.app_locale=t,n.keepSessionAlive()},n.keepSessionAlive=function(){n.intervalREG&&clearTimeout(n.intervalREG),n.intervalREG=setTimeout(n.refreshSession,18e5)},n.refreshSession=function(){n.transaction_id=n.getNewId(),o.setCookie("trsid",n.transaction_id),n.keepSessionAlive()},n.trackClickedLink=function(){var t=n.getDefaultParams();t.tag="clicked_link",t.method="clicked_link",t.is_new_user=n.newUser?1:0,t.tracking_code="NULL",t.track_url="NULL",t.referrer_url="NULL",n.sendRequest(n.host,t,n.headers)},n.trackDeviceInfo=function(){var t=n.getDefaultParams();t.tag="device_info",t.method="device_info",t.machine="NULL",t.model=r.instance.isMobile?"phone":r.instance.desktop?"desktop":"tablet",t.os_version=r.instance.desktop?"other":r.instance.safari?"safari":r.instance.android?"android":"other",t.m_token="NULL",t.device_id="NULL",t.ios_vendor_id="NULL",t.ios_advertising_id="NULL",t.google_advertising_id="NULL",n.sendRequest(n.host,t,n.headers)},n.trackGameAction=function(t,e,i,s){n.keepSessionAlive();var o=n.getDefaultParams();o.tag="game_action",o.method="game_action",o.context=t,o.action=e,o.type=i,o.message=s,o.level="0",n.sendRequest(n.host,o,n.headers)},n.getDefaultParams=function(){var t={};return t.app=n.app,t.user_id=n.user_id,t.browser_id=n.browser_id,t.app_locale=n.app_locale,t.transaction_id=n.transaction_id,t.network=n.network,t.view_network=n.view_network,t},n.sendRequest=function(t,e,i){s.post(t,e,i).then(function(t,e,i){})},n.getBrowserId=function(){var t,e=o.getCookie("brwid");return e&&e.length>30?t=e:(n.newUser=!0,t=n.getNewId(),o.setCookie("brwid",t)),t},n.getSessionId=function(){var t=n.getNewId();return o.setCookie("trsid",t),t},n.getNewId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"===t?e:3&e|8;return i.toString(16)})};var a={trackAction:function(t,e){r.instance.local||n.trackGameAction("rebels_tt_game",t||"","NULL",e)},init:function(){r.instance.local||(n.init(),n.trackClickedLink(),n.trackDeviceInfo())},trackClick:function(){}};i.exports=a}),define("fido/sound/MusicManager",["require","exports","module","signals","fido/sound/SoundBridge","fido/system/Device"],function(t,e,i){var s=t("signals"),o=t("fido/sound/SoundBridge"),r=t("fido/system/Device"),n=function(t){this.disabled=o.music.disabled,this.music=o.music,this.currentSound=null,this.newSound=null,this.onFade=new s,this.globalVolume=1,this.volume=2,this.fadeInDuration=1,this.fadeOutDuration=1,this.music.onMuteToggle.add(this.onMusicToggle,this)};n.prototype.init=function(t){this.volume=t.volume||1,this.fadeInDuration=t.fadeInDuration||3.2,this.fadeOutDuration=t.fadeOutDuration||3.5},n.prototype.add=function(t,e){o.music.addSound(t,e,{loop:!0})},n.prototype.play=function(t){if(r.instance.ie){if(t===this.currentId)return;this.currentId=t;var e=this.music.sounds[t];return this.currentSound&&this.currentSound.stop(),this.currentSound=e,void this.currentSound.play()}var e=this.music.sounds[t];!this.disabled&&e&&this.currentSound!==e&&(this.currentSound&&(this.currentSound.fadeOut?this.currentSound.fadeOut(0,this.fadeOutDuration):this.currentSound.play()),this.currentSound=e,this.currentSound.fadeIn?this.currentSound.fadeIn(this.volume,this.fadeInDuration):this.currentSound.play())},n.prototype.onMusicToggle=function(t){this.disabled=t},n.prototype.setVolume=function(t,e){this.disabled||(t.realVolume=e,t.volume(e*this.globalVolume))},n.prototype.isPlaying=function(t){return this.disabled?void 0:!this.sounds[t]._audioNode[0].paused},i.exports=new n}),define("com/rebels/app/screens/MapScreen",["require","exports","module","PIXI","com/rebels/app/buttons/IconButton","starwars/buttons/GoldenButton","fido/system/Device","fido/ui/PixiTrackpad","com/rebels/app/system/GameSaveManager","fido/loader/Cache","com/rebels/game/LevelManager","com/rebels/game/GameConfig","./Map/Map","starwars/buttons/ScrollButton","fido/effects/Sparkles","com/rebels/app/shop/ShopSystem","fido/utils/FrameWait","tracker","fido/sound/MusicManager"],function(t,e,i){var s=t("PIXI"),o=(t("com/rebels/app/buttons/IconButton"),t("starwars/buttons/GoldenButton")),r=t("fido/system/Device"),n=t("fido/ui/PixiTrackpad"),a=t("com/rebels/app/system/GameSaveManager"),h=t("fido/loader/Cache"),l=t("com/rebels/game/LevelManager"),c=t("com/rebels/game/GameConfig"),u=t("./Map/Map"),d=t("starwars/buttons/ScrollButton"),p=t("fido/effects/Sparkles"),f=t("com/rebels/app/shop/ShopSystem"),m=(t("fido/utils/FrameWait"),function(t){this.app=t,s.Container.call(this),this.isMobile=r.instance.isMobile;var e={font:"42px "+window.SECONDARY_FONT,fill:"#acdef7",dropShadow:!0,dropShadowColor:"rgba(0,150,255,0.5)",dropShadowDistance:3,dropShadowAngle:Math.PI/2,stroke:"#0072ff",strokeThickness:3,align:"center"};this.title=new s.Text(translations.STR_SELECT_YOUR_LEVEL_MAP.toUpperCase(),e),this.title.anchor.x=.5,this.levelPanels=[],this.currentWorld=0;var i={target:this};this.trackpad=new n(i),this.hitArea=new s.Rectangle(0,100,1136,550),this.map=new u,this.map.onButtonPressed.add(this.onButtonPressed,this),this.addChild(this.map),this.addChild(this.title),this.leftArrow=new d,this.addChild(this.leftArrow),this.rightArrow=new d,this.rightArrow.rotation=Math.PI,this.addChild(this.rightArrow);var e={font:"24px "+window.SECONDARY_FONT,fill:"#acdef7",dropShadow:!0,dropShadowColor:"rgba(0,150,255,0.5)",dropShadowDistance:3,dropShadowAngle:Math.PI/2,stroke:"#0072ff",strokeThickness:3,align:"center"};this.cumulativeScore=new s.Text("",e),this.cumulativeScore.anchor.set(.5,1),this.cumulativeScore.x=568,this.addChild(this.cumulativeScore),this.shopButton=new o("icon_shop.png"),this.shopButton.setSize("small"),this.shopButton.x=190,this.shopButton.y=64,this.addChild(this.shopButton.view),this.shopButton.onPress.add(this.onButtonPressed,this),this.backButton=new o("icon_next.png"),this.backButton.scale.x*=-1,this.backButton.setSize("small"),this.backButton.x=80,this.backButton.y=64,this.addChild(this.backButton),this.backButton.onPress.add(this.onButtonPressed,this),this.once=!0,this.count=0,this.init(),this.sparkles=new p([],new s.Circle(0,0,50)),this.sparkles.position.x=this.shopButton.position.x,this.sparkles.position.y=this.shopButton.position.y,this.addChild(this.sparkles),this.locked=!0});m.prototype=Object.create(s.Container.prototype),m.prototype.init=function(){this.createStages()},m.prototype.onButtonPressed=function(e){e===this.backButton&&this.screenManager.gotoScreenByID("title"),e===this.shopButton&&(this.app.overlayManager.shopScreen.backToNormalScreen=!0,this.app.overlayManager.show("shop")),this.trackpad.didMove||e.id&&(c.levelIndex=e.levelIndex,c.worldIndex=e.worldIndex,c.levelId=e.id,c.levelData=e.data,c.globalLevelNumber=e.number.text,l.currentWorldIndex=e.worldIndex,l.restart(),t("tracker").trackAction("level_select_"+e.levelIndex),this.screenManager.gotoScreenByID("prep"))},m.prototype.scrollLeft=function(){this.scrollTo("+=600")},m.prototype.scrollRight=function(){this.scrollTo("-=600")},m.prototype.scrollTo=function(t){TweenLite.to(this.trackpad,.4,{value:t,easingValue:t,onStart:function(){this.trackpad.lock()},onStartScope:this,onComplete:function(){this.trackpad.unlock()},onCompleteScope:this})},m.prototype.createStages=function(){var t=h.getJson("levels");this.worldData=t.worlds,this.map.init(t.worlds),this.trackpad.scrollMax=0,this.trackpad.scrollMin=-(this.map.maxWidth-1024),this.trackpad.spring.damp=.7,this.trackpad.maxSlots=this.worldData.length-1,this.trackpad.capMovement=!0,this.trackpad.maxSpeed=2},m.prototype.onShow=function(){t("fido/sound/MusicManager").play("menu"),this.app.topMenu.setMode("levels"),this.map.updateNodes(),this.leftArrow.onPress.add(this.scrollLeft,this),this.rightArrow.onPress.add(this.scrollRight,this),this.trackpad.setPosition(-this.map.currentBreakpoint,0);var e=a.instance.save,i=e.worlds.reduce(function(t,e){return e.levels.reduce(function(t,e){return t+e.score},t)},0);window.FLIP_LANGUAGE?this.cumulativeScore.text=i+" "+window.translations.STR_SELECT_YOUR_LEVEL_TOTAL_SCORE:this.cumulativeScore.text=window.translations.STR_SELECT_YOUR_LEVEL_TOTAL_SCORE+i,f.instance.canBuyAnyItem()?this.sparkles.visible=!0:this.sparkles.visible=!1},m.prototype.onShown=function(){},m.prototype.onHide=function(){this.leftArrow.onPress.remove(this.scrollLeft,this),this.rightArrow.onPress.remove(this.scrollRight,this)},m.prototype.updateTransform=function(){this.trackpad.update(),this.trackpad.value>-100?this.leftArrow.interactive&&this.leftArrow.hide():this.leftArrow.interactive||this.leftArrow.show(),this.trackpad.value<this.trackpad.scrollMin+100?this.rightArrow.interactive&&this.rightArrow.hide():this.rightArrow.interactive||this.rightArrow.show(),this.map.move(this.trackpad.value),s.Container.prototype.updateTransform.call(this)},m.prototype.resize=function(t,e){this.title.position.set(t/2,30),this.leftArrow.y=.5*e,this.rightArrow.y=.5*e,this.rightArrow.x=t,this.cumulativeScore.y=e-15},i.exports=m}),define("com/rebels/app/screens/TitleScreen",["require","exports","module","PIXI","starwars/buttons/GoldenButton","fido/system/Device","fido/sound/MusicManager","fido/effects/Sparkles","fido/utils/FrameWait","tracker"],function(t,e,i){var s=t("PIXI"),o=t("starwars/buttons/GoldenButton"),r=t("fido/system/Device"),n=t("fido/sound/MusicManager"),a=(t("fido/effects/Sparkles"),t("fido/utils/FrameWait")),h=function(t){this.app=t,s.Container.call(this),this.isMobile=r.instance.isMobile,this.gameIsFinished=!1;this.bg=new s.Sprite.fromImage(ASSET_URL+"img/game/transition_bg.jpg"),this.addChild(this.bg),this.title=new s.Sprite.fromImage(ASSET_URL+"img/localised/team.png"),this.title.anchor.set(.5),this.addChild(this.title),this.tactics=new s.Sprite.fromImage(ASSET_URL+"img/localised/tactics.png"),this.tactics.anchor.set(.5),this.addChild(this.tactics),this.rebels=new s.Sprite.fromImage(ASSET_URL+"img/localised/rebels.png"),this.rebels.anchor.set(.5),this.addChild(this.rebels),this.playButton=new o("icon_play.png"),this.addChild(this.playButton.view),this.leaderboardButton=new o("icon_leaderboard.png"),this.leaderboardButton.setSize("small"),this.addChild(this.leaderboardButton.view),this.achievmentButton=new o("icon_medal.png"),this.achievmentButton.setSize("small"),this.addChild(this.achievmentButton.view),this.playButton.onPress.add(this.onButtonPressed,this),this.leaderboardButton.onPress.add(this.onButtonPressed,this),this.achievmentButton.onPress.add(this.onButtonPressed,this),r.instance.desktop||(this.backButton=new o("icon_prev.png"),this.backButton.setSize("small"),this.backButton.view.y=64,this.backButton.view.x=76,this.backButton.onPress.add(this.goBackToMainSite,this),this.addChild(this.backButton.view)),this.app.overlayManager.onHide.add(this.onFocus,this)};h.prototype=Object.create(s.Container.prototype),h.prototype.goBackToMainSite=function(){window.location.href="http://www.disney.co.uk"},h.prototype.onButtonPressed=function(e){e===this.playButton?(t("tracker").trackAction("game_play"),r.instance.android&&(document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullScreen?document.body.webkitRequestFullScreen():document.body.requestFullScreen&&document.body.requestFullScreen()),this.screenManager.gotoScreenByID("map")):e===this.leaderboardButton?this.app.overlayManager.show("scores"):e===this.achievmentButton&&this.app.overlayManager.show("achievements")},h.prototype.onShow=function(){n.play("rebelstheme"),this.title.scale.set(0),this.playButton.view.scale.set(0),this.leaderboardButton.view.scale.set(0),this.achievmentButton.view.scale.set(0),this.app.topMenu.setMode("title"),TweenLite.to(this.title.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.2}),TweenLite.to(this.playButton.view.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.3}),TweenLite.to(this.leaderboardButton.view.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.5}),TweenLite.to(this.achievmentButton.view.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.5})},h.prototype.onFocus=function(){},h.prototype.onShown=function(){this.gameIsFinished&&a.wait(function(){this.app.alertPanelManager.show("completeFirst20Levels")}.bind(this),20),a.wait(function(){window.tuesday&&this.app.alertPanelManager.show("tokenTuesday"),window.wednesday&&this.app.alertPanelManager.show("wookieWednesday")}.bind(this),20)},h.prototype.onHide=function(){this.gameIsFinished=!1},h.prototype.resize=function(t,e){var i=30;this.title.position.set(t/2-i,e-160),this.playButton.view.position.set(t/2+390-i,e-170),this.tactics.position.set(t/2+10-i,e-60),this.rebels.position.set(t/2+10-i,e-330),this.leaderboardButton.view.position.set(t/2-355-i,e-170+48),this.achievmentButton.view.position.set(t/2-355-i,e-170-48)},i.exports=h}),define("fido/utils/Timer",["require","exports","module","../system/Ticker","signals"],function(t,e,i){var s=t("../system/Ticker"),o=t("signals"),r=function(t,e){this.isOn=!1,this.count=0,this.ticker=e||s.instance,this.duration=60*t,this.onComplete=new o};r.prototype.setDuration=function(t){this.duration=60*t},r.prototype.getDuration=function(){return this.duration/60},r.prototype.start=function(){this.isOn||(this.ticker.add(this.update,this),this.isOn=!0),this.count=0},r.prototype.stop=function(){this.isOn=!1,this.ticker.remove(this.update,this)},r.prototype.getRatio=function(){return this.count/this.duration},r.prototype.update=function(){this.count+=this.ticker.deltaTime,this.count>this.duration&&(this.onComplete.dispatch(),this.stop())},i.exports=r}),define("fido/game/GameObjectPool",["require","exports","module"],function(t,e,i){var s=function(t){this.classType=t,this.pool=[]};s.constructor=s,s.prototype.prepopulate=function(t){for(var e=0;t>e;e++)this.pool.push(new this.classType)},s.prototype.get=s.prototype.getObject=function(){var t=this.pool.pop();return t||(t=new this.classType),t},s.prototype["return"]=s.prototype.returnObject=function(t){this.pool.push(t)},Object.defineProperties(s.prototype,{total:{get:function(){return this.pool.length}},length:{get:function(){return this.pool.length}}}),s.pools=[],s.idGenerator=1,s.getPool=function(t){return t._CLASS_ID||(t._CLASS_ID=s.idGenerator++,s.pools[t._CLASS_ID]=new s(t)),s.pools[t._CLASS_ID]},s.get=s.getObject=function(t){t._CLASS_ID||(t._CLASS_ID=s.idGenerator++,s.pools[t._CLASS_ID]=new s(t));var e=s.pools[t._CLASS_ID].getObject();return e._CLASS_ID=t._CLASS_ID,e},s.prototype["return"]=s.returnObject=function(t){s.pools[t._CLASS_ID].returnObject(t)},i.exports=s}),define("com/rebels/game/hud/DetailText",["require","exports","module","PIXI","fido/game/GameObjectPool","signals"],function(t,e,i){var s=t("PIXI"),o=(t("fido/game/GameObjectPool"),t("signals")),r=function(){s.Text.call(this,"YAY",{font:"26px chunkfiveroman",fill:"#eaff32",dropShadow:!0}),this.anchor.set(.5),this.count=0,this.multiplierColors=["#eaff32","#ffd300","#ff70df","#00ebff"],this.onFinish=new o};r.prototype=Object.create(s.Text.prototype),r.prototype.setup=function(t,e,i,s){this.x=t,this.y=e,this.speed=5,this.alpha=1,this.count=0,this.scale.x=this.scale.y=0,TweenLite.to(this.scale,.5,{x:1+.2*(s-1),y:1+.2*(s-1),ease:Elastic.easeOut}),this.style.fill=this.multiplierColors[(s-1)%4],this.text=i+(s>1?"x"+s:"")},r.prototype.updateTransform=function(){s.Text.prototype.updateTransform.call(this),this.speed*=.95,this.position.y-=this.speed,this.count++,this.count>20&&(this.alpha*=.95),this.alpha<.3&&this.onFinish.dispatch(this)},i.exports=r}),define("com/rebels/game/hud/TimerView",["require","exports","module","PIXI","fido/game/GameObjectPool","signals","fido/utils/Math2","fido/utils/Utils"],function(t,e,i){var s=t("PIXI"),o=(t("fido/game/GameObjectPool"),t("signals"),t("fido/utils/Math2"),t("fido/utils/Utils")),r=function(){s.Container.call(this),this.currentTime=new s.extras.BitmapText("30:00",{align:"left",font:"40px Naked Power"}),this.currentTime.pivot.y=25,this.currentTime.y=40;var t={font:"20px "+window.MAIN_FONT,fill:"white",dropShadow:!0,dropShadowDistance:1,dropShadowColor:"rgba(0,0,0,0.5)",dropShadowAngle:Math.PI/2};this.targetTime=new s.Text("30:00",t),this.targetTime.anchor.y=.5,this.targetTime.y=79,this.addChild(this.currentTime),this.addChild(this.targetTime),this.count=0,this.timeElapsed=0};r.prototype=Object.create(s.Container.prototype),r.prototype.setTargetTime=function(t){var e=window.translations.STR_HUD_TIMETARGET;this.targetTime.text=e+o.formatTimeSeconds(t)},r.prototype.update=function(t){this.currentTime.text=o.formatTimeSeconds(t),this.timeElapsed=t},i.exports=r}),define("com/rebels/game/hud/Message",["require","exports","module","PIXI"],function(t,e,i){var s=t("PIXI"),o=function(t){this.game=t,s.Container.call(this);var e={fill:"white",font:"80px "+window.MAIN_FONT,align:"center",dropShadow:!1};this.currentText="HIYA!",this.message=new s.Text("sommit",e),this.message.anchor.set(.5),this.addChild(this.message),this.message.alpha=0,this.count=0,this.message.hitArea=new s.Rectangle};o.prototype=Object.create(s.Container.prototype),o.prototype.show=function(t){t=t.toUpperCase(),this.currentText!==t&&(this.message.text=t,this.currentText=t,this.message.updateText()),TweenLite.killTweensOf(this.message.position),this.message.visible=!0,this.message.alpha=0,this.message.rotation=0,this.message.position.y=-100;var e=960/(this.message.width/this.message.scale.x);e>1&&(e=1),this.message.scale.set(e),TweenLite.to(this.message,.4,{alpha:1}),TweenLite.to(this.message.position,.4,{y:0}),TweenLite.to(this.message,.2,{alpha:0,delay:1.5}),TweenLite.to(this.message.position,.6,{y:100,delay:1.5,onComplete:function(){this.message.visible=!1}.bind(this)})},i.exports=o}),define("com/rebels/game/hud/CharacterSelect",["require","exports","module","PIXI","fido/system/Device","fido/utils/Utils"],function(t,e,i){var s=t("PIXI"),o=t("fido/system/Device"),r=t("fido/utils/Utils"),n=function(t){s.Container.call(this);var e={font:"26px "+window.MAIN_FONT,fill:"#ccffff",align:"center"};this.game=t;var i=(new s.Graphics).beginFill(16777215).drawCircle(0,0,40).generateTexture();this.button=new a({texture:i,id:1,"char":"ezra",tint:922738}),this.button.on("mousedown",this.onSwitch,this),this.button.on("touchstart",this.onSwitch,this),this.button.bubble=new s.Sprite.fromFrame("char_names_asset.png"),this.button.bubble.anchor.set(.5),this.button.bubble.position.y=120,this.button.addChild(this.button.bubble);var o=new s.Text(translations.STR_EZRA_NAME,e);r.fitText(o,100),o.anchor.set(.5,.32),this.button.bubble.addChild(o),this.addChild(this.button),this.button2=new a({texture:i,id:2,"char":"sabine",tint:877244}),this.button2.on("mousedown",this.onSwitch,this),this.button2.on("touchstart",this.onSwitch,this),this.button2.bubble=new s.Sprite.fromFrame("char_names_asset.png"),this.button2.bubble.anchor.set(.5),this.button2.bubble.position.y=120,this.button2.addChild(this.button2.bubble);var o=new s.Text(translations.STR_SABINE_NAME,e);r.fitText(o,100),o.anchor.set(.5,.32),this.button2.bubble.addChild(o),this.addChild(this.button2),this.button3=new a({texture:i,id:3,"char":"zeb",tint:16493665}),this.button3.on("mousedown",this.onSwitch,this),this.button3.on("touchstart",this.onSwitch,this),this.button3.bubble=new s.Sprite.fromFrame("char_names_asset.png"),this.button3.bubble.anchor.set(.5),this.button3.bubble.position.y=120,this.button3.addChild(this.button3.bubble);var o=new s.Text(translations.STR_ZEB_NAME,e);r.fitText(o,100),o.anchor.set(.5,.32),this.button3.bubble.addChild(o),this.addChild(this.button3),this.button.x=100,this.button.y=100,this.button2.x=270,this.button2.y=100,this.button3.x=440,this.button3.y=100,this.buttonArray=[this.button,this.button2,this.button3],this.buttonHash={ezra:this.button,sabine:this.button2,zeb:this.button3},this.game.onPlayerSwap.add(this.onPlayerSwap,this),this.currentButton=null,this.scale.set(.75)};n.prototype=Object.create(s.Container.prototype),n.prototype.showNames=function(){for(var t=0;t<this.buttonArray.length;t++)this.buttonArray[t].bubble.visible=!0},n.prototype.hideNames=function(){for(var t=0;t<this.buttonArray.length;t++)this.buttonArray[t].bubble.visible=!1},n.prototype.onPlayerSwap=function(t){this.currentButton&&(this.currentButton.alpha=1,this.currentButton.scale.set(1),this.currentButton.deselect()),this.currentButton=this.buttonHash[t._charId],this.buttonHash[t._charId].select(),this.align()},n.prototype.align=function(){for(var t=0,e=0;e<this.buttonArray.length;e++){var i=this.buttonArray[e],s=i.selected?170:127.5;t+=s/2,TweenLite.to(i.position,.3,{x:t,ease:Back.easeOut}),t+=s/2}},n.prototype.onSwitch=function(t){this.game["switch"](this.game.teamHash[t.target["char"]])},n.prototype.show=function(t){this.visible=!0},n.prototype.hide=function(t){this.visible=!1},n.prototype.reset=function(t){this.button.reset(),this.button2.reset(),this.button3.reset()},n.prototype.playerExit=function(t){this.buttonHash[t].showExit()},n.prototype.playerLeaveExit=function(t){this.buttonHash[t].hideExit()},i.exports=n;var a=function(t){if(s.Container.call(this),this.id=t.id,this["char"]=t["char"],this.charSpriteSelected=new s.Sprite.fromFrame("char_disc_"+t["char"]+".png"),this.charSpriteSelected.anchor.set(.5),this.addChild(this.charSpriteSelected),this.charSpriteDeselected=new s.Sprite.fromFrame("char_disc_"+t["char"]+"_deselect.png"),this.charSpriteDeselected.anchor.set(.5),this.addChild(this.charSpriteDeselected),s.isWebGL&&!o.instance.iOS){var e=new s.Graphics;e.beginFill(16777215).drawRect(0,0,this.charSpriteDeselected.width,this.charSpriteDeselected.height),e.pivot.x=this.charSpriteDeselected.width/2,e.pivot.y=this.charSpriteDeselected.height/2,this.charSpriteDeselected.addChild(e),this.charSpriteDeselected.mask=e}this.rim=new s.Sprite.fromFrame("ring_large.png"),this.rim.anchor.set(.5),this.addChild(this.rim),this.info=new s.Sprite.fromFrame("char"+this.id+"_marker_default.png"),this.info.anchor.set(.5),this.info.position.x=-50,this.info.position.y=50,this.interactive=!0,this.interactiveChildren=!1,this.hitArea=new s.Circle(0,0,90),this.highlight=new s.Sprite.fromFrame("char_active_marker_finish.png"),this.highlight.anchor.set(.5),this.highlight.y=50,this.highlight.x=-50,this.addChild(this.info),this.addChild(this.highlight),this.selected=!1};a.prototype=Object.create(s.Container.prototype),a.prototype.select=function(){this.cacheAsBitmap=!1,this.highlight.visible=!0,TweenLite.to(this.scale,.3,{x:1,y:1,ease:Back.easeOut}),s.isWebGL&&!o.instance.iOS?TweenLite.to(this.charSpriteDeselected.mask.position,.4,{x:200,ease:Sine.easeIn,onComplete:function(){this.cacheAsBitmap=!0}.bind(this)}):(this.charSpriteDeselected.alpha=0,this.cacheAsBitmap=!0),this.selected=!0},a.prototype.deselect=function(){this.highlight.visible=!1,this.cacheAsBitmap=!1,TweenLite.to(this.scale,.3,{x:.75,y:.75,ease:Back.easeOut}),s.isWebGL&&!o.instance.iOS?TweenLite.to(this.charSpriteDeselected.mask.position,.4,{x:0,ease:Sine.easeIn,onComplete:function(){this.cacheAsBitmap=!0}.bind(this)}):(this.charSpriteDeselected.alpha=1,this.cacheAsBitmap=!0),this.selected=!1},a.prototype.reset=function(){this.deselect(),this.info.texture=s.Texture.fromFrame("char"+this.id+"_marker_default.png"),this.highlight.texture=new s.Texture.fromFrame("char_active_marker_finish.png")},a.prototype.showExit=function(){this.cacheAsBitmap=!1,this.info.texture=s.Texture.fromFrame("char"+this.id+"_marker_finish.png"),this.highlight.texture=new s.Texture.fromFrame("char_active_marker_finish2.png"),this.cacheAsBitmap=!0},a.prototype.hideExit=function(){this.cacheAsBitmap=!1,this.info.texture=s.Texture.fromFrame("char"+this.id+"_marker_default.png"),this.highlight.texture=new s.Texture.fromFrame("char_active_marker_finish.png"),this.cacheAsBitmap=!0}}),define("com/rebels/game/hud/Hud",["require","exports","module","PIXI","signals","./DetailText","fido/game/GameObjectPool","fido/utils/Utils","./TimerView","./Message","./CharacterSelect"],function(t,e,i){var s=t("PIXI"),o=(t("signals"),t("./DetailText")),r=t("fido/game/GameObjectPool"),n=t("fido/utils/Utils"),a=t("./TimerView"),h=t("./Message"),l=t("./CharacterSelect"),c=function(t){this.game=t,s.Container.call(this);var e={fill:"white",font:"26px "+window.MAIN_FONT};this.coin=new s.Sprite.fromFrame("rebels_phoenix_coin.png"),this.coin.position.x=45,this.coin.position.y=40,this.coin.anchor.set(.5),this.coin.scale.set(.8),this.addChild(this.coin),this.score=new s.Text("SCORE : 0000",e),this.cells=new s.Text("3/5",e),this.cells.position.x=19,this.cells.position.y=79,this.cells.anchor.y=.5,this.addChild(this.cells),this.detailPool=new r(o),this.timerView=new a,this.timerView.x=95,this.addChild(this.timerView),this.characterSelect=new l(t),this.characterSelect.y=-11,this.addChild(this.characterSelect),this.message=new h,this.addChild(this.message),this.count=0};c.prototype=Object.create(s.Container.prototype),c.prototype.onPausePressed=function(){this.game.reset()},c.prototype.reset=function(){this.score.text="SCORE : "+this.game.score,this.timerView.setTargetTime(this.game.targetTime),this.characterSelect.reset()},c.prototype.updateLives=function(){this.lives.text="x "+this.game.lives},c.prototype.updateCellCount=function(t,e){this.cells.text=t+"/"+e},c.prototype.updateScore=function(t,e){var i=this.detailPool.getObject();this.score.text="SCORE : "+n.formatScore(this.game.score),i.setup(e.position.x,e.position.y-80,t,e.multiplyer),this.addChild(i),i.visible=!0,i.onFinish.addOnce(this.onDetailFinish,this)},c.prototype.onDetailFinish=function(t){t.visible=!1,this.detailPool.returnObject(t)},c.prototype.update=function(){this.count++,this.count>30&&(this.timerView.update(this.game.counter),this.count=0)},c.prototype.showGameover=function(){},c.prototype.bonusMode=function(){},c.prototype.normalMode=function(){},c.prototype.onGameoverComplete=function(){this.game.onGameover.dispatch()},c.prototype.resize=function(t,e){this.message.x=t/2,this.message.y=e/2,this.characterSelect.x=t-450},i.exports=c}),define("fido/game/crash/shapes/AABB",["require","exports","module"],function(t,e,i){var s=function(t,e){this.width=t,this.height=e,this.type=0,this.boundingBox=this};s.prototype.getView=function(){return(new PIXI.Graphics).beginFill(16711680).drawRect(-this.width/2,-this.height/2,this.width,this.height)},i.exports=s}),define("fido/game/crash/shapes/Circle",["require","exports","module","./AABB"],function(t,e,i){var s=t("./AABB"),o=function(t){this.radius=t,this.offset=0,this.type=1,this.boundingBox=new s(2*t,2*t)};o.prototype.getView=function(){return(new PIXI.Graphics).beginFill(16711680).drawCircle(0,0,this.radius)},i.exports=o}),define("fido/game/crash/shapes/Rectangle",["require","exports","module","./AABB"],function(t,e,i){var s=t("./AABB"),o=function(t,e,i){this.width=t,this.height=e,this.type=0,this.rotation=i;var o=Math.sqrt(t*t+e*e);this.boundingBox=new s(o,o)};o.prototype.getView=function(){var t=(new PIXI.Graphics).beginFill(16711680).drawRect(-this.width/2,-this.height/2,this.width,this.height);return t.rotation=this.rotation,t},i.exports=o}),define("fido/game/crash/Vector",["require","exports","module"],function(t,e,i){var s=function(t,e){this.x=t||0,this.y=e||0,this.id=s._UID++};s._UID=0,s.prototype.clone=function(){return new s(this.x,this.y)},s.prototype.plus=function(t){return this.x+=t.x,this.y+=t.y,this},s.prototype.minus=function(t){return this.x-=t.x,this.y-=t.y,this},s.prototype.invert=function(t){return this.x*=-1,this.y*=-1,this},s.prototype.multiply=s.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},s.prototype.divideScalar=function(t){if(0===t)this.x=0,this.y=0;else{var e=1/t;this.x*=e,this.y*=e}return this},s.prototype.dot=function(t){return this.x*t.x+this.y*t.y},s.prototype.length=function(t){return Math.sqrt(this.x*this.x+this.y*this.y)},s.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},s.prototype.normalize=function(){return this.divideScalar(this.length())},s.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSq(t))},s.prototype.distanceToSq=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},s.prototype.set=function(t,e){return this.x=t,this.y=e,this},s.prototype.setX=function(t){return this.x=t,this},s.prototype.setY=function(t){return this.y=t,this},s.prototype.setLength=function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},s.prototype.invert=function(t){return this.x*=-1,this.y*=-1,this},s.prototype.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},s.prototype.rad=function(){return Math.atan2(this.x,this.y);
},s.prototype.deg=function(){return 180*this.rad()/Math.PI},s.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},s.prototype.rotate=function(t){var e=this.x;return this.x=this.x*Math.cos(t)-this.y*Math.sin(t),this.y=e*Math.sin(t)+this.y*Math.cos(t),this},s.projectPoint=function(t,e){var i=new s(0,0),o=s.project(t.clone().minus(i),e);return o.clone().plus(i)},s.project=function(t,e){var i=new s(0,0),o=t.dot(e);return i.x=o/(e.x*e.x+e.y*e.y)*e.x,i.y=o/(e.x*e.x+e.y*e.y)*e.y,i},s.prototype.constructor=s,i.exports=s}),define("fido/game/crash/shapes/Line",["require","exports","module","../Vector","./AABB"],function(t,e,i){var s=t("../Vector"),o=t("./AABB"),r=function(t,e){var i=Math.sin(e),r=Math.cos(e),n=t/2;this.start=new s(-n*r,-n*i),this.end=new s(n*r,n*i);var a=Math.abs(this.start.x-this.end.x),h=Math.abs(this.start.y-this.end.y);this.boundingBox=new o(a,h),this.type=2};r.prototype.getView=function(t){return(new PIXI.Graphics).lineStyle(5,t||65280).moveTo(this.start.x,this.start.y).lineTo(this.end.x,this.end.y)},i.exports=r}),define("fido/game/crash/SpatialHash",["require","exports","module","signals"],function(t,e,i){var s=(t("signals"),function(t,e,i){this.hash=[],this.width=100,this.height=100,this.size=256,this.buildHash()});s.prototype.buildHash=function(){for(var t=this.width,e=this.height,i=t*e,s=0;i>s;s++)this.hash[s]=[]},s.prototype.add=function(t){var e,i,s=t.hitArea.boundingBox,o=(t.position.x+s.x)/this.size|0,r=(t.position.y+s.y)/this.size|0,n=(t.position.x+s.x+s.width)/this.size|0,a=(t.position.y+s.y+s.height)/this.size|0;for(i=r;a>=i;i++)for(e=o;n>=e;e++){var h=i*this.width+e;this.hash[h]&&this.hash[h].push(t)}},s.prototype.retrieve=function(t){var e,i,s=t.hitArea.boundingBox,o=(t.position.x+s.x)/this.size|0,r=(t.position.y+s.y)/this.size|0,n=(t.position.x+s.x+s.width)/this.size|0,a=(t.position.y+s.y+s.height)/this.size|0,h=[];for(i=r;a>=i;i++)for(e=o;n>=e;e++){var l=i*this.width+e;this.hash[l]&&(h=h.concat(this.hash[l]))}return this.removeDuplicates(h)},s.prototype.removeDuplicates=function(t){for(var e={},i=[],s=t.length,o=0,r=0;s>r;r++){var n=t[r];1!==e[n.UID]&&(e[n.UID]=1,i[o++]=n)}return i},s.prototype.remove=function(t){var e,i,s=t.hitArea.hitArea,o=(t.position.x+s.x)/this.size|0,r=(t.position.y+s.y)/this.size|0,n=(t.position.x+s.x+s.width)/this.size|0,a=(t.position.y+s.y+s.height)/this.size|0;for(i=r;a>=i;i++)for(e=o;n>=e;e++){var h=i*this.width+e,l=this.hash[h].indexOf(t);-1!==l&&this.hash[h].splice(l)}},s.prototype.clear=function(){this.buildHash()},i.exports=s}),define("fido/game/crash/CrashTests",["require","exports","module","./Vector"],function(t,e,i){var s=t("./Vector"),o=function(){this.temp=new s,this.collisions=[],this.pool=[]};o.prototype.AABBAABB=function(t,e){},o.prototype.circleAABB=function(t,e){var i=Math.sin(-e.hitArea.rotation),o=Math.cos(-e.hitArea.rotation),r=e.position.x,n=e.position.y,a=new s;a.x=o*(t.position.x-r)-i*(t.position.y-n)+r,a.y=i*(t.position.x-r)+o*(t.position.y-n)+n;var h=a.clone().minus(e.position),l=t.hitArea.radius,c=e.hitArea,u=c.width/2,d=c.height/2,p=h.clone();h.x<-u?p.x=-u:h.x>u&&(p.x=u),h.y<-d?p.y=-d:h.y>d&&(p.y=d);var f=p.x-h.x,m=p.y-h.y,g=f*f+m*m;if(0===g){p.x=c.left;var v=h.x-c.left,y=u-h.x,_=h.y- -d,x=d-h.y,g=999999;g>v&&(g=v),g>y&&(g=y),g>_&&(g=_),g>x&&(g=x),g==v?w=new s(-1,1e-5):g==y?w=new s(1,1e-5):g==_?w=new s(1e-5,-1):g==x&&(w=new s(1e-5,1));var b=-g-l;return penetrationLine2=new s,penetrationLine2.x=w.x*o+w.y*i,penetrationLine2.y=w.y*o-w.x*i,void this.collide(t,e,b,penetrationLine2)}if(l*l>g){var w=h.clone().minus(p),b=w.length()-l;if(0>b)return w.normalize(),penetrationLine2=new s,penetrationLine2.x=w.x*o+w.y*i,penetrationLine2.y=w.y*o-w.x*i,void this.collide(t,e,b,penetrationLine2)}this.endCollision(t,e)},o.prototype.circleLine=function(t,e){var i=e.hitArea.start,o=e.hitArea.end,r=t.hitArea.radius,n=o.clone().minus(i),a=new s(-n.y,n.x);a.normalize();var h=t.position.clone().minus(e.position),l=h.clone().minus(i),c=s.projectPoint(l,a),u=h.clone().minus(o),d=(s.projectPoint(u,a),l.dot(n)),p=u.dot(n),f=0;if(0>d){if(f=l.length()-r,0>f)return void l.normalize()}else if(p>0){if(f=u.length()-r,0>f)return void u.normalize()}else{f=c.length()-r;var m=a.clone(),g=(o.x-i.x)*(h.y-i.y)-(o.y-i.y)*(h.x-i.x);if(g=g>0?1:-1,m.x*=g,m.y*=g,0>f)return m.normalize(),void this.collide(t,e,f,m)}this.endCollision(t,e)},o.prototype.collide=function(t,e,i,s){var o=this.startCollision(t,e,i,s);o.ignore||t.collide(o)},o.prototype.circleLinexxxxx=function(t,e){var i=e.hitArea.start,o=e.hitArea.end,r=t.hitArea.radius,n=o.clone().minus(i),a=new s(-n.y,n.x);a.normalize();var h=t.position.clone().minus(e.position),l=h.clone().minus(i),c=s.projectPoint(l,a),u=h.clone().minus(o),d=(s.projectPoint(u,a),l.dot(n)),p=u.dot(n),f=0;if(d>0&&0>p){f=c.length()-r;var m=a.clone(),g=(o.x-i.x)*(h.y-i.y)-(o.y-i.y)*(h.x-i.x);g=g>0?1:-1,m.x*=g,m.y*=g,0>f?(m.normalize(),e.isColliding||(e.isColliding=!0,-1===g?e.canCollide=!0:e.canCollide=!1),e.canCollide&&t.collide(e,f,m)):e.isColliding&&(e.isColliding=!1)}else e.isColliding=!1},o.prototype.bounce=function(t,e){var i=new s(e.y,-e.x),o=s.projectPoint(t.velocity,i),r=s.projectPoint(t.velocity,e),n=new s(0,0);n.x=e.x*r.length(),n.y=e.y*r.length(),n.y<0&&(t.floor=!0),o.multiply(1),n.multiply(.1);velocity.length();o.normalize(),t.velocity.x=20*o.x,t.velocity.y=20*o.y,t.velocity.x=o.x+n.x,t.velocity.y=o.y+n.y},o.prototype.startCollision=function(t,e,i,s){var o=t.UID+":"+e.UID,r=this.collisions[o];return r?(r.penetration=i,r.projection=s,r):(r=this.pool.pop(),r?(r.object1=t,r.object2=e,r.penetration=i,r.projection=s,r.ignore=!1):r={object1:t,object2:e,ignore:!1,penetration:i,projection:s},this.collisions[o]=r,t.collideBegin(r),r)},o.prototype.endCollision=function(t,e){var i=t.UID+":"+e.UID,s=this.collisions[i];return s&&(t.collideEnd(s),this.pool.push(s),this.collisions[i]=null),s},i.exports=new o}),define("fido/game/crash/CrashGroup",["require","exports","module","signals","./SpatialHash","./CrashTests"],function(t,e,i){var s=(t("signals"),t("./SpatialHash")),o=t("./CrashTests"),r=function(){this.children=[],this.hash=new s(100,100)};r.prototype.add=function(t){this.children.push(t),this.hash.add(t)},r.prototype.remove=function(t){var e=this.children.indexOf(t);this.children.splice(e,1)},r.prototype.collide=function(t){for(var e=this.hash.retrieve(t),i=0;i<e.length;i++){var s=e[i];0===s.hitArea.type?o.circleAABB(t,e[i]):2===s.hitArea.type&&o.circleLine(t,e[i])}},i.exports=r}),define("fido/game/crash/Crash",["require","exports","module","./shapes/AABB","./shapes/Circle","./shapes/Rectangle","./shapes/Line","./Vector","./Vector","./CrashGroup","./CrashTests"],function(t,e,i){i.exports={AABB:t("./shapes/AABB"),Circle:t("./shapes/Circle"),Rectangle:t("./shapes/Rectangle"),Line:t("./shapes/Line"),Point:t("./Vector"),Vector:t("./Vector"),CrashGroup:t("./CrashGroup"),CrashTests:t("./CrashTests")}}),define("fido/game/WorldData",["require","exports","module","signals","./crash/Crash"],function(t,e,i){var s=(t("signals"),t("./crash/Crash")),o=function(){this.blocks=new s.CrashGroup};i.exports=o}),define("fido/game/GameObject",["require","exports","module","signals","fido/game/crash/Crash"],function(t,e,i){var s=(t("signals"),t("fido/game/crash/Crash")),o=function(t,e){var i=100;this.hitArea=t||new s.Rectangle(-i/2,-i/2,i,i),this.view=e||this.hitArea.getView(),this.view.rotation=0,this.position=new s.Point,this.oldPosition=new s.Point,this.velocity=new s.Point,this.rotation=0,this.world=null,this.type=0,this.UID=o._UID++};o.prototype.collide=function(t){},o.prototype.collideBegin=function(t){t.object2},o.prototype.collideEnd=function(t){},o.prototype.update=function(){this.view.x=this.position.x,this.view.y=this.position.y},o._UID=0,i.exports=o}),define("fido/game/PixiSpatialHash",["require","exports","module","signals"],function(t,e,i){function s(t,e){return t.index-e.index}var o=(t("signals"),function(t,e,i){this.hash=[],this.width=t||100,this.height=e||100,this.size=i||new PIXI.Point(256,256),this.halfHeight=this.height/2*this.size.y,this.buildHash(),this.IDGENERATOR=0});o.prototype.buildHash=function(){for(var t=this.width,e=this.height,i=t*e,s=0;i>s;s++)this.hash[s]=[]},o.prototype.add=function(t){var e=t.getBounds();t.UID=this.IDGENERATOR++;var i,s,o=(e.x+5e3)/this.size.x|0,r=(e.y+this.halfHeight)/this.size.y|0,n=(e.x+e.width+5e3)/this.size.x|0,a=(e.y+e.height+this.halfHeight)/this.size.y|0;for(s=r;a>=s;s++)for(i=o;n>=i;i++){var h=s*this.width+i;this.hash[h]&&this.hash[h].push(t)}},o.prototype.retrieveContainer=function(t,e){var i=e*this.width+t;return this.hash[i]},o.prototype.retrieve=function(t){var e,i,o=(t.x+5e3)/this.size.x|0,r=(t.y+this.halfHeight)/this.size.y|0,n=(t.x+t.width+5e3)/this.size.x|0,a=(t.y+t.height+this.halfHeight)/this.size.y|0,h=[];for(i=r;a>=i;i++)for(e=o;n>=e;e++){var l=i*this.width+e;this.hash[l]&&(h=h.concat(this.hash[l]))}var c=this.removeDuplicates(h);return c.sort(s),c},o.prototype.removeDuplicates=function(t){if(t.length<2)return t;for(var e={},i=[],s=t.length,o=0,r=0;s>r;r++){var n=t[r];1!==e[n.UID]&&(e[n.UID]=1,i[o++]=n)}return i},o.prototype.remove=function(t,e){var i,s,o=(t.position.x+e.x)/this.size.x|0,r=(t.position.y+e.y)/this.size.y|0,n=(t.position.x+e.x+e.width)/this.size.x|0,a=(t.position.y+e.y+e.height)/this.size.y|0;for(s=r;a>=s;s++)for(i=o;n>=i;i++){var h=s*this.width+i,l=this.hash[h].indexOf(t);-1!==l&&this.hash[h].splice(l)}},o.prototype.clear=function(){this.buildHash()},i.exports=o}),define("fido/game/WorldChunk",["require","exports","module","signals","./crash/Crash","fido/utils/Utils","./PixiSpatialHash"],function(t,e,i){var s=(t("signals"),t("./crash/Crash")),o=(t("fido/utils/Utils"),t("./PixiSpatialHash")),r=function(t,e,i,r){this.position=new s.Vector,this.bounds=null,this.segType=null,this.baseLine=0,this.levelHeight=0,this.dynamicObjects=r||[],this.staticObjects=t||new s.CrashGroup,this.staticImages=e||[],this.viewHash=i||new o,this.view=new PIXI.Container};r.prototype.init=function(){window.debug,this.generateDebugLayer(),this.bounds||this.calculateBounds()},r.prototype.update=function(t,e,i,s){this.dynamicObjects=s,this.staticObjects=t,this.staticImages=e,this.viewHash=i},r.prototype.clone=function(t){if(t){var e=t;e.update(this.staticObjects,this.staticImages,this.viewHash,this.dynamicObjects)}else{var e=new r(this.staticObjects,this.staticImages,this.viewHash,this.dynamicObjects);e.bounds=this.bounds,e.view=this.view,e.segType=this.segType}return e.init(),e},r.prototype.calculateBounds=function(){this.generateDebugLayer();var t=this.view;this.bounds=t.getLocalBounds().clone();var e=(new PIXI.Graphics).beginFill(255,.2).drawRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);this.view.addChild(e)},r.prototype.generateDebugLayer=function(t){this.view=new PIXI.Container;for(var e=0;e<this.staticObjects.children.length;e++){var i=this.staticObjects.children[e],s=i.hitArea.getView(16777215);s.alpha=.8,2===i.floorType&&(s.tint=255),s.position.x=i.position.x,s.position.y=i.position.y,this.view.addChild(s)}},r.prototype.containsRectangle=function(t){t.x-=this.position.x,t.y-=this.position.y;var e=!(this.bounds.x>t.x+t.width/2||this.bounds.width+this.bounds.x<t.x-t.width/2||this.bounds.y>t.y+t.height/2||this.bounds.height+this.bounds.y<t.y-t.height/2);return t.x+=this.position.x,t.y+=this.position.y,e},r.prototype.collideStaticObjects=function(t){var e=t.position;e.x-=this.position.x,e.y-=this.position.y;var i=t.hitArea.boundingBox,s=!(this.bounds.x>e.x+i.width/2||this.bounds.width+this.bounds.x<e.x-i.width/2||this.bounds.y>e.y+i.height/2||this.bounds.height+this.bounds.y<e.y-i.height/2);s&&this.staticObjects.collide(t),e.x+=this.position.x,e.y+=this.position.y},r.prototype.update=function(){},r.prototype.render=function(){},i.exports=r}),define("fido/game/WorldParser",["require","exports","module","signals","./WorldData","./GameObject","./WorldChunk","./crash/Crash","./PixiSpatialHash"],function(t,e,i){var s=(t("signals"),t("./WorldData"),t("./GameObject")),o=t("./WorldChunk"),r=t("./crash/Crash"),n=(t("./PixiSpatialHash"),function(){});n.prototype.parse=function(t){for(var e=[],i=0;i<t.length;i++){var s=new o,r=t[i].floor,n=t[i].detail,a=t[i].active;s.segType=t[i].type,s.level=t[i].level,this.parseFloor(s,r),this.parseDetail(s,n),this.parseActive(s,a),s.init(),e.push(s)}return e},n.prototype.parseFloor=function(t,e){for(var i=6,o=0;o<e.length;o+=i){var n=e[o],a=e[o+1],h=e[o+2],l=e[o+3],c=e[o+4]*Math.PI/180,u=e[o+5];if(0===u)var d=100*h,p=100*l,f=new r.Rectangle(d,p,c),m=new s(f,!0);else{var d=(Math.cos(c),Math.sin(c),Math.abs(100*h)),f=new r.Line(d,c),m=new s(f,!0);m=new s(f,!0)}m.floorType=u,m.position.x=n,m.position.y=a,t.staticObjects.add(m)}},n.prototype.parseDetail=function(t,e){for(var i=6,s=new PIXI.Container,o=0;o<e.length;o+=i){var r=e[o],n=e[o+1],a=e[o+2],h=e[o+3],l=e[o+4]*Math.PI/180,c=e[o+5],u=PIXI.utils.TextureCache[c]||PIXI.Texture.fromImage(ASSET_URL+"img/game/tree.png"),d=new PIXI.Sprite(u);d.position.x=r,d.position.y=n,d.scale.x=a,d.scale.y=h,d.rotation=l,s.addChild(d),d.updateTransform(),d.index=o,t.staticImages.push(d),t.viewHash.add(d)}},n.prototype.parseActive=function(t,e){for(var i=3,s=(new PIXI.Container,0);s<e.length;s+=i){var o=e[s],r=e[s+1],n=e[s+2];t.dynamicObjects.push([o,r,n])}},i.exports=n}),define("com/rebels/game/DMGroup",["require","exports","module"],function(t,e,i){var s=function(){this.children=[]};s.prototype.add=function(t){return this.children.push(t),t},s.prototype.remove=function(t){var e=this.children.indexOf(t);return-1===e?null:(this.children.splice(e,1),t)},s.prototype.empty=function(){this.children.length=0},i.exports=s}),define("com/rebels/game/collision/Vector",["require","exports","module"],function(t,e,i){var s=function(t,e){this.x=t||0,this.y=e||0,this.id=s._UID++};s._UID=0,s.prototype.clone=function(){return new s(this.x,this.y)},s.prototype.plus=function(t){return this.x+=t.x,this.y+=t.y,this},s.prototype.minus=function(t){return this.x-=t.x,this.y-=t.y,this},s.prototype.invert=function(t){return this.x*=-1,this.y*=-1,this},s.prototype.multiply=s.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},s.prototype.divideScalar=function(t){if(0===t)this.x=0,this.y=0;else{var e=1/t;this.x*=e,this.y*=e}return this},s.prototype.dot=function(t){return this.x*t.x+this.y*t.y},s.prototype.length=function(t){return Math.sqrt(this.x*this.x+this.y*this.y)},s.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},s.prototype.normalize=function(){return this.divideScalar(this.length())},s.prototype.distanceTo=function(t){return Math.sqrt(this.distanceToSq(t))},s.prototype.distanceToSq=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},s.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},s.prototype.setX=function(t){return this.x=t,this},s.prototype.setY=function(t){return this.y=t,this},s.prototype.setLength=function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},s.prototype.invert=function(t){return this.x*=-1,this.y*=-1,this},s.prototype.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},s.prototype.rad=function(){return Math.atan2(this.x,this.y)},s.prototype.deg=function(){return 180*this.rad()/Math.PI},s.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},s.prototype.rotate=function(t){var e=this.x;return this.x=this.x*Math.cos(t)-this.y*Math.sin(t),this.y=e*Math.sin(t)+this.y*Math.cos(t),this},s.projectPoint=function(t,e){var i=new s(0,0),o=s.project(t.clone().minus(i),e);return o.clone().plus(i)},s.project=function(t,e){var i=new s(0,0),o=t.dot(e);return i.x=o/(e.x*e.x+e.y*e.y)*e.x,i.y=o/(e.x*e.x+e.y*e.y)*e.y,i},s.prototype.constructor=s,i.exports=s}),define("com/rebels/game/collision/CrashData",["require","exports","module"],function(t,e,i){var s=function(t,e,i,s,o){this.object1=t,this.object2=e,this.penetration=i,this.projection=s,this.ignore=o||!1,this._key=null,this._tickId=null};s.pool=[],i.exports=s}),define("com/rebels/game/collision/CrashBody",["require","exports","module","PIXI","fido/utils/Math2","./Vector"],function(t,e,i){var s=t("PIXI"),o=t("fido/utils/Math2"),r=t("./Vector"),n=function(t){this.type=n.DYNAMIC,this.shape=t,this.passthrough=!1,this.currentSurface=null,this.position=new s.Point,this.lastPosition=new s.Point,this.timeScale=1,this.velocity=new r,this.acceleration=new r,this.bounce=0,this.maxSpeed=3,this.maxSpeedY=3e5,this.gravity=.1,this.friction=1,this.sleeping=!1,this.solid=!0,this.active=!0,this.flip=1};n.prototype.update=function(){this.active&&(this.velocity.x+=this.acceleration.x,this.velocity.y+=this.acceleration.y*this.flip,this.velocity.y+=this.gravity*this.timeScale*this.flip,this.velocity.x*=this.friction,this.velocity.x=o.cap(this.velocity.x,-this.maxSpeed,this.maxSpeed),this.velocity.y=o.cap(this.velocity.y,-this.maxSpeedY,this.maxSpeedY),this.position.x+=this.velocity.x*this.timeScale,this.position.y+=this.velocity.y*this.timeScale)},n.prototype.reset=function(){this.velocity.x=0,this.velocity.y=0,this.acceleration.x=0,this.acceleration.y=0},n.prototype.getDebugView=function(){var t=this.shape,e=colors[this.type];return(new s.Graphics).beginFill(e).drawRect(t.x,t.y,t.width,t.height)},n.fromRect=function(t,e,i,o){return new n(new s.Rectangle(t,e,i,o))},n.STATIC=0,n.KINIMATIC=1,n.DYNAMIC=2,n.NONE=3,colors=[4602488,16776960,16711680,255],i.exports=n}),define("com/rebels/game/collision/ConstraintSolver",["require","exports","module","./CrashBody"],function(t,e,s){var o=t("./CrashBody"),r=function(){};r.solve=function(t,e){for(i=0;i<t.length;i++){var s=t[i],r=s.object1,n=s.object2,a=s.projection,h=s.penetration;if(n.body.type===o.DYNAMIC){r.position.x-=a.x*h*.5,r.position.y-=a.y*h*.5,n.position.x+=a.x*h*.5,n.position.y+=a.y*h*.5;var l=r.body.velocity.x-n.body.velocity.x,c=r.body.velocity.y-n.body.velocity.y;0!==a.x?l*a.x<=0&&(r.body.velocity.x-=.5*l,n.body.velocity.x+=.5*l):c*a.y<=0&&(r.body.velocity.y-=.5*c,n.body.velocity.y+=.5*c)}else{r.position.x-=a.x*h,r.position.y-=a.y*h;var l=r.body.velocity.x-n.body.velocity.x,c=r.body.velocity.y-n.body.velocity.y;0!==a.x?l*a.x<=0&&(r.body.velocity.x-=l):(c*a.y<=0&&(r.body.velocity.y-=c),r.body.position.x+=n.body.velocity.x)}}},r.solve3=function(t){var e=t.object1,i=t.object2,s=t.projection,r=t.penetration;if(i.body.type===o.DYNAMIC){e.position.x-=s.x*r*.5,e.position.y-=s.y*r*.5,i.position.x+=s.x*r*.5,i.position.y+=s.y*r*.5;var n=e.body.velocity.x-i.body.velocity.x,a=e.body.velocity.y-i.body.velocity.y;0!==s.x?n*s.x<=0&&(e.body.velocity.x-=.5*n,i.body.velocity.x+=.5*n):a*s.y<=0&&(e.body.velocity.y-=.5*a,i.body.velocity.y+=.5*a)}else{e.position.x-=s.x*r,e.position.y-=s.y*r;var n=e.body.velocity.x-i.body.velocity.x,a=e.body.velocity.y-i.body.velocity.y;0!==s.x?n*s.x<=0&&(e.body.velocity.x-=n):(a*s.y<=0&&(e.body.velocity.y-=a),e.body.position.x+=i.body.velocity.x)}},r.solve2=function(t,e){for(i=0;i<t.length;i++){var s=t[i],r=s.object1,n=s.object2,a=s.object2,h=s.projection,l=s.penetration,c=r.body,u=a.body,d=c.shape,p=u.shape,f=d.x+r.position.x,m=d.y+r.position.y,g=p.x+a.position.x,v=p.y+a.position.y,y=m+d.height-v,_=v+p.height-m,x=f+d.width-g,b=g+p.width-f,w=999999;if(a.passthrough,w>x&&(w=x),w>b&&(w=b),w>y&&(w=y),w>_&&(w=_),w>0)if(w==x?(h.x=-1,h.y=0):w==b?(h.x=1,h.y=0):w==y?(h.x=0,h.y=-1):w==_&&(h.x=0,h.y=1),l=-w,n.body.type===o.DYNAMIC){r.position.x-=h.x*l*.5,r.position.y-=h.y*l*.5,n.position.x+=h.x*l*.5,n.position.y+=h.y*l*.5;var S=r.body.velocity.x-n.body.velocity.x,T=r.body.velocity.y-n.body.velocity.y;0!==h.x?S*h.x<=0&&(r.body.velocity.x-=.5*S,n.body.velocity.x+=.5*S):T*h.y<=0&&(r.body.velocity.y-=.5*T,n.body.velocity.y+=.5*T)}else{r.position.x-=h.x*l,r.position.y-=h.y*l;var S=r.body.velocity.x-n.body.velocity.x,T=r.body.velocity.y-n.body.velocity.y;0!==h.x?S*h.x<=0&&(r.body.velocity.x-=S):(T*h.y<=0&&(r.body.velocity.y-=T),r.body.position.x+=n.body.velocity.x)}}},s.exports=r}),define("com/rebels/game/collision/NarrowPhase",["require","exports","module","PIXI","fido/game/crash/Vector","./CrashData","./CrashBody","./ConstraintSolver"],function(t,e,i){var s=(t("PIXI"),t("fido/game/crash/Vector")),o=t("./CrashData"),r=t("./CrashBody"),n=(t("./ConstraintSolver"),function(){this.collisions={},this.pool=[],this.tickId=0,this.currentCollisions=[],this.collisionDatas=[]});n.prototype.hitTest=function(t){this.tickId++;for(var e=0;2>e;e++)for(var i=0;i<t.length;i+=2){var s=this.hitTestAABBAABB(t[i],t[i+1]);s&&this.solve(s)}for(var i=0;i<this.currentCollisions.length;i++){var o=this.currentCollisions[i];o._tickId!==this.tickId&&(this.endCollision(o),this.currentCollisions.splice(i,1),i--)}},n.prototype.hitTestAABBAABB=function(t,e){var i=t.body,o=e.body,r=i.shape,n=o.shape,a=r.x+t.position.x,h=r.y+t.position.y,l=n.x+e.position.x,c=n.y+e.position.y,u=h+r.height-c,d=c+n.height-h,p=a+r.width-l,f=l+n.width-a,m=999999;if(m>p&&(m=p),m>f&&(m=f),m>u&&(m=u),m>d&&(m=d),e.passthrough&&(u-=2,m>u&&(m=u+=2)),m>0){var g=new s;m==p?(g.x=-1,g.y=0):m==f?(g.x=1,g.y=0):m==u?(g.x=0,g.y=-1):m==d&&(g.x=0,g.y=1);var v=-m,y=this.startCollision(t,e,v,g);if(!y.ignore)return y}return null},n.prototype.solve=function(t){var e=t.object1,i=t.object2,s=t.projection,o=t.penetration;if(i.body.type===r.DYNAMIC){e.position.x-=s.x*o*.5,e.position.y-=s.y*o*.5,i.position.x+=s.x*o*.5,i.position.y+=s.y*o*.5;var n=e.body.velocity.x-i.body.velocity.x,a=e.body.velocity.y-i.body.velocity.y;0!==s.x?n*s.x<=0&&(e.body.velocity.x-=.5*n,i.body.velocity.x+=.5*n):a*s.y<=0&&(e.body.velocity.y-=.5*a,i.body.velocity.y+=.5*a)}else{e.position.x-=s.x*o,e.position.y-=s.y*o;var n=e.body.velocity.x-i.body.velocity.x,a=e.body.velocity.y-i.body.velocity.y;0!==s.x?n*s.x<=0&&(e.body.velocity.x-=n):(a*s.y<=0&&(e.body.velocity.y-=a),e.body.position.x+=i.body.velocity.x)}},n.prototype.startCollision=function(t,e,i,s){var r=(t.UID<<12)+e.UID,n=this.collisions[r];return n?(n.penetration=i,n.projection=s,n._tickId=this.tickId,n):(n=this.pool.pop(),n?(n.object1=t,n.object2=e,n.penetration=i,n.projection=s,n.ignore=!1):n=new o(t,e,i,s,!1),n._key=r,n._tickId=this.tickId,s.y===-1*t.body.flip?(t.body.currentSurface=e,t.onGround=!0):s.y===1*e.body.flip&&(e.body.currentSurface=t,e.onGround=!0),e.passthrough&&s.y!==-1*t.body.flip&&(n.ignore=!0),t.onCollideBegin&&t.onCollideBegin(n),e.onCollideBegin&&e.onCollideBegin(n),this.collisions[r]=n,this.currentCollisions.push(n),n)},n.prototype.endCollision=function(t){var e=t._key,i=this.collisions[e];return i&&(t.object2===t.object1.body.currentSurface?(t.object1.onGround=!1,t.object1.body.currentSurface=null):t.object1===t.object2.body.currentSurface&&(t.object2.onGround=!1,t.object2.body.currentSurface=null),this.pool.push(i),this.collisions[e]=null),t.object1.world&&(t.object1.onCollideEnd&&t.object1.onCollideEnd(i),t.object2.onCollideEnd&&t.object2.onCollideEnd(i)),i},n.prototype.reset=function(){this.collisions={},this.tickId=0,this.currentCollisions=[]},i.exports=n}),define("com/rebels/game/collision/SpatialHash",["require","exports","module","signals"],function(t,e,i){var s=(t("signals"),0),o=function(t,e,i){this.hash=[],this.width=100,this.height=100,this.size=96,this.buildHash(),this.cache={}};o.prototype.buildHash=function(){for(var t=this.width,e=this.height,i=t*e,s=0;i>s;s++)this.hash[s]=[];this.cache={}},o.prototype.add=function(t){this.cache={};var e,i,s=t.body.shape,o=(t.position.x+s.x)/this.size|0,r=(t.position.y+s.y)/this.size|0,n=(t.position.x+s.x+s.width)/this.size|0,a=(t.position.y+s.y+s.height)/this.size|0;for(i=r;a>=i;i++)for(e=o;n>=e;e++){var h=i*this.width+e;this.hash[h]&&this.hash[h].push(t)}},o.prototype.retrieve=function(t){var e=t.position.x/this.size|0,i=t.position.y/this.size|0,s=this.cache[e+":"+i];return s||(s=[],s=this.addSquare(e-1,i-1,s),s=this.addSquare(e,i-1,s),s=this.addSquare(e+1,i-1,s),s=this.addSquare(e-1,i,s),s=this.addSquare(e,i,s),s=this.addSquare(e+1,i,s),s=this.addSquare(e,i+1,s),s=this.addSquare(e,i+1,s),s=this.addSquare(e+1,i+1,s),s=this.removeDuplicates(s),this.cache[e+":"+i]=s),s},o.prototype.addSquare=function(t,e,i){var s=e*this.width+t;return this.hash[s]&&(i=i.concat(this.hash[s])),i},o.prototype.retrieveArea=function(t){var e,i,o=t.body.shape,r=(t.position.x+o.x)/this.size|0,n=(t.position.y+o.y)/this.size|0,a=(t.position.x+o.x+o.width)/this.size|0,h=(t.position.y+o.y+o.height)/this.size|0,l=[],c=s++,u=0;for(i=n;h>=i;i++)for(e=r;a>=e;e++){var d=i*this.width+e,p=this.hash[d];if(p)for(var f=0;f<p.length;f++){var m=p[f];m._TICK!==c&&(m._TICK=c,l[u++]=m)}}return l},o.prototype.removeDuplicates=function(t){for(var e={},i=[],s=t.length,o=0,r=0;s>r;r++){var n=t[r];1!==e[n.UID]&&(e[n.UID]=1,i[o++]=n)}return i},o.prototype.remove=function(t){var e,i,s=t.body.shape,o=(t.position.x+s.x)/this.size|0,r=(t.position.y+s.y)/this.size|0,n=(t.position.x+s.x+s.width)/this.size|0,a=(t.position.y+s.y+s.height)/this.size|0;for(i=r;a>=i;i++)for(e=o;n>=e;e++){var h=i*this.width+e;if(h>0){var l=this.hash[h].indexOf(t);-1!==l&&this.hash[h].splice(l,1)}this.cache={}}},o.prototype.empty=function(){this.buildHash()},i.exports=o}),define("com/rebels/game/collision/CrashWorld",["require","exports","module","../DMGroup","./NarrowPhase","./CrashBody","./SpatialHash","PIXI"],function(t,e,i){var s=t("../DMGroup"),o=t("./NarrowPhase"),r=t("./CrashBody"),n=t("./SpatialHash"),a=t("PIXI"),h=function(){this.bounds=new a.Rectangle(0,0,832,704),this.staticItems=new n,this.kinimaticItems=new s,this.dynamicItems=new s,this.collisions=[],this.narrowPhase=new o,this.collisionKeys={}};h.prototype.add=function(t){t.body.type===r.STATIC?this.staticItems.add(t):t.body.type===r.KINIMATIC?this.kinimaticItems.add(t):t.body.type===r.DYNAMIC&&this.dynamicItems.add(t)},h.prototype.remove=function(t){t.body.type===r.STATIC?this.staticItems.remove(t):t.body.type===r.KINIMATIC?this.kinimaticItems.remove(t):t.body.type===r.DYNAMIC&&this.dynamicItems.remove(t)},h.prototype.update=function(){for(var t=this.getCollisions(),e=0;e<this.dynamicItems.children.length;e++)this.dynamicItems.children[e].body.update();this.narrowPhase.hitTest(t)},h.prototype.reset=function(){this.staticItems.empty(),this.kinimaticItems.empty(),this.dynamicItems.empty(),this.collisions.length=0,this.narrowPhase.reset()},h.prototype.onCollision=function(t,e){},h.prototype.getKey=function(t,e){return(t<<12)+e},h.prototype.registerCollison=function(t,e){this.collisionKeys[this.getKey(t,e)]=!0,this.collisionKeys[this.getKey(e,t)]=!0},h.prototype.getCollisions=function(){this.collisions.length=0;var t=this.dynamicItems.children;this.sortAxisList(t);for(var e=0;e<t.length;e++)for(var i=t[e],s=i.body.position.x+i.body.shape.x+i.body.shape.width+5,o=e+1;o<t.length;o++){var r=t[o],n=r.body.position.x+r.body.shape.x-5;if(n>=s)break;var a=!0,h=this.getKey(r.type,i.type);this.collisionKeys[h]?r.canCollide&&i.canCollide||(a=!1):a=!1,a&&this.collisions.push(i,r)}for(var e=0;e<this.dynamicItems.children.length;e++)for(var l=this.dynamicItems.children[e],c=this.staticItems.retrieve(l),o=0;o<c.length;o++){var u=c[o];u.canCollide&&l.canCollide&&this.collisions.push(l,u)}for(var e=0;e<this.dynamicItems.children.length;e++)for(var o=0;o<this.kinimaticItems.children.length;o++){var l=this.dynamicItems.children[e],u=this.kinimaticItems.children[o];u.canCollide&&l.canCollide&&this.collisions.push(l,u)}return this.collisions},h.prototype.sortAxisList=function(t){for(var e=1,i=t.length;i>e;e++){for(var s=t[e],o=e-1;o>=0;o--){var r=t[o];if(r.body.shape.x+r.body.position.x<=s.body.shape.x+s.body.position.x)break;t[o+1]=t[o]}t[o+1]=s}return t},h.prototype.constrainToBounds=function(){for(var t=this.bounds,e=0;e<this.dynamicItems.children.length;e++){var i=this.dynamicItems.children[e].body;i.position.x+i.shape.x<t.x?i.position.x=t.x+i.shape.x:i.position.x+i.shape.x+i.shape.width>t.x+t.width&&(i.position.x=t.x+t.width-(i.shape.x+i.shape.width)),i.position.y+i.shape.y<t.y?i.position.y=t.y+i.shape.y:i.position.y+i.shape.y+i.shape.height>t.y+t.height&&(i.position.y=t.y+t.height-(i.shape.y+i.shape.height),this.dynamicItems.children[e].onGround=!0)}},h.prototype.setBounds=function(t){this.bounds.x=t.x,this.bounds.y=t.y,this.bounds.width=t.width,this.bounds.height=t.height},i.exports=h}),define("com/rebels/game/collision/CrashTests",["require","exports","module","PIXI","fido/game/crash/Vector"],function(t,e,i){var s=(t("PIXI"),t("fido/game/crash/Vector")),o=function(){};o.hitTestItemGroup=function(t,e,i,s){for(var r=e.children,n=0;n<r.length;n++)o.hitTestAABBAABB(t,r[n],i,s)},o.hitTestItemItem=function(t,e,i,s){o.hitTestAABBAABB(t,e,i,s)},o.hitTestGroup=function(t,e,i){for(var s=t.children,r=0;r<s.length-1;r++)for(var n=r+1;n<s.length;n++)o.hitTestAABBAABB(s[r],s[n],e,i)},o.hitTestGroupGroup=function(t,e,i,s){for(var r=t.children,n=e.children,a=0;a<r.length;a++)for(var h=0;h<n.length;h++)o.hitTestAABBAABB(r[a],n[h],i,s);o.hitTestAABBAABB(item,r[a],i,s)},o.hitTestAABBAABB=function(t,e,i,o){var r=t.body,n=e.body,a=r.shape,h=n.shape,l=a.x+t.position.x,c=a.y+t.position.y,u=h.x+e.position.x,d=h.y+e.position.y,p=c+a.height-d,f=d+h.height-c,m=l+a.width-u,g=u+h.width-l,v=999999;if(v>m&&(v=m),v>g&&(v=g),v>p&&(v=p),v>f&&(v=f),v>=0){var y=new s;v==m?(y.x=-1,y.y=0):v==g?(y.x=1,y.y=0):v==p?(y.x=0,y.y=-1):v==f&&(y.x=0,y.y=1);var _=-v;i&&i(t,e,_,y)}else o&&o(t,e)},i.exports=o}),define("com/rebels/game/collision/Crash",["require","exports","module","./Vector","./CrashData","./CrashBody","./CrashWorld","./CrashTests"],function(t,e,i){i.exports={Vector:t("./Vector"),CrashData:t("./CrashData"),CrashBody:t("./CrashBody"),CrashWorld:t("./CrashWorld"),CrashTests:t("./CrashTests")}}),define("com/rebels/game/Camera",["require","exports","module","PIXI"],function(t,e,i){var s=(t("PIXI"),function(){this.x=0,this.y=0,this.rotation=0,this.zoom=1,this.viewWidth=1130,this.viewHeight=640});s.prototype.update=function(){},s.prototype.resize=function(t,e){this.viewWidth=t,this.viewHeight=e},i.exports=s}),define("com/rebels/game/staticview/PixiSpatialHash",["require","exports","module","signals"],function(t,e,i){function s(t,e){return t.index-e.index}var o=(t("signals"),0),r=function(t,e,i){this.hash=[],this.width=t||100,this.height=e||100,this.size=i||new PIXI.Point(256,256),this.halfHeight=this.height/2*this.size.y,this.buildHash(),this.IDGENERATOR=0};r.prototype.buildHash=function(){for(var t=this.width,e=this.height,i=t*e,s=0;i>s;s++)this.hash[s]=[]},r.prototype.add=function(t){var e=t.getBounds();t.UID=this.IDGENERATOR++;var i,s,o=(e.x+5e3)/this.size.x|0,r=(e.y+this.halfHeight)/this.size.y|0,n=(e.x+e.width+5e3)/this.size.x|0,a=(e.y+e.height+this.halfHeight)/this.size.y|0;for(s=r;a>=s;s++)for(i=o;n>=i;i++){var h=s*this.width+i;this.hash[h]&&this.hash[h].push(t)}},r.prototype.retrieveContainer=function(t,e){var i=e*this.width+t;return this.hash[i]},r.prototype.retrieve=function(t){var e,i,o=(t.x+5e3)/this.size.x|0,r=(t.y+this.halfHeight)/this.size.y|0,n=(t.x+t.width+5e3)/this.size.x|0,a=(t.y+t.height+this.halfHeight)/this.size.y|0,h=[];for(i=r;a>=i;i++)for(e=o;n>=e;e++){var l=i*this.width+e;this.hash[l]&&(h=h.concat(this.hash[l]))}var c=this.removeDuplicates(h);return c.sort(s),c};r.prototype.retrieve=function(t){var e,i,s=(t.x+5e3)/this.size.x|0,r=(t.y+this.halfHeight)/this.size.y|0,n=(t.x+t.width+5e3)/this.size.x|0,a=(t.y+t.height+this.halfHeight)/this.size.y|0,h=[],l=o++,c=0;for(i=r;a>=i;i++)for(e=s;n>=e;e++){var u=i*this.width+e,d=this.hash[u];if(d)for(var p=0;p<d.length;p++){var f=d[p];f._TICK!==l&&(f._TICK=l,h[c++]=f)}}return h},r.prototype.removeDuplicates=function(t){if(t.length<2)return t;for(var e={},i=[],s=t.length,o=0,r=0;s>r;r++){var n=t[r];1!==e[n.UID]&&(e[n.UID]=1,i[o++]=n)}return i},r.prototype.remove=function(t,e){var i,s,o=(t.position.x+e.x)/this.size.x|0,r=(t.position.y+e.y)/this.size.y|0,n=(t.position.x+e.x+e.width)/this.size.x|0,a=(t.position.y+e.y+e.height)/this.size.y|0;for(s=r;a>=s;s++)for(i=o;n>=i;i++){var h=s*this.width+i,l=this.hash[h].indexOf(t);-1!==l&&this.hash[h].splice(l)}},r.prototype.clear=function(){this.buildHash();
},i.exports=r}),define("com/rebels/game/staticview/StaticView",["require","exports","module","signals","PIXI","fido/utils/Utils","./PixiSpatialHash"],function(t,e,i){var s=(t("signals"),t("PIXI")),o=(t("fido/utils/Utils"),t("./PixiSpatialHash")),r=new s.Rectangle,n=function(){this.chunks=[],this.size=new s.Point(256,256),this.dimensions=new s.Point(2,2),this.pool=[],this.tempMatrix=new s.Matrix,this.position=new s.Point,this.padding=0,this.frame=new s.Point(1136,626),this.view=new s.Container,this.buildGrid(),this.tick=0;(new s.Graphics).beginFill(16777215,.1).drawRect(0,0,this.frame.x,this.frame.y);this.collection=[],this.ting=new s.Container,this.renderQue=[],this.hash=new o},a=function(t,e,i,o){if(this.valid){o=!0;var r=t.worldTransform,n=new s.Matrix;n.identity(),t.worldTransform=n,t.worldAlpha=1;var a,h,l=t.children;for(a=0,h=l.length;h>a;++a){var c=l[a].worldTransform;c.tx+=e.tx,c.ty+=e.ty}i&&this.textureBuffer.clear();var u=this.textureBuffer.context,d=this.renderer.resolution;for(this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,u),this.renderer.resolution=d,t.worldTransform=r,a=0,h=l.length;h>a;++a){var c=l[a].worldTransform;c.tx-=e.tx,c.ty-=e.ty}}};n.prototype.buildGrid=function(){this.dimensions.x=Math.ceil(this.frame.x/this.size.x)+1,this.dimensions.y=Math.ceil(this.frame.y/this.size.y)+1;var t=this.dimensions.x*this.dimensions.y,e=(new s.Graphics).beginFill(16777215).drawRect(0,0,this.size.x,this.size.y),i=(e.generateTexture(window.renderer),2===window.renderer.type);this.padding=2;for(var o=0;t>o;o++){var r=new s.RenderTexture(window.renderer,this.size.x+this.padding,this.size.y+this.padding,s.SCALE_MODES.LINEAR,1);i&&(r.render=a.bind(r));var n=new s.Sprite(r);n.home=new s.Point(o%this.dimensions.x,o/this.dimensions.x|0),n.currentId=new s.Point(99999,99999),this.chunks.push(n),this.view.addChild(n)}},n.prototype.setHash=function(){},n.prototype.update=function(){for(var t=0;t<this.chunks.length;t++){var e=this.chunks[t],i=e.home.x,s=e.home.y,o=0,r=0,n=i-this.position.x/this.size.x;n-=o;var a=Math.floor(n/this.dimensions.x)*this.dimensions.x;a-=i,a*=-1,a-=1,n%=this.dimensions.x,0>n&&(n+=this.dimensions.x),n-=1,n+=o;var h=s-this.position.y/this.size.y;h-=r;var l=Math.floor(h/this.dimensions.y)*this.dimensions.y;if(l-=s,l*=-1,l-=1,h%=this.dimensions.y,0>h&&(h+=this.dimensions.y),h-=1,h+=r,e.position.x=n*this.size.x,e.position.y=h*this.size.y,e.currentId.x!=a||e.currentId.y!=l){e.currentId.x!=a,e.currentId.x=a,e.currentId.y=l;var c=this.getStaticSprites(a,l,e);c&&c.length}}this.tick++;var e=this.renderQue.shift();if(e)for(var t=0;t<e.data.length;t++){var u=e.data[t],d=this.tempMatrix;d.tx=-u.areaX,d.ty=-u.areaY,e.visible=!0,this.ting.children=u.items,e._texture.render(this.ting,d,0===t,!1)}},n.prototype.getStaticSprites=function(t,e,i){i.visible=!1,i.data=[];var s=r;r.x=t*this.size.x,r.y=e*this.size.y,r.width=this.size.x,r.height=this.size.y;var o=this.hash.retrieve(s);if(o.length){this.tempMatrix;i.data.push({id:0,areaX:s.x,areaY:s.y,items:o});var n=this.renderQue.indexOf(i);-1===n||this.renderQue.splice(n,1),this.renderQue.push(i)}},i.exports=n}),define("com/rebels/game/background/BackgroundView",["require","exports","module","PIXI"],function(t,e,i){var s=t("PIXI"),o=function(){this.position=new s.Point,this.size=new s.Point(1247,738),this.dimensions=new s.Point(2,2),this.frame=new s.Point(1136,626),this.view=new s.Container,this.bg=new s.Sprite};o.prototype.build=function(){},o.prototype.set=function(t,e){this.bounds=e},o.prototype.update=function(t){var e=t.x/this.bounds.width,i=t.y/this.bounds.height;this.bg.position.x=-e*(this.size.x-this.frame.x),this.bg.position.y=-i*(this.size.y-this.frame.y)},o.prototype.resize=function(t,e){this.viewWidth=t,this.viewHeight=e},i.exports=o}),define("com/rebels/game/PixiDust",["require","exports","module","PIXI","fido/game/GameObjectPool","fido/system/Device"],function(t,e,i){var s=t("PIXI"),o=t("fido/game/GameObjectPool"),r=t("fido/system/Device");PixiDust=function(){s.Container.call(this,100),this.particals=[],this.particalPool=new o(ParticalDust),this.max=window.WEBGL?150:5,r.instance.desktop||(this.max=window.WEBGL?10:0),this.count=0,this.pos=0;for(var t=0;t<this.max;t++){var e=this.particalPool.getObject();e.home.x=-1136*Math.random(),e.position.y=e.home.y=110640*Math.random(),e.speed=new s.Point(.2*(Math.random()-.5),.4*(Math.random()-.5)),this.particals.push(e),this.addChild(e)}this.focalLength=150},PixiDust.prototype=Object.create(s.Container.prototype),PixiDust.prototype.update=function(t){for(var e=0;e<this.particals.length;e++){var i=this.particals[e],s=this.focalLength/(this.focalLength+i.z),s=this.focalLength/(this.focalLength+i.z);i.scale.x=i.scale.y=.2*s,i.home.x+=i.speed.x,i.home.y+=i.speed.y,i.position.y=(i.home.y-t.y)*s*.5,i.position.x=(i.home.x-t.x)*s*.5,i.position.x%=1136,i.position.x<0&&(i.position.x+=1136),i.position.y%=640,i.position.y<0&&(i.position.y+=640),i.rotation+=i.rotationSpeed}},ParticalDust=function(){ParticalDust.globalCount++,s.Sprite.call(this,s.Texture.fromFrame(ParticalDust.frames[ParticalDust.globalCount%3])),this.anchor.x=.5,this.anchor.y=.5,this.z=-50+-50*(Math.random()-.5)*2,this.blendMode=s.isWebGL?s.BLEND_MODES.ADD:0,this.rotation=Math.random()*Math.PI*2,this.rotationSpeed=.1*(Math.random()-.5),this.home=new s.Point,this.alpha=.4},ParticalDust.globalCount=0,ParticalDust.frames=["dust_mote_01.png","dust_mote_02.png","dust_mote_03.png",,"dust_mote_04.png",,"dust_mote_05.png"],ParticalDust.prototype=Object.create(s.Sprite.prototype),i.exports=PixiDust}),define("fido/Flash",["require","exports","module","PIXI"],function(t,e,i){var s=t("PIXI"),o=function(t,e){s.Graphics.call(this),this.beginFill(16777215).drawRect(0,0,100,100),this.cacheAsBitmap=!0,this.resize(t,e),this.alpha=0};o.prototype=Object.create(s.Graphics.prototype),o.prototype.flash=function(t,e){this.alpha=1,TweenLite.to(this,e||.5,{alpha:0,delay:t||0,ease:Expo.easeOut})},o.prototype.resize=function(t,e){this.scale.x=t/100,this.scale.y=t/100},i.exports=o}),define("com/rebels/game/P2Materials",["require","exports","module"],function(t,e,i){var s={player:new p2.Material,zebCrouch:new p2.Material,platform:new p2.Material,block:new p2.Material,convayor:new p2.Material},o={playerPlayerContact:new p2.ContactMaterial(s.player,s.player,{friction:0}),playerPlatformContact:new p2.ContactMaterial(s.player,s.platform,{friction:0}),playerBlockContact:new p2.ContactMaterial(s.player,s.block,{friction:0}),playerBlockContact:new p2.ContactMaterial(s.player,s.block,{friction:0}),zebCrouchPlatformContact:new p2.ContactMaterial(s.zebCrouch,s.platform,{friction:1}),blockBlockContact:new p2.ContactMaterial(s.block,s.block,{friction:.9}),blockPlatformContact:new p2.ContactMaterial(s.platform,s.block,{friction:.9}),playerConvayorContact:new p2.ContactMaterial(s.player,s.convayor,{surfaceVelocity:-200}),blockConvayorContact:new p2.ContactMaterial(s.block,s.convayor,{friction:.8})};i.exports={materials:s,contacts:o}}),define("com/rebels/game/items/view/AnimationManager",["require","exports","module","PIXI","signals"],function(t,e,i){var s=(t("PIXI"),t("signals")),o=function(){this.animations={},this.rules={},this.texture=null,this.currentAnimation=null,this.timeScale=1,this.complete=!1,this.onComplete=new s};o.prototype.register=function(t,e){e.id=t,e.currentFrame=0,e.speed=e.speed||.4,this.animations[t]=e},o.prototype.play=function(t){var e=this.animations[t];this.complete=!1,e!==this.currentAnimation&&(e.currentFrame=0,this.currentAnimation=e)},o.prototype.update=function(){var t=this.currentAnimation,e=Math.floor(t.currentFrame);t.loop?e%=t.frames.length:e>t.frames.length-1&&(e=t.frames.length-1,this.complete||(this.onComplete.dispatch(),this.complete=!0)),t.currentFrame+=t.speed,this.texture=t.frames[e]},i.exports=o}),define("com/rebels/game/items/view/LothalSky",["require","exports","module","PIXI","./AnimationManager","fido/utils/Math2","fido/system/Device"],function(t,e,i){var s=t("PIXI"),o=(t("./AnimationManager"),t("fido/utils/Math2")),r=t("fido/system/Device"),n=(new s.Point,new s.Point,new s.Point,new s.Point,new s.Point,(new s.Graphics).beginFill(0).drawCircle(0,0,10).generateTexture(),[]),a=function(t){s.Container.call(this),this.size=new s.Point(1230,400),this.tick=0,this.stretch=200,this.sky=new s.Sprite.fromImage(ASSET_URL+"img/game/world_1/bg_day_sky.jpg"),this.addChild(this.sky),this.cloud=new s.Sprite.fromFrame("bg_cloud1.png"),this.cloud.anchor.set(.5),this.addChild(this.cloud),this.cloud.position.x=200,this.cloud.position.y=100,this.destroyer=new s.Sprite.fromFrame("bg_star_destroyer.png"),this.destroyer.anchor.set(.5),this.destroyer.position.x=400,this.destroyer.position.y=100,this.addChild(this.destroyer),this.cloud2=new s.Sprite.fromFrame("bg_cloud2.png"),this.cloud2.anchor.set(.5),this.addChild(this.cloud2),this.cloud2.position.x=500,this.cloud2.position.y=170,this.city=new s.Sprite.fromImage(ASSET_URL+"img/game/world_1/bg_city.png"),this.addChild(this.city),this.heat=r.instance.desktop&&s.isWebGL,this.heat&&(this.displace=new s.Sprite.fromImage(ASSET_URL+"img/game/world_1/displace.jpg"),this.addChild(this.displace),this.displace.scale.set(.2),this.displacementFilter=new s.filters.DisplacementFilter(this.displace),this.displacementFilter.scale.x=5,this.displacementFilter.scale.y=5,this.filters=[this.displacementFilter])};a.prototype=Object.create(s.Container.prototype),a.prototype.update=function(){this.heat&&(this.displacementFilter.scale.x=10*this.worldTransform.a,this.displacementFilter.scale.y=10*this.worldTransform.c,this.displace.position.y-=1,this.displace.position.x=100*Math.sin(.01*this.tick)),this.tick--,this.cloud.position.x+=.05,this.cloud2.position.x+=.2},a.prototype.addFighter=function(t){var e=n.pop();if(e||(e=new s.Sprite,e.start=new s.Point,e.end=new s.Point,e.mid=new s.Point,e.mid=new s.Point,e.mid2=new s.Point,e.anchor.set(.5)),e.texture=s.Texture.fromFrame("xwing.png"),e.scale.set(.5),this.addChildAt(e,0),e.start.x=this.size.x+this.stretch,e.start.y=this.size.y*Math.random(),e.end.x=-this.stretch,e.end.y=this.size.y*Math.random(),Math.random()<.5){var i=e.start;e.start=e.end,e.end=i}var r=100;e.mid.x=o.random(r,this.size.x-r),e.mid.y=o.random(-r,this.size.y),e.mid2.x=o.random(r,this.size.x-r),e.mid2.y=o.random(-r,this.size.y),e.x=e.start.x,e.x=e.start.x,e.y=e.start.y,TweenLite.to(e,8,{bezier:{values:[e.mid,e.end],autoRotate:["x","y","rotation",0,!0]},delay:t,ease:Sine.easeInOut,onComplete:function(){e.parent.removeChild(e),n.push(e)}})},i.exports=a}),define("com/rebels/game/items/view/LothalSkyNight",["require","exports","module","PIXI","./AnimationManager","fido/utils/Math2","fido/system/Device"],function(t,e,i){var s=t("PIXI"),o=(t("./AnimationManager"),t("fido/utils/Math2")),r=(t("fido/system/Device"),new s.Point,new s.Point,new s.Point,new s.Point,new s.Point,(new s.Graphics).beginFill(0).drawCircle(0,0,10).generateTexture(),[]),n=function(t){s.Container.call(this),this.size=new s.Point(1230,400),this.tick=0,this.counter=0,this.stretch=200,this.sky=new s.Sprite.fromImage(ASSET_URL+"img/game/world_2/bg_night_sky.jpg"),this.addChild(this.sky),this.destroyer=new s.Sprite.fromImage(ASSET_URL+"img/game/world_2/bg_destroyer_night.png"),this.destroyer.anchor.set(.5),this.destroyer.position.x=400,this.destroyer.position.y=100,this.addChild(this.destroyer),this.destroyerLight=new s.Sprite.fromImage(ASSET_URL+"img/game/world_2/bg_destroyer_lights.png"),this.destroyerLight.position.x=-10,this.destroyerLight.position.y=15,this.destroyerLight.anchor.x=1,this.destroyerLight.anchor.y=0,this.destroyer.addChild(this.destroyerLight),this.cloud2=new s.Sprite.fromImage(ASSET_URL+"img/game/world_2/bg_cloud_night.png"),this.cloud2.anchor.set(.5),this.addChild(this.cloud2),this.cloud2.position.x=1100,this.cloud2.position.y=170,this.city=new s.Sprite.fromImage(ASSET_URL+"img/game/world_2/bg_city_night.png"),this.addChild(this.city)};n.prototype=Object.create(s.Container.prototype),n.prototype.update=function(){this.cloud2.position.x-=.08,this.counter+=1,this.destroyerLight.rotation=.5*Math.cos(this.counter/200)-.2,this.destroyerLight.scale.x=.7*Math.abs(Math.cos(this.counter/200))+.5,this.destroyerLight.scale.y=.7*Math.abs(Math.cos(this.counter/200)*Math.sin(this.counter/100))+.5},n.prototype.addFighter=function(t){var e=r.pop();if(e||(e=new s.Sprite,e.start=new s.Point,e.end=new s.Point,e.mid=new s.Point,e.mid=new s.Point,e.mid2=new s.Point,e.anchor.set(.5)),e.texture=s.Texture.fromFrame("xwing.png"),e.scale.set(.5),this.addChildAt(e,0),e.start.x=this.size.x+this.stretch,e.start.y=this.size.y*Math.random(),e.end.x=-this.stretch,e.end.y=this.size.y*Math.random(),Math.random()<.5){var i=e.start;e.start=e.end,e.end=i}var n=100;e.mid.x=o.random(n,this.size.x-n),e.mid.y=o.random(-n,this.size.y),e.mid2.x=o.random(n,this.size.x-n),e.mid2.y=o.random(-n,this.size.y),e.x=e.start.x,e.x=e.start.x,e.y=e.start.y,TweenLite.to(e,8,{bezier:{values:[e.mid,e.end],autoRotate:["x","y","rotation",0,!0]},delay:t,ease:Sine.easeInOut,onComplete:function(){e.parent.removeChild(e),r.push(e)}})},i.exports=n}),define("com/rebels/game/items/view/Fighter",["require","exports","module","PIXI"],function(t,e,i){var s=t("PIXI"),o=function(t){s.Container.call(this),this.back=new s.Sprite.fromImage(ASSET_URL+"img/game/world_3/bg_garel_tie.png"),this.back.anchor.set(.5),this.addChild(this.back),this.front=new s.Sprite.fromImage(ASSET_URL+"img/game/world_3/bg_garel_tie.png"),this.front.anchor.set(.5),this.addChild(this.front),this.offset=20,this.offsetY=40};o.prototype=Object.create(s.Container.prototype),o.prototype.update=function(t,e){this.front.position.x=-this.offset/2+this.offset*t,this.front.position.y=-this.offsetY/2+this.offsetY*e,this.position.y+=.02*-(180*this.rotation/Math.PI)},i.exports=o}),define("com/rebels/game/items/view/Garel",["require","exports","module","PIXI","./AnimationManager","fido/utils/Math2","fido/system/Device","./Fighter"],function(t,e,i){var s=t("PIXI"),o=(t("./AnimationManager"),t("fido/utils/Math2")),r=t("fido/system/Device"),n=t("./Fighter"),a=function(t){s.Container.call(this),this.size=new s.Point(1230,400),this.tick=0,this.counter=0,this.stretch=200,this.sky=new s.Sprite.fromImage(ASSET_URL+"img/game/world_3/bg_garel_sky.jpg"),this.addChild(this.sky),s.isWebGL&&r.instance.isMobile&&(this.fighter=new n,this.addChild(this.fighter),this.fighter.position.x=1250,this.fighter.position.y=180),this.direction=-1,this.speed=5,this.cloud2=new s.Sprite.fromFrame("bg_garel_cloud.png"),this.cloud2.anchor.set(.5),this.addChild(this.cloud2),this.cloud2.position.x=1100,this.cloud2.position.y=170,this.city=new s.Sprite.fromFrame(ASSET_URL+"img/game/world_3/bg_garel_city.png"),this.city.anchor.y=1,this.city.position.y=640,this.addChild(this.city),this.x1=200,this.x2=800,this.y1=0,this.y2=300,this.heat=r.instance.desktop};a.prototype=Object.create(s.Container.prototype),a.prototype.update=function(){if(s.isWebGL&&r.instance.isMobile){this.cloud2.position.x-=.08,this.counter+=1;var t=Math.abs(2*Math.cos(this.counter/50))+this.speed;if(this.fighter.position.x+=this.direction*t,this.fighter.position.x<-100){this.fighter.position.x=1230+1200*Math.random(),this.fighter.position.y=100+100*Math.random();var e=(50*Math.random()-25)*Math.PI/180;this.fighter.rotation=e,this.speed=4*Math.random()+4}var i=(this.fighter.position.x-this.x1)/this.x2;0>=i&&(i=0),i>=1&&(i=1);var o=(this.fighter.position.y-this.y1)/this.y2;0>=o&&(o=0),o>=1&&(o=1),this.fighter.update(i,o)}},a.prototype.addFighter=function(t){var e=pool.pop();if(e||(e=new s.Sprite,e.start=new s.Point,e.end=new s.Point,e.mid=new s.Point,e.mid=new s.Point,e.mid2=new s.Point,e.anchor.set(.5)),e.texture=s.Texture.fromFrame("xwing.png"),e.scale.set(.5),this.addChildAt(e,0),e.start.x=this.size.x+this.stretch,e.start.y=this.size.y*Math.random(),e.end.x=-this.stretch,e.end.y=this.size.y*Math.random(),Math.random()<.5){var i=e.start;e.start=e.end,e.end=i}var r=100;e.mid.x=o.random(r,this.size.x-r),e.mid.y=o.random(-r,this.size.y),e.mid2.x=o.random(r,this.size.x-r),e.mid2.y=o.random(-r,this.size.y),e.x=e.start.x,e.x=e.start.x,e.y=e.start.y,TweenLite.to(e,8,{bezier:{values:[e.mid,e.end],autoRotate:["x","y","rotation",0,!0]},delay:t,ease:Sine.easeInOut,onComplete:function(){e.parent.removeChild(e),pool.push(e)}})},i.exports=a}),define("com/rebels/game/items/Item",["require","exports","module","PIXI","fido/game/GameObjectPool"],function(t,e,i){var s=t("PIXI"),o=t("fido/game/GameObjectPool"),r=function(t,e,i,o){this.UID=r._UID++,this.view=i||null,this.body=o||null,this.position=new s.Point,this.view&&(this.view.position=this.position),this.position.x=0|t,this.position.y=0|e,this.world=null,this.canCollide=!0,this.collideWithSelf=!0,this.type=0,this.groups=[],this._TICK=-1,this.keepInBonus=!0};r.prototype.updateView=function(t){this.view=t},r.prototype.reset=function(t){},r.prototype.destroy=function(){this.world&&(this.world.remove(this),o.returnObject(this))},r._UID=0,r.mixin=function(t,e){e.call(t),Object.assign(t,e)},i.exports=r}),define("com/rebels/game/items/view/BigFighter",["require","exports","module","PIXI","fido/sound/SoundBridge","../Item"],function(t,e,i){var s=t("PIXI"),o=t("fido/sound/SoundBridge"),r=t("../Item"),n=function(t){this.containerFighter=new s.Container,this.containerFighter.rotation=20*Math.PI/180,this.backFighter=new s.Sprite.fromImage(ASSET_URL+"img/game/world_4/tie_fighter_bg_dark.png"),this.backFighter.anchor.set(.5),this.backFighter.scale.set(1.5),this.frontFighter=new s.Sprite.fromImage(ASSET_URL+"img/game/world_4/tie_fighter_bg.png"),this.frontFighter.anchor.set(.5),this.frontFighter.scale.set(1.5),this.containerFighter.addChild(this.backFighter),this.containerFighter.addChild(this.frontFighter),this.containerFighter.position.y=100,r.call(this,null,null,this.containerFighter),this.canFly=!1,this.x1=0,this.x2=1130,this.y1=100,this.y2=350,this.offset=160,this.offsetY=80,this.shipAnimating=!1,this.soundPlaying=!1,this.count=900+300*Math.random()};n.prototype=Object.create(r.prototype),n.prototype.addedToWorld=function(t){this.canFly=!0,this.containerFighter.position.x=-this.containerFighter.width},n.prototype.removedFromWorld=function(t){this.canFly=!1},n.prototype.animateFighter=function(){if(!this.shipAnimating){this.containerFighter.visible=!0,this.containerFighter.position.x=-this.containerFighter.width/2,this.containerFighter.position.y=100,this.containerFighter.rotation=20*Math.PI/180,this.shipAnimating=!0;var t=1.2;TweenLite.to(this.containerFighter.position,t,{x:1330+this.containerFighter.width/2}),TweenLite.to(this.containerFighter,t/3,{rotation:0,ease:Sine.easeOut,onComplete:function(){TweenLite.to(this.containerFighter,t/2,{rotation:-20*Math.PI/180,ease:Sine.easeIn})}.bind(this)}),TweenLite.to(this.containerFighter.position,t/2,{y:320,ease:Cubic.easeOut,onComplete:function(){TweenLite.to(this.containerFighter.position,t/2,{y:-100,ease:Cubic.easeIn,onComplete:function(){this.shipAnimating=!1,this.soundPlaying=!1,this.containerFighter.visible=!1,this.count=3e3+1200*Math.random()}.bind(this)})}.bind(this)})}},n.prototype.update=function(){if(this.canFly){this.count-30<0&&!this.soundPlaying&&(this.soundPlaying=!0,o.sfx.play("tienoise")),this.count<0&&!this.shipAnimating&&this.animateFighter(),this.count--;var t=(this.containerFighter.position.x-this.x1)/this.x2;0>=t&&(t=0),t>=1&&(t=1);var e=(this.containerFighter.position.y-this.y1)/this.y2;0>=e&&(e=0),e>=1&&(e=1),this.frontFighter.position.x=-this.offset/2+this.offset*t,this.frontFighter.position.y=-this.offsetY/2+this.offsetY*e}},i.exports=n}),define("com/rebels/game/items/view/DeathStar",["require","exports","module","PIXI","./AnimationManager","fido/utils/Math2","fido/system/Device","./BigFighter"],function(t,e,i){var s=t("PIXI"),o=(t("./AnimationManager"),t("fido/utils/Math2")),r=(t("fido/system/Device"),t("./BigFighter"),function(t){s.Container.call(this),this.bg=new s.Sprite.fromImage(ASSET_URL+"img/game/world_4/star_destroyer_bg.jpg"),this.addChild(this.bg),this.containerFighter=new s.Container,this.containerFighter.rotation=20*Math.PI/180,this.addChild(this.containerFighter),this.containerFighter.position.x=-200,this.containerFighter.position.y=200,this.backFighter=new s.Sprite.fromFrame("tie_fighter_bg_dark.png"),this.backFighter.anchor.set(.5),this.frontFighter=new s.Sprite.fromFrame("tie_fighter_bg.png"),this.frontFighter.anchor.set(.5),this.containerFighter.addChild(this.backFighter),this.containerFighter.addChild(this.frontFighter),this.x1=0,this.x2=1130,this.y1=0,this.y2=300,this.offset=160,this.offsetY=40,this.shipAnimating=!1,this.count=5});r.prototype=Object.create(s.Container.prototype),r.prototype.animateFighter=function(){this.containerFighter.position.x=-200,this.containerFighter.rotation=20*Math.PI/180,TweenLite.to(this.containerFighter,1.6,{rotation:0,ease:Back.easeOut.config(2),onComplete:function(){TweenLite.to(this.containerFighter,2.4,{rotation:-20*Math.PI/180,delay:1.4,ease:Circ.easeIn})}.bind(this)}),TweenLite.to(this.containerFighter.position,1.6,{y:300}),TweenLite.to(this.containerFighter.position,2.4,{x:565,ease:Expo.easeOut,onComplete:function(){TweenLite.to(this.containerFighter.position,2,{y:0,delay:1.4,ease:Circ.easeIn}),TweenLite.to(this.containerFighter.position,2.4,{x:1400,delay:1,ease:Expo.easeIn,onComplete:function(){this.count=o.random(600,1200),this.shipAnimating=!1}.bind(this)})}.bind(this)})},r.prototype.update=function(){this.count<0&&!this.shipAnimating&&(this.shipAnimating=!0,this.animateFighter()),this.count--;var t=(this.containerFighter.position.x-this.x1)/this.x2;0>=t&&(t=0),t>=1&&(t=1);var e=(this.containerFighter.position.y-this.y1)/this.y2;0>=e&&(e=0),e>=1&&(e=1),this.frontFighter.position.x=-this.offset/2+this.offset*t},i.exports=r}),define("fido/physics/particles/ParticleManager",["require","exports","module","fido/game/GameObjectPool"],function(t,e,i){var s=t("fido/game/GameObjectPool"),o=function(t){this.world=t,this.pools=[],this.activeParticles=[]};o.prototype.registerParticle=function(t,e){t.prototype._particleId=e,this.pools[e]=new s(t)},o.prototype.add=function(t,e,i){var s=this.pools[i].getObject();s.activate(t,e),this.world.innerContainer.addChild(s),this.activeParticles.push(s)},o.prototype.update=function(){for(var t=0;t<this.activeParticles.length;t++){var e=this.activeParticles[t];e.update(),e.isDead&&(this.activeParticles.splice(t,1),t--,this.world.innerContainer.removeChild(e),this.pools[e._particleId].returnObject(e))}},i.exports=o}),define("com/rebels/game/particles/GlitterPuff",["require","exports","module","PIXI","fido/utils/Math2"],function(t,e,i){var s=t("PIXI"),o=t("fido/utils/Math2"),r=function(){s.Container.call(this),this.disc=s.Sprite.fromFrame("naked_power_rgregular00001.png"),this.disc.anchor.set(.5),this.depthOffset=9999999,r.tints||(r.tints=[16734107,16757335,10639359,16776535,14614359,5757695]),this.particles=[],this.total=20;for(var t=0;t<this.total;t++){var e=s.Sprite.fromFrame("naked_power_rgregular00001.png");e.speed=new s.Point,e.pos=new s.Point,this.addChild(e),e.anchor.set(.5),this.particles.push(e)}this.ratio=0};r.prototype=Object.create(s.DisplayObjectContainer.prototype),r.prototype.activate=function(t,e){this.position.x=t,this.position.y=e,this.isDead=!1,this.life=2,this.ratio=0;for(var i=0;i<this.total;i++){var r=this.particles[i];r.pos=new s.Point;var n=2*Math.PI/this.total*i,a=5+10*Math.random();r.speed.x=Math.sin(n)*a,r.speed.y=Math.cos(n)*a-5,r.visible=!0,r.position.x=o.random(-50,50),r.position.y=0,r.rotation=Math.random()*Math.PI*2,r.alpha=1,r.offset=100*Math.random(),r.rotationSpeed=.1}this.disc.scale.set(1),this.disc.alpha=1,this.disc.scale.x=this.disc.scale.y=.2,TweenLite.to(this.disc.scale,.7,{x:1.3*1.5,y:1.3*1.5,ease:Sine.easeOut}),TweenLite.to(this.disc,.1665,{alpha:0,ease:Sine.easeOut,delay:.33333})},r.prototype.update=function(){this.life-=.03,this.life<0&&(this.isDead=!0);for(var t=0;t<this.total;t++){var e=this.particles[t];e.speed.y+=1,e.position.x+=e.speed.x,e.position.y+=e.speed.y,e.scale.y=Math.sin(e.rotation+e.offset),e.scale.x=1,e.rotation+=e.rotationSpeed,e.speed.x*=.95,this.life<.5&&(e.alpha*=.8)}this.disc.rotation+=.1},i.exports=r}),define("com/rebels/game/particles/Glowy",["require","exports","module","PIXI","fido/utils/Math2"],function(t,e,i){var s=t("PIXI"),o=t("fido/utils/Math2"),r=function(){s.Container.call(this),this.particles=[],this.total=s.isWebGL||!Device.instance.isMobile&&!Device.instance.iPad?20:5;for(var t=new s.Texture.fromFrame("coin_get.png"),e=0;e<this.total;e++){var i=new s.Sprite(t);s.isWebGL&&(i.blendMode=s.BLEND_MODES.ADD),i.speed=new s.Point,i.pos=new s.Point,this.addChild(i),i.anchor.set(.5),this.particles.push(i)}this.ratio=0};r.prototype=Object.create(s.Container.prototype),r.prototype.activate=function(t,e){this.position.x=t,this.position.y=e,this.isDead=!1,this.life=2,this.ratio=0;for(var i=0;i<this.total;i++){var s=this.particles[i],r=2*Math.PI/this.total*i,n=2+2*Math.random();s.speed.x=Math.sin(r)*n,s.speed.y=Math.cos(r)*n,s.visible=!0,s.position.x=o.random(-4,4),s.position.y=o.random(-4,4),s.rotation=Math.random()*Math.PI*2,s.alpha=1}},r.prototype.update=function(){this.life-=.03,this.life<0&&(this.isDead=!0);for(var t=0;t<this.total;t++){var e=this.particles[t];e.position.x+=e.speed.x,e.position.y+=e.speed.y,e.speed.x*=.98,e.speed.y*=.98,e.alpha*=.92,this.life<.5}},i.exports=r}),define("com/rebels/game/DMWorld",["require","exports","module","PIXI","signals","./DMGroup","./collision/Crash","fido/system/Ticker","./Camera","./staticview/StaticView","./background/BackgroundView","./PixiDust","fido/Flash","./P2Materials","./items/view/LothalSky","./items/view/LothalSkyNight","./items/view/Garel","./items/view/DeathStar","fido/physics/particles/ParticleManager","./particles/GlitterPuff","./particles/Glowy"],function(t,e,i){var s=t("PIXI"),o=(t("signals"),t("./DMGroup")),r=(t("./collision/Crash"),t("fido/system/Ticker")),n=(t("./Camera"),t("./staticview/StaticView"),t("./background/BackgroundView")),a=t("./PixiDust"),h=t("fido/Flash"),l=t("./P2Materials").contacts,c=t("./items/view/LothalSky"),u=t("./items/view/LothalSkyNight"),d=t("./items/view/Garel"),p=t("./items/view/DeathStar"),f=t("fido/physics/particles/ParticleManager"),m=t("./particles/GlitterPuff"),g=t("./particles/Glowy"),v=p2.vec2.fromValues(0,1);s.DisplayObject.prototype.depthOffset=0;var y=function(t){this.view=new s.Container,this.innerContainer=new s.Container,this.activeItemsContainer=new s.Container,this.innerContainer.addChild(this.activeItemsContainer),this.view.addChild(this.innerContainer),this.camera=t,this.allItems=new o,this.updateItems=new o,this.groups={},this.count=0,this.itemsToRemove=[],this.bounds=null,this.boundsView=new s.Graphics,this.backgroundView=new n,this.dust=new a,this.lothalSky=new c,this.lothalSkyNight=new u,this.garel=new d,this.deathStar=new p,this.currentBg=this.lothalSky,this.view.addChildAt(this.currentBg,0),this.view.addChild(this.dust),this.flash=new h(1200,600),this.flash.hitArea=new s.Rectangle,this.view.addChild(this.flash),this.particleLayer=new f(this),this.particleLayer.registerParticle(m,"spark"),this.particleLayer.registerParticle(g,"glow")};y.constructor=y,y.prototype.setBackground=function(t){this.view.removeChild(this.currentBg),"world1"===t.id?this.currentBg=this.lothalSky:"world2"===t.id?this.currentBg=this.lothalSkyNight:"world3"===t.id?this.currentBg=this.garel:this.currentBg=this.deathStar,this.view.addChildAt(this.currentBg,0)},y.prototype.initP2=function(){this.collisionHash={},this.p2world=new p2.World({gravity:[0,100],broadphase:new p2.SAPBroadphase,islandSplit:!1}),this.p2world.setGlobalStiffness(1e5);for(var t in l)this.p2world.addContactMaterial(l[t]);this.p2world.solver.tolerance=.001,this.p2world.solver.iterations=10,this.p2world.on("beginContact",function(t){var e=t.bodyA._item,i=t.bodyB._item,s=e.UID,o=i.UID,r=null;if(r=s>o?(s<<12)+o:(o<<12)+s,e.passthrough&&i.groundCheck||i.passthrough&&e.groundCheck){var n=null,a=null;e.passthrough?(n=e,a=i):(n=i,a=e),a._body.type===p2.Body.DYNAMIC&&a._body.velocity[1]<0&&(this.collisionHash[r]=!0)}else e.groundCheck&&i.groundCheck&&(this.collisionHash[r]=!0);e.onCollideBegin&&e.onCollideBegin(i,t.contactEquations[0],t),i.onCollideBegin&&i.onCollideBegin(e,t.contactEquations[1],t)}.bind(this)),this.p2world.on("endContact",function(t){var e=t.bodyA._item,i=t.bodyB._item,s=e.UID,o=i.UID,r=null;r=s>o?(s<<12)+o:(o<<12)+s,this.collisionHash[r]&&(this.collisionHash[r]=null),e.onCollideEnd&&e.onCollideEnd(i,null,t),i.onCollideEnd&&i.onCollideEnd(e,null,t)}.bind(this)),this.p2world.on("preSolve",function(t){for(var e=0;e<t.contactEquations.length;e++){var i=t.contactEquations[e],s=i.bodyA._item,o=i.bodyB._item,r=s.UID,n=o.UID,a=null;if(a=r>n?(r<<12)+n:(n<<12)+r,o.groundCheck||s.groundCheck){if(!o.groundCheck||!s.groundCheck){var h=p2.vec2.dot(i.normalA,v);s.groundCheck&&h>.5&&(s.onGround=!0),o.groundCheck&&(h*=-1,h>.5&&(o.onGround=!0))}o.groundCheck&&s.groundCheck&&(i.enabled=!1)}this.collisionHash[a]&&(i.enabled=!1)}for(var e=0;e<t.frictionEquations.length;e++){var i=t.frictionEquations[e],s=i.bodyA._item,o=i.bodyB._item,r=s.UID,n=o.UID,a=null;a=r>n?(r<<12)+n:(r<<12)+n,this.collisionHash[a]&&(i.enabled=!1)}}.bind(this))},y.prototype.add=function(t){t.world=this,t.view&&this.activeItemsContainer.addChild(t.view),t._body&&(t._body._item=t,this.p2world.addBody(t._body)),this.allItems.add(t);for(var e=0;e<t.groups.length;e++){var i=t.groups[e],s=this.groups[i];s||(s=this.groups[i]=new o),s.add(t)}t.update&&this.updateItems.add(t),t.addedToWorld&&t.addedToWorld(this)},y.prototype.remove=function(t){this.itemsToRemove.push(t)},y.prototype.update=function(){var t=Math.round(r.game.deltaTime);t>2&&(t=2);for(var e=0;t>e;e++){this.removeItems(),this.particleLayer.update();for(var i=this.updateItems.children,s=0;s<i.length;s++)i[s].update();this.updateCamera(),this.p2world.step(.05)}this.currentBg.update()},y.prototype.updateCamera=function(){var t=this.camera.zoom;this.view.scale.set(t),this.view.x=this.camera.viewWidth/2-this.camera.viewWidth/2*t,this.view.y=this.camera.viewHeight/2-this.camera.viewHeight/2*t,this.innerContainer.x=-this.camera.x+this.camera.viewWidth/2,this.innerContainer.y=-this.camera.y+this.camera.viewHeight/2,this.dust.update(this.camera),this.backgroundView.update(this.camera);for(var e=this.updateItems.children.length-1;e>=0;e--){var i=this.updateItems.children[e];i.view}},y.prototype.removeItems=function(){for(var t=0;t<this.itemsToRemove.length;t++){var e=this.itemsToRemove[t];e.view&&this.activeItemsContainer.removeChild(e.view),e._body&&this.p2world.removeBody(e._body),e.update&&this.updateItems.remove(e),e.world=null,this.allItems.remove(e);for(var i=0;i<e.groups.length;i++){var s=e.groups[i];this.groups[s].remove(e)}e.removedFromWorld&&e.removedFromWorld(this)}this.itemsToRemove.length=0},y.prototype.clear=function(t){if(this.activeItemsContainer.removeChildren(),this.p2world)for(var e=this.p2world.bodies,i=e.length-1;i>=0;i--)this.p2world.removeBody(e[i]);this.initP2(),this.allItems.empty(),this.updateItems.empty(),this.groups={},this.itemsToRemove.length=0,this.activeItemsContainer.addChild(this.boundsView),this.collisionHash={}},y.prototype.setBounds=function(t){this.bounds=new s.Rectangle(0,0,1130,640),this.boundsView.x=t.x,this.boundsView.y=t.y,this.boundsView.scale.x=t.width/100,this.boundsView.scale.y=t.height/100},y.prototype.find=function(t,e){if(!this.groups[t])return null;for(var i=this.groups[t].children,s=0;s<i.length;s++)if(i[s].meta.name===e)return i[s]};var _=[];y.prototype.findAll=function(t,e){if(!this.groups[t])return null;var i=this.groups[t].children;_.length=0;for(var s=0;s<i.length;s++)i[s].meta.name===e&&_.push(i[s]);return _},i.exports=y}),define("com/rebels/game/items/TransitionParticles",["require","exports","module","PIXI","./Item"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=function(t,e){var i=new s.Container;o.call(this,t,e,i),this.particles=[],
this.poolParticles=[],this.point1=new s.Point,this.point2=new s.Point};r.prototype=Object.create(o.prototype),r.prototype.createParticles=function(t,e){this.point1=new s.Point(t.position.x,t.position.y-t.view.height/2),this.point2=new s.Point(e.position.x,e.position.y-e.view.height/2),this.isTransitioning=!0;for(var i=0;10>i;i++){var o=this.poolParticles.pop();o||(o=new s.Sprite.fromImage(ASSET_URL+"img/game/particles.png")),o.position.x=0,o.position.y=0,o.counter=100*Math.random(),o.scale.x=o.scale.y=.4*Math.random()+.05,o.pivot.x=.5,o.pivot.y=.5,o.alpha=1,o.rotation=Math.random()*Math.PI/180,o.speedR=.4*Math.random()-.2,this.particles.push(o),this.view.addChild(o)}},r.prototype.update=function(){if(this.isTransitioning){var t=Math.sqrt(Math.pow(this.point2.x-this.point1.x,2)-Math.pow(this.point2.y-this.point1.y,2)),e=Math.sqrt(Math.pow(this.view.position.x-this.point1.x,2)-Math.pow(this.view.position.y-this.point1.y,2))+2,i=e/t;0>i?i=0:i>1&&(i=1),this.amplitude=20*Math.sin(i*Math.PI)}for(var s=0;s<this.particles.length;s++){var o=this.particles[s];o.position.x=Math.cos(o.counter)*this.amplitude,o.position.y=Math.sin(Math.sin(3*o.counter)+3*o.counter)*this.amplitude,o.pivot.x+=.6*Math.sin(o.counter/2)*(this.amplitude/20),o.pivot.y-=.6*Math.sin(o.counter/2)*(this.amplitude/20),o.rotation+=.1*(this.amplitude/20),o.counter+=.02,o.alpha=1-i,0===o.alpha&&(o.alpha=0,this.view.removeChild(o),this.particles.splice(s,1),this.poolParticles.push(o),s--)}},r.prototype.reset=function(t){t.meta;this.particles=[],this.isTransitioning=!1,this.amplitude=0,this.view.x=t.x,this.view.y=t.y},i.exports=r}),define("fido/goals/Goals",["require","exports","module","signals","fido/loader/Cache","fido/system/LocalStorage"],function(t,e,i){var s=t("signals"),o=t("fido/loader/Cache"),r=t("fido/system/LocalStorage"),n=function(t){this.config=null,this.achievementUnlocked=new s,this.allAchievementsCollected=new s,this.allLevelsComplete=new s,this.onSave=new s,this.debug=!1,this.noSave=!1,this.totalAchievements=0,this.achievedInGroup=0,this.achievementList={},this.groups=[],this.groupHash={},this.totalGroups=0,this.currentGroup="",this.currentGroupIndex=0,this.active=!0,this.storage=new r(t),this.save=this.getSave()};n.prototype.validate=function(t){var e=t.goals,i=t.groups,s={};for(var o in i)for(var r=i[o],n=0;n<r.achievements.length;n++){var a=r.achievements[n];e[a]&&(s[a]||(s[a]=!0))}},n.prototype.saveLoaded=function(){this.achievementList&&(this.achievementList=this.merge(this.achievementList,this.save.medals))},n.prototype.merge=function(t,e){for(var i,s={},o=0,r=arguments.length;r>o;o++)for(i in arguments[o])arguments[o].hasOwnProperty(i)&&(s[i]=arguments[o][i]);return s},n.prototype.load=function(t,e){if(this.config=t||o.getJson("goals"),e)for(var i in this.config.goals){var s=this.config.goals[i];s.desc=e[s.desc],s.id=i}this.config||(t?this.config=t:(this.config={goals:{},groups:{level1:{desc:"Dummy empty object, must have the 'achievement' property and it must be an array",achievements:[]}}},this.noSave=!0)),this.validate(this.config);var r=Object.keys(this.config.groups);this.totalGroups=r.length,""===this.save.currentGroup||this.noSave?this.loadGroup(r[0]):(this.currentGroup=this.save.currentGroup,this.loadGroup(this.currentGroup))},n.prototype.loadNextGroup=function(){var t=this.getGroupIndex(this.currentGroup);if(-1!==t){if(t++,t>=this.totalGroups)return this.allLevelsComplete.dispatch(),this.active=!1,!1;var e=Object.keys(this.config.groups),i=e[t];return this.loadGroup(i),this.saveStatus(),this.currentGroupIndex=t-1,!0}this.active=!1},n.prototype.getGroupIndex=function(t){var e=Object.keys(this.config.groups);return e.indexOf(t)},n.prototype.getGroupByName=function(t){return this.groupHash[t]},n.prototype.loadGroup=function(t){this.currentGroup=t;for(var e=this.config.groups[t],i=0;i<e.achievements.length;i++){var s=e.achievements[i],o=this.config.goals[s];o.achieved=!1,this.debug,this.achievementList.hasOwnProperty(o.property)===!1&&(this.achievementList[o.property]=[]),o.completion=o.value/o.target*100,o.group=t,this.achievementList[o.property].push(o),this.totalAchievements++}this.reset(),this.achievementList=this.merge(this.achievementList,this.save.medals);var e=[];for(var r in this.achievementList)for(var n=this.achievementList[r],i=0;i<n.length;i++){var o=n[i];o.group===t&&e.push(o)}this.groups.push(e);var a=this.config.groups[t];this.groupHash[t]={desc:a.desc,achievements:e},this.debug},n.prototype.getLastAchievements=function(){return this.groups[this.groups.length-1]},n.prototype.increment=function(t,e){this.update(t,e,!0)},n.prototype.update=function(t,e,i){if(this.active){var s=!1;if(this.achievementList.hasOwnProperty(t))for(var o=this.achievementList[t],r=0;r<o.length;r++){var n=o[r];if(n.achieved===!1)switch(s=!0,i?n.value+=e:n.value=Math.max(n.value,e),n.type){case"=":n.completion=Math.floor(n.value/n.target*100),n.value>=n.target&&(n.completion=100,n.achieved=!0,this.receiveAchievement(n))}}s===!0&&this.isListComplete()&&(this.debug,this.allAchievementsCollected.dispatch())}},n.prototype.isListComplete=function(){for(var t in this.achievementList)if(this.achievementList.hasOwnProperty(t))for(var e=this.achievementList[t],i=0;i<e.length;i++){var s=e[i];if(s.achieved===!1)return!1}return!0},n.prototype.reset=function(){for(var t in this.achievementList)if(this.achievementList.hasOwnProperty(t))for(var e=this.achievementList[t],i=0;i<e.length;i++){var s=e[i];s.achieved!==!1||s.cumulative&&s.cumulative!==!1||(s.completion=0,s.value=0)}},n.prototype.receiveAchievement=function(t){this.debug,this.achievementUnlocked.dispatch(t),this.saveStatus()},n.prototype.goalsRemaining=function(){return this.achievementList.length-this.goalsCompleted()},n.prototype.getAll=function(){return JSON.parse(JSON.stringify(this.achievementList))},n.prototype.getAllGroups=function(){var t=this.config,e=[];for(var i in this.achievementList){var s=this.achievementList[i];e.push(s)}e=e.reduce(function(t,e){return t.concat(e)}),descs=e.reduce(function(t,e){return t[e.desc]=e,t},{});var o=[];for(var i in t.groups)for(var r=t.groups[i],n=0;n<r.achievements.length;n++){var a=r.achievements[n];if(t.goals.hasOwnProperty(a)){var h=t.goals[a];descs.hasOwnProperty(h.desc)&&(h.completion=descs[h.desc].completion||0,h.achieved=descs[h.desc].achieved||!1),o.push(h)}}return o},n.prototype.goalsCompleted=function(){var t=0;for(var e in this.achievementList)for(var i=this.achievementList[e],s=0;s<i.length;s++){var o=i[s];o.achieved===!0&&t++}return t},n.prototype.getSave=function(){var t=this.storage.getObject("save");return t?t:(t=new a,this.storage.storeObject("save",t),t)},n.prototype.saveStatus=function(){this.noSave||(this.debug,this.save.medals=this.achievementList,this.save.currentGroup=this.currentGroup,this.storage.storeObject("save",this.save),this.onSave.dispatch())},n.prototype.saveAndReset=function(){this.reset(),this.saveStatus()};var a=function(){this.medals={},this.currentGroup=""};i.exports=n}),define("com/rebels/game/PlayerTransition",["require","exports","module","./items/TransitionParticles","fido/system/Ticker","fido/goals/Goals"],function(t,e,i){var s=t("./items/TransitionParticles"),o=t("fido/system/Ticker"),r=t("fido/goals/Goals"),n=function(t){this.world=t};n.prototype.animate=function(t,e){o.instance.add(this.update,this),r.instance.increment("swapCharacters",1),this.transitionParticles=new s,this.world.add(this.transitionParticles),t&&(this.transitionParticles.view.position.x=t.view.position.x,this.transitionParticles.view.position.y=t.view.position.y-t.view.height/2,TweenLite.to(this.transitionParticles.view.position,.6,{x:e.position.x,y:e.position.y-e.view.height/2,ease:Circ.easeInOut,onComplete:function(){e.view.showBrightness(),e.view.fadeBrigthnessTo(3,.1),e.view.fadeBrigthnessTo(1,.5,.1),e.view.hideBrightness(.6),o.instance.remove(this.update,this),this.transitionParticles.isTransitioning=!1}.bind(this)}),this.transitionParticles.createParticles(t,e))},n.prototype.update=function(){this.transitionParticles.update()},i.exports=n}),define("com/rebels/game/items/active/ActiveItem",["require","exports","module","PIXI","fido/utils/Math2","fido/utils/Timer","signals"],function(t,e,i){var s=t("PIXI"),o=(t("fido/utils/Math2"),t("fido/utils/Timer")),r=t("signals"),n=function(t,e,i){this.item=null,this.icon=e||new s.Container,this.active=!1,this.id=null,this.passive=!1,i&&(this.timer=new o(i||10),this.timer.onComplete.add(this.onTimeComplete,this)),this.onComplete=new r};n.prototype.init=function(t){this.item=t,this.timer&&this.timer.start()},n.prototype.reset=function(){},n.prototype.update=function(){},n.prototype.activate=function(){this.active=!0},n.prototype.deactivate=function(){this.active=!1},n.prototype.finish=function(){this.timer&&this.timer.stop()},n.prototype.onTimeComplete=function(){this.onComplete.dispatch(this)},i.exports=n}),define("com/rebels/game/items/active/Jump",["require","exports","module","PIXI","./ActiveItem","fido/system/Ticker","signals","fido/goals/Goals","fido/sound/SoundBridge"],function(t,e,i){var s=t("PIXI"),o=t("./ActiveItem"),r=(t("fido/system/Ticker"),t("signals")),n=t("fido/goals/Goals"),a=t("fido/sound/SoundBridge"),h=function(t){o.call(this,t,s.Sprite.fromFrame("action.png")),this.highPower=t.config.jumpPower||180,this.down=0,this.onJump=new r,this.didJump=0,this.groundCache=!1,this.jumpCount=0};h.prototype=Object.create(o.prototype),h.prototype.updateJump=function(t){this.highPower=t},h.prototype.activate=function(){this.onJump.dispatch();var t=this.item;t.onMovePressed(),t.canMove&&t.canJump&&(this.jumpCount<10&&!this.isJumping&&(a.sfx.playGroup(t.config.sfx.jump),this.didJump=5,this.jumpCount=1e4,this.groundCache=t.onGround,t._body.velocity[1]+=-this.highPower,t._body.velocity[1]>this.highPower&&(t._body.velocity[1]=this.highPower),this.isJumping=!0,t.view.playAnimation("jump_up",!1),n.instance.increment("jumps",1)),this.active=!0,this.down=0)},h.prototype.update=function(){var t=this.item;this.groundCache!=t.onGround&&(this.groundCache=t.onGround,t.onGround?this.isJumping=!1:this.jumpCount=0),t.onGround?(this.jumpCount=0,this.didJump--):(this.jumpCount++,this.didJump>0&&t._body.velocity[1]>0&&(t.special||t.view.playAnimation("jump_down",!1)))},h.prototype.deactivate=function(){this.active=!1},i.exports=h}),define("com/rebels/game/items/components/Active",["require","exports","module","PIXI","fido/utils/Math2","signals"],function(t,e,i){var s=(t("PIXI"),t("fido/utils/Math2"),t("signals")),o=function(t){this.item=t,this.activeItems=[],this.passiveItems=[],this.defaultAction=null,this.onActiveItemAdded=new s,this.onActiveItemRemoved=new s};o.prototype.reset=function(){for(var t=0;t<this.activeItems.length;t++)this.activeItems[t]&&this.activeItems[t].reset();!this.activeItems[0]&&this.defaultAction&&this.addAction(this.defaultAction,0)},o.prototype.addAction=function(t,e){void 0===e&&(e=this.activeItems.length),this.activeItems[e]&&this.onActiveItemRemoved.dispatch(this.activeItems[e]),t.slot=e,this.activeItems[e]=t,t.init(this.item),t.onComplete.addOnce(this.onActionComplete,this),this.onActiveItemAdded.dispatch(t)},o.prototype.removeAction=function(t){this.activeItems[t.slot]=null,t.finish(),t.onComplete.remove(this.onActionComplete,this),this.onActiveItemRemoved.dispatch(t),0===t.slot&&this.defaultAction&&this.addAction(this.defaultAction,0)},o.prototype.runAction=function(t){this.activeItems[t]&&this.activeItems[t].activate()},o.prototype.stopAction=function(t){this.activeItems[t]&&this.activeItems[t].deactivate()},o.prototype.release=function(){for(var t=0;t<this.activeItems.length;t++)this.activeItems[t]&&this.activeItems[t].toggle&&!this.activeItems[t].passive&&this.activeItems[t].activate()},o.prototype.update=function(){for(var t=0;t<this.activeItems.length;t++)this.activeItems[t]&&this.activeItems[t].update()},o.prototype.onActionComplete=function(t){this.removeAction(t)},i.exports=o}),define("com/rebels/game/items/view/DustTrail",["require","exports","module","PIXI","fido/utils/Math2"],function(t,e,i){var s=t("PIXI"),o=t("fido/utils/Math2");DustTrail=function(t,e){this.stage=e,this.target=t,this.particals=[],this.particalPool=[],this.max=window.WEBGL?100:10,this.count=0},DustTrail.constructor=DustTrail,DustTrail.prototype.update=function(){var t=this.target._body.velocity,e=Math.abs(t[0]);if(0===this.target.state&&e>50&&(this.count++,this.count%2)){var i=this.particalPool.pop()||new ParticalFire;i.scaleSpeed=1.02;var s=-30;this.stage.addChild(i),i.position.x=this.target.position.x+s+20*Math.random(),i.position.y=this.target.position.y+2+5*Math.random(),i.speed.x=0,i.speed.y=.4*-(2*Math.random()),i.speed.x*=-1,i.speed.y*=1,i.alphay=2,i.rotation=Math.random()*Math.PI*2,i.targetScale=1.5*(.2+.5*Math.random()),i.scale.x=i.scale.y=0,i.position.x+=20,this.particals.push(i)}for(var r=0;r<this.particals.length;r++){var i=this.particals[r];i.alphay>1.5&&(i.scale.x=i.scale.y=o.map(i.alphay,2,1.5,0,i.targetScale)),i.scale.x=i.scale.y*=i.scaleSpeed,i.alphay*=.85,i.alpha=i.alphay>1?1:i.alphay,i.position.x+=2*i.speed.x,i.position.y+=2*i.speed.y,i.alpha<.01&&(this.stage.removeChild(i),this.particals.splice(r,1),this.particalPool.push(i),r--)}},ParticalFire=function(){s.Sprite.call(this,s.Texture.fromFrame("smoke1_b.png")),this.anchor.x=.5,this.anchor.y=.5,this.speed=new s.Point},ParticalFire.constructor=ParticalFire,ParticalFire.prototype=Object.create(s.Sprite.prototype),i.exports=DustTrail}),define("com/rebels/game/items/view/PlayerView",["require","exports","module","PIXI","./AnimationManager","fido/utils/FrameWait","fido/system/Ticker","./DustTrail","fido/system/Device"],function(t,e,i){var s=t("PIXI"),o=t("./AnimationManager"),r=t("fido/utils/FrameWait"),n=(t("fido/system/Ticker"),t("./DustTrail")),a=t("fido/system/Device"),h=function(t){s.Container.call(this),this.animationManager=new o,this.stopAnimateOnIdle=!1,this.animationManager.register("idle",{frames:t.config.view,loop:!0}),this.animationManager.play("idle"),this.updateSpine=!0,this.item=t,this.sprite=new s.Sprite,this.sprite.anchor.set(.5,1),this.targetScale=.66,this.sprite.scale.set(this.targetScale),this.addChild(this.sprite),this.count=0,this.walk=t.config.walk;var e=new s.Container;this.animation=new s.spine.Spine(s.loadedResources[t.config.spineDataId].spineData),e.addChild(this.animation),this.animation.state.setAnimationByName(0,"stand",!0),this.animation.stateData.defaultMix=.1,this.animation.stateData.setMixByName("jog","jump_up",.3),this.animation.stateData.setMixByName("jump_down","jog",.1),this.animation.stateData.setMixByName("jump_down","stand",.1),this.animation.autoUpdate=!1,e.scale.set(.66),e.y=t.config.visualOffset,this.sprite.y=t.config.visualOffsetSprite,this.addChild(e),this.hitArea=new s.Rectangle(-50,-100,100,100),this.animation.skeleton.setSkinByName(t.config.defaultSkin||"l"),this.brightness=1,s.isWebGL&&(this.colorMatrix=new s.filters.ColorMatrixFilter,this.colorMatrix.brightness(this.brightness)),s.isWebGL&&(this.dustTrail=new n(t))};h.prototype=Object.create(s.Container.prototype),h.prototype.fadeBrigthnessTo=function(t,e,i){s.isWebGL&&!a.instance.iOS&&(this.filters=[this.colorMatrix],TweenLite.to(this,e||.2,{brightness:t||1,delay:i||0,onUpdate:function(){this.colorMatrix.brightness(this.brightness)}.bind(this)}))},h.prototype.reset=function(){this.updateSpine=!0,this.playAnimation("stand",!0,!0)},h.prototype.shine=function(t,e){s.isWebGL&&!a.instance.iOS&&TweenLite.to(this,.2,{brightness:3})},h.prototype.showBrightness=function(){s.isWebGL&&!a.instance.iOS&&(this.colorMatrix.brightness(this.brightness),this.filters=[this.colorMatrix])},h.prototype.hideBrightness=function(t){s.isWebGL&&!a.instance.iOS&&TweenLite.delayedCall(t||.01,function(){this.filters=null}.bind(this))},h.prototype.unshine=function(t,e){s.isWebGL&&!a.instance.iOS&&TweenLite.to(this,.2,{brightness:1})},h.prototype.playAnimation=function(t,e,i){(this.currentId!==t||i)&&(this.currentId=t,this.animationManager.animations[t]?(this.animation.visible=!1,this.sprite.visible=!0,this.animationManager.play(t)):(this.sprite.scale.set(this.targetScale),this.animation.state.setAnimationByName(0,t,e),"stand"===t?(this.animationManager.play("idle"),r.wait(function(){"stand"===this.currentId&!this.item.special&&(this.animation.visible=!1,this.sprite.visible=!0)}.bind(this),10)):(this.animation.visible=!0,this.sprite.visible=!1)))},h.prototype.play=function(t,e){},h.prototype.update=function(){s.isWebGL&&this.dustTrail.update(),this.updateSpine&&this.animation.visible&&this.animation.update(1/60*1.4),this.stopAnimateOnIdle?this.sprite._texture=this.animationManager.currentAnimation.frames[0]:(this.animationManager.update(),this.sprite._texture=this.animationManager.texture),this.item.facingLeft?(this.animation.scale.x=-1,this.sprite.scale.x=-this.targetScale):(this.animation.scale.x=1,this.sprite.scale.x=this.targetScale)},i.exports=h}),define("com/rebels/game/items/Player",["require","exports","module","PIXI","./Item","../collision/Crash","signals","./active/Jump","fido/sound/SoundBridge","./components/Active","./view/PlayerView","../P2Materials","com/rebels/game/GameConfig","fido/utils/Utils","com/rebels/app/shop/ShopSystem","fido/utils/FrameWait"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=t("../collision/Crash"),n=t("signals"),a=t("./active/Jump"),h=t("fido/sound/SoundBridge"),l=t("./components/Active"),c=t("./view/PlayerView"),u=t("../P2Materials").materials,d=t("com/rebels/game/GameConfig"),p=t("fido/utils/Utils"),f=(t("com/rebels/app/shop/ShopSystem"),t("fido/utils/FrameWait"),function(t){this.config=t,this.levels=d.levels,this.helmetMode=!1,this.helmetHasBeenAdded=!1,this.indexToAddHelmet=0;var e=new r.CrashBody(t.body.clone()),i=new c(this);this.groundCheck=!0;var h=e.getDebugView();h.alpha=.2,this.debug=h,o.call(this,0,0,i,e),this.counter=0,this.highlightAnimation,s.isWebGL?(this.glow=new s.Sprite,this.glow.anchor.set(.5),this.glow.blendMode=s.isWebGL?s.BLEND_MODES.ADD:0,this.highlightTextures=p.getTexturesFromFramesWithPrefix("highlight_icon_ezra_%%.png",4,1,!0),this.highlightAnimation=new s.extras.MovieClip(this.highlightTextures),this.highlightAnimation.loop=!0,this.highlightAnimation.animationSpeed=.2,this.highlightAnimation.anchor.x=.5,this.highlightAnimation.anchor.y=.5,this.highlightAnimation.addChild(this.glow)):(this.highlightAnimation=new s.Sprite.fromFrame("highlight_icon_ezra_1.png"),this.highlightAnimation.anchor.x=.5,this.highlightAnimation.anchor.y=.5),this.highlightAnimation.scale.x=this.highlightAnimation.scale.y=0,this.highlightAnimation.visible=!1,this.view.addChild(this.highlightAnimation),this.weight=3,this._body=new p2.Body({mass:t.mass||3,position:[200,150],angle:0,fixedRotation:!0}),this.shake=.5,this._body.damping=.5,boxShape=new p2.Rectangle(t.body.width,t.body.height),boxShape.material=u.player,boxShape._main=!0,this._body.addShape(boxShape,[0,-t.body.height/2]),this.active=new l(this),this.onGround=!1,this._onGroundCache=!0,this.type=2,this.collideWithSelf=!1,this.keys=[],this.cellCount=0,this.groups.push("player"),this._jumpAction=new a(this),this._jumpAction.init(this),this.active.defaultAction=this._jumpAction,this.state=f.STANDING,this.facingLeft=!1,this.isWalking=!0,this.groundCount=0,this.platform=null,this.hidden=!1,this.canMove=!0,this.canJump=!0,this.onSleep=new n,this.onWake=new n,this.onWalk=new n,this.onCollisonBegin=new n,this.onCollisonEnd=new n,this.onExit=new n,this.onExitLeave=new n,i.interactive=!0,i.buttonMode=!0,i.mousedown=i.touchstart=function(){this.world.game["switch"](this)}.bind(this)});Object.assign(f.prototype,o.prototype),f.prototype.reset=function(t){this.body.acceleration.x=0,this._body.position[0]=t.x,this._body.position[1]=t.y,this._body.velocity[0]=0,this._body.velocity[1]=0,this.keys=[],this.cellCount=0,this.body.maxSpeed=6*.7,this.active.reset(),this.body.flip=1,this.body.reset(),this.special=!1,this.canMove=!0,this.canJump=!0,this.body.canCollide=!0,this.view.alpha=1,this.view.pivot.x=0,this.setState(f.STANDING),s.isWebGL&&this.highlightAnimation.gotoAndPlay(0),this.highlightAnimation.scale.x=this.highlightAnimation.scale.y=0,this.highlightAnimation.visible=!1,this.view.reset()},f.prototype.unshine=function(){this.view.unshine()},f.prototype.shine=function(){this.view.shine()},f.prototype.sleep=function(){s.isWebGL&&TweenLite.killTweensOf(this.highlightAnimation.scale),this.highlightAnimation.scale.x=this.highlightAnimation.scale.y=0,this.canMove=!1,this.state!==f.FALLING&&this.state!==f.JUMPING&&this.setState(f.STANDING),this.body.acceleration.x=0,this.body.acceleration.y=0,this.onSleep.dispatch()},f.prototype.walkOff=function(){this.setState(f.WALKING_OFF),this.walkingOff=!0,this.special=!0},f.prototype.wake=function(t){this.highlightAnimation.visible=!0,s.isWebGL?TweenLite.to(this.highlightAnimation.scale,.5,{x:.8,y:.8,ease:Back.easeOut.config(2)}):this.highlightAnimation.scale.x=this.highlightAnimation.scale.y=.8,this.canMove=!0,this.setState(f.STANDING),this.onWake.dispatch()},f.prototype.update=function(){this.view.animation.children[this.indexToAddHelmet].children[0]&&!this.helmetHasBeenAdded&&this.helmetMode?(this.view.animation.children[this.indexToAddHelmet].children[0].addChild(this.helmet),this.view.sprite.addChild(this.helmetStand),this.helmetHasBeenAdded=!0,this.stopAnimateOnIdle===!0&&(this.view.stopAnimateOnIdle=!0)):this.view.animation.children[this.indexToAddHelmet].children[0]&&this.helmetHasBeenAdded&&!this.helmetMode&&(this.view.animation.children[this.indexToAddHelmet].children[0].removeChild(this.helmet),this.view.sprite.removeChild(this.helmetStand),this.helmetHasBeenAdded=!1),this.highlightAnimation.visible&&(this.counter++,this.highlightAnimation.position.y+=.4*Math.cos(this.counter/10));var t=80*this.config.speed;this.canMove||(this._body.velocity[0]*=.9,this.body.acceleration.x=0),this.onGround?this._body.velocity[0]+=10*this.body.acceleration.x:(this._body.velocity[0]+=5*this.body.acceleration.x,this._body.velocity[1]+=1.5*this.weight),this._body.velocity[0]>t&&(this._body.velocity[0]=t),this._body.velocity[0]<-t&&(this._body.velocity[0]=-t),this.view.position.x=this._body.position[0],this.view.position.y=this._body.position[1],this.view.update(),this._onGroundCache!=this.onGround&&(this.groundCount++,this.groundCount>0&&(this._onGroundCache=this.onGround,this.groundCount=0,this.onGround&&(this.special||(this.state===f.WALKING?this.setState(0):this.setState(1))))),this.state===f.WALKING_OFF&&(this.view.pivot.x-=3,this.facingLeft=!1),this.active.update(),this.onGround=!1,this._body.position[1]>770&&(h.sfx.playGroup("fail"),this.KO()),this.state!==f.WALKING||this.soundIsPlaying||this.special?(this.state!==f.WALKING||this.special)&&(this.soundIsPlaying=!1,h.sfx.stop(this.sound)):(this.soundIsPlaying=!0,h.sfx.play(this.sound))},f.prototype.moveLeft=function(t){if(this.canMove){this.onWalk.dispatch();var e=this.body;e.velocity.x>0&&(e.velocity.x*=.95),this.onGround?this.setState(f.WALKING):this.setState(f.JUMPING),this.facingLeft=!0,e.acceleration.x=-1.2*t}},f.prototype.moveRight=function(t){if(this.canMove){this.helmetStand,this.onWalk.dispatch();var e=this.body;this.isWalking=!0,e.velocity.x<0&&(e.velocity.x*=.95),this.onGround?this.setState(f.WALKING):this.setState(f.JUMPING),this.facingLeft=!1,e.acceleration.x=1.2*t}},f.prototype.arriveAtExit=function(){this.onExit.dispatch(this)},f.prototype.leaveExit=function(){this.onExitLeave.dispatch(this)},f.prototype.stop=function(){var t=this.body;this.onGround?(this._body.velocity[0]*=.2,t.acceleration.x=0,this.state===f.WALKING&&this.setState(f.STANDING)):(this._body.velocity[0]*=.99,t.velocity.x*=.8,this.setState(f.JUMPING)),this._body.velocity[0]*=.7},f.prototype.setState=function(t){if(!this.special){if(null===t)t=this.state;else if(this.state===t)return;this.state=t,t===f.WALKING?this.view.playAnimation("jog",!0):t===f.STANDING?this.view.playAnimation("stand",!0):t===f.JUMPING||t===f.WALKING_OFF&&this.view.playAnimation("jog",!0)}},f.prototype.addedToWorld=function(){s.isWebGL&&(this.view.dustTrail.stage=this.view.parent)},f.prototype.jump=function(){this.activate()},f.prototype.KO=function(){this.world.game.deathType="hole",this.world.game.gameover()},f.prototype.pickup=function(t){"cell"===t.pickupType&&this.world.game.cellManager.pickupCell()},f.prototype.onMovePressed=function(){this.active.release()},f.prototype.onCollideBegin=function(t,e,i){this._body.velocity[1]>120&&this.world.camera.shake(Math.PI,this.shake),this.onCollisonBegin.dispatch(t)},f.prototype.onCollideEnd=function(t,e,i){this.onCollisonEnd.dispatch(t)},f.WALKING=0,f.STANDING=1,f.JUMPING=2,f.FALLING=3,f.HIDING=4,f.SPECIAL=5,f.WALKING_OFF=6,i.exports=f}),define("fido/physics/CartoonSquish",["require","exports","module"],function(t,e,i){var s=function(t){this.item=t,this.tick=0,this.timeScale=1};s.prototype.update=function(){this.tick+=.12*this.timeScale,this.item.rotation=.1*Math.sin(this.tick)},s.prototype.reset=function(){},i.exports=s}),define("com/rebels/game/items/Pickup",["require","exports","module","PIXI","fido/sound/SoundBridge","./Item","../collision/Crash","fido/physics/CartoonSquish","fido/utils/Utils","fido/goals/Goals"],function(t,e,i){var s=t("PIXI"),o=t("fido/sound/SoundBridge"),r=t("./Item"),n=(t("../collision/Crash"),t("fido/physics/CartoonSquish"),t("fido/utils/Utils"),null),a=t("fido/goals/Goals"),h=function(t,e,i){if(!n){n=[];for(var o=1;28>o;o++)n.push(s.Texture.fromFrame("rebels_phoenix_"+o+".png"));n.push(s.Texture.fromFrame("rebels_phoenix_28.png"))}this.sprite=new s.Sprite,this.sprite.anchor.set(.5);var a=new s.Container;a.addChild(this.sprite),a.hitArea=new s.Rectangle,r.call(this,100,100,a,null),this._body=new p2.Body({mass:.1,position:[0,0],angle:0,type:p2.Body.KINEMATIC,fixedRotation:!0}),boxShape=new p2.Rectangle(32,32),boxShape.sensor=!0,this._body.addShape(boxShape),this.pickupType=null,this.groups=["pickup"],this.ignoreLaser=!0,this.count=100*Math.random(),this.hoverCount=100*Math.random(),this.maxY=6,this.animating=!1};h.prototype=Object.create(r.prototype),h.prototype.reset=function(t){this.view.position.x=t.x,this.view.position.y=t.y,this._body.position[0]=t.x,this._body.position[1]=t.y,this.sprite.position.y=0,this.sprite.alpha=1,this.pickupType=t.meta.pickupType,this.animating=!1},h.prototype.update=function(){this.count+=.3,this.hoverCount+=.05,this.sprite.texture=n[(0|this.count)%n.length],this.animating},h.prototype.vanish=function(){this.animating=!0,this.world.particleLayer.add(this._body.position[0],this._body.position[1],"glow"),TweenLite.to(this.sprite,.7,{alpha:0,delay:.1,onComplete:function(){this.destroy(),this.animating=!1}.bind(this)}),TweenLite.to(this.sprite,.9,{y:-75,ease:Expo.easeOutIn})},h.prototype.onCollideBegin=function(t,e,i){this.animating||(i.shapeA._main||i.shapeB._main)&&2===t.type&&(t.pickup(this),a.instance.increment("symbols",1),this.vanish(),o.sfx.play("coin_collect_noise"))};i.exports=h}),define("com/rebels/game/items/Debris",["require","exports","module","PIXI","./Item"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=(new s.Graphics).beginFill(13421772).drawCircle(0,0,10).generateTexture(),n=function(t,e){var i=new s.Sprite(r);i.anchor.set(.5),o.call(this,t,e,i),this._body=new p2.Body({mass:1,position:[0,0],angle:0,type:p2.Body.DYNAMIC}),this.live=0,this._body.addShape(new p2.Particle)};n.prototype=Object.create(o.prototype),n.prototype.update=function(){this.view.position.x=this._body.position[0],this.view.position.y=this._body.position[1],this.view.rotation=this._body.angle,this.live--,this.live<0?this.destroy():this.live<20&&(this.view.alpha=this.live/20)};var a=0;n.prototype.reset=function(t){this.view.texture=s.Texture.fromFrame("door_debris_0"+(a++%5+1)+".png"),this.view.alpha=1,this.live=100,this.view.scale.set(.7+.3*Math.random())},i.exports=n}),define("com/rebels/game/items/Disturbance",["require","exports","module","PIXI","./Item"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=function(t,e){var i=new s.Sprite;o.call(this,t,e,i),s.isWebGL&&(this.displacementSprite=new s.Sprite.fromImage(ASSET_URL+"img/game/displace_explosion_01.jpg"),this.displacementSprite.scale.set(0),this.displacementSprite.anchor.x=this.displacementSprite.anchor.y=.5,this.displacementSprite.position.x=568,this.displacementSprite.position.y=320,this.displacementFilter=new s.filters.DisplacementFilter(this.displacementSprite),this.displacementFilter.scale.x=20,this.displacementFilter.scale.y=20)};r.prototype=Object.create(o.prototype),r.prototype.disturb=function(t,e){s.isWebGL&&(this.world.view.filters=[this.displacementFilter],this.displacementSprite.position.x=t,this.displacementSprite.position.y=e,TweenLite.to(this.displacementSprite.scale,.5,{x:3,y:3,onComplete:function(){this.displacementSprite.scale.x=0,this.displacementSprite.scale.y=0,this.world.view.filters=null}.bind(this)}),TweenLite.to(this.displacementSprite,.5,{rotation:"+="+20*Math.PI/180}))},r.prototype.addedToWorld=function(t){this.displacementSprite&&this.world.view.addChild(this.displacementSprite)},r.prototype.reset=function(t){t.meta;this.view.x=t.x,this.view.y=t.y},i.exports=r}),define("com/rebels/game/items/Explosion",["require","exports","module","PIXI","./Item","fido/game/GameObjectPool","../collision/Crash","./Debris","./Disturbance","fido/sound/SoundBridge"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=(t("fido/game/GameObjectPool"),t("../collision/Crash"),t("./Debris"),t("./Disturbance")),n=t("fido/sound/SoundBridge"),a=function(t,e,i,n){var i=i||(new s.Graphics).beginFill(16711680).drawCircle(0,0,50),n=n||new s.Container;i.addChild(n),o.call(this,t,e,i,null),this._body=new p2.Body({mass:1e-4,type:p2.Body.KINIMATIC,position:[100,100],angle:0}),this._body.gravityScale=0,this.view2=n,circleShape=new p2.Circle({radius:100}),circleShape.sensor=!0,this.type=66,this._body.addShape(circleShape),this.groups=["Explosions"],this.disturbance=new r,this.ignoreLaser=!0,this.life=0};a.prototype=Object.create(o.prototype),a.prototype.update=function(){this.position.x=this._body.position[0],this.position.y=this._body.position[1],this.view.rotation=this._body.angle,this.life++,this.life>100&&this.destroy()},a.prototype.reset=function(t){this._body.position[0]=t.x,this._body.position[1]=t.y,this.life=0,n.sfx.play("sabgrenexplode")},a.prototype.addedToWorld=function(t){this.world.camera.shake(),this.world.flash.flash(),this.world.add(this.disturbance),this.disturbance.disturb(this._body.position[0],this._body.position[1])},i.exports=a}),define("com/rebels/game/items/ExplosionLevel1",["require","exports","module","./Explosion","fido/utils/Utils"],function(t,e,i){var s=t("./Explosion"),o=t("fido/utils/Utils"),r=function(t,e){var i=new PIXI.Container;s.call(this,t,e,i),this.type=67;var r=o.getTexturesFromFramesWithPrefix("explosion_000%%.png",11,0);this.explosion=new PIXI.extras.MovieClip(r),this.explosion.loop=!1,this.explosion.animationSpeed=.8,this.explosion.anchor.x=.5,this.explosion.anchor.y=.5,this.explosion.onComplete=this.hideExplosion.bind(this),this.explosion.rotation=Math.random()*Math.PI,this.view.addChild(this.explosion)};r.prototype=Object.create(s.prototype),r.prototype.hideExplosion=function(){this.explosion.alpha=0,this.explosion.visible=!1},r.prototype.reset=function(t){s.prototype.reset.call(this,t),this.explosion.alpha=1,this.explosion.visible=!0,this.explosion.gotoAndPlay(0)},i.exports=r}),define("com/rebels/game/items/ExplosionLevel2",["require","exports","module","./Explosion","fido/game/GameObjectPool","com/rebels/game/items/ExplosionLevel1","fido/utils/Utils"],function(t,e,i){var s=t("./Explosion"),o=t("fido/game/GameObjectPool"),r=t("com/rebels/game/items/ExplosionLevel1"),n=(t("fido/utils/Utils"),function(t,e){var i=new PIXI.Container;s.call(this,t,e,i),this.pool=[],this.smokes=[]});n.prototype=Object.create(s.prototype),n.prototype.smoke=function(t,e){for(var i=e?3:5,s=0;i>s;s++){var o=this.pool.length>0?this.pool.pop():new PIXI.Sprite.fromFrame("smoke1_b.png");o.hitArea=new PIXI.Rectangle(0,0,1,1),
e?o.speed=new PIXI.Point(Math.cos(-Math.PI*s/i)/8,Math.sin(-Math.PI*s/i)/10.4):o.speed=new PIXI.Point(Math.cos(-Math.PI*s/i),Math.sin(-Math.PI*s/i)/1.3),o.alpha=.3*Math.random()+.69,o.mustDisappear=!1,o.scale.x=o.scale.y=.5,o.anchor.x=o.anchor.y=.5,o.blendMode=t&&PIXI.isWebGL?PIXI.BLEND_MODES.ADD:0,o.position.x=this._body.position[0],o.position.y=this._body.position[1],o.speedR=o.speed.x>0?.02*Math.random()-.01:.02*-Math.random()-.01,o.life=Math.random()*(e?80:40)+80,this.view.addChild(o),this.smokes.push(o),TweenLite.to(o.scale,.6,{x:2.5,y:2.5,ease:Expo.easeOut,onComplete:function(t){t.mustDisappear=!0},onCompleteParams:[o]})}},n.prototype.addedToWorld=function(t){s.prototype.addedToWorld.call(this,t);var e=o.getObject(r);e.reset({x:this._body.position[0],y:this._body.position[1]}),this.world.add(e),this.smoke(!1,!1),this.smoke(!1,!0),TweenLite.delayedCall(.8,this.smoke.bind(this),[!0,!1])},n.prototype.reset=function(t){s.prototype.reset.call(this,t)},n.prototype.update=function(){for(var t=0;t<this.smokes.length;t++){var e=this.smokes[t];e.position.x+=e.speed.x,e.position.y+=e.speed.y,e.rotation+=e.speedR,e.speedR*=.99,Math.abs(e.speedR)<=.004&&(e.speedR=e.speedR<0?-.004:.004),e.speed.x*=.99,e.life<=40?e.speed.y*=1.02:e.speed.y*=.99,e.mustDisappear&&(e.life<=0?(e.alpha*=.98,e.alpha<=.008&&(this.pool.push(e),this.smokes.splice(t,1),this.view.removeChild(e))):e.life--)}},i.exports=n}),function(t,e){if("function"==typeof define&&define.amd)define("libs/randomColor",[],e);else if("object"==typeof exports){var i=e();"object"==typeof module&&module&&module.exports&&(exports=module.exports=i),exports.randomColor=i}else t.randomColor=e()}(this,function(){function t(t){var e=r(t.hue),i=h(e);return 0>i&&(i=360+i),i}function e(t,e){if("random"===e.luminosity)return h([0,100]);if("monochrome"===e.hue)return 0;var i=n(t),s=i[0],o=i[1];switch(e.luminosity){case"bright":s=55;break;case"dark":s=o-10;break;case"light":o=55}return h([s,o])}function i(t,e,i){var s=o(t,e),r=100;switch(i.luminosity){case"dark":r=s+20;break;case"light":s=(r+s)/2;break;case"random":s=0,r=100}return h([s,r])}function s(t,e){switch(e.format){case"hsvArray":return t;case"hslArray":return f(t);case"hsl":var i=f(t);return"hsl("+i[0]+", "+i[1]+"%, "+i[2]+"%)";case"hsla":var s=f(t);return"hsla("+s[0]+", "+s[1]+"%, "+s[2]+"%, "+Math.random()+")";case"rgbArray":return p(t);case"rgb":var o=p(t);return"rgb("+o.join(", ")+")";case"rgba":var r=p(t);return"rgba("+r.join(", ")+", "+Math.random()+")";case"hex":var r=l(t);return"rgba("+r.join(", ")+", "+Math.random()+")";default:return c(t)}}function o(t,e){for(var i=a(t).lowerBounds,s=0;s<i.length-1;s++){var o=i[s][0],r=i[s][1],n=i[s+1][0],h=i[s+1][1];if(e>=o&&n>=e){var l=(h-r)/(n-o),c=r-l*o;return l*e+c}}return 0}function r(t){if("number"==typeof parseInt(t)){var e=parseInt(t);if(360>e&&e>0)return[e,e]}if("string"==typeof t&&g[t]){var i=g[t];if(i.hueRange)return i.hueRange}return[0,360]}function n(t){return a(t).saturationRange}function a(t){t>=334&&360>=t&&(t-=360);for(var e in g){var i=g[e];if(i.hueRange&&t>=i.hueRange[0]&&t<=i.hueRange[1])return g[e]}return"Color not found"}function h(t){if(null==m)return Math.floor(t[0]+Math.random()*(t[1]+1-t[0]));var e=t[1]||1,i=t[0]||0;m=(9301*m+49297)%233280;var s=m/233280;return Math.floor(i+s*(e-i))}function l(t){function e(t){var e=t.toString(16);return 1==e.length?"0"+e:e}var i=p(t),s="#"+e(i[0])+e(i[1])+e(i[2]);return s}function c(t){function e(t){var e=t.toString(16);return 1==e.length?"0"+e:e}var i=p(t),s="0x"+e(i[0])+e(i[1])+e(i[2]);return s}function u(t,e,i){var s=i[0][0],o=i[i.length-1][0],r=i[i.length-1][1],n=i[0][1];g[t]={hueRange:e,lowerBounds:i,saturationRange:[s,o],brightnessRange:[r,n]}}function d(){u("monochrome",null,[[0,0],[100,0]]),u("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),u("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),u("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),u("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),u("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),u("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),u("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function p(t){var e=t[0];0===e&&(e=1),360===e&&(e=359),e/=360;var i=t[1]/100,s=t[2]/100,o=Math.floor(6*e),r=6*e-o,n=s*(1-i),a=s*(1-r*i),h=s*(1-(1-r)*i),l=256,c=256,u=256;switch(o){case 0:l=s,c=h,u=n;break;case 1:l=a,c=s,u=n;break;case 2:l=n,c=s,u=h;break;case 3:l=n,c=a,u=s;break;case 4:l=h,c=n,u=s;break;case 5:l=s,c=n,u=a}var d=[Math.floor(255*l),Math.floor(255*c),Math.floor(255*u)];return d}function f(t){var e=t[0],i=t[1]/100,s=t[2]/100,o=(2-i)*s;return[e,Math.round(i*s/(1>o?o:2-o)*1e4)/100,o/2*100]}var m=null,g={};d();var v=function(o){o=o||{},o.seed&&!m&&(m=o.seed);var r,n,a;if(null!=o.count){var h=o.count,l=[];for(o.count=null;h>l.length;)l.push(v(o));return o.count=h,o.seed&&(m=o.seed),l}return r=t(o),n=e(r,o),a=i(r,n,o),s([r,n,a],o)};return v}),define("com/rebels/game/items/ExplosionLevel3",["require","exports","module","./Explosion","fido/game/GameObjectPool","com/rebels/game/items/ExplosionLevel1","libs/randomColor","fido/utils/Utils"],function(t,e,i){var s=t("./Explosion"),o=t("fido/game/GameObjectPool"),r=t("com/rebels/game/items/ExplosionLevel1"),n=t("libs/randomColor"),a=(t("fido/utils/Utils"),function(t,e){var i=new PIXI.Container;s.call(this,t,e,i),this.pool=[],this.smokes=[],this.colors=["red","orange","blue","pink","green","purple","yellow"],this.color=""});a.prototype=Object.create(s.prototype),a.prototype.smoke=function(t,e){for(var i=n({hue:this.color,count:6}),s=e?3:5,o=0;s>o;o++){var r=this.pool.length>0?this.pool.pop():new PIXI.Sprite.fromFrame("smoke1_b.png");r.hitArea=new PIXI.Rectangle(0,0,1,1),e?r.speed=new PIXI.Point(Math.cos(-Math.PI*o/s)/8,Math.sin(-Math.PI*o/s)/10.4):r.speed=new PIXI.Point(Math.cos(-Math.PI*o/s),Math.sin(-Math.PI*o/s)/1.3),r.alpha=.3*Math.random()+.69,r.mustDisappear=!1,r.scale.x=r.scale.y=.5,r.anchor.x=r.anchor.y=.5,r.tint=i[Math.floor(Math.random()*i.length)],r.blendMode=t&&PIXI.isWebGL?PIXI.BLEND_MODES.ADD:0,r.position.x=this._body.position[0],r.position.y=this._body.position[1],r.speedR=r.speed.x>0?.02*Math.random()-.01:.02*-Math.random()-.01,r.life=Math.random()*(e?40:20)+100,this.view.addChild(r),this.smokes.push(r),TweenLite.to(r.scale,.6,{x:2.5,y:2.5,ease:Expo.easeOut,onComplete:function(t){t.mustDisappear=!0},onCompleteParams:[r]})}},a.prototype.addedToWorld=function(t){s.prototype.addedToWorld.call(this,t),this.color=this.colors[Math.floor(Math.random()*this.colors.length)];var e=o.getObject(r);e.reset({x:this._body.position[0],y:this._body.position[1]}),this.world.add(e),this.smoke(!1,!1),this.smoke(!1,!0),TweenLite.delayedCall(.2,this.smoke.bind(this),[!0,!1])},a.prototype.reset=function(t){s.prototype.reset.call(this,t)},a.prototype.update=function(){for(var t=0;t<this.smokes.length;t++){var e=this.smokes[t];e.position.x+=e.speed.x,e.position.y+=e.speed.y,e.rotation+=e.speedR,e.speedR*=.99,Math.abs(e.speedR)<=.004&&(e.speedR=e.speedR<0?-.004:.004),e.speed.x*=.99,e.life<=40?e.speed.y*=1.01:e.speed.y*=.99,e.mustDisappear&&(e.life<=0?(e.alpha*=.985,e.alpha<=.008&&(this.pool.push(e),this.smokes.splice(t,1),this.view.removeChild(e))):e.life--)}},i.exports=a}),define("com/rebels/game/items/components/Explodable",["require","exports","module","PIXI","signals","fido/utils/Math2","../Pickup","fido/game/GameObjectPool","fido/system/Ticker","fido/utils/Timer","com/rebels/game/GameConfig","../ExplosionLevel1","../ExplosionLevel2","../ExplosionLevel3","../Debris","fido/goals/Goals"],function(t,e,i){var s=t("PIXI"),o=t("signals"),r=(t("fido/utils/Math2"),t("../Pickup"),t("fido/game/GameObjectPool")),n=(t("fido/system/Ticker"),t("fido/utils/Timer")),a=(t("com/rebels/game/GameConfig"),t("../ExplosionLevel1")),h=t("../ExplosionLevel2"),l=t("../ExplosionLevel3"),c=t("../Debris"),u=(t("fido/goals/Goals"),function(t){this.item=t,this.onExplode=new o,this.active=!0,this.debrisCount=s.isWebGL?20:5,this.range=100,this.power=5,this.isExploding=!1,this.fuse=.2,this.timer=new n,this.timer.onComplete.add(this.onTimerComplete,this),this.explosion=a});u.prototype.setExplosion=function(t){0===t?this.explosion=a:1===t?this.explosion=h:2===t&&(this.explosion=l)},u.prototype.activate=function(){},u.prototype.explode=function(t){this.isExploding||(this.onExplode.dispatch(),this.isExploding=!0,this.timer.setDuration(this.fuse),this.timer.start())},u.prototype.onTimerComplete=function(){var t=this.item;if(t.world){if(t.world.groups.blocks)for(var e=t.world.groups.blocks.children,i=e.length-1;i>=0;i--){var s=e[i];if(s!=t){var o=s._body.position,n=t._body.position,a=o[0]-n[0],h=o[1]-n[1],l=Math.sqrt(a*a+h*h),c=a/l,u=h/l,d=this.range-l;0>d&&(d=0),120>l&&s.explode&&s.explode.active&&s.explode.explode(),s._body.type!=window.p2.Body.STATIC&&(s._body.velocity[0]+=c*d*this.power,s._body.velocity[1]+=u*d*this.power-10)}}this.addDebris();var p=r.getObject(this.explosion);p.reset({x:t._body.position[0],y:t._body.position[1]}),t.world.add(p),t.destroy()}},u.prototype.addDebris=function(){for(var t=this.item,e=t.view.width,i=t.view.height,s=0;s<this.debrisCount;s++){var o=r.getObject(c),n=i/this.debrisCount*s;o._body.position[0]=t._body.position[0]+Math.random()*e-e/2,o._body.position[1]=t._body.position[1]+n-i/2,o._body.velocity[0]=100*Math.random()-50,o._body.velocity[1]=-100*Math.random(),o._body.angularVelocity=Math.random(),o.reset(),t.world.add(o)}},u.prototype.reset=function(){this.isExploding=!1,this.fuse=.2,this.timer.stop()},i.exports=u}),define("com/rebels/game/items/Bomb",["require","exports","module","PIXI","./Item","../collision/Crash","fido/sound/SoundBridge","fido/game/GameObjectPool","./components/Explodable"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=(t("../collision/Crash"),t("fido/sound/SoundBridge"),t("fido/game/GameObjectPool"),t("./components/Explodable")),n=function(t,e,i){var i=i||new s.Sprite.fromFrame("grenade_01.png");i.anchor.set(.5),o.call(this,t,e,i,null),this._body=new p2.Body({mass:.1,position:[100,100],angle:0}),circleShape=new p2.Circle({radius:11}),this._body.addShape(circleShape),this.groups=["bombs"],this.groundCheck=!0,this.explodable=new r(this),this.ignoreLaser=!0,this.count=0,this.keyLights=[],this.keyLightIndex=0,this.isFinished=!1,this.lights=[]};n.prototype=Object.create(o.prototype),n.prototype.fireLight=function(){var t=this.lights.pop()||new s.Sprite.fromFrame("bomb_light.png");t.anchor.set(.5),t.scale.set(0),t.alpha=1,TweenLite.to(t,.6,{alpha:0,ease:Cubic.easeOut,onComplete:function(){this.lights.push(t)}.bind(this)}),TweenLite.to(t.scale,.5,{x:1.5,y:1.5,ease:Cubic.easeOut}),this.view.addChild(t)},n.prototype.update=function(){this.position.x=this._body.position[0],this.position.y=this._body.position[1],this.view.rotation=this._body.angle,this.count++,this.count%this.keyLights[this.keyLightIndex]!==0||this.isFinished||(this.fireLight(),this.keyLightIndex++,this.keyLightIndex>=this.keyLights.length&&(this.isFinished=!0))},n.prototype.reset=function(t){this._body.position[0]=t.x,this._body.position[1]=t.y,this._body.velocity[0]=0,this._body.velocity[1]=0,this.isFinished=!1,this.keyLights=[13,25,35,45],this.keyLightIndex=0,this.count=0,this.explodable.reset(),this.explodable.fuse=2,this.explodable.debrisCount=s.isWebGL?10:2,this.explodable.explode(2),this.view.scale.set(.4),TweenLite.to(this.view.scale,.3,{x:1,y:1,ease:Sine.easeOut})},i.exports=n}),define("com/rebels/game/items/active/Crawl",["require","exports","module","PIXI","./ActiveItem","fido/system/Ticker","../Bomb","fido/game/GameObjectPool","fido/utils/FrameWait","signals"],function(t,e,i){var s=(t("PIXI"),t("./ActiveItem")),o=(t("fido/system/Ticker"),t("../Bomb"),t("fido/game/GameObjectPool"),t("fido/utils/FrameWait"),t("signals")),r=function(t){s.call(this,t),this.onCrawl=new o,this.passive=!0,this.toggle=!1,this.crouchShape=new p2.Rectangle(29.5,32),this.crouchShape._main=!0,this.defaultShape=t._body.shapes[0],t.onSleep.add(this.onSleep,this),t.onWake.add(this.onWake,this),t.onCollisonBegin.add(this.onCollisonBegin,this),t.onCollisonEnd.add(this.onCollisonEnd,this),this.pauseCount=0};Object.assign(r.prototype,s.prototype),r.prototype.onSleep=function(){},r.prototype.onWake=function(){},r.prototype.reset=function(){if(this.toggle){var t=this.item;t.config.speed=1,t._body.addShape(this.defaultShape,[0,-41.5]),t._body.removeShape(this.crouchShape),t.special=!1,t.canJump=!0,this.crawling=!1,this.toggle=!1}},r.prototype.onCollisonBegin=function(t){9==t.type&&(this.activate(),this.crawling=!0)},r.prototype.onCollisonEnd=function(t){9==t.type&&(this.activate(),this.crawling=!1)},r.prototype.activate=function(){var t=this.item;this.toggle=!this.toggle,this.toggle?(this.onCrawl.dispatch(),t.config.speed=.5,t._body.addShape(this.crouchShape,[0,-16]),t._body.removeShape(this.defaultShape),t.view.animation.state.setAnimationByName(0,"jog",!0),t.view.animation.update(1/60*1.4*10),t.view.animation.state.setAnimationByName(0,"crawl",!0),t.special=!0,t.canJump=!1,this.pauseCount=0):(t.config.speed=1,t.special=!1,t.canJump=!0,t.view.animation.state.setAnimationByName(0,"jog",!0),t._body.addShape(this.defaultShape,[0,-41.5]),t._body.removeShape(this.crouchShape))},r.prototype.update=function(){if(this.toggle){var t=this.item;this.pauseCount++,this.pauseCount>30&&(t.view.updateSpine=Math.abs(t._body.velocity[0])>2)}},r.prototype.deactivate=function(){this.item},i.exports=r}),define("com/rebels/game/items/components/Rocks",["require","exports","module","PIXI","fido/utils/Math2"],function(t,e,i){var s=t("PIXI"),o=(t("fido/utils/Math2"),function(t){t=t||{},this.view=new s.Container,this.width=t.width||200,this.maxDistance=t.maxDistance||-200,this.pool=[],this.actives=[];for(var e=10,i=new s.Texture.fromImage(ASSET_URL+"img/game/rock_a.png"),o=0;e>o;o++){var r=this.pool.pop()||new s.Sprite(i);r.position.y=0,r.anchor.x=.5,r.anchor.y=.5,r.speedR=0,this.view.addChild(r),this.actives.push(r)}});o.prototype.start=function(){this.areFallen=!1;for(var t=0;t<this.actives.length;t++){var e=this.actives[t];e.position.y=0,e.alpha=.02,e.lives=80*Math.random(),e.position.x=Math.random()*this.width-this.width/2;var i=.15*Math.random();e.z=i,e.scale.set(e.z),e.amplitude=this.maxDistance*(1-6.6*e.z),e.speed=-.25*(1-6.6*e.z),e.speedR=(.2*Math.random()-.1)*(1-6.6*e.z)}},o.prototype.removedFromWorld=function(){},o.prototype.stop=function(){this.areFallen=!0;for(var t=0;t<this.actives.length;t++){var e=this.actives[t];e.speed=3-.5*(1-e.z)}},o.prototype.reset=function(){this.areFallen=!0;for(var t=0;t<this.actives.length;t++){var e=this.actives[t];e.speed=3-.5*(1-e.z),e.position.y=0}},o.prototype.update=function(){for(var t=0;t<this.actives.length;t++){var e=this.actives[t];e.position.y<=2&&e.position.y>=e.amplitude||this.areFallen&&e.position.y<=2?e.position.y+=e.speed:e.position.y>=2&&(e.lives>0?e.lives-=1:e.alpha*=.98),this.areFallen?(e.speedR*=.99,e.speed*=1.01):(e.rotation+=e.speedR,1.1*e.alpha<1?e.alpha*=1.1:e.alpha=1)}},i.exports=o}),define("com/rebels/game/items/components/FrontRocks",["require","exports","module","PIXI","fido/utils/Math2"],function(t,e,i){var s=t("PIXI"),o=(t("fido/utils/Math2"),function(t){t=t||{},this.view=new s.Container,this.dimensions={width:1130,height:640},this.width=t.width||200,this.maxDistance=t.maxDistance||-200,this.actives=[];for(var e=0;12>e;e++){var i=new s.Sprite;i.position.y=400,i.anchor.x=.5,i.anchor.y=.5,i.speedR=0,this.view.addChild(i),this.actives.push(i)}});o.prototype.start=function(){this.areFallen=!1;for(var t=[.2,.5],e=new s.Texture.fromFrame("rock_a.png"),i=new s.Texture.fromFrame("rock_b.png"),o=new s.Texture.fromFrame("rock_c.png"),r=[e,i,o],n=0;n<this.actives.length;n++){var a=this.actives[n];a.texture=r[n%r.length],a.position.y=this.dimensions.height+20+30*Math.floor(n/4)+20*Math.random()-10,a.alpha=1,a.position.x=-100+n/this.actives.length*400+20*Math.random()-10,a.rotation=100*Math.random();var h=t[n%t.length]+Math.random()*t[n%t.length]-t[n%t.length]/2;a.z=h,a.scale.set(a.z),a.speed=.1*Math.random()-.65*(a.z+.08),a.speedR=.01*Math.random()-.005}},o.prototype.stop=function(){this.areFallen=!0;for(var t=0;t<this.actives.length;t++){var e=this.actives[t];e.speed=3-.5*(1-e.z)}},o.prototype.reset=function(){for(var t=0;t<this.actives.length;t++){var e=this.actives[t];e.position.y=this.dimensions.height+200}},o.prototype.update=function(){for(var t=0;t<this.actives.length;t++){var e=this.actives[t];(e.position.y<=this.dimensions.height+100&&e.position.y>=0||this.areFallen&&e.position.y<=this.dimensions.height+100)&&(e.position.y+=e.speed),this.areFallen?(e.speedR*=.99,e.speed*=1.04):e.rotation+=e.speedR}},i.exports=o}),define("com/rebels/game/items/LevitatingsItems",["require","exports","module","PIXI","./Item","./components/Rocks","./components/FrontRocks"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=t("./components/Rocks"),n=t("./components/FrontRocks"),a=function(){o.call(this),this.view=new s.Container,this.viewFront=new s.Container,this.rocks=new r,this.frontRocks=new n,this.view.addChild(this.rocks.view),this.viewFront.addChild(this.frontRocks.view)};a.prototype=Object.create(o.prototype),a.prototype.addedToWorld=function(t){t.view.addChild(this.viewFront)},a.prototype.removedFromWorld=function(t){t.view.removeChild(this.viewFront)},a.prototype.reset=function(){this.rocks.reset(),this.frontRocks.reset()},a.prototype.start=function(t){this.rocks.start(),this.frontRocks.start()},a.prototype.stop=function(t){this.rocks.stop(),this.frontRocks.stop()},a.prototype.update=function(){this.rocks.update(),this.frontRocks.update(),this.view.position.x=this.position.x,this.view.position.y=this.position.y},i.exports=a}),define("com/rebels/game/items/active/Force",["require","exports","module","PIXI","./ActiveItem","fido/system/Ticker","../Item","../../P2Materials","signals","../LevitatingsItems","fido/goals/Goals","fido/system/Device","fido/sound/SoundBridge"],function(t,e,i){var s=t("PIXI"),o=t("./ActiveItem"),r=(t("fido/system/Ticker"),t("../Item")),n=t("../../P2Materials").contacts,a=t("signals"),h=t("../LevitatingsItems"),l=t("fido/goals/Goals"),c=t("fido/system/Device"),u=t("fido/sound/SoundBridge"),d=new s.Rectangle,p=function(t){o.call(this,t,s.Sprite.fromFrame("action.png")),this.onForce=new a,this.onItemMove=new a,this.radius=200,this.forceArea=new s.Container,this.forceArea.pivot.y=40,this.forceAreaInner=new s.Sprite.fromFrame("force_bubble_inner.png"),this.forceRimGlow=new s.Sprite.fromFrame("force_bubble_outer.png"),this.forceSwirl=new s.Sprite.fromFrame("force_bubble_swirl.png"),this.swirlContainer=new s.Container,this.forceArea.addChild(this.forceRimGlow),this.forceArea.addChild(this.forceAreaInner),this.forceArea.addChild(this.swirlContainer),this.swirlContainer.scale.set(.8,.6),this.forceRimGlow.scale.set(.99),this.forceAreaInner.anchor.set(.5),this.forceRimGlow.anchor.set(.5),this.forceSwirl.anchor.set(.5),this.forceAreaInner.blendMode=s.isWebGL?s.BLEND_MODES.ADD:0,s.isWebGL||(this.forceArea.alpha=.3),this.forceRimGlow.blendMode=s.isWebGL?s.BLEND_MODES.ADD:0,this.forceItem=new r(0,0,this.forceArea),this.forceArea.hitArea=new s.Rectangle,this.forceItem.groups=["force"],this.forceItem._body=new p2.Body({mass:1,position:[0,0],angle:0,type:p2.Body.KINIMATIC,fixedRotation:!0}),this.toggle=!1,this.circle=new p2.Circle({radius:this.radius}),this.circle.sensor=!0,this.forceItem._body.addShape(this.circle),this.forceItem.ignoreLaser=!0,this.forceItem.onCollideBegin=this.onCollideBegin.bind(this),this.forceItem.onCollideEnd=this.onCollideEnd.bind(this),t.onSleep.add(this.onSleep,this),t.onWake.add(this.onWake,this),t.view.animationManager.register("force",{frames:t.config.force,loop:!0}),this.items=[],s.isWebGL&&(this.levitatingItems=new h)};Object.assign(p.prototype,o.prototype),p.prototype.updateForce=function(t){this.forceLevel=t,1===t?this.radius=320:2===t?this.radius=340:3===t?this.radius=360:3===t&&(this.radius=400),this.forceItem._body.removeShape(this.circle),this.circle=new p2.Circle({radius:.9*this.radius}),this.circle.sensor=!0,this.forceItem._body.addShape(this.circle),this.forceArea.hitArea=new s.Rectangle},p.prototype.onSleep=function(){this.toggle&&this.activate()},p.prototype.onWake=function(){var t=this.item;this.toggle&&(t.canMove=!1)},p.prototype.reset=function(){this.onSleep(),s.isWebGL&&(this.levitatingItems.world&&this.item.world.remove(this.levitatingItems),this.levitatingItems.reset())},p.prototype.activate=function(){var t=this.item;if(this.toggle||t.canJump)if(this.toggle=!this.toggle,this.toggle){"ezra"===t._charId&&(t.helmetStand.position.x=5,t.helmetStand.position.y=-85,t.helmetStand.rotation=30*Math.PI/180),l.instance.increment("useForce",1),this.onForce.dispatch(),t.view.interactive=!1,t.view.hitArea=d,this.item.world.add(this.forceItem),u.sfx.play("forceon"),TweenLite.to(t.world.camera,.6,{zoom:c.instance.desktop?1.1:1.3}),t.world.camera.lockToFrame=!1,t.world.game.hud.characterSelect.hide(),this.forceArea.scale.set(.1);var e=this.radius/270;TweenLite.to(this.forceArea.scale,.4,{x:e,y:e,ease:Sine.easeInOut}),t._body.mass=10,t.canMove=!1,t.view.playAnimation("force",!0),t.special=!0,s.isWebGL&&(this.levitatingItems.start(),this.levitatingItems.world||this.item.world.add(this.levitatingItems),this.levitatingItems.position.x=t._body.position[0],this.levitatingItems.viewFront.position.x=t._body.position[0],this.levitatingItems.position.y=t._body.position[1]),n.playerPlatformContact.friction=1}else"ezra"===t._charId&&(t.helmetStand.position.x=t.defaultHelmetPosition.x,t.helmetStand.position.y=t.defaultHelmetPosition.y,t.helmetStand.rotation=0),s.isWebGL&&this.levitatingItems.stop(),t.view.interactive=!0,t.view.hitArea=null,n.playerPlatformContact.friction=0,t._body.mass=3,t.world.camera.lockToFrame=!0,u.sfx.play("forceout"),TweenLite.to(this.forceArea.scale,.3,{x:0,y:0,ease:Sine.easeInOut,onComplete:function(){this.item.world.remove(this.forceItem)}.bind(this)}),t.canMove=!0,TweenLite.to(t.world.camera,.3,{zoom:1}),t.world.game.hud.characterSelect.show(),t.special=!1,t.view.playAnimation("idle",!0)},p.prototype.update=function(){var t=this.item;if(this.toggle){this.forceAreaInner.rotation+=.03;var e=.5*(1+Math.sin(this.forceAreaInner.rotation));this.forceRimGlow.alpha=.6+.4*e,this.item.world.camera.shake(null,this.forceLevel)}this.forceItem._body.position[0]=t._body.position[0],this.forceItem._body.position[1]=t._body.position[1]-40,this.forceItem.view.position.x=this.forceItem._body.position[0],this.forceItem.view.position.y=this.forceItem._body.position[1]},p.prototype.deactivate=function(){},p.prototype.onCollideBegin=function(t){6===t.type&&t.meta.force&&(t.forcePickup.activate(),t.forcePickup.onItemDown.add(this.onItemMove.dispatch,this))},p.prototype.onCollideEnd=function(t){6===t.type&&t.meta.force&&(t.forcePickup.deactivate(),t.forcePickup.onItemDown.remove(this.onItemMove.dispatch,this))},i.exports=p}),define("com/rebels/game/items/player/Ezra",["require","exports","module","PIXI","fido/utils/Utils","../Player","../active/Crawl","../active/Force"],function(t,e,i){var s=t("PIXI"),o=t("fido/utils/Utils"),r=t("../Player"),n=t("../active/Crawl"),a=t("../active/Force"),h=function(){r.call(this,new l),this.active.addAction(new n(this),3),this.active.addAction(new a(this),1),this._charId="ezra",s.isWebGL?(this.highlightTextures=o.getTexturesFromFramesWithPrefix("highlight_icon_ezra_%%.png",4,1,!0),this.highlightAnimation.textures=this.highlightTextures,this.glow.texture=new s.Texture.fromFrame("highlight_icon_ezra_glow.png")):this.highlightAnimation.texture=s.Texture.fromFrame("highlight_icon_ezra_1.png"),this.highlightAnimation.position.y=-110,this.helmetMode=!1,this.indexToAddHelmet=5,this.helmet=new s.Sprite.fromFrame("ezra_hat_side_small.png"),this.helmet.anchor.set(.5),this.helmet.position.y=-2,this.defaultHelmetPosition=new s.Point(-4,-119),this.helmetStand=new s.Sprite.fromFrame("ezra_hat_small.png"),this.helmetStand.anchor.set(.5),this.helmetStand.position.x=this.defaultHelmetPosition.x,this.helmetStand.position.y=this.defaultHelmetPosition.y,this.sound="ezrarun"};h.prototype=Object.create(r.prototype),h.prototype.setForce=function(t){this.active.activeItems[1].updateForce(t)};var l=function(t){this.body=new s.Rectangle(-12,-83,24,83),this.sfx={jump:"jump"},this.spineDataId="media/img/game/characters/ez.json",this.jumpFrameHeight=50,this.view=o.getTexturesFromFramesWithPrefix("ezidle-idle_%%.png",40,0,!0),this.visualOffset=-35,this.visualOffsetSprite=5,this.walk=this.view,this.force=o.getTexturesFromFramesWithPrefix("ez-l-force_%%.png",24,0,!0),this.jump=this.view,this.speed=1,this.jumpPower=180*1.1*1.1};i.exports=h}),define("com/rebels/game/items/active/PowerCrouch",["require","exports","module","PIXI","./ActiveItem","fido/system/Ticker","../Bomb","fido/game/GameObjectPool","fido/utils/FrameWait","../../P2Materials","signals"],function(t,e,i){var s=t("PIXI"),o=t("./ActiveItem"),r=(t("fido/system/Ticker"),t("../Bomb"),t("fido/game/GameObjectPool"),t("fido/utils/FrameWait"),t("../../P2Materials").materials,t("signals")),n=function(t){o.call(this,t,s.Sprite.fromFrame("action.png")),this.toggle=!1,this.onCrouch=new r,this.crouchShape=new p2.Rectangle(40,98/1.8),this.defaultShape=t._body.shapes[0],this.crouchShape.material=this.defaultShape.material,this.crouchShape.sensor=!0,this.canRelease=!0,t._body.addShape(this.crouchShape,[0,-98/1.7/2]),t.onSleep.add(this.onSleep,this),t.onWake.add(this.onWake,this),t.view.animationManager.register("crouch",{frames:t.config.crouch,loop:!0}),this.waitForLanding=!1};Object.assign(n.prototype,o.prototype),n.prototype.onSleep=function(){},n.prototype.onWake=function(){var t=this.item;this.toggle&&(t.canMove=!1)},n.prototype.activate=function(){var t=this.item;this.toggle=!this.toggle,this.toggle?("zeb"===t._charId&&(t.helmetStand.position.x=10,t.helmetStand.position.y=-85),this.onCrouch.dispatch(),t.setState(1),t.view.playAnimation("crouch",!0),t.special=!0,t.canMove=!1,t._body.mass=100,this.defaultShape.sensor=!0,this.crouchShape.sensor=!1,t.onGround?(t.groundCheck=!1,this.waitForLanding=!1):this.waitForLanding=!0):("zeb"===t._charId&&(t.helmetStand.position.x=t.defaultHelmetPosition.x,t.helmetStand.position.y=t.defaultHelmetPosition.y),t.groundCheck=!0,t.canMove=!0,t.onGround=!0,t._body.mass=t.config.mass,this.defaultShape.sensor=!1,this.crouchShape.sensor=!0,t.groundCount=-2,t.view.playAnimation("stand",!0),t.special=!1)},n.prototype.update=function(){var t=this.item;this.toggle&&(t._body.velocity[0]=0,t.onGround&&this.waitForLanding&&(t.groundCheck=!1,this.waitForLanding=!1,t.view.playAnimation("crouch",!0),t.special=!0))},n.prototype.deactivate=function(){},i.exports=n}),define("com/rebels/game/items/player/Zeb",["require","exports","module","PIXI","fido/utils/Utils","../Player","../active/PowerCrouch"],function(t,e,i){var s=t("PIXI"),o=t("fido/utils/Utils"),r=t("../Player"),n=t("../active/PowerCrouch"),a=function(){r.call(this,new h),this.active.addAction(new n(this),1);var t=new s.Sprite(this.config.view[0]);t.anchor.set(.5,1),this.shake=5,this._charId="zeb",this.weight=6,this.debugx=!0,this.view.sprite.y=8,s.isWebGL?(this.highlightTextures=o.getTexturesFromFramesWithPrefix("highlight_icon_zeb_%%.png",4,1,!0),this.highlightAnimation.textures=this.highlightTextures,this.glow.texture=new s.Texture.fromFrame("highlight_icon_zeb_glow.png")):this.highlightAnimation.texture=s.Texture.fromFrame("highlight_icon_zeb_1.png"),this.highlightAnimation.position.y=-120,this.helmetMode=!1,this.stopAnimateOnIdle=!0,this.indexToAddHelmet=7,this.helmet=new s.Sprite.fromFrame("zeb_hat_side_small.png"),this.helmet.anchor.set(.5),this.defaultHelmetPosition=new s.Point(0,-138),this.helmetStand=new s.Sprite.fromFrame("zeb_hat_small.png"),this.helmetStand.anchor.set(.5),this.helmetStand.position.x=this.defaultHelmetPosition.x,this.helmetStand.position.y=this.defaultHelmetPosition.y,this.sound="zebrun"};a.prototype=Object.create(r.prototype),a.prototype.setJump=function(t){1===t?this._jumpAction.updateJump(332.64):2===t?this._jumpAction.updateJump(360.36):3===t?this._jumpAction.updateJump(388.08):this._jumpAction.updateJump(180*1.4*1.5*1.1)};var h=function(){this.body=new s.Rectangle(-14.75,-98,29.5,98),this.jumpFrameHeight=50,this.spineDataId="media/img/game/characters/zeb.json",this.view=o.getTexturesFromFramesWithPrefix("zeb_idle-R-animation_%%.png",32,0,!0);for(var t=0;50>t;t++)this.view.push(s.Texture.fromFrame("zeb_idle-R-animation_0.png"));this.crouch=[new s.Texture.fromFrame("ZebR__crouch.png")],this.walk=this.view,this.jump=this.view,this.visualOffset=-45,this.speed=1,this.defaultSkin="r",this.sfx={jump:"zebjump"},this.mass=17};i.exports=a}),define("com/rebels/game/items/BombLevel2",["require","exports","module","./Bomb","./components/Explodable"],function(t,e,i){var s=t("./Bomb"),o=t("./components/Explodable"),r=function(t,e){var i=new PIXI.Sprite.fromFrame("grenade_01.png");i.anchor.set(.5),s.call(this,t,e,i),this.explodable=new o(this),this.explodable.setExplosion(1)};r.prototype=Object.create(s.prototype),i.exports=r}),define("com/rebels/game/items/BombLevel3",["require","exports","module","./Bomb","./components/Explodable"],function(t,e,i){var s=t("./Bomb"),o=t("./components/Explodable"),r=function(t,e){var i=new PIXI.Sprite.fromFrame("grenade_01.png");i.anchor.set(.5),s.call(this,t,e,i),this.explodable=new o(this),this.explodable.setExplosion(2)};r.prototype=Object.create(s.prototype),i.exports=r}),define("com/rebels/game/items/active/BombThrow",["require","exports","module","PIXI","./ActiveItem","fido/system/Ticker","../Bomb","../BombLevel2","../BombLevel3","fido/game/GameObjectPool","signals","fido/sound/SoundBridge"],function(t,e,i){var s=t("PIXI"),o=t("./ActiveItem"),r=t("fido/system/Ticker"),n=t("../Bomb"),a=t("../BombLevel2"),h=t("../BombLevel3"),l=t("fido/game/GameObjectPool"),c=t("signals"),u=t("fido/sound/SoundBridge"),d=function(t){o.call(this,t,s.Sprite.fromFrame("action.png")),this.onBombThrow=new c,this.level=0,this.bombs=[n,a,h,h],this.throwCount=0,this.throwing=!1,this.bombDelay=0};Object.assign(d.prototype,o.prototype),d.prototype.updateLevelExplosion=function(t){this.level=t},d.prototype.activate=function(){if(!this.throwing||3===this.level){var t=this.item;t.world.groups.bombs&&t.world.groups.bombs.children.length>0&&3!==this.level||(this.onBombThrow.dispatch(),u.sfx.play("sabminethrow"),this.throwCount=0,this.throwing=!0,this.bombDelay=0,1!==t.state||3===this.level?this.throwCount=30:t.view.playAnimation("lob",!1,!0))}},d.prototype.update=function(){if(this.throwing&&(this.throwCount+=r.game.deltaTime,this.throwCount>20||3===this.levels)){this.throwing=!1;var t=this.item,e=l.getObject(this.bombs[this.level]);e.reset({x:t._body.position[0]+(t.facingLeft?-30:30),y:t._body.position[1]-60}),t.world.add(e),e._body.velocity[0]=.3*t._body.velocity[0]+(t.facingLeft?-60:60),e._body.velocity[1]=-120,e._body.angularVelocity=.02*e._body.velocity[0]}},d.prototype.deactivate=function(){},i.exports=d}),define("com/rebels/game/items/player/Sabine",["require","exports","module","PIXI","fido/utils/Utils","../Player","../active/BombThrow"],function(t,e,i){var s=t("PIXI"),o=t("fido/utils/Utils"),r=t("../Player"),n=t("../active/BombThrow"),a=function(){r.call(this,new h),this.active.addAction(new n(this),1),this._charId="sabine",s.isWebGL?(this.highlightTextures=o.getTexturesFromFramesWithPrefix("highlight_icon_sabine_%%.png",4,1,!0),this.highlightAnimation.textures=this.highlightTextures,this.glow.texture=new s.Texture.fromFrame("highlight_icon_sabine_glow.png")):this.highlightAnimation.texture=s.Texture.fromFrame("highlight_icon_sabine_1.png"),this.highlightAnimation.position.y=-110,this.helmetMode=!1,this.indexToAddHelmet=1,this.helmet=new s.Sprite.fromFrame("sabine_hat_side_small.png"),
this.helmet.anchor.set(.5),this.helmet.position.y=-3,this.helmet.position.x=0,this.helmetStand=new s.Sprite.fromFrame("sabine_hat_small.png"),this.helmetStand.anchor.set(.5),this.helmetStand.position.y=-118,this.helmetStand.position.x=-7,this.sound="sabrun"};a.prototype=Object.create(r.prototype),a.prototype.setBomb=function(t){this.active.activeItems[1].updateLevelExplosion(t)};var h=function(t){this.sfx={jump:"sabjump"},this.body=new s.Rectangle(-12.25,-85,24.5,85),this.jumpFrameHeight=50,this.spineDataId="media/img/game/characters/Sab.json",this.defaultSkin="Sab",this.view=o.getTexturesFromFramesWithPrefix("SabIdle-SabIR-idle_%%.png",33,0,!0),this.visualOffset=-35,this.visualOffsetSprite=5,this.walk=this.view,this.jump=this.view,this.speed=1.5,this.jumpPower=180*1.1*1.02*1.1};i.exports=a}),define("com/rebels/game/items/CellManager",["require","exports","module","PIXI","./Item"],function(t,e,i){var s=(t("PIXI"),t("./Item"),function(t){this.game=t,this.totalCells=0,this.currentCells=0,this.totalBonus=0,this.currentBonus=0,this.exit=t.exit});s.prototype.reset=function(){this.totalCells=this.findAllCells(),this.currentCells=0,this.game.hud.updateCellCount(this.currentCells,this.totalCells)},s.prototype.pickupCell=function(){this.currentCells++,this.currentCells===this.totalCells,this.game.hud.updateCellCount(this.currentCells,this.totalCells)},s.prototype.pickupBonus=function(){this.currentBonus++,this.currentBonus===this.totalBonus,this.game.hud.bonus.updateCount(this.currentBonus,this.totalBonus)},s.prototype.findAllCells=function(){if(!this.game.world.groups.pickup)return 0;for(var t=this.game.world.groups.pickup.children,e=0,i=t.length-1;i>=0;i--)"cell"===t[i].pickupType&&e++;return e},s.prototype.bonusMode=function(){this.currentBonus=0,this.totalBonus=this.findAllBonus(),this.game.hud.bonus.updateCount(this.currentBonus,this.totalBonus)},s.prototype.findAllBonus=function(){return 1},i.exports=s}),define("com/rebels/game/scripts/BustedScript",["require","exports","module","PIXI","signals","fido/system/Ticker","com/rebels/game/scripts/BustedScriptTitle","fido/sound/SoundBridge"],function(t,e,i){var s=t("PIXI"),o=(t("signals"),t("fido/system/Ticker")),r=t("com/rebels/game/scripts/BustedScriptTitle");s.DisplayObject.prototype.depthOffset=0;var n=function(t){this.game=t,this.red=(new s.Graphics).beginFill(16711680).drawRect(0,0,1150,800),this.red.hitArea=new s.Rectangle,this.count=0,this.running=!1,this.banner=new s.Sprite.fromFrame("captured_swipe.png"),this.banner.anchor.x=this.banner.anchor.y=.5,this.banner.position.x=this.game.app.safeSize.width/2,this.banner.position.y=this.game.app.safeSize.height/2,this.banner.scale.x=this.game.app.safeSize.width/this.banner.width;var e={fill:"white",font:"70px "+window.SECONDARY_FONT,align:"center",dropShadow:!1};this.text=new r(translations.STR_TEXT_CAPTURED,e),this.text.scale.x=1/this.banner.scale.x,this.banner.addChild(this.text)};n.constructor=n,n.prototype.run=function(e){this.running||(t("fido/sound/SoundBridge").sfx.playGroup("fail"),this.running=!0,this.count=0,this.game.view.addChild(this.red),this.game.view.addChild(this.banner),TweenLite.to(this.banner.scale,.2,{y:1,ease:Back.easeOut.config(2)}),o.game.add(this.onUpdate,this))},n.prototype.onUpdate=function(){this.game.lockControls(),this.count++,this.running&&(this.red.alpha=.5*(Math.sin(.3*this.count)+1)*.5),this.count>100&&this.finish()},n.prototype.finish=function(){TweenLite.to(this.banner.scale,.2,{y:0,onComplete:function(){this.game.gameover()}.bind(this)}),this.red.alpha=0,o.game.remove(this.onUpdate,this)},n.prototype.reset=function(){this.banner.scale.y=0,this.running=!1,this.red.alpha=0,o.game.remove(this.onUpdate,this)},i.exports=n}),define("fido/input/Keyboard",["require","exports","module"],function(t,e,i){Keyboard=function(){this._states={up:0,down:1},this._keyCodes={37:{label:"left",state:0,preventBubble:!0},38:{label:"up",state:0,preventBubble:!0},39:{label:"right",state:0,preventBubble:!0},40:{label:"down",state:0,preventBubble:!0},49:{label:"1",state:0,preventBubble:!0},50:{label:"2",state:0,preventBubble:!0},51:{label:"3",state:0,preventBubble:!0},52:{label:"4",state:0,preventBubble:!0},53:{label:"5",state:0,preventBubble:!0},54:{label:"6",state:0,preventBubble:!0},55:{label:"7",state:0,preventBubble:!0},56:{label:"8",state:0,preventBubble:!0},57:{label:"9",state:0,preventBubble:!0},97:{label:"numpad1",state:0,preventBubble:!0},98:{label:"numpad2",state:0,preventBubble:!0},99:{label:"numpad3",state:0,preventBubble:!0},100:{label:"numpad4",state:0,preventBubble:!0},101:{label:"numpad5",state:0,preventBubble:!0},102:{label:"numpad6",state:0,preventBubble:!0},103:{label:"numpad7",state:0,preventBubble:!0},104:{label:"numpad8",state:0,preventBubble:!0},105:{label:"numpad9",state:0,preventBubble:!0},13:{label:"enter",state:0,preventBubble:!0},32:{label:"space",state:0,preventBubble:!0},65:{label:"a",state:0,preventBubble:!0},68:{label:"d",state:0,preventBubble:!0},80:{label:"p",state:0,preventBubble:!0},83:{label:"s",state:0,preventBubble:!0},87:{label:"w",state:0,preventBubble:!0},88:{label:"x",state:0,preventBubble:!0}},this.hash={},this.disabled=!1,this.start(),this.dirty=!1},Keyboard.prototype.start=function(){var t=this;this._onKeyDown=function(e){return t.processKeyDown(e)},this._onKeyUp=function(e){return t.processKeyUp(e)},window.addEventListener("keydown",this._onKeyDown,!1),window.addEventListener("keyup",this._onKeyUp,!1)},Keyboard.prototype.stop=function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp)},Keyboard.prototype.processKeyDown=function(t){if(this.disabled!==!0){var e=t.keyCode;if(this.keyCode=e,this._keyCodes.hasOwnProperty(e)){var i=this._keyCodes[e];i.preventBubble&&t.preventDefault(),i.state!=this._states.down&&(i.state=this._states.down,this.dirty=!0,this.hash[i.label]&&this.hash[i.label](i))}}},Keyboard.prototype.processKeyUp=function(t){if(this.disabled!==!0){var e=t.keyCode;if(this.keyCode=null,this._keyCodes.hasOwnProperty(e)){var i=this._keyCodes[e];i.preventBubble&&t.preventDefault(),i.state!=this._states.up&&(i.state=this._states.up,this.dirty=!0)}}},Keyboard.prototype.isPressed=function(t){var e=this.getCodeFromLabel(t);return e?this._keyCodes[e].state===this._states.down:!1},Keyboard.prototype.getCodeFromLabel=function(t){for(var e in this._keyCodes)if(this._keyCodes[e].label===t)return e;return!1},Keyboard.prototype.onKeyPress=function(t,e){this.hash[t]=e},i.exports=Keyboard}),define("com/rebels/game/scripts/TutorialScript",["require","exports","module","PIXI","signals","fido/system/Ticker","fido/input/Keyboard","fido/utils/FrameWait"],function(t,e,i){var s=t("PIXI"),o=(t("signals"),t("fido/system/Ticker"),t("fido/input/Keyboard"),t("fido/utils/FrameWait"));s.DisplayObject.prototype.depthOffset=0;var r=function(t){this.game=t,this.targets={jump:{signal:"onJump"},walk:{signal:"onWalk"},swap:{signal:"onSwap"},exit:{signal:"onSuccess"},crawl:{signal:"onCrawl"},bomb:{signal:"onBombThrow"},crouch:{signal:"onCrouch"},force:{signal:"onForce"},forceItem:{signal:"onForceItem"},blockMove:{signal:"onBlockMove"},buttonSwitched:{signal:"onButtonSwitched"},moveBarrel:{signal:"onBarrelMove"},blockMoveWithForce:{signal:"onBlockMoveWithForce"},w2l1t1:{signal:"onWarned1"},w2l1t2:{signal:"onWarned2"},someoneJumpedOnZeb:{signal:"onSomeoneJumpedOnZeb"}}};r.constructor=r,r.prototype.run=function(t){if(this.reset(),this.game.world.groups.tutorial){for(var e=this.game.world.groups.tutorial.children,i=0;i<e.length;i++)e[i].show(),e[i].meta.active&&this.copyBoxes.push(e[i]);this.started=!0,this.displayBoxes(),this.getStep()}},r.prototype.displayBoxes=function(){for(var t=0;t<this.copyBoxes.length;t++)t===this.current?this.copyBoxes[t].show():this.copyBoxes[t].hide()},r.prototype.getStep=function(){if(this.current-1>=0){var t=this.copyBoxes[this.current-1];t&&t.meta.type===r.TYPES.SIGNAL&&""!==t.meta.signal?this.game.eventHandler[this.targets[t.meta.signal].signal].remove(this.next,this):e&&e.meta.type===r.TYPES.BUTTON&&t.onClose.remove(this.next,this)}var e=this.copyBoxes[this.current];e&&e.meta.type===r.TYPES.SIGNAL&&""!==e.meta.signal?this.game.eventHandler[this.targets[e.meta.signal].signal].addOnce(this.next,this):e&&e.meta.type===r.TYPES.BUTTON?e.onClose.add(this.next,this):e&&e.meta.type===r.TYPES.SIGNAL&&""===e.meta.signal&&o.wait(this.next.bind(this),600)},r.prototype.next=function(){this.started&&(this.current+=1,this.displayBoxes(),this.getStep())},r.prototype.finish=function(){},r.prototype.reset=function(){this.current=0,this.started=!1,this.copyBoxes=[]},r.TYPES={SIGNAL:0,BUTTON:1},i.exports=r}),define("com/rebels/game/scripts/CompleteScript",["require","exports","module","PIXI","signals","fido/system/Ticker","com/rebels/game/scripts/BustedScriptTitle"],function(t,e,i){var s=t("PIXI"),o=(t("signals"),t("fido/system/Ticker")),r=t("com/rebels/game/scripts/BustedScriptTitle");s.DisplayObject.prototype.depthOffset=0;var n=function(t){this.game=t,this.count=0,this.running=!1,this.finishTime=0,this.banner=new s.Sprite.fromFrame("captured_swipe.png"),this.banner.anchor.x=this.banner.anchor.y=.5,this.banner.position.x=this.game.app.safeSize.width/2,this.banner.position.y=this.game.app.safeSize.height/2,this.banner.scale.x=this.game.app.safeSize.width/this.banner.width;var e={fill:"white",font:"70px "+window.MAIN_FONT,align:"center",dropShadow:!1};this.text=new r(translations.STR_TEXT_COMPLETE,e),this.text.scale.x=1/this.banner.scale.x,this.banner.addChild(this.text)};n.constructor=n,n.prototype.run=function(t){if(!this.running){this.running=!0,this.count=0,this.game.finishTime=this.game.counter,this.game.view.addChild(this.banner),TweenLite.to(this.banner.scale,.2,{y:1,ease:Back.easeOut.config(2)}),this.game.world.camera.idleZoom=1.2,TweenLite.to(this.game.world.camera,3,{zoom:1.5}),o.game.add(this.onUpdate,this);for(var e=this.game.team.length-1;e>=0;e--)this.game.team[e].walkOff();this.game.onAllPlayerExit.dispatch()}},n.prototype.onUpdate=function(){this.game.lockControls(),this.count++,this.running,this.count>100&&this.finish()},n.prototype.finish=function(){TweenLite.to(this.banner.scale,.2,{y:0,onComplete:function(){this.game.complete()}.bind(this)}),o.game.remove(this.onUpdate,this)},n.prototype.reset=function(){this.banner.scale.y=0,this.running=!1,o.game.remove(this.onUpdate,this)},i.exports=n}),define("com/rebels/game/scripts/IntroScript",["require","exports","module","PIXI","signals","fido/system/Ticker","com/rebels/game/scripts/BustedScriptTitle"],function(t,e,i){var s=t("PIXI"),o=(t("signals"),t("fido/system/Ticker")),r=t("com/rebels/game/scripts/BustedScriptTitle");s.DisplayObject.prototype.depthOffset=0;var n=function(t){this.game=t,this.count=0,this.running=!1,this.banner=new s.Sprite.fromFrame("captured_swipe.png"),this.banner.anchor.x=this.banner.anchor.y=.5,this.banner.position.x=this.game.app.safeSize.width/2,this.banner.position.y=this.game.app.safeSize.height/2,this.banner.scale.x=this.game.app.safeSize.width/this.banner.width;var e={fill:"white",font:"70px "+window.MAIN_FONT,align:"center",dropShadow:!1};this.text=new r("",e),this.text.scale.x=1/this.banner.scale.x,this.banner.addChild(this.text)};n.constructor=n,n.prototype.run=function(t){this.text.title.text=window.translations[t],this.text.title.position.x=-this.text.title.width/2,this.running||(this.running=!0,this.count=0,this.game.view.addChild(this.banner),TweenLite.to(this.banner.scale,.2,{delay:1,y:1,ease:Back.easeOut.config(2)}),this.game.world.camera.zoom=1,this.game.world.camera.idleZoom=1,o.game.add(this.onUpdate,this))},n.prototype.onUpdate=function(){this.count++,this.running,this.count>120&&this.finish()},n.prototype.finish=function(){TweenLite.to(this.banner.scale,.2,{y:0,onComplete:function(){this.game.view.removeChild(this.banner)}.bind(this)}),o.game.remove(this.onUpdate,this)},n.prototype.reset=function(){this.banner.scale.y=0,this.running=!1,o.game.remove(this.onUpdate,this)},i.exports=n}),define("com/rebels/app/system/GoalManager",["require","exports","module","com/rebels/app/system/GameSaveManager","fido/goals/Goals","com/rebels/game/LevelManager"],function(t,e,i){var s=t("com/rebels/app/system/GameSaveManager"),o=t("fido/goals/Goals"),r=(t("com/rebels/game/LevelManager"),function(){});r.prototype.registerLevel=function(t){var e=t.levelIndex;o.instance.update("levels",e+1)},r.prototype.registerWorld=function(t){for(var e=["world1perfect","world2perfect","world3perfect","world4perfect","world5perfect"],i=["world1","world2","world3","world4","world5"],r=0,n=0,a=s.instance.save.worlds,h=a[t.worldIndex],l=0;l<h.levels.length;l++)h.levels[l].complete===!0&&r++,h.levels[l].complete===!0&&3===h.levels[l].starRating&&n++;"I'm in world : "+t.worldIndex+" and there have been "+r+" levels completed so far";o.instance.update(e[t.worldIndex],n),o.instance.update(i[t.worldIndex],r)},i.exports=r}),define("com/rebels/game/level/Level",["require","exports","module"],function(t,e,i){var s=function(){this.enemies=new DMGroup,this.platforms=[],this.pickups=new DMGroup};i.exports=s}),define("com/rebels/game/items/Consts",["require","exports","module"],function(t,e,i){i.exports={GROUPS:{DEFAULT:Math.pow(2,31),PLAYER:Math.pow(2,1),BLOCKS:Math.pow(2,2),BOMBS:Math.pow(2,3)}}}),define("com/rebels/game/items/Platform",["require","exports","module","PIXI","./Item","../collision/Crash","./Consts","../P2Materials"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=(t("../collision/Crash"),(new s.Graphics).beginFill(16777215).drawRect(-50,-50,100,100).generateTexture()),n=(new s.Graphics).beginFill(16777215).drawCircle(0,0,50).generateTexture(),a=(t("./Consts"),!1),h=t("../P2Materials").materials,l=function(t,e,i){this._body=new p2.Body({mass:0,position:[200,150],angle:0});var n=new s.Sprite(r);n.anchor.set(.5),o.call(this,t,e,n,null),this.params=null;var n=null;a&&(n=new s.Sprite(r),n.anchor.set(.5)),o.call(this,t,e,n,i),this.passthrough=!1};l.prototype.reset=function(t){this.params=t;var e=this._body;t.circle?(boxShape=new p2.Circle(t.width/2),a&&(this.view._texture=n)):(boxShape=new p2.Rectangle(t.width,t.height),a&&(this.view._texture=r)),t.senser&&(boxShape.sensor=!0),e.shapes[0]&&e.removeShape(e.shapes[0]),boxShape.material=h.platform,e.addShape(boxShape),e.angle=t.rotation||0,e.position[0]=t.x,e.position[1]=t.y,a&&(this.view.position.x=t.x,this.view.position.y=t.y,this.view.rotation=t.rotation||0,this.view.scale.set(t.width/100,t.height/100),this.view.visible=window.showPlatforms)},l.fromRect=function(t,e,i,s){var o=new l(t,e);return o.reset({x:0,y:0,width:i,height:s}),o},i.exports=l}),define("com/rebels/game/items/Exit",["require","exports","module","PIXI","./Item","../collision/Crash","fido/sound/SoundBridge"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=(t("../collision/Crash"),t("fido/sound/SoundBridge")),n=function(t,e){var i=new s.Container;o.call(this,t,e,i,null),this._body=new p2.Body({mass:0,position:[96,96],angle:0}),boxShape=new p2.Rectangle(96,32),boxShape.sensor=!0,this._body.addShape(boxShape),this.platform=null,this.dir=-1,this.type=7,this.playerCount=0,this.keepInBonus=!1,this.chopper=new s.Sprite.fromFrame("exit_chopper.png"),this.chopper.anchor.x=.5,this.chopper.position.y=-3,i.addChild(this.chopper),this.count=0,this.arrow=new s.Sprite.fromFrame("exit_arrow.png"),i.addChild(this.arrow),this.groups=["exit"],this.arrow.position.x=-107,this.arrow.position.y=-33,this.chopper.hitArea=this.arrow.hitArea=new s.Rectangle,this.walkOff=!0};n.prototype.update=function(){this.arrow.alpha=.5+.5*Math.random(),this.position.x=this._body.position[0],this.position.y=this._body.position[1],this.view.rotation=this._body.angle,this.walkOff&&(this.arrow.alpha=0,this.count++,29===this.count&&r.sfx.playGroup("chopper"),this.count>30&&(this.chopper.position.x+=2,this.chopper.scale.x=-1))},n.prototype.reset=function(t){this.walkOff=!1,this.chopper.scale.x=1,this._body.position[0]=t.x,this._body.position[1]=t.y,this.platform=null,this.playerCount=0,this.meta={name:"exit"},this.chopper.position.x=-20},n.prototype.onCollideBegin=function(t,e,i){(i.shapeA._main||i.shapeB._main)&&(2===t.type&&(t.arriveAtExit(),this.playerCount++),3===this.playerCount&&(r.sfx.play("victory"),this.world.game.completeScript.run(),this.count=0,this.walkOff=!0))},n.prototype.onCollideEnd=function(t,e,i){(i.shapeA._main||i.shapeB._main)&&2===t.type&&(t.leaveExit(),this.playerCount>0&&this.playerCount--)},i.exports=n}),define("com/rebels/game/items/view/ForceHighlight",["require","exports","module","PIXI"],function(t,e,i){var s=t("PIXI"),o=function(t){var t=t||{};this.scale=t.scale||1,this.active=!1,this.count=0,this.view=new s.Container,this.highlight=new s.Sprite.fromFrame("force_bubble_smallA.png"),this.highlight.blendMode=s.isWebGL?s.BLEND_MODES.ADD:0,this.highlight.anchor.set(.5),this.highlight.scale.set(0),this.highlight2=new s.Sprite.fromFrame("force_bubble_smallB.png"),this.highlight2.anchor.set(.5),this.highlight2.blendMode=s.isWebGL?s.BLEND_MODES.ADD:0,this.highlight.addChild(this.highlight2),this.view.addChild(this.highlight),s.isWebGL?(this.displacementSprite=new s.Sprite.fromImage(ASSET_URL+"img/game/world_2/displace.jpg"),this.displacementSprite.anchor.x=this.displacementSprite.anchor.y=.5,this.displacementSprite.scale.set(.3),this.highlight.addChild(this.displacementSprite),this.displacementFilter=new s.filters.DisplacementFilter(this.displacementSprite)):this.highlight.alpha=.4,this.view.visible=!1};o.prototype.update=function(){this.count++,this.active&&(this.displacementFilter&&(this.displacementSprite.position.x=.8*this.count,this.displacementSprite.position.y=.8*this.count),this.highlight.rotation+=.01)},o.prototype.activate=function(){this.view.visible=!0,this.active=!0,this.isDying=!1,this.displacementFilter&&(this.highlight.filters=[this.displacementFilter]),TweenLite.to(this.highlight.scale,1.4,{x:this.scale,y:this.scale,ease:Back.easeOut.config(1.4)}),this.isDown=!0},o.prototype.deactivate=function(){this.isDying=!0,TweenLite.to(this.highlight.scale,.4,{x:0,y:0,ease:Circ.easeIn,onComplete:function(){this.highlight.filters=null,this.active=!1,this.isDying=!1,this.view.visible=!1}.bind(this)})},i.exports=o}),define("com/rebels/game/items/components/ForcePickup",["require","exports","module","PIXI","fido/utils/Math2","fido/game/GameObjectPool","signals","com/rebels/game/items/view/ForceHighlight","fido/sound/SoundBridge"],function(t,e,i){var s=t("PIXI"),o=(t("fido/utils/Math2"),t("fido/game/GameObjectPool"),t("signals")),r=t("com/rebels/game/items/view/ForceHighlight"),n=t("fido/sound/SoundBridge"),a=function(t){this.item=t,this.onItemDown=new o,this.item.view.mousedown=this.item.view.touchstart=this.onDown.bind(this),this.item.view.mouseup=this.item.view.mouseupoutside=this.item.view.touchend=this.item.view.touchendoutside=this.onUp.bind(this),this.item.view.mousemove=this.item.view.touchmove=this.onMove.bind(this),this.item.buttonMode=!0,this.counter=0,this.isDown=!1,this.target=new s.Point,this.oldMass=0,this.active=!1,this.count=0,this.count=1e3*Math.random(),this.forceHighlight=new r,this.item.view.addChild(this.forceHighlight.view)};a.prototype.activate=function(){n.sfx.play("forcecrate"),this.active=!0,this.item.view.interactive=!0,this.item.view.texture=s.Texture.fromFrame(this.item.meta.frameActive),this.item.onMoveWithForce&&this.item.onMoveWithForce.dispatch()},a.prototype.deactivate=function(){this.active=!1,this.item.view.interactive=!1,this.item.view.texture=s.Texture.fromFrame(this.item.meta.frame),this.onUp()},a.prototype.update=function(){var t=this.item;if(this.active&&(this.forceHighlight.update(),this.count++,t.view.rotation=.05*Math.sin(this.count/10)),this.isDown){var e=[this.target.x,this.target.y],i=t._body.position,s=e[0]-i[0],o=e[1]-i[1],r=Math.sqrt(s*s+o*o),n=s/r,a=o/r;t._body.velocity[0]+=10*n,t._body.velocity[1]+=10*a,t._body.velocity[0]*=.95,t._body.velocity[1]*=.95}},a.prototype.onMove=function(t){this.target=t.data.getLocalPosition(this.item.view.parent)},a.prototype.onDown=function(){this.forceHighlight.activate(),this.isDown=!0,this.onItemDown.dispatch()},a.prototype.onUp=function(){this.item.view.alpha=1,this.isDown=!1,this.forceHighlight.deactivate()},i.exports=a}),define("com/rebels/game/CrashSoundManager",["require","exports","module","PIXI","fido/sound/SoundBridge","signals","fido/system/Device"],function(t,e,i){var s=(t("PIXI"),t("fido/sound/SoundBridge")),o=(t("signals"),t("fido/system/Device")),r=function(){this.delay=0,this.rollNoise=0,this.ignoreRoll=!0};r.prototype.crash=function(t){this.delay>0||(this.delay=15,s.sfx.playGroup("crashnoise"))},r.prototype.update=function(){this.delay--},r.prototype.rolling=function(t){!this.ignoreRoll&&o.instance.desktop&&(this.rollNoise++,1===this.rollNoise&&s.sfx.play("box_push_grind"))},r.prototype.stopRolling=function(t){this.rollNoise--,0===this.rollNoise&&s.sfx.stop("box_push_grind")},r.prototype.reset=function(){s.sfx.stop("box_push_grind")},r.instance=new r,i.exports=r}),define("com/rebels/game/items/MovableBlock",["require","exports","module","PIXI","fido/sound/SoundBridge","./Item","signals","../collision/Crash","./Consts","../P2Materials","./components/ForcePickup","./components/Explodable","fido/goals/Goals","../CrashSoundManager"],function(t,e,i){var s=t("PIXI"),o=t("fido/sound/SoundBridge"),r=t("./Item"),n=t("signals"),a=(t("../collision/Crash"),t("./Consts"),t("../P2Materials").materials),h=t("./components/ForcePickup"),l=t("./components/Explodable"),c=t("fido/goals/Goals"),u=t("../CrashSoundManager"),d=(new s.Graphics).beginFill(16777215).drawCircle(0,0,50),p=(d.generateTexture(),0),f=function(t,e){var i=new s.Sprite.fromFrame("crate_01.png");i.anchor.set(.5),r.call(this,t,e,i,null),this.onRotate=new n,this.onMoveWithForce=new n,this.onMove=new n,this._body=null,this.speed=0,this.prevX=0,this.prevY=0,this.counter=0,this.dir=-1,this.type=6,this.groups=["blocks"],this.keepInBonus=!1,this.meta=null,this.forcePickup=new h(this),this.explode=new l(this),this.explode.onExplode.add(this.onExplode,this),this.stopDispatch=!1,this.stopDispatch2=!1,this.soundIsPlaying=!1,this.isMoving=!1,this.rollSound=null};f.prototype=Object.create(r.prototype),f.prototype.onExplode=function(){c.instance.increment("bombs",1),"DM_world2_level3"===this.world.game.levelData.id&&c.instance.increment("chainReaction",1)},f.prototype.update=function(){this.position.x=this._body.position[0],this.position.y=this._body.position[1];var t=this.position.x-this.prevX,e=this.position.y-this.prevY;this.speed=Math.sqrt(t*t,e*e),this.prevX=this.position.x,this.prevY=this.position.y,this.counter++,this.view.rotation=this._body.angle,Math.abs(this._body.angle)>Math.PI+Math.PI/5&&"bridge"===this.meta.type&&!this.stopDispatch&&(o.sfx.playGroup("crashnoise"),this.stopDispatch=!0,this.onRotate.dispatch()),Math.abs(this._body.velocity[0])>10&&!this.stopDispatch2&&(this.stopDispatch2=!0,this.onMove.dispatch()),Math.abs(this._body.velocity[0])>20&&"zeb"===this.world.game.player._charId&&this._body.mass>=25&&!this.soundIsPlaying&&Math.abs(this.world.game.player.view.position.x-this.view.position.x)<=100&&Math.abs(this.world.game.player.view.position.y-this.view.position.y)<=100&&(this.soundIsPlaying=!0,o.sfx.play("Zeb_blockPush")),this.soundIsPlaying&&Math.abs(this._body.velocity[0])<=.1&&(this.soundIsPlaying=!1);var i=Math.abs(this.speed)>=.5&&this._body.mass>=25&&"bridge"!==this.meta.type&&!this.meta.explodable;i!=this.isMoving&&(this.isMoving=i,i?u.instance.rolling():u.instance.stopRolling()),this.rollSound&&this.rollSound.volume(.1*Math.abs(this.speed)),this.forcePickup.update(),this.position.y>700&&this.destroy()},f.prototype.reset=function(t){var e=t.meta;this.meta=e,this.stopDispatch=!1,this.stopDispatch2=!1,this.soundIsPlaying=!1,this.speed=0,this.prevX=0,this.prevY=0,this.counter=0,this.explode.reset(),this.explode.active=e.explodable||this.meta.breakable,this.explode.fuse=0,this._body=new p2.Body({mass:e.mass||25,position:[t.x,t.y],angle:e.rotation*(Math.PI/180),type:t.meta["static"]?p2.Body.STATIC:p2.Body.DYNAMIC});var i=null;if(e.frame&&(this.view.texture=s.Texture.fromFrame(e.frame)),this.view.scale.set(1),1===e.shape){i=new p2.Circle({radius:e.width/2}),this.view.width=this.view.height=e.width}else i=new p2.Box({width:e.width,height:e.height}),this.view.width=e.width,this.view.height=e.height;i.material=a.block,i._main=!0,this._body.addShape(i),this.isMoving&&p--,this.isMoving=!1,this.prevX=this._body.position[0],this.update(),this.forcePickup.deactivate()},f.prototype.onCollideBegin=function(t,e,i){if(i.contactEquations.length){var s=i.contactEquations[0].getVelocityAlongNormal();s>15&&this.speed>1&&u.instance.crash(s)}},p2.ContactEquation.prototype.getVelocityAlongNormal=function(){var t=p2.vec2.create(),e=p2.vec2.create(),i=p2.vec2.create();return this.bodyA.getVelocityAtPoint(t,this.contactPointA),this.bodyB.getVelocityAtPoint(e,this.contactPointB),p2.vec2.subtract(i,t,e),p2.vec2.dot(this.normalA,i)},i.exports=f}),define("com/rebels/game/items/Door",["require","exports","module","PIXI","./Item","../collision/Crash","./view/AnimationManager","fido/sound/SoundBridge"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=(t("../collision/Crash"),t("./view/AnimationManager")),n=[],a=t("fido/sound/SoundBridge"),h=function(t,e,i){if(o.call(this,100,100,new s.Sprite,null),this.view.anchor.set(.5),n.length<1)for(var a=1;7>a;a++)n.push(s.Texture.fromFrame("doors_animation_"+a+".png"));this._body=new p2.Body({mass:0,position:[0,0],angle:0}),boxShape=new p2.Rectangle(52,128),this._body.addShape(boxShape),this.boxShape=boxShape,this.animations=new r,this.animations.register("open",{frames:n}),this.animations.register("close",{frames:n.slice().reverse()}),this.isOpended=!0,this.groups=["switchable"]};h.prototype.reset=function(t){this._body.position[0]=t.x,this._body.position[1]=t.y,this._body.velocity[0]=0,this._body.velocity[1]=0,this.view.rotation=this._body.angle=t.meta.rotation*(Math.PI/180),this.view.x=t.x,this.view.y=t.y,this.meta=t.meta,this.isOpended=!this.meta.opened,this.deactivate(!0)},h.prototype.update=function(){this.count+=.3,this.view._texture=this.animations.texture,this.animations.update()},h.prototype.activate=function(){this.meta.opened?this.close():this.open()},h.prototype.deactivate=function(t){this.meta.opened?this.open(t):this.close(t)},h.prototype.togglePhysics=function(t){this.ignoreLaser=t,this.boxShape.sensor=t},h.prototype.open=function(t){this.isOpended||(this.isOpended=!0,t||a.sfx.play("doorOpen"),this.animations.onComplete.addOnce(function(){this.togglePhysics(!0)}.bind(this)),this.animations.play("open"))},h.prototype.close=function(t){this.isOpended&&(this.isOpended=!1,t||a.sfx.play("doorOpen"),this.animations.onComplete.addOnce(function(){this.togglePhysics(!1)}.bind(this)),this.animations.play("close"))},h.prototype.onPlayerCollide=function(t,e){return},i.exports=h}),define("com/rebels/game/items/FlatButton",["require","exports","module","PIXI","./Item","../collision/Crash","fido/goals/Goals","fido/sound/SoundBridge"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=t("../collision/Crash"),n=t("fido/goals/Goals"),a=t("fido/sound/SoundBridge"),h=function(t,e,i){var n=new s.Sprite.fromFrame("lothal_button_off.png");o.call(this,100,100,n,r.CrashBody.fromRect(0,32,64,26)),n.anchor.set(.5,1),n.pivot.y=-14,this.view.addChild(n),this._body=new p2.Body({mass:0,position:[0,0],angle:0}),boxShape=new p2.Rectangle(64,26),boxShape.sensor=!0,this._body.addShape(boxShape),this.groups=["FlatButton"],this.collisonData=null,this.keepInBonus=!1,this.isDown=!1,this.onCount=0,this.gracePeriod=0,this.amount=s.isWebGL?30:5,Device.instance.desktop||(this.amount=5)};h.prototype.reset=function(t){if(this.smokes)for(var e=0;e<this.smokes.length;e++)this.view.removeChild(this.smokes[e]);this.smokePool=[],this.smokes=[],this._body.position[0]=t.x,this._body.position[1]=t.y,this._body.velocity[0]=0,this._body.velocity[1]=0,this.view.x=t.x,this.view.y=t.y,this.meta=t.meta,this.home=t.y,this.isDown=!1,this.collisonData=null,this.onCount=0,this.unpress()},h.prototype.smoke=function(){for(var t=0;t<this.amount;t++){var e=this.smokePool.pop();e||(e=new s.Sprite.fromFrame("steam.png")),e.anchor.x=e.anchor.y=.5,e.position.y=0,e.position.x=20*Math.random()-10,e.alpha=1,e.rotation=Math.random()*Math.PI*2;var i=Math.floor(2*Math.random());e.speedRotation=i?1:-1,e.speed=new s.Point(2*Math.random()-1,-(2*Math.random()+.5)),e.coefdecrement=.99,e.scale.x=e.scale.y=.03,this.smokes.push(e),this.view.addChild(e)}},h.prototype.easeOutCubic=function(t,e,i,s){return t/=s,t--,i*(t*t*t+1)+e},h.prototype.update=function(){for(var t=0;t<this.smokes.length;t++)this.smokes[t].scale.x+=.006,this.smokes[t].x+=this.smokes[t].speed.x,this.smokes[t].y+=this.smokes[t].speed.y,this.smokes[t].scale.y+=.006,this.smokes[t].rotation+=.005*this.smokes[t].speedRotation,this.smokes[t].alpha*=.99,this.smokes[t].speed.x*=this.smokes[t].coefdecrement,this.smokes[t].speed.y*=this.smokes[t].coefdecrement,this.smokes[t].alpha<.02&&(this.smokes[t].scale.x=0,this.smokes[t].scale.y=0,this.smokes[t].alpha=0,this.smokePool.push(this.smokes[t]),this.smokes.splice(t,1),t--,this.view.removeChild(this.smokes[t]));if(this.gracePeriod++,5===this.gracePeriod)if(this.isDown){if(this.press(),this.meta)for(var e=this.world.findAll("switchable",this.meta.name),t=0;t<e.length;t++){var i=e[t];10===i.type?i.deactivate():i.activate()}}else if(this.unpress(),this.meta)for(var e=this.world.findAll("switchable",this.meta.name),t=0;t<e.length;t++){var i=e[t];10===i.type?i.activate():i.deactivate()}},h.prototype.press=function(){a.sfx.play("floorbutton"),this.view.texture=s.Texture.fromFrame("lothal_button_on.png"),this.isDown=!0,TweenLite.delayedCall(.3,this.smoke.bind(this)),n.instance.increment("switches",1)},h.prototype.unpress=function(){this.view.texture=s.Texture.fromFrame("lothal_button_off.png"),this.isDown=!1},h.prototype.onCollideBegin=function(t,e,i){(i.shapeA.sensor!==!0||i.shapeB.sensor!==!0)&&(i.shapeA._main||i.shapeB._main)&&(this.onCount++,1===this.onCount&&(this.isDown=!0,this.gracePeriod=0))},i.exports=h}),define("com/rebels/game/items/FlatButtonToggle",["require","exports","module","PIXI","./FlatButton","../collision/Crash"],function(t,e,i){var s=(t("PIXI"),t("./FlatButton")),o=(t("../collision/Crash"),function(){s.call(this)});o.prototype=Object.create(s.prototype),this.collisonData=null,o.prototype.onCollideEnd=function(t,e,i){(i.shapeA.sensor!==!0||i.shapeB.sensor!==!0)&&(i.shapeA._main||i.shapeB._main)&&(this.onCount--,this.isDown&&0===this.onCount&&(this.isDown=!1,this.gracePeriod=0))},i.exports=o}),define("com/rebels/game/items/CrawlZone",["require","exports","module","PIXI","./Item","../collision/Crash","./Consts","fido/goals/Goals"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=t("../collision/Crash"),n=(new s.Graphics).beginFill(16763904,0).drawRect(-50,-50,100,100).generateTexture(),a=(t("./Consts"),!0),h=t("fido/goals/Goals"),l=function(t,e,i){i=i||new r.CrashBody.fromRect(0,0,100,100),i.type=r.CrashBody.STATIC,this._body=new p2.Body({mass:0,position:[200,150],angle:0});var h=new s.Sprite(n);h.anchor.set(.5),o.call(this,t,e,h,i);var h=null;a&&(h=new s.Sprite(n),h.anchor.set(.5),h.position=i.position),o.call(this,t,e,h,i),this.type=9,this.passthrough=!1,this.hasBeenCollided=!1};l.prototype.reset=function(t){var e=this._body;boxShape=new p2.Rectangle(t.width,t.height),e.shapes[0]&&e.removeShape(e.shapes[0]),e.addShape(boxShape),boxShape.sensor=!0,e.angle=t.rotation||0,e.position[0]=t.x,e.position[1]=t.y,this.view.position.x=t.x,this.view.position.y=t.y,this.view.rotation=t.rotation||0,this.view.scale.set(t.width/100,t.height/100),this.hasBeenCollided=!1},l.prototype.onCollideBegin=function(t,e,i){"ezra"!==this.world.game.player._charId||this.hasBeenCollided||(h.instance.increment("venting",1),this.hasBeenCollided=!0)},l.fromRect=function(t,e,i,s){var o=new l(t,e);return o.reset({x:0,y:0,width:i,height:s}),o},i.exports=l}),define("com/rebels/game/items/MovingPlatform",["require","exports","module","PIXI","./Item","../collision/Crash","fido/sound/SoundBridge"],function(t,e,i){
var s=t("PIXI"),o=t("./Item"),r=t("../collision/Crash"),n=t("fido/sound/SoundBridge"),a=function(t,e){var i=r.CrashBody.fromRect(-64,0,128,10),n=i.getDebugView(),a=new s.Sprite.fromFrame("elevator1.png");a.anchor.set(.5,1),a.scale.x=-1,a.pivot.y=-40,n.addChild(a),this.home=e,o.call(this,t,e,n,null),this._body=new p2.Body({mass:10,position:[0,0],angle:0,type:p2.Body.KINEMATIC}),this._body.gravityScale=0,boxShape=new p2.Rectangle(128,10),this._body.addShape(boxShape,[0,12]),this.preassureContacts={},this.pressureCount=0,this.keepInBonus=!1,this.active=!0,this.tick=0,this.top=0,this.bottom=0,this.movingup=!0,this.groups.push("switchable")};a.prototype.update=function(){this.tick+=.05;var t=40;this.active?(this._body.velocity[1]=t,this._body.position[1]>this.bottom&&(this._body.velocity[1]=0),0===this.pressureCount):(this._body.velocity[1]=-t,this._body.position[1]<this.top&&(this._body.velocity[1]=0)),this.pressureCount>0&&(this._body.velocity[1]=0),this.view.position.x=this._body.position[0],this.view.position.y=this._body.position[1]},a.prototype.activate=function(){this.forward=!1,this.active=!0,n.sfx.play("movingPlatform"),this.pressureCount=0,this.preassureContacts={}},a.prototype.deactivate=function(){n.sfx.play("movingPlatform"),this.active=!1,this.forward=!0,this.pressureCount=0,this.preassureContacts={}},a.prototype.reset=function(t){this.meta=t.meta,this.pressureCount=0,this.preassureContacts={},"toggle"===this.meta.mode?(this.toggle=!0,this.active=!1,this.count=0):(this.toggle=!1,this.active=!this.meta.stop),this.position.x=t.x,this.position.y=t.y,this.top=t.y+t.meta.y,this.bottom=t.y+t.meta.y2,this._body.position[0]=t.x,this._body.position[1]=this.top},a.prototype.onCollideBegin=function(t,e){e&&this.active&&e.normalA[1]>0&&(this.pressureCount++,this.preassureContacts[t.UID]=!0)},a.prototype.onCollideEnd=function(t){this.preassureContacts[t.UID]&&(this.preassureContacts[t.UID]=null,this.pressureCount--)},i.exports=a}),define("com/rebels/game/items/MovingPlatform2",["require","exports","module","PIXI","./Item","../collision/Crash","../P2Materials"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=t("../collision/Crash"),n=t("../P2Materials").materials,a=function(t,e){var i=(r.CrashBody.fromRect(-84,-5,168,10),new s.Container);this.home=e,o.call(this,t,e,i,null),this._body=new p2.Body({mass:10,position:[0,0],angle:0,friction:1,type:p2.Body.KINEMATIC}),this._body.gravityScale=0,boxShape=new p2.Rectangle(168,10),boxShape.material=n.platform,this._body.addShape(boxShape),this.preassureContacts={},this.pressureCount=0,this.keepInBonus=!1,this.active=!0,this.tick=0,this.left=0,this.right=0,this.movingup=!0,this.delay=180,this.delayCount=0,this.actives=[],this.groups.push("switchable");var a=new s.Sprite.fromFrame("moving_platform.png");a.anchor.set(.5),this.view.addChild(a),this.movingPlatformLight=new s.Sprite.fromFrame("moving_platform_light.png"),this.movingPlatformLight.position.y=-5,this.movingPlatformLight.anchor.set(.5),a.addChild(this.movingPlatformLight)};a.prototype.update=function(){this.tick+=.05;var t=1.5;this.movingPlatformLight.alpha=.5+.49*Math.abs(Math.cos(this.tick/2)),this.active?this.delayCount>this.delay?(this._body.position[0]+=t,this._body.position[0]>this.right&&(this._body.velocity[0]=0,this.active=!1,this.delayCount=0)):(t=0,this.delayCount++):this.delayCount>this.delay?(this._body.position[0]+=-t,this._body.position[0]<this.left&&(this._body.velocity[0]=0,this.active=!0,this.delayCount=0)):(t=0,this.delayCount++),this.view.position.x=this._body.position[0],this.view.position.y=this._body.position[1];for(var e=0;e<this.actives.length;e++){var i=this.actives[e];this.active?i._body.position[0]+=t:i._body.position[0]-=t}},a.prototype.activate=function(){this.forward=!1,this.active=!0,this.pressureCount=0,this.preassureContacts={}},a.prototype.deactivate=function(){this.active=!1,this.forward=!0,this.pressureCount=0,this.preassureContacts={}},a.prototype.reset=function(t){this.meta=t.meta,this.pressureCount=0,this.preassureContacts={},this.actives=[],"toggle"===this.meta.mode?(this.toggle=!0,this.active=!1,this.count=0):(this.toggle=!1,this.active=!this.meta.stop),this.left=t.x+t.meta.x,this.right=t.x+t.meta.x2,this._body.position[0]=this.position.x=this.left,this._body.position[1]=t.y+2},a.prototype.onCollideBegin=function(t,e,i){if((i.shapeA._main||i.shapeB._main)&&e){if(-1!==this.actives.indexOf(t))return;e.normalA[1]<0&&this.actives.push(t)}},a.prototype.onCollideEnd=function(t,e,i){if(i.shapeA._main||i.shapeB._main){var s=this.actives.indexOf(t);-1!=s&&this.actives.splice(s,1)}},i.exports=a}),define("com/rebels/game/items/CollapsingPlatform",["require","exports","module","PIXI","./Item","../collision/Crash","../P2Materials"],function(t,e,i){var s=(t("PIXI"),t("./Item")),o=t("../collision/Crash"),r=t("../P2Materials").materials,n=function(t,e){var i=o.CrashBody.fromRect(-32,-12,64,24);i.type=o.CrashBody.STATIC;var n=i.getDebugView();s.call(this,t,e,n),this.home=e,this._body=new p2.Body({mass:0,position:[0,0],angle:0});var a=new p2.Box({width:64,height:24});a.material=r.platform,this._body.addShape(a),this.active=!1,this.tick=0};n.prototype.update=function(){this.active&&(this.tick++,this.tick>3e7?(this._body.shapes[0].collisionMask=1,this.view.position.x=this._body.position[0],this.view.position.y=this._body.position[1],this.active=!1,this.tick=0,this.view.position.y=this.home,this.view.scale.set(0),TweenLite.to(this.view.scale,.2,{x:1,y:1,ease:Back.easeOut}),this.view.rotation=0):this.tick>30?(this.tick>33&&(this._body.shapes[0].collisionMask=2),this.view.position.y+=4):this.view.rotation=.2*(Math.random()-.5))},n.prototype.reset=function(t){this._body.position[0]=t.x,this._body.position[1]=t.y,this.view.position.x=this._body.position[0],this.view.position.y=this._body.position[1],this.canCollide=!0,this.collisonData=null,this.tick=0,this.active=!1,this.view.rotation=0,this.home=t.y},n.prototype.onCollideBegin=function(t,e,i){if(!this.active&&e){var s=1;t._body===i.bodyA&&(s=-1),2===t.type&&i.contactEquations[0].normalA[1]*s===-1&&(this.active=!0)}},i.exports=n}),define("com/rebels/game/items/Drone",["require","exports","module","PIXI","./Item","fido/sound/SoundBridge","../collision/Crash","fido/utils/Math2","./Consts","../P2Materials","fido/utils/Utils","fido/game/GameObjectPool","com/rebels/game/items/ExplosionLevel1","fido/goals/Goals"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=t("fido/sound/SoundBridge"),n=(t("../collision/Crash"),t("fido/utils/Math2")),a=(t("./Consts"),t("../P2Materials").materials,t("fido/utils/Utils"),t("fido/game/GameObjectPool")),h=t("com/rebels/game/items/ExplosionLevel1"),l=t("fido/goals/Goals"),c=function(t,e){var i=32,r=32,n=new s.Container;o.call(this,t,e,n,null),this._body=new p2.Body({mass:1e3,position:[0,0],angle:0,fixedRotation:!0}),this._body.gravityScale=0,boxShape=new p2.Rectangle(i,r),this.box=boxShape,this._body.addShape(boxShape);for(var a=[0,0,90,-40,90,40,0,2],h=[],l=0;l<a.length;l+=2)h.push([a[l],a[l+1]]);this.counter=0,this.isOn=!0,this.right=!1,this.drone=new s.Sprite.fromFrame("drone_01.png"),this.drone.anchor.x=this.drone.anchor.y=.5,this.view.addChild(this.drone),this.containerLights=new s.Container,this.containerLights.position.x=-10,this.containerLights.position.y=15,this.lights=[];for(var l=0;3>l;l++){var c=new s.Sprite.fromFrame("drone_light_scan_green.png");c.anchor.x=0,c.anchor.y=.5,c.alpha=.3*Math.random()+.69,c.blendMode=s.isWebGL?s.BLEND_MODES.ADD:0,c.counter=100*Math.random();var u=new s.Sprite.fromFrame("drone_light_ray_green.png");u.anchor.x=0,u.anchor.y=.5,u.alpha=.3*Math.random()+.69,u.counter=100*Math.random(),u.blendMode=s.isWebGL?s.BLEND_MODES.ADD:0,this.containerLights.addChild(c),this.containerLights.addChild(u),this.lights.push(c,u)}this.drone.addChild(this.containerLights);var d=new p2.Convex({vertices:h});d.sensor=!0,this._body.addShape(d),this.laserSensor=d,this.dir=1,this.type=6,this.active=!0,this.groups=["enemy"],this.keepInBonus=!1,this.targetPosition=new s.Point,this.rotationCount=0,this.meta=null,this.livesBodyLight=100,this.lightAreDead=!1,this.livesBody=30,this.lives=200,this.isExploding=!1};c.prototype=Object.create(o.prototype),c.prototype.toggleDrone=function(){this.isOn=!this.isOn,this.isOn&&this.itemSupposedToDieOnWakeUp&&(this.world.game.deathType="drone",r.sfx.play("caught_by_droid"),this.world.game.bustedScript.run({owner:this,player:this.itemSupposedToDieOnWakeUp}))},c.prototype.update=function(){if(this.position.x=this._body.position[0],this.position.y=this._body.position[1],this.counter++,this.counter%180===0&&this.toggleDrone(),this.active){this.containerLights.rotation=this._body.angle+this.right?-215*Math.PI/180:0;for(var t=0;t<this.lights.length;t++)this.lights[t].counter++,this.lights[t].alpha=this.isOn?Math.abs(.29*Math.sin(Math.tan(this.lights[t].counter/10)))+.7:0,this.lights[t].rotation+=.008*Math.cos(this.lights[t].counter/10);this.drone.position.x=5*Math.cos(this.counter/100),this.drone.position.y=Math.cos(this.counter/100)*Math.sin(this.counter/10),this.active&&(this.rotationCount+=.03,this._body.angle=n.map(Math.sin(this.rotationCount),-1,1,Math.PI/2+.6,.9*Math.PI)+(this.right?225*Math.PI/180:0))}else this.drone.rotation=this._body.angle,this.lives>=0?(this.lives--,this.livesBody<=0?(this._body.velocity[0]=100*Math.random()-50,this._body.velocity[1]=400*Math.random()-200,this._body.angularVelocity=10*Math.random(),this.livesBody=60*Math.random()+60):this.livesBody--,this.livesBodyLight<=0&&!this.lightAreDead?(this.containerLights.alpha=0,this.lightAreDead=!0):this.lightAreDead||(this.livesBodyLight--,this.containerLights.alpha=Math.abs(Math.sin(.8*Math.tan(this.counter/10))))):this.explodeDrone()},c.prototype.explodeDrone=function(){l.instance.increment("ITODroid",1);var t=a.getObject(h);t.reset({x:this._body.position[0],y:this._body.position[1]}),this.world.add(t),this.destroy()},c.prototype.reset=function(t){var e=t.meta;this.itemSupposedToDieOnWakeUp=null,this.livesBodyLight=100,this.livesBody=30,this.lightAreDead=!1,this.lives=160,this.isExploding=!1,this.drone.visible=!0,this.containerLights.alpha=1,this.drone.rotation=0,this.isOn=!0,this.right=!1,this.counter=Math.floor(100*Math.random()),this.meta=e,this.meta.right?(this.right=!0,this.view.scale.x=-1):(this.right=!1,this.view.scale.x=1),this._body.position[0]=t.x,this._body.position[1]=t.y,this._body.velocity[0]=0,this._body.velocity[1]=0,this._body.angularVelocity=0,this.active=!0,this._body.mass=1e3,this.view.children[0].visible=!0,this._body.gravityScale=0,this._body.angle=0,this._body.fixedRotation=!1,this._body.updateMassProperties(),this.update()},c.prototype.deactivate=function(){r.sfx.play("cameradestroy"),this.active=!1,this._body.mass=20,this._body.gravityScale=1,this._body.fixedRotation=!1,this._body.updateMassProperties()},c.prototype.onCollideEnd=function(t,e,i){2===t.type&&(i.shapeA.sensor===!0||i.shapeB.sensor===!0)&&(this.itemSupposedToDieOnWakeUp=!1)},c.prototype.onCollideBegin=function(t,e,i){if(this.active)if(i.contactEquations.length,2===t.type)(i.shapeA===this.box||i.shapeB===this.box)&&(this.world.game.deathType="drone",this.world.game.bustedScript.run({owner:this,player:t})),this.isOn?(i.shapeA.sensor===!0||i.shapeB.sensor===!0)&&(this.world.game.deathType="drone",r.sfx.play("caught_by_droid"),this.world.game.bustedScript.run({owner:this,player:t})):(i.shapeA.sensor===!0||i.shapeB.sensor===!0)&&(this.itemSupposedToDieOnWakeUp=t);else if(i.contactEquations.length){var s=i.contactEquations[0].getVelocityAlongNormal();s>30&&this.deactivate()}else 67===t.type&&this.deactivate()},p2.ContactEquation.prototype.getVelocityAlongNormal=function(){var t=p2.vec2.create(),e=p2.vec2.create(),i=p2.vec2.create();return this.bodyA.getVelocityAtPoint(t,this.contactPointA),this.bodyB.getVelocityAtPoint(e,this.contactPointB),p2.vec2.subtract(i,t,e),p2.vec2.dot(this.normalA,i)},i.exports=c}),define("com/rebels/game/items/Trooper",["require","exports","module","PIXI","./Item","../collision/Crash","fido/utils/Math2","./Consts","../P2Materials","fido/system/Ticker"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=(t("../collision/Crash"),t("fido/utils/Math2"),t("./Consts"),t("../P2Materials").materials),n=t("fido/system/Ticker"),a=function(t,e){var i=24.5,n=85,a=new s.Container;o.call(this,t,e,a,null),this.groundCheck=!0,this._body=new p2.Body({mass:40,position:[0,0],angle:0,fixedRotation:!0}),boxShape=new p2.Rectangle(i,n),boxShape.material=r.player,this._body.addShape(boxShape),this.ignoreLaser=!0;this.laser=new s.Sprite.fromFrame("trooper_laser_add.png"),this.laser.anchor.y=.5,this.laser.position.y=-12,this.laserRay=new s.Sprite.fromFrame("trooper_laser.png"),this.laserRay.anchor.y=.5,this.laser.addChild(this.laserRay),this.view.addChild(this.laser),this.laserRay.blendMode=s.BLEND_MODES.ADD;var h=(new s.Graphics).beginFill(16711680).drawRect(-5,-5,10,10);h.position.x=-20,h.position.y=47.5;var l=(new s.Graphics).beginFill(16711680).drawRect(-5,-5,10,10);l.position.x=20,l.position.y=47.5,this.floorSensor=new p2.Box({width:10,height:10}),this.floorSensor.sensor=!0,this.floorSensorRight=new p2.Box({width:10,height:10}),this.floorSensorRight.sensor=!0,this._body.addShape(this.floorSensor,[h.position.x,h.position.y]),this._body.addShape(this.floorSensorRight,[l.position.x,l.position.y]),this.type=6,this.active=!0,this.groups=["enemy","trooper"],this.keepInBonus=!1,this.targetPosition=new s.Point,this.rotationCount=0,this.meta=null,this.dir=1,this.dist=99999,this.target=null,this.ray=new p2.Ray({mode:p2.Ray.ALL,from:this._body.position,to:[this._body.position[0]-1e4,this._body.position[1]],callback:function(t){if(t.body._item!=this&&!t.body._item.ignoreLaser){var e=t.getHitDistance(this.ray);e<this.dist&&(this.dist=e,this.target=t.body._item)}}.bind(this)}),this.mode=null,this.animation=new s.spine.Spine(s.loadedResources["media/img/game/characters/stormtrooper.json"].spineData),this.animation.skeleton.setSkinByName("l"),this.view.addChild(this.animation),this.animation.scale.set(.66),this.animation.state.setAnimationByName(0,"walk_gun",!0),this.animation.stateData.defaultMix=.1,this.animation.autoUpdate=!1};a.prototype=Object.create(o.prototype),a.prototype.update=function(){this.animation.update(1/60*1.4*n.game.deltaTime);this.position.x=this._body.position[0],this.position.y=this._body.position[1],this.view.rotation=this._body.angle,this.laser.alpha=.8+.2*Math.random(),this.active,this.castRay(),this.mode===a.WALK&&(this.turning?(this.turningCount--,this.turningCount<0&&(this.animation.scale.x*=-1,this.dir*=-1,this.turning=!1,this.animation.state.setAnimationByName(0,"walk_gun",!0))):this._body.velocity[0]=20*this.dir)},a.prototype.castRay=function(t){this.dist=99999,this.target=null,this.ray.from[0]=this._body.position[0],this.ray.from[1]=this._body.position[1],this.ray.to[0]=this._body.position[0]+1e4*this.dir,this.ray.to[1]=this._body.position[1],this.ray.update();var e=new p2.RaycastResult;this.world.p2world.raycast(e,this.ray),this.laser.scale.x=this.dir*(this.dist/1136),this.target&&2===this.target.type?(this.world.game.deathType="trooper",this.world.game.bustedScript.run({owner:this,player:this.target})):this.dist<30&&(this.turning||this.turn())},a.prototype.turn=function(){this.turning=!0,this.turningCount=100,this.animation.state.setAnimationByName(0,"fire",!0),this._body.velocity[0]=0},a.prototype.reset=function(t){var e=t.meta;this.mode=h[e.mode],this.meta=e,this.turningCount=0,this.turning=!1,this.dir=1,this.animation.scale.x=.66,this._body.position[0]=t.x,this._body.position[1]=t.y,this._body.velocity[0]=0,this._body.velocity[1]=0,this._body.angle=e.rotation*(Math.PI/180),this._body.angularVelocity=0,this.mode&&this.mode===a.LEFT?(this.dir=-1,this.animation.state.setAnimationByName(0,"fire",!0),this.animation.scale.x=-1*Math.abs(this.animation.scale.x)):this.mode&&this.mode===a.RIGHT&&(this.dir=1,this.animation.state.setAnimationByName(0,"fire",!0)),"left"===this.meta.direction?(this.dir=-1,this.animation.scale.x=-1*Math.abs(this.animation.scale.x),this.animation.state.setAnimationByName(0,"fire",!0)):"right"===this.meta.direction&&(this.dir=1,this.animation.state.setAnimationByName(0,"fire",!0)),this.mode?this.animation.state.setAnimationByName(0,"walk_gun",!0):this.animation.state.setAnimationByName(0,"fire",!0)},a.prototype.deactivate=function(){this.active=!1,this._body.mass=10,this.view.children[0].visible=!1,this._body.gravityScale=1,this._body.fixedRotation=!1,this._body.updateMassProperties()},a.prototype.onCollideBegin=function(t,e,i){2===t.type&&(i.shapeA._main||i.shapeB._main)&&(this.world.game.deathType="trooper",this.world.game.bustedScript.run({owner:this,player:this.target})),i.shapeA===this.floorSensor||i.shapeB===this.floorSensor},a.prototype.onCollideEnd=function(t,e,i){"force"!==t.groups[0]&&6!==t.type&&((i.shapeA===this.floorSensor||i.shapeB===this.floorSensor)&&this.turn(),(i.shapeA===this.floorSensorRight||i.shapeB===this.floorSensorRight)&&this.turn())};var h={left:0,walk:1,right:2};a.LEFT=0,a.WALK=1,a.RIGHT=2,i.exports=a}),define("fido/system/DelayedCalls",["require","exports","module","PIXI","fido/system/Ticker"],function(t,e,i){var s=(t("PIXI"),t("fido/system/Ticker")),o=function(t){this.delayedCalls=[]};o.prototype.clear=function(){this.delayedCalls=[],s.instance.remove(this.update,this),this.updating=!1},o.prototype.add=function(t,e,i){var o={func:t,args:i,tick:0,delay:e,"delete":!1};this.delayedCalls.push(o),this.updating||(s.instance.add(this.update,this),this.updating=!0)},o.prototype.update=function(){for(var t=0;t<this.delayedCalls.length;t++){var e=this.delayedCalls[t];e.tick++,e.tick>60*e.delay&&(e.func(e.args),e["delete"]=!0)}for(var t=0;t<this.delayedCalls.length;t++){var e=this.delayedCalls[t];e["delete"]&&(this.delayedCalls.splice(t,1),t--)}0===this.delayedCalls.length&&(s.instance.remove(this.update,this),this.updating=!1)},i.exports=o}),define("com/rebels/game/items/Vador",["require","exports","module","PIXI","./Item","fido/system/Ticker","fido/system/DelayedCalls"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=t("fido/system/Ticker"),n=t("fido/system/DelayedCalls"),a={left:-1,right:1},h=function(t,e){this.view=new s.Container,this.animation=new s.spine.Spine(s.loadedResources["media/img/game/characters/vader.json"].spineData),this.animation.skeleton.setSkinByName("l"),this.view.addChild(this.animation),this.animation.scale.set(.66),this.animation.state.setAnimationByName(0,"walk",!0),this.animation.stateData.defaultMix=.1,this.animation.autoUpdate=!1,this.tick=100*Math.random(),this.delayedCalls=new n,o.call(this,t,e,this.view)};h.prototype=Object.create(o.prototype),h.prototype.reset=function(t){t=t||{meta:{x:200,y:200,turnBack:!0,dir:"left",distance:100}},this.turned=!1,this.isTurning=!1,this.hasTurned=!1;var e=t.meta;this.delay=e.delay||.01,this.isReady=0===this.delay?!0:!1,this.turnBack=e.turnBack,this.dir=a[e.dir],this.distance=e.distance,this.currDist=0,this.view.x=t.x,this.view.y=t.y,this.dir>0?this.animation.scale.x=Math.abs(this.animation.scale.x):this.animation.scale.x=-Math.abs(this.animation.scale.x),this.tick=100*Math.random(),this.delay>0&&(this.animation.state.setAnimationByName(0,"grab",!0),this.animation.update(1/60*1.4*r.game.deltaTime),this.delayedCalls.add(function(){this.animation.state.setAnimationByName(0,"walk",!0),this.isReady=!0}.bind(this),this.delay))},h.prototype.turnVador=function(){this.hasTurned=!0,this.isTurning=!1,this.isStopped=!1,this.animation.scale.x*=-1,this.dir*=-1,this.animation.state.setAnimationByName(0,"walk",!0)},h.prototype.update=function(){this.isReady&&(this.isStopped||this.animation.update(1/60*1.4*r.game.deltaTime),this.isTurning||(this.view.x+=this.dir,this.currDist+=Math.abs(this.dir)),!this.turnBack||this.isTurning||this.hasTurned||this.currDist>this.distance&&(this.isTurning=!0,this.animation.state.setAnimationByName(0,"grab",!0),this.delayedCalls.add(function(){this.isStopped=!0}.bind(this),1.2),this.delayedCalls.add(this.turnVador.bind(this),2)),this.view.x<-120?this.destroy():this.view.x>1230&&this.destroy())},i.exports=h}),define("com/rebels/game/items/LaserBarrier",["require","exports","module","PIXI","./Item","../collision/Crash","fido/goals/Goals","fido/utils/Utils","fido/sound/SoundBridge","com/rebels/game/GameConfig"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=t("../collision/Crash"),n=t("fido/goals/Goals"),a=t("fido/utils/Utils"),h=t("fido/sound/SoundBridge"),l=t("com/rebels/game/GameConfig"),c=function(t,e){var i=r.CrashBody.fromRect(0,0,32,128);i.type=r.CrashBody.STATIC;var n=new s.Container;o.call(this,t,e,n,i),this._body=new p2.Body({mass:0,position:[0,0],angle:0}),boxShape=new p2.Rectangle(32,128),boxShape.sensor=!0,this._body.addShape(boxShape,[16,64]),this.groups.push("switchable"),this.type=10,this.active=!1,this.keepInBonus=!1,this.tick=0,this.containerSmoke=new s.Container,this.containerSmoke.blendMode=s.isWebGL?s.BLEND_MODES.ADD:0;var h=new s.Sprite;this.doorsTexture=a.getTexturesFromFramesWithPrefix("lasergate__000%%.png",11,0),this.doorsTextureRed=a.getTexturesFromFramesWithPrefix("redlasergate__000%%.png",10,1),this.laserDoor=new s.extras.MovieClip(this.doorsTexture),this.laserDoor.textures=this.doorsTexture,this.laserDoor.loop=!0,this.laserDoor.animationSpeed=.26,h.addChild(this.containerSmoke),h.addChild(this.laserDoor);var l=new s.Sprite.fromFrame("lasergate_front.png");h.addChild(l),this.view.addChild(h),this.smokePool=[],this.smokes=[]};c.prototype=Object.create(o.prototype),c.prototype.constructor=c,c.prototype.smoke=function(){if(s.isWebGL){var t=this.smokePool.pop();t||(t=new s.Sprite.fromFrame("smoke1_b.png")),t.anchor.x=t.anchor.y=.5,t.anchor.x=t.anchor.y=.5,t.position.x=this.laserDoor.width/2,t.position.y=this.laserDoor.height/2+Math.random()*this.laserDoor.height/2-this.laserDoor.height/4,t.alpha=.01,t.type=!0,t.rotation=Math.random()*Math.PI*2;var e=Math.floor(2*Math.random());t.speedRotation=e?1:-1,t.scale.x=t.scale.y=.003*6,this.smokes.push(t),this.containerSmoke.addChild(t)}},c.prototype.update=function(){this.tick++,this.tick%30===0&&this.active&&this.smoke();for(var t=0;t<this.smokes.length;t++)this.smokes[t].scale.x+=.003,this.smokes[t].scale.y+=.003,this.smokes[t].rotation+=.005*this.smokes[t].speedRotation,this.smokes[t].type?1.01*this.smokes[t].alpha>1?this.smokes[t].alpha=1:this.smokes[t].alpha*=1.01:this.smokes[t].alpha*=.99,this.smokes[t].alpha>=.4&&this.smokes[t].type&&(this.smokes[t].type=!1),this.smokes[t].alpha<.03&&!this.smokes[t].type&&(this.smokes[t].scale.x=0,this.smokes[t].scale.y=0,this.smokes[t].alpha=0,this.smokePool.push(this.smokes[t]),this.smokes.splice(t,1),t--,this.containerSmoke.removeChild(this.smokes[t]));!this.active&&this.lives>0?(this.lives--,this.laserDoor.alpha=Math.abs(Math.sin(.5*Math.tan(this.tick)))):this.active||(this.laserDoor.alpha=0)},c.prototype.activate=function(){this.active=!0,this.lives=20,this.laserDoor.alpha=1},c.prototype.deactivate=function(){this.active=!1,this.lives=20,this.laserDoor.alpha=1,n.instance.increment("lasers",1)},c.prototype.reset=function(t){this._body.position[0]=t.x,this._body.position[1]=t.y,this._body.angle=t.meta.rotation*(Math.PI/180),/world4/.test(l.levelId)?this.laserDoor.textures=this.doorsTextureRed:this.laserDoor.textures=this.doorsTexture,this.meta=t.meta,this.view.x=this._body.position[0],this.view.y=this._body.position[1],this.view.rotation=this._body.angle,this.canCollide=!0,this.collisonData=null,this.tick=120,this.active=!0,this.lives=20,this.laserDoor.alpha=1,this.laserDoor.tint=16777215,this.home=t.y,this.laserDoor.gotoAndPlay(Math.floor(11*Math.random()))},c.prototype.onCollideBegin=function(t,e,i){this.active&&2===t.type&&(i.shapeA._main||i.shapeB._main)&&(2===t.type&&(this.world.game.deathType="gate",this.laserDoor.tint=16711680,this.world.game.bustedScript.run({owner:this,player:t})),h.sfx.play("scan"))},i.exports=c}),define("com/rebels/game/items/FatBg",["require","exports","module","PIXI","./Item"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=function(t,e){var i=new s.Sprite;i.hitArea=new s.Rectangle,o.call(this,t,e,i)};r.prototype=Object.create(o.prototype),r.prototype.reset=function(t){var e=t.meta,i=s.Texture.fromImage(ASSET_URL+e.url);this.view.texture!=i&&this.view.texture.baseTexture.dispose(),this.view.texture=i,"ADD"===e.blend?(this.view.blendMode=s.isWebGL?s.BLEND_MODES.ADD:0,this.view.alpha=s.isWebGL?1:.4,this.view.visible=s.isWebGL?!0:!1):(this.view.blendMode=s.BLEND_MODES.NORMAL,this.view.alpha=1,this.view.visible=!0),this.view.x=t.x,this.view.y=t.y},i.exports=r}),define("com/rebels/game/items/Light",["require","exports","module","PIXI","./Item"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=function(t,e){var i=new s.Sprite;i.anchor.set(.5),i.hitArea=new s.Rectangle,this.tick=100*Math.random(),o.call(this,t,e,i)};r.prototype=Object.create(o.prototype),r.prototype.reset=function(t){var e=t.meta;this.view.texture=s.Texture.fromFrame(e.frame),this.view.blendMode=s.isWebGL?s.BLEND_MODES.ADD:0,this.view.alpha=s.isWebGL?1:.4,this.view.x=t.x,this.view.y=t.y,this.tick=100*Math.random()},r.prototype.update=function(){this.tick+=.1,this.view.alpha=.2+.5*(Math.sin(this.tick)+1)*.8},i.exports=r}),define("com/rebels/game/items/Smoke",["require","exports","module","PIXI","./Item","fido/system/Device"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=t("fido/system/Device"),n=function(t,e){var i=new s.Container;this.smokePool=[],this.smokes=[],i.hitArea=new s.Rectangle,this.amount=s.isWebGL?30:10,r.instance.desktop||(this.amount=5),!s.isWebGL&&r.instance.ipad&&(this.amount=0),o.call(this,t,e,i)};n.prototype=Object.create(o.prototype),n.prototype.reset=function(t){this.meta=t.meta,this.view.x=t.x,this.view.y=t.y,this.tick=0},n.prototype.create=function(){var t=this.smokePool.pop();t||(t=new s.Sprite.fromFrame("smoke1_b.png")),t.anchor.x=t.anchor.y=.5,t.position.y=0,"small"===this.meta.type&&(t.position.x=20*Math.random()-10),t.alpha=1,t.rotation=Math.random()*Math.PI*2;var e=Math.floor(2*Math.random());t.speedRotation=e?1:-1,t.scale.x=t.scale.y="small"===this.meta.type?.0018:.18,this.smokes.push(t),this.view.addChild(t)},n.prototype.update=function(t){this.tick+=1,this.tick%this.amount===0&&this.create();for(var e=0;e<this.smokes.length;e++)"small"===this.meta.type?(this.smokes[e].scale.x+=.0015*6,this.smokes[e].scale.y+=.0015*6,this.smokes[e].position.y-=.2,this.smokes[e].rotation+=.005*this.smokes[e].speedRotation,this.smokes[e].alpha*=.99):(this.smokes[e].scale.x+=.006*6,this.smokes[e].scale.y+=.006*6,this.smokes[e].rotation+=.005*this.smokes[e].speedRotation,this.smokes[e].alpha*=.99),this.smokes[e].alpha<.03&&(this.smokes[e].scale.x=0,this.smokes[e].scale.y=0,this.smokes[e].alpha=0,this.smokePool.push(this.smokes[e]),this.smokes.splice(e,1),e--,this.view.removeChild(this.smokes[e]))},i.exports=n}),define("com/rebels/game/items/Vignette",["require","exports","module","PIXI","./Item"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=function(t,e){var i=new s.Sprite.fromImage(ASSET_URL+"img/game/vignette_multiply.png");i.blendMode=s.isWebGL?s.BLEND_MODES.MULTIPLY:0,i.alpha=s.isWebGL?1:.2,i.hitArea=new s.Rectangle,i.pivot.y=10,o.call(this,t,e,i)};r.prototype=Object.create(o.prototype),r.prototype.reset=function(t){},i.exports=r}),define("com/rebels/game/items/Detail",["require","exports","module","PIXI","./Item"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=function(t,e){var i=new s.Sprite;o.call(this,t,e,i)};r.prototype=Object.create(o.prototype),r.prototype.reset=function(t){var e=t.meta;this.view.texture=s.Texture.fromFrame(e.frame),this.view.x=t.x,this.view.y=t.y},i.exports=r}),define("com/rebels/game/items/TutorialCopy",["require","exports","module","PIXI","signals","starwars/buttons/GoldenButton","./Item","fido/system/Device"],function(t,e,i){var s=t("PIXI"),o=t("signals"),r=t("starwars/buttons/GoldenButton"),n=t("./Item"),a=t("fido/system/Device"),h=function(t,e){this.onClose=new o;var i=new s.Container;this.bg=new s.Sprite.fromFrame("tutorial_panel.png"),this.bg.anchor.x=.55,this.bg.anchor.y=.5,i.addChild(this.bg),this.dimensions={width:503/1.65,height:129.2},this.text=new s.Text("",{font:"20px "+window.MAIN_FONT,fill:"#ccffff",align:"center"}),this.text.anchor.set(.5),this.text.position.x=15,this.bg.addChild(this.text),this.closeButton=new r("icon_close.png"),this.closeButton.setSize("small"),this.closeButton.backgroundColor="red",this.closeButton.onPress.add(this.closePressed,this),this.closeButton.visible=!1,this.closeButton.x=this.bg.width/2-this.closeButton.width/2,this.closeButton.y=-this.bg.height/2+10,this.bg.addChild(this.closeButton),n.call(this,t,e,i),this.groups=["tutorial"]};h.prototype=Object.create(n.prototype),h.prototype.closePressed=function(t){this.onClose.dispatch()},h.prototype.hide=function(t){TweenLite.to(this.bg,.2,{alpha:0}),TweenLite.to(this.bg.scale,.1,{x:1.3,y:0,ease:Sine.easeOut,onComplete:function(){this.view.visible=!1}.bind(this)})},h.prototype.show=function(){this.view.visible=!0,this.bg.alpha=1,this.bg.scale.x=1.3,this.bg.scale.y=0,TweenLite.to(this.bg.scale,.3,{x:1,y:1,delay:.4,ease:Elastic.easeOut})},h.prototype.reset=function(t){var e=t.meta;this.meta=e,this.view.x=t.x,this.view.y=t.y,this.meta.type===h.TYPES.BUTTON&&(this.closeButton.visible=!0),translations[e.name]&&(this.text.text=translations[e.name]),a.instance.desktop?translations[e.name+"_DESKTOP"]&&(this.text.text=translations[e.name+"_DESKTOP"]):translations[e.name+"_MOBILE"]&&(this.text.text=translations[e.name+"_MOBILE"]),this.text.scale.set(1);var i=this.dimensions.width/this.text.width;i=Math.min(1,i);var s=this.dimensions.height/this.text.height;s=Math.min(1,s),this.text.scale.set(Math.min(i,s))},h.TYPES={SIGNAL:0,BUTTON:1},i.exports=h}),define("com/rebels/game/items/ConveyorBelt",["require","exports","module","PIXI","./Item","../collision/Crash","../P2Materials","fido/utils/Utils"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=t("../collision/Crash"),n=t("../P2Materials").materials,a=t("fido/utils/Utils"),h=function(){var t=(r.CrashBody.fromRect(-90,-10,180,20),new s.Container);o.call(this,100,100,t,null),this._body=new p2.Body({mass:0,position:[0,0],angle:0}),boxShape=new p2.Rectangle(180,20),boxShape.material=n.convayor,this._body.addShape(boxShape),this.boxShape=boxShape;var e=a.getTexturesFromFramesWithPrefix("conveyor_belt_%%.png",16,0);this.conveyorBelt=new s.extras.MovieClip(e),this.conveyorBelt.loop=!0,this.conveyorBelt.anchor.x=this.conveyorBelt.anchor.y=.5,this.conveyorBelt.animationSpeed=.65,this.capLeftBack=new s.Sprite.fromFrame("conveyor_belt_endcap_back.png"),this.capLeftBack.anchor.x=.5,this.capLeftBack.scale.x=-1,this.capLeftBack.scale.y=.98,this.capLeftBack.position.y=-14.5,this.capLeftBack.position.x=-this.conveyorBelt.width/2-this.capLeftBack.width/2+2,this.capLeftBack.visible=!1,this.capLeft=new s.Sprite.fromFrame("conveyor_belt_endcap_front.png"),this.capLeft.anchor.x=.5,this.capLeft.scale.x=-1,this.capLeft.position.y=-15,this.capLeft.position.x=-this.conveyorBelt.width/2-this.capLeft.width/2-4,this.capLeft.visible=!1,this.capRightBack=new s.Sprite.fromFrame("conveyor_belt_endcap_back.png"),this.capRightBack.anchor.x=.5,this.capRightBack.scale.y=.98,this.capRightBack.visible=!1,this.capRightBack.position.y=-14.5,this.capRightBack.position.x=this.conveyorBelt.width/2-Math.abs(this.capRightBack.width/2)-2,this.capRight=new s.Sprite.fromFrame("conveyor_belt_endcap_front.png"),this.capRight.anchor.x=.5,this.capRight.visible=!1,this.capRight.position.y=-15,this.capRight.position.x=this.conveyorBelt.width/2-Math.abs(this.capRight.width/2)+4,this.view.addChild(this.capLeftBack),this.view.addChild(this.capRightBack),this.view.addChild(this.conveyorBelt),this.view.addChild(this.capLeft),this.view.addChild(this.capRight),this.actives=[],this.speed=1};h.prototype=Object.create(o.prototype),h.prototype.constructor=h,h.prototype.reset=function(t){this.meta=t.meta,this.meta.right?this.conveyorBelt.scale.x=1:this.conveyorBelt.scale.x=-1,
this.meta.capRight&&(this.capRight.visible=!0,this.capRightBack.visible=!0),this.meta.capLeft&&(this.capLeft.visible=!0,this.capLeftBack.visible=!0),this.conveyorBelt.gotoAndPlay(0),this._body.position[0]=t.x,this._body.position[1]=t.y,this._body.velocity[0]=0,this._body.velocity[1]=0,this.view.rotation=this._body.angle=t.meta.rotation*(Math.PI/180),this.view.x=t.x,this.view.y=t.y,this.speed=this.meta.right?1:-1,this.actives=[]},h.prototype.update=function(){for(var t=0;t<this.actives.length;t++){var e=this.actives[t];e._body.position[0]+=Math.cos(this._body.angle)*this.speed*1.5,e._body.position[1]+=Math.sin(this._body.angle)*this.speed*1.5}},h.prototype.onCollideBegin=function(t,e,i){(i.shapeA._main||i.shapeB._main)&&this.actives.push(t)},h.prototype.onCollideEnd=function(t,e,i){if(i.shapeA._main||i.shapeB._main){var s=this.actives.indexOf(t);-1!=s&&this.actives.splice(s,1)}},i.exports=h}),define("com/rebels/game/items/ForceSwitch",["require","exports","module","PIXI","signals","./Item","../collision/Crash","./components/ForcePickup","fido/goals/Goals","fido/utils/Utils","com/rebels/game/items/view/ForceHighlight"],function(t,e,i){var s=t("PIXI"),o=t("signals"),r=t("./Item"),n=t("../collision/Crash"),a=t("./components/ForcePickup"),h=t("fido/goals/Goals"),l=(t("fido/utils/Utils"),t("com/rebels/game/items/view/ForceHighlight")),c=function(t,e,i){r.call(this,100,100,new s.Container,n.CrashBody.fromRect(0,22,64,16)),this.onActive=new o,this._body=new p2.Body({mass:0,position:[0,0],angle:0}),boxShape=new p2.Rectangle(32,16),boxShape.sensor=!0,this._body.addShape(boxShape),this.groups=["ForceSwitch"],this.collisonData=null,this.keepInBonus=!1,this.isDown=!1,this.hasBeenActivated=!1,this.onCount=0,this.type=6,this.forcePickup=new a(this),this.counter=0,this.view.mousedown=this.view.touchstart=function(){this.activateItem()}.bind(this),this["switch"]=new s.Container,this["switch"].position.x=28,this.switchHandle=new s.Sprite.fromFrame("forceswitch_handle.png"),this.switchHandle.anchor.y=.5,this.switchHandle.rotation=-90*Math.PI/180,this.switchHandle.position.x=5,this["switch"].addChild(this.switchHandle),this.switchBaseOff=new s.Sprite.fromFrame("forceswitch_base_off.png"),this.switchBaseOff.anchor.y=.5,this["switch"].addChild(this.switchBaseOff),this.switchBaseOn=new s.Sprite.fromFrame("forceswitch_base_on.png"),this.switchBaseOn.alpha=0,this.switchBaseOn.anchor.y=.5,this["switch"].addChild(this.switchBaseOn),this.view.addChild(this["switch"]),this.forceHighlight=new l({scale:.6}),this.forceHighlight.view.position.x=28,this.view.addChild(this.forceHighlight.view)};c.prototype.reset=function(t){this.smokePool=[],this.smokes=[],this._body.position[0]=t.x,this._body.position[1]=t.y,this._body.velocity[0]=0,this._body.velocity[1]=0,this.view.x=t.x,this.view.y=t.y,this.meta=t.meta,this.meta.force=!0,this.home=t.y,this.switchHandle.rotation=-90*Math.PI/180,this.switchBaseOn.alpha=0,this.hasBeenActivated=!1,this.isDown=!1,this.collisonData=null,this.body.solid=!1,this.onCount=0,this.unpress()},c.prototype.easeOutCubic=function(t,e,i,s){return t/=s,t--,i*(t*t*t+1)+e},c.prototype.update=function(){this.forceHighlight.update(),this.hasBeenActivated||(this.counter++,!this.forcePickup.active||this.forceHighlight.active||this.forceHighlight.isDying||(TweenLite.to(this.switchBaseOn,.2,{alpha:1}),this.forceHighlight.activate()),this.forcePickup.active?this.switchHandle.rotation=-90*Math.PI/180+Math.abs(Math.sin(Math.pow(8,Math.sin(this.counter/100)))*(40*Math.PI/180)):this.forcePickup.active||!this.forceHighlight.active||this.forceHighlight.isDying||(this.forceHighlight.deactivate(),TweenLite.to(this.switchBaseOn,.2,{alpha:0}),TweenLite.to(this.switchHandle,.2,{rotation:-90*Math.PI/180})),this.forceHighlight.update())},c.prototype.press=function(){this.view.texture=s.Texture.fromFrame("lothal_button_on.png"),this.isDown=!0,this.onActive.dispatch(),h.instance.increment("switches",1)},c.prototype.unpress=function(){this.view.texture=s.Texture.fromFrame("lothal_button_off.png"),this.isDown=!1},c.prototype.activateItem=function(){if(this.press(),this.meta){var t=this.world.find("switchable",this.meta.name);this.hasBeenActivated=!0,this.forceHighlight.deactivate(),this.switchBaseOn.alpha=1,TweenLite.to(this.switchHandle,.2,{rotation:90*Math.PI/180}),t&&(10===t.type?t.deactivate():t.activate())}},i.exports=c}),define("starwars/HangerTokenUtils",["require","exports","module","PIXI","fido/loader/Cache","fido/system/LocalStorage"],function(t,e,i){var s=(t("PIXI"),t("fido/loader/Cache")),o=t("fido/system/LocalStorage"),r={};r.addToken=function(t){var e=s.getJson("config").config.ARCADE_COOKIES_BUNDLE_ID,i=new o(e),r=i.getObject("tokensToAdd");r||(r=0),r+=t,i.storeObject("tokensToAdd",r)},r.getTokens=function(){var t=s.getJson("config").COOKIES_BUNDLE_ID,e=new o(t),i=e.getObject("tokensToAdd");return i||(i=0),e.storeObject("tokensToAdd",0),i},i.exports=r}),define("com/rebels/game/items/HangerCoin",["require","exports","module","PIXI","./Item","../collision/Crash","fido/physics/CartoonSquish","fido/utils/Utils","com/rebels/game/GameConfig","fido/goals/Goals","starwars/HangerTokenUtils","fido/sound/SoundBridge"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=(t("../collision/Crash"),t("fido/physics/CartoonSquish"),t("fido/utils/Utils")),n=t("com/rebels/game/GameConfig"),a=null,h=t("fido/goals/Goals"),l=t("starwars/HangerTokenUtils"),c=t("fido/sound/SoundBridge"),u=function(t,e,i){a||(a=r.getTexturesFromFramesWithPrefix("hangar_token_3D_%%.png",20,1,!1)),this.sprite=new s.Sprite,this.sprite.anchor.set(.5);var n=new s.Container;n.addChild(this.sprite),o.call(this,100,100,n,null),this._body=new p2.Body({mass:.1,position:[0,0],angle:0,type:p2.Body.KINEMATIC,fixedRotation:!0}),boxShape=new p2.Rectangle(32,32),boxShape.sensor=!0,this._body.addShape(boxShape),this.pickupType=null,this.groups=["hanger_coin"],this.ignoreLaser=!0,this.count=100*Math.random(),this.hoverCount=100*Math.random(),this.maxY=6,this.animating=!1};u.prototype=Object.create(o.prototype),u.prototype.reset=function(t){this.view.position.x=t.x,this.view.position.y=t.y,this._body.position[0]=t.x,this._body.position[1]=t.y,this.sprite.position.y=0,this.sprite.alpha=1,this.pickupType=t.meta.pickupType,this.animating=!1,d--,this.hide=!1,d>0?this.hide=!0:d=1+Math.floor(2*Math.random()),0===n.worldIndex&&0===n.levelIndex&&(this.hide=!0)};var d=Math.floor(3*Math.random());u.prototype.update=function(){this.hide&&this.destroy(),this.count+=.25,this.hoverCount+=.05,this.sprite.texture=a[(0|this.count)%a.length],this.animating},u.prototype.vanish=function(){this.animating=!0,this.world.particleLayer.add(this._body.position[0],this._body.position[1],"glow"),TweenLite.to(this.sprite,.7,{alpha:0,delay:.1,onComplete:function(){this.destroy(),this.animating=!1}.bind(this)}),TweenLite.to(this.sprite,.9,{y:-75,ease:Expo.easeOutIn})},u.prototype.onCollideBegin=function(t,e,i){this.animating||(i.shapeA._main||i.shapeB._main)&&2===t.type&&(this.world.game.app.alertPanelManager.show("firstArcadeToken"),h.instance.increment("hangerToken",1),this.vanish(),c.sfx.play("hanger_token"),window.tuesday?l.addToken(20):l.addToken(10))};i.exports=u}),define("com/rebels/game/items/StaticTrooper",["require","exports","module","PIXI","./Item","../collision/Crash","fido/utils/Math2","./Consts","../P2Materials","fido/system/Ticker"],function(t,e,i){var s=t("PIXI"),o=t("./Item"),r=(t("../collision/Crash"),t("fido/utils/Math2"),t("./Consts"),t("../P2Materials").materials,t("fido/system/Ticker")),n=function(t,e){var i=new s.Container;o.call(this,t,e,i,null),this._body=new p2.Body({mass:40,position:[0,0],angle:0,fixedRotation:!0}),this.animation=new s.spine.Spine(s.loadedResources["media/img/game/characters/stormtrooper_busy.json"].spineData),this.animation.skeleton.setSkinByName("l"),this.view.addChild(this.animation),this.animation.scale.set(.66),this.animation.stateData.defaultMix=.1,this.animation.autoUpdate=!1,this.animation.state.setAnimationByName(0,"busy",!0)};n.prototype=Object.create(o.prototype),n.prototype.update=function(){this.animation.update(1/60*1.4*r.game.deltaTime)},n.prototype.reset=function(t){t.meta;this.view.position.x=t.x,this.view.position.y=t.y},n.prototype.onCollideBegin=function(t,e,i){},n.prototype.onCollideEnd=function(t,e,i){},i.exports=n}),define("com/rebels/game/items/GeneratorObject",["require","exports","module","PIXI","./Item","./MovableBlock","../collision/Crash","fido/utils/Math2","fido/game/GameObjectPool"],function(t,e,i){function s(){return o.call(this,100,100,null,null),this.ticks=0,this.groups=["GeneratorObject"],this.objectData={meta:{width:64,height:64,shape:1,frame:"barrel_force_off.png",frameActive:"barrel_force_on.png",force:!0,mass:50}},this}var o=(t("PIXI"),t("./Item")),r=t("./MovableBlock"),n=(t("../collision/Crash"),t("fido/utils/Math2"),t("fido/game/GameObjectPool"));s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.createObject=function(){var t=n.getObject(r);t.reset(this.objectData),t._body.position[0]=this.position.x,t._body.position[1]=this.position.y,this.world.add(t)},s.prototype.update=function(){this.ticks++,this.ticks%200===0&&this.createObject()},s.prototype.reset=function(t){this.ticks=0,this.position.x=t.x,this.position.y=t.y},i.exports=s}),define("com/rebels/game/items/GeneratorObjectNormal",["require","exports","module","PIXI","./Item","./MovableBlock","../collision/Crash","fido/utils/Math2","fido/game/GameObjectPool"],function(t,e,i){function s(){return o.call(this,100,100,null,null),this.ticks=0,this.groups=["GeneratorObject"],this.objectData={meta:{width:64,height:64,shape:1,frame:"rusty_barrel.png",frameActive:"rusty_barrel.png",force:!1,mass:50}},this}var o=(t("PIXI"),t("./Item")),r=t("./MovableBlock"),n=(t("../collision/Crash"),t("fido/utils/Math2"),t("fido/game/GameObjectPool"));s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.createObject=function(){var t=n.getObject(r);t.reset(this.objectData),t._body.position[0]=this.position.x,t._body.position[1]=this.position.y,this.world.add(t)},s.prototype.update=function(){this.ticks++,this.ticks%200===0&&this.createObject()},s.prototype.reset=function(t){this.ticks=0,this.position.x=t.x,this.position.y=t.y},i.exports=s}),define("com/rebels/game/items/SentorTutorial",["require","exports","module","PIXI","./Item","../P2Materials","signals"],function(t,e,i){var s=(t("PIXI"),t("./Item")),o=(t("../P2Materials").materials,t("signals")),r=function(t,e,i){s.call(this,100,100,null,null),this.groups=["sensor_tutorials"],this.onTouched=new o,this.isTouched=!1};r.prototype=Object.create(s.prototype),r.prototype.reset=function(t){this.isTouched=!1;var e=t.meta;this.meta=e,void 0===this.meta.onlyOnce&&(this.meta.onlyOnce=!0),this._body=new p2.Body({mass:.1,position:[t.x,t.y],type:p2.Body.KINEMATIC});var i=new p2.Box({width:e.width,height:e.height});i.sensor=!0,this._body.addShape(i)},r.prototype.onCollideBegin=function(t,e,i){this.isTouched||"player"!==t.groups[0]||(this.isTouched=this.meta.onlyOnce?!0:!1,this.onTouched.dispatch())},i.exports=r}),define("com/rebels/game/items/DMItems",["require","exports","module","PIXI","./Platform","./Exit","./player/Ezra","./player/Zeb","./player/Sabine","./MovableBlock","./Door","./FlatButton","./FlatButtonToggle","./CrawlZone","./Pickup","./MovingPlatform","./MovingPlatform2","./CollapsingPlatform","./Drone","./Trooper","./Vador","./LaserBarrier","./FatBg","./Light","./Smoke","./Vignette","./Detail","./TutorialCopy","./ConveyorBelt","./ForceSwitch","./HangerCoin","./StaticTrooper","./GeneratorObject","./GeneratorObjectNormal","./SentorTutorial"],function(t,e,i){t("PIXI");i.exports={Platform:t("./Platform"),Exit:t("./Exit"),Ezra:t("./player/Ezra"),Zeb:t("./player/Zeb"),Sabine:t("./player/Sabine"),MovableBlock:t("./MovableBlock"),Door:t("./Door"),FlatButton:t("./FlatButton"),FlatButtonToggle:t("./FlatButtonToggle"),CrawlZone:t("./CrawlZone"),Pickup:t("./Pickup"),MovingPlatform:t("./MovingPlatform"),HMovingPlatform:t("./MovingPlatform2"),CollapsingPlatform:t("./CollapsingPlatform"),Drone:t("./Drone"),Trooper:t("./Trooper"),Vador:t("./Vador"),LazerBarrier:t("./LaserBarrier"),FatBg:t("./FatBg"),Light:t("./Light"),Smoke:t("./Smoke"),Vignette:t("./Vignette"),Detail:t("./Detail"),Copy:t("./TutorialCopy"),ConvayorBelt:t("./ConveyorBelt"),ForceSwitch:t("./ForceSwitch"),HangerCoin:t("./HangerCoin"),StaticTrooper:t("./StaticTrooper"),GeneratorObject:t("./GeneratorObject"),GeneratorObjectNormal:t("./GeneratorObjectNormal"),SentorTutorial:t("./SentorTutorial")}}),define("com/rebels/game/level/LevelLoader",["require","exports","module","signals","./Level","fido/game/GameObjectPool","../items/DMItems","../staticview/PixiSpatialHash"],function(t,e,i){var s=(t("signals"),t("./Level"),t("fido/game/GameObjectPool")),o=t("../items/DMItems"),r=t("../staticview/PixiSpatialHash"),n=function(t){this.game=t,this.platformPool=new s(o.Platform),this.activePlatforms=[],this.activeItems=[],this.staticViewHash=new r,this.boundWalls={left:new o.Platform.fromRect(0,0,100,100),right:new o.Platform.fromRect(0,0,100,100),top:new o.Platform.fromRect(0,0,100,100),bottom:new o.Platform.fromRect(0,0,100,100)}};n.prototype.load=function(t,e){this.unload();var i=e.floor;this.addPlatforms(i);var s=e.active;this.addActive(s);var o=e.detail;return this.parseDetail(o),this.game.world.setBackground(t),this.game.world.backgroundView.set(t,this.game.world.bounds),e},n.prototype.unload=function(t){this.game.team=[],this.game.world.clear();for(var e=0;e<this.activePlatforms.length;e++)this.platformPool.returnObject(this.activePlatforms[e]);this.activePlatforms.length=0;for(var e=0;e<this.activeItems.length;e++)this.activeItems[e].world&&s.returnObject(this.activeItems[e]);this.activeItems.length=0},n.prototype.addPlatforms=function(t){for(var e=6,i=0;i<t.length;i+=e){var r=t[i],n=t[i+1],a=t[i+2],h=t[i+3],l=t[i+4]*Math.PI/180,c=t[i+5],u=100*a,d=100*h;if(4===c)this.setBounds({x:r-u/2|0,y:n-d/2|0,width:0|u,height:0|d});else if(5===c){var p=s.getObject(o.MovingPlatform);p.reset({x:r+64,y:n,x2:r+2*u-64,y2:n,meta:"a"}),this.game.world.add(p),this.activeItems.push(p)}else if(6===c){var p=s.getObject(o.CrawlZone);p.reset({x:r,y:n,width:u,height:d,rotation:l,color:1064260}),this.game.world.add(p)}else{var p=this.platformPool.getObject();0===c?(p.reset({x:r,y:n,width:u,height:d,rotation:l,color:1064260}),p.passthrough=!1):1===c?(p.passthrough=!0,p.reset({x:r,y:n,width:u,height:d,rotation:l,color:9254490})):2===c&&p.reset({x:r,y:n,width:u,circle:!0,rotation:l,color:9254490}),this.game.world.add(p)}}},n.prototype.parseDetail=function(t){for(var e=6,i=(new PIXI.Container,0);i<t.length;i+=e){var s=(t[i],t[i+1],t[i+2],t[i+3],t[i+4]*Math.PI/180,t[i+5]),o=PIXI.utils.TextureCache[s]||PIXI.Texture.fromImage(ASSET_URL+"img/game/tree.png");new PIXI.Sprite(o)}},n.prototype.addActive=function(t){for(var e=4,i=0;i<t.length;i+=e){var r=t[i],n=t[i+1],a=t[i+2],h=t[i+3];if("Start"===a){if(o[a]){var l=s.getObject(o[a]);l.reset({x:r,y:n,meta:h}),this.game.world.add(l),this.activeItems.push(l)}this.game.player=l}else if("exitxxx"===a);else if(o[a]){var l=s.getObject(o[a]);l.reset({x:r,y:n,meta:h}),this.game.world.add(l),this.activeItems.push(l)}}},n.prototype.getTotalCells=function(t){},n.prototype.setBounds=function(t){this.game.world.setBounds(t),this.boundWalls.left.reset({x:t.x-50,y:t.y+t.height/2,width:100,height:t.height}),this.boundWalls.right.reset({x:t.x+t.width+50,y:t.y+t.height/2,width:100,height:t.height}),this.game.world.add(this.boundWalls.left),this.game.world.add(this.boundWalls.right),this.game.world.add(this.boundWalls.top)},i.exports=n}),define("com/rebels/game/DMCamera",["require","exports","module","PIXI","./Camera","fido/system/Device","fido/physics/DoubleSpring"],function(t,e,i){var s=(t("PIXI"),t("./Camera")),o=t("fido/system/Device"),r=t("fido/physics/DoubleSpring"),n=function(t){s.call(this),this.game=t,this.padding=(o.instance.isMobile,0),this.idleZoom=1,this.movingZoom=1.2,this.zoom=this.idleZoom,this.zoomTarget=this.idleZoom,this.zoomWait=0,this.lockToFrame=!0,this.easeX=0,this.easeY=0,this.mobileMode=!1,this.spring=new r,this.canShake=!0};n.prototype=Object.create(s.prototype),n.prototype.reset=function(){this.easeX=this.viewWidth/2,this.easeY=this.viewHeight/2},n.prototype.shake=function(t,e){this.canShake&&(t=t||Math.random()*Math.PI*2,e=e||20,this.spring.dx=Math.sin(t)*e,this.spring.dy=Math.cos(t)*e)},n.prototype.update=function(){this.spring.update();var t=this.game.player,e=this.game.player.position.x,i=this.game.player.position.y-80,s=this.viewWidth/this.zoom,o=this.viewHeight/this.zoom;this.lockToFrame,!this.mobileMode,e<this.game.world.bounds.x+s/2-this.padding?this.easeX=e=s/2-this.padding:e>this.game.world.bounds.x+this.game.world.bounds.width-s/2+this.padding&&(this.easeX=e=this.game.world.bounds.x+this.game.world.bounds.width-s/2+this.padding),i<this.game.world.bounds.y+o/2-this.padding?i=o/2-this.padding:i>this.game.world.bounds.y+this.game.world.bounds.height-o/2+this.padding&&(i=this.game.world.bounds.y+this.game.world.bounds.height-o/2+this.padding),this.easeX+=.1*(e-this.x),this.easeY+=.1*(i-this.y),this.x=this.easeX+this.spring.x,this.y=this.easeY+this.spring.y,p2.vec2.length(t._body.velocity)>3?(this.zoom+=.005*(this.zoomTarget-this.zoom),this.zoomTarget=this.movingZoom,this.zoomWait=0):(this.zoomWait++,this.zoomWait>40&&this.lockToFrame&&(this.zoom+=.005*(this.zoomTarget-this.zoom),this.zoomTarget=this.idleZoom))},n.prototype.resize=function(t,e){this.viewWidth=t,this.viewHeight=e},i.exports=n}),define("com/rebels/game/EventHandler",["require","exports","module","signals"],function(t,e,i){var s=t("signals"),o=function(){this.onJump=new s,this.onWalk=new s,this.onSwap=new s,this.onSuccess=new s,this.onCrawl=new s,this.onPlayerCrouching=new s,this.onButtonPressed=new s,this.onBombThrow=new s,this.onCrouch=new s,this.onForce=new s,this.onForceItem=new s,this.onBlockMove=new s,this.onButtonSwitched=new s,this.onBarrelMove=new s,this.onBlockMoveWithForce=new s,this.onWarned1=new s,this.onWarned2=new s,this.onSomeoneJumpedOnZeb=new s};o.prototype.reset=function(t){this.game=t,this.removeEvents(),this.addEvents()},o.prototype.removeEvents=function(t){this.game.onAllPlayerExit.remove(this.onSuccess.dispatch,this),this.game.onPlayerSwap.remove(this.onSwap.dispatch,this),this.game.onBarrelMove.remove(this.onBarrelMove.dispatch,this),this.game.onBlockMove.remove(this.onBlockMove.dispatch,this),this.game.onButtonSwitched.remove(this.onButtonSwitched.dispatch,this),this.game.teamHash.ezra._jumpAction.onJump.remove(this.onJump.dispatch,this),this.game.teamHash.sabine._jumpAction.onJump.remove(this.onJump.dispatch,this),this.game.teamHash.zeb._jumpAction.onJump.remove(this.onJump.dispatch,this),this.game.onBlockMoveWithForce.remove(this.onBlockMoveWithForce.dispatch,this),this.game.onWarned1.remove(this.onWarned1.dispatch,this),this.game.onWarned2.remove(this.onWarned2.dispatch,this),this.game.onSomeoneJumpedOnZeb.remove(this.onSomeoneJumpedOnZeb.dispatch,this),this.game.teamHash.ezra.onWalk.remove(this.onWalk.dispatch,this),this.game.teamHash.zeb.onWalk.remove(this.onWalk.dispatch,this),this.game.teamHash.sabine.onWalk.remove(this.onWalk.dispatch,this),this.game.teamHash.ezra.active.activeItems[3].onCrawl.remove(this.onCrawl.dispatch,this),this.game.teamHash.ezra.active.activeItems[1].onForce.remove(this.onForce.dispatch,this),this.game.teamHash.ezra.active.activeItems[1].onItemMove.remove(this.onForceItem.dispatch,this),this.game.teamHash.sabine.active.activeItems[1].onBombThrow.remove(this.onBombThrow.dispatch,this),this.game.teamHash.zeb.active.activeItems[1].onCrouch.remove(this.onCrouch.dispatch,this)},o.prototype.addEvents=function(t){this.game.onAllPlayerExit.add(this.onSuccess.dispatch,this),this.game.onPlayerSwap.add(this.onSwap.dispatch,this),this.game.onBarrelMove.add(this.onBarrelMove.dispatch,this),this.game.onBlockMove.add(this.onBlockMove.dispatch,this),this.game.onButtonSwitched.add(this.onButtonSwitched.dispatch,this),this.game.onBlockMoveWithForce.add(this.onBlockMoveWithForce.dispatch,this),this.game.onWarned1.add(this.onWarned1.dispatch,this),this.game.onWarned2.add(this.onWarned2.dispatch,this),this.game.onSomeoneJumpedOnZeb.add(this.onSomeoneJumpedOnZeb.dispatch,this),this.game.teamHash.ezra._jumpAction.onJump.add(this.onJump.dispatch,this),this.game.teamHash.sabine._jumpAction.onJump.add(this.onJump.dispatch,this),this.game.teamHash.zeb._jumpAction.onJump.add(this.onJump.dispatch,this),this.game.teamHash.ezra.onWalk.add(this.onWalk.dispatch,this),this.game.teamHash.zeb.onWalk.add(this.onWalk.dispatch,this),this.game.teamHash.sabine.onWalk.add(this.onWalk.dispatch,this),this.game.teamHash.ezra.active.activeItems[3].onCrawl.add(this.onCrawl.dispatch,this),this.game.teamHash.ezra.active.activeItems[1].onForce.add(this.onForce.dispatch,this),this.game.teamHash.ezra.active.activeItems[1].onItemMove.add(this.onForceItem.dispatch,this),this.game.teamHash.sabine.active.activeItems[1].onBombThrow.add(this.onBombThrow.dispatch,this),this.game.teamHash.zeb.active.activeItems[1].onCrouch.add(this.onCrouch.dispatch,this)},i.exports=o}),define("com/rebels/game/control/TouchController",["require","exports","module","fido/input/Keyboard","fido/utils/Math2","fido/system/Device","PIXI"],function(t,e,i){var s=(t("fido/input/Keyboard"),t("fido/utils/Math2")),o=t("fido/system/Device"),r=t("PIXI"),n=new r.Point,a=function(t){this.game=t,this.view=this.game.view,this.hit=new r.Rectangle(0,0,1e4,1e4),this.touchLayer=new r.Container,this.touchLayer.interactive=!0,this.touchLayer.hitArea=this.hit,this.tablet=!o.instance.isMobile,this.pad=new r.Sprite.fromFrame("hud_ui_bg.png"),this.pad.anchor.set(.5),this.dot=new r.Sprite.fromFrame("d-pad.png"),this.dot.anchor.set(.5),this.pad.addChild(this.dot),this.pad.interactive=!0,this.pad.hitArea=new r.Circle(0,0,60),this.padTargetPosition=new r.Point,this.isDown=!1,this.resetDelay=10,this.resetCount=0,this.touchLayer.addChild(this.pad),this.game.view.addChild(this.touchLayer),this.pad.on("mousedown",this.down,this),this.touchLayer.on("mouseup",this.up,this),this.pad.on("touchstart",this.down,this),this.touchLayer.on("touchend",this.up,this),this.touchLayer.on("touchendoutside",this.up,this),this.deltaX=0,this.action1=new h(this.game.player,0),this.touchLayer.addChild(this.action1),this.action2=new h(this.game.player,1),this.touchLayer.addChild(this.action2),this.action1.icon.texture=r.Texture.fromFrame("hud_ui_jump.png"),this.moveId=0,this.w=1130,this.h=640,this.tablet?(this.padHome=new r.Point(110,this.h-7-80),this.pad.scale.set(.75),this.action1.scale.set(.75),this.action2.scale.set(.75)):this.padHome=new r.Point(125,this.h-100-20),this.pad.position.x=this.padHome.x,this.pad.position.y=this.padHome.y,this.padTargetPosition.x=this.padHome.x,this.padTargetPosition.y=this.padHome.y,this.game.onPlayerSwap.add(this.onPlayerSwap,this),this.resize(this.w,this.h)};a.prototype.reset=function(){this.isDown&&(this.moveId=99999999,this.isDown=!1,this.dot.x=0,this.touchLayer.off("mousemove",this.move,this),this.touchLayer.off("touchmove",this.move,this)),this.pad.position.x=this.padHome.x,this.pad.position.y=this.padHome.y,this.resetCount=0,this.view.interactive=!0},a.prototype.disable=function(){this.view.interactive=!1},a.prototype.down=function(t){this.touchLayer.hitArea=this.hit,this.moveId=t.data.identifier,this.game.player.onMovePressed(),this.isDown=!0;t.data.getLocalPosition(this.touchLayer,n);this.pad.alpha=1,this.touchLayer.on("mousemove",this.move,this),this.touchLayer.on("touchmove",this.move,this)},a.prototype.up=function(t){if(this.touchLayer.hitArea=null,this.moveId===t.data.identifier){this.moveId=99999999,this.isDown=!1;t.data.getLocalPosition(this.touchLayer,n);this.dot.x=0,this.touchLayer.off("mousemove",this.move,this),this.touchLayer.off("touchmove",this.move,this)}},a.prototype.move=function(t){if(this.moveId===t.data.identifier){var e=(t.data.getLocalPosition(this.touchLayer,n),t.data.getLocalPosition(this.pad,n));this.dot.x=e.x,e.x>60?this.pad.x+=.01*(e.x-60):e.x<-60&&(this.pad.x-=.01*(-e.x-60)),this.dot.x=s.cap(this.dot.x,-50,50)}},a.prototype.enable=function(){this.view.interactive=!0},a.prototype.update=function(t){this.dot.x=s.cap(this.dot.x,-50,50),this.deltaX=this.dot.x/50;var e=.1;this.deltaX<-e?this.game.player.moveLeft(-this.deltaX):this.deltaX>e?this.game.player.moveRight(this.deltaX):this.game.player.stop(),this.isDown?this.resetCount=0:(this.resetCount++,this.resetCount>=this.resetDelay&&(this.pad.position.x=this.padHome.x,this.pad.position.y=this.padHome.y))},a.prototype.resize=function(t,e){this.w=t,this.h=e,this.tablet?(this.action1.x=t-70-40+20,this.action1.y=e-70-40-20,this.action2.x=t-70-40-120+20,this.action2.y=e-70-40-20):(this.action1.x=t-100,this.action1.y=e-100-20,this.action2.x=t-260,this.action2.y=e-100-20)},a.prototype.onPlayerSwap=function(t){this.action1.setPlayer(t),this.action2.setPlayer(t)};var h=function(t,e){r.Sprite.call(this,r.Texture.fromFrame("hud_ui_bg.png")),this.anchor.set(.5),this.player=null,this.id=e,this.interactive=!0,this.hitArea=new r.Circle(0,0,90),this.position.x=800,this.position.y=200,this.on("mousedown",this.down,this),this.on("touchstart",this.down,this),this.on("touchend",this.up,this),this.on("touchendoutside",this.up,this),this.icon=new r.Sprite.fromFrame("action.png"),this.icon.anchor.set(.5),this.addChild(this.icon),this.touchId=9999999};h.prototype=Object.create(r.Sprite.prototype),h.prototype.setPlayer=function(t){this.player&&(this.player.active.onActiveItemAdded.remove(this.onActionAdded,this),this.player.active.onActiveItemRemoved.remove(this.onActionRemoved,this)),this.player=t,this.player.active.onActiveItemAdded.add(this.onActionAdded,this),this.player.active.onActiveItemRemoved.add(this.onActionRemoved,this)},h.prototype.onActionAdded=function(t){t.slot===this.id&&(this.visible=!0,this.icon.visible=!0,this.icon.texture=t.icon.texture)},h.prototype.onActionRemoved=function(t){t.slot===this.id&&(this.icon.visible=!1,this.visible=!1)},h.prototype.down=function(t){this.touchId=t.data.identifier,t.stopPropagation(),this.player.active.runAction(this.id)},h.prototype.up=function(t){this.touchId===t.data.identifier&&(this.touchId=99999,t.stopPropagation(),this.player.active.stopAction(this.id))},i.exports=a}),define("com/rebels/game/control/KeyboardController",["require","exports","module","fido/input/Keyboard"],function(t,e,i){var s=t("fido/input/Keyboard"),o=function(t){this.game=t,this.view=this.game.view,this.keyboard=new s,this.isDown=!1,this.isUp=!0,this.isUp2=!0,this.isUp3=!0,this.captchaY=0,this.count=0,this.keyIsDown=!1,this.currentActiveItem=null,this.movementKeys={left:"a",right:"d",up:"w"},this.keyboard.onKeyPress("1",this.onSwapPressed.bind(this)),this.keyboard.onKeyPress("2",this.onSwapPressed.bind(this)),this.keyboard.onKeyPress("3",this.onSwapPressed.bind(this)),this.keyboard.onKeyPress("numpad1",this.onSwapPressed.bind(this)),this.keyboard.onKeyPress("numpad2",this.onSwapPressed.bind(this)),this.keyboard.onKeyPress("numpad3",this.onSwapPressed.bind(this)),this.keyboard.onKeyPress("left",this.movePressed.bind(this)),this.keyboard.onKeyPress("right",this.movePressed.bind(this)),this.keyboard.onKeyPress("up",this.movePressed.bind(this)),this.keyboard.onKeyPress(this.movementKeys.left,this.movePressed.bind(this)),this.keyboard.onKeyPress(this.movementKeys.right,this.movePressed.bind(this)),this.keyboard.onKeyPress(this.movementKeys.up,this.movePressed.bind(this))};o.prototype.reset=function(){this.isDown=!1,this.isUp=!0,this.isUp2=!0,this.captchaY=0,this.count=0,this.keyIsDown=!1,this.enable()},o.prototype.disable=function(){this.view.interactive=!1},o.prototype.enable=function(){this.view.interactive=!0},o.prototype.activate=function(t){this.currentActiveItem!==t&&(this.currentActiveItem=t)},o.prototype.update=function(t){return this.view.interactive?(this.keyboard.isPressed("left")||this.keyboard.isPressed(this.movementKeys.left)?(this.keyIsDown=!0,this.game.player.moveLeft(1)):this.keyboard.isPressed("right")||this.keyboard.isPressed(this.movementKeys.right)?(this.keyIsDown=!0,this.game.player.moveRight(1)):this.game.player.stop(),this.keyboard.isPressed("up")||this.keyboard.isPressed(this.movementKeys.up)?this.isUp||(this.game.player.active.runAction(0),this.isUp=!0):this.isUp&&(this.game.player.active.stopAction(0),this.isUp=!1),this.keyboard.isPressed("space")?this.isUp2||(this.game.player.active.runAction(1),this.isUp2=!0):this.isUp2&&(this.game.player.active.stopAction(1),this.isUp2=!1),void(this.keyboard.isPressed("x")?this.isUp3||(this.game.nextPlayer(),this.isUp3=!0):this.isUp3&&(this.isUp3=!1))):void this.game.player.stop()},o.prototype.onSwapPressed=function(t){t.label=t.label.replace("numpad",""),"1"===t.label?this.game["switch"](this.game.teamHash.ezra):"2"===t.label?this.game["switch"](this.game.teamHash.sabine):"3"===t.label&&this.game["switch"](this.game.teamHash.zeb)},o.prototype.movePressed=function(){this.game.player&&this.game.player.onMovePressed()},i.exports=o}),define("com/rebels/game/RebelsGame",["require","exports","module","PIXI","signals","fido/system/Ticker","fido/utils/Timer","fido/sound/SoundBridge","./hud/Hud","fido/system/Device","fido/game/WorldParser","fido/loader/Cache","./DMWorld","./DMGroup","./PlayerTransition","./items/TransitionParticles","./items/player/Ezra","./items/player/Zeb","./items/player/Sabine","./collision/Crash","./items/CellManager","com/rebels/game/GameConfig","com/rebels/game/scripts/BustedScript","com/rebels/game/scripts/TutorialScript","com/rebels/game/scripts/CompleteScript","com/rebels/game/scripts/IntroScript","fido/goals/Goals","com/rebels/app/system/GoalManager","com/rebels/app/shop/ShopSystem","./level/LevelLoader","./items/DMItems","./DMCamera","fido/utils/Utils","com/rebels/game/EventHandler","com/rebels/game/items/view/BigFighter","./CrashSoundManager","./control/TouchController","./control/KeyboardController","fido/sound/MusicManager"],function(t,e,i){var s=t("PIXI"),o=t("signals"),r=t("fido/system/Ticker"),n=t("fido/utils/Timer"),a=t("fido/sound/SoundBridge"),h=t("./hud/Hud"),l=t("fido/system/Device"),c=(t("fido/game/WorldParser"),t("fido/loader/Cache")),u=t("./DMWorld"),d=(t("./DMGroup"),t("./PlayerTransition")),p=(t("./items/TransitionParticles"),t("./items/player/Ezra"),t("./items/player/Zeb"),t("./items/player/Sabine"),t("./collision/Crash"),t("./items/CellManager")),f=t("com/rebels/game/GameConfig"),m=t("com/rebels/game/scripts/BustedScript"),g=t("com/rebels/game/scripts/TutorialScript"),v=t("com/rebels/game/scripts/CompleteScript"),y=t("com/rebels/game/scripts/IntroScript"),_=t("fido/goals/Goals"),x=t("com/rebels/app/system/GoalManager"),b=t("com/rebels/app/shop/ShopSystem"),w=t("./level/LevelLoader"),S=(t("./items/DMItems"),t("./DMCamera")),T=t("fido/utils/Utils"),C=t("com/rebels/game/EventHandler"),P=t("com/rebels/game/items/view/BigFighter"),A=t("./CrashSoundManager");if(l.instance.isTouch&&!l.instance.desktop)var M=t("./control/TouchController");else var M=t("./control/KeyboardController");r.game=new r;var E=function(t){this.app=t,this.onGameover=new o,this.onPlayerSwap=new o,this.onExit=new o,this.onAllPlayerExit=new o,this.onBlockRotate=new o,this.onButtonSwitched=new o,this.onBlockMove=new o,this.onBarrelMove=new o,this.onBlockMoveWithForce=new o,this.onWarned1=new o,this.onWarned2=new o,this.onSomeoneJumpedOnZeb=new o,this.hud=new h(this),this.view=new s.Container,this.goalManager=new x,this.stars=0,this.score=0,this.time=0,this.dimensions={width:1130,height:640},this.team=[],this.vignette2=new s.Sprite.fromImage(ASSET_URL+"img/game/world_1/lothal_vignette_multiply.png"),this.vignette2.blendMode=s.isWebGL?s.BLEND_MODES.MULTIPLY:0,this.vignette2.hitArea=new s.Rectangle,this.player=null,this.camera=new S(this),this.bonusItems=[],this.world=new u(this.camera),this.world.game=this,this.world.view.filterArea=new s.Rectangle(0,0,1e4,1e4),this.view.addChild(this.world.view),
this.paused=!0,this.world.camera.mobileMode=l.instance.isMobile,this.levelLoader=new w(this),this.cellManager=new p(this),this.didFinish=!1,this.controller=new M(this),this.currentPhase=0,this.hud=new h(this),this.view.addChild(this.hud),this.levelTimer=new n(10,r.game),this.levelTimer.onComplete.add(this.onTimeOver,this),this.timeBonus=!1,this.chopperIsPlaying=!1,this.levelData=null,this.bustedScript=new m(this),this.tutorialScript=new g(this),this.completeScript=new v(this),this.introScript=new y(this),this.noiseTick=0,this.counter=0,this.totalPickups=0,this.numPickups=0,this.eventHandler=new C,this.particles=[],this.poolParticles=[],this.playerTransition=new d(this.world),s.isWebGL&&(this.bigFighter=new P)};E.constructor=E;E.prototype.reset=function(e){this.isGameover=!1,this.world.view.filters=null,this.currentPhase=0,e=e||this.config,this.config=e,this.counter=0,this.score=0,this.currentTutorial=0,this.hud.reset(),this.bonusItems=[];var i=c.getJson("levels").worlds,o=i[f.worldIndex],r=o.levels[f.levelIndex];this.levelData=r,A.instance.reset(),window.showPlatforms=!0,this.camera.movingZoom=1,this.camera.reset(),this.controller.reset(),this.bustedScript.reset(),this.completeScript.reset(),this.introScript.reset();for(var n=null,a=trackData.length-1;a>=0;a--)trackData[a].level===f.levelId&&(n=trackData[a]);var h=T.get_query("level");if(h)for(var a=trackData.length-1;a>=0;a--)trackData[a].level==="DM_"+h&&(n=trackData[a]);n||(n=trackData[0]),this.levelLoader.load(o,n),t("fido/sound/MusicManager").play(o.music);var u=this.app.getShopStates();this.team=this.world.groups.player.children,this.teamHash={};for(var a=0;a<this.team.length;a++)this.teamHash[this.team[a]._charId]=this.team[a],this.teamHash[this.team[a]._charId]=this.team[a],this.team[a].helmetMode=!1,this.team[a].moveRight(1e-4),this.team[a].stop(),"ezra"===this.team[a]._charId&&0!==u.helmet_ezra&&this.app.shopSystem.getAtId("helmetEzra").active?this.team[a].helmetMode=!0:"zeb"===this.team[a]._charId&&0!==u.helmet_zeb&&this.app.shopSystem.getAtId("helmetZeb").active?this.team[a].helmetMode=!0:"sabine"===this.team[a]._charId&&0!==u.helmet_sabine&&this.app.shopSystem.getAtId("helmetSabine").active&&(this.team[a].helmetMode=!0),this.team[a].onExit.add(this.onPlayerExit,this),this.team[a].onExitLeave.add(this.onPlayerLeaveExit,this);if(this.app.updateGameConfig(),this.teamHash.ezra.setForce(f.levels.force),this.teamHash.zeb.setJump(f.levels.jump),this.teamHash.sabine.setBomb(f.levels.bomb-1),this.teamIndex=0,this.chopperIsPlaying=!1,this.cellManager.reset(),this.timeBonus=!0,this.targetTime=60*r.timeTarget[0],l.instance.desktop||(this.targetTime+=600),this.hud.reset(),this.player=null,this["switch"](this.team[2],!0),this.tutorialScript.run(),this.eventHandler.reset(this),this.particles=[],this.amplitude=0,this.hud.characterSelect.hideNames(),"DM_world3_level5"===r.id||"DM_world3_level10"===r.id?A.instance.ignoreRoll=!0:A.instance.ignoreRoll=!1,("DM_world1_level1"===r.id||"DM_world1_level2"===r.id||"DM_world1_level3"===r.id||"DM_world1_level4"===r.id||"DM_world1_level5"===r.id)&&this.hud.characterSelect.showNames(),"DM_world1_level1"===r.id){if(this.world.groups.blocks)for(var a=0;a<this.world.groups.blocks.children.length;a++)this.world.groups.blocks.children[a].onRotate.add(function(){this.onBlockMove.dispatch()}.bind(this))}else if("DM_world2_level1"===r.id){if(this.world.groups.blocks){for(var a=0;a<this.world.groups.blocks.children.length;a++)this.world.groups.blocks.children[a].onMove.add(function(){this.onBarrelMove.dispatch()}.bind(this));if(this.world.groups.sensor_tutorials)for(var a=0;a<this.world.groups.sensor_tutorials.children.length;a++)this.world.groups.sensor_tutorials.children[a].onTouched.addOnce(function(){this.passTutorial(r)}.bind(this))}if(this.world.groups.ForceSwitch)for(var a=0;a<this.world.groups.ForceSwitch.children.length;a++)this.world.groups.ForceSwitch.children[a].onActive.add(function(){this.onButtonSwitched.dispatch()}.bind(this))}else if("DM_world1_level3"===r.id){if(this.world.groups.sensor_tutorials)for(var a=0;a<this.world.groups.sensor_tutorials.children.length;a++)this.world.groups.sensor_tutorials.children[a].onTouched.removeAll(),this.world.groups.sensor_tutorials.children[a].onTouched.add(function(){this.passTutorial(r)}.bind(this))}else if("DM_world1_level5"===r.id&&this.world.groups.blocks)for(var a=0;a<this.world.groups.blocks.children.length;a++)this.world.groups.blocks.children[a].onMoveWithForce.add(function(){this.onBlockMoveWithForce.dispatch()}.bind(this));var d=this.world.groups.exit.children[0];d.view.parent.addChild(d.view),"world1"===o.id||"world1"!==o.id&&r.num%3===0?s.isWebGL&&this.world.add(this.bigFighter):s.isWebGL&&this.bigFighter.world&&this.bigFighter&&s.isWebGL&&this.world.remove(this.bigFighter),this.introScript.run(r.name)},E.prototype.passTutorial=function(t){"DM_world2_level1"===t.id?(0===this.currentTutorial?this.onWarned1.dispatch():this.onWarned2.dispatch(),this.currentTutorial++):"DM_world1_level3"===t.id&&0===this.currentTutorial&&"zeb"!==this.player._charId&&(this.onSomeoneJumpedOnZeb.dispatch(),this.currentTutorial++)},E.prototype.start=function(t){this.reset(t),this.resume()},E.prototype.pause=function(){this.paused||(this.paused=!0,this.view.interactive=!1,r.game.stop(),r.game.remove(this.update,this))},E.prototype.resume=function(){this.paused&&(this.paused=!1,this.view.interactive=!0,r.game.start(),r.game.add(this.update,this,1))};E.prototype.update=function(){this.noiseTick+=.5,this.completeScript.running||(this.counter+=r.game.deltaTime),this.hud.update(),this.camera.update();this.controller.update(),this.world.update(),this.hud.update(),s.isWebGL&&this.bigFighter.world&&this.bigFighter.update(),A.instance.update()},E.prototype.onTimeOver=function(){this.timeBonus=!1},E.prototype.nextPlayer=function(){this.teamIndex++,this.teamIndex%=this.team.length,this["switch"](this.team[this.teamIndex])},E.prototype.transitionToPlayer=function(t){s.isWebGL&&this.playerTransition.animate(this.player,t)},E.prototype["switch"]=function(t,e){this.player!==t&&(this.player&&this.player.sleep(),a.sfx.play("characterselect"),this.transitionToPlayer(t),this.player=t,this.player.wake(e),this.onPlayerSwap.dispatch(this.player))},E.prototype.complete=function(){if(!this.isGameover){var t=this.targetTime-this.finishTime;0>t&&(t=0),this.score=Math.round(2*t),this.score+=500*this.cellManager.currentCells;var e=[100,100,1e3,1e4,1e4];this.nbCoins=this.cellManager.currentCells,this.nbMultiplyer=e[f.worldIndex],b.instance.earnMoney(this.nbCoins*e[f.worldIndex]*(window.wednesday?2:1)),this.stars=1,this.totalPickups=this.cellManager.totalCells,this.numPickups=this.cellManager.currentCells,this.finishTime<this.targetTime&&this.stars++,this.cellManager.currentCells===this.cellManager.totalCells&&(this.stars++,this.score+=1e3),this.isGameover=!0,this.didFinish=!0,this.pause(),this.world.groups.trooper&&_.instance.increment("stormtroopers",this.world.groups.trooper.children.length),this.onGameover.dispatch(),this.goalManager.registerLevel(f),this.goalManager.registerWorld(f)}},E.prototype.onPlayerExit=function(t){if(this.onExit.dispatch(),this.hud.characterSelect.playerExit(t._charId),!this.chopperIsPlaying){a.sfx.playGroup("chopper");var e=a.sfx.getSound();e&&(e._onend[0]=function(){this.chopperIsPlaying=!1}.bind(this),this.chopperIsPlaying=!0)}},E.prototype.onPlayerLeaveExit=function(t){this.hud.characterSelect.playerLeaveExit(t._charId)},E.prototype.lockControls=function(){this.controller.disable()},E.prototype.gameover=function(){this.isGameover||(this.isGameover=!0,this.didFinish=!1,this.pause(),this.onGameover.dispatch())},E.prototype.resize=function(t,e){this.vignette2.width=t,this.vignette2.height=e,this.hud.resize(t,e)},i.exports=E}),define("fido/app/transitions/CartoonTransition",["require","exports","module"],function(t,e,i){CartoonTransition=function(){this.circle=(new PIXI.Graphics).beginFill(1044480).drawCircle(0,0,100)},CartoonTransition.constructor=CartoonTransition,CartoonTransition.prototype.begin=function(t,e,i){this.screenManager=t,this.currentScreen=e,this.nextScreen=i,t.container.addChild(this.circle),t.container.mask=this.circle,this.circle.scale.set(this.targetScale),this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.circle.scale,1,{x:.001,y:.001,ease:Sine.easeOut,onComplete:this.onFadeout.bind(this)})):this.onFadeout()},CartoonTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen)),this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),this.screenManager.container.addChild(this.nextScreen),TweenLite.to(this.circle.scale,1.2,{delay:.2,x:this.targetScale,y:this.targetScale,ease:Cubic.easeIn,onComplete:this.onFadein.bind(this)})},CartoonTransition.prototype.onFadein=function(){this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.container.removeChild(this.circle),this.screenManager.container.mask=null,this.screenManager.onTransitionComplete()},CartoonTransition.prototype.onResize=function(t,e){this.w=t,this.h=e,this.targetScale=t/100*1.2,this.circle.x=t/2,this.circle.y=e/2},i.exports=CartoonTransition}),define("text!starwars/shaders/swipe.glsl",[],function(){return"precision highp float;\n\n#define PI 3.141592653589\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform float progress;\nuniform vec4 dimensions;\n\nvoid main() {\n  vec2 position = vTextureCoord * 2. - 1.;\n  float angle   = atan(position.y, position.x);\n  float progressAngle = progress * PI * 2.5 - PI * 1.25;\n\n  vec4 color = vec4(0.);\n\n  if(angle > progressAngle) {\n    color = mix(vec4(0.), texture2D(uSampler, vTextureCoord), smoothstep(0., 1., (angle - progressAngle)));\n  }\n\n  gl_FragColor = color;\n}\n"}),define("starwars/filters/SwipeFilter",["require","exports","module","PIXI","text!../shaders/swipe.glsl"],function(t,e,i){function s(){o.AbstractFilter.call(this,null,r,{progress:{type:"f",value:0},dimensions:{type:"4fv",value:[0,0,0,0]}})}var o=t("PIXI"),r=t("text!../shaders/swipe.glsl");s.prototype=Object.create(o.filters.AbstractFilter.prototype),s.prototype.constructor=s,Object.defineProperties(s.prototype,{progress:{get:function(){return this.uniforms.progress.value},set:function(t){this.uniforms.progress.value=t}}}),i.exports=s}),define("starwars/transitions/SwipeTransition",["require","exports","module","starwars/filters/SwipeFilter"],function(t,e,i){var s=t("starwars/filters/SwipeFilter"),o=new t("fido/utils/FrameWait"),r=new s,n=new PIXI.Rectangle(0,0,1e4,1e4);SwipeTransition=function(){},SwipeTransition.constructor=SwipeTransition,SwipeTransition.prototype.begin=function(t,e,i){e.onHide&&e.onHide(),e.filterArea=n,e.filters=[r],t.container.addChildAt(i,0),i.onShow&&i.onShow(),r.progress=0,o.wait(function(){TweenLite.fromTo(r,2,{progress:0},{progress:1,onComplete:function(){t.container.removeChild(e),e.onHidden&&e.onHidden(),i.onShown&&i.onShown(),e.filters=null,t.onTransitionComplete()}})})},SwipeTransition.prototype.resize=function(t,e){this.width=t,this.height=e},i.exports=SwipeTransition});var Aes={};Aes.cipher=function(t,e){for(var i=4,s=e.length/i-1,o=[[],[],[],[]],r=0;4*i>r;r++)o[r%4][Math.floor(r/4)]=t[r];o=Aes.addRoundKey(o,e,0,i);for(var n=1;s>n;n++)o=Aes.subBytes(o,i),o=Aes.shiftRows(o,i),o=Aes.mixColumns(o,i),o=Aes.addRoundKey(o,e,n,i);o=Aes.subBytes(o,i),o=Aes.shiftRows(o,i),o=Aes.addRoundKey(o,e,s,i);for(var a=new Array(4*i),r=0;4*i>r;r++)a[r]=o[r%4][Math.floor(r/4)];return a},Aes.keyExpansion=function(t){for(var e=4,i=t.length/4,s=i+6,o=new Array(e*(s+1)),r=new Array(4),n=0;i>n;n++){var a=[t[4*n],t[4*n+1],t[4*n+2],t[4*n+3]];o[n]=a}for(var n=i;e*(s+1)>n;n++){o[n]=new Array(4);for(var h=0;4>h;h++)r[h]=o[n-1][h];if(n%i==0){r=Aes.subWord(Aes.rotWord(r));for(var h=0;4>h;h++)r[h]^=Aes.rCon[n/i][h]}else i>6&&n%i==4&&(r=Aes.subWord(r));for(var h=0;4>h;h++)o[n][h]=o[n-i][h]^r[h]}return o},Aes.subBytes=function(t,e){for(var i=0;4>i;i++)for(var s=0;e>s;s++)t[i][s]=Aes.sBox[t[i][s]];return t},Aes.shiftRows=function(t,e){for(var i=new Array(4),s=1;4>s;s++){for(var o=0;4>o;o++)i[o]=t[s][(o+s)%e];for(var o=0;4>o;o++)t[s][o]=i[o]}return t},Aes.mixColumns=function(t,e){for(var i=0;4>i;i++){for(var s=new Array(4),o=new Array(4),r=0;4>r;r++)s[r]=t[r][i],o[r]=128&t[r][i]?t[r][i]<<1^283:t[r][i]<<1;t[0][i]=o[0]^s[1]^o[1]^s[2]^s[3],t[1][i]=s[0]^o[1]^s[2]^o[2]^s[3],t[2][i]=s[0]^s[1]^o[2]^s[3]^o[3],t[3][i]=s[0]^o[0]^s[1]^s[2]^o[3]}return t},Aes.addRoundKey=function(t,e,i,s){for(var o=0;4>o;o++)for(var r=0;s>r;r++)t[o][r]^=e[4*i+r][o];return t},Aes.subWord=function(t){for(var e=0;4>e;e++)t[e]=Aes.sBox[t[e]];return t},Aes.rotWord=function(t){for(var e=t[0],i=0;3>i;i++)t[i]=t[i+1];return t[3]=e,t},Aes.sBox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Aes.rCon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Aes.Ctr={},Aes.Ctr.encrypt=function(t,e,i){var s=16;if(128!=i&&192!=i&&256!=i)return"";t=Utf8.encode(t),e=Utf8.encode(e);for(var o=i/8,r=new Array(o),n=0;o>n;n++)r[n]=isNaN(e.charCodeAt(n))?0:e.charCodeAt(n);var a=Aes.cipher(r,Aes.keyExpansion(r));a=a.concat(a.slice(0,o-16));for(var h=new Array(s),l=(new Date).getTime(),c=l%1e3,u=Math.floor(l/1e3),d=Math.floor(65535*Math.random()),n=0;2>n;n++)h[n]=c>>>8*n&255;for(var n=0;2>n;n++)h[n+2]=d>>>8*n&255;for(var n=0;4>n;n++)h[n+4]=u>>>8*n&255;for(var p="",n=0;8>n;n++)p+=String.fromCharCode(h[n]);for(var f=Aes.keyExpansion(a),m=Math.ceil(t.length/s),g=new Array(m),v=0;m>v;v++){for(var y=0;4>y;y++)h[15-y]=v>>>8*y&255;for(var y=0;4>y;y++)h[15-y-4]=v/4294967296>>>8*y;for(var _=Aes.cipher(h,f),x=m-1>v?s:(t.length-1)%s+1,b=new Array(x),n=0;x>n;n++)b[n]=_[n]^t.charCodeAt(v*s+n),b[n]=String.fromCharCode(b[n]);g[v]=b.join("")}var w=p+g.join("");return w=Base64.encode(w)},Aes.Ctr.decrypt=function(t,e,i){var s=16;if(128!=i&&192!=i&&256!=i)return"";t=Base64.decode(t),e=Utf8.encode(e);for(var o=i/8,r=new Array(o),n=0;o>n;n++)r[n]=isNaN(e.charCodeAt(n))?0:e.charCodeAt(n);var a=Aes.cipher(r,Aes.keyExpansion(r));a=a.concat(a.slice(0,o-16));var h=new Array(8);ctrTxt=t.slice(0,8);for(var n=0;8>n;n++)h[n]=ctrTxt.charCodeAt(n);for(var l=Aes.keyExpansion(a),c=Math.ceil((t.length-8)/s),u=new Array(c),d=0;c>d;d++)u[d]=t.slice(8+d*s,8+d*s+s);t=u;for(var p=new Array(t.length),d=0;c>d;d++){for(var f=0;4>f;f++)h[15-f]=d>>>8*f&255;for(var f=0;4>f;f++)h[15-f-4]=(d+1)/4294967296-1>>>8*f&255;for(var m=Aes.cipher(h,l),g=new Array(t[d].length),n=0;n<t[d].length;n++)g[n]=m[n]^t[d].charCodeAt(n),g[n]=String.fromCharCode(g[n]);p[d]=g.join("")}var v=p.join("");return v=Utf8.decode(v)};var Base64={};Base64.code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Base64.encode=function(t,e){e="undefined"==typeof e?!1:e;var i,s,o,r,n,a,h,l,c,u,d,p=[],f="",m=Base64.code;if(u=e?t.encodeUTF8():t,c=u.length%3,c>0)for(;c++<3;)f+="=",u+="\x00";for(c=0;c<u.length;c+=3)i=u.charCodeAt(c),s=u.charCodeAt(c+1),o=u.charCodeAt(c+2),r=i<<16|s<<8|o,n=r>>18&63,a=r>>12&63,h=r>>6&63,l=63&r,p[c/3]=m.charAt(n)+m.charAt(a)+m.charAt(h)+m.charAt(l);return d=p.join(""),d=d.slice(0,d.length-f.length)+f},Base64.decode=function(t,e){e="undefined"==typeof e?!1:e;var i,s,o,r,n,a,h,l,c,u,d=[],p=Base64.code;u=e?t.decodeUTF8():t;for(var f=0;f<u.length;f+=4)r=p.indexOf(u.charAt(f)),n=p.indexOf(u.charAt(f+1)),a=p.indexOf(u.charAt(f+2)),h=p.indexOf(u.charAt(f+3)),l=r<<18|n<<12|a<<6|h,i=l>>>16&255,s=l>>>8&255,o=255&l,d[f/4]=String.fromCharCode(i,s,o),64==h&&(d[f/4]=String.fromCharCode(i,s)),64==a&&(d[f/4]=String.fromCharCode(i));return c=d.join(""),e?c.decodeUTF8():c};var Utf8={};Utf8.encode=function(t){var e=t.replace(/[\u0080-\u07ff]/g,function(t){var e=t.charCodeAt(0);return String.fromCharCode(192|e>>6,128|63&e)});return e=e.replace(/[\u0800-\uffff]/g,function(t){var e=t.charCodeAt(0);return String.fromCharCode(224|e>>12,128|e>>6&63,128|63&e)})},Utf8.decode=function(t){var e=t.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(t){var e=(15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2);return String.fromCharCode(e)});return e=e.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(t){var e=(31&t.charCodeAt(0))<<6|63&t.charCodeAt(1);return String.fromCharCode(e)})},define("libs/AES",function(){}),function(t){"function"==typeof define?define("libs/qwest",t):"undefined"!=typeof module?module.exports=t:this.qwest=t}(function(){var win=window,limit=null,requests=0,request_stack=[],getXHR=function(){return win.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},version2=""===getXHR().responseType,qwest=function(method,url,data,options,before){data=data||null,options=options||{};var typeSupported=!1,xhr=getXHR(),async=void 0===options.async?!0:!!options.async,cache=options.cache,type=options.type?options.type.toLowerCase():"json",user=options.user||"",password=options.password||"",headers={"X-Requested-With":"XMLHttpRequest"},accepts={xml:"application/xml, text/xml",html:"text/html",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},toUpper=function(t,e,i){return e+i.toUpperCase()},vars="",i,j,parseError="parseError",serialized,success_stack=[],error_stack=[],complete_stack=[],response,success,error,func,promises={success:function(t){return async?success_stack.push(t):success&&t.apply(xhr,[response]),promises},error:function(t){return async?error_stack.push(t):error&&t.apply(xhr,[response]),promises},complete:function(t){return async?complete_stack.push(t):t.apply(xhr),promises}},promises_limit={success:function(t){return request_stack[request_stack.length-1].success.push(t),promises_limit},error:function(t){return request_stack[request_stack.length-1].error.push(t),promises_limit},complete:function(t){return request_stack[request_stack.length-1].complete.push(t),promises_limit}},handleResponse=function(){var i,req,p;if(--requests,request_stack.length){for(req=request_stack.shift(),p=qwest(req.method,req.url,req.data,req.options,req.before),i=0;func=req.success[i];++i)p.success(func);for(i=0;func=req.error[i];++i)p.error(func);for(i=0;func=req.complete[i];++i)p.complete(func)}try{if(!/^2/.test(xhr.status))throw xhr.status+" ("+xhr.statusText+")";var responseText="responseText",responseXML="responseXML";if(typeSupported&&void 0!==xhr.response)response=xhr.response;else switch(type){case"json":try{response=win.JSON?win.JSON.parse(xhr[responseText]):eval("("+xhr[responseText]+")")}catch(e){throw"Error while parsing JSON body"}break;case"js":response=eval(xhr[responseText]);break;case"xml":if(!xhr[responseXML]||xhr[responseXML][parseError]&&xhr[responseXML][parseError].errorCode&&xhr[responseXML][parseError].reason)throw"Error while parsing XML body";response=xhr[responseXML];break;default:response=xhr[responseText]}if(success=!0,async)for(i=0;func=success_stack[i];++i)func.apply(xhr,[response])}catch(e){if(error=!0,response="Request to '"+url+"' aborted: "+e,async)for(i=0;func=error_stack[i];++i)func.apply(xhr,[response])}if(async)for(i=0;func=complete_stack[i];++i)func.apply(xhr)};if(limit&&requests==limit)return request_stack.push({method:method,url:url,data:data,options:options,before:before,success:[],error:[],complete:[]}),promises_limit;if(++requests,win.ArrayBuffer&&(data instanceof ArrayBuffer||data instanceof Blob||data instanceof Document||data instanceof FormData))"GET"==method&&(data=null);else{var values=[],enc=encodeURIComponent;for(i in data)void 0!==data[i]&&values.push(enc(i)+(data[i].pop?"[]":"")+"="+enc(data[i]));data=values.join("&"),serialized=!0}if("GET"==method&&(vars+=data),null==cache&&(cache="POST"==method),cache||(vars&&(vars+="&"),vars+="__t="+Date.now()),vars&&(url+=(/\?/.test(url)?"&":"?")+vars),xhr.open(method,url,async,user,password),type&&version2)try{xhr.responseType=type,typeSupported=xhr.responseType==type}catch(e){}version2?xhr.onload=handleResponse:xhr.onreadystatechange=function(){4==xhr.readyState&&handleResponse()};for(i in headers)j=i.replace(/(^|-)([^-])/g,toUpper),headers[j]=headers[i],delete headers[i],xhr.setRequestHeader(j,headers[j]);return!headers["Content-Type"]&&serialized&&"POST"==method&&xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),headers.Accept||xhr.setRequestHeader("Accept",accepts[type]),before&&before.apply(xhr),xhr.send("POST"==method?data:null),promises};return{get:function(t,e,i,s){return qwest("GET",t,e,i,s)},post:function(t,e,i,s){return qwest("POST",t,e,i,s)},xhr2:version2,limit:function(t){limit=t}}}()),define("libs/GBAPI",["require","exports","module","./AES","./qwest"],function(t,e,i){var s=(t("./AES"),t("./qwest")),o=function(){this.targetFile="xxx",this.sharedKey=null,this.lastEncryption=!1,this.defaultGame=0,this.defaultPerPage=20,this.defaultPageNumber=1,this.highestScore=-1};o.prototype.setTargetFile=function(t){this.targetFile=t},o.prototype.setSharedKey=function(t){this.sharedKey=t},o.prototype.checkCanSubmitScore=function(t,e,i){-1===this.highestScore?this.getScores({game:e||this.defaultGame,perPage:1,pageNumber:20,date:0},function(e){e.results.length?this.highestScore=parseInt(e.results[0].score_int):this.highestScore=0,i(t>this.highestScore)}.bind(this)):i(t>this.highestScore)},o.prototype.sendScore=function(t,e){if(this._keyIsValid()){var i=" .|:=-=:|. ",s=Aes.Ctr.encrypt(t.game||"",this.sharedKey,256),o=Aes.Ctr.encrypt(t.name,this.sharedKey,256),r=Aes.Ctr.encrypt(t.score,this.sharedKey,256),n=Aes.Ctr.encrypt(s+i+o+i+r,this.sharedKey,256),t={val:n};this.lastEncryption=t,this._makeCall("add",t,e)}},o.prototype.getScores=function(t,e){var i=new Date,s=0;if(t.date===o.TODAY){var r=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);s=r.getTime()/1e3}else if(t.date===o.WEEK){var n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0),a=n.getDay()||7;1!==a&&n.setHours(-24*(a-1)),s=Math.floor(n.getTime()/1e3)}t.game=t.game||this.defaultGame,t.perPage=t.perPage||this.defaultPerPage,t.pageNumber=t.pageNumber||this.defaultPageNumber,t.startTimestamp=s,t.endTimestamp=0,this._makeCall("get",t,e)},o.prototype._makeCall=function(t,e,i){s.post(this.targetFile,{f:t,params:JSON.stringify(e)},{type:"json"}).success(function(t){"function"==typeof i&&i(t)}).error(function(t){})},o.prototype._keyIsValid=function(){return null===this.sharedKey||""===this.sharedKey||"undefined"==typeof this.sharedKey?!1:!0},o.instance=new o,o.TODAY=0,o.WEEK=1,o.ALL=2,i.exports=o}),define("com/rebels/app/screens/GameScreen",["require","exports","module","PIXI","../../game/RebelsGame","../system/GameSaveManager","fido/app/transitions/CartoonTransition","starwars/transitions/SwipeTransition","com/rebels/game/LevelManager","com/rebels/game/GameConfig","libs/GBAPI","fido/goals/Goals","fido/loader/Cache","tracker"],function(t,e,i){var s=t("PIXI"),o=t("../../game/RebelsGame"),r=t("../system/GameSaveManager"),n=(t("fido/app/transitions/CartoonTransition"),t("starwars/transitions/SwipeTransition")),a=t("com/rebels/game/LevelManager"),h=t("com/rebels/game/GameConfig"),l=t("libs/GBAPI"),c=t("fido/goals/Goals"),u=t("fido/loader/Cache"),d=function(t){this.app=t,s.Container.call(this),this.game=new o(this.app),this.game.onGameover.add(this.onGameover,this),this.addChild(this.game.view),this.gameDetail={time:0,score:0,starRating:0},s.isWebGL&&(this.transition=new n)};d.prototype=Object.create(s.Container.prototype),d.prototype.onShow=function(){this.game.start(),this.app.overlayManager.onShow.add(this.onOverlayShow,this),this.app.overlayManager.onHide.add(this.onOverlayHide,this),this.app.alertPanelManager.onShow.add(this.onOverlayShow,this),this.app.alertPanelManager.onHide.add(this.onOverlayHide,this),this.app.topMenu.setMode("game"),setTimeout(function(){}.bind(this),1e3)},d.prototype.quit=function(){this.screenManager.gotoScreenByID("title")},d.prototype.onGameover=function(e){if(h.deathType=this.game.deathType,this.game.didFinish){t("tracker").trackAction("level_finish_"+h.levelIndex),this.gameDetail.score=this.game.score||2e3,this.gameDetail.coinMultipler=this.game.nbMultiplyer,window.wednesday&&(this.gameDetail.coinMultipler*=2),this.gameDetail.starRating=this.game.stars||1,this.gameDetail.time=Math.floor(this.game.hud.timerView.timeElapsed),this.gameDetail.coins=this.game.nbCoins,this.gameDetail.totalPickups=this.game.totalPickups,this.gameDetail.numPickups=this.game.numPickups,3===this.gameDetail.starRating&&(c.instance.increment("threeStarsFinish",1),0===h.worldIndex&&3!==r.instance.save.worlds[h.worldIndex].levels[h.levelIndex].starRating?c.instance.increment("threeStarsFinishTraining",1):1===h.worldIndex&&3!==r.instance.save.worlds[h.worldIndex].levels[h.levelIndex].starRating?c.instance.increment("threeStarsFinishLothal",1):2===h.worldIndex&&3!==r.instance.save.worlds[h.worldIndex].levels[h.levelIndex].starRating?c.instance.increment("threeStarsFinishGarel",1):3===h.worldIndex&&3!==r.instance.save.worlds[h.worldIndex].levels[h.levelIndex].starRating&&(c.instance.increment("threeStarsFinishDestroyer",1),9===h.levelIndex&&c.instance.increment("threeStarsAllLevels",1)));var i=this.gameDetail.score>r.instance.save.worlds[h.worldIndex].levels[h.levelIndex].score;if(r.instance.saveLevelDetails(h.worldIndex,h.levelIndex,this.gameDetail),a.onLevelComplete(),i){for(var s=0,o=0;o<r.instance.save.worlds.length;o++)for(var n=r.instance.save.worlds[o],d=0;d<n.levels.length;d++){var p=n.levels[d];s+=p.score}l.instance.checkCanSubmitScore(s,u.getJson("config").config.SCORE_ID,function(t){t?this.app.overlayManager.show("highscore"):this.app.overlayManager.show("completion")}.bind(this))}else this.app.overlayManager.show("completion")}else this.app.overlayManager.show("gameover")},d.prototype.onHide=function(){this.app.overlayManager.onShow.remove(this.onOverlayShow,this),this.app.overlayManager.onHide.remove(this.onOverlayHide,this)},d.prototype.onHidden=function(){this.game.pause()},d.prototype.onOverlayShow=function(){this.game.pause()},d.prototype.onOverlayHide=function(){this.game.isGameover?(this.game.reset(),this.game.resume()):(this.game.resume(),this.app.topMenu.setMode("game"))},d.prototype.resize=function(t,e){this.game.resize(t,e)},i.exports=d}),define("com/rebels/app/screens/LevelPanel",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","com/rebels/app/buttons/IconButton","fido/loader/Cache","com/rebels/app/system/GameSaveManager"],function(t,e,i){function s(t){var e=new o.Container,i={name:"I'm a level",scoreData:[0,0,0]};if(t){for(var s in i)"undefined"==typeof t[s]&&(t[s]=i[s]);this.levelData=t}else this.levelData=i;r.call(this,e),this.id=0,this.bkg=new o.Sprite.fromFrame("item_panel.png"),this.bkg.scale.set(.8,1.16),this.view.addChild(this.bkg),this.title=new o.Text(this.levelData.name,{font:"36px "+window.SECONDARY_FONT,fill:"white"}),this.title.x=.5*this.bkg.width,this.title.y=10,this.title.anchor.x=.5,this.view.addChild(this.title),this.scoreString="Score : ",this.scoreText=new o.Text(this.scoreString,{font:"36px "+window.SECONDARY_FONT,fill:"white"}),this.scoreText.x=.5*this.bkg.width,this.scoreText.y=390,this.scoreText.anchor.x=.5,this.view.addChild(this.scoreText),this.timeString="Time : ",this.timeText=new o.Text(this.timeString,{font:"36px "+window.SECONDARY_FONT,fill:"white"}),this.timeText.x=.5*this.bkg.width,this.timeText.y=450,this.timeText.anchor.x=.5,this.view.addChild(this.timeText),this.playButton=n.big("icon_play.png"),this.playButton.view.x=this.bkg.x+.5*this.bkg.width,this.playButton.view.y=170,this.playButton.interactive=!1,this.view.addChild(this.playButton.view),this.bombs=[],this.bombContainer=new o.Container,this.bombContainer.position.set(70,325),this.view.addChild(this.bombContainer);for(var a=0;3>a;a++){var h=(new o.Graphics).lineStyle(1,0).beginFill(16763904,1).drawCircle(0,0,30).endFill();h.x=90*a,this.bombContainer.addChild(h),this.bombs.push(h)}}var o=t("PIXI"),r=t("fido/ui/buttons/AbstractButton"),n=t("com/rebels/app/buttons/IconButton"),a=(t("fido/loader/Cache"),t("com/rebels/app/system/GameSaveManager"));s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.setData=function(t,e){if("undefined"==typeof t)return void(this.visible=!1);var i=a.instance.save,s=i.worlds[e].levels[t];this.view.alpha=s.unlocked===!0?1:.4,this.id=t,this.interactive=s.unlocked,this.title.text=s.name,this.scoreText.text=this.scoreString+s.score,this.timeText.text=this.timeString+s.time;for(var o=0;o<this.bombs.length;o++)o+1<=s.starRating?this.bombs[o].alpha=1:this.bombs[o].alpha=.4},s.prototype.setText=function(t){this.title.text=t},i.exports=s}),define("com/rebels/app/screens/LevelScreen",["require","exports","module","PIXI","com/rebels/app/buttons/IconButton","fido/system/Device","fido/ui/PixiTrackpad","com/rebels/app/screens/LevelPanel","com/rebels/app/system/GameSaveManager","fido/loader/Cache","com/rebels/game/LevelManager","com/rebels/game/GameConfig"],function(t,e,i){var s=t("PIXI"),o=(t("com/rebels/app/buttons/IconButton"),t("fido/system/Device")),r=t("fido/ui/PixiTrackpad"),n=t("com/rebels/app/screens/LevelPanel"),a=(t("com/rebels/app/system/GameSaveManager"),t("fido/loader/Cache")),h=t("com/rebels/game/LevelManager"),l=t("com/rebels/game/GameConfig"),c=function(t){this.app=t,s.Container.call(this),this.isMobile=o.instance.isMobile;var e={font:"52px "+window.MAIN_FONT,fill:"white",stroke:"#a9e8eb",strokeThickness:2};this.title=new s.Text(translations.STR_SELECT_YOUR_LEVEL,e),this.title.anchor.x=.5,this.addChild(this.title),this.levelContainer=new s.Container,this.levelContainer.x=40,this.levelContainer.y=150,this.levelContainer.scale.set(.8),this.addChild(this.levelContainer),this.levelPanels=[],this.currentWorld=0;var i={target:this};this.trackpad=new r(i),this.hitArea=new s.Rectangle(0,200,1136,500),this.once=!0,this.init()};c.prototype=Object.create(s.Container.prototype),c.prototype.init=function(){this.createStages()},c.prototype.onButtonPressed=function(t){t===this.backButton&&this.screenManager.gotoScreenByID("worlds"),this.trackpad.didMove||t.view.parent===this.levelContainer&&(l.worldIndex=this.currentWorld,l.levelId=this.worldData[this.currentWorld].levels[t.id].id,l.levelData=t.data,h.currentWorldIndex=this.currentWorld,h.restart(),this.screenManager.gotoScreenByID("game"),TweenLite.delayedCall(1.4,this.showTutorial,[],this))},c.prototype.createStages=function(){var t=a.getJson("levels");this.worldData=t.worlds;for(var e=0;10>e;e++){var i=new n;i.view.x=400*e+50,i.onUp.add(this.onButtonPressed,this),i.id=e,this.levelContainer.addChild(i.view),this.levelPanels.push(i)}this.trackpad.scrollMax=0,this.trackpad.scrollMin=-240,this.trackpad.spring.damp=.6,this.trackpad.capMovement=!0},c.prototype.updateStages=function(){for(var t=0;t<this.levelPanels.length;t++)this.levelPanels[t].view.visible=!1;var e=this.worldData[this.currentWorld];this.trackpad.setPosition(0),this.trackpad.scrollMin=200*-e.levels.length,this.trackpad.maxSlots=e.levels.length-1,this.title.text=e.name;for(var t=0;t<e.levels.length;t++)this.levelPanels[t].setData(t,this.currentWorld),
this.levelPanels[t].view.visible=!0},c.prototype.showTutorial=function(){this.once&&(this.once=!1)},c.prototype.onShow=function(){this.app.topMenu.setMode("normal"),this.updateStages()},c.prototype.onShown=function(){},c.prototype.onHide=function(){},c.prototype.updateTransform=function(){this.trackpad.update(),this.levelContainer.x=this.trackpad.value,s.Container.prototype.updateTransform.call(this)},c.prototype.resize=function(t,e){this.isMobile?this.title.position.set(t/2,70):this.title.position.set(t/2,40)},i.exports=c}),define("com/rebels/app/screens/WorldPanel",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","com/rebels/app/buttons/IconButton","com/rebels/app/system/GameSaveManager"],function(t,e,i){function s(t){var e=new o.Container,i={name:"I'm a world panel",levels:[]};if(t){for(var s in i)"undefined"==typeof t[s]&&(t[s]=i[s]);this.worldData=t}else this.worldData=i;r.call(this,e),this.id=0,this.bkg=new o.Sprite.fromFrame("item_panel.png"),this.bkg.scale.set(.8,.95),this.view.addChild(this.bkg),this.title=new o.Text(this.worldData.name,{font:"36px "+window.SECONDARY_FONT,fill:"white",align:"center"}),this.title.x=.5*this.bkg.width,this.title.y=10,this.title.anchor.x=.5,this.view.addChild(this.title),this.playButton=n.big("icon_play.png"),this.playButton.view.x=this.bkg.x+.5*this.bkg.width,this.playButton.view.y=210,this.playButton.interactive=!1,this.view.addChild(this.playButton.view),this.containerTicks=new o.Container,this.containerTicks.position.x=this.bkg.width/2,this.containerTicks.position.y=330,this.view.addChild(this.containerTicks),this.progressText=new o.Text(this.worldData.name,{font:"36px "+window.SECONDARY_FONT,fill:"white"}),this.progressText.x=.5*this.bkg.width,this.progressText.y=350,this.progressText.anchor.x=.5,this.view.addChild(this.progressText),this.setData(this.worldData.levels)}var o=t("PIXI"),r=t("fido/ui/buttons/AbstractButton"),n=t("com/rebels/app/buttons/IconButton"),a=t("com/rebels/app/system/GameSaveManager");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.setData=function(t){for(var e=0,i=0,s=0;s<t.length;s++){var r=new o.Sprite;t[s].complete===!0?(e++,r.texture=new o.Texture.fromFrame("tick_full.png")):r.texture=new o.Texture.fromFrame("tick_empty.png"),r.position.x=i,i+=r.width+5,this.containerTicks.addChild(r)}this.containerTicks.pivot.x=this.containerTicks.width/2;var n=this.worldData.levels.length;this.progressText.text=e+"/"+n+" levels"},s.prototype.updateData=function(){this.worldData=a.instance.save.worlds[this.id],this.setData(this.worldData.levels)},s.prototype.setText=function(t){this.title.text=t},i.exports=s}),define("com/rebels/app/screens/WorldScreen",["require","exports","module","PIXI","com/rebels/app/buttons/IconButton","fido/system/Device","fido/ui/PixiTrackpad","com/rebels/app/screens/WorldPanel","com/rebels/app/screens/LevelPanel","com/rebels/app/system/GameSaveManager","fido/loader/Cache","com/rebels/game/LevelManager","com/rebels/game/GameConfig"],function(t,e,i){var s=t("PIXI"),o=t("com/rebels/app/buttons/IconButton"),r=t("fido/system/Device"),n=t("fido/ui/PixiTrackpad"),a=t("com/rebels/app/screens/WorldPanel"),h=(t("com/rebels/app/screens/LevelPanel"),t("com/rebels/app/system/GameSaveManager"),t("fido/loader/Cache")),l=(t("com/rebels/game/LevelManager"),t("com/rebels/game/GameConfig"),function(t){this.app=t,s.Container.call(this),this.isMobile=r.instance.isMobile;var e={font:"52px "+window.SECONDARY_FONT,fill:"white",stroke:"#a9e8eb",strokeThickness:2};this.title=new s.Text(translations.STR_SELECT_YOUR_LEVEL_WORLD,e),this.title.anchor.x=.5,this.addChild(this.title),this.panelContainer=new s.Container,this.panelContainer.y=170,this.addChild(this.panelContainer),this.worldData={},this.worldPanels=[],this.backButton=o.small("icon_play.png"),this.currentWorld=0;var i={target:this};this.trackpad=new n(i),this.hitArea=new s.Rectangle(0,200,1136,500),this.init()});l.prototype=Object.create(s.Container.prototype),l.prototype.init=function(){this.createWorlds()},l.prototype.onButtonPressed=function(t){t===this.backButton&&this.screenManager.gotoScreenByID("title"),this.trackpad.didMove||t.view.parent===this.panelContainer&&(this.currentWorld=t.id,this.showLevels())},l.prototype.createWorlds=function(){var t=h.getJson("levels");this.worldData=t.worlds;for(var e=0;e<this.worldData.length;e++){var i=new a(this.worldData[e]);i.view.x=400*e+50,i.onUp.add(this.onButtonPressed,this),i.id=e,this.panelContainer.addChild(i.view),this.worldPanels.push(i)}this.trackpad.scrollMax=0,this.trackpad.scrollMin=240*-(this.worldData.length-1),this.trackpad.spring.damp=.6,this.trackpad.maxSlots=this.worldData.length-1,this.trackpad.capMovement=!0},l.prototype.showLevels=function(){this.app.levelScreen.currentWorld=this.currentWorld,this.app.screenManager.gotoScreenByID("levels")},l.prototype.onShow=function(){this.app.topMenu.setMode("normal"),this.trackpad.setPosition(0),alert();for(var t=0;t<this.worldPanels.length;t++)this.worldPanels[t].updateData()},l.prototype.onShown=function(){},l.prototype.onHide=function(){},l.prototype.updateTransform=function(){this.trackpad.update(),this.panelContainer.x=this.trackpad.value,s.Container.prototype.updateTransform.call(this)},l.prototype.resize=function(t,e){this.isMobile?this.title.position.set(t/2,70):this.title.position.set(t/2,40)},i.exports=l}),define("com/rebels/app/screens/GamePrepScreen",["require","exports","module","PIXI","signals","fido/loader/Cache","fido/system/Ticker","com/rebels/game/GameConfig","starwars/transitions/SwipeTransition","fido/utils/Utils","starwars/buttons/GoldenButton"],function(t,e,i){var s=t("PIXI"),o=(t("signals"),t("fido/loader/Cache")),r=t("fido/system/Ticker"),n=t("com/rebels/game/GameConfig"),a=t("starwars/transitions/SwipeTransition"),h=t("fido/utils/Utils"),l=t("starwars/buttons/GoldenButton"),c=function(t){this.app=t,s.isWebGL&&(this.transition=new a),s.Container.call(this),this.isFirstRun=!0,this.counter=0,this.bg=(new s.Graphics).beginFill(0).drawRect(0,0,2e3,2e3),this.addChild(this.bg),this.pollerView=new s.Container,this.addChild(this.pollerView),this.poller=(new s.Graphics).beginFill(16711680).drawRect(0,0,32,32),this.pollerView.addChild(this.poller),this.addChild(this.pollerView),this.assetsToLoad=null,this.sky=new s.Sprite.fromImage(ASSET_URL+"img/game/transition_bg.jpg"),this.addChild(this.sky),this.background=new l,this.background.disable(),this.background.position.x=this.app.safeSize.width/2,this.background.position.y=this.app.safeSize.height/2,this.spin=new s.Sprite.fromFrame("poller_spin.png"),this.spin.anchor.set(.5),this.spin.scale.set(.9),this.spin.position=this.background.position,this.addChild(this.background),this.addChild(this.spin)};c.prototype=Object.create(s.Container.prototype),c.prototype.onShow=function(){r.instance.add(this.update,this),this.app.topMenu.setMode("nothing")},c.prototype.onShown=function(){for(var t=o.getJson("levels").worlds,e=t[n.worldIndex],i=(e.levels[n.levelIndex],null),r=trackData.length-1;r>=0;r--)if(trackData[r].level===n.levelId){i=trackData[r];break}var a=h.get_query("level");if(a)for(var r=trackData.length-1;r>=0;r--)trackData[r].level==="DM_"+a&&(i=trackData[r]);for(var l=[],c=4,u=i.active,r=0;r<i.active.length;r+=c){var d=u[r+2];if("FatBg"===d){var p=u[r+3];l.push(ASSET_URL+p.url)}}if(this.assetsToLoad=l,l.length>0){var f=new s.loaders.Loader;f.add(l),f.once("complete",this._onComplete.bind(this)),f.load()}else this._onComplete()},c.prototype.onHidden=function(){this.pollerView.visible=!1,r.instance.remove(this.update,this)},c.prototype.update=function(){this.counter++,this.poller.rotation+=.1,this.spin.rotation+=.1,this.spin.alpha=.39+Math.abs(.6*Math.cos(this.counter/100))},c.prototype._onComplete=function(){for(var t=0;t<this.assetsToLoad.length;t++);this.screenManager.gotoScreenByID("game")},c.prototype._onProgress=function(){},c.prototype.resize=function(t,e){this.pollerView.x=t/2,this.pollerView.y=e/2},i.exports=c}),define("starwars/hud/PopUp",["require","exports","module","PIXI","fido/goals/Goals","fido/sound/SoundManager","fido/utils/FrameWait"],function(t,e,i){var s=t("PIXI"),o=(t("fido/goals/Goals"),t("fido/sound/SoundManager")),r=t("fido/utils/FrameWait"),n=function(){s.Container.call(this),this.goalPanel=new s.Container,this.goalBkg=new s.Sprite.fromFrame("achieve_panel.png"),this.goalBkg.anchor.x=.5,this.goalPanel.addChild(this.goalBkg),this.achievementBullet=s.Texture.fromFrame("challenge_bullet_on.png"),this.goalStar=new s.Sprite(this.achievementBullet),this.goalStar.y=.5*this.goalBkg.height+5,this.goalStar.anchor.set(.5),this.goalPanel.addChild(this.goalStar),this.goalText=new s.Text("hi",{font:"24px "+window.MAIN_FONT,align:"center",fill:"#f3f3eb"}),this.goalText.anchor.set(.5),this.goalText.y=.5*this.goalBkg.height+5,this.goalPanel.addChild(this.goalText),this.addChild(this.goalPanel),this.goalPanel.pivot.y=-40,this.queue=[],this.processing=!1,this.current=null};n.prototype=Object.create(s.Container.prototype),n.prototype.receiveAchievement=function(t){t.type="achievement",this.queue.push(t),this.processQueue()},n.prototype.receiveTrophy=function(t){t.type="trophy",this.queue.push(t),this.processQueue()},n.prototype.processQueue=function(){if(!this.processing){var t=this.queue.pop();if(this.processing=!0,!t)return this.goalPanel.visible=!1,this.processing=!1,void(this.current=null);this.current=t,"achievement"===t.type?this.showAchievement(t):"trophy"===t.type&&this.showTrophy(t)}},n.prototype.showAchievement=function(t){this.goalText.text=t.desc,this.goalText.scale.set(1);var e=Math.min(.85*this.goalBkg.width/this.goalText.width,1);this.goalText.scale.set(e),this.goalStar.x=-(.5*this.goalText.width+5),this.goalText.x=10,this.goalStar.texture=this.achievementBullet,this.goalPanel.visible=!0,this.reveal()},n.prototype.showTrophy=function(t){var e={durasteel:"STR_TROPHY_DURASTEEL",bronze:"STR_TROPHY_BRONZE",silver:"STR_TROPHY_SILVER",gold:"STR_TROPHY_GOLD"};!window.translations[e[t.name]];var i=window.translations[e[t.name]];this.goalText.text=i?i:t.name,this.goalText.scale.set(1);var o=Math.min(.85*this.goalBkg.width/this.goalText.width,1);this.goalText.scale.set(o),this.goalStar.x=-(.5*this.goalText.width+20),this.goalStar.texture=s.Texture.fromFrame(t.image),this.goalPanel.visible=!0,this.reveal()},n.prototype.reveal=function(){s.isWebGL?TweenLite.to(this.goalPanel.pivot,.4,{y:18,easeOut:Expo.easeOut,delay:.2,onComplete:function(){o.sfx.play("earned_achievement"),TweenLite.to(this.goalPanel.pivot,.4,{y:-40,easeOut:Expo.easeIn,delay:6,onComplete:function(){this.processing=!1,this.processQueue()}.bind(this)})}.bind(this)}):(o.sfx.play("earned_achievement"),this.goalPanel.pivot.y=18,r.wait(function(){this.goalPanel.pivot.y=-40,this.processing=!1,this.processQueue()}.bind(this),360))},n.prototype.restart=function(){this.processing=!1,this.goalPanel.visible=!0,this.current&&this.queue.push(this.current),this.processQueue()},n.prototype.stop=function(){this.processing=!0,TweenLite.killTweensOf(this.goalPanel.pivot),s.isWebGL?TweenLite.to(this.goalPanel.pivot,.4,{y:-40,easeOut:Expo.easeIn,overwrite:!0}):this.goalPanel.pivot.y=-40},i.exports=n}),define("fido/goals/Trophies",["require","exports","module","signals","fido/loader/Cache","fido/system/LocalStorage","fido/utils/Utils","fido/goals/Goals"],function(t,e,i){var s=t("signals"),o=(t("fido/loader/Cache"),t("fido/system/LocalStorage"),t("fido/utils/Utils")),r=t("fido/goals/Goals"),n=function(t){var e={medals:{durasteel:10,bronze:20,silver:30,gold:40},images:{durasteel:"trophy_rebels_steel.png",bronze:"trophy_rebels_bronze.png",silver:"trophy_rebels_silver.png",gold:"trophy_rebels_gold.png"},names:{durasteel:translations.STR_TROPHY_DURASTEEL,bronze:translations.STR_TROPHY_BRONZE,silver:translations.STR_TROPHY_SILVER,gold:translations.STR_TROPHY_GOLD},goals_storage:null,goal_system:null,game_name:null};this.options=o.defaults(t,e),this.trophies=[],this.options.goal_system?this.goals=this.options.goal_system:(this.goals=new r(this.options.goals_storage),this.goals.load()),this.onTrophyEarned=new s};n.prototype.init=function(){var t=this.goals.goalsCompleted();for(var e in this.options.medals){var i=this.options.medals[e],s={name:this.options.names[e],earned:t>=i,target:i,image:this.options.images[e]};this.trophies.push(s)}this.goals.achievementUnlocked.add(this.onAchievement,this)},n.prototype.onAchievement=function(t){for(var e=this.goals.goalsCompleted(),i=0;i<this.trophies.length;i++){var s=this.trophies[i],o=s.target<=e;o!==s.earned&&(s.earned=!0,this.onTrophyEarned.dispatch(s))}},n.prototype.getTrophies=function(){return this.trophies.slice()},n.prototype.getEarned=function(){for(var t=[],e=0;e<this.trophies.length;e++)this.trophies[e].earned&&t.push(this.trophies[e]);return t},n.prototype.getTotal=function(){return this.trophies.length},n.prototype.getName=function(){return this.options.game_name?this.options.game_name:""},n.prototype.getGoalsCompleted=function(){return this.goals.goalsCompleted()},n.prototype.getTotalGoals=function(){return this.goals.getLastAchievements().length},n.prototype.trophiesEarned=function(){for(var t=0,e=0;e<this.trophies.length;e++)this.trophies[e].earned&&t++;return t},i.exports=n}),define("starwars/app/TopMenu",["require","exports","module","PIXI","starwars/buttons/GoldenButton","fido/sound/SoundBridge","fido/system/Device","starwars/hud/PopUp","fido/goals/Goals","fido/goals/Trophies"],function(t,e,i){var s=t("PIXI"),o=t("starwars/buttons/GoldenButton"),r=t("fido/sound/SoundBridge"),n=(t("fido/system/Device"),t("starwars/hud/PopUp")),a=t("fido/goals/Goals"),h=t("fido/goals/Trophies"),l=function(t){this.app=t,s.Container.call(this),this.mode="",this.alpha=0,this.muteButton=new o("icon_mute.png"),this.muteButton.cacheAsBitmap=!1,this.muteButton.visible=!1,this.muteButton.cacheAsBitmap=!0,this.muteButton.setSize("small"),this.addChild(this.muteButton.view),this.muteButton.onPress.add(this.onButtonPressed,this),this.pauseButton=new o("icon_pause.png"),this.pauseButton.cacheAsBitmap=!1,this.pauseButton.visible=!1,this.pauseButton.cacheAsBitmap=!0,this.pauseButton.setSize("small"),this.addChild(this.pauseButton.view),this.pauseButton.onPress.add(this.onButtonPressed,this),this.helpButton=new o("icon_help.png"),this.helpButton.cacheAsBitmap=!1,this.helpButton.visible=!1,this.helpButton.cacheAsBitmap=!0,this.helpButton.setSize("small"),this.addChild(this.helpButton.view),this.helpButton.onPress.add(this.onButtonPressed,this),this.backButton=new o("icon_next.png"),this.backButton.scale.x*=-1,this.backButton.cacheAsBitmap=!1,this.backButton.visible=!1,this.backButton.cacheAsBitmap=!0,this.backButton.setSize("small"),this.backButton.onPress.add(this.onButtonPressed,this),this.addChild(this.backButton.view),this.homeButton=new o("inner_disc_red_small.png"),this.homeButton.cacheAsBitmap=!1,this.homeButton.visible=!1,this.homeButton.cacheAsBitmap=!0,this.homeButton.setSize("small"),this.homeButton.view.x=82,this.homeButton.view.y=64,this.homeButton.onPress.add(this.onButtonPressed,this),this.addChild(this.homeButton.view),this.hamburgerButton=new o("icon_burger.png"),this.hamburgerButton.cacheAsBitmap=!1,this.hamburgerButton.visible=!1,this.hamburgerButton.cacheAsBitmap=!0,this.hamburgerButton.setSize("small"),this.hamburgerButton.view.x=80,this.hamburgerButton.view.y=64,this.hamburgerButton.onPress.add(this.onButtonPressed,this),this.addChild(this.hamburgerButton.view),this.coinContainer=new s.Container,this.coinContainer.visible=!1,this.coinContainer.x=175,this.coinContainer.y=60,this.addChild(this.coinContainer),this.coinsText=new s.extras.BitmapText(this.app.shopSystem.getMoney().toString(),{font:"38px Star Jedi"}),this.coinsText.pivot.y=.5*this.coinsText.height,this.coinsText.x=40,this.coinsText.y=-14,this.coinContainer.addChild(this.coinsText),this.coins=[];for(var e=0;10>e;e++){var i=new s.Sprite.fromFrame("hangar_token_3D_10.png");i.visible=!1,i.anchor.set(.5),this.coins.push(i),this.addChild(i)}this.coinIcon=new s.Sprite.fromFrame("coin_ui.png"),this.coinIcon.anchor.set(.5),this.coinContainer.addChild(this.coinIcon),this.goalPanel=new n,this.addChild(this.goalPanel),a.instance.achievementUnlocked.add(this.showCurrentGoal,this),h.instance.onTrophyEarned.add(this.showTrophy,this),this.app.shopSystem.onChange.add(this.onShopSystemChange,this),r.sfx.onMuteToggle.add(this.onMuteToggle,this),r.music.onMuteToggle.add(this.onMuteToggle,this),this.setMode("normal")};l.prototype=Object.create(s.Container.prototype),l.prototype.showCurrentGoal=function(t){this.goalPanel.receiveAchievement(t)},l.prototype.showTrophy=function(t){this.goalPanel.receiveTrophy(t)},l.prototype.onShopSystemChange=function(){this.coinsText.text=this.app.shopSystem.getMoney().toString()},l.prototype.show=function(t){t=void 0!==t?t:.4,this.interactive=!0,this.interactiveChildren=!0,TweenLite.to(this,t,{alpha:1})},l.prototype.hide=function(t){t=void 0!==t?t:.4,this.interactive=!1,this.interactiveChildren=!1,t?TweenLite.to(this,t,{alpha:0}):this.alpha=0},l.prototype.setMode=function(t){this.mode=t;var e="Rebels"===this.app.id||"Runner"===this.app.id||"Fighter"===this.app.id;/game/.test(t)?this.pauseButton.show():this.pauseButton.hide(),this.hamburgerButton.visible=/arcade/.test(t)||/title/.test(t)&&e?!0:!1,/pause|normal|arcade|title|levels|tutorial/.test(t)?this.muteButton.show():this.muteButton.hide(),/pause|normal|arcade|title|levels/.test(t)?this.helpButton.show():this.helpButton.hide(),/pause/.test(t)?this.backButton.show():this.backButton.hide(),/pause/.test(t)?this.homeButton.show():this.homeButton.hide(),/arcade|token/.test(t)?(this.coinContainer.visible=!0,TweenMax.to(this.coinContainer,.4,{alpha:1})):TweenMax.to(this.coinContainer,.4,{alpha:0,onComplete:function(){this.coinContainer.visible=!1},onCompleteScope:this})},l.prototype.getMode=function(){return this.mode},l.prototype.onButtonPressed=function(t){t===this.pauseButton?this.app.overlayManager.show("pause"):t===this.backButton?this.app.overlayManager.show("pause"):t===this.hamburgerButton?this.app.overlayManager.show("menu"):t===this.homeButton?(this.app.overlayManager.hide(),this.app.screenManager.show("title")):t===this.helpButton?this.app.overlayManager.show("tutorial"):t===this.muteButton&&this.toggleMute()},l.prototype.addCoin=function(t,e){function i(t){t.visible=!1,this.app.shopSystem.earnMoney(10),r.sfx.play("coin_count")}t=t||10,e||(e=new s.Sprite,e.x=.5*this.screenWidth,e.y=.5*this.screenHeight,e.scale.set(3),e.alpha=0);for(var o=this.coinIcon.scale.x,n=Math.floor(t/10),a=0;n>a;a++){var h=this.coins[a];h.x=e.x,h.y=e.y,h.alpha=e.alpha,h.scale.copy(e.scale),h.visible=!0;var l=.2+.1*Math.random(),c=.1*a+.1*Math.random();TweenLite.to(h,l,{bezier:[{x:h.x+.5*(this.coinContainer.x-h.x),y:h.y+.5*(this.coinContainer.y-h.y)-50},{x:this.coinContainer.x,y:this.coinContainer.y}],width:this.coinIcon.width,height:this.coinIcon.height,alpha:this.coinIcon.alpha,delay:c,onCompleteScope:this,onCompleteParams:[h],onComplete:i}),TweenLite.to(this.coinIcon.scale,.1,{x:2*o,y:2*o,delay:l+c}),TweenLite.to(this.coinIcon.scale,1,{x:o,y:o,ease:Elastic.easeOut,delay:l+c+.1})}},l.prototype.goBack=function(){this.app.overlayManager.hide(),this.app.screenManager.goBack()},l.prototype.toggleMute=function(){var t;return r.sfx.isMuted&&r.music.isMuted?(r.music.unmute(),r.sfx.unmute(),t=!1):(r.music.mute(),r.sfx.mute(),t=!0),this.onMuteToggle(),t},l.prototype.onMuteToggle=function(){r.sfx.isMuted&&r.music.isMuted?this.muteButton.setIcon("icon_mute_off.png"):this.muteButton.setIcon("icon_mute.png")},l.prototype.onShown=function(){},l.prototype.resize=function(t,e){if(this.screenWidth=t,this.screenHeight=e,this.backButton.view.x=82,this.backButton.view.y=64,this.goalPanel.x=t/2,this.goalPanel.y=e-35,this.isMobile){var i=100,s=20;this.muteButton.position.set(t-i-s,64),this.helpButton.view.position.set(t-i-s-110,64),this.pauseButton.view.x=this.muteButton.x,this.pauseButton.view.y=this.muteButton.y}else{var i=45,s=30;this.muteButton.position.set(t-i-s,64),this.helpButton.view.position.set(t-i-s-110,64),this.pauseButton.view.x=this.muteButton.x,this.pauseButton.view.y=this.muteButton.y}},i.exports=l}),define("starwars/OverlayManager",["require","exports","module","PIXI","signals","fido/app/ScreenManager","fido/app/transitions/DigitalTransition","starwars/buttons/GoldenButton","fido/app/Screen"],function(t,e,i){var s=t("PIXI"),o=t("signals"),r=t("fido/app/ScreenManager"),n=t("fido/app/transitions/DigitalTransition"),a=t("starwars/buttons/GoldenButton"),h=t("fido/app/Screen"),l=function(t){this.app=t,this.view=new s.Container,r.call(this),this.defaultTransition=new n,this.addScreen(new h,"empty"),this.screens.empty.hasClose=!1,this.currentScreen=this.screens.empty,this.onShow=new o,this.onHide=new o,s.isWebGL?(this.black=(new s.Graphics).beginFill(6962028).drawRect(0,0,100,100),this.black.alpha=.7,this.black.interactive=!0,this.black.blendMode=s.isWebGL?s.BLEND_MODES.MULTIPLY:0,this.black.hitArea=new s.Rectangle(0,0,1e4,1e4)):(this.black=(new s.Graphics).beginFill(0).drawRect(0,0,100,100),this.black.alpha=.6,this.black.interactive=!0,this.black.hitArea=new s.Rectangle(0,0,1e4,1e4)),this.view.visible=!1,!Device.instance.ie&&s.isWebGL&&(this.rt=new s.RenderTexture(this.app.renderer,1136,745,0,.25),this.bg=new s.Sprite(this.rt),this.view.addChild(this.bg),this.blurX=new s.filters.BlurXFilter,this.blurX.blur=30,this.blurY=new s.filters.BlurYFilter,this.blurY.blur=30,this.blurX.passes=8,this.blurY.passes=8),this.closeButton=new a("icon_close.png"),this.closeButton.setSize("small"),this.closeButton.backgroundColor="red",this.closeButton.onPress.add(this.goBack,this),this.closeButton.hide(),this.closeButton.x=this.app.safeSize.width/2+240,this.closeButton.y=this.app.safeSize.height/2-190,this.view.addChild(this.black),this.view.addChild(this.container),this.view.addChild(this.closeButton),this.app.screenManager.container.filterArea=new s.Rectangle(0,0,1e4,1e4)};l.prototype=Object.create(r.prototype),l.prototype.goBack=function(){if(this.currentScreen.backToNormalScreen)this.hide();else if(this.currentScreen.backToCompletionScreen)this.currentScreen.backToGameoverScreen?this.gotoScreenByID("gameover"):(this.completionScreen.animateStars=!1,this.gotoScreenByID("completion"));else if(this.currentScreen.backToEndlessCompletionScreen)this.gotoScreenByID("endless");else if(this.app.wasSavingEndlessModeFromPauseMenu)this.app.callbackFromPauseMenu(),this.app.wasSavingEndlessModeFromPauseMenu=!1,this.app.callbackFromPauseMenu=null;else{this.history.pop();var t=this.history.pop();t?this.gotoScreen(t):this.hide()}},l.prototype.glitch=function(){},l.prototype.show=function(t){var e=this.app.screenManager.container;e.filters=[this.blurX,this.blurY],!Device.instance.ie&&s.isWebGL&&this.rt.render(e),e.filters=null,this.history=[],this.gotoScreenByID(t,!0),this.onShow.dispatch(),this.view.visible=!0,this.view.alpha=0,TweenLite.to(this.view,.3,{alpha:1})},l.prototype.gotoScreen=function(t){t===this.screens.empty&&(t.transition=this.currentScreen.transition);var e=(void 0===t.hasBackground||t.hasBackground===!0)&&t!==this.screens.empty;!Device.instance.ie&&s.isWebGL&&(this.bg.visible=e),this.black.visible=e,void 0===t.hasClose||t.hasClose===!0?this.closeButton.show():this.closeButton.hide(),r.prototype.gotoScreen.call(this,t)},l.prototype.hide=function(){this.history=[],this.closeButton.hide(),TweenLite.to(this.view,.3,{alpha:0,onComplete:function(){this.gotoScreenByID("empty"),this.view.visible=!1,this.onHide.dispatch()}.bind(this)})},l.prototype.resize=function(t,e){this.black.scale.set(t/100,e/100),r.prototype.resize.call(this,t,e)},l.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.container.removeChild(this.currentScreen)),this.currentScreen=this.nextScreen,this.currentScreen.alpha=0,this.currentScreen.onShow&&this.currentScreen.onShow(),this.currentScreen.resize&&this.currentScreen.resize(this.w,this.h),TweenLite.to(this.currentScreen,.4,{alpha:1,onComplete:this.onFadein.bind(this)}),this.container.addChild(this.currentScreen)},i.exports=l}),define("fido/app/Brim",["require","exports","module","fido/system/Ticker","fido/system/Device","signals"],function(t,e,i){var s=t("fido/system/Ticker"),o=t("fido/system/Device"),r=(t("signals"),function(t){if(o.instance.isMobile&&o.instance.safari&&(!o.instance.iOS||!o.instance.chromeIOS)&&o.instance.webGL){var e=this.getSpec();e&&(this.activeCache=!1,this.height=e[0],window.addEventListener("resize",this.onResize.bind(this)),this.div=document.createElement("div"),this.div.style.backgroundColor="#000000",this.div.style.position="absolute",this.div.style.top="0",this.div.style.left="0",this.div.style.width="100%",this.div.style.height="9999999999999999px",this.image=new Image,this.image.src=ASSET_URL+"img/brim.png",this.image.style.position="absolute",this.image.style.top="-40px",this.image.width=500,this.div.appendChild(this.image),this.brimMode=!0,this.p=document.createElement("div"),this.p.innerHTML="oops! swipe up to keep playing!",this.p.style.position="absolute",this.p.style.top="100px",this.p.style.left=0,this.p.style.width="100%",this.p.style.fontSize="1.5rem",this.p.style.fontFamily="Exo2, sans-serif",this.p.style.color="white",this.p.style.textAlign="center",this.p.style.position="absolute",this.p.style.padding=0,document.body.appendChild(this.div),function(){var t;document.addEventListener("touchstart",function(e){this.brimMode&&(t=!0,e.preventDefault(),e.returnValue=!1)},!1),document.addEventListener("touchmove",function(e){this.brimMode&&(t&&(e.preventDefault(),e.returnValue=!1),t=!1)},!1)}(),this.onResize())}});r.prototype.getSpec=function(){for(var t=[[320,480,2,"iPhone 4"],[320,568,2,"iPhone 5 or 5s"],[375,667,2,"iPhone 6"],[414,736,3,"iPhone 6 plus"]],e=0;e<t.length;e++){var i=t[e],s=window.screen.height==i[0]&&window.screen.width==i[1]||window.screen.width==i[0]&&window.screen.height==i[1];if(s)return i}return null},r.prototype.showBrim=function(){this.div.style.visibility="visible",this.div.style.height="9999999999999999px",s.game&&(this.activeCache=s.game.active)},r.prototype.showGame=function(){this.div.style.visibility="hidden",s.game&&this.activeCache&&s.game.start(),this.div.style.height=this.height+1+"px",window.scrollTo(0,0)},r.prototype.onResize=function(){window.innerHeight>window.innerWidth||window.innerHeight===this.height?this.showGame():this.showBrim(),this.image.width=window.innerWidth,window.scrollTo(0,0)},i.exports=new r}),define("starwars/effects/interferences/LogoRebel",["require","exports","module","PIXI"],function(t,e,i){var s=t("PIXI"),o=function(t){s.Container.call(this),this.counter=0,this.logo=new s.Sprite,this.logo.anchor.set(.5),this.logo.position.y=-70,this.positions=[],this.addChild(this.logo)};o.prototype=Object.create(s.Container.prototype),o.prototype.random=function(t,e){this.logo.position=this.positions[Math.floor(Math.random()*this.positions.length)]},o.prototype.reset=function(t,e){this.logo.texture=new s.Texture.fromFrame("logorebels.png"),this.positions=[new s.Point(-t/2+this.logo.width/2+30,-e/2+this.logo.height/2+10),new s.Point(-t/2+this.logo.width/2+20,e/2-this.logo.height/2-10),new s.Point(t/2-this.logo.width/2-20,e/2-this.logo.height/2-10),new s.Point(t/2-this.logo.width/2-30,-e/2+this.logo.height/2+10)]},o.prototype.updateTransform=function(){s.Container.prototype.updateTransform.call(this),this.counter+=1,this.logo.alpha=Math.abs(.3*Math.sin(.5*Math.tan(this.counter)))+.3},i.exports=o}),define("starwars/effects/interferences/Line",["require","exports","module","PIXI","signals"],function(t,e,i){var s=t("PIXI"),o=t("signals"),r=function(t){s.Container.call(this),this.heightLine=t,this.counter=0,this.isBlinking=!1,this.blinkLives=3,this.onHide=new o;var e=new s.Graphics;e.beginFill(16777215).drawRect(0,0,1,this.heightLine),this.line=new s.Sprite(e.generateTexture()),this.line.anchor.set(.5),this.line.tint="0x2996ad",this.addChild(this.line),this.squares=[];for(var i=0;3>i;i++){var r=new s.Graphics;r.beginFill(16777215).drawRect(0,0,100*Math.random()+20,30*Math.random()+5);var n=new s.Sprite(r.generateTexture());n.tint="0x2996ad",n.position.y=-this.heightLine/2+Math.random()*this.heightLine,n.alpha=.7*Math.random()+.2,n.speed=5*Math.random()-2.5;var a=Math.random()>.5?0:1;a?n.anchor.x=0:n.anchor.x=1,this.line.addChild(n),this.squares.push(n)}};r.prototype=Object.create(s.Container.prototype),r.prototype.reset=function(){this.blinkLives=3,this.alpha=1,this.isBlinking=!1,this.isDead=!1;for(var t=0;t<this.squares.length;t++)this.squares[t].speed=5*Math.random()-2.5},r.prototype.disappear=function(){this.isBlinking=!0},r.prototype.updateTransform=function(){if(s.Container.prototype.updateTransform.call(this),this.counter+=1,!this.isDead){this.isBlinking&&(this.counter%4===0&&this.blinkLives>=0?(this.blinkLives--,this.alpha=this.alpha>0?0:1):(this.alpha=0,this.isDead=!0,this.onHide.dispatch()));for(var t=0;t<this.squares.length;t++){var e=this.squares[t];e.position.y+=e.speed,(e.position.y>=this.heightLine/2-50||e.position.y<=-this.heightLine/2-e.height)&&(e.position.y=-this.heightLine/2+Math.random()*this.heightLine,e.speed=5*Math.random()-2.5,e.alpha=.7*Math.random()+.2,e.scale.x=.2*Math.random()+.8,e.scale.y=.2*Math.random()+.8)}}},i.exports=r}),define("starwars/effects/interferences/TechnoLines",["require","exports","module","PIXI","./Line"],function(t,e,i){var s=t("PIXI"),o=t("./Line"),r=function(){s.Container.call(this),this.dimensions={width:400,height:400},this.counter=0,this.lines=[]};r.prototype=Object.create(s.Container.prototype),r.prototype.reset=function(t,e){this.dimensions.width=t,this.dimensions.height=e,this.counter=0,this.lines=[];for(var i=0;3>i;i++){var s=new o(this.dimensions.height);s.life=100*Math.random(),s.position.x=Math.random()*this.dimensions.width-this.dimensions.width/2,s.onHide.add(this.replace.bind(this,s)),this.lines.push(s),this.addChild(s)}},r.prototype.replace=function(t){t.position.x=Math.random()*this.dimensions.width-this.dimensions.width/2,t.life=100*Math.random(),t.reset()},r.prototype.updateTransform=function(){s.Container.prototype.updateTransform.call(this),this.counter+=1;for(var t=0;t<this.lines.length;t++){var e=this.lines[t];e.life>=0?e.life--:e.disappear()}this.alpha=Math.abs(.3*Math.sin(Math.tan(this.counter)))+.65},i.exports=r}),define("starwars/effects/interferences/Chip",["require","exports","module","PIXI","./Chip"],function(t,e,i){var s=t("PIXI"),o=t("./Chip"),o=function(t,e){s.Container.call(this),this.counter=0,this.lifeMove=100*Math.random(),this.lifeScale=100*Math.random(),this.dimensions={width:t||200,height:e||200},this.posx=0,this.posy=0,this.widthTarget=100*Math.random()+50,this.heightTarget=100*Math.random()+50,this.tl=new s.Sprite.fromFrame("corner_top_left.png"),this.addChild(this.tl),this.tr=new s.Sprite.fromFrame("corner_top_right.png"),this.addChild(this.tr),this.bl=new s.Sprite.fromFrame("corner_bottom_left.png"),this.addChild(this.bl),this.br=new s.Sprite.fromFrame("corner_bottom_right.png"),this.addChild(this.br)};o.prototype=Object.create(s.Container.prototype),o.prototype.reset=function(t,e){this.dimensions={width:t,height:e}},o.prototype.animateMovement=function(){var t=.9*(Math.random()*this.dimensions.width-this.dimensions.width/2),e=.9*(Math.random()*this.dimensions.height-this.dimensions.height/2);TweenLite.to(this,.2,{posx:t,posy:e,onComplete:function(){this.isMoving=!1,this.lifeMove=150*Math.random()+30}.bind(this)})},o.prototype.animateScale=function(){var t=40*Math.random()+20,e=40*Math.random()+20;TweenLite.to(this,.2,{widthTarget:t,heightTarget:e,onComplete:function(){this.isScaling=!1,this.lifeScale=110*Math.random()}.bind(this)})},o.prototype.updateTransform=function(){s.Container.prototype.updateTransform.call(this),this.counter+=1,this.lifeScale>=0&&!this.isScaling?this.lifeScale--:this.isScaling||(this.isScaling=!0,this.animateScale()),this.lifeMove>=0&&!this.isMoving?this.lifeMove--:this.isMoving||(this.isMoving=!0,
this.animateMovement()),this.tl.position.x=-this.widthTarget/2+this.posx,this.tl.position.y=-this.heightTarget/2+this.posy,this.tr.position.x=this.widthTarget/2+this.posx,this.tr.position.y=-this.heightTarget/2+this.posy,this.bl.position.x=-this.widthTarget/2+this.posx,this.bl.position.y=this.heightTarget/2+this.posy,this.br.position.x=this.widthTarget/2+this.posx,this.br.position.y=this.heightTarget/2+this.posy,this.alpha=Math.abs(.4*Math.sin(Math.tan(this.counter)))+.1},i.exports=o}),define("starwars/effects/interferences/TargetCorners",["require","exports","module","PIXI","./Chip"],function(t,e,i){var s=t("PIXI"),o=t("./Chip"),r=function(t){s.Container.call(this),this.numberOfChips=t,this.chips=[]};r.prototype=Object.create(s.Container.prototype),r.prototype.reset=function(t,e){this.chips=[];for(var i=0;i<this.numberOfChips;i++){var s=new o;s.reset(t,e),this.addChild(s),this.chips.push(s)}},i.exports=r}),define("starwars/effects/interferences/GridLetters",["require","exports","module","PIXI","./Line"],function(t,e,i){var s=t("PIXI"),o=(t("./Line"),function(t,e){s.Container.call(this),this.letters=[],this.lettersRef="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")});o.prototype=Object.create(s.Container.prototype),o.prototype.reset=function(t,e){this.counter=0;for(var i=0,o=0,r=0;5>r;r++){for(var n=0;10>n;n++){var a=new s.extras.BitmapText(this.lettersRef[Math.floor(Math.random()*this.lettersRef.length)],{font:"12px Aurek-Besh Narrow"});a.position.x=i,a.position.y=o,a.isFadingOut=!1,a.counter=Math.floor(20*Math.random()),a.divide=Math.floor(5*Math.random()+3),a.alpha=.4*Math.random()+.2,this.addChild(a),this.letters.push(a),i+=12}i=0,o+=20}this.pivot.x=this.width/2,this.pivot.y=this.height/2},o.prototype.random=function(t,e){this.position.x=Math.random()*t-t/2,this.position.y=Math.random()*e-e/2},o.prototype.updateTransform=function(){s.Container.prototype.updateTransform.call(this),this.counter+=1;for(var t=0;t<this.letters.length;t++)l=this.letters[t],l.counter++,l.counter%l.divide===0&&(l.text=this.lettersRef[Math.floor(Math.random()*this.lettersRef.length)]),l.counter%l.divide!==0||l.isFadingOut?l.alpha>=.1?(l.isFadingOut=!0,l.alpha*=.99):l.isFadingOut=!1:(l.alpha=1,l.isFadingOut=!0)},i.exports=o}),define("starwars/effects/interferences/Diagram",["require","exports","module","PIXI"],function(t,e,i){var s=t("PIXI"),o=function(t){s.Container.call(this),this.bars=[],this.numberOfBars=t||5};o.prototype=Object.create(s.Container.prototype),o.prototype.random=function(t,e){this.position.x=-t/2+this.width/2+Math.random()*(t-this.width)},o.prototype.reset=function(t,e){this.bars=[];for(var i=0,o=0,r=0;r<this.numberOfBars;r++){var n=8*Math.random()+2,a=new s.Graphics;a.beginFill(16777215).drawRect(0,0,n,40).endFill();var h=new s.Sprite(a.generateTexture());h.counter=100*Math.random(),h.anchor.y=1,h.timeBeforeSleep=100*Math.random()+50,h.timeBeforeWake=null,h.amplitude=Math.random()+.5,i+=o+2,h.position.x=i,o=n,this.addChild(h),this.bars.push(h)}this.position.y=e/2-this.height/2+8},o.prototype.updateTransform=function(){s.Container.prototype.updateTransform.call(this);for(var t=0;t<this.bars.length;t++){var e=this.bars[t];if(e.timeBeforeSleep>0&&null===e.timeBeforeWake){e.timeBeforeSleep--;var i=.5*Math.random();e.counter+=i,e.scale.y=Math.abs(Math.cos(e.counter/4)*e.amplitude)}else e.timeBeforeSleep<=0&&null===e.timeBeforeWake?e.timeBeforeWake=50*Math.random():e.timeBeforeWake>=0?e.timeBeforeWake--:(e.timeBeforeWake=null,e.timeBeforeSleep=100*Math.random()+50);e.alpha=Math.abs(.3*Math.sin(Math.tan(e.counter)))+.2}},i.exports=o}),define("starwars/overlays/OverlayTitle",["require","exports","module","PIXI"],function(t,e,i){var s=t("PIXI"),o=function(){s.Container.call(this),this.title=null,window.FONTS_EXTENDED?(this.title=new s.Text("",{font:"45px "+window.MAIN_FONT,fill:"#fed95c",stroke:"#fddd54",strokeThickness:1}),this.title.anchor.x=.5,this.blurredTitle=new s.Text("",{font:"45px "+window.MAIN_FONT,fill:"#ffbc29"}),this.blurredTitle.anchor.x=.5,this.blurredTitle.alpha=.8,this.blurredTitle.position=this.title.position,this.addChild(this.title),this.addChild(this.blurredTitle),this.blurFilter=new s.filters.BlurFilter,this.blurFilter.passes=5,this.blurFilter.blur=40):(this.title=new s.extras.BitmapText("",{font:"46px Star Jedi"}),this.title.pivot.y=68,this.addChild(this.title))};o.prototype=Object.create(s.Container.prototype),o.prototype.onHide=function(){window.FONTS_EXTENDED&&(this.blurredTitle.filters=null)},Object.defineProperties(o.prototype,{text:{get:function(){return this.title.text},set:function(t){window.FONTS_EXTENDED?(this.title.text=t.toUpperCase(),this.blurredTitle.text=this.title.text,this.blurredTitle.filters=s.isWebGL?[this.blurFilter]:null):(this.title.text=t.toLowerCase(),this.title.position.x=-this.title.width/2);var e=420/this.title.width;this.scale.set(Math.min(e,1))}}}),i.exports=o}),define("starwars/overlays/Overlay",["require","exports","module","PIXI","fido/system/Ticker","../filters/GlitchCathodic","../effects/interferences/LogoRebel","../effects/interferences/TechnoLines","../effects/interferences/TargetCorners","../effects/interferences/GridLetters","../effects/interferences/Diagram","starwars/overlays/OverlayTitle","fido/app/Screen","fido/system/Device"],function(t,e,i){var s=t("PIXI"),o=t("fido/system/Ticker"),r=t("../filters/GlitchCathodic"),n=t("../effects/interferences/LogoRebel"),a=t("../effects/interferences/TechnoLines"),h=t("../effects/interferences/TargetCorners"),l=t("../effects/interferences/GridLetters"),c=t("../effects/interferences/Diagram"),u=t("starwars/overlays/OverlayTitle"),d=t("fido/app/Screen"),p=t("fido/system/Device"),f=null,m=null,g=null,v=null,y=null,_=function(t,e){d.call(this),this.app=t,this.counter=0,this.hasClose=!1,this.disableFilters=e||!1,this.screen=new s.Sprite.fromFrame("inner_panel_blue_medium.png"),this.screen.anchor.set(.5),this.screen.position.y=-10,this.addChild(this.screen),this.currentInterference=null,f||!s.isWebGL||p.instance.iOS||this.disableFilters||(f=new a,f.reset(this.screen.width,this.screen.height),m=new h(2),m.reset(this.screen.width,this.screen.height),g=new l,g.reset(this.screen.width,this.screen.height),v=new c(12),v.reset(this.screen.width,this.screen.height),y=new n(8),y.reset(this.screen.width,this.screen.height)),this.containerInterference=new s.Container,this.screen.addChild(this.containerInterference),this.interferences=[m,g,v,y],this.bg=new s.Sprite.fromFrame("panel_frame_medium.png"),this.bg.anchor.set(.5),this.addChild(this.bg),!s.isWebGL||p.instance.iOS||this.disableFilters||(this.glitchFilter=new r,this.screen.filters=[this.glitchFilter]),this.title=new u,this.title.position.y=.5*-this.bg.height-this.title.height+5,this.addChild(this.title);var i=[-207.5,-194,213.5,-188,242.5,-166,260.5,135,228.5,164,-232.5,164,-260.5,142,-239.5,-171],o=new s.Graphics;o.clear().beginFill(16777215).drawPolygon(i),this.screen.mask=o,this.bg.addChild(o)};_.prototype=Object.create(d.prototype),_.prototype.onShow=function(){o.instance.add(this.update,this),this.app.topMenu.hide(),s.isWebGL&&!p.instance.iOS&&(this.containerInterference.alpha=.5,this.containerInterference.addChild(f),this.currentInterference=this.interferences[Math.floor(Math.random()*this.interferences.length)],this.currentInterference.random&&this.currentInterference.random(this.screen.width,this.screen.height),this.containerInterference.addChild(this.currentInterference))},_.prototype.update=function(){!s.isWebGL||p.instance.iOS||this.disableFilters||(this.counter-=.04,this.glitchFilter.uniforms.time.value=this.counter)},_.prototype.onHide=function(){s.isWebGL&&!p.instance.iOS&&this.containerInterference.removeChild(this.currentInterference),this.app.topMenu.show()},_.prototype.onHidden=function(){o.instance.remove(this.update,this)},_.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=_}),define("com/rebels/app/overlay/screens/PauseScreen",["require","exports","module","starwars/overlays/Overlay","com/rebels/game/GameConfig","fido/sound/SoundBridge","starwars/buttons/GoldenButton","fido/sound/SoundBridge","tracker","tracker"],function(t,e,i){var s=t("starwars/overlays/Overlay"),o=t("com/rebels/game/GameConfig"),r=t("fido/sound/SoundBridge"),n=t("starwars/buttons/GoldenButton"),r=t("fido/sound/SoundBridge"),a=function(t){s.call(this),this.app=t,this.title.text=translations.STR_OVERLAY_PAUSE,this.playButton=new n("icon_play_large.png"),this.playButton.onPress.add(this.onPress,this),this.playButton.position.x=this.bg.width/4-20,this.playButton.position.y=-70,this.addChild(this.playButton.view),this.restartButton=new n("icon_replay_large.png"),this.restartButton.onPress.add(this.onPress,this),this.restartButton.position.x=-this.bg.width/4+20,this.restartButton.view.y=-70,this.addChild(this.restartButton.view),this.containerBottomButton=new PIXI.Container,this.bg.addChild(this.containerBottomButton),r.music.onMuteToggle.add(this.onMuteToggle,this),r.music.onMuteToggle.add(this.onMuteToggle,this),this.buildBottomButtons()};a.prototype=Object.create(s.prototype),a.prototype.onShow=function(){s.prototype.onShow.call(this)},a.prototype.onMuteToggle=function(){r.music.isMuted?this.muteButton.setIcon("icon_mute_off.png"):this.muteButton.setIcon("icon_mute.png")},a.prototype.onHidden=function(){s.prototype.onHidden.call(this)},a.prototype.buildBottomButtons=function(){this.backbutton=new n("icon_next.png"),this.backbutton.scale.x*=-1,this.backbutton.setSize("small"),this.backbutton.view.x=-165,this.backbutton.y=95,this.backbutton.onPress.add(this.onPress,this),this.addChild(this.backbutton),this.helpButton=new n("icon_help.png"),this.helpButton.setSize("small"),this.helpButton.position.x=-55,this.helpButton.y=95,this.helpButton.onPress.add(this.onPress,this),this.addChild(this.helpButton),this.achievmentButton=new n("icon_medal.png"),this.achievmentButton.setSize("small"),this.achievmentButton.view.x=55,this.achievmentButton.y=95,this.achievmentButton.onPress.add(this.onPress,this),this.addChild(this.achievmentButton.view),this.muteButton=new n("icon_mute.png"),this.muteButton.setSize("small"),this.muteButton.view.x=165,this.muteButton.y=95,this.muteButton.onPress.add(this.onPress,this),this.addChild(this.muteButton)},a.prototype.onPress=function(e){if(e===this.restartButton)this.app.screenManager.gotoScreenByID("prep"),this.app.overlayManager.hide(),t("tracker").trackAction("level_restart_"+o.levelIndex);else if(e===this.helpButton)this.app.overlayManager.show("tutorial"),t("tracker").trackAction("help_restart_"+o.levelIndex);else if(e===this.playButton)this.app.overlayManager.hide(),this.app.gameScreen.game.resume(),this.app.topMenu.setMode("game");else if(e===this.muteButton){var i=this.app.topMenu.toggleMute();i?this.muteButton.icon.texture=new PIXI.Texture.fromFrame("icon_mute_off.png"):this.muteButton.icon.texture=new PIXI.Texture.fromFrame("icon_mute.png")}else e===this.backbutton?(this.app.screenManager.gotoScreenByID("map"),this.app.overlayManager.hide()):e===this.achievmentButton&&this.app.overlayManager.gotoScreenByID("achievements")},a.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=a}),define("com/rebels/app/overlay/screens/GameoverScreen",["require","exports","module","PIXI","com/rebels/app/buttons/IconButton","fido/sound/SoundBridge","fido/utils/Utils","fido/loader/Cache","starwars/overlays/Overlay","starwars/buttons/GoldenButton","com/rebels/game/GameConfig","fido/sound/SoundBridge"],function(t,e,i){var s=t("PIXI"),o=t("com/rebels/app/buttons/IconButton"),r=(t("fido/sound/SoundBridge"),t("fido/utils/Utils"),t("fido/loader/Cache")),n=t("starwars/overlays/Overlay"),a=t("starwars/buttons/GoldenButton"),h=t("com/rebels/game/GameConfig"),l=function(t){n.call(this),this.app=t,this.title.text=translations.STR_OVERLAY_GAMEOVER,this.currentScore=2e4,this.text=new s.Text(translations.STR_OVERLAY_GAMEOVER_TEXT,{font:"18px "+window.MAIN_FONT,lineHeight:25,fill:"#ccffff",wordWrap:!0,wordWrapWidth:280}),this.text.anchor.set(.5),this.text.position.x=80,this.text.position.y=-80,this.bg.addChild(this.text),this.imgHeroe=new s.Sprite.fromFrame("kanan_corner_tips.png"),this.imgHeroe.anchor.x=0,this.imgHeroe.anchor.y=1,this.imgHeroe.position.x=-this.imgHeroe.width,this.imgHeroe.position.y=this.imgHeroe.height/2,this.screen.addChild(this.imgHeroe),this.restartButton=new a("icon_replay_large.png"),this.restartButton.onPress.add(this.onPress,this),this.restartButton.position.x=150,this.restartButton.position.y=60,this.addChild(this.restartButton.view),this.homeButton=new a("icon_home.png"),this.homeButton.setSize("small"),this.homeButton.onPress.add(this.onPress,this),this.homeButton.view.x=25,this.homeButton.view.y=95,this.addChild(this.homeButton.view),this.copyTick=0,this.textMap={trooper:[translations.STR_GAME_OVER_TROOPER_1,translations.STR_GAME_OVER_TROOPER_2,translations.STR_GAME_OVER_TROOPER_3],drone:[translations.STR_GAME_OVER_DROID_1,translations.STR_GAME_OVER_DROID_2,translations.STR_GAME_OVER_DROID_3],hole:[translations.STR_GAME_OVER_HOLE_1,translations.STR_GAME_OVER_HOLE_2,translations.STR_GAME_OVER_HOLE_3],gate:[translations.STR_GAME_OVER_GATE_1,translations.STR_GAME_OVER_GATE_2,translations.STR_GAME_OVER_GATE_2]},this.currentSound=""};l.prototype=Object.create(n.prototype),l.prototype.constructor=l,l.prototype.onHide=function(){t("fido/sound/SoundBridge").sfx.fadeTo("fail",0,1)},l.prototype.onHide=function(){n.prototype.onHide.call(this)},l.prototype.onShow=function(){n.prototype.onShow.call(this);var t=r.getJson("levels").worlds,e=t[h.worldIndex];e.levels[h.levelIndex].tip;this.copyTick++,this.text.text=this.textMap[h.deathType][this.copyTick%this.textMap[h.deathType].length].toUpperCase()||"---",this.count=0},l.prototype.createButton=function(){this.btnContainer=new s.Container,this.addChild(this.btnContainer),this.restartButton=o.small("icon_replay_large.png"),this.restartButton.view.y=160,this.restartButton.onPress.add(this.onPress,this),this.btnContainer.addChild(this.restartButton.view)},l.prototype.onPress=function(t){t===this.restartButton?(this.app.screenManager.gotoScreenByID("prep"),this.app.overlayManager.hide(),this.app.topMenu.setMode("game")):t===this.homeButton&&(this.app.screenManager.gotoScreenByID("title"),this.app.overlayManager.hide(),this.app.topMenu.setMode("title"))},l.prototype.update=function(t,e){n.prototype.update.call(this),this.count+=1,this.imgHeroe.alpha=Math.abs(.3*Math.sin(.5*Math.tan(this.count)))+.7},l.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=l}),define("fido/effects/ThreeStars",["require","exports","module","PIXI","fido/system/Ticker","fido/utils/Math2","fido/Flash","signals","fido/sound/SoundManager"],function(t,e,i){var s=t("PIXI"),o=(t("fido/system/Ticker"),t("fido/utils/Math2"),t("fido/Flash"),t("signals")),r=(t("fido/sound/SoundManager"),function(t,e){t=t||new s.Container,e=e||{},this.options={separateSlots:e.separateSlots||"true",textureSlot:e.textureSlot||"item_circle_1.png",textureStar1:e.textureStar1||"item_diamond_2.png",textureStar2:e.textureStar2||"item_diamond_2.png",textureStar3:e.textureStar3||"item_diamond_2.png"},s.Container.call(this),this.starsSlot=[],this.stars=[],this.starsContainer=new s.Container,this.starsContainer.position.set(0,50),this.addChild(this.starsContainer);for(var i=0,r=[i-130,i,i+130],n=0;3>n;n++){if("true"===this.options.separateSlots){var a=new s.Sprite.fromFrame(this.options.textureSlot);a.x=r[n],a.anchor.x=.5,a.anchor.y=.5,this.starsContainer.addChild(a),this.starsSlot.push(a)}var h=new s.Sprite;0===n?h.texture=new s.Texture.fromFrame(this.options.textureStar1):1===n?h.texture=new s.Texture.fromFrame(this.options.textureStar2):h.texture=new s.Texture.fromFrame(this.options.textureStar3),h.x=r[n],h.anchor.set(.5),this.starsContainer.addChild(h),this.stars.push(h)}this.container=t,this.gotThree=!1,this.onComplete=new o});r.prototype=Object.create(s.Container.prototype),r.prototype.constructor=r,r.prototype.show=function(t,e){e=void 0===e?!0:e;for(var i=0;i<this.stars.length;i++)this.stars[i].visible=!1;for(var t=t||3,s=1,i=0;i<this.stars.length;i++){var o=this.stars[i];o.scale.set(5),o.alpha=0,o.rotation=Math.random()-.5,o.visible=!0;var r=s+.2*(i+1);e?t>i&&(TweenLite.to(o.scale,.4,{x:1,y:1,ease:Bounce.easeOut,delay:r}),TweenLite.to(o,.8,{rotation:0,ease:Bounce.easeOut,delay:r}),TweenLite.to(o,.1,{alpha:1,ease:Sine.easeOut,delay:r}),TweenLite.delayedCall(s+.2*(i+1)+.15,this.pushDown.bind(this))):t>i&&(o.scale.set(1),o.rotation=0,o.alpha=1)}3===t?(this.gotThree=!0,TweenLite.delayedCall(1.95,this.perfect.bind(this))):TweenLite.delayedCall(1.95,this.onComplete.dispatch,[],this)},r.prototype.updateTransform=function(){this.visible&&(this.container.scale.x+=.4*(1-this.container.scale.x),this.container.rotation+=.4*(0-this.container.rotation),this.container.scale.y=this.container.scale.x,s.Container.prototype.updateTransform.call(this))},r.prototype.pushDown=function(){this.container.scale.x-=.1,this.container.rotation+=.01},r.prototype.perfect=function(){this.gotThree&&this.onComplete.dispatch()},i.exports=r}),define("com/rebels/app/ThreeStarsStarwars",["require","exports","module","fido/effects/ThreeStars","fido/sound/SoundBridge"],function(t,e,i){var s=t("fido/effects/ThreeStars"),o=t("fido/sound/SoundBridge"),r=function(t){s.call(this,t,{separateSlots:"false",textureSlot:"star_off.png",textureStar1:"star_01_on.png",textureStar2:"star_02_on.png",textureStar3:"star_03_on.png"}),this.stars[1].position.y-=36;var e=new PIXI.Sprite.fromFrame("stars_off.png");e.anchor.set(.5),e.position.y=32,this.addChild(e),this.addChild(this.starsContainer)};r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.prototype.pushDown=function(){s.prototype.pushDown.call(this),o.sfx.play("stars")},i.exports=r}),define("starwars/buttons/TextButton",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton"],function(t,e,i){var s=t("PIXI"),o=t("fido/ui/buttons/AbstractButton"),r=function(t){o.call(this),this.background=new s.Sprite.fromFrame("ui_bottom_text_button_off.png"),this.background.anchor.set(.5),this.addChild(this.background),this.backgroundOn=new s.Sprite.fromFrame("ui_bottom_text_button_on.png"),this.backgroundOn.anchor.set(.5),this.backgroundOn.alpha=0,this.addChild(this.backgroundOn),this.text=new s.Text(t.toUpperCase(),{font:"30px "+window.MAIN_FONT,align:"center",fill:"#aae5ff"}),this.text.anchor.x=.5,this.text.anchor.y=.5,this.text.scale.set(Math.min(1,.8*this.background.width/this.text.width)),this.addChild(this.text)};r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.down=function(){var t=.2;TweenLite.to(this.backgroundOn,t,{alpha:1,ease:Power2.easeOut})},r.prototype.up=function(){var t=.2;TweenLite.to(this.backgroundOn,t,{alpha:0,ease:Power2.easeOut})},r.prototype.hover=function(){var t=.2;TweenLite.to(this.backgroundOn,t,{alpha:.5,ease:Power2.easeOut})},r.prototype.out=function(){var t=.2;TweenLite.to(this.backgroundOn,t,{alpha:0,ease:Power2.easeOut})},i.exports=r}),define("com/rebels/app/overlay/screens/HighScoreScreen",["require","exports","module","PIXI","starwars/overlays/Overlay","fido/loader/Cache","com/rebels/game/LevelManager","com/rebels/game/GameConfig","com/rebels/app/system/GameSaveManager","com/rebels/app/ThreeStarsStarwars","starwars/buttons/GoldenButton","fido/utils/Utils","libs/GBAPI","starwars/buttons/TextButton"],function(t,e,i){var s=t("PIXI"),o=t("starwars/overlays/Overlay"),r=(t("fido/loader/Cache"),t("com/rebels/game/LevelManager"),t("com/rebels/game/GameConfig"),t("com/rebels/app/system/GameSaveManager"),t("com/rebels/app/ThreeStarsStarwars")),n=(t("starwars/buttons/GoldenButton"),t("fido/utils/Utils")),a=(t("libs/GBAPI"),t("starwars/buttons/TextButton")),h=function(t){o.call(this,t),this.title.text=translations.STR_OVERLAY_HIGHSCORE;var e="#ccffff";this.yourScore=new s.Text(translations.STR_OVERLAY_HIGHSCORE_SCORE,{font:"16px "+window.MAIN_FONT,fill:e}),this.yourScore.anchor.x=0,this.yourScore.position.x=20,this.yourScore.y=.5*-this.bg.height+35,this.score=new s.Text("34, 536",{font:"34px "+window.MAIN_FONT,fill:e}),this.score.anchor.x=0,this.score.position.x=this.yourScore.position.x+10,this.score.position.y=this.yourScore.position.y+20,this.yourTime=new s.Text(translations.STR_OVERLAY_HIGHSCORE_TIME,{font:"16px "+window.MAIN_FONT,fill:e}),this.yourTime.anchor.x=1,this.yourTime.position.x=-20,this.yourTime.position.y=.5*-this.bg.height+35,this.time=new s.Text("00:00:00",{font:"34px "+window.MAIN_FONT,fill:e}),this.time.anchor.x=1,this.time.position.x=this.yourTime.position.x-10,this.time.position.y=this.yourTime.position.y+20,this.currentScore=2e5,this.resultsContainer=new s.Container,this.buildResults(),this.highScoreButton=new a(translations.STR_OVERLAY_HIGHSCORE_INFO),this.highScoreButton.position.y=115,this.highScoreButton.onPress.add(this.onPress,this),this.coins=new s.Sprite.fromFrame("rebels_phoenix_coin.png"),this.coins.anchor.x=0,this.coins.anchor.y=.5,this.coins.scale.set(.7),this.coins.position.y=45,this.textCoin=new s.Text("230",{font:"40px "+window.MAIN_FONT,align:"left",fill:e}),this.textCoin.anchor.x=0,this.textCoin.anchor.y=.5,this.textCoin.position.x=this.coins.width+22,this.textInfoBonus=new s.Text("x2",{font:"15px "+window.MAIN_FONT,align:"left",fill:e}),this.textInfoBonus.anchor.x=0,this.textInfoBonus.anchor.y=.5,this.textInfoBonus.position.x=this.coins.width+20,this.textInfoBonus.position.y=25,this.textInfoBonus.visible=!1,this.coins.addChild(this.textCoin)};h.prototype=Object.create(o.prototype),h.prototype.constructor=h,h.prototype.onUp=function(){},h.prototype.onDown=function(){},h.prototype.onShow=function(t){o.prototype.onShow.call(this),this.textInfoBonus.visible=!1,this.addChild(this.yourScore),this.addChild(this.score),this.addChild(this.yourTime),this.addChild(this.time),this.addChild(this.highScoreButton),this.addChild(this.textInfoBonus),this.bg.addChild(this.coins),this.app.topMenu.setMode("nothing");var e=this.app.gameScreen.gameDetail,i=e.starRating;this.stars.show(i,t),this.score.text=e.score,this.textCoin.text=e.coins+" x "+e.coinMultipler,this.time.text=n.formatTime(e.time),this.coins.position.x=-(this.textCoin.width/2)},h.prototype.buildResults=function(){this.stars=new r(this),this.stars.y=-80,this.addChild(this.stars),this.addChild(this.resultsContainer),this.resultsContainer.x=-180,this.resultsContainer.y=-90},h.prototype.onPress=function(t){this.app.overlayManager.gotoScreenByID("submit")},h.prototype.onScoreSaved=function(t,e){this.app.overlayManager.leaderboardScreen.backToCompletionScreen=!0,this.app.overlayManager.gotoScreenByID("scores")},h.prototype.onHidden=function(){o.prototype.onHidden.call(this)},h.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=h}),define("com/rebels/app/overlay/screens/CompletionScreen",["require","exports","module","PIXI","com/rebels/app/overlay/screens/HighScoreScreen","starwars/buttons/GoldenButton","com/rebels/game/LevelManager","com/rebels/game/GameConfig","com/rebels/app/system/GameSaveManager","fido/effects/Sparkles","com/rebels/app/shop/ShopSystem","fido/sound/SoundBridge","fido/utils/FrameWait","tracker"],function(t,e,i){var s=t("PIXI"),o=t("com/rebels/app/overlay/screens/HighScoreScreen"),r=t("starwars/buttons/GoldenButton"),n=t("com/rebels/game/LevelManager"),a=t("com/rebels/game/GameConfig"),h=(t("com/rebels/app/system/GameSaveManager"),t("fido/effects/Sparkles")),l=t("com/rebels/app/shop/ShopSystem"),c=(t("fido/sound/SoundBridge"),t("fido/utils/FrameWait")),u=function(t){o.call(this,t),this.title.text=translations.STR_OVERLAY_COMPLETION,this.animateStars=!0,this.highScoreButton.visible=!1,this.btnContainer=new s.Container,this.addChild(this.btnContainer),this.buildBottomButtons(),this.sparkles=new h([],new s.Circle(0,0,50)),this.sparkles.position.x=this.shopButton.position.x,this.sparkles.position.y=this.shopButton.position.y+50+this.shopButton.height/2,this.addChild(this.sparkles)};u.prototype=Object.create(o.prototype),u.prototype.constructor=u,u.prototype.onShow=function(){o.prototype.onShow.call(this,this.animateStars),l.instance.canBuyAnyItem()?(this.sparkles.visible=!0,c.wait(function(){this.app.alertPanelManager.show("firstTimeShopItemAvailable")}.bind(this),80)):this.sparkles.visible=!1},u.prototype.buildBottomButtons=function(){this.btnContainer.y=105,this.achievmentButton=new r("icon_medal.png"),this.achievmentButton.setSize("small"),this.achievmentButton.view.x=-190,this.achievmentButton.onPress.add(this.onPress,this),this.btnContainer.addChild(this.achievmentButton.view),this.shopButton=new r("icon_shop.png"),this.shopButton.setSize("small"),this.shopButton.view.x=-95,this.shopButton.onPress.add(this.onPress,this),this.btnContainer.addChild(this.shopButton.view),this.restartButton=new r("icon_replay.png"),this.restartButton.setSize("small"),this.restartButton.view.x=95,this.restartButton.onPress.add(this.onPress,this),this.btnContainer.addChild(this.restartButton.view),this.nextButton=new r("icon_next.png"),this.nextButton.setSize("small"),this.nextButton.view.x=190,this.nextButton.onPress.add(this.onPress,this),this.btnContainer.addChild(this.nextButton.view)},u.prototype.onPress=function(e){e===this.restartButton?(this.app.gameScreen.game.reset(),this.app.overlayManager.hide()):e===this.shopButton?(t("tracker").trackAction("shop_level_entry"),this.app.overlayManager.shopScreen.backToCompletionScreen=!0,this.app.overlayManager.gotoScreenByID("shop")):e===this.achievmentButton?this.app.overlayManager.gotoScreenByID("achievements"):e===this.nextButton&&("DM_world4_level10"!==a.levelId?(a.levelIndex=n.currentLevelIndex,a.levelId=n.currentLevel.id,a.worldIndex=n.currentWorldIndex,this.app.overlayManager.hide(),this.app.screenManager.gotoScreenByID("prep")):(this.app.overlayManager.hide(),this.app.titleScreen.gameIsFinished=!0,this.app.screenManager.gotoScreenByID("title")))},u.prototype.onHidden=function(t,e){o.prototype.onHidden.call(this),this.animateStars=!0},u.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=u}),define("fido/ui/buttons/ToggleButton",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","fido/sound/SoundManager","signals"],function(t,e,i){var s=t("PIXI"),o=t("fido/ui/buttons/AbstractButton"),r=t("fido/sound/SoundManager"),n=t("signals"),a=function(t){o.call(this),this.state=0,this.onStateChanges=new n,this.textureOn=new s.Texture.fromFrame("switch_on.png"),this.textureOff=new s.Texture.fromFrame("switch_off.png"),this.icon=new s.Sprite,this.icon.interactive=!0,this.icon.mousedown=this.icon.tap=this.setIcon.bind(this,""),this.icon.anchor.set(.5),this.icon.position.x=50;var e={fill:"#ccffff",font:"20px naked_power_rgregular"},i=new s.Text(translations.STR_OVERLAY_SHOP_OFF,e);i.interactive=!0,i.position.x=-20,i.mousedown=i.tap=this.setIcon.bind(this,!1),i.anchor.set(.5),this.addChild(i);var r=new s.Text(translations.STR_OVERLAY_SHOP_ON,e);r.interactive=!0,r.mousedown=r.tap=this.setIcon.bind(this,!0),r.anchor.set(.5),r.position.x=110,this.addChild(r),this.addChild(this.icon)};a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.prototype.setIcon=function(t){""===t&&(t=!this.state),t?(this.icon.texture=this.textureOn,this.state=1):(this.icon.texture=this.textureOff,this.state=0),this.onStateChanges.dispatch(t)},a.prototype.down=function(){o.prototype.down.call(this),r.sfx.play("selectbeep")},i.exports=a}),define("fido/physics/SimpleBouncer",["require","exports","module"],function(t,e,i){var s=function(){this.x=-50,this.vx=0,this.floor=0,this.bounce=1,this.gravity=1,this.max=30};s.prototype.update=function(){return this.vx+=this.gravity,this.vx<-this.max&&(this.vx=-this.max),this.vx>this.max&&(this.vx=this.max),this.x+=this.vx,this.x>this.floor&&this.vx>0?(this.x=this.floor,this.vx*=-this.bounce,!0):!1},s.prototype.reset=function(){this.x=0,this.vx=-10,this.floor=0},i.exports=s}),define("com/rebels/app/shop/Shop",["require","exports","module","PIXI","starwars/buttons/GoldenButton","com/rebels/app/shop/Item","fido/ui/buttons/ToggleButton","fido/physics/SimpleBouncer","fido/loader/Cache","tracker","tracker"],function(t,e,i){var s=t("PIXI"),o=t("starwars/buttons/GoldenButton"),r=(t("com/rebels/app/shop/Item"),t("fido/ui/buttons/ToggleButton")),n=t("fido/physics/SimpleBouncer"),a=(t("fido/loader/Cache"),function(t){this.app=t,s.Container.call(this),this.closed=!0,this.slotPanel=new s.Container,this.viewPanel=new s.Container,this.viewPanel.y=60,this.viewPanel.x=0,this.gridContainer=new s.Container,this.system=this.app.shopSystem,this.bouncer=new n,this.bouncer.max=5,this.currentItem=null,this.system.onChange.add(this.onNeedsUpdate,this),this.leftPanelWidth=466,this.leftPanelHeight=546,this.slotBg=new s.Container,this.slotPanel.addChild(this.slotBg),this.addChild(this.viewPanel),this.addChild(this.slotPanel),this.coin=new s.Sprite.fromFrame("rebel_coin_6.png"),this.coin.x=415,this.coin.y=this.leftPanelHeight-135,this.coin.anchor.set(.5),this.coin.scale.set(.7),this.bouncer.x=this.coin.y,this.bouncer.floor=this.coin.y,this.slotPanel.addChild(this.coin);var e={font:"18px "+window.MAIN_FONT,fill:"#ccffff",align:"left"};return this.wallet=new s.Text("",e),this.wallet.anchor.y=.5,this.wallet.anchor.x=0,this.wallet.y=this.leftPanelHeight-135,this.wallet.x=440,this.slotPanel.addChild(this.wallet),this.createItems(),this.createViewPanel(),this});a.prototype=Object.create(s.Container.prototype),a.prototype.createItems=function(){var t=new s.Container;t.position.x=118,t.position.y=25,this.gridContainer.addChild(t);var e=new s.Container;e.position.y=20,e.position.x=30,this.gridContainer.addChild(e);for(var i=["shop_icon_ezra.png","shop_icon_sabine.png","shop_icon_zeb.png"],o=[window.translations.STR_SHOP_FORCE_LIST,window.translations.STR_SHOP_BOMB_LIST,window.translations.STR_SHOP_JUMP_LIST],r={font:"18px "+window.MAIN_FONT,fill:"#ccffff",align:"left"},n=0;n<i.length;n++){var a=new s.Text(o[n],r);a.position.y=90*n,t.addChild(a);var h=new s.Sprite.fromFrame(i[n]);h.anchor.set(.5),h.position.y=90*n+h.height/2,h.position.x=h.width/2,e.addChild(h)}this.slotPanel.addChild(this.gridContainer),this.gridContainer.x=60,this.gridContainer.y=90;var l=new s.Container;l.position.x=140,l.position.y=64,this.gridContainer.addChild(l);for(var c=0;c<this.system.getNumGroups();c++)for(var u=this.system.getGroupAt(c),n=0;n<u.getNumItems();n++){var d=u.getItemAt(n);"helmet"!==d.type?(d.view.x=50*n,d.view.y=90*c):(d.view.x=240,d.view.y=90*c-270),d.view.onPress.add(this.onItemPressed,this),l.addChild(d.view)}this.updateFromSave()},a.prototype.updateFromSave=function(){this.system.updateFromSave(this.drawItems.bind(this))},a.prototype.drawItems=function(){},a.prototype.createViewPanel=function(){var t=new s.Graphics;t.beginFill(0).drawRect(540,50,500,400),this.addChild(t),this.viewBkg=new s.Sprite.fromFrame("inner_panel_blue_shop_B.png"),this.viewBkg.position.x=300,this.viewBkg.position.y=200,this.viewBkg.anchor.set(.5),this.viewPanel.mask=t,this.viewPanel.alpha=1;var e=new s.Sprite.fromFrame("panel_frame_shop_B.png");e.position.x=30,e.position.y=-10,e.anchor.set(.5),this.viewBkg.addChild(e),this.viewPanel.addChild(this.viewBkg),this.buyButton=new o("inner_disc_blue_small.png"),this.buyButton.setSize("small"),this.buyButton.x=1.2*this.viewBkg.width,this.buyButton.y=280,this.coinPrice=new s.Sprite.fromFrame("rebel_coin_6.png"),this.coinPrice.x=235,this.coinPrice.y=300,this.coinPrice.anchor.set(.5),this.coinPrice.scale.set(.7),this.viewPanel.addChild(this.coinPrice);var i={font:"24px "+window.MAIN_FONT,fill:"#ccffff",align:"left"};this.price=new s.Text("",i),this.price.anchor.y=.5,this.price.anchor.x=0,this.price.position.y=this.coinPrice.position.y,this.price.position.x=this.coinPrice.position.x+30,this.viewPanel.addChild(this.price),this.disableBuyButton(),this.previewImage=new s.Sprite,this.previewImage.x=this.viewBkg.width-8,this.previewImage.y=this.viewBkg.height/2+15;
var i={font:"18px "+window.MAIN_FONT,fill:"#ccffff",align:"left"},n={font:"25px "+window.MAIN_FONT,fill:"#ccffff",align:"center"};this.title=new s.Text("Title yeah",i),this.title.x=320,this.title.anchor.x=.5,this.title.y=50,this.description=new s.Text("Description yeah",i),this.description.x=320,this.description.anchor.x=.5,this.description.y=75,this.viewPanel.addChild(this.title),this.viewPanel.addChild(this.description),this.viewPanel.addChild(this.previewImage),this.viewPanel.addChild(this.buyButton.view),this.buyButton.onPress.add(this.onBuyButtonPressed,this),this.purchased=new s.Text(translations.STR_SHOP_OWNED,n),this.purchased.x=275,this.purchased.y=270,this.viewPanel.addChild(this.purchased),this.toggleButton=new r,this.toggleButton.position.x=280,this.toggleButton.onStateChanges.add(this.changeItemState,this),this.toggleButton.position.y=300,this.toggleButton.visible=!1,this.viewPanel.addChild(this.toggleButton)},a.prototype.hideViewPanel=function(){TweenLite.to(this.viewPanel,.4,{x:0})},a.prototype.onItemPressed=function(t){for(var e=!0,i=0;i<t.item.group._items.length;i++){var s=t.item.group._items[i];if(!s.purchased){this.currentItem=s,e=!1;break}}e&&(this.currentItem=t.item),this.closed?this.updateViewPanel():TweenLite.to(this.viewPanel,.2,{x:0,ease:Sine.easeOut,onComplete:function(){this.updateViewPanel()},onCompleteScope:this}),TweenLite.to(this.viewPanel,.2,{x:350,delay:this.closed?0:.2,ease:Sine.easeIn,onComplete:function(){this.buyButton.interactive=!0,this.closed=!1},onCompleteScope:this})},a.prototype.changeItemState=function(t){var e=this.currentItem;this.system.toggleItemState(e,t)},a.prototype.onShow=function(){this.closed=!0},a.prototype.updateViewPanel=function(){this.buyButton.view.visible=!0,this.previewImage.texture=s.Texture.fromFrame(this.currentItem.imageUrl),this.previewImage.anchor.x=.5,this.previewImage.anchor.y=.5,this.title.text=window.translations[this.currentItem.name],this.description.text=this.currentItem.description;var t=240/this.description.width;t=Math.min(1,t),this.description.scale.set(t),this.system.canBuyItem(this.currentItem)?this.enableBuyButton():this.disableBuyButton(),this.price.text=this.currentItem.price,this.buyButton.view.visible=!0,this.purchased.visible=!1,this.price.visible=!0,this.coinPrice.visible=!0,this.toggleButton.visible=!1,this.currentItem.purchased&&(this.buyButton.view.visible=!1,this.price.visible=!1,this.coinPrice.visible=!1,"helmet"!==this.currentItem.type?this.purchased.visible=!0:this.toggleButton.visible=!0,"helmet"===this.currentItem.type&&this.currentItem.active?this.toggleButton.setIcon(!0):this.toggleButton.setIcon(!1))},a.prototype.disableBuyButton=function(){this.buyButton.hitArea=new s.Rectangle(0,0,1,1),this.buyButton.setIcon("icon_locked.png"),this.buyButton.backgroundColor="blue"},a.prototype.enableBuyButton=function(){this.buyButton.hitArea=new s.Rectangle(-this.buyButton.width/2,-this.buyButton.height/2,this.buyButton.width,this.buyButton.height),this.buyButton.setIcon("icon_tick.png"),this.buyButton.backgroundColor="green"},a.prototype.onBuyButtonPressed=function(e){var i,s=this.currentItem;"STR_SHOP_FORCE_NAME"===s.name&&(i="EZRA"),"STR_SHOP_JUMP_NAME"===s.name&&(i="ZEB"),"STR_SHOP_BOMB_NAME"===s.name&&(i="SABINE"),"helmet"===s.type?t("tracker").trackAction("shop_item_select",s.id):t("tracker").trackAction("upgrade_"+i+"_"+s.id),this.system.buyItem(s)?(this.app.flash(),this.disableBuyButton(),this.buyButton.interactive=!1,this.updateViewPanel()):(this.bouncer.bounce=.9,this.bouncer.x-=15)},a.prototype.updateTransform=function(){this.bouncer.update(),this.coin.y=this.bouncer.x,s.Container.prototype.updateTransform.call(this)},a.prototype.onNeedsUpdate=function(){this.updateWallet()},a.prototype.updateWallet=function(){this.wallet.text=this.system.getMoney()},i.exports=a}),define("com/rebels/app/overlay/screens/ShopScreen",["require","exports","module","PIXI","starwars/buttons/GoldenButton","com/rebels/app/shop/Shop","fido/loader/Cache","starwars/overlays/Overlay","fido/utils/FrameWait"],function(t,e,i){var s=t("PIXI"),o=(t("starwars/buttons/GoldenButton"),t("com/rebels/app/shop/Shop")),r=(t("fido/loader/Cache"),t("starwars/overlays/Overlay")),n=t("fido/utils/FrameWait"),a=function(t){r.call(this,t),this.title.text=translations.STR_OVERLAY_SHOP,this.bg.texture=new s.Texture.fromFrame("panel_frame_shop_A.png"),this.screen.texture=new s.Texture.fromFrame("inner_panel_blue_shop_A.png"),this.shop=new o(t),this.shop.backToCompletionScreen=!1,this.addChild(this.shop),this.addChild(this.bg),this.shop.position.set(-300,-271),this.hasClose=!0};a.prototype=Object.create(r.prototype),a.prototype.onShow=function(){r.prototype.onShow.call(this),s.isWebGL&&(this.containerInterference.alpha=0),this.app.overlayManager.closeButton.position.x=675,this.shop.onNeedsUpdate(),this.shop.onShow(),n.wait(function(){this.app.alertPanelManager.show("firstTimeShop")}.bind(this),20)},a.prototype.close=function(){this.backToNormalScreen?this.app.overlayManager.hide():this.app.overlayManager.goBack(),this.backToNormalScreen=!1},a.prototype.onShown=function(){},a.prototype.onHidden=function(){r.prototype.onHidden.call(this),this.shop.backToCompletionScreen=!1,this.backToNormalScreen=!1,this.app.overlayManager.closeButton.position.x=805,this.shop.hideViewPanel()},a.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2-130,this.y=e/2},i.exports=a}),define("fido/ui/Dots",["require","exports","module","../physics/Spring","fido/system/Ticker","./PixiTrackpad","signals"],function(t,e,i){var s=(t("../physics/Spring"),t("fido/system/Ticker"),t("./PixiTrackpad"),t("signals"));Dots=function(t){PIXI.Container.call(this),this.deselectedAlpha=.5,this.dots=[],this.currentDot=null,this.build(t),this.onSelect=new s},Dots.prototype=Object.create(PIXI.Container.prototype),Dots.prototype.build=function(t){this.deselectedAlpha=t.alpha||.5;for(var e=0;e<this.dots.length;e++)this.removeChild(this.dots[e]);this.dots=[];for(var i=(t.size-1)*t.padding,e=0;e<t.size;e++){var s=new PIXI.Sprite(t.texture);s.id=e,s.alpha=this.deselectedAlpha,s.anchor.set(.5),this.addChild(s),s.x=e*t.padding-i/2,t.interactive&&(s.interactive=!0,s.buttonMode=!0,s.click=this.onDotSelected.bind(this)),this.dots.push(s)}this.select(0)},Dots.prototype.onDotSelected=function(t){this.onSelect.dispatch(t.target.id)},Dots.prototype.select=function(t){if(this.currentDot){if(this.currentDot.id===t)return;TweenLite.to(this.currentDot,.3,{alpha:this.deselectedAlpha,ease:Sine.easeOut})}this.currentDot=this.dots[t],TweenLite.to(this.currentDot,.3,{alpha:1,ease:Sine.easeOut})},i.exports=Dots}),define("fido/ui/Carousel",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","fido/system/Device","fido/ui/PixiTrackpad","fido/ui/Dots","signals","fido/system/Ticker","fido/utils/Utils"],function(t,e,i){var s=t("PIXI"),o=(t("fido/ui/buttons/AbstractButton"),t("fido/system/Device"),t("fido/ui/PixiTrackpad"),t("fido/ui/Dots"),t("signals"),t("fido/system/Ticker"),t("fido/utils/Utils"),function(t,e){s.Container.call(this),this.itemWidth=e.itemWidth,this.offset=e.offset||0,this.padding=e.padding,this.useMask=e.useMask,this.bounds=e.bounds,this.edgePadding=30,this.hitArea=this.bounds,this.trackpad=new PixiTrackpad({target:this}),this.trackpad.snapTo=!0,this.trackpad.size=this.itemWidth+this.padding,this.trackpad.maxSlots=t.length-1,this.trackpad.spring.damp=.6,this.trackpad.capMovement=!0,e.fitBounds?(this.trackpad.scrollMin=-t.length*this.trackpad.size+this.bounds.width/2+this.itemWidth/2-this.edgePadding,this.trackpad.scrollMax=-this.bounds.width/2+this.itemWidth/2+this.edgePadding):(this.trackpad.scrollMin=-t.length*this.trackpad.size,this.trackpad.scrollMax=0),this.trackpad.cap(),this.lastIndex=0,this.items=t,this.itemContainer=new s.Container,this.addChild(this.itemContainer);for(var i=0;i<t.length;i++){var o=t[i];this.itemContainer.addChild(o)}if(this.useMask){var r=(new s.Graphics).beginFill(16711680).drawRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);this.addChildAt(r,0),this.itemContainer.mask=r}});o.prototype=Object.create(s.Container.prototype),Object.defineProperty(o.prototype,"scrollPosition",{get:function(){return this._scrollPosition},set:function(t){this._scrollPosition=t;for(var e=(this.itemWidth*this.items.length,this.itemWidth+this.padding),i=0;i<this.items.length;i++){var s=this.items[i];s.x=e*i-this._scrollPosition,s.x+=this.bounds.width/2-this.itemWidth/2+this.bounds.x,s.x+=this.offset}}}),o.prototype.updateTransform=function(){if(this.visible){this.trackpad.update(),this.scrollPosition=-this.trackpad.value;var t=0|-(this.trackpad.spring.tx/this.trackpad.size);this.dots&&this.lastIndex!=t&&(this.dots.select(t),this.lastIndex=t),this.trackpad.didMove&&(this.userActive=!0),s.Container.prototype.updateTransform.call(this)}},o.prototype.setDots=function(t){this.dots=t,this.dots.onSelect.add(this.onDotSelected,this)},o.prototype.setButtons=function(t,e){this.leftButton=t,this.rightButton=e,this.leftButton.onPress.add(this.onButtonPressed,this),this.rightButton.onPress.add(this.onButtonPressed,this)},o.prototype.onButtonPressed=function(t){t===this.leftButton?this.trackpad.previousSlot():t===this.rightButton&&this.trackpad.nextSlot()},o.prototype.onDotSelected=function(t){this.userActive=!0,this.trackpad.setSlot(t)},i.exports=o}),define("starwars/ui/Dots",["require","exports","module","fido/ui/Dots"],function(t,e,i){var s=t("fido/ui/Dots");Dots=function(t){this.textureUnselected=new PIXI.Texture.fromFrame("tutorial_bullet_off.png"),this.textureSelected=new PIXI.Texture.fromFrame("tutorial_bullet_on.png"),t.texture=this.textureUnselected,t.alpha=1,s.call(this,t)},Dots.prototype=Object.create(s.prototype),Dots.prototype.select=function(t){if(this.currentDot){if(this.currentDot.id===t)return;this.currentDot.texture=this.textureUnselected}this.currentDot=this.dots[t],this.currentDot.alpha=1,this.currentDot.texture=this.textureSelected},i.exports=Dots}),define("starwars/overlays/TutorialOverlay",["require","exports","module","PIXI","starwars/overlays/Overlay","fido/sound/SoundManager","starwars/buttons/GoldenButton","fido/system/Ticker","fido/ui/Carousel","starwars/ui/Dots","fido/loader/Cache"],function(t,e,i){var s=t("PIXI"),o=t("starwars/overlays/Overlay"),r=(t("fido/sound/SoundManager"),t("starwars/buttons/GoldenButton")),n=t("fido/system/Ticker"),a=t("fido/ui/Carousel"),h=t("starwars/ui/Dots"),l=t("fido/loader/Cache"),c=function(t){o.call(this,t),this.title.text=translations.STR_OVERLAY_TUTORIAL,this.count=0,this.slides=l.getJson("howToPlay").slides,window.flipLanguage&&this.slides.reverse(),this.panels=[];var e=new s.Graphics;e.beginFill(0).drawRect(-250,-173,500,240),this.screen.addChild(e);for(var i=0;i<this.slides.length;i++){var n=this.slides[i],c=new s.Sprite.fromImage(ASSET_URL+n.img);c.anchor.set(0,.5),c.y=110;var u={fill:"#ccffff",font:"18px "+window.MAIN_FONT,align:"center",wordWrap:!0,lineHeight:24,wordWrapWidth:433.5},d="";d=Device.instance.desktop&&translations[n.text+"_DESKTOP"]?translations[n.text+"_DESKTOP"]:!Device.instance.desktop&&translations[n.text+"_MOBILE"]?translations[n.text+"_MOBILE"]:translations[n.text];var p=new s.Text(d,u);p.height>83&&p.scale.set(83/p.height),p.anchor.set(.5),p.x=255,p.y=190,c.addChild(p),c.helpText=p,this.panels.push(c)}var f={itemWidth:510,padding:0,useMask:!0,bounds:new s.Rectangle(-255,0,510,352)};this.carousel=new a(this.panels,f),this.carousel.y=-180,window.flipLanguage&&this.carousel.trackpad.setSlot(this.slides.length-1);var m=new s.Sprite.fromFrame("ui_instructions_text_panel.png");m.anchor.x=m.anchor.y=.5,m.position.y=120,this.screen.addChild(m),this.screen.addChild(this.carousel);var g={size:this.panels.length,step:10,padding:17,interactive:!0,alpha:1};this.dots=new h(g),this.addChild(this.dots),this.dots.x=0,this.dots.y=34,this.dots.scale.set(1.4),this.leftArrow=new r("icon_prev.png"),this.leftArrow.setSize("small"),this.addChild(this.leftArrow.view),this.rightArrow=new r("icon_next.png"),this.rightArrow.setSize("small"),this.addChild(this.rightArrow.view),this.leftArrow.x=-260,this.leftArrow.y=112,this.rightArrow.x=-this.leftArrow.x,this.rightArrow.y=this.leftArrow.y,this.carousel.setDots(this.dots),this.carousel.setButtons(this.leftArrow,this.rightArrow),this.imgHeroe=new s.Sprite,this.imgHeroe.position.y=-this.imgHeroe.height+20,this.imgHeroe.position.x=-this.bg.width/2+20,this.screen.addChild(this.imgHeroe),this.hasClose=!0};c.prototype=Object.create(o.prototype),c.prototype.update=function(){o.prototype.update.call(this),this.count+=1,this.imgHeroe.alpha=Math.abs(.3*Math.sin(.5*Math.tan(this.count)))+.7},c.prototype.onNextPressed=function(){this.trackpad.nextSlot(),this.currentPage++,this.pageTwoTimeout=Math.round((new Date).getTime()/1e3),n.instance.add(this.update,this)},c.prototype.onPreviousPressed=function(){this.trackpad.previousSlot(),this.currentPage--,n.instance.remove(this.update,this)},c.prototype.onShow=function(){o.prototype.onShow.call(this);this.count=0,this.containerInterference.alpha=.5},c.prototype.onPress=function(t){},c.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=c}),define("fido/app/transitions/NoTransition",["require","exports","module"],function(t,e,i){var s=function(){};s.constructor=s,s.prototype.begin=function(t,e,i){e.onHide&&e.onHide(),e.onHidden&&e.onHidden(),t.container.addChildAt(i,0),t.container.removeChild(e),i.onShow&&i.onShow(),i.onShown&&i.onShown(),t.onTransitionComplete()},s.prototype.resize=function(t,e){this.width=t,this.height=e},i.exports=s}),define("starwars/overlays/menu/MenuButton",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","fido/app/transitions/NoTransition","./MenuButton"],function(t,e,i){var s=t("PIXI"),o=t("fido/ui/buttons/AbstractButton"),r=(t("fido/app/transitions/NoTransition"),t("./MenuButton")),r=function(t,e){o.call(this),this.sprite=new s.Sprite.fromFrame(t),this.addChild(this.sprite),this.text=new s.Text(e.toUpperCase(),{font:"14px "+window.MAIN_FONT,fill:"#83DCF2",align:"center",wordWrap:!0,wordWrapWidth:this.sprite.width}),this.text.anchor.set(.5,0),this.text.x=.5*this.sprite.width,this.text.y=this.sprite.height,this.addChild(this.text),this.hitArea=new s.Rectangle(0,0,this.width,this.height)};r.prototype=Object.create(o.prototype),r.prototype.constructor=r,i.exports=r}),define("starwars/overlays/menu/MenuOverlay",["require","exports","module","PIXI","fido/app/Screen","fido/app/transitions/NoTransition","starwars/buttons/GoldenButton","./MenuButton","starwars/filters/GlitchFilter","fido/app/transitions/NoTransition","fido/loader/Cache","fido/loader/Cache","tracker","tracker","tracker","tracker"],function(t,e,i){var s=t("PIXI"),o=t("fido/app/Screen"),r=t("fido/app/transitions/NoTransition"),n=t("starwars/buttons/GoldenButton"),a=t("./MenuButton"),r=(t("starwars/filters/GlitchFilter"),t("fido/app/transitions/NoTransition")),h=function(e){o.call(this,e),this.rewardSystem=this.app.rewardSystem,this.transition=new r,this.hasClose=!1,this.background=(new s.Graphics).beginFill(0).drawRect(0,0,1136,130),this.addChild(this.background),this.closeButton=new n("icon_close.png"),this.closeButton.backgroundColor="red",this.closeButton.setSize("small"),this.closeButton.x=100,this.closeButton.y=.5*this.background.height,this.closeButton.onPress.add(this.hide,this),this.addChild(this.closeButton);var i=["Runner","Rebels","Fighter"];0===window.gameMode&&(i=["Rebels"]);for(var h=!1,l=0;l<i.length;l++)this.app.id===i[l]&&(h=!0);var c=t("fido/loader/Cache").getJson("config").config,u={Rebels:{frame:"top_nav_rebels.png",text:translations.STR_BUTTON_REBELS,screenID:"game2",url:Device.instance.desktop?c.GAME2_URL:c.GAME2_URL_MOBILE},Runner:{frame:"top_nav_yoda.png",text:translations.STR_BUTTON_YODA,screenID:"game1",url:Device.instance.desktop?c.GAME1_URL:c.GAME1_URL_MOBILE},Fighter:{frame:"top_nav_fighter.png",text:translations.STR_BUTTON_FIGHTER,screenID:"game3",url:Device.instance.desktop?c.GAME3_URL:c.GAME3_URL_MOBILE}};if(h){this.buttonsData=[{frame:"top_nav_arcade.png",text:translations.STR_BUTTON_ARCADE,screenID:"arcade",url:Device.instance.desktop?c.ARCADE_URL:c.ARCADE_URL_MOBILE}];for(var l=0;l<i.length;l++)this.app.id!==i[l]&&this.buttonsData.push(u[i[l]])}else{var c=t("fido/loader/Cache").getJson("config");this.buttonsData=[{frame:"top_nav_arcade.png",text:translations.STR_BUTTON_ARCADE,screenID:"arcade",url:""},{frame:"top_nav_room.png",text:translations.STR_BUTTON_ROOM,screenID:"hangar",url:""}];for(var l=0;l<i.length;l++)this.buttonsData.push(u[i[l]])}this.buttons=[],this.buttonMask=new s.Graphics,this.buttonMask.beginFill(16711680),this.buttonMask.drawRect(0,0,1200,this.background.height),this.addChild(this.buttonMask);var d=new s.Container;d.mask=this.buttonMask,this.addChild(d);for(var l=0;l<this.buttonsData.length;l++){var p=this.buttonsData[l],f=new a(p.frame,p.text);f._screenID=p.screenID,f._url=p.url,f.onPress.add(this.onButtonPress,this),this.buttons.push(f),d.addChild(f)}};h.prototype=Object.create(o.prototype),h.prototype.constructor=h,h.prototype.onButtonPress=function(e){if(this.hide(),"Arcade"!==this.app.id){var i=t("tracker");i.isNew?t("tracker").track("game_action","game_switch",{game_tier2:e._screenID}):t("tracker").trackAction("arcade_game_switch",e._screenID),window.location.href=e._url}else"Arcade"===this.app.id&&("arcade"===e._screenID?(this.app.screenManager.screens.arcade.goToArcadeMachines(),this.app.screenManager.gotoScreenByID(e._screenID)):""!==e._url?window.location.href=e._url:this.app.screenManager.gotoScreenByID(e._screenID))},h.prototype.hide=function(){var t=.4;TweenMax.to(this,t,{y:-this.background.height,onComplete:function(){var t=this.app.overlayManager.history.pop();if(t=this.app.overlayManager.history.pop()){var e=new s.Container;e.transition=new r,this.app.overlayManager.gotoScreen(e),this.app.overlayManager.gotoScreen(t)}else this.app.overlayManager.hide()},onCompleteScope:this}),!Device.instance.ie&&s.isWebGL&&TweenMax.to(this.app.overlayManager.bg,t,{y:0})},h.prototype.resize=function(t,e){this.background.width=t},h.prototype.onHide=function(){"Arcade"!==this.app.id&&this.app.topMenu.show()},h.prototype.onShow=function(){"Arcade"!==this.app.id&&this.app.topMenu.hide(),t("tracker").trackAction("view_hamburger");var e=.4,i=.2;TweenMax.fromTo(this,e,{y:-this.background.height},{y:0,delay:i,ease:Power2.easeInOut}),!Device.instance.ie&&s.isWebGL&&TweenMax.to(this.app.overlayManager.bg,e,{y:this.background.height,delay:i,ease:Power2.easeInOut});for(var o=0,r=0;r<this.buttons.length;r++){var n=this.buttons[r];n._screenID!==this.app.screenManager.currentScreen.id?(n.visible=!0,n.x=220+220*o,o++,TweenMax.fromTo(n,.3,{y:100,alpha:0},{y:6,alpha:1,delay:i+.3*e+.1*o,ease:Power2.easeOut}),TweenMax.from(n.text,.3,{y:n.text.y-10,alpha:0,delay:i+.5*e+.1*o,ease:Power2.easeOut})):n.visible=!1}},i.exports=h}),define("com/rebels/app/overlay/screens/Leaderboard",["require","exports","module","PIXI","fido/utils/Utils","fido/system/Ticker"],function(t,e,i){var s=t("PIXI"),o=(t("fido/utils/Utils"),t("fido/system/Ticker"),function(t){s.Container.call(this),this.list=[],this.realHeight=0,this.viewHeight=t.frameHeight||240,this.viewWidth=t.frameWidth||800,this.scoreViewHeight=t.lineHeight||40,this.padding="object"==typeof t.padding?t.padding:{top:0,right:0,bottom:0,left:0},this.container=new s.Container,this.addChild(this.container),this.maskGraphic=(new s.Graphics).beginFill(16711680,.4).drawRect(-5,15,this.viewWidth,this.viewHeight),this.addChild(this.maskGraphic),this.container.mask=this.maskGraphic,this.containerScrollbar=new s.Container,this.containerScrollbar.position.x=5,this.containerScrollbar.viewHeight=t.frameHeight||240,this.containerScrollbar.viewWidth=t.frameWidth||800,this.addChild(this.containerScrollbar),this.containerScrollbar.realHeight=this.containerScrollbar.viewHeight+2*this.scoreViewHeight,this.realHeight=this.containerScrollbar.viewHeight+1.5*this.scoreViewHeight;for(var e=Math.floor(this.containerScrollbar.realHeight/this.scoreViewHeight),i=0;e>i;i++){var o=new r(i);this.container.addChild(o),o.position.y=i*this.scoreViewHeight,this.list.push(o)}this.dirty=!0});o.constructor=o,o.prototype=Object.create(s.Container.prototype),Object.defineProperty(o.prototype,"scrollPosition",{get:function(){return this._scrollPosition},set:function(t){this._scrollPosition=t,this.updateScrollPosition()}}),o.prototype.setData=function(t){this.data=t;for(var e=0;e<this.list.length;e++){var i=this.list[e];i.id=99999}this.alpha=0,TweenLite.to(this,.3,{alpha:1}),this.scrollHeight=t.length*this.scoreViewHeight+this.padding.top+this.padding.bottom,this.dirty=!0,this.updateScrollPosition()},o.prototype.updateScrollPosition=function(){if(this.data){for(var t=0;t<this.list.length;t++){var e=this.list[t];e.position.y=t*this.scoreViewHeight+this._scrollPosition+this.padding.top,e.position.y+=this.scoreViewHeight;var i=Math.floor((e.position.y+40)/this.realHeight);i*=this.list.length,i-=t,i*=-1,e.id!=i&&(e.id=i,e.visible=e.id>=0&&e.id<this.data.length,e.visible&&e.setData(this.data[i])),e.position.y%=this.realHeight,e.position.y<-20&&(e.position.y+=this.realHeight),e.position.y-=this.scoreViewHeight}this.dirty=!1}},o.prototype.disappear=function(){for(var t=0;t<this.list.length;t++){var e=this.list[t];TweenLite.to(e,.4,{alpha:0}),TweenLite.to(this.containerScrollbar.position,.4,{x:200})}},o.prototype.appear=function(){for(var t=0;t<this.list.length;t++){var e=this.list[t];TweenLite.to(e,.4,{alpha:1}),TweenLite.to(this.containerScrollbar.position,.4,{x:5})}};var r=function(t){s.Container.call(this),this.lineHeight=90,this.x=150;var e={font:"18px "+window.MAIN_FONT,fill:"#acdef7",align:"left"};this.labelNumber=new s.Text("0",e),this.labelNumber.position.x=60,this.labelNumber.anchor.y=.5,this.labelNumber.y=this.lineHeight/2,this.labelName=new s.Text("0",e),this.labelName.position.x=100,this.labelName.anchor.y=.5,this.labelName.y=this.lineHeight/2,this.labelScore=new s.Text("0",e),this.labelScore.position.x=230,this.labelScore.anchor.y=.5,this.labelScore.y=this.lineHeight/2,this.addChild(this.labelNumber),this.addChild(this.labelName),this.addChild(this.labelScore),window.FLIP_LANGUAGE&&(this.labelNumber.anchor.x=1,this.labelNumber.position.x=380,this.labelName.anchor.x=1,this.labelName.position.x=330,this.labelScore.anchor.x=1,this.labelScore.position.x=230)};r.constructor=r,r.prototype=Object.create(s.Container.prototype),r.prototype.setData=function(t){window.FLIP_LANGUAGE?this.labelNumber.text="."+(this.id+1):this.labelNumber.text=this.id+1+".",this.labelName.text=t.username,this.labelScore.text=t.score},i.exports=o}),define("fido/ui/PixiScrollbar_",["require","exports","module","fido/utils/Math2","PIXI"],function(t,e,i){var s=t("fido/utils/Math2"),o=t("PIXI"),r=new o.Point,n=function(t){t=t||{},this.value=0,this._ratio=0,this.dragOffset=0,this.dragPosition=0,this.draggerHeight=t.draggerHeight||30,this.dragLength=t.dragLength||300,o.Container.call(this),this.bar=t.bar||(new o.Graphics).beginFill(16711680).drawRect(0,0,20,this.dragLength),this.dragger=t.dragger||(new o.Graphics).beginFill(16776960).drawRect(0,-this.draggerHeight/2,20,this.draggerHeight),this.addChild(this.bar),this.addChild(this.dragger),this.dragger.position.y=this.draggerHeight/2,this.interactive=!0,this.buttonMode=!0,this.mousedown=this.onDown.bind(this),this.onUp=this.onUp.bind(this),this.onMove=this.onMove.bind(this),this.onUpdate=null};n.prototype=Object.create(o.Container.prototype),n.prototype.updateTransform=function(){var t=this.draggerHeight/2+this.ratio*(this.dragLength-this.draggerHeight);this.dragger.position.y+=.5*(t-this.dragger.position.y),this.containerUpdateTransform()},Object.defineProperties(n.prototype,{ratio:{get:function(){return this._ratio},set:function(t){this._ratio=s.cap(t,0,1)}}}),n.prototype.updateRatio=function(t){this._ratio=s.map(t,this.draggerHeight/2,this.dragLength-this.draggerHeight/2,0,1),this._ratio=s.cap(this.ratio,0,1),this.onUpdate()},n.prototype.onDown=function(t){var e=t.data.getLocalPosition(this,r).y;this.updateRatio(e),this.isDragging=!0,this.mousemove=this.onMove,this.mouseup=this.mouseupoutside=this.onUp},n.prototype.onUp=function(){this.isDragging=!1,this.mousemove=null,this.mouseup=this.mouseupoutside=null},n.prototype.onMove=function(t){var e=t.data.getLocalPosition(this,r).y;this.updateRatio(e)},i.exports=n}),define("com/rebels/app/ScrollBarStarwars",["require","exports","module","fido/ui/PixiScrollbar_","fido/utils/Math2"],function(t,e,i){var s=t("fido/ui/PixiScrollbar_"),o=t("fido/utils/Math2");ScrollBarStarwars=function(t){var e=new PIXI.Sprite.fromFrame("scrollbar_tab.png");e.anchor.set(.5),e.pivot.y=-84,e.pivot.x=1;var i=new PIXI.Sprite.fromFrame("scrollbar_bg.png");i.anchor.set(.5,0),i.pivot.y=25;var t={dragLength:227,draggerHeight:62,bar:i,dragger:e};s.call(this,t)},ScrollBarStarwars.prototype=Object.create(s.prototype),ScrollBarStarwars.prototype.updateTransform=function(){var t=this.draggerHeight/2+this.ratio*(this.dragLength-this.draggerHeight);this.dragger.position.y+=.5*(t-this.dragger.position.y),this.dragger.position.x=o.map(this.ratio,0,1,0,12)+5,this.containerUpdateTransform()},i.exports=ScrollBarStarwars}),define("fido/ui/PixiScrollCombo",["require","exports","module","../physics/Spring","fido/system/Ticker","./PixiTrackpad","fido/utils/Math2"],function(t,e,i){var s=(t("../physics/Spring"),t("fido/system/Ticker"),t("./PixiTrackpad"),t("fido/utils/Math2"));PixiScrollCombo=function(t){this.min=t.min||0,this.max=t.max||500,this.trackpad=t.trackpad,this.trackpad.scrollMinY=-this.max,this.trackpad.scrollMaxY=this.min,this.trackpad.capMovement=!0,this.trackpad.easeToPosition(0,this.min),this.scrollbar=t.scrollbar,Device.instance.desktop||(this.scrollbar.visible=!1),this.scrollbar.onUpdate=this.onScrollUpdate.bind(this),this.value=0},Object.defineProperties(PixiScrollCombo.prototype,{value:{get:function(){return this._value},set:function(t){this._value=t,this.trackpad.easeToPosition(0,t)}}}),PixiScrollCombo.prototype.update=function(){this.trackpad.update(),this._value=this.trackpad.valueY,this.scrollbar.ratio=s.map(-this.trackpad.valueY,this.min,this.max,0,1)},PixiScrollCombo.prototype.onScrollUpdate=function(){var t=s.map(this.scrollbar.ratio,1,0,-this.max,this.min);this.trackpad.easeToPosition(0,t)},i.exports=PixiScrollCombo}),define("com/rebels/app/overlay/screens/LeaderboardScreen",["require","exports","module","PIXI","starwars/overlays/Overlay","./Leaderboard","fido/ui/PixiTrackpad","fido/utils/Utils","com/rebels/app/buttons/IconButton","com/rebels/app/ScrollBarStarwars","libs/GBAPI","fido/ui/PixiScrollbar_","fido/ui/PixiScrollCombo","com/rebels/app/system/GameSaveManager","fido/loader/Cache","fido/utils/Utils","tracker"],function(t,e,i){var s=t("PIXI"),o=t("starwars/overlays/Overlay"),r=t("./Leaderboard"),n=t("fido/ui/PixiTrackpad"),a=t("fido/utils/Utils"),h=(t("com/rebels/app/buttons/IconButton"),t("com/rebels/app/ScrollBarStarwars")),l=t("libs/GBAPI"),c=(t("fido/ui/PixiScrollbar_"),t("fido/ui/PixiScrollCombo")),u=t("com/rebels/app/system/GameSaveManager"),d=t("fido/loader/Cache"),a=t("fido/utils/Utils"),p=function(t){o.call(this,t),this.title.text=translations.STR_OVERLAY_LEADERBOARD,this.backToCompletionScreen=!1,this.currentLeaderboardId=0,this.dimensions={width:700,height:360},this.hitArea=new s.Rectangle(-(.5*this.dimensions.width),-(.5*this.dimensions.height),this.dimensions.width-40,this.dimensions.height),this.leaderboards=[],this.trackpads=[],this.trackRect=new s.Container,this.trackRect.hitArea=new s.Rectangle(-350,-180,700,360),this.addChild(this.trackRect);var e={target:this.trackRect},i=new n(e),l=new h;l.position.set(205,-136),this.addChild(l);var u=new c({scrollbar:l,trackpad:i,min:0,max:310});this.scrollCombo=u;var d={frameWidth:600,frameHeight:.7*this.bg.height,lineHeight:25,padding:{top:0,right:0,bottom:80,left:0}},p=[-254.5,132,-236.5,-170,236.5,-170,255.5,129],f=new s.Graphics;f.beginFill(16777215*Math.random()).drawPolygon(p),this.containerLeaderboards=new s.Container,this.addChild(f),this.containerLeaderboards.mask=f,this.screen.addChild(this.containerLeaderboards);for(var m=-380,g=0;3>g;g++){var v=new r(d);v.disappear(),v.alpha=1,v.position.x=m,v.position.y=-150,this.containerLeaderboards.addChild(v),this.leaderboards.push(v),v.containerScrollbar.position.y-=50,this.trackpads.push(u)}this.buttons=[];for(var y=[-130,0,130],_=[translations.STR_OVERLAY_HIGHSCORE_DAY,translations.STR_OVERLAY_HIGHSCORE_WEEK,translations.STR_OVERLAY_HIGHSCORE_ALL_TIME],x={font:"18px "+window.MAIN_FONT,fill:"#ccffff",align:"left"},b={font:"18px "+window.MAIN_FONT,fill:"#ccffff",align:"left"},g=0;3>g;g++){var w=new s.Container;w.interactive=!0,w.buttonMode=!0,w.click=w.tap=this._onDown.bind(this,w,g,!1),w.position.y=-160,this.addChild(w);var S=new s.Sprite.fromFrame("ui_leaderboard_button_off.png");S.anchor.set(.5),S.position.x=y[g];var T=new s.Sprite.fromFrame("leaderboard_tab_off.png");T.anchor.set(.5),T.position.x=y[g];var C=new s.Text(_[g],b);a.fitText(C,110),C.anchor.set(.5);var P=new s.Text(_[g],x);P.anchor.set(.5),P.visible=!1,a.fitText(P,110),T.addChild(C),T.addChild(P),w.addChild(S),w.addChild(T);var A={bg:S,fg:T,textActive:P,textInactive:C};this.buttons.push(A)}this._onDown(this.buttons[0],0,!0);var M=new s.Sprite.fromFrame("ui_bottom_text_panel.png");M.anchor.x=.5,M.anchor.y=1,M.position.y=this.bg.height/2-20,this.screen.addChild(M),this.textBottom=new s.Text("",{font:"25px "+window.MAIN_FONT,fill:"#09717c"}),this.textBottom.anchor.set(.5),this.textBottom.position.y=-M.height/2-5,M.addChild(this.textBottom),this.hasClose=!0};p.prototype=Object.create(o.prototype),p.prototype._onDown=function(t,e,i){if(e!==this.currentLeaderboardId||i){var o=this.buttons[this.currentLeaderboardId];o.bg.texture=new s.Texture.fromFrame("ui_leaderboard_button_off.png"),o.fg.texture=new s.Texture.fromFrame("leaderboard_tab_off.png"),o.textActive.visible=!1,o.textInactive.visible=!0,this.leaderboards[this.currentLeaderboardId].disappear();var t=this.buttons[e];t.bg.texture=new s.Texture.fromFrame("ui_leaderboard_button_on.png"),t.fg.texture=new s.Texture.fromFrame("leaderboard_tab_on.png"),t.textActive.visible=!0,t.textInactive.visible=!1,this.currentLeaderboardId=e,this.scrollCombo.value=0,TweenLite.delayedCall(.2,function(){this.leaderboards[this.currentLeaderboardId].appear()}.bind(this))}},p.prototype.backToScore=function(){this.screenManager.gotoScreenByID("completion")},p.prototype.onTotalScorePressed=function(){0===this.buttonTotalScore.state&&(this.buttonTotalScore.toggleOn(),this.buttonTotalScore.state=1,this.loadTotalScores(),this.buttonSinglePlay.toggleOff(),this.buttonSinglePlay.state=0,this.trackpads[this.currentLeaderboardId].value=0)},p.prototype.onSinglePlayPressed=function(){0===this.buttonSinglePlay.state&&(this.buttonSinglePlay.toggleOn(),this.buttonSinglePlay.state=1,this.loadSinglePlayScores(),this.buttonTotalScore.toggleOff(),this.buttonTotalScore.state=0,this.trackpads[this.currentLeaderboardId].value=0)},p.prototype.loadTotalScores=function(){this.loadScores("allatbreak_total")},p.prototype.loadSinglePlayScores=function(){this.loadScores("allatbreak_overall")},p.prototype.updateTransform=function(){this.trackpads[this.currentLeaderboardId].update(),this.leaderboards[this.currentLeaderboardId].scrollPosition=this.scrollCombo.value,s.Container.prototype.updateTransform.call(this)},p.prototype.loadScores=function(t){var e=t,i=d.getJson("config").config.SCORE_ID;l.instance.getScores({date:e,game:i},function(t){if(t.error)t.error||0===t.results.length;else{var i=t.results,s=[];if(i.length>0)for(var o=0;o<i.length;o++){var r={username:i[o].name_str,score:i[o].score_int};s.push(r)}else{var r={username:translations.STR_LEADERBOARD_NO_DATA,score:""};s.push(r)}var n=e;this.onDataRecieved(s,n)}e++,2>=e&&this.loadScores(e)}.bind(this))},p.prototype.onHidden=function(){o.prototype.onHidden.call(this),t("tracker").trackAction("lb_close"),
this.backToCompletionScreen=!1},p.prototype.onShow=function(){o.prototype.onShow.call(this);for(var t=0,e=0;e<u.instance.save.worlds.length;e++)for(var i=u.instance.save.worlds[e],s=0;s<i.levels.length;s++){var r=i.levels[s];t+=r.score}window.FLIP_LANGUAGE?this.textBottom.text=t+" : "+translations.STR_OVERLAY_LEADERBOARD_INFO:this.textBottom.text=translations.STR_OVERLAY_LEADERBOARD_INFO+" :   "+t,a.fitText(this.textBottom,400),this.loadScores(0)},p.prototype.onDataRecieved=function(t,e){if(!t)for(var t=[],i=0;70>i;i++){var s={username:"Mat"+(1e3*Math.random()|0),score:100*i};t.push(s)}this.scrollCombo.value=0,this.leaderboards[e].setData(t),this.leaderboards[e].alpha=1},p.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=p}),define("starwars/overlays/AchievementBoard",["require","exports","module","PIXI","fido/utils/Utils","fido/system/Ticker","fido/loader/Cache"],function(t,e,i){var s=t("PIXI"),o=(t("fido/utils/Utils"),t("fido/system/Ticker"),t("fido/loader/Cache")),r=function(t){s.Container.call(this),this.list=[],this.realHeight=0,this.viewHeight=t.frameHeight||240,this.viewWidth=t.frameWidth||800,this.scoreViewHeight=t.lineHeight||40,this.padding="object"==typeof t.padding?t.padding:{top:0,right:0,bottom:0,left:0},this.container=new s.Container,this.addChild(this.container),this.maskGraphic=(new s.Graphics).beginFill(16711680,.4).drawRect(-5,40,this.viewWidth,this.viewHeight),this.addChild(this.maskGraphic),this.container.mask=this.maskGraphic,this.containerScrollbar=new s.Container,this.containerScrollbar.position.x=5,this.containerScrollbar.viewHeight=t.frameHeight||240,this.containerScrollbar.viewWidth=t.frameWidth||800,this.addChild(this.containerScrollbar),this.containerScrollbar.realHeight=this.containerScrollbar.viewHeight+2*this.scoreViewHeight,this.realHeight=this.containerScrollbar.viewHeight+1.4*this.scoreViewHeight;for(var e=Math.floor(this.containerScrollbar.realHeight/this.scoreViewHeight),i=0;e>i;i++){var o=new n(i);this.container.addChild(o),o.position.y=i*this.scoreViewHeight,this.list.push(o)}this.dirty=!0};r.constructor=r,r.prototype=Object.create(s.Container.prototype),Object.defineProperty(r.prototype,"scrollPosition",{get:function(){return this._scrollPosition},set:function(t){this._scrollPosition=t,this.updateScrollPosition()}}),r.prototype.onShow=function(){OverlayScreen.prototype.onShow.call(this),s.isWebGL&&(this.containerInterference.alpha=.2)},r.prototype.setData=function(t){this.data=t;for(var e=0;e<this.list.length;e++){var i=this.list[e];i.id=99999}this.alpha=0,TweenLite.to(this,.3,{alpha:1}),this.scrollHeight=t.length*this.scoreViewHeight+this.padding.top+this.padding.bottom,this.dirty=!0,this.updateScrollPosition()},r.prototype.updateScrollPosition=function(){if(this.data){for(var t=0;t<this.list.length;t++){var e=this.list[t];e.position.y=t*this.scoreViewHeight+this._scrollPosition+this.padding.top,e.position.y+=this.scoreViewHeight;var i=Math.floor((e.position.y+40)/this.realHeight);i*=this.list.length,i-=t,i*=-1,e.id!=i&&(e.id=i,0!==i?(e.visible=e.id>=0&&e.id<this.data.length,e.visible&&e.setData(this.data[i])):e.visible=!1),e.position.y%=this.realHeight,e.position.y<0&&(e.position.y+=this.realHeight),e.position.y-=this.scoreViewHeight}this.dirty=!1}},r.prototype.disappear=function(){for(var t=0;t<this.list.length;t++){var e=this.list[t];TweenLite.to(e,.4,{alpha:0}),TweenLite.to(this.containerScrollbar.position,.4,{x:200})}},r.prototype.appear=function(){for(var t=0;t<this.list.length;t++){var e=this.list[t];TweenLite.to(e,.4,{alpha:1}),TweenLite.to(this.containerScrollbar.position,.4,{x:5})}};var n=function(t){s.Container.call(this),this.lineHeight=90,this.x=150,this.marker=new s.Sprite.fromFrame("icon_pause.png"),this.dotOn=s.Texture.fromFrame("challenge_bullet_on.png"),this.dotOff=s.Texture.fromFrame("challenge_bullet_off.png"),this.styleAchieved={font:"18px "+window.MAIN_FONT,fill:"#ccffff",align:window.FLIP_LANGUAGE?"right":"left",wordWrap:!0,lineHeight:21,wordWrapWidth:315},this.styleNonAchieved={font:"18px "+window.MAIN_FONT,fill:"#87b2c4",align:window.FLIP_LANGUAGE?"right":"left",wordWrap:!0,lineHeight:21,wordWrapWidth:315},this.labelNumber=new s.Text("0",this.styleNonAchieved),this.labelNumber.position.x=60,this.labelNumber.anchor.y=0,this.labelNumber.y=this.lineHeight/2,this.labelName=new s.Text("0",this.styleNonAchieved),this.labelName.position.x=92,this.labelName.anchor.y=0,this.labelName.y=this.lineHeight/2,this.marker.anchor.x=.5,this.marker.anchor.y=0,this.marker.x=30,this.marker.y=this.lineHeight/2-2+2,this.marker.alpha=.6,this.addChild(this.marker),this.addChild(this.labelNumber),this.addChild(this.labelName),this.flipPercentage="true"===o.getJson("config").FLIP_PERCENT,window.FLIP_LANGUAGE&&(this.marker.position.x=400,this.labelName.anchor.x=1,this.labelName.position.x=355,this.labelNumber.anchor.x=1,this.labelNumber.position.x=380)};n.constructor=n,n.prototype=Object.create(s.Container.prototype),n.prototype.setData=function(t){t.achieved?(this.marker.texture=this.dotOn,this.labelName.style=this.styleAchieved,this.labelNumber.style=this.styleAchieved,this.marker.texture=this.dotOn,this.marker.alpha=1):(this.marker.texture=this.dotOff,this.labelName.style=this.styleNonAchieved,this.labelNumber.style=this.styleNonAchieved,this.marker.alpha=.6),window.FLIP_LANGUAGE?(this.labelNumber.text="."+this.id,this.labelName.text="(%"+Math.round(t.completion)+") "+t.desc.toUpperCase()):(this.labelNumber.text=this.id+".",this.flipPercentage?this.labelName.text=t.desc.toUpperCase()+" (%"+Math.round(t.completion)+")":this.labelName.text=t.desc.toUpperCase()+" ("+Math.round(t.completion)+"%)")},i.exports=r}),define("starwars/ui/ScrollBarStarwars",["require","exports","module","fido/ui/PixiScrollbar_","fido/utils/Math2"],function(t,e,i){var s=t("fido/ui/PixiScrollbar_"),o=t("fido/utils/Math2");ScrollBarStarwars=function(t){var e=new PIXI.Sprite.fromFrame("scrollbar_tab.png");e.anchor.set(.5),e.pivot.y=-84,e.pivot.x=1;var i=new PIXI.Sprite.fromFrame("scrollbar_bg.png");i.anchor.set(.5,0),i.pivot.y=25;var t={dragLength:227,draggerHeight:62,bar:i,dragger:e};s.call(this,t)},ScrollBarStarwars.prototype=Object.create(s.prototype),ScrollBarStarwars.prototype.updateTransform=function(){var t=this.draggerHeight/2+this.ratio*(this.dragLength-this.draggerHeight);this.dragger.position.y+=.5*(t-this.dragger.position.y),this.dragger.position.x=o.map(this.ratio,0,1,0,12)+5,this.containerUpdateTransform()},i.exports=ScrollBarStarwars}),define("starwars/overlays/AchievementScreen",["require","exports","module","PIXI","starwars/overlays/Overlay","./AchievementBoard","starwars/ui/ScrollBarStarwars","fido/ui/PixiTrackpad","fido/utils/Utils","fido/goals/Goals","fido/system/Device","fido/system/Ticker","fido/ui/PixiScrollbar_","fido/ui/PixiScrollCombo","fido/goals/Trophies","fido/utils/FrameWait","fido/utils/Utils","tracker"],function(t,e,i){var s=t("PIXI"),o=t("starwars/overlays/Overlay"),r=t("./AchievementBoard"),n=t("starwars/ui/ScrollBarStarwars"),a=t("fido/ui/PixiTrackpad"),h=t("fido/utils/Utils"),l=t("fido/goals/Goals"),c=t("fido/system/Device"),u=t("fido/system/Ticker"),d=(t("fido/ui/PixiScrollbar_"),t("fido/ui/PixiScrollCombo")),p=t("fido/goals/Trophies"),f=t("fido/utils/FrameWait"),h=t("fido/utils/Utils"),m=function(t){o.call(this,t),this.title.text=translations.STR_OVERLAY_CHALLENGES,this.dimensions={width:700,height:360};var e={frameWidth:600,frameHeight:.7*this.bg.height,lineHeight:60,padding:{top:0,right:0,bottom:0,left:0}};this.leaderboard=new r(e),this.leaderboard.alpha=0,this.screen.addChild(this.leaderboard),this.hitArea=new s.Rectangle(-(.5*this.dimensions.width),-(.5*this.dimensions.height),this.dimensions.width-40,this.dimensions.height),this.leaderboard.position.x=-380,this.leaderboard.position.y=-200,c.instance.desktop||(this.leaderboard.x=-390),this.trackRect=new s.Container,this.trackRect.hitArea=new s.Rectangle(-350,-180,700,360),this.screen.addChild(this.trackRect);var i={target:this.trackRect},h=new a(i);this.trophies=new p({goal_system:l.instance}),this.trophies.init(),this.trophyContainer=new s.Container,this.screen.addChild(this.trophyContainer),this.trophySprites=[];for(var u=0;4>u;u++){var f=new s.Sprite;window.FLIP_LANGUAGE?f.x=-180+100*u:f.x=-180+100*(3-u),f.y=-170,this.trophyContainer.addChild(f),this.trophySprites.push(f)}var m=new n;m.position.set(205,-128),this.screen.addChild(m);var g=new d({scrollbar:m,trackpad:h,min:30,max:2255});this.scrollCombo=g,this.scrollCombo.value=30;var i={target:this.screen,scrollbarClass:n,scrollbar:!1,scrollbarHeight:this.dimensions.height,scrollTarget:this.leaderboard.containerScrollbar};this.trackpad=new a(i),this.firstLaunch=!0,this.scoreCache={};var v=new s.Sprite.fromFrame("ui_bottom_text_panel.png");v.anchor.x=.5,v.anchor.y=1,v.position.y=this.bg.height/2-20,this.screen.addChild(v),this.textBottom=new s.Text("",{font:"25px "+window.MAIN_FONT,fill:"#09717c"}),this.textBottom.anchor.set(.5),this.textBottom.position.y=-v.height/2-5,v.addChild(this.textBottom),this.hasClose=!0};m.prototype=Object.create(o.prototype),m.prototype.update=function(){o.prototype.update.call(this),this.scrollCombo.update(),this.trophyContainer.y=this.scrollCombo.value-10,this.leaderboard.scrollPosition=this.scrollCombo.value},m.prototype.onHide=function(){o.prototype.onHide.call(this),this.leaderboard.alpha=0,this.scoreCache={}},m.prototype.onShow=function(){o.prototype.onShow.call(this),s.isWebGL&&(this.containerInterference.alpha=.2),t("tracker").trackAction("achievements_start"),this.trackpad.easeToPosition(0,0),this.onDataRecieved(),f.wait(function(){this.app.alertPanelManager.show("trophies")}.bind(this),20),u.instance.add(this.update,this)},m.prototype.onHide=function(){o.prototype.onHide.call(this)},m.prototype.onHidden=function(){u.instance.remove(this.update,this)},m.prototype.onDataRecieved=function(t){for(var e=l.instance.getLastAchievements(),t=[],i=0,o="trophy_rebels_none.png",r=this.trophies.getTrophies(),n=0;n<r.length;n++){var a=r[n];a.earned?this.trophySprites[n].texture=s.Texture.fromFrame(a.image):this.trophySprites[n].texture=s.Texture.fromFrame(o)}for(var c=0,n=0;n<e.length;n++){var u=e[n];u.achieved&&i++,u.hidden?c++:t.push(u)}t.unshift({achieved:!0,desc:"empty",completion:0}),window.FLIP_LANGUAGE?this.textBottom.text=translations.STR_OVERLAY_CHALLENGES_INFO+"  "+(e.length-c)+" / "+i:this.textBottom.text=i+" / "+(e.length-c)+" "+translations.STR_OVERLAY_CHALLENGES_INFO,h.fitText(this.textBottom,400),this.leaderboard.setData(t),this.trackpad.scrollMinY=-(this.leaderboard.scrollHeight-this.leaderboard.viewHeight),this.leaderboard.alpha=1},m.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=m}),define("starwars/overlays/Swears",["require","exports","module"],function(t,e,i){var s="cG9veGl0dXNhdHl2dHlsdG9ndGl0c3lsc3B5c3Bhc25vc2lrc2V4c2Vkc2F1cmV2cmFwcWtrcHVscHVlcG9wcGlrcGV3cGVzcGVrb3N0b3Jtb29ob25zbnNibmVrbmVpbXVzbXVrbW9wbWFjbHVzbGVta3Vra3Vna29wa2tra2lza2lkanVzaWJvaHlzaHVlaG9yaG9saG9laGFwZ29hZ251Z2VyZ2F5ZnJhZmlzZmFuZmFnZWxnZWdvZWdnZHlyc2V4ZG9tZG9nYnJ5c2V4bmFpYm9icG90cGlzcGlrem9ieHh4YmlsYmlhbHVsa3V0YmFna2FrYmFmYXNzZ3Zkc2F1eHh4YXJnYXBvbnVzcHFweHh4YXBlYXBhc2V4dGlzcHJzZnVrc2V4cGF1c2V4c2V4c2d1c2V4bnVzbnVhZ2F5cGVlcGF0a2trc2V4eHh4bmlnZGVsZ2F5a3Vra2tramFwbm9wcGlzZ29kZmFrZ2F5Y3VsZnV0ZnVrc2V4YW1vZm9rY29uc2Vnc2V4ZnVjcmFqZmFnZmNrY3VzZmFnaHVqa2F0c2V4amViaGVyZ2F5aHVqZ2F5a3VyZmlzZ2F5ZGljZ2VqZmFuZ2VqcGF1Zm9zZmFrYXNvc2lrcGtrZ2F5ZnV0ZWRpY3VzYnVtYXNzY3VyYm9pY3ljYm9rYW1rYmxiYXNzYW5vbmdhdG5hYnJhbWxmbG9ibm9ianJraXNscGRhZG9hcHRhbmlicmliZG1iam9icnViY3Vta250ZGllc3VrbGlrcHN5a29rYnV0aml6YmNoY29rZGlrc2h0Y250aXJhbHNkc3RkbXVmbWxmd3RmeHRjYW5sd2NrZnVxZnV4Y29jY29xa294a29ja29ra29xY2FjY2FrY2Fxa2Fja2Fra2FxZGlxZGl4ZGNrcG5zbmdyZHNodHd0YmNoY2x0a3Vta2x0c3Vjc3Vrc3Vxc2NrbGlrbGljbGlxbGNranp6Z2V5Z2VpZ2FpdmFndmduc2p2ZmFwcHJubG9samV3eWlkam9vZ3ZycGlzcHNzc25tZmt1ZmN1ZnF1aG9yc2x0amFwd29wa2lra3lra3lja3lxZHlrZHlxZHljanl6cHJrcHJjcHJxbWljbWlrbWlxbXljbXlrbXlxZ3VjZ3VrZ3VxZ2l6Z3p6c3h4c3hpc3hlc3h5d2Fjd2Frd2Fxd2NrdGhjdmFqdmpuYXpucGNwZG1ub3JsYW5zbWZmcGhrcGhjcGhxdG9rdG9jdG9xcmFjcmFrcmFxcmNrc2Fjc2Frc2FxcG1zbmFkbmR6bmRzc29sc29iZm9iZ2FnZ29pZ29vZ295Z3l6aXVkamlzbGF5bGV6bHlra3lsbnlwb2NkdG9zdHVndHl0d2V0d2l6d2x5eml0",o={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,i,s,r,n,a,h,l="",c=0;for(t=o._utf8_encode(t);c<t.length;)e=t.charCodeAt(c++),i=t.charCodeAt(c++),s=t.charCodeAt(c++),r=e>>2,n=(3&e)<<4|i>>4,a=(15&i)<<2|s>>6,h=63&s,isNaN(i)?a=h=64:isNaN(s)&&(h=64),l=l+this._keyStr.charAt(r)+this._keyStr.charAt(n)+this._keyStr.charAt(a)+this._keyStr.charAt(h);return l},decode:function(t){var e,i,s,r,n,a,h,l="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)r=this._keyStr.indexOf(t.charAt(c++)),n=this._keyStr.indexOf(t.charAt(c++)),a=this._keyStr.indexOf(t.charAt(c++)),h=this._keyStr.indexOf(t.charAt(c++)),e=r<<2|n>>4,i=(15&n)<<4|a>>2,s=(3&a)<<6|h,l+=String.fromCharCode(e),64!=a&&(l+=String.fromCharCode(i)),64!=h&&(l+=String.fromCharCode(s));return l=o._utf8_decode(l)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var s=t.charCodeAt(i);128>s?e+=String.fromCharCode(s):s>127&&2048>s?(e+=String.fromCharCode(s>>6|192),e+=String.fromCharCode(63&s|128)):(e+=String.fromCharCode(s>>12|224),e+=String.fromCharCode(s>>6&63|128),e+=String.fromCharCode(63&s|128))}return e},_utf8_decode:function(t){for(var e="",i=0,s=c1=c2=0;i<t.length;)s=t.charCodeAt(i),128>s?(e+=String.fromCharCode(s),i++):s>191&&224>s?(c2=t.charCodeAt(i+1),e+=String.fromCharCode((31&s)<<6|63&c2),i+=2):(c2=t.charCodeAt(i+1),c3=t.charCodeAt(i+2),e+=String.fromCharCode((15&s)<<12|(63&c2)<<6|63&c3),i+=3);return e}},r=o.decode(s),n=r.match(/.{1,3}/g);i.exports=n}),define("fido/game/NameInput",["require","exports","module","signals","PIXI","fido/ui/PixiTrackpad","fido/sound/SoundManager"],function(t,e,i){var s=t("signals"),o=t("PIXI"),r=t("fido/ui/PixiTrackpad"),n=t("fido/sound/SoundManager"),a=function(){o.Container.call(this),this.letterScrollers=[];var t=0,e=135,i=new o.Sprite.fromFrame("ui_entername_panel.png");i.anchor.set(.5),i.position.x=35,i.position.y=70,this.addChild(i);for(var r=[t-e,t,t+e],n=0;3>n;n++){var a=new c;this.addChild(a),a.x=r[n],a.y=11,a.onLetterUpdate.add(this.onNameUpdate,this),this.letterScrollers.push(a)}this.onNameUpdate=new s,this.pivot.x=this.width/2-e};a.prototype=Object.create(o.Container.prototype),a.prototype.reset=function(){for(var t=0;t<this.letterScrollers.length;t++)this.letterScrollers[t].reset()},a.prototype.onNameUpdate=function(){for(var t="",e=0;e<this.letterScrollers.length;e++)t+=this.letterScrollers[e].currentLetter;this.word=t,this.onNameUpdate.dispatch(t)},a.prototype.setName=function(t){this.reset();var e,i=t.split(""),s="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),o=[],r=0;for(e=0;e<i.length;e++){r=0;for(var n=0;n<s.length;n++)s[n]===i[e]?o.push(r):r++}for(e=0;e<this.letterScrollers.length;e++)this.letterScrollers[e].goToLetterId(o[e])},a.prototype.update=function(){};var h=120,l=135,c=function(){o.Container.call(this),this.onLetterUpdate=new s,this.letters="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),this.masky=(new o.Graphics).beginFill(16711680).drawRect(-20,-5,110,128),this.addChild(this.masky),this.hitArea=new o.Rectangle(0,-5,89,130),this.trackpad=new r({target:this}),this.trackpad.snapTo=!0,this.trackpad.size=h,this.trackpad.maxSlots=1e8,this.trackpad.capMovement=!1,this.trackpad.spring.springiness=.9,this.trackpad.spring.damp=.5,this.options=[],this.optionContainer=new o.Container,this.addChild(this.optionContainer),this.optionContainer.mask=this.masky,this.lastId=0;for(var t=3,e=0;t>e;e++){var i=new o.Container;i.text=new o.Text("HI",{font:"124px "+window.SECONDARY_FONT,fill:"#aae5ff"}),i.addChild(i.text),i.text.x=35,i.text.y=47,i.text.anchor.set(.5),this.optionContainer.addChild(i),i.interactive=!0,i.buttonMode=!0,i.id=1e6,this.options.push(i)}this.lastId=999999999,this.nextButton=new o.Sprite.fromFrame("ui_entername_off.png"),this.nextButton.anchor.set(.5),this.nextButton.interactive=!0,this.nextButton.buttonMode=!0,this.nextButton.click=this.nextButton.tap=this.onNextPressed.bind(this),this.nextButton.mousedown=this.nextButton.touchstart=this.changeTexture.bind(this,this.nextButton,"ui_entername_on.png"),this.nextButton.mouseupoutside=this.nextButton.touchendoutside=this.nextButton.mouseup=this.nextButton.touchend=this.changeTexture.bind(this,this.nextButton,"ui_entername_off.png"),this.addChild(this.nextButton),this.nextButton.y=-43,this.nextButton.x=32,this.prevButton=new o.Sprite.fromFrame("ui_entername_off.png"),this.prevButton.anchor.set(.5),this.prevButton.scale.y*=-1,this.prevButton.interactive=!0,this.prevButton.buttonMode=!0,this.prevButton.mousedown=this.prevButton.touchstart=this.changeTexture.bind(this,this.prevButton,"ui_entername_on.png"),this.prevButton.mouseupoutside=this.prevButton.touchendoutside=this.prevButton.mouseup=this.prevButton.touchend=this.changeTexture.bind(this,this.prevButton,"ui_entername_off.png"),this.prevButton.click=this.prevButton.tap=this.onPrevPressed.bind(this),this.addChild(this.prevButton),this.prevButton.x=35,this.prevButton.y=158};c.prototype=Object.create(o.Container.prototype),c.prototype.changeTexture=function(t,e){t.texture=new o.Texture.fromFrame(e)},c.prototype.updateTransform=function(){this.trackpad.update();for(var t=this.options.length*h,e=0;e<this.options.length;e++){var i=this.options[e];i.position.y=e*h+this.trackpad.valueY+l;var s=Math.floor(i.position.y/t);if(s*=this.options.length,s*=-1,s+=e,s!==i.id){i.id=s;var r=s%this.letters.length;0>r&&(r+=this.letters.length),i.letter=this.letters[r],i.text.text=this.letters[r]}i.position.y%=t,i.position.y<0&&(i.position.y+=t),i.position.y-=h}var n=this.trackpad.spring.ty/-this.trackpad.size|0,a=n%this.options.length;0>a&&(a+=this.options.length);var c=this.options[a];this.currentLetter!==c.letter&&(this.currentLetter=c.letter,this.onLetterUpdate.dispatch(c.letter)),o.Container.prototype.updateTransform.call(this)},c.prototype.onNextPressed=function(){this.trackpad.previousSlotY(),n.sfx.play("selectbeep")},c.prototype.onPrevPressed=function(){this.trackpad.nextSlotY(),n.sfx.play("selectbeep")},c.prototype.goToLetterId=function(t){this.trackpad.setSlotY(t),this.trackpad.spring.dy=0,this.trackpad.speedY=0,this.trackpad.valueY=this.trackpad.easingValueY=this.trackpad.spring.y=this.trackpad.spring.ty},c.prototype.onOptionPressed=function(t){!this.trackpad.didMove},c.prototype.reset=function(){for(var t=0;t<this.options.length;t++)this.options[t].id=9999,this.options[t].text.text="!"},i.exports=a}),define("starwars/NameUtils",["require","exports","module","PIXI","fido/loader/Cache","fido/system/LocalStorage"],function(t,e,i){var s=(t("PIXI"),t("fido/loader/Cache")),o=t("fido/system/LocalStorage"),r={};r.getUserName=function(){var t=s.getJson("config").COOKIES_BUNDLE_ID;s.getJson("config").config&&(t=s.getJson("config").config.ARCADE_COOKIES_BUNDLE_ID);var e=new o(t),i=e.getObject("userName");return i||(i="AAA"),i},r.setUserName=function(t){var e=s.getJson("config").COOKIES_BUNDLE_ID;s.getJson("config").config&&(e=s.getJson("config").config.ARCADE_COOKIES_BUNDLE_ID);var i=new o(e);i.storeObject("userName",t)},i.exports=r}),define("starwars/overlays/NameOverlay",["require","exports","module","./Swears","fido/game/NameInput","starwars/buttons/TextButton","signals","starwars/overlays/Overlay","fido/sound/SoundManager","libs/GBAPI","starwars/NameUtils","fido/system/Ticker"],function(t,e,i){var s=t("./Swears"),o=t("fido/game/NameInput"),r=t("starwars/buttons/TextButton"),n=t("signals"),a=t("starwars/overlays/Overlay"),h=t("fido/sound/SoundManager"),l=(t("libs/GBAPI"),t("starwars/NameUtils")),c=t("fido/system/Ticker"),u=function(t){a.call(this,t),this.swearRegEx=RegExp(s.join("|")),this.nameInput=new o,this.nameInput.x=40,this.nameInput.y=-118,this.addChild(this.nameInput),this.nameInput.onNameUpdate.add(this.onNameUpdate,this),this.submitButton,this.title.text=translations.STR_OVERLAY_NAME.toLowerCase(),this.submitButton=new r(translations.STR_SAVE_NAME),this.hasClose=!1,this.submitButton.y=118,this.submitButton.onPress.add(this.onSubmitPressed,this),this.addChild(this.submitButton),this.name=l.getUserName(),this.onNameUpdated=new n};u.prototype=Object.create(a.prototype),u.prototype.onSubmitPressed=function(){l.setUserName(this.name),h.sfx.play("selectbeep")},u.prototype.onHide=function(){this.onNameUpdated.dispatch(this.name),c.instance.remove(this.update,this)},u.prototype.onNameUpdate=function(t){var e=!this.swearRegEx.test(t.toLowerCase());this.name=t,e?(this.nameInput.alpha=1,this.submitButton.interactive=!0,this.submitButton.alpha=1):(this.nameInput.alpha=.5,this.submitButton.interactive=!1,this.submitButton.alpha=.5),this.onNameUpdated.dispatch(t)},u.prototype.onShow=function(){c.instance.add(this.update,this),this.name=l.getUserName(),this.nameInput.setName(this.name),this.submitButton.interactive=!0,TweenLite.to(this.submitButton.scale,.1,{x:1,y:1,ease:Back.easeIn}),TweenLite.to(this.nameInput,.1,{alpha:1,ease:Sine.easeIn})},u.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=u}),define("com/rebels/app/overlay/screens/LevelScreen",["require","exports","module","PIXI","starwars/overlays/Overlay","fido/sound/SoundBridge","starwars/buttons/GoldenButton","fido/system/Ticker","com/rebels/app/system/GameSaveManager","starwars/buttons/GoldenButton","fido/utils/Utils","com/rebels/game/GameConfig","fido/loader/Cache","com/rebels/app/ThreeStarsStarwars","starwars/filters/GlitchFilter"],function(t,e,i){var s=t("PIXI"),o=t("starwars/overlays/Overlay"),r=(t("fido/sound/SoundBridge"),t("starwars/buttons/GoldenButton")),n=(t("fido/system/Ticker"),t("com/rebels/app/system/GameSaveManager")),r=t("starwars/buttons/GoldenButton"),a=(t("fido/utils/Utils"),t("com/rebels/game/GameConfig")),h=t("fido/loader/Cache"),l=t("com/rebels/app/ThreeStarsStarwars"),c=t("starwars/filters/GlitchFilter"),u=["level_select_ezra.png","level_select_sabine.png","level_select_zeb.png"],d=function(t){o.call(this,t),this.count=0,this.data={};var e=new s.Sprite.fromFrame("ui_instructions_text_panel.png");e.anchor.x=e.anchor.y=.5,e.position.y=120,this.screen.addChild(e),this.hasClose=!0,this.playButton=new r("icon_play.png"),this.playButton.setSize("medium"),this.playButton.y=75,this.playButton.onPress.add(this.onPress,this),this.addChild(this.playButton),this.name=new s.Text("",{font:"28px "+window.SECONDARY_FONT,fill:"#acdef7",dropShadow:!0,dropShadowColor:"rgba(50,70,160,0.5)",dropShadowDistance:2,dropShadowAngle:Math.PI/2,stroke:"#0072ff",strokeThickness:1,align:"center"}),this.name.anchor.x=.5,this.name.y=-180,this.addChild(this.name);var i=window.translations.STR_LEVELS_BEST_SCORE.toUpperCase();this.bestTime=new s.Text(i,{font:"18px "+window.SECONDARY_FONT,fill:"#acdef7",stroke:"#0072ff",strokeThickness:1,align:"center"}),this.bestTime.anchor.set(.5),this.bestTime.x=-165,this.bestTime.y=85,this.addChild(this.bestTime),this.time=new s.Text("02:10:40",{font:"32px "+window.SECONDARY_FONT,fill:"#acdef7",stroke:"#0072ff",strokeThickness:1,align:"center"}),this.time.anchor.set(.5),this.time.x=-165,this.time.y=115,this.addChild(this.time),this.stars=[],this.coin=new s.Sprite.fromFrame("rebel_coin_6.png"),this.coin.anchor.y=.5,this.coin.position.set(100,100),this.addChild(this.coin),this.pickups=new s.extras.BitmapText("",{align:"center",font:"29px Star Jedi"}),this.pickups.pivot.y=21,this.pickups.position.set(158,100),this.addChild(this.pickups),this.stars=new l(this),this.stars.y=-90,this.addChild(this.stars),this.character=new s.Sprite,this.character.anchor.set(.5,1),this.character.x=-320,this.character.y=this.app.maxSize.height/2,this.addChildAt(this.character,0),this.character2=new s.Sprite,this.character2.anchor.set(.5,1),this.character2.x=-320,this.character2.y=this.app.maxSize.height/2,this.addChildAt(this.character2,1)};d.prototype=Object.create(o.prototype),d.prototype.update=function(){o.prototype.update.call(this),this.count+=1},d.prototype.updateData=function(){var t=n.instance.save,e=t.worlds[a.worldIndex].levels[a.levelIndex];this.name.text=a.globalLevelNumber,e.score>0?this.time.text=e.score:this.time.text=0;for(var i=0;i<this.stars.starsContainer.children.length;i++){var o=this.stars.starsContainer.children[i];o.visible=!1}for(var i=0;i<e.starRating;i++){var o=this.stars.stars[i];0===i?(o.texture=new s.Texture.fromFrame(this.stars.options.textureStar1),o.visible=!0):1===i?(o.texture=new s.Texture.fromFrame(this.stars.options.textureStar2),o.visible=!0):(o.texture=new s.Texture.fromFrame(this.stars.options.textureStar3),o.visible=!0)}e.numPickups&&e.totalPickups?(this.pickups.visible=!0,this.pickups.text=e.numPickups+"/"+e.totalPickups,this.coin.visible=!0):(this.pickups.visible=!1,this.coin.visible=!1);var r=h.getJson("levels"),l=r.worlds[a.worldIndex].levels[a.levelIndex];switch(l.character){case"ezra":this.character._texture=s.Texture.fromFrame(u[0]),this.character2._texture=s.Texture.fromFrame(u[0]);break;case"sabine":this.character._texture=s.Texture.fromFrame(u[1]),this.character2._texture=s.Texture.fromFrame(u[1]);break;case"zeb":this.character._texture=s.Texture.fromFrame(u[2]),this.character2._texture=s.Texture.fromFrame(u[2])}},d.prototype.onShow=function(){o.prototype.onShow.call(this);this.count=0,this.character.alpha=0,this.character2.alpha=0,this.updateData(),s.isWebGL&&(this.character2.filters=[new c]),TweenLite.to(this.character2,.7,{alpha:1}),TweenLite.delayedCall(1,this.noGlitch,[],this)},d.prototype.onShown=function(){},d.prototype.noGlitch=function(){this.character.alpha=1,TweenLite.to(this.character2,.7,{alpha:0}),this.character.filters=null},d.prototype.onHidden=function(){},d.prototype.onPress=function(t){this.app.overlayManager.hide(),this.app.screenManager.gotoScreenByID("prep")},d.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=d}),define("com/rebels/app/overlay/screens/GameFinished",["require","exports","module","PIXI","com/rebels/app/buttons/IconButton","starwars/overlays/Overlay"],function(t,e,i){var s=t("PIXI"),o=(t("com/rebels/app/buttons/IconButton"),t("starwars/overlays/Overlay")),r=function(t){o.call(this),this.app=t,this.title.text=translations.STR_OVERLAY_GAME_FINISHED_TITLE,this.currentScore=2e4,this.text=new s.Text(translations.STR_OVERLAY_GAME_FINISHED,{font:"24px "+window.MAIN_FONT,lineHeight:28,fill:"#ccffff",wordWrap:!0,wordWrapWidth:340}),this.text.anchor.set(.5),this.text.position.x=0,this.text.position.y=-80,this.bg.addChild(this.text),this.hasClose=!0};r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.onShow=function(){o.prototype.onShow.call(this),this.app.topMenu.setMode("nothing")},r.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=r}),define("starwars/events/EventPlanner",["require","exports","module"],function(t,e,i){function s(){this.eventMap={},this.properties={}}var o={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6};s.prototype.isHappening=function(t){t=t.toLowerCase();for(var e in this.properties)if(e.toLowerCase()==t)return!0;return!1},s.prototype.load=function(t){this.eventMap=t.events,this.dates=t.dates;for(var e=0;e<this.dates.length;e++)for(var i=this.dates[e],s=0;s<i.ids.length;s++){var o=i.ids[s];this.eventMap.hasOwnProperty(o)||(i.ids.splice(s,1),s--)}this.parseEvents()},s.prototype.parseEvents=function(){for(var t=0;t<this.dates.length;t++){var e=this.dates[t],i=!1;if("day"===e.type?i=this.checkDay(e.condition):"range"===e.type&&Object.keys(e.condition).length<2?i=this.checkSingleDate(e.condition.start):"range"===e.type&&2===Object.keys(e.condition).length&&(i=this.checkRange(e.condition.start,e.condition.end)),i)for(var s=0;s<e.ids.length;s++){var o=e.ids[s];this.properties[o]=this.eventMap[o]}}},s.prototype.checkSingleDate=function(t){var e=(t.split("/"),new Date(d1[2],d1[1]-1,d1[0]),new Date);return date===e},s.prototype.checkDay=function(t){t=t.toLowerCase();var e=(new Date).getDay();return o[t]===e},s.prototype.checkRange=function(t,e){var i=t.split("/"),s=e.split("/"),o=new Date(i[2],i[1]-1,i[0]),r=new Date(s[2],s[1]-1,s[0]),n=new Date;return r>=n&&n>=o},i.exports=new s}),define("APP_root",["require","exports","module","PIXI","AtlasData","fido/app/App","fido/system/Ticker","fido/system/Device","fido/sound/SoundBridge","starwars/loader/LoaderScreen","fido/utils/Utils","starwars/app/AlertPanelManager","com/rebels/app/screens/MapScreen","com/rebels/app/screens/TitleScreen","com/rebels/app/screens/GameScreen","com/rebels/app/screens/LevelScreen","com/rebels/app/screens/WorldScreen","com/rebels/app/screens/GamePrepScreen","com/rebels/app/shop/ShopSystem","fido/loader/Cache","com/rebels/app/system/GameSaveManager","fido/goals/Goals","starwars/app/TopMenu","starwars/OverlayManager","com/rebels/game/LevelManager","com/rebels/game/GameConfig","fido/app/Brim","libs/GBAPI","fido/goals/Trophies","fido/Flash","signals","starwars/overlays/Overlay","com/rebels/app/overlay/screens/PauseScreen","com/rebels/app/overlay/screens/GameoverScreen","com/rebels/app/overlay/screens/CompletionScreen","com/rebels/app/overlay/screens/ShopScreen","starwars/overlays/TutorialOverlay","starwars/overlays/menu/MenuOverlay","com/rebels/app/overlay/screens/LeaderboardScreen","starwars/overlays/AchievementScreen","starwars/overlays/NameOverlay","com/rebels/app/overlay/screens/LevelScreen","com/rebels/app/overlay/screens/HighScoreScreen","com/rebels/app/overlay/screens/GameFinished","starwars/HangerTokenUtils","starwars/events/EventPlanner","tracker","fido/system/LocalStorage","starwars/app/FontUtils","tracker"],function(t,e,i){var s=t("PIXI");window.PIXI=s,window.atlasData=t("AtlasData");var o=t("fido/app/App"),r=(t("fido/system/Ticker"),t("fido/system/Device")),n=t("fido/sound/SoundBridge"),a=t("starwars/loader/LoaderScreen"),h=t("fido/utils/Utils"),l=t("starwars/app/AlertPanelManager"),c=t("com/rebels/app/screens/MapScreen"),u=t("com/rebels/app/screens/TitleScreen"),d=t("com/rebels/app/screens/GameScreen"),p=t("com/rebels/app/screens/LevelScreen"),f=(t("com/rebels/app/screens/WorldScreen"),t("com/rebels/app/screens/GamePrepScreen")),m=t("com/rebels/app/shop/ShopSystem"),g=t("fido/loader/Cache"),v=t("com/rebels/app/system/GameSaveManager"),y=t("fido/goals/Goals"),_=t("starwars/app/TopMenu"),x=t("starwars/OverlayManager"),b=t("com/rebels/game/LevelManager"),w=t("com/rebels/game/GameConfig"),S=(t("fido/app/Brim"),t("libs/GBAPI")),T=t("fido/goals/Trophies"),C=t("fido/Flash"),P=t("signals"),A=t("starwars/overlays/Overlay"),M=t("com/rebels/app/overlay/screens/PauseScreen"),E=t("com/rebels/app/overlay/screens/GameoverScreen"),I=t("com/rebels/app/overlay/screens/CompletionScreen"),k=t("com/rebels/app/overlay/screens/ShopScreen"),L=t("starwars/overlays/TutorialOverlay"),R=t("starwars/overlays/menu/MenuOverlay"),O=t("com/rebels/app/overlay/screens/LeaderboardScreen"),B=t("starwars/overlays/AchievementScreen"),D=t("starwars/overlays/NameOverlay"),p=t("com/rebels/app/overlay/screens/LevelScreen"),F=t("com/rebels/app/overlay/screens/HighScoreScreen"),j=t("com/rebels/app/overlay/screens/GameFinished"),N=(t("starwars/HangerTokenUtils"),t("starwars/events/EventPlanner")),U=t("tracker"),z=t("fido/system/LocalStorage"),G=(t("starwars/app/FontUtils"),function(){window.activateOnStart=!1;var t={config:ASSET_URL+"json/config.json",stringsUrl:ASSET_URL+"strings/strings.json",loaderScreen:a};o.call(this,t),window.renderer=this.renderer,window.cheat=!1,this.safeSize={width:1130,height:640},this.maxSize={width:1130,height:640};var e=s.isWebGL?"":"@0.5x";this.loader.addPixiAssets([SHARED_ASSET_URL+"images/ui_elements_shared.json",SHARED_ASSET_URL+"images/ui_elements_rebels.json",SHARED_ASSET_URL+"images/aurek_besh.xml",SHARED_ASSET_URL+"images/jedi_font.xml",ASSET_URL+"img/game/tutorials/screen_1.png",ASSET_URL+"img/game/tutorials/screen_2.png",ASSET_URL+"img/game/tutorials/screen_3.png",ASSET_URL+"img/game/tutorials/screen_4.png",ASSET_URL+"img/game/tutorials/screen_5.png",ASSET_URL+"img/game/ui/rebels_counter.xml",ASSET_URL+"img/game/background_games.json",ASSET_URL+"img/game/highlights.json",ASSET_URL+"img/game/characters/ez.json",ASSET_URL+"img/game/characters/Sab.json",ASSET_URL+"img/game/characters/zeb.json",ASSET_URL+"img/game/characters/vader.json",ASSET_URL+"img/game/characters/stormtrooper.json",ASSET_URL+"img/game/characters/stormtrooper_busy.json",ASSET_URL+"img/game/explosion.json",ASSET_URL+"img/game/ui/ui_rebels.json",ASSET_URL+"img/game/game_assets"+e+".json",ASSET_URL+"img/game/world_1/world_1.json",ASSET_URL+"img/game/characters/characters.json",ASSET_URL+"img/game/world_1/far_bg.jpg",ASSET_URL+"img/game/ui/world_select_bg_1.jpg",ASSET_URL+"img/game/ui/world_select_bg_2.jpg",ASSET_URL+"img/game/ui/world_select_bg_3.jpg",ASSET_URL+"img/game/ui/world_select_bg_4.jpg",ASSET_URL+"img/game/world_1/bg_day_sky.jpg",ASSET_URL+"img/game/world_1/bg_city.png",ASSET_URL+"img/game/world_1/displace.jpg",ASSET_URL+"img/game/world_2/bg_city_night.png",ASSET_URL+"img/game/world_2/bg_night_sky.jpg",ASSET_URL+"img/game/world_2/displace.jpg",ASSET_URL+"img/game/world_2/vignette_multiply.png",ASSET_URL+"img/game/world_3/bg_garel_city.png",ASSET_URL+"img/game/world_3/bg_garel_sky.jpg",ASSET_URL+"img/game/world_3/bg_garel_cloud.png",ASSET_URL+"img/game/world_3/displace.jpg",ASSET_URL+"img/game/world_4/star_destroyer_bg.jpg",ASSET_URL+"img/game/world_4/tie_fighter_bg.png",ASSET_URL+"img/localised/team.png",ASSET_URL+"img/localised/tactics.png",ASSET_URL+"img/localised/rebels.png",ASSET_URL+"img/game/transition_bg.jpg"]),
this.loader.addJson(SHARED_ASSET_URL+"strings/rebels-goals-strings.json","goals_strings"),this.loader.addJson(SHARED_ASSET_URL+"json/rebels-goals.json","goals"),this.loader.addJson(SHARED_ASSET_URL+"json/events.json","events"),this.loader.addJson(ASSET_URL+"json/shop_data.json","shopData"),this.loader.addJson(ASSET_URL+"json/levels.json","levels"),this.loader.addJson(ASSET_URL+"json/alert_panels.json","alertPanels"),this.loader.addJson(ASSET_URL+"json/how_to_play.json","howToPlay"),this.onSoundReady=new P,r.instance.useSM2?this.onSoundReady.add(this.loadSFX,this):(n.music.addSound(ASSET_URL+"snd/music/garel","garel",{loop:!0,volume:.6}),n.music.addSound(ASSET_URL+"snd/music/lothal_day","lothal_day",{loop:!0,volume:.6}),n.music.addSound(ASSET_URL+"snd/music/lothal_night","lothal_night",{loop:!0,volume:.6}),n.music.addSound(ASSET_URL+"snd/music/rebelstheme","rebelstheme",{loop:!0,volume:.6}),n.music.addSound(ASSET_URL+"snd/music/stardestroyer","stardestroyer",{loop:!0,volume:.6}),n.music.addSound(ASSET_URL+"snd/music/menu","menu",{loop:!0,volume:.75}),this.loadSFX()),this.onReady.add(this.onAppReady,this),this.startup(),this.renderer.plugins.interaction.mouse.global.set(-999999)});G.prototype=Object.create(o.prototype),G.prototype.loadSFX=function(){var t=!r.instance.desktop;r.instance.useSM2&&(n.music.addSound(ASSET_URL+"snd/music/garel","garel",{loop:!0,volume:.6}),n.music.addSound(ASSET_URL+"snd/music/lothal_day","lothal_day",{loop:!0,volume:.6}),n.music.addSound(ASSET_URL+"snd/music/lothal_night","lothal_night",{loop:!0,volume:.6}),n.music.addSound(ASSET_URL+"snd/music/rebelstheme","rebelstheme",{loop:!0,volume:.6}),n.music.addSound(ASSET_URL+"snd/music/stardestroyer","stardestroyer",{loop:!0,volume:.6}),n.music.addSound(ASSET_URL+"snd/music/menu","menu",{loop:!0,volume:.75})),n.sfx.addSound(ASSET_URL+"snd/sfx/fail","fail1",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/failure","fail2",{volume:1}),n.sfx.addGroup(["fail1","fail2"],"fail"),n.sfx.addSound(ASSET_URL+"snd/sfx/victory","victory",{volume:.75}),n.sfx.addSound(ASSET_URL+"snd/sfx/selectbeep","selectbeep",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/door2","doorOpen",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/scanned","scan",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/floorbutton2","floorbutton",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/crateland","crateland",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/movplat","movingPlatform",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/characterselect","characterselect",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/tienoise","tienoise",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/cameradestroy","cameradestroy",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/willhemscream","willhemscream",{volume:.01}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/stars","stars",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/earned_achievement","earned_achievement",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/coin_collect_noise","coin_collect_noise",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/hanger_token","hanger_token",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/box_push_grind","box_push_grind",{volume:1,loop:!0}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/gridercrashnoise","gridercrashnoise",{volume:.6}),n.sfx.addSound(ASSET_URL+"snd/sfx/general/push_box_land","push_box_land",{volume:.3}),n.sfx.addGroup(["gridercrashnoise"],"crashnoise"),n.sfx.addSound(ASSET_URL+"snd/sfx/drone/caught_by_droid","caught_by_droid",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/ezra/ezra_jump1","jump1",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/ezra/ezra_jump2","jump2",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/ezra/ezra_jump3","jump3",{volume:1}),n.sfx.addGroup(["jump1","jump2","jump3"],"jump"),n.sfx.addSound(ASSET_URL+"snd/sfx/ezra/forcebutton","forcebutton",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/ezra/forceon","forceon",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/ezra/forceout2","forceout",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/ezra/forcecrate","forcecrate",{volume:1}),t||n.sfx.addSound(ASSET_URL+"snd/sfx/ezra/ezrarun","ezrarun",{volume:10,loop:!0}),n.sfx.addSound(ASSET_URL+"snd/sfx/zeb/Zeb_blockPush_2","Zeb_blockPush",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/zeb/zebjump","zebjump1",{volume:1}),t||n.sfx.addSound(ASSET_URL+"snd/sfx/zeb/zebrun","zebrun",{volume:1,loop:!0}),n.sfx.addSound(ASSET_URL+"snd/sfx/zeb/zebjump2","zebjump2",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/zeb/zebjump3","zebjump3",{volume:1}),n.sfx.addGroup(["zebjump1","zebjump2","zebjump3"],"zebjump"),n.sfx.addSound(ASSET_URL+"snd/sfx/sabine/sabjump","sabjump1",{volume:1}),t||n.sfx.addSound(ASSET_URL+"snd/sfx/sabine/sabrun","sabrun",{volume:4,loop:!0}),n.sfx.addSound(ASSET_URL+"snd/sfx/sabine/sabjump","sabjump2",{volume:1}),n.sfx.addGroup(["sabjump1","sabjump2"],"sabjump"),n.sfx.addSound(ASSET_URL+"snd/sfx/sabine/sabminethrow","sabminethrow",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/sabine/sabgrenexplode","sabgrenexplode",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/chopper/chopper2","chopper2",{volume:1}),n.sfx.addSound(ASSET_URL+"snd/sfx/chopper/chopper1","chopper1",{volume:1}),n.sfx.addGroup(["chopper1","chopper2"],"chopper")},G.prototype.onPreload=function(){var t=g.getJson("config").config;this.loader.addJson(t.GAME_LINKS_URL,"links")},G.prototype.onAppReady=function(){var t=g.getJson("config").config,e=g.getJson("links");for(var i in e)t[i]=e[i];this.id="Rebels",this.gameSaveManager=v.instance;var s=g.getJson("events");N.load(s),N.isHappening("TokenTuesday")&&(window.tuesday=!0),N.isHappening("WookieWednesday")&&(window.wednesday=!0);var t=g.getJson("config").config;window.gameMode=Number(t.GAME_MODE);var e=window.links;for(var i in e)t[i]=e[i];this.localStorage=new z("com.disney.rebels.game_19"),this.shopSystem=new m;var o=g.getJson("shopData");this.shopSystem.loadFromJson(o),this.shopSystem.updateFromSave(),m.instance=this.shopSystem,window.focus();var o=g.getJson("config");window.FLIP_LANGUAGE=o.config.FLIP_LANGUAGE,window.flipLanguage=o.config.FLIP_LANGUAGE,window.ENABLE_LEADERBOARDS=o.config.ENABLE_LEADERBOARDS,S.instance.setTargetFile(o.config.SCORE_PATH),S.instance.defaultGame=g.getJson("config").config.SCORE_ID,S.instance.setSharedKey("1234"),v.instance.loadGame(),y.instance=new y(o.config.REBELS_STORAGE_ID),y.instance.load(g.getJson("goals"),g.getJson("goals_strings").strings),T.instance=new T({goal_system:y.instance}),T.instance.init(),this.overlayManager=new x(this),this.titleScreen=new u(this),this.gameScreen=new d(this),this.mapScreen=new c(this),this.prepScreen=new f(this),this.screenManager.addScreen(this.titleScreen,"title"),this.screenManager.addScreen(this.prepScreen,"prep"),this.screenManager.addScreen(this.gameScreen,"game"),this.screenManager.addScreen(this.mapScreen,"map"),this.defaultTransition=new DigitalTransition,this.overlayManager.overlayScreen=new A(app),this.overlayManager.pauseScreen=new M(app),this.overlayManager.gameoverScreen=new E(app),this.overlayManager.completionScreen=new I(app),this.overlayManager.tutorialScreen=new L(app),this.overlayManager.leaderboardScreen=new O(app),this.overlayManager.shopScreen=new k(app),this.overlayManager.achievementScreen=new B(app),this.overlayManager.submitScreen=new D(app),this.overlayManager.levelScreen=new p(app),this.overlayManager.highScoreScreen=new F(app),this.overlayManager.gameFinished=new j(app),this.overlayManager.menuOverlay=new R(app),this.overlayManager.addScreen(this.overlayManager.achievementScreen,"achievements"),this.overlayManager.addScreen(this.overlayManager.leaderboardScreen,"scores"),this.overlayManager.addScreen(this.overlayManager.pauseScreen,"pause"),this.overlayManager.addScreen(this.overlayManager.completionScreen,"completion"),this.overlayManager.addScreen(this.overlayManager.gameoverScreen,"gameover"),this.overlayManager.addScreen(this.overlayManager.tutorialScreen,"tutorial"),this.overlayManager.addScreen(this.overlayManager.shopScreen,"shop"),this.overlayManager.addScreen(this.overlayManager.submitScreen,"submit"),this.overlayManager.addScreen(this.overlayManager.levelScreen,"level"),this.overlayManager.addScreen(this.overlayManager.highScoreScreen,"highscore"),this.overlayManager.addScreen(this.overlayManager.gameFinished,"gameFinished"),this.overlayManager.addScreen(this.overlayManager.menuOverlay,"menu"),this.stage.addChild(this.overlayManager.view),this.overlayManager.submitScreen.hasClose=!1,this.overlayManager.submitScreen.submitButton.text.text=translations.STR_OVERLAY_SUBMIT_INFOS,this.overlayManager.submitScreen.submitButton.onPress.add(this.onScoreSubmited,this),this.alertPanelManager=new l(this,"com.disney.rebels.panels",!0),this.alertPanelManager.load(g.getJson("alertPanels")),this.stage.addChild(this.alertPanelManager.view),this.topMenu=new _(this),this.topMenu.show(),this.stage.addChild(this.topMenu),b.init(0,w),"true"===h.get_query("cheat")&&(window.cheat=!0),"test"===h.get_query("fastplay")?this.screenManager.gotoScreenByID("test"):"true"===h.get_query("fastplay")?this.screenManager.gotoScreenByID("prep"):"game"===h.get_query("fastplay")?this.screenManager.gotoScreenByID("game"):this.screenManager.gotoScreenByID("title"),this.flashEffect=new C(1136,640),this.stage.addChild(this.flashEffect),U.init(t.LOCALE,"rebels_tt_game"),U.trackAction("direct_load"),this.resize(this.w,this.h)},G.prototype.onScoreSubmited=function(){if(!this.savingScore){this.savingScore=!0,t("tracker").trackAction("lb_name_entry");var e=this.gameSaveManager.save,i=e.worlds.reduce(function(t,e){return e.levels.reduce(function(t,e){return t+e.score},t)},0),s=g.getJson("config").config.SCORE_ID;S.instance.sendScore({game:s,name:this.overlayManager.submitScreen.name,score:String(i)},this.onScoreSaved.bind(this)),this.overlayManager.leaderboardScreen.backToCompletionScreen=!0}},G.prototype.onScoreSaved=function(t){this.savingScore=!1,this.overlayManager.gotoScreenByID("scores")},G.prototype.flash=function(){this.flashEffect.flash(0,1)},G.prototype.updateGameConfig=function(){w.levels=this.getShopStates()},G.prototype.getShopStates=function(){var t=this.shopSystem.parse(this.parseFunction);return t},G.prototype.parseFunction=function(t,e,i){for(var s={},o=0;o<e.length;o++){var r=e[o],n=r.getBoughtItems(),a=n[n.length-1];if(r.name&&(groupName=h.toCamelCase(r.name),s[groupName]=0,a)){var l=a.id,c=l.replace(/^\D+/g,"");s[r.name]=c?parseInt(c):1}}return s},G.prototype.resize=function(t,e){this.orientationManager&&this.orientationManager.check(t,e),this.w=t,this.h=e;var i=1;r.instance.isMobile&&(i=window.devicePixelRatio?window.devicePixelRatio:window.screen.deviceXDPI/window.screen.logicalXDPI),i>2&&(i=2);var s=t/this.safeSize.width<e/this.safeSize.height?t/this.safeSize.width:e/this.safeSize.height,o=Math.min(this.maxSize.width*s,t),n=Math.min(this.maxSize.height*s,e);s>1&&(s=1);var a=Math.min(this.maxSize.width*s,t),h=Math.min(this.maxSize.height*s,e);this.screenManager.resize(a/s,h/s),this.overlayManager&&(this.overlayManager.resize(a/s,h/s),this.overlayManager.view.scale.set(s*i)),this.alertPanelManager&&(this.alertPanelManager.resize(a/s,h/s),s*i>=1?(this.alertPanelManager.alertPanel.setPosition(),this.alertPanelManager.view.scale.set(s*i)):this.alertPanelManager.alertPanel.setPosition(s*i)),this.topMenu&&(this.topMenu.scale.set(s*i),this.topMenu.resize(a/s,h/s)),this.screenManager.container.scale.set(s*i),this.renderer.resize(a*i|0,h*i|0),this.view.style.width=o+"px",this.view.style.height=n+"px",this.view.style.left=t/2-o/2+"px",this.view.style.top=e/2-n/2+"px"},i.exports=G});var Stats=function(){var t=Date.now(),e=t,i=0,s=1/0,o=0,r=0,n=1/0,a=0,h=0,l=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(t){t.preventDefault(),y(++l%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var u=document.createElement("div");u.id="fps",u.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(u);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",u.appendChild(d);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",u.appendChild(p);74>p.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(f)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(m);var g=document.createElement("div");g.id="msText",g.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",g.innerHTML="MS",m.appendChild(g);var v=document.createElement("div");for(v.id="msGraph",v.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(v);74>v.children.length;)f=document.createElement("span"),f.style.cssText="width:1px;height:30px;float:left;background-color:#131",v.appendChild(f);var y=function(t){switch(l=t){case 0:u.style.display="block",m.style.display="none";break;case 1:u.style.display="none",m.style.display="block"}};return{REVISION:11,domElement:c,setMode:y,begin:function(){t=Date.now()},end:function(){var l=Date.now();i=l-t,s=Math.min(s,i),o=Math.max(o,i),g.textContent=i+" MS ("+s+"-"+o+")";var c=Math.min(30,30-30*(i/200));return v.appendChild(v.firstChild).style.height=c+"px",h++,l>e+1e3&&(r=Math.round(1e3*h/(l-e)),n=Math.min(n,r),a=Math.max(a,r),d.textContent=r+" FPS ("+n+"-"+a+")",c=Math.min(30,30-30*(r/100)),p.appendChild(p.firstChild).style.height=c+"px",e=l,h=0),l},update:function(){t=this.end()}}};define("stats",function(){}),trackData=[{level:"DM_world1_level1",floor:[327,552,6.545,1.7,0,0,419.1,435.05,3.035,.512,-25.494,0,564.75,373.2,.406,.531,0,0,565,320,11.3,6.4,0,4,602.95,402.1,.55,.296,0,0,637.7,440.75,.329,1.247,0,0,991.45,351.3,.633,1.148,14.999,0,1020.05,517.55,2.198,2.71,0,0,1053.9,328.25,1.56,.812,0,0,1103.8,99.8,.614,1.345,0,0],detail:[],active:[-2,-53,"FatBg",{url:"img/game/world_1/scenes/lothal_training_level1_midground.png",rotation:0},604.3,207,"MovableBlock",{type:"bridge",height:360,frame:"level_bridge_bridge.png",mass:75,rotation:180,width:30},1085,241,"Exit",{rotation:0},90.5,465.55,"Sabine",{rotation:0},33.5,469.65,"Zeb",{rotation:0},146.5,466,"Ezra",{rotation:0},238.6,413.4,"Pickup",{pickupType:"cell",rotation:0},410.25,141.5,"Pickup",{pickupType:"cell",rotation:0},926.15,231.5,"Pickup",{pickupType:"cell",rotation:0},790.3,291,"Pickup",{pickupType:"cell",rotation:0},469,308,"Pickup",{pickupType:"cell",rotation:0},791.65,144,"HangerCoin",{pickupType:"cell",rotation:0},-3,-62,"Vignette",{rotation:0},314.5,207.65,"Copy",{signal:"walk",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LEVEL_1_2"},314.5,207.65,"Copy",{signal:"swap",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LEVEL_1_3"},314.5,207.65,"Copy",{signal:"blockMove",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LEVEL_1_4"},314.5,207.65,"Copy",{signal:"exit",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LEVEL_1_5"},-2,200,"FatBg",{url:"img/game/world_1/scenes/lothal_training_level1_foreground.png",rotation:0},122.1,277,"Light",{frame:"aerial_light.png",rotation:0},1102,216,"Light",{frame:"exit_light_green.png",rotation:0},1107,167,"Light",{frame:"exit_light_flair.png",rotation:0}]},{level:"DM_world1_level2",floor:[213.4,431.45,4.281,1.19,0,0,420.35,112.3,8.514,.546,0,0,565,320,11.3,6.4,0,4,612.05,183.25,4.522,.496,19.002,0,624.05,502.55,4.566,1.19,19.003,0,973.4,220.5,3.131,1.19,0,0,984.45,577.5,2.911,1.19,0,0],detail:[],active:[-3,-62,"FatBg",{url:"img/game/world_1/scenes/level_explodingdoors_background.png",rotation:0},1085,473.95,"Exit",{rotation:0},34.5,372.45,"Ezra",{rotation:0},100.65,373.1,"Zeb",{rotation:0},317.45,264.95,"MovableBlock",{height:300,"static":!0,breakable:!0,frame:"exploding_wall_02.png",rotation:0,width:41},672.45,343.95,"MovableBlock",{height:300,"static":!0,breakable:!0,frame:"exploding_wall_02.png",rotation:0,width:41},880.4,402,"MovableBlock",{height:300,"static":!0,breakable:!0,frame:"exploding_wall_02.png",rotation:0,width:41},162.7,372,"Sabine",{rotation:0},-3,-62,"FatBg",{url:"img/game/world_1/scenes/level_explodingdoors_midground.png",rotation:0},542.6,240,"Pickup",{pickupType:"cell",rotation:0},770.2,437.35,"Pickup",{pickupType:"cell",rotation:0},1079,324.55,"Pickup",{pickupType:"cell",rotation:0},770.2,312.55,"Pickup",{pickupType:"cell",rotation:0},542.6,351.55,"Pickup",{pickupType:"cell",rotation:0},771.55,375.9,"HangerCoin",{pickupType:"cell",rotation:0},937.15,214.5,"Smoke",{type:"big",rotation:59.99946594238281},-3,-62,"Vignette",{rotation:0},-3,-62,"FatBg",{url:"img/game/world_1/scenes/level_explodingdoors_add.png",blend:"ADD",rotation:0},1102,445.8,"Light",{frame:"exit_light_green.png",rotation:0},1107,396.8,"Light",{frame:"exit_light_flair.png",rotation:0},287,174,"Copy",{signal:"bomb",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LEVEL_2_1"}]},{level:"DM_world1_level3",floor:[289.5,390,1.241,1.241,0,2,356.3,391.95,1.338,1.28,0,0,423.2,388.25,1.206,1.206,0,2,564.75,540.9,11.299,1.7,0,0,565,320,11.3,6.4,0,4,592.05,421.2,7.21,.815,0,0,691.45,313.9,1.279,1.279,0,2,755.3,352.25,2.54,.851,0,0,756.6,314.2,1.293,1.28,0,0,822,311.45,1.23,1.23,0,2],detail:[],active:[-3,-62,"FatBg",{url:"img/game/world_1/scenes/w1_l3_rooftop_midground.png",rotation:0},1082,407.95,"Exit",{rotation:0},34.5,456.45,"Ezra",{rotation:0},90.5,456,"Sabine",{rotation:0},170.4,448.1,"Zeb",{rotation:0},-3,-62,"FatBg",{url:"img/game/world_1/scenes/w1_l3_rooftop_foreground.png",rotation:0},-3,-62,"Vignette",{rotation:0},-3,-62,"FatBg",{url:"img/game/world_1/scenes/w1_l3_rooftop_add.png",blend:"ADD",rotation:0},1102,383,"Light",{frame:"exit_light_green.png",rotation:0},1107,334,"Light",{frame:"exit_light_flair.png",rotation:0},602.45,190.95,"Light",{frame:"aerial_light.png",rotation:0},116.3,530.05,"Light",{frame:"aerial_light.png",rotation:0},1022.35,522.6,"Light",{frame:"aerial_light.png",rotation:0},754.95,222.8,"Pickup",{pickupType:"cell",rotation:0},551.6,346.95,"Pickup",{pickupType:"cell",rotation:0},917.6,354.95,"Pickup",{pickupType:"cell",rotation:0},350.4,296.85,"Pickup",{pickupType:"cell",rotation:0},752.85,65.95,"HangerCoin",{pickupType:"cell",rotation:0},999.9,151.8,"Pickup",{pickupType:"cell",rotation:0},545.45,493.9,"Copy",{signal:"someoneJumpedOnZeb",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LEVEL_3_2"},293.5,180,"SentorTutorial",{height:200,name:"Sensor1",pickupType:"cell",rotation:0,width:8,onlyOnce:!1}]},{level:"DM_world1_level4",floor:[50.65,232.55,1.036,.18,0,0,359.5,237.1,.638,.638,0,2,414.75,547.95,8.295,1.7,0,0,432,346.85,2.089,1.62,0,0,437.2,445.45,2.262,.35,0,6,523.5,255.3,3.919,.364,0,0,539.1,228.4,3.607,.464,0,0,565,320,11.3,6.4,0,4,849.3,228.4,.886,.464,0,0,865,257.8,1.203,.414,0,0,873.1,495.35,1.675,1.19,-18.812,0,893.4,237.1,.638,.638,0,2,1034.8,471.5,2.047,1.19,0,0,1097.25,252,.784,.51,-90,0,1121,208.25,.986,.986,-90,2,1146.3,225.25,1.322,.51,-90,0],detail:[],active:[-3,-60,"FatBg",{url:"img/game/world_1/scenes/w1_l4_sewing_midground.png",rotation:0},669.8,450.85,"FlatButtonToggle",{rotation:0,name:"lift"},1102,347,"Light",{frame:"exit_light_green.png",rotation:0},1107,298,"Light",{frame:"exit_light_flair.png",rotation:0},-3,-60,"FatBg",{url:"img/game/world_1/scenes/w1_l4_sewing_add.png",blend:"ADD",rotation:0},89.5,466,"Sabine",{rotation:0},44.25,465.5,"Zeb",{rotation:0},150.05,464.45,"Ezra",{rotation:0},1083,374,"Exit",{rotation:0},249.65,351.2,"MovingPlatform",{mode:"toggle",name:"lift",y2:110.9,x:0,y:-110.9,rotation:0,x2:0},-3,-60,"FatBg",{url:"img/game/world_1/scenes/w1_l4_sewing_foreground.png",rotation:0},190.2,610.65,"Smoke",{type:"big",rotation:59.99946594238281},-3,-62,"Vignette",{rotation:0},1031,134,"Pickup",{pickupType:"cell",rotation:0},660.95,172,"Pickup",{pickupType:"cell",rotation:0},762.2,253.45,"Pickup",{pickupType:"cell",rotation:0},455.95,173,"Pickup",{pickupType:"cell",rotation:0},1083.45,132.95,"HangerCoin",{pickupType:"cell",rotation:0},52.25,161,"Pickup",{pickupType:"cell",rotation:0},1033.3,226.05,"Light",{frame:"aerial_light.png",rotation:0},75.5,220.5,"Light",{frame:"aerial_light.png",rotation:0},370.3,211.5,"Copy",{signal:"crawl",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LEVEL_4_2"}]},{level:"DM_world1_level5",floor:[161.1,154.05,3.195,3.279,0,0,360.95,105.75,1.098,2.313,0,0,460.2,153.95,1.098,3.279,0,0,565,320,11.3,6.4,0,4,565.5,537.5,11.313,1.851,0,0,906.15,439.45,4.5,1.174,0,0,1057.2,387.2,1.435,1.464,0,0],detail:[],active:[-3,-66,"FatBg",{url:"img/game/world_1/scenes/w1_l5_force_background.png",rotation:0},-3,-62,"FatBg",{url:"img/game/world_1/scenes/w1_l5_force_midground.png",rotation:0},618.9,433.5,"FlatButtonToggle",{rotation:0},481,381,"Door",{rotation:-.0008697509765625},104.5,445,"Sabine",{rotation:0},42.35,443.15,"Zeb",{rotation:0},536.95,411.6,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},167.5,445.45,"Ezra",{rotation:0},1083.15,266.15,"Exit",{rotation:0},-3,-62,"FatBg",{url:"img/game/world_1/scenes/w1_l5_force_foreground.png",rotation:0},897.6,334.55,"Pickup",{pickupType:"cell",rotation:0},362.9,251.45,"Pickup",{pickupType:"cell",rotation:0},626.6,114,"Pickup",{pickupType:"cell",rotation:0},362.9,406.75,"Pickup",{pickupType:"cell",rotation:0},732.1,334.55,"Pickup",{pickupType:"cell",rotation:0},556.8,116.95,"HangerCoin",{pickupType:"cell",rotation:0},-3,-62,"Vignette",{rotation:0},-3,-62,"FatBg",{url:"img/game/world_1/scenes/w1_l5_force_add.png",blend:"ADD",rotation:0},1102,240,"Light",{frame:"exit_light_green.png",rotation:0},1107,191,"Light",{frame:"exit_light_flair.png",rotation:0},713.7,191.95,"Light",{frame:"aerial_light.png",rotation:0},306.15,485.25,"Light",{frame:"aerial_light.png",rotation:0},418.45,214.4,"Copy",{signal:"blockMoveWithForce",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LEVEL_5_2"},418.45,214.4,"Copy",{signal:"forceItem",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LEVEL_5_3"},418.45,214.4,"Copy",{signal:"",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LEVEL_5_4"}]},{level:"DM_world2_level1",floor:[61.25,420.9,1.228,1.699,0,0,221.8,286.1,.459,.459,0,2,324.95,218.9,.459,.459,0,2,324.95,243.05,.459,.499,0,0,429.1,23.25,.459,.459,0,2,458.75,285.2,4.74,.441,0,0,458.75,251.6,2.676,1.113,0,0,565,320,11.3,6.4,0,4,565.5,541.45,11.313,1.69,0,0,665.2,307.9,9.323,.421,0,0,712.75,256.5,2.584,.763,10.277,0,767.95,53.4,7.236,.63,0,0,780.85,31.8,7.075,.63,0,0,835.95,282.8,.202,.775,1.013,0,1031.2,189.2,1.998,2.751,.002,0],detail:[],active:[245.75,391.95,"Door",{rotation:0,name:"forceme"},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l2_corridor_background.png",rotation:0},616,85.7,"LazerBarrier",{rotation:0,name:"laser1"},854.95,326.95,"LazerBarrier",{rotation:0,name:"laser1"},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l2_corridor_midground.png",rotation:0},97,401,"ForceSwitch",{height:64,name:"forceme",shape:1,frameUsed:"barrel_force_on.png",frameActive:"barrel_force_on.png",frame:"barrel_force_off.png",mass:50,rotation:0,force:!0,width:64},711.65,457,"Sabine",{rotation:0},508.15,456.5,"Zeb",{rotation:0},886.6,274.75,"FlatButtonToggle",{rotation:0,name:"laser1"},493.5,163.2,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},342.15,457.45,"Ezra",{rotation:0},926.35,402.6,"Pickup",{pickupType:"cell",rotation:0},728.05,172.5,"Pickup",{pickupType:"cell",rotation:0},62.85,99,"Pickup",{pickupType:"cell",rotation:0},64,272.85,"Pickup",{pickupType:"cell",rotation:0},359.9,150.5,"Pickup",{pickupType:"cell",rotation:0},865.8,168.35,"HangerCoin",{pickupType:"cell",rotation:0},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l2_corridor_foreground.png",rotation:0},1085,407.95,"Exit",{rotation:0},-3,-62,"Vignette",{rotation:0},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l2_corridor_add.png",blend:"ADD",rotation:0},1102,386,"Light",{frame:"exit_light_green.png",rotation:0},1107,337,"Light",{frame:"exit_light_flair.png",rotation:0},351.05,537.7,"Copy",{signal:"buttonSwitched",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LOTHAL_LEVEL_1_2"},563.5,519,"Copy",{signal:"w2l1t1",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LOTHAL_LEVEL_1_3"},326.5,367,"Copy",{signal:"w2l1t2",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LOTHAL_LEVEL_1_4"},788.65,317.85,"Copy",{signal:"moveBarrel",type:0,rotation:0,active:!0,name:"STR_TUTORIAL_LOTHAL_LEVEL_1_5"},106.2,313.15,"SentorTutorial",{height:200,rotation:0,width:8,name:"Sensor1",pickupType:"cell"},328.9,106.2,"SentorTutorial",{name:"Sensor2",rotation:90,pickupType:"cell"}]},{level:"DM_world2_level2",floor:[215.35,181,1.597,.65,0,0,402.85,454.45,2.07,.35,0,6,402.95,386.45,1.704,1.01,0,0,554.05,344.6,4.729,.415,0,0,565,320,11.3,6.4,0,4,566.7,531.45,11.334,1.19,0,0,598.85,98.9,3.815,2.249,0,0,702.85,454.45,2.07,.35,0,6,703,387,1.743,.999,0,0],detail:[],active:[0,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l2_droid_background.png",rotation:0},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l2_droid_midground.png",rotation:0},903.35,460.95,"FlatButtonToggle",{rotation:0,name:"puzPlat"},229.5,471,"Sabine",{rotation:0},179.5,473.9,"Zeb",{rotation:0},265.5,471.45,"Ezra",{rotation:0},203.2,114.5,"MovableBlock",{frame:"crate_heavy_small.png",height:64,rotation:0,width:64},68.5,309.3,"MovingPlatform",{mode:"toggle",name:"puzPlat",y2:168.65,x:0,y:-168.65,rotation:0,x2:0},1086,426,"Exit",{rotation:0},340.5,246.65,"Drone",{height:64,rotation:0,width:64},546.45,290.85,"Pickup",{pickupType:"cell",rotation:0},551.15,419.4,"Pickup",{pickupType:"cell",rotation:0},353.05,193.35,"Pickup",{pickupType:"cell",rotation:0},684.95,290.85,"Pickup",{pickupType:"cell",rotation:0},915.9,195.5,"Pickup",{pickupType:"cell",rotation:0},977.35,195.45,"HangerCoin",{pickupType:"cell",rotation:0},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l2_droid_foreground.png",rotation:0},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l2_droid_add.png",blend:"ADD",rotation:0},1104,405,"Light",{frame:"exit_light_green.png",rotation:0},1109,356,"Light",{frame:"exit_light_flair.png",rotation:0},797.45,153.95,"Light",{frame:"aerial_light.png",rotation:0}]},{level:"DM_world2_level3",floor:[215.35,270.5,1.597,1.921,0,0,220.45,552.5,4.415,1.551,0,0,435.05,191.2,2.819,.334,0,0,472.65,156.95,1.309,.35,0,6,472.8,64.6,.945,1.495,0,0,528.65,296.65,1.349,.35,0,6,528.8,231.3,.945,.956,0,0,534.1,340.35,4.803,.524,0,0,542.75,644.65,2.79,.409,0,0,565,320,11.3,6.4,0,4,664.9,597.85,.346,1.344,0,0,682.1,530.7,.69,.69,0,2,716.65,82.1,1.154,1.845,0,0,861.1,484.85,.69,.69,0,2,907.8,563.1,4.514,1.338,0,0,995.55,477.3,2.691,.539,0,0,1089.05,283.65,.84,.616,0,0],detail:[],active:[-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l2_droid_background.png",rotation:0},716.95,431.2,"Door",{rotation:0,name:"door"},355.4,299.75,"FlatButtonToggle",{rotation:0,name:"puzPlat"},716.65,299.75,"FlatButtonToggle",{rotation:0,name:"door"},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l3_crawl_midground.png",rotation:0},477.1,592.2,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},475.8,528.2,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},542.4,592.2,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},545,528.2,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},507.45,464.2,"MovableBlock",{frame:"crate_heavy_small.png",height:64,rotation:0,width:64},578.95,464.2,"MovableBlock",{frame:"crate_heavy_small.png",height:64,rotation:0,width:64},611.3,592.2,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},612.6,528.2,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},506.15,399.2,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},1089.4,220.85,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},225.5,173.1,"Sabine",{rotation:0},165.5,174,"Zeb",{rotation:0},311.5,173.55,"Ezra",{rotation:0},586.95,398.2,"MovableBlock",{frame:"crate_heavy_small.png",height:64,rotation:0,width:64},1085,401.55,"Exit",{rotation:0},68.5,334.7,"MovingPlatform",{mode:"toggle",name:"puzPlat",y2:150.25,x:0,y:-150.25,rotation:0,x2:0},207,431.75,"Pickup",{pickupType:"cell",rotation:0},376.6,431.75,"Pickup",{pickupType:"cell",rotation:0},659.3,431.75,"Pickup",{pickupType:"cell",rotation:0},923.6,192.5,"Pickup",{pickupType:"cell",rotation:0},617.5,81.05,"Pickup",{pickupType:"cell",rotation:0},991.15,192,"HangerCoin",{pickupType:"cell",rotation:0},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l3_crawl_add.png",blend:"ADD",rotation:0},1104,379,"Light",{frame:"exit_light_green.png",rotation:0},1109,330,"Light",{frame:"exit_light_flair.png",rotation:0}]},{level:"DM_world2_level4",floor:[119.45,473.65,2.387,.613,0,0,134.3,95.65,2.684,2.644,0,0,453.15,81.45,1.134,2.361,0,0,489.15,372.45,3.147,.331,0,0,520.9,208.15,2.486,.394,0,0,565,320,11.3,6.4,0,4,565.65,559.3,11.313,1.415,0,0,955.25,201,3.494,.457,0,0,1041.4,288.5,1.77,1.43,0,0,1111.35,175,.734,.457,0,0,1139.9,9.05,.279,4.085,0,0],detail:[],active:[-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l4_secretdoor_background.png",rotation:0},454.85,291.85,"Door",{rotation:0,name:"trigger"},995.9,424.55,"Door",{rotation:0,name:"end"},332.45,198.2,"Door",{rotation:90,name:"door3"},577,176,"FlatButtonToggle",{rotation:0,name:"end"},856,475,"FlatButtonToggle",{rotation:0,name:"trigger"},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l4_secretdoor_midground.png",rotation:0},55.7,442.55,"Zeb",{rotation:0},107.7,443.5,"Ezra",{rotation:0},394.9,455.2,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},1084,438,"Exit",{rotation:0},583.9,455.2,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},482.85,119.2,"ForceSwitch",{height:64,name:"door3",shape:1,frameUsed:"barrel_force_on.png",frameActive:"barrel_force_on.png",frame:"barrel_force_off.png",mass:50,rotation:0,force:!0,width:64},577.65,323.9,"MovableBlock",{frame:"crate_heavy_small.png",height:64,rotation:0,width:64},157.2,443.05,"Sabine",{rotation:0},713.5,333.05,"MovingPlatform",{mode:"toggle",name:"trigger",y2:151.15,x:0,y:-151.15,rotation:0,x2:0},519.75,298.55,"Pickup",{pickupType:"cell",rotation:0},330.7,153.2,"Pickup",{pickupType:"cell",rotation:0},579.9,121.2,"Pickup",{pickupType:"cell",rotation:0},1006.25,121.2,"Pickup",{pickupType:"cell",rotation:0},493.1,444.6,"Pickup",{pickupType:"cell",rotation:0},332.55,105.15,"HangerCoin",{pickupType:"cell",rotation:0},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l4_secretdoor_foreground.png",rotation:0},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l4_secretdoor_add.png",blend:"ADD",rotation:0},1104,419,"Light",{frame:"exit_light_green.png",rotation:0},1109,370,"Light",{frame:"exit_light_flair.png",rotation:0}]},{level:"DM_world2_level5",floor:[5.15,499.85,.942,.862,42.928,0,71.3,164.1,1.413,.202,0,0,160.6,287.65,1.633,.302,0,0,163.05,491.95,.15,.908,0,0,196.1,296.4,2.345,.147,0,0,224.25,492.4,.189,1.392,-57.002,0,276.9,284.55,.73,.074,13.212,0,304.15,563.95,6.092,1.751,0,0,414.2,124.1,3.332,.202,0,0,494.5,420.2,2.284,1.242,0,0,557.5,358,1.024,.908,0,0,565,320,11.3,6.4,0,4,797.85,399.5,1.031,.908,0,0,938.65,524.05,3.848,2.52,0,0,961.15,190.6,3.4,.422,0,0,1047.85,82.05,1.666,1.885,0,0],detail:[],active:[-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l5_longjump_background.png",rotation:0},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l5_longjump_midground.png",rotation:0},1085,348.95,"Exit",{
rotation:0},98.85,464.65,"FlatButtonToggle",{rotation:0,name:"lift"},255.15,475.4,"Ezra",{rotation:0},296.5,476.1,"Sabine",{rotation:0},195.4,239.45,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},678.4,164.4,"Trooper",{mode:"walk",rotation:0},340,474.65,"Zeb",{rotation:0},86.65,124.4,"Pickup",{pickupType:"cell",rotation:0},861.15,143.2,"Pickup",{pickupType:"cell",rotation:0},355.15,87.7,"Pickup",{pickupType:"cell",rotation:0},539.1,87.7,"Pickup",{pickupType:"cell",rotation:0},796.9,277.55,"Pickup",{pickupType:"cell",rotation:0},926.25,140.95,"HangerCoin",{pickupType:"cell",rotation:0},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l5_longjump_foreground.png",rotation:0},-3,-62,"FatBg",{url:"img/game/world_2/scenes/w2_l5_longjump_add.png",blend:"ADD",rotation:0},1104,329,"Light",{frame:"exit_light_green.png",rotation:0},1109,280,"Light",{frame:"exit_light_flair.png",rotation:0},678.55,477,"MovingPlatform",{mode:"toggle",name:"lift",y2:269.9,x:0,y:-269.9,rotation:0,x2:0}]},{level:"DM_world3_level1",floor:[18.7,318.95,.372,1.052,0,0,119.4,496.1,2.386,2.695,0,0,147.3,52,2.945,1.223,0,0,147.4,254.9,2.945,.275,0,0,315.85,612.15,1.97,.409,0,0,385.8,559.6,.57,1.26,0,0,565,320,11.3,6.4,0,4,956.1,570.1,3.49,1.19,0,0],detail:[],active:[124.05,394.05,"MovableBlock",{height:300,"static":!0,breakable:!0,frame:"exploding_wall_02.png",rotation:0,width:41},386.55,125.75,"Drone",{height:64,rotation:0,width:64},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l1_conveyors_midground.png",rotation:0},249.7,177.15,"Door",{rotation:0,name:"door"},110.8,240.95,"Sabine",{rotation:0},43.35,240.45,"Zeb",{rotation:0},197.7,329,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},328.7,371.35,"ConvayorBelt",{right:!0,rotation:0},495.3,328.2,"ConvayorBelt",{right:!0,rotation:-29.9998779296875},617.1,434.45,"ConvayorBelt",{capRight:!0,rotation:0,capLeft:!0,name:"conveyor3"},447.3,486.5,"ConvayorBelt",{capRight:!0,rotation:0,capLeft:!0,name:"conveyor4"},298.4,582.9,"FlatButtonToggle",{rotation:0,name:"door"},654.95,262.55,"ConvayorBelt",{right:!0,rotation:-15.001373291015625},786.9,382.4,"ConvayorBelt",{capRight:!0,rotation:0,capLeft:!0,name:"conveyor2"},956.7,330.35,"ConvayorBelt",{capRight:!0,rotation:0,capLeft:!0,name:"conveyor1"},828.35,216.15,"ConvayorBelt",{capRight:!0,rotation:-15.001373291015625,name:"conveyorRightEnd",right:!0},171.35,239.4,"Ezra",{rotation:0},1084,454.7,"Exit",{rotation:0},788.6,343.05,"Pickup",{pickupType:"cell",rotation:0},618.2,396.65,"Pickup",{pickupType:"cell",rotation:0},450.15,449.7,"Pickup",{pickupType:"cell",rotation:0},72.15,315,"Pickup",{pickupType:"cell",rotation:0},831.6,481.7,"Pickup",{pickupType:"cell",rotation:0},1101.45,108.7,"HangerCoin",{pickupType:"cell",rotation:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l1_conveyors_add.png",blend:"ADD",rotation:0},1104,432,"Light",{frame:"exit_light_green.png",rotation:0},1109,383,"Light",{frame:"exit_light_flair.png",rotation:0}]},{level:"DM_world3_level2",floor:[66.65,371.25,1.331,.928,0,0,80.25,432.4,1.615,1.566,0,0,84,175.4,1.68,.492,0,0,133.25,352.55,.553,.553,0,2,200.35,213.35,1.122,.289,44.999,0,211.45,432.3,4.235,.448,0,0,280.5,188.2,3.613,.392,17.492,0,291.75,567.8,5.848,1.263,0,0,293.65,479.65,2.654,.5,0,6,433.95,252.6,4.09,.22,0,0,474.05,240.85,.433,.327,4.212,0,494.35,240.55,.433,.327,-5.026,0,561.75,224.9,1.256,.327,-15.261,0,565,320,11.3,6.4,0,4,642.45,632.35,1.45,.173,0,0,793.3,526.15,1.76,.448,0,0,808.75,247.1,3.821,.332,0,0,809.7,215.8,3.83,.3,2.472,0,917.65,586.8,4.247,.884,0,0,998.8,236.1,.541,.541,0,2,1042.65,394.3,1.747,.406,0,0,1047.8,375.2,1.809,.327,-8.314,0,1139.1,341.55,1.064,.424,-45,0],detail:[],active:[-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l4_coaster_midground.png",rotation:0},641.15,617.6,"FlatButtonToggle",{rotation:0,name:"door"},991.95,478.6,"Door",{rotation:0,name:"door"},50,118.8,"MovableBlock",{height:64,shape:1,frameActive:"barrel_force_on.png",frame:"barrel_force_off.png",mass:70,rotation:0,force:!0,width:64},455.2,473.8,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},63.9,292.25,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},128.9,292.75,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},941.95,542.15,"Zeb",{rotation:0},331.45,410.35,"Ezra",{rotation:0},248.1,409.9,"Sabine",{rotation:0},1084.9,499.8,"Exit",{rotation:0},580.6,561.3,"LazerBarrier",{rotation:-90,name:"door"},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l4_coaster_foreground.png",rotation:0},750.35,308.85,"Pickup",{pickupType:"cell",rotation:0},188.05,477.3,"Pickup",{pickupType:"cell",rotation:0},865.3,461.45,"Pickup",{pickupType:"cell",rotation:0},643.6,572.8,"Pickup",{pickupType:"cell",rotation:0},342.8,126.75,"HangerCoin",{pickupType:"cell",rotation:0},949.95,165.8,"Pickup",{pickupType:"cell",rotation:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l4_coaster_add.png",blend:"ADD",rotation:0},1104,475,"Light",{frame:"exit_light_green.png",rotation:0},1109,426,"Light",{frame:"exit_light_flair.png",rotation:0},280.75,479.2,"Light",{frame:"aerial_light.png",rotation:0}]},{level:"DM_world3_level3",floor:[117.85,548.35,2.337,1.7,0,0,565,320,11.3,6.4,0,4,609.4,581.3,7.609,1.04,0,0,869.85,520.4,2.084,1.101,0,0,1043.9,428.45,1.724,4.098,0,0],detail:[],active:[-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l2_stacker_midground.png",rotation:0},706.15,528.85,"Zeb",{rotation:0},1084,183.45,"Exit",{rotation:0},42.5,462.85,"Sabine",{rotation:0},186.85,463.85,"Ezra",{rotation:0},533.7,497.3,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},617.7,497.3,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},459.7,497.3,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},453.7,433.3,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},381.7,497.3,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},389.7,433.3,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},305.7,497.3,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},563.7,36.1,"Drone",{height:64,rotation:0,width:64},907.65,168.1,"Drone",{height:64,rotation:0,width:64},373.7,104,"Pickup",{pickupType:"cell",rotation:0},811.8,425.3,"Pickup",{pickupType:"cell",rotation:0},904.55,425.3,"Pickup",{pickupType:"cell",rotation:0},978.65,187.95,"Pickup",{pickupType:"cell",rotation:0},481.6,104,"Pickup",{pickupType:"cell",rotation:0},429.6,78.8,"HangerCoin",{pickupType:"cell",rotation:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l2_stacker_foreground.png",rotation:0},-2,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l2_stacker_add.png",blend:"ADD",rotation:0},1104,156,"Light",{frame:"exit_light_green.png",rotation:0},1109,107,"Light",{frame:"exit_light_flair.png",rotation:0}]},{level:"DM_world3_level4",floor:[-22.65,31.55,.48,1.254,0,0,-15.9,473.65,.58,.595,-45,0,147.1,473.65,.58,.595,-45,0,160.85,413.7,.64,1.357,0,0,292.85,8.8,.327,3.928,94.944,0,422.3,130.35,.327,8.847,94.944,0,427,190.9,8.635,.539,0,0,495.4,-27.4,.977,1.014,-36.941,0,565,320,11.3,6.4,0,4,565.5,546.45,11.313,1.7,0,0,586.25,474.3,.722,1.014,0,0,598,-48.7,1.771,1.014,0,0,649.15,434.9,.722,1.014,0,0,858.65,184.65,.664,.664,0,2,1068.1,364.45,1.237,2.702,0,0],detail:[],active:[-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l5_barrels_background.png",rotation:0},565,64,"Door",{rotation:0,name:"door"},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l5_barrels_midground.png",rotation:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l5_barrels_add.png",blend:"ADD",rotation:0},742.05,377.35,"Light",{frame:"aerial_light.png",rotation:0},465.55,461.5,"Sabine",{rotation:0},401.9,459.55,"Zeb",{rotation:0},954.25,428,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},516.1,85.5,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},319.8,66.65,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},254.35,61.65,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},385.25,73.8,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},450.6,79.4,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},188.35,56,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},123.35,50.45,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},57.85,44.3,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},337.2,461.95,"Ezra",{rotation:0},447.8,122.15,"ConvayorBelt",{capRight:!0,rotation:5.00115966796875,name:"conveyorRight",right:!0},90.35,91.1,"ConvayorBelt",{right:!0,rotation:5.00115966796875},269.3,106.8,"ConvayorBelt",{right:!0,rotation:5.00115966796875},682.25,142.6,"ConvayorBelt",{capRight:!0,rotation:5.00115966796875,capLeft:!0,name:"conveyorEnd",right:!0},64.6,450.05,"FlatButtonToggle",{rotation:0,name:"door"},1085,177,"Exit",{rotation:0},966,328.2,"Drone",{height:64,rotation:0,width:64},496.5,259.7,"Drone",{height:64,rotation:0,width:64,right:!0},132.5,217.85,"LazerBarrier",{rotation:0,name:"door"},886.6,406.2,"Pickup",{pickupType:"cell",rotation:0},648.5,338.5,"Pickup",{pickupType:"cell",rotation:0},633.85,79.5,"Pickup",{pickupType:"cell",rotation:0},791.55,406.2,"Pickup",{pickupType:"cell",rotation:0},63.7,346.15,"HangerCoin",{pickupType:"cell",rotation:0},61.5,247.5,"Pickup",{pickupType:"cell",rotation:0},1104,154,"Light",{frame:"exit_light_green.png",rotation:0},1109,105,"Light",{frame:"exit_light_flair.png",rotation:0}]},{level:"DM_world3_level5",floor:[104.35,233.65,2.145,.429,0,0,167.4,559.5,3.585,1.491,0,0,226.2,454.95,2.205,.8,0,0,352.75,589.05,2.195,.9,0,0,565,320,11.3,6.4,0,4,577.95,610.75,.64,.9,0,0,783.75,110.45,.736,2.468,0,0,923.45,519.5,4.13,2.291,0,0,1040.3,216,1.835,1.218,0,0],detail:[],active:[-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l3_dethhole_midground.png",rotation:0},67.05,469.55,"FlatButtonToggle",{rotation:0,name:"lazor"},406.6,530.65,"FlatButtonToggle",{rotation:0,name:"door"},884.55,187.65,"Door",{rotation:90,name:"door"},42,212.5,"Ezra",{rotation:0},98,212.05,"Sabine",{rotation:0},160.85,210.2,"Zeb",{rotation:0},899.2,284.95,"Drone",{height:64,rotation:0,width:64},885.1,148.65,"MovableBlock",{frame:"crate_heavy_small.png",height:64,rotation:0,width:64},339.5,412.95,"HMovingPlatform",{x:64,y:0,rotation:0,x2:311.55,y2:0},974.9,274.95,"LazerBarrier",{rotation:0,name:"lazor"},885.1,152.1,"Pickup",{pickupType:"cell",rotation:0},456.45,274.95,"Pickup",{pickupType:"cell",rotation:0},67.8,310.4,"Pickup",{pickupType:"cell",rotation:0},576,274.95,"Pickup",{pickupType:"cell",rotation:0},590.75,521.55,"HangerCoin",{pickupType:"cell",rotation:0},576,104,"Pickup",{pickupType:"cell",rotation:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l3_dethhole_foreground.png",rotation:0},1083,360,"Exit",{rotation:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l3_dethhole_add.png",blend:"ADD",rotation:0},1104,329,"Light",{frame:"exit_light_green.png",rotation:0},1109,280,"Light",{frame:"exit_light_flair.png",rotation:0}]},{level:"DM_world3_level6",floor:[92.2,107.15,.408,2.218,75,0,117.85,546.35,2.337,1.7,0,0,171.15,289.75,.738,1.971,0,0,220.85,333.1,.277,2.828,0,0,254.55,194.6,2.411,.158,.949,0,307.5,92.95,3.056,.259,0,0,366.15,406.25,2.747,.159,0,0,401.15,292.95,1.083,.259,0,0,408.1,386.85,3.8,.152,7.064,0,440.05,281.3,.87,.259,-14.997,0,519.8,579.3,5.817,1.04,0,0,526.3,509.8,1.9,.35,0,6,526.75,148,1.43,3.16,0,0,526.75,447.8,1.43,.889,0,0,565,320,11.3,6.4,0,4,694.5,292.95,2.176,.259,0,0,959.4,546.35,3.414,1.7,0,0,1036.15,161.7,1.877,3.434,0,0],detail:[],active:[-4,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l6_slice_midground.png",rotation:0},605.35,365.9,"Drone",{height:64,rotation:0,width:64,right:!0},988.95,397.35,"Door",{rotation:0,name:"puzPlat"},654.25,280.2,"Zeb",{rotation:0},729.45,515.9,"FlatButtonToggle",{rotation:0,name:"puzPlat"},1082,419.4,"Exit",{rotation:0},171,428.9,"MovableBlock",{height:64,shape:1,frameActive:"barrel_force_on.png",frame:"barrel_force_off.png",mass:70,rotation:0,force:!0,width:64},632.35,495.3,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},705.4,280.5,"Ezra",{rotation:0},757.9,280.05,"Sabine",{rotation:0},64,322.15,"MovingPlatform",{mode:"toggle",name:"puzPlat",y2:149.15,x:0,y:-149.15,rotation:0,x2:0},640.25,164.05,"Pickup",{pickupType:"cell",rotation:0},504.45,357.4,"Pickup",{pickupType:"cell",rotation:0},876.55,423.35,"Pickup",{pickupType:"cell",rotation:0},298.7,481.9,"Pickup",{pickupType:"cell",rotation:0},876.55,164.05,"Pickup",{pickupType:"cell",rotation:0},641.7,46.8,"HangerCoin",{pickupType:"cell",rotation:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l6_slice_foreground.png",rotation:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l6_slice_add.png",blend:"ADD",rotation:0},1104,393,"Light",{frame:"exit_light_green.png",rotation:0},1109,344,"Light",{frame:"exit_light_flair.png",rotation:0},345.4,513.8,"Light",{frame:"aerial_light.png",rotation:0}]},{level:"DM_world3_level7",floor:[72.1,381,.556,.14,0,0,72.1,296,.556,.14,0,0,72.1,211,.556,.14,0,0,113.6,335.25,.992,1.056,0,0,122.15,545,2.448,1.7,0,0,163.2,248.3,1.985,.886,0,0,191.85,30.05,3.841,2.04,0,0,276.05,544.45,1.016,1.501,12.458,0,388.5,539.8,1.374,.602,26.823,0,416.3,-71,1.307,.499,0,0,430,253.3,1.936,.786,0,0,431.3,242.85,1.936,.786,-1.996,0,449.85,205.25,1.487,.499,-30,0,518.95,115.7,1.36,3.539,0,0,565,320,11.3,6.4,0,4,574.65,550.75,.472,.602,65.515,0,612.95,267.55,5.236,.5,0,0,614.05,583,5.444,.94,0,0,626.4,524,.687,.14,0,0,682.05,551.5,.472,.664,-67.501,0,845.1,52.25,5.697,1.247,0,0,851.6,507.6,.832,.591,-74.904,0,1013.85,545,3.577,1.7,0,0,1077.35,267.55,1.248,.5,0,0],detail:[],active:[-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l7_twoballs_midground.png",rotation:0},812.45,178.55,"Door",{name:"open",rotation:0,opened:!0},498.85,525.6,"FlatButtonToggle",{rotation:0,name:"open"},759.85,525.6,"FlatButtonToggle",{rotation:0,name:"puzPlat"},867,460.5,"Ezra",{rotation:0},616.05,516.4,"Zeb",{rotation:0},652.65,200,"Trooper",{direction:"right",rotation:0},31.9,342,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},31.9,172,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},137.55,172,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},244.5,172,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},353.9,172,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:-1.46319580078125,explodable:!0,width:64},417.9,157,"MovableBlock",{height:64,shape:1,frameActive:"barrel_force_on.png",frame:"barrel_force_off.png",mass:70,rotation:0,force:!0,width:64},31.9,257,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},417.9,92,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},190.2,459.05,"Sabine",{rotation:0},1082,201,"Exit",{rotation:0},34.3,427,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},944.45,173.5,"Pickup",{pickupType:"cell",rotation:0},1100.45,380,"Pickup",{pickupType:"cell",rotation:0},297.55,174.2,"Pickup",{pickupType:"cell",rotation:0},766.5,383.85,"Pickup",{pickupType:"cell",rotation:0},497.65,383.85,"Pickup",{pickupType:"cell",rotation:0},945.65,347.4,"MovingPlatform",{mode:"toggle",name:"puzPlat",y2:112.6,x:0,y:-112.6,rotation:0,x2:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l7_twoballs_foreground.png",rotation:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l7_twoballs_add.png",blend:"ADD",rotation:0},1104,173,"Light",{frame:"exit_light_green.png",rotation:0},1109,124,"Light",{frame:"exit_light_flair.png",rotation:0},49.3,378.45,"Light",{frame:"aerial_light.png",rotation:0},49.3,293.45,"Light",{frame:"aerial_light.png",rotation:0},49.3,208.95,"Light",{frame:"aerial_light.png",rotation:0}]},{level:"DM_world3_level8",floor:[30.45,212,1.648,.366,0,0,76.9,461.1,1.538,.646,0,0,377.75,376.55,.847,.996,0,0,383.15,296.15,.238,1.093,46.49,0,435.1,338.05,.408,1.766,0,0,518.4,443.85,3.9,.35,0,6,518.6,205,.408,1.916,0,0,565,320,11.3,6.4,0,4,565.5,546.35,11.29,1.7,0,0,578.3,352.55,2.457,1.474,0,0,1093.9,288.75,.995,.841,0,0],detail:[],active:[-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l9_plank_midground.png",rotation:0},108.5,428.85,"Sabine",{rotation:0},45.35,428.35,"Zeb",{rotation:0},476.5,98.85,"MovableBlock",{type:"bridge",height:360,frame:"level_bridge_bridge.png",mass:75,rotation:180,width:30},188,461.85,"Ezra",{rotation:0},1088.15,214.7,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},67,151.05,"Trooper",{mode:"walk",rotation:0},1082,417.35,"Exit",{rotation:0},975.45,445.95,"FlatButtonToggle",{rotation:0,name:"puzPlat"},823.2,335.95,"MovingPlatform",{mode:"toggle",name:"puzPlat",y2:125.2,x:0,y:-125.2,rotation:0,x2:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l9_plank_foreground.png",rotation:0},621.3,152.8,"Pickup",{pickupType:"cell",rotation:0},333.45,233.95,"Pickup",{pickupType:"cell",rotation:0},333.45,133.8,"Pickup",{pickupType:"cell",rotation:0},1088.7,152.8,"Pickup",{pickupType:"cell",rotation:0},200.75,126.75,"HangerCoin",{pickupType:"cell",rotation:0},823.9,152.8,"Pickup",{pickupType:"cell",rotation:0},398.5,281.45,"Light",{frame:"aerial_light.png",rotation:0},-3,-63,"FatBg",{url:"img/game/world_3/scenes/w3_l9_plank_add.png",blend:"ADD",rotation:0},1104,389,"Light",{frame:"exit_light_green.png",rotation:0},1109,340,"Light",{frame:"exit_light_flair.png",rotation:0}]},{level:"DM_world3_level9",floor:[143.3,344.6,2.93,.25,0,0,178.05,-22.65,1,4.155,74.999,0,212.15,542,4.255,1.7,0,0,268.25,333,.322,.294,-45,0,362.45,471.4,.17,.41,0,0,416.45,471.4,.17,.41,0,0,566.35,318.55,11.3,6.4,0,4,781.1,426.95,1.402,.165,80.863,0,884.55,412.45,2.683,.165,27.156,0,954.7,542,3.506,1.7,0,0,1034.85,147.9,.167,.063,29.999,0,1079.1,191.05,1.061,.86,0,0,1082.1,486.75,1.061,.86,0,0,1107.2,150.8,1.061,.364,-35.741,0],detail:[],active:[-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l10_bridges_midground.png",rotation:0},68.95,445.6,"FlatButtonToggle",{rotation:0,name:"puzPlat"},151.1,457.05,"Sabine",{rotation:0},390,277,"MovableBlock",{type:"bridge",height:360,frame:"level_bridge_bridge.png",mass:75,rotation:180,width:30},1009,277,"MovableBlock",{type:"bridge",height:360,frame:"level_bridge_bridge.png",mass:75,rotation:180,width:30},954.05,62,"ConvayorBelt",{right:!0,rotation:0},774.25,62,"ConvayorBelt",{right:!0,rotation:0},594.45,62,"ConvayorBelt",{right:!0,rotation:0},414.65,62,"ConvayorBelt",{right:!0,rotation:0},241.25,87,"ConvayorBelt",{right:!0,rotation:-16.476165771484375},222.1,459.15,"Zeb",{rotation:0},1083,402,"Exit",{rotation:0},823.3,225.15,"Drone",{height:64,rotation:0,width:64},540.1,209.15,"Drone",{height:64,rotation:0,width:64,right:!0},67.15,299.6,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},342.95,198.15,"Drone",{height:64,rotation:0,width:64},839.3,285,"Drone",{height:64,rotation:0,width:64,right:!0},192.1,298.55,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},287.1,457.55,"Ezra",{rotation:0},72,216.65,"MovingPlatform",{mode:"toggle",name:"puzPlat",y2:116.65,x:0,y:-116.65,rotation:0,x2:0},717.3,119.1,"Pickup",{pickupType:"cell",rotation:0},633.1,119.1,"Pickup",{pickupType:"cell",rotation:0},70.5,108.45,"Pickup",{pickupType:"cell",rotation:0},215.05,177.05,"Pickup",{pickupType:"cell",rotation:0},550.7,126.75,"HangerCoin",{pickupType:"cell",rotation:0},894.9,269,"Pickup",{pickupType:"cell",rotation:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l10_bridges_foreground.png",rotation:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l10_bridges_add.png",blend:"ADD",rotation:0},1104,374,"Light",{frame:"exit_light_green.png",rotation:0},1109,325,"Light",{frame:"exit_light_flair.png",rotation:0}]},{level:"DM_world3_level10",floor:[24.3,99.15,.724,.739,-44.999,0,27.3,367.15,.724,.739,-44.999,0,28.85,111.35,.571,10.381,0,0,154.35,173.15,.318,.325,-45,0,189.3,422.1,.842,1.98,0,0,333.3,331.85,3.72,.175,0,0,353.85,538,4.133,1.88,0,0,457.15,186.85,6.05,.182,0,0,520.75,125.1,7.466,1.237,0,0,554,526,.808,1.435,-24.193,0,565,320,11.3,6.4,0,4,634.25,565.45,3.543,1.331,0,0,725.45,525.9,.807,1.433,24.08,0,819,252,1.501,1.28,0,0,923.95,538,4.123,1.88,0,0,1114.05,194.65,1.782,2.427,0,0,1152.65,-152.2,.571,5.118,0,0],detail:[],active:[-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l8_ballsnatch_midground.png",rotation:0},1082,405,"Exit",{rotation:0},639.15,493.5,"FlatButtonToggle",{rotation:0,name:"doorz"},960,290,"Door",{rotation:-90,name:"doorz"},870,380,"Door",{rotation:180,name:"doorz"},354,444.05,"Sabine",{rotation:0},421.85,442.2,"Zeb",{rotation:0},992,242,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},928,242,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},992,172,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},928,172,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},767.95,443.5,"Ezra",{rotation:0},237.1,51.05,"ConvayorBelt",{rotation:0},416.4,51.05,"ConvayorBelt",{rotation:0},596.2,51.05,"ConvayorBelt",{rotation:0},775.25,51.05,"ConvayorBelt",{rotation:0},955.05,51.05,"ConvayorBelt",{rotation:0},1134.85,51.05,"ConvayorBelt",{rotation:0},713.15,294,"Drone",{height:64,rotation:0,width:64},264.65,396.3,"Pickup",{pickupType:"cell",rotation:0},636.25,345,"Pickup",{pickupType:"cell",rotation:0},958.6,396.3,"Pickup",{pickupType:"cell",rotation:0},958.6,226,"Pickup",{pickupType:"cell",rotation:0},433,258,"Pickup",{pickupType:"cell",rotation:0},347.35,254.95,"HangerCoin",{pickupType:"cell",rotation:0},233.5,214.3,"Drone",{height:64,rotation:0,width:64,right:!0},152.85,195.1,"LazerBarrier",{rotation:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l8_ballsnatch_foreground.png",rotation:0},-3,-62,"FatBg",{url:"img/game/world_3/scenes/w3_l8_ballsnatch_add.png",blend:"ADD",rotation:0},1104,376,"Light",{frame:"exit_light_green.png",rotation:0},1109,327,"Light",{frame:"exit_light_flair.png",rotation:0},993.25,-129.15,"GeneratorObject",{type:0,rotation:0,name:"Generator"}]},{level:"DM_world4_level2",floor:[112.45,532.65,1.399,2.269,90,0,175.7,453.95,.34,3.528,90,0,195.95,244.9,1.267,1.319,90,0,555.45,304.7,2.404,.23,-176.268,0,565,320,11.3,6.4,0,4,565.55,619.5,11.313,.41,0,0,588.5,290.1,.363,6.533,90,0,604.1,259.8,1.413,.59,180,0,770.8,453.95,.341,4.692,90,0,794.95,297.95,2.404,.52,180,0,966.75,551.9,1.761,3.292,90,0,1068.05,386.3,2.286,1.334,90,0],detail:[],active:[0,-50,"FatBg",{url:"img/game/world_4/scenes/w4_l2_trooprun_midground.png",rotation:0},753.2,558.8,"Exit",{rotation:0},558.55,471,"LazerBarrier",{rotation:0,name:"laser2"},300,534.95,"Door",{rotation:0,name:"door1"},406,592,"FlatButtonToggle",{rotation:0,name:"laser1"},640,429,"FlatButtonToggle",{rotation:0,name:"laser2"},858.95,429,"FlatButtonToggle",{rotation:0,name:"puzPlat"},98.75,175.15,"Ezra",{rotation:0},39.35,174.15,"Zeb",{rotation:0},1063.95,229,"Trooper",{mode:"walk",rotation:0},197.3,181,"Sabine",{rotation:0},169.5,308.3,"LazerBarrier",{rotation:0,name:"laser1"},255.15,404.95,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},887.45,296.5,"ForceSwitch",{height:64,name:"door1",shape:1,frameUsed:"barrel_force_on.png",frameActive:"barrel_force_on.png",frame:"barrel_force_off.png",mass:50,rotation:0,force:!0,width:64},65.5,304.25,"MovingPlatform",{mode:"toggle",name:"puzPlat",y2:129.85,x:0,y:-129.85,rotation:0,x2:0},412.05,343.05,"Drone",{height:64,rotation:0,width:64},874.95,130.4,"Pickup",{pickupType:"cell",rotation:0},251.35,547.5,"Pickup",{pickupType:"cell",rotation:0},321.65,340.15,"Pickup",{pickupType:"cell",rotation:0},394.65,236.55,"Pickup",{pickupType:"cell",rotation:0},750.3,393.3,"Pickup",{pickupType:"cell",rotation:0},328.55,119.65,"HangerCoin",{pickupType:"cell",rotation:0},86.15,-232.85,"Copy",{rotation:0,name:"STR_TUTORIAL_BOMBS_2"},0,-50,"FatBg",{url:"img/game/world_4/scenes/w4_l2_trooprun_foreground.png",rotation:0},0,-50,"FatBg",{url:"img/game/world_4/scenes/w4_l2_trooprun_add.png",blend:"ADD",rotation:0},767,520,"Light",{frame:"exit_light_green.png",rotation:0}]},{level:"DM_world4_level9",floor:[62,532.6,1.252,2.15,0,0,77.9,269,.384,1.57,90,0,175,448.35,.465,1.027,90,0,269.8,127.5,.233,1.117,90,0,345.3,69.75,1.39,.487,90,0,356.3,605.5,3.536,.69,0,0,422.8,345.35,.17,2.697,89.995,0,518,194.8,.298,.298,0,2,520.95,204.9,.35,.243,0,0,565,320,11.3,6.4,0,4,581.1,325.8,5.866,.221,0,0,600.6,188.4,.243,.238,134.997,0,643.25,198.3,2.466,.372,0,0,679.6,188.4,.243,.238,134.997,0,691,409.45,.17,.718,89.995,0,740.65,268.45,.542,1.088,0,0,831.95,592.5,5.978,.95,0,0,856.9,208.8,2.192,.182,0,0,858,228.75,.218,2.199,83.434,0,865.8,199.25,2.025,.197,4.966,0,918.55,374.85,4.232,.862,0,0,924.85,94.6,3.112,.456,4.966,0,948.9,51.65,1.032,3.621,90,0,964.3,212.6,.293,.293,0,2,990.6,324.9,.532,2.958,83.433,0,1086.9,188.45,2.225,.881,90,0],detail:[],active:[0,-55.05,"FatBg",{url:"img/game/world_4/scenes/w4_l9_ramp_farground.png",rotation:0},935.25,209.45,"MovableBlock",{height:300,"static":!0,breakable:!0,frame:"exploding_wall_02.png",rotation:0,width:41},534.45,250.7,"Door",{name:"doorTrap",rotation:0,opened:!0},0,-55.05,"FatBg",{url:"img/game/world_4/scenes/w4_l9_ramp_midground.png",rotation:0},1082,501.95,"Exit",{rotation:0},883.95,481.95,"Door",{rotation:0,name:"door"},806.5,307.65,"FlatButtonToggle",{rotation:0,name:"door"},268,107.7,"FlatButtonToggle",{rotation:0,name:"doorTrap"},36.05,423.45,"Sabine",{rotation:0},640.75,147.7,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},472.15,272.2,"Trooper",{mode:"walk",rotation:0},95.6,422.95,"Zeb",{rotation:0},581.25,272.2,"Trooper",{mode:"walk",rotation:0},443,561.55,"ConvayorBelt",{rotation:0},263.2,561.55,"ConvayorBelt",{rotation:0},815.95,513,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},163.15,425.6,"Ezra",{rotation:0},673.1,368.85,"MovableBlock",{height:64,shape:1,frameActive:"barrel_force_on.png",frame:"barrel_force_off.png",mass:70,rotation:0,force:!0,width:64},-75.6,200.8,"Vador",{distance:200,rotation:0,turnBack:!0,delay:0,dir:"right"},731.15,417.95,"LazerBarrier",{rotation:0,name:"door"},949.5,483.9,"Pickup",{pickupType:"cell",rotation:0},583.15,267.85,"Pickup",{pickupType:"cell",rotation:0},715,148.7,"Pickup",{pickupType:"cell",rotation:0},152.3,511.9,"Pickup",{pickupType:"cell",rotation:0},269.95,43.4,"Pickup",{pickupType:"cell",rotation:0},447.55,36.4,"HangerCoin",{pickupType:"cell",rotation:0},0,-52.05,"FatBg",{url:"img/game/world_4/scenes/w4_l9_ramp_foreground.png",rotation:0},0,-55.05,"FatBg",{url:"img/game/world_4/scenes/w4_l9_ramp_add.png",blend:"ADD",rotation:0},1106,467,"Light",{frame:"exit_light_green.png",rotation:0}]},{level:"DM_world4_level3",floor:[73.45,459.35,1.475,1.69,0,0,132.2,227.9,2.647,.382,0,0,151.2,590.95,3.036,1.322,0,0,375.1,647.85,2.727,.203,0,0,563.9,227.9,1.88,.382,0,0,565,320,11.3,6.4,0,4,613.15,517.3,3.172,.498,-5.02,0,778.35,270.35,.563,.563,0,2,785.35,581.45,7.002,1.531,0,0,812.7,305.05,.907,.556,44.999,0,851.5,350.75,.454,.29,19.994,0,869.5,327.1,1.071,.31,18.992,0,951.85,515.35,3.675,.731,0,0,989,211.05,2.647,.045,0,0,1007.7,346.35,2.813,.51,0,0,1032.45,228,2.01,.382,0,0,1121.4,200.6,.805,.136,-22.487,0],detail:[],active:[0,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l3_skiramp_midground.png",rotation:0},1092,436.4,"Exit",{rotation:0},112.4,310.85,"Door",{rotation:0,name:"lazer"},979,199,"FlatButtonToggle",{rotation:0,name:"lift"},1074,311,"FlatButtonToggle",{rotation:0,name:"lazer"},36.5,211.35,"Ezra",{rotation:0},104.3,209.3,"Zeb",{rotation:0},174.55,208.9,"Sabine",{rotation:0},399.7,286,"Trooper",{direction:"right",rotation:0},340.1,286,"Trooper",{direction:"left",rotation:0},336.05,606.6,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},402.3,606.6,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},336.05,541.8,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},402.3,541.8,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},336.05,477,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},402.3,477,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},563.1,100.05,"Drone",{height:64,rotation:0,width:64},1070.65,175.7,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},180.9,491.65,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},676,453.4,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:-5.0298004150390625,width:64},369,483.8,"MovingPlatform",{mode:"toggle",name:"lift",y2:154.8,x:0,y:-154.8,rotation:0,x2:0},44.4,333.55,"Pickup",{pickupType:"cell",rotation:0},367.65,109.15,"Pickup",{pickupType:"cell",rotation:0},928.75,436.5,"Pickup",{pickupType:"cell",rotation:0},899.3,168.3,"Pickup",{pickupType:"cell",rotation:0},368.3,388.7,"Pickup",{pickupType:"cell",rotation:0},999.55,283.95,"HangerCoin",{pickupType:"cell",rotation:0},0,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l3_skiramp_foreground.png",rotation:0},0,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l3_skiramp_add.png",blend:"ADD",rotation:0},1105,425,"Light",{frame:"exit_light_green.png",rotation:0}]},{level:"DM_world4_level5",floor:[140.3,252.85,1.201,.317,90,0,162.9,541.3,1.273,3.258,90,0,189.15,217.45,.492,.949,90,0,237.8,252.85,1.201,.317,90,0,279.5,187.35,.116,3.052,90,0,307.05,620.5,6.143,.41,0,0,348.6,210.65,1.839,.35,0,6,350.75,419.35,3.823,.7,90,0,400.2,266.5,.255,.741,45,0,438.65,547,1.983,.388,44.974,0,439.6,239.95,.236,1.21,90,0,467.8,391.65,1.058,.877,90,0,467.8,341.75,.877,.817,0,2,507.8,475.55,1.627,.748,45,0,524.15,426.75,.637,1.124,90,0,557.5,483.8,.391,1.516,180,0,565,320,11.3,6.4,0,4,594.65,462.9,.396,1.361,180,0,669.8,221.15,.417,1.252,146.255,0,684.7,164.6,.327,1.341,90,0,696.2,468.45,.396,1.25,180,0,705.4,426.75,.637,.579,90,0,727.95,232.1,.986,.646,180,0,732.15,620.9,1.114,.417,180,0,806.15,205.15,.437,1.519,120,0,813.35,430.8,.619,.86,90,0,822.2,543.4,.685,1.947,180,0,867.2,242.5,1.936,.852,180,0,875,30.6,.653,4.896,90,0,985.6,58.75,.842,2.882,90,0,986.1,238,.437,.767,120,0,1029.9,521.8,2.439,2.001,90,0,1034.5,253.8,1.907,.625,180,0],detail:[],active:[-1,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l5_hatch_farground.png",rotation:0},644.35,420.9,"Door",{rotation:-90,
name:"trapDoor1"},893,425.85,"Door",{rotation:-90,name:"trapDoor2"},-1,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l5_hatch_midground.png",rotation:0},1083.2,359.85,"Exit",{rotation:0},270,465,"FlatButtonToggle",{rotation:0,name:"lift"},173,465,"FlatButtonToggle",{rotation:0,name:"trapDoor2"},907,189,"FlatButtonToggle",{rotation:0,name:"trapDoor1"},207.25,182.15,"Ezra",{rotation:0},154.35,181.15,"Zeb",{rotation:0},752.3,365.8,"MovableBlock",{frame:"drop_door.png",height:200,rotation:0,width:32},752.1,567,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},685.1,567,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},618,567,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},752.1,500.8,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},257.7,181.6,"Sabine",{rotation:0},682.15,116.25,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},63.5,322.2,"MovingPlatform",{mode:"toggle",name:"lift",y2:150.6,x:0,y:-150.6,rotation:0,x2:0},626,39.25,"LazerBarrier",{rotation:0,name:"trapDoor2"},643.9,352.1,"Trooper",{direction:"right",rotation:0},840.3,348.55,"Pickup",{pickupType:"cell",rotation:0},1062.8,162.5,"Pickup",{pickupType:"cell",rotation:0},909.85,153.25,"Pickup",{pickupType:"cell",rotation:0},192,268.9,"Pickup",{pickupType:"cell",rotation:0},700.15,348.55,"Pickup",{pickupType:"cell",rotation:0},895.4,357.25,"Trooper",{direction:"left",rotation:0},585.55,40.2,"HangerCoin",{pickupType:"cell",rotation:0},-1,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l5_hatch_foreground.png",rotation:0},-1,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l5_hatch_add.png",blend:"ADD",rotation:0},1103,358,"Light",{frame:"exit_light_green.png",rotation:0}]},{level:"DM_world4_level1",floor:[30.7,208.1,.628,.526,0,0,38.7,354.6,.788,.196,0,0,107.95,236.6,2.173,.196,0,0,108.25,556.35,2.164,1.756,0,0,189.45,167.15,.543,1.585,0,0,444.85,556.35,.688,1.756,0,0,565,320,11.3,6.4,0,4,610.5,493.75,1.292,.504,0,0,635.7,435.55,.788,1.096,0,0,637.3,627.3,4.542,.336,0,0,936.15,446.75,.259,.775,0,0,956.15,408.25,.259,1.205,0,0,970.3,554.25,3.225,1.714,0,0,976.15,383.2,.259,1.905,0,0,1056.65,348.65,1.469,2.515,0,0],detail:[],active:[1,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l1_stairs_midground.png",rotation:0},111,217,"FlatButtonToggle",{rotation:0,name:"LV8"},1082,179.8,"Exit",{rotation:0},30.45,468.95,"Ezra",{rotation:0},73.2,467.5,"Zeb",{rotation:0},116.95,468.6,"Sabine",{rotation:0},580,288.05,"MovableBlock",{type:"bridge",height:360,frame:"level_bridge_bridge.png",mass:75,rotation:0,width:30},742,541.9,"MovingPlatform",{mode:"toggle",name:"LV8",y2:77,x:0,y:-77,rotation:0,x2:0},38,149,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},163.3,-40.1,"LazerBarrier",{rotation:0},42.35,298.55,"Pickup",{pickupType:"cell",rotation:0},607.65,570.1,"Pickup",{pickupType:"cell",rotation:0},444.65,424.5,"Pickup",{pickupType:"cell",rotation:0},315.3,373.3,"Pickup",{pickupType:"cell",rotation:0},637.3,103.3,"Pickup",{pickupType:"cell",rotation:0},558.55,101.8,"HangerCoin",{pickupType:"cell",rotation:0},0,-50,"FatBg",{url:"img/game/world_4/scenes/w4_l1_stairs_foreground.png",rotation:0},1,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l1_stairs_add.png",blend:"ADD",rotation:0},1108,143,"Light",{frame:"exit_light_green.png",rotation:0}]},{level:"DM_world4_level4",floor:[131.4,250.6,2.751,.35,0,0,175.65,584.4,3.517,.81,0,0,338.45,105.6,1.431,.35,0,0,354.35,70.6,1.112,.35,0,6,359.5,23.1,1.011,.6,0,0,389,68.6,.081,.47,0,0,445.3,408.7,10.363,.272,0,0,486.15,623.15,.606,.163,-7.747,0,512.1,133.65,2.085,2.692,0,0,534.8,623.9,.444,.162,12.539,0,565,320,11.3,6.4,0,4,565.5,535.45,11.313,.21,0,0,565.5,629.45,11.313,.21,0,0,596.6,624.05,.444,.162,-12.523,0,645.25,623.7,.606,.162,7.565,0,946.45,250.6,3.831,.35,0,0,954.8,584.4,3.517,.81,0,0,999.8,530,1.406,.174,-23.413,0,1103.15,503.1,.858,.174,0,0],detail:[],active:[338.15,316.3,"MovingPlatform",{mode:"toggle",name:"lift_left",y2:94,x:0,y:-94,rotation:0,x2:0},686.25,316.3,"MovingPlatform",{mode:"toggle",name:"lift_right",y2:94,x:0,y:-94,rotation:0,x2:0},0,-55,"FatBg",{url:"img/game/world_4/scenes/w4_l4_underfloor_midground.png",rotation:0},1082,190.5,"Exit",{rotation:0},214.15,330.9,"Door",{name:"trooper_door",rotation:0,opened:!0},404.1,606.15,"FlatButtonToggle",{rotation:0,name:"lift_left"},725.1,606.15,"FlatButtonToggle",{rotation:0,name:"lift_right"},823.8,225,"FlatButtonToggle",{rotation:0,name:"trooper_door"},53.1,225.2,"FlatButtonToggle",{rotation:0,name:"lift_left"},339.5,525.45,"Ezra",{rotation:0},397.5,525,"Sabine",{rotation:0},269.9,352.6,"Trooper",{mode:"walk",rotation:0},567.4,586.65,"MovableBlock",{height:64,shape:1,frameActive:"barrel_force_on.png",frame:"barrel_force_off.png",mass:70,rotation:0,force:!0,width:64},460.1,523.95,"Zeb",{rotation:0},-39.4,346.1,"Vador",{distance:310,rotation:0,turnBack:!0,delay:0,dir:"right"},442.05,292.15,"Pickup",{pickupType:"cell",rotation:0},167.65,356.15,"Pickup",{pickupType:"cell",rotation:0},915.35,191.3,"Pickup",{pickupType:"cell",rotation:0},350.2,67.3,"Pickup",{pickupType:"cell",rotation:0},878.45,356.15,"Pickup",{pickupType:"cell",rotation:0},140.95,200,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},649.85,53.75,"HangerCoin",{pickupType:"cell",rotation:0},0,-55,"FatBg",{url:"img/game/world_4/scenes/w4_l4_underfloor_foreground.png",rotation:0},0,-55,"FatBg",{url:"img/game/world_4/scenes/w4_l4_underfloor_add.png",blend:"ADD",rotation:0},1102,159,"Light",{frame:"exit_light_green.png",rotation:0}]},{level:"DM_world4_level8",floor:[70.75,464.9,.077,.092,0,0,91.85,275,.503,1.31,0,0,106.35,194.95,.355,.768,45,0,126.85,310.55,.283,.568,45,0,137,132.95,.4,3.348,0,0,143.8,605.75,1.54,2.025,0,0,152.8,495.05,1.721,.531,0,0,212.8,80.25,.111,.142,-79.445,0,219.95,84.3,.056,.084,-79.447,0,266,621.5,.477,.425,0,0,280.4,102.6,.022,.084,-79.444,0,288.85,103.05,.043,.139,-79.456,0,474,118.55,.238,1.144,0,0,513.9,122.8,.88,1.06,0,0,518.55,75.6,.685,.197,6.74,0,518.75,582.65,1.609,.285,0,0,564.25,319.75,11.3,6.4,0,4,589.45,584.75,.549,.502,0,0,589.7,692.65,2.641,2.641,0,2,665.45,590.25,.467,.297,-38.484,0,679.6,87.95,1.114,1.758,0,0,805.05,165.5,1.594,.207,0,0,1012,375,2.346,.531,0,0,1034.2,528.9,1.961,2.973,0,0,1093.6,205.45,.714,.207,0,0],detail:[],active:[0,-56.95,"FatBg",{url:"img/game/world_4/scenes/w4_l8_splitz_farground.png",rotation:0},91.9,404.45,"Door",{rotation:0,name:"door"},494,558,"FlatButtonToggle",{rotation:0,name:"door"},0,-56.95,"FatBg",{url:"img/game/world_4/scenes/w4_l8_splitz_midground.png",rotation:0},1105,306.05,"Exit",{rotation:0},163,466.95,"Zeb",{rotation:0},564.95,379.6,"MovableBlock",{type:"bridge",height:360,frame:"level_bridge_bridge.png",mass:75,rotation:0,width:30},614.2,379.6,"MovableBlock",{type:"bridge",height:360,frame:"level_bridge_bridge.png",mass:75,rotation:0,width:30},373.65,83.8,"ConvayorBelt",{right:!0,rotation:-16.174224853515625},194.35,171.75,"ConvayorBelt",{rotation:100.70240783691406},271.65,193.65,"ConvayorBelt",{right:!0,rotation:-79.29759216308594},261.4,60.75,"MovableBlock",{frame:"crate_heavy_small.png",height:64,rotation:18.93365478515625,width:64},484.1,29.35,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},141.15,468.95,"Ezra",{rotation:0},377,478,"Drone",{height:64,rotation:0,width:64},64.05,-17.75,"GeneratorObject",{rotation:0,name:"Generator"},628.8,85.85,"ConvayorBelt",{rotation:-89.9947509765625},202.2,468.1,"Sabine",{rotation:0},265.95,557.15,"Pickup",{pickupType:"cell",rotation:0},784.1,127.45,"Pickup",{pickupType:"cell",rotation:0},677.1,215.85,"Pickup",{pickupType:"cell",rotation:0},1102.4,159.75,"Pickup",{pickupType:"cell",rotation:0},477.95,266.85,"Pickup",{pickupType:"cell",rotation:0},1006.55,33.65,"HangerCoin",{pickupType:"cell",rotation:0},0,-56.95,"FatBg",{url:"img/game/world_4/scenes/w4_l8_splitz_foreground.png",rotation:0},0,-56.95,"FatBg",{url:"img/game/world_4/scenes/w4_l8_splitz_add.png",blend:"ADD",rotation:0},1104,279,"Light",{frame:"exit_light_green.png",rotation:0}]},{level:"DM_world4_level6",floor:[10.85,244.5,.585,.215,36.972,0,15.85,586.45,.339,.692,0,0,83.4,260.2,.321,.315,44.996,0,90.6,503.8,.323,.424,0,0,98.75,264.5,1.979,.401,0,0,121.8,345.2,.321,1.433,0,0,161.75,134.5,1.439,.621,0,0,215.7,207.5,.36,1.539,0,0,224.7,14.05,3.221,.143,21.973,0,248.95,465.45,2.862,1.19,0,0,363.7,11.5,.26,1.139,0,0,479.8,465.9,.398,1.199,0,0,526.5,287.9,1.133,.401,0,0,549.5,238.8,.673,.801,0,0,565,320,11.3,6.4,0,4,565.5,629.5,11.313,.29,0,0,566,172.3,.343,.851,0,0,680.4,552.5,6.755,.55,0,0,680.6,597.5,7.134,.35,0,6,767.8,126.75,.682,3.623,0,0,856.5,143.3,5.468,.27,0,0,1018.4,414,2.257,.2,0,0,1063,280.85,1.365,.2,0,0],detail:[],active:[171.85,-24.55,"LazerBarrier",{rotation:0,name:"laser"},659.65,403.9,"MovingPlatform",{mode:"toggle",name:"lift2",y2:132.95,x:0,y:-132.95,rotation:0,x2:0},301.95,249.85,"MovingPlatform",{mode:"toggle",name:"lift1",y2:171.05,x:0,y:-171.05,rotation:0,x2:0},1,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l6_crawler_midground.png",rotation:0},1082,229.85,"Exit",{rotation:0},144,233,"FlatButtonToggle",{rotation:0,name:"lift2"},616,119,"FlatButtonToggle",{rotation:0,name:"lift1"},257.65,614.5,"Ezra",{rotation:0},540.95,482.35,"Trooper",{mode:"walk",rotation:0},659,491.6,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},659,426.8,"MovableBlock",{frame:"crate_explode_small.png",height:64,rotation:0,explodable:!0,width:64},982.15,482.35,"Trooper",{mode:"walk",rotation:0},425.95,492.6,"MovableBlock",{height:64,shape:1,frameActive:"barrel_force_on.png",frame:"barrel_force_off.png",mass:70,rotation:0,force:!0,width:64},831.95,491.6,"MovableBlock",{height:64,force:!0,frameActive:"crate_force_small_on.png",frame:"crate_force_small_off.png",mass:10,rotation:0,width:64},170.2,404.6,"Sabine",{rotation:0},234.7,404.1,"Zeb",{rotation:0},34,371.5,"Pickup",{pickupType:"cell",rotation:0},300.7,246,"Pickup",{pickupType:"cell",rotation:0},408.05,62.8,"Pickup",{pickupType:"cell",rotation:0},659.95,326,"Pickup",{pickupType:"cell",rotation:0},1081.3,355.3,"Pickup",{pickupType:"cell",rotation:0},302.3,148.5,"HangerCoin",{pickupType:"cell",rotation:0},721.4,80.8,"Vador",{distance:150,rotation:0,turnBack:!0,delay:0,dir:"left"},1,-49,"FatBg",{url:"img/game/world_4/scenes/w4_l6_crawler_foreground.png",rotation:0},1,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l6_crawler_add.png",blend:"ADD",rotation:0},1107,206,"Light",{frame:"exit_light_green.png",rotation:0}]},{level:"DM_world4_level7",floor:[89.25,515.65,.359,2.987,0,0,127.6,253.25,1.127,.36,0,0,143.65,75.05,2.871,1.558,0,0,224.6,584.45,2.879,1.19,0,0,254.85,334.85,.211,.502,-124.88,0,285.8,300.6,1.018,.36,-75,0,313.9,352.6,4.842,.36,-3.213,0,320.9,240.75,.211,.502,-99.803,0,323,618,.899,.44,0,0,325.75,237.75,.211,.502,-114.802,0,326.45,252.25,1.018,.36,0,0,340.15,228.9,.211,.502,-124.88,0,355.1,216.15,.211,.8,-135,0,365.15,203.6,.211,.502,-149.338,0,373.95,186.15,.211,.502,-160.331,0,378.8,163.55,.211,.502,-170.305,0,385.75,148.95,.311,3.077,0,0,393.25,215,.221,.524,-6.34,0,396.1,220.3,.221,.524,-21.333,0,404.4,235.85,.221,.524,-31.41,0,416.8,252.3,.221,.836,-41.538,0,429.2,263.5,.221,.524,-55.87,0,446.9,273.8,.221,.524,-66.862,0,452,617.4,2.376,.44,1.001,0,462.5,303.1,1.848,.566,0,0,470.15,281.55,.221,.524,-76.833,0,489.45,604.9,.2,.2,45,0,565,320,11.3,6.4,0,4,569.2,606.5,.2,.2,45,0,614.25,619.15,5.626,.44,0,0,679.45,302.8,.609,.56,0,0,780.75,556.15,2.819,.329,-28.026,0,803.35,150.55,6.534,.529,0,0,835,302.8,.609,.56,0,0,1014.8,558.65,2.345,1.685,0,0,1041.85,352.2,1.782,.194,0,0],detail:[],active:[-1,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l7_bombslot_farground.png",rotation:0},529.55,479.15,"MovableBlock",{height:300,"static":!0,breakable:!0,frame:"exploding_wall_02.png",rotation:0,width:41},601,298.15,"Door",{name:"hatch1",rotation:-90,opened:!0},757,298.45,"Door",{name:"hatch2",rotation:-90,opened:!0},231.5,258.45,"Door",{name:"barrelDoor",rotation:-90,opened:!0},984.15,416.6,"Door",{rotation:0,name:"endDoor"},502.55,161.8,"LazerBarrier",{rotation:0,name:"laser"},438.45,150.2,"Door",{rotation:-90,name:"door"},545,112,"FlatButton",{rotation:0,name:"barrelDoor"},-1,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l7_bombslot_midground.png",rotation:0},1082,432.4,"Exit",{rotation:0},438,584,"FlatButtonToggle",{rotation:0,name:"hatch1"},618,586,"FlatButtonToggle",{rotation:0,name:"hatch2"},121,223,"FlatButtonToggle",{rotation:0,name:"endDoor"},1071,332,"FlatButtonToggle",{rotation:0,name:"laser"},308.05,523.9,"Zeb",{rotation:0},439.55,89.7,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},627,213.4,"Drone",{height:64,rotation:0,width:64,right:!0},734.6,213.1,"Drone",{height:64,rotation:0,width:64,right:!0},79.2,437.65,"ForceSwitch",{height:64,name:"door",shape:1,frameUsed:"barrel_force_on.png",frameActive:"barrel_force_on.png",frame:"barrel_force_off.png",mass:50,rotation:0,force:!0,width:64},247,524.45,"Ezra",{rotation:0},332.5,-110.05,"GeneratorObjectNormal",{rotation:0,name:"Generator"},195.4,525,"Sabine",{rotation:0},855.5,243.6,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},-1,-53,"FatBg",{url:"img/game/world_4/scenes/w4_l7_bombslot_add.png",blend:"ADD",rotation:0},1103,417,"Light",{frame:"exit_light_green.png",rotation:0},756.95,338.4,"Pickup",{pickupType:"cell",rotation:0},599.3,338.4,"Pickup",{pickupType:"cell",rotation:0},639.05,73.7,"Pickup",{pickupType:"cell",rotation:0},756.95,481.9,"Pickup",{pickupType:"cell",rotation:0},981.3,289.85,"Pickup",{pickupType:"cell",rotation:0},1005.5,30.75,"HangerCoin",{pickupType:"cell",rotation:0},-1,-50,"FatBg",{url:"img/game/world_4/scenes/w4_l7_bombslot_foreground.png",rotation:0}]},{level:"DM_world4_level10",floor:[50.9,197.75,.403,1.008,-90,0,103.8,316.1,.255,2.074,-90,0,113.1,582.5,2.265,1.151,0,0,127.25,510.05,.582,.604,-90,0,184.65,482.65,.853,.832,-90,0,233.6,245.5,1.357,.987,-90,0,242.6,308.65,.255,.771,-101.488,0,342,522,.46,.46,0,2,398.05,524,.5,1.12,-90,0,454.05,549,1,1,0,2,504.2,277.35,.72,1.867,-90,0,514.8,-73.8,.695,3.338,-55.317,0,523,223.85,1.492,.35,0,6,563.05,302.1,.311,.639,-55.317,0,565,320,11.3,6.4,0,4,570.6,192,.287,2.336,-90,0,579.8,490.95,.353,.353,0,2,615.9,484.45,.223,.722,-90,0,652.9,490.95,.353,.353,0,2,717.2,318.35,.3,2.74,-90,0,737.55,527.85,.226,.226,0,2,769.75,191.95,.113,1.67,-84.008,0,769.8,201.2,.104,1.671,-90,0,783.7,523.7,.143,.963,-90,0,832.9,527.85,.226,.226,0,2,890.75,26.05,1.073,5.077,-83.309,0,994.1,510.35,.11,2.723,-90,0,1076.2,222.05,.287,1.503,-90,0,1076.2,362.6,.287,1.503,-90,0],detail:[],active:[161.55,204,"Door",{rotation:-90,name:"door"},784,505,"FlatButton",{rotation:0,name:"door"},-1,-55,"FatBg",{url:"img/game/world_4/scenes/w4_l10_mushrooms_midground.png",rotation:0},1069,338,"FlatButtonToggle",{rotation:0,name:"lazer"},660,292,"FlatButtonToggle",{rotation:0,name:"doorOpen"},531,167,"FlatButtonToggle",{rotation:0,name:"lift"},1082,164.7,"Exit",{rotation:0},1029.95,440.85,"Door",{name:"doorOpen",rotation:180,opened:!0},613.45,420.35,"Pickup",{pickupType:"cell",rotation:0},347.7,263.75,"Pickup",{pickupType:"cell",rotation:0},828.85,150.7,"Pickup",{pickupType:"cell",rotation:0},405,450,"Pickup",{pickupType:"cell",rotation:0},1067.4,285.5,"Pickup",{pickupType:"cell",rotation:0},535.3,531.25,"HangerCoin",{pickupType:"cell",rotation:0},34.5,303.85,"Ezra",{rotation:0},58.05,177.2,"Zeb",{rotation:0},927.75,462.4,"Trooper",{mode:"walk",rotation:0},187.55,440.05,"Sabine",{rotation:0},616,145.85,"MovableBlock",{height:64,shape:1,frame:"rusty_barrel.png",mass:60,rotation:0,width:64},645.55,49.65,"LazerBarrier",{rotation:0,name:"lazer"},282.9,290.35,"LazerBarrier",{rotation:-90,name:"lazer"},802.6,67.7,"LazerBarrier",{rotation:0,name:"lazer"},929.05,436.4,"MovingPlatform",{mode:"toggle",name:"lift",y2:71.2,x:0,y:-71.2,rotation:0,x2:0},929.05,265.6,"MovingPlatform",{mode:"toggle",name:"lift",y2:69.85,x:0,y:-69.85,rotation:0,x2:0},-1,-51,"FatBg",{url:"img/game/world_4/scenes/w4_l10_mushrooms_foreground.png",rotation:0},-1,-55,"FatBg",{url:"img/game/world_4/scenes/w4_l10_mushrooms_add.png",blend:"ADD",rotation:0},1104,146,"Light",{frame:"exit_light_green.png",rotation:0}]}],define("WorldData",function(){}),(window._gsQueue||(window._gsQueue=[])).push(function(){_gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;for(var i,s,r=o.length;--r>-1;)if(s=this.vars[o[r]])for(i=s.length;--i>-1;)"{self}"===s[i]&&(s=this.vars[o[r]]=s.concat(),s[i]=this);this.vars.tweens instanceof Array&&this.add(this.vars.tweens,0,this.vars.align,this.vars.stagger)},o=["onStartParams","onUpdateParams","onCompleteParams","onReverseCompleteParams","onRepeatParams"],r=[],n=function(t){var e,i={};for(e in t)i[e]=t[e];return i},a=s.prototype=new e;return s.version="1.8.0",a.constructor=s,a.kill()._gc=!1,a.to=function(t,e,s,o){return this.add(new i(t,e,s),o)},a.from=function(t,e,s,o){return this.add(i.from(t,e,s),o)},a.fromTo=function(t,e,s,o,r){return this.add(i.fromTo(t,e,s,o),r)},a.staggerTo=function(t,e,o,r,a,h,l,c){var u=new s({onComplete:h,onCompleteParams:l,onCompleteScope:c});r=r||0;for(var d=0;t.length>d;d++)null!=o.startAt&&(o.startAt=n(o.startAt)),u.add(new i(t[d],e,n(o)),d*r);return this.add(u,a)},a.staggerFrom=function(t,e,i,s,o,r,n,a){return null==i.immediateRender&&(i.immediateRender=!0),i.runBackwards=!0,this.staggerTo(t,e,i,s,o,r,n,a)},a.staggerFromTo=function(t,e,i,s,o,r,n,a,h){return s.startAt=i,i.immediateRender&&(s.immediateRender=!0),this.staggerTo(t,e,s,o,r,n,a,h)},a.call=function(t,e,s,o){return this.add(i.delayedCall(0,t,e,s),o)},a.set=function(t,e,s){return e.immediateRender=!1,this.add(new i(t,0,e),s)},s.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var o=new s(t),r=o._timeline;null==e&&(e=!0),r._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=r._time;for(var n,a=r._first;a;)n=a._next,e&&a instanceof i&&a.target===a.vars.onComplete||o.add(a,a._startTime-a._delay),a=n;return r.add(o,0),o},a.add=function(o,r,n,a){if("number"!=typeof r&&(r=this._parseTimeOrLabel(r,0,!0,o)),o instanceof t);else{if(o instanceof Array){n=n||"normal",a=a||0;var h,l,c=r,u=o.length;for(h=0;u>h;h++)(l=o[h])instanceof Array&&(l=new s({tweens:l})),this.add(l,c),"string"!=typeof l&&"function"!=typeof l&&("sequence"===n?c=l._startTime+l.totalDuration()/l._timeScale:"start"===n&&(l._startTime-=l.delay())),c+=a;return this._uncache(!0)}if("string"==typeof o)return this.addLabel(o,r);if("function"!=typeof o)throw"Cannot add "+o+" into the TimelineLite/Max: it is neither a tween, timeline, function, nor a String.";o=i.delayedCall(0,o)}if(e.prototype.add.call(this,o,r),this._gc&&!this._paused&&this._time===this._duration&&this._time<this.duration())for(var d=this;d._gc&&d._timeline;)d._timeline.smoothChildTiming?d.totalTime(d._totalTime,!0):d._enabled(!0,!1),d=d._timeline;return this},a.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},a.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},a.insert=a.insertMultiple=function(t,e,i,s){return this.add(t,e||0,i,s)},a.appendMultiple=function(t,e,i,s){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,s)},a.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},a.removeLabel=function(t){return delete this._labels[t],this},a.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},a._parseTimeOrLabel=function(e,i,s,o){var r;if(o instanceof t&&o.timeline===this)this.remove(o);else if(o instanceof Array)for(r=o.length;--r>-1;)o[r]instanceof t&&o[r].timeline===this&&this.remove(o[r]);if("string"==typeof i)return this._parseTimeOrLabel(i,s&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,s);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(r=e.indexOf("="),-1===r)return null==this._labels[e]?s?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(r-1)+"1",10)*Number(e.substr(r+1)),e=r>1?this._parseTimeOrLabel(e.substr(0,r-1),0,s):this.duration()}return Number(e)+i},a.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},a.stop=function(){return this.paused(!0)},a.gotoAndPlay=function(t,i){return e.prototype.play.call(this,t,i)},a.gotoAndStop=function(t,e){return this.pause(t,e)},a.render=function(t,e,i){this._gc&&this._enabled(!0,!1),this._active=!this._paused;var s,o,n,a,h=this._dirty?this.totalDuration():this._totalDuration,l=this._time,c=this._startTime,u=this._timeScale,d=this._paused;if(t>=h?(this._totalTime=this._time=h,this._reversed||this._hasPausedChild()||(o=!0,a="onComplete",0===this._duration&&(0===t||0>this._rawPrevTime)&&this._rawPrevTime!==t&&(i=!0)),this._rawPrevTime=t,t=h+1e-6):0>=t?(this._totalTime=this._time=0,(0!==l||0===this._duration&&this._rawPrevTime>0)&&(a="onReverseComplete",o=this._reversed),0>t?(this._active=!1,0===this._duration&&this._rawPrevTime>=0&&(i=!0)):this._initted||(i=!0),this._rawPrevTime=t,t=-1e-6):this._totalTime=this._time=this._rawPrevTime=t,this._time!==l||i){if(this._initted||(this._initted=!0),0===l&&this.vars.onStart&&0!==this._time&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||r)),this._time>l)for(s=this._first;s&&(n=s._next,!this._paused||d);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,!1):s.render((t-s._startTime)*s._timeScale,e,!1)),s=n;else for(s=this._last;s&&(n=s._prev,!this._paused||d);)(s._active||l>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,!1):s.render((t-s._startTime)*s._timeScale,e,!1)),s=n;this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||r)),a&&(this._gc||(c===this._startTime||u!=this._timeScale)&&(0===this._time||h>=this.totalDuration())&&(o&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),e||this.vars[a]&&this.vars[a].apply(this.vars[a+"Scope"]||this,this.vars[a+"Params"]||r)))}},a._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof s&&t._hasPausedChild())return!0;t=t._next}return!1},a.getChildren=function(t,e,s,o){o=o||-9999999999;for(var r=[],n=this._first,a=0;n;)o>n._startTime||(n instanceof i?e!==!1&&(r[a++]=n):(s!==!1&&(r[a++]=n),t!==!1&&(r=r.concat(n.getChildren(!0,e,s)),a=r.length))),n=n._next;return r},a.getTweensOf=function(t,e){for(var s=i.getTweensOf(t),o=s.length,r=[],n=0;--o>-1;)(s[o].timeline===this||e&&this._contains(s[o]))&&(r[n++]=s[o]);return r},a._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},a.shiftChildren=function(t,e,i){i=i||0;for(var s=this._first;s;)s._startTime>=i&&(s._startTime+=t),s=s._next;if(e)for(var o in this._labels)this._labels[o]>=i&&(this._labels[o]+=t);return this._uncache(!0)},a._kill=function(t,e){if(null==t&&null==e)return this._enabled(!1,!1);for(var i=null==e?this.getChildren(!0,!0,!1):this.getTweensOf(e),s=i.length,o=!1;--s>-1;)i[s]._kill(t,e)&&(o=!0);return o},a.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},a.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return this},a._enabled=function(t,i){if(t===this._gc)for(var s=this._first;s;)s._enabled(t,!0),s=s._next;return e.prototype._enabled.call(this,t,i)},a.progress=function(t){return arguments.length?this.totalTime(this.duration()*t,!1):this._time/this.duration()},a.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},a.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,s=0,o=this._first,r=-999999999999;o;)e=o._next,r>o._startTime&&this._sortChildren?this.add(o,o._startTime-o._delay):r=o._startTime,0>o._startTime&&(s-=o._startTime,this.shiftChildren(-o._startTime,!1,-9999999999)),i=o._startTime+(o._dirty?o.totalDuration():o._totalDuration)/o._timeScale,i>s&&(s=i),o=e;this._duration=this._totalDuration=s,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},a.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},a.rawTime=function(){return this._paused||0!==this._totalTime&&this._totalTime!==this._totalDuration?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},s},!0)}),window._gsDefine&&_gsQueue.pop()(),define("TIMELINE",function(){}),this.createjs=this.createjs||{},function(){var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="0.6.0",t.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){var i=t.prototype,s=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(s){i[(e+="_")+"constructor"]=s.constructor;for(var o in s)i.hasOwnProperty(o)&&"function"==typeof s[o]&&(i[e+o]=s[o])}return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){for(var i=0,s=t.length;s>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var s;s=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var o=s[t];return o&&this.removeEventListener(t,e,i),o=s[t],o?o.push(e):s[t]=[e],e},e.on=function(t,e,i,s,o,r){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,o),s&&t.remove()},r)},e.removeEventListener=function(t,e,i){var s=i?this._captureListeners:this._listeners;if(s){var o=s[t];if(o)for(var r=0,n=o.length;n>r;r++)if(o[r]==e){1==n?delete s[t]:o.splice(r,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(i){}if(t.bubbles&&this.parent){for(var s=this,o=[s];s.parent;)o.push(s=s.parent);var r,n=o.length;for(r=n-1;r>=0&&!t.propagationStopped;r--)o[r]._dispatchEvent(t,1+(0==r));for(r=1;n>r&&!t.propagationStopped;r++)o[r]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,s=1==e?this._captureListeners:this._listeners;if(t&&s){var o=s[t.type];if(!o||!(i=o.length))return;try{t.currentTarget=this}catch(r){}try{t.eventPhase=e}catch(r){}t.removed=!1,o=o.slice();for(var n=0;i>n&&!t.immediatePropagationStopped;n++){var a=o[n];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){function t(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(t,"Event")}(window),function(){function t(e,s){function r(t){if(r[t]!==g)return r[t];var e;if("bug-string-char-index"==t)e="a"!="a"[0];else if("json"==t)e=r("json-stringify")&&r("json-parse");else{var i,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var h=s.stringify,c="function"==typeof h&&_;if(c){(i=function(){return 1}).toJSON=i;try{c="0"===h(0)&&"0"===h(new n)&&'""'==h(new a)&&h(y)===g&&h(g)===g&&h()===g&&"1"===h(i)&&"[1]"==h([i])&&"[null]"==h([g])&&"null"==h(null)&&"[null,null,null]"==h([g,y,null])&&h({a:[i,!0,!1,null,"\x00\b\n\f\r	"]})==o&&"1"===h(null,i)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==h(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==h(new l(-1))}catch(u){c=!1}}e=c}if("json-parse"==t){var d=s.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){i=d(o);var p=5==i.a.length&&1===i.a[0];if(p){try{p=!d('"	"')}catch(u){}if(p)try{p=1!==d("01")}catch(u){}if(p)try{p=1!==d("1.")}catch(u){}}}}catch(u){p=!1}e=p}}return r[t]=!!e}e||(e=o.Object()),s||(s=o.Object());var n=e.Number||o.Number,a=e.String||o.String,h=e.Object||o.Object,l=e.Date||o.Date,c=e.SyntaxError||o.SyntaxError,u=e.TypeError||o.TypeError,d=e.Math||o.Math,p=e.JSON||o.JSON;
"object"==typeof p&&p&&(s.stringify=p.stringify,s.parse=p.parse);var f,m,g,v=h.prototype,y=v.toString,_=new l(-0xc782b5b800cec);try{_=-109252==_.getUTCFullYear()&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(x){}if(!r("json")){var b="[object Function]",w="[object Date]",S="[object Number]",T="[object String]",C="[object Array]",P="[object Boolean]",A=r("bug-string-char-index");if(!_)var M=d.floor,E=[0,31,59,90,120,151,181,212,243,273,304,334],I=function(t,e){return E[e]+365*(t-1970)+M((t-1969+(e=+(e>1)))/4)-M((t-1901+e)/100)+M((t-1601+e)/400)};if((f=v.hasOwnProperty)||(f=function(t){var e,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=y?f=function(t){var e=this.__proto__,i=t in(this.__proto__=null,this);return this.__proto__=e,i}:(e=i.constructor,f=function(t){var i=(this.constructor||e).prototype;return t in this&&!(t in i&&this[t]===i[t])}),i=null,f.call(this,t)}),m=function(t,e){var s,o,r,n=0;(s=function(){this.valueOf=0}).prototype.valueOf=0,o=new s;for(r in o)f.call(o,r)&&n++;return s=o=null,n?m=2==n?function(t,e){var i,s={},o=y.call(t)==b;for(i in t)o&&"prototype"==i||f.call(s,i)||!(s[i]=1)||!f.call(t,i)||e(i)}:function(t,e){var i,s,o=y.call(t)==b;for(i in t)o&&"prototype"==i||!f.call(t,i)||(s="constructor"===i)||e(i);(s||f.call(t,i="constructor"))&&e(i)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(t,e){var s,r,n=y.call(t)==b,a=!n&&"function"!=typeof t.constructor&&i[typeof t.hasOwnProperty]&&t.hasOwnProperty||f;for(s in t)n&&"prototype"==s||!a.call(t,s)||e(s);for(r=o.length;s=o[--r];a.call(t,s)&&e(s));}),m(t,e)},!r("json-stringify")){var k={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},L="000000",R=function(t,e){return(L+(e||0)).slice(-t)},O="\\u00",B=function(t){for(var e='"',i=0,s=t.length,o=!A||s>10,r=o&&(A?t.split(""):t);s>i;i++){var n=t.charCodeAt(i);switch(n){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=k[n];break;default:if(32>n){e+=O+R(2,n.toString(16));break}e+=o?r[i]:t.charAt(i)}}return e+'"'},D=function(t,e,i,s,o,r,n){var a,h,l,c,d,p,v,_,x,b,A,E,k,L,O,F;try{a=e[t]}catch(j){}if("object"==typeof a&&a)if(h=y.call(a),h!=w||f.call(a,"toJSON"))"function"==typeof a.toJSON&&(h!=S&&h!=T&&h!=C||f.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&1/0>a){if(I){for(d=M(a/864e5),l=M(d/365.2425)+1970-1;I(l+1,0)<=d;l++);for(c=M((d-I(l,0))/30.42);I(l,c+1)<=d;c++);d=1+d-I(l,c),p=(a%864e5+864e5)%864e5,v=M(p/36e5)%24,_=M(p/6e4)%60,x=M(p/1e3)%60,b=p%1e3}else l=a.getUTCFullYear(),c=a.getUTCMonth(),d=a.getUTCDate(),v=a.getUTCHours(),_=a.getUTCMinutes(),x=a.getUTCSeconds(),b=a.getUTCMilliseconds();a=(0>=l||l>=1e4?(0>l?"-":"+")+R(6,0>l?-l:l):R(4,l))+"-"+R(2,c+1)+"-"+R(2,d)+"T"+R(2,v)+":"+R(2,_)+":"+R(2,x)+"."+R(3,b)+"Z"}else a=null;if(i&&(a=i.call(e,t,a)),null===a)return"null";if(h=y.call(a),h==P)return""+a;if(h==S)return a>-1/0&&1/0>a?""+a:"null";if(h==T)return B(""+a);if("object"==typeof a){for(L=n.length;L--;)if(n[L]===a)throw u();if(n.push(a),A=[],O=r,r+=o,h==C){for(k=0,L=a.length;L>k;k++)E=D(k,a,i,s,o,r,n),A.push(E===g?"null":E);F=A.length?o?"[\n"+r+A.join(",\n"+r)+"\n"+O+"]":"["+A.join(",")+"]":"[]"}else m(s||a,function(t){var e=D(t,a,i,s,o,r,n);e!==g&&A.push(B(t)+":"+(o?" ":"")+e)}),F=A.length?o?"{\n"+r+A.join(",\n"+r)+"\n"+O+"}":"{"+A.join(",")+"}":"{}";return n.pop(),F}};s.stringify=function(t,e,s){var o,r,n,a;if(i[typeof e]&&e)if((a=y.call(e))==b)r=e;else if(a==C){n={};for(var h,l=0,c=e.length;c>l;h=e[l++],a=y.call(h),(a==T||a==S)&&(n[h]=1));}if(s)if((a=y.call(s))==S){if((s-=s%1)>0)for(o="",s>10&&(s=10);o.length<s;o+=" ");}else a==T&&(o=s.length<=10?s:s.slice(0,10));return D("",(h={},h[""]=t,h),r,n,o,"",[])}}if(!r("json-parse")){var F,j,N=a.fromCharCode,U={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},z=function(){throw F=j=null,c()},G=function(){for(var t,e,i,s,o,r=j,n=r.length;n>F;)switch(o=r.charCodeAt(F)){case 9:case 10:case 13:case 32:F++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=A?r.charAt(F):r[F],F++,t;case 34:for(t="@",F++;n>F;)if(o=r.charCodeAt(F),32>o)z();else if(92==o)switch(o=r.charCodeAt(++F)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=U[o],F++;break;case 117:for(e=++F,i=F+4;i>F;F++)o=r.charCodeAt(F),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||z();t+=N("0x"+r.slice(e,F));break;default:z()}else{if(34==o)break;for(o=r.charCodeAt(F),e=F;o>=32&&92!=o&&34!=o;)o=r.charCodeAt(++F);t+=r.slice(e,F)}if(34==r.charCodeAt(F))return F++,t;z();default:if(e=F,45==o&&(s=!0,o=r.charCodeAt(++F)),o>=48&&57>=o){for(48==o&&(o=r.charCodeAt(F+1),o>=48&&57>=o)&&z(),s=!1;n>F&&(o=r.charCodeAt(F),o>=48&&57>=o);F++);if(46==r.charCodeAt(F)){for(i=++F;n>i&&(o=r.charCodeAt(i),o>=48&&57>=o);i++);i==F&&z(),F=i}if(o=r.charCodeAt(F),101==o||69==o){for(o=r.charCodeAt(++F),(43==o||45==o)&&F++,i=F;n>i&&(o=r.charCodeAt(i),o>=48&&57>=o);i++);i==F&&z(),F=i}return+r.slice(e,F)}if(s&&z(),"true"==r.slice(F,F+4))return F+=4,!0;if("false"==r.slice(F,F+5))return F+=5,!1;if("null"==r.slice(F,F+4))return F+=4,null;z()}return"$"},H=function(t){var e,i;if("$"==t&&z(),"string"==typeof t){if("@"==(A?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=G(),"]"!=t;i||(i=!0))i&&(","==t?(t=G(),"]"==t&&z()):z()),","==t&&z(),e.push(H(t));return e}if("{"==t){for(e={};t=G(),"}"!=t;i||(i=!0))i&&(","==t?(t=G(),"}"==t&&z()):z()),(","==t||"string"!=typeof t||"@"!=(A?t.charAt(0):t[0])||":"!=G())&&z(),e[t.slice(1)]=H(G());return e}z()}return t},X=function(t,e,i){var s=q(t,e,i);s===g?delete t[e]:t[e]=s},q=function(t,e,i){var s,o=t[e];if("object"==typeof o&&o)if(y.call(o)==C)for(s=o.length;s--;)X(o,s,i);else m(o,function(t){X(o,t,i)});return i.call(t,e,o)};s.parse=function(t,e){var i,s;return F=0,j=""+t,i=H(G()),"$"!=G()&&z(),F=j=null,e&&y.call(e)==b?q((s={},s[""]=i,s),"",e):i}}}return s.runInContext=t,s}var e="function"==typeof define&&define.amd,i={"function":!0,object:!0},s=i[typeof exports]&&exports&&!exports.nodeType&&exports,o=i[typeof window]&&window||this,r=s&&i[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!r||r.global!==r&&r.window!==r&&r.self!==r||(o=r),s&&!e)t(o,s);else{var n=o.JSON,a=o.JSON3,h=!1,l=t(o,o.JSON3={noConflict:function(){return h||(h=!0,o.JSON=n,o.JSON3=a,n=a=null),l}});o.JSON={parse:l.parse,stringify:l.stringify}}e&&define("preloader",[],function(){return l})}.call(this),function(){var t={};t.parseXML=function(t,e){var i=null;try{if(window.DOMParser){var s=new DOMParser;i=s.parseFromString(t,e)}else i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(t)}catch(o){}return i},t.parseJSON=function(t){if(null==t)return null;try{return JSON.parse(t)}catch(e){throw e}},createjs.DataUtils=t}(),this.createjs=this.createjs||{},function(){function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=8e3}var e=t.prototype={},i=t;i.create=function(e){if("string"==typeof e){var s=new t;return s.src=e,s}if(e instanceof i)return e;if(e instanceof Object)return e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={};t.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,t.RELATIVE_PATT=/^[.\/]*?\//i,t.EXTENSION_PATT=/\/?[^\/]+\.(\w{1,5})$/i,t.parseURI=function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var s=e.indexOf("?");s>-1&&(e=e.substr(0,s));var o;return t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(o=e.match(t.EXTENSION_PATT))&&(i.extension=o[1].toLowerCase()),i},t.formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var s in t)i.push(s+"="+escape(t[s]));return e&&(i=i.concat(e)),i.join("&")},t.buildPath=function(t,e){if(null==e)return t;var i=[],s=t.indexOf("?");if(-1!=s){var o=t.slice(s+1);i=i.concat(o.split("&"))}return-1!=s?t.slice(0,s)+"?"+this._formatQueryString(e,i):t+"?"+this._formatQueryString(e,i)},t.isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");i.href=location.href;var s=""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname);return s},t.isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},t.isBinary=function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},t.isImageTag=function(t){return t instanceof HTMLImageElement},t.isAudioTag=function(t){return window.HTMLAudioElement?t instanceof HTMLAudioElement:!1},t.isVideoTag=function(t){return window.HTMLVideoElement?t instanceof HTMLVideoElement:void 0},t.isText=function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:return!0;default:return!1}},t.getTypeByExtension=function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this),i=this;e instanceof Function?e(function(t){i._result=t,i._sendComplete()}):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(t.type)}},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._formatResult=function(t){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(t.getTag().src=t.getResult(!0)),t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0),this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._tag[this._tagSrcAttribute]=this._item.src},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){this._tag.onstalled=createjs.proxy(this._handleStalled,this),this._tag.onprogress=createjs.proxy(this._handleProgress,this),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._tag.onprogress=null,this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}},e.setResponseType=function(t){this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){this.loaded=!0;var t=this._checkError();if(t)return void this._handleError(t);this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},o=null;if(window.XMLHttpRequest)o=new XMLHttpRequest,e&&void 0===o.withCredentials&&window.XDomainRequest&&(o=new XDomainRequest);else{for(var r=0,n=s.ACTIVEX_VERSIONS.length;n>r;r++){s.ACTIVEX_VERSIONS[r];try{o=new ActiveXObject(axVersions);break}catch(a){}}if(null==o)return!1}t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof o.responseType?2:1;var h=null;if(h=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,o.open(t.method||createjs.AbstractLoader.GET,h,!0),e&&o instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var l in t.headers)i[l]=t.headers[l];for(l in i)o.setRequestHeader(l,i[l]);return o instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(o.withCredentials=t.withCredentials),this._request=o,!0},e._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractLoader_constructor(),this.init(t,e,i)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;e.init=function(t,e,i){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(t),this.stopOnError=!1,this.maintainScriptOrder=!0,this.next=null,this._paused=!1,this._basePath=e,this._crossOrigin=i,this._typeCallbacks={},this._extensionCallbacks={},this._loadStartWasDispatched=!1,this._maxConnections=1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length},i.loadTimeout=8e3,i.LOAD_TIMEOUT=0,i.BINARY=createjs.AbstractLoader.BINARY,i.CSS=createjs.AbstractLoader.CSS,i.IMAGE=createjs.AbstractLoader.IMAGE,i.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,i.JSON=createjs.AbstractLoader.JSON,i.JSONP=createjs.AbstractLoader.JSONP,i.MANIFEST=createjs.AbstractLoader.MANIFEST,i.SOUND=createjs.AbstractLoader.SOUND,i.VIDEO=createjs.AbstractLoader.VIDEO,i.SVG=createjs.AbstractLoader.SVG,i.TEXT=createjs.AbstractLoader.TEXT,i.XML=createjs.AbstractLoader.XML,i.POST=createjs.AbstractLoader.POST,i.GET=createjs.AbstractLoader.GET,e.registerLoader=function(t){if(!t||!t.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(t))throw new Error("loader already exists.");this._availableLoaders.unshift(t)},e.unregisterLoader=function(t){var e=this._availableLoaders.indexOf(t);-1!=e&&e<this._defaultLoaderLength-1&&this._availableLoaders.splice(e,1)},e.setUseXHR=function(t){return this.setPreferXHR(t)},e.setPreferXHR=function(t){return this.preferXHR=0!=t&&null!=window.XMLHttpRequest,this.preferXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(!t||t instanceof Array){if(t)e=t;else if(arguments.length>0)return}else e=[t];var i=!1;if(e){for(;e.length;){var s=e.pop(),o=this.getResult(s);for(r=this._loadQueue.length-1;r>=0;r--)if(n=this._loadQueue[r].getItem(),n.id==s||n.src==s){this._loadQueue.splice(r,1)[0].cancel();break}for(r=this._loadQueueBackup.length-1;r>=0;r--)if(n=this._loadQueueBackup[r].getItem(),n.id==s||n.src==s){this._loadQueueBackup.splice(r,1)[0].cancel();break}if(o)delete this._loadItemsById[o.id],delete this._loadItemsBySrc[o.src],this._disposeItem(o);else for(var r=this._currentLoads.length-1;r>=0;r--){var n=this._currentLoads[r].getItem();if(n.id==s||n.src==s){this._currentLoads.splice(r,1)[0].cancel(),i=!0;break}}}i&&this._loadNext()}else{this.close();for(var a in this._loadItemsById)this._disposeItem(this._loadItemsById[a]);this.init(this.preferXHR,this._basePath)}},e.reset=function(){this.close();for(var t in this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],i=0,s=this._loadQueueBackup.length;s>i;i++)e.push(this._loadQueueBackup[i].getItem());this.loadManifest(e,!1)},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var i=0,s=e.types.length;s>i;i++)this._typeCallbacks[e.types[i]]=e;if(null!=e.extensions)for(i=0,s=e.extensions.length;s>i;i++)this._extensionCallbacks[e.extensions[i]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,i){if(null==t){var s=new createjs.ErrorEvent("PRELOAD_NO_FILE");return void this._sendError(s)}this._addItem(t,null,i),this.setPaused(e!==!1?!1:!0)},e.loadManifest=function(t,e,s){var o=null,r=null;if(t instanceof Array){if(0==t.length){var n=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(n)}o=t}else if("string"==typeof t)o=[{src:t,type:i.MANIFEST}];else{if("object"!=typeof t){var n=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(n)}if(void 0!==t.src){if(null==t.type)t.type=i.MANIFEST;else if(t.type!=i.MANIFEST){var n=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(n)}o=[t]}else void 0!==t.manifest&&(o=t.manifest,r=t.path)}for(var a=0,h=o.length;h>a;a++)this._addItem(o[a],r,s);this.setPaused(e!==!1?!1:!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var i=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==i)return null;var s=i.id;return e&&this._loadedRawResults[s]?this._loadedRawResults[s]:this._loadedResults[s]},e.getItems=function(t){for(var e=[],i=0,s=this._loadQueueBackup.length;s>i;i++){var o=this._loadQueueBackup[i],r=o.getItem();(t!==!0||o.loaded)&&e.push({item:r,result:this.getResult(r.id),rawResult:this.getResult(r.id,!0)})}return e},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},e._addItem=function(t,e,i){var s=this._createLoadItem(t,e,i);if(null!=s){var o=this._createLoader(s);null!=o&&(s._loader=o,this._loadQueue.push(o),this._loadQueueBackup.push(o),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&s.type==createjs.LoadQueue.JAVASCRIPT||s.maintainOrder===!0)&&(this._scriptOrder.push(s),this._loadedScripts.push(null)))}},e._createLoadItem=function(t,e,s){var o=createjs.LoadItem.create(t);if(null==o)return null;var r=createjs.RequestUtils.parseURI(o.src);r.extension&&(o.ext=r.extension),null==o.type&&(o.type=createjs.RequestUtils.getTypeByExtension(o.ext));var n="",a=s||this._basePath,h=o.src;if(!r.absolute&&!r.relative)if(e){n=e;var l=createjs.RequestUtils.parseURI(e);h=e+h,null==a||l.absolute||l.relative||(n=a+n)}else null!=a&&(n=a);o.src=n+o.src,o.path=n,(void 0===o.id||null===o.id||""===o.id)&&(o.id=h);var c=this._typeCallbacks[o.type]||this._extensionCallbacks[o.ext];if(c){var u=c.callback.call(c.scope,o,this);if(u===!1)return null;u===!0||null!=u&&(o._loader=u),r=createjs.RequestUtils.parseURI(o.src),null!=r.extension&&(o.ext=r.extension)}return this._loadItemsById[o.id]=o,this._loadItemsBySrc[o.src]=o,null==o.loadTimeout&&(o.loadTimeout=i.loadTimeout),null==o.crossOrigin&&(o.crossOrigin=this._crossOrigin),o},e._createLoader=function(t){if(null!=t._loader)return t._loader;for(var e=this.preferXHR,i=0;i<this._availableLoaders.length;i++){var s=this._availableLoaders[i];if(s&&s.canLoadItem(t))return new s(t,e)}return null},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];this._canStartLoad(e)&&(this._loadQueue.splice(t,1),t--,this._loadItem(e))}}},e._loadItem=function(t){t.on("fileload",this._handleFileLoad,this),t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleError,this),t.on("fileerror",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleFileError=function(t){var e=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.item);this._sendError(e)},e._handleError=function(t){var e=t.target;this._numItemsLoaded++,this._finishOrderedItem(e,!0),this._updateProgress();var i=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.getItem());this._sendError(i),this.stopOnError||(this._removeLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,i=e.getItem(),s=e.getResult();this._loadedResults[i.id]=s;var o=e.getResult(!0);null!=o&&o!==s&&(this._loadedRawResults[i.id]=o),this._saveLoadedItems(e),this._removeLoadItem(e),this._finishOrderedItem(e)||this._processFinishedLoad(i,e)},e._saveLoadedItems=function(t){var e=t.getLoadedItems();if(null!==e)for(var i=0;i<e.length;i++){var s=e[i].item;this._loadItemsBySrc[s.src]=s,this._loadItemsById[s.id]=s,this._loadedResults[s.id]=e[i].result,this._loadedRawResults[s.id]=e[i].rawResult}},e._finishOrderedItem=function(t,e){var i=t.getItem();if(this.maintainScriptOrder&&i.type==createjs.LoadQueue.JAVASCRIPT||i.maintainOrder){t instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var s=createjs.indexOf(this._scriptOrder,i);return-1==s?!1:(this._loadedScripts[s]=e===!0?!0:i,this._checkScriptLoadOrder(),!0)}return!1},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var i=this._loadedScripts[e];if(null===i)break;if(i!==!0){var s=this._loadedResults[i.id];i.type==createjs.LoadQueue.JAVASCRIPT&&(document.body||document.getElementsByTagName("body")[0]).appendChild(s);var o=i._loader;this._processFinishedLoad(i,o),this._loadedScripts[e]=!0}}},e._processFinishedLoad=function(t,e){this._numItemsLoaded++,this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._canStartLoad=function(t){if(!this.maintainScriptOrder||t.preferXHR)return!0;
var e=t.getItem();if(e.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var i=this._scriptOrder.indexOf(e),s=0;i>s;){var o=this._loadedScripts[s];if(null==o)return!1;s++}return this._currentlyLoadingScript=!0,!0},e._removeLoadItem=function(t){var e=t.getItem();delete e._loader;for(var i=this._currentLoads.length,s=0;i>s;s++)if(this._currentLoads[s]==t){this._currentLoads.splice(s,1);break}},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var i=0,s=0,o=this._currentLoads.length;o>s;s++)i+=this._currentLoads[s].progress;t+=i/e*(e/this._numItems)}this._lastProgress!=t&&(this._sendProgress(t),this._lastProgress=t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._sendFileProgress=function(t,e){if(this._isCanceled())return void this._cleanUp();if(this.hasEventListener("fileprogress")){var i=new createjs.Event("fileprogress");i.progress=e,i.loaded=e,i.total=1,i.item=t,this.dispatchEvent(i)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()){var i=new createjs.Event("fileload");i.loader=e,i.item=t,i.result=this._loadedResults[t.id],i.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(i),this.hasEventListener("fileload")&&this.dispatchEvent(i)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.TEXT)}var e=(createjs.extend(t,createjs.AbstractLoader),t);e.canLoadItem=function(t){return t.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.BINARY},e._updateXHR=function(t){t.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=document.createElement(e?"style":"link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.CSS},e._formatResult=function(t){if(this._preferXHR){var e=t.getTag(),i=document.getElementsByTagName("head")[0];if(i.appendChild(e),e.styleSheet)e.styleSheet.cssText=t.getResult(!0);else{var s=document.createTextNode(t.getResult(!0));e.appendChild(s)}}else e=this._tag;return e},createjs.CSSLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(t)?this._tag=t:createjs.RequestUtils.isImageTag(t.src)?this._tag=t.src:createjs.RequestUtils.isImageTag(t.tag)&&(this._tag=t.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.IMAGE},e.load=function(){if(""!=this._tag.src&&this._tag.complete)return void this._sendComplete();var t=this._item.crossOrigin;1==t&&(t="Anonymous"),null==t||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=t),this.AbstractLoader_load()},e._updateXHR=function(t){t.loader.mimeType="text/plain; charset=x-user-defined-binary",t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){var e=this;return function(i){var s=e._tag,o=window.URL||window.webkitURL;if(e._preferXHR)if(o){var r=o.createObjectURL(t.getResult(!0));s.src=r,s.onload=function(){o.revokeObjectURL(e.src)}}else s.src=t.getItem().src;s.complete?i(s):s.onload=function(){i(this)}}},createjs.ImageLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JAVASCRIPT},e._formatResult=function(t){var e=t.getTag();return this._preferXHR&&(e.text=t.getResult(!0)),e},createjs.JavaScriptLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSON&&!t._loadAsJSONP},e._formatResult=function(t){var e=null;try{e=createjs.DataUtils.parseJSON(t.getResult(!0))}catch(i){var s=new createjs.ErrorEvent("JSON_FORMAT",null,i);return this._sendError(s),i}return e},createjs.JSONLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSONP||t._loadAsJSONP},e.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},e.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._tag.src=this._item.src},e._handleLoad=function(t){this._result=this._rawResult=t,this._sendComplete(),this._dispose()},e._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback]},createjs.JSONPLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.MANIFEST),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.MANIFEST_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.MANIFEST},e.load=function(){this.AbstractLoader_load()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.MANIFEST_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._loadManifest=function(t){if(t&&t.manifest){var e=this._manifestQueue=new createjs.LoadQueue;e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("complete",this._handleManifestComplete,this,!0),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t)}else this._sendComplete()},e._handleManifestFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleManifestComplete=function(){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.MANIFEST_PROGRESS)+i.MANIFEST_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.ManifestLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(t)||createjs.RequestUtils.isVideoTag(t.src)?(this.setTag(createjs.RequestUtils.isVideoTag(t)?t:t.src),this._preferXHR=!1):this.setTag(this._createTag())}var e=createjs.extend(t,createjs.AbstractMediaLoader),i=t;e._createTag=function(){return document.createElement("video")},i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.SPRITESHEET_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SPRITESHEET},e.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t&&t instanceof Function?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.SPRITESHEET_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e._loadManifest=function(t){if(t&&t.images){var e=this._manifestQueue=new createjs.LoadQueue;e.on("complete",this._handleManifestComplete,this,!0),e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t.images)}},e._handleManifestFileLoad=function(t){var e=t.result;if(null!=e){var i=this.getResult().images,s=i.indexOf(t.item.src);i[s]=e}},e._handleManifestComplete=function(){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.SPRITESHEET_PROGRESS)+i.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.SpriteSheetLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",e?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml"),this.getTag().style.visibility="hidden"}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SVG},e._formatResult=function(t){var e=createjs.DataUtils.parseXML(t.getResult(!0),"text/xml"),i=t.getTag();return!this._preferXHR&&document.body.contains(i)&&document.body.removeChild(i),null!=e.documentElement?(i.appendChild(e.documentElement),i.style.visibility="visible",i):e},createjs.SVGLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.XML},e._formatResult=function(t){return createjs.DataUtils.parseXML(t.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var t=createjs.SoundJS=createjs.SoundJS||{};t.version="0.6.0",t.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){var i=t.prototype,s=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(s){i[(e+="_")+"constructor"]=s.constructor;for(var o in s)i.hasOwnProperty(o)&&"function"==typeof s[o]&&(i[e+o]=s[o])}return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){for(var i=0,s=t.length;s>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){var t=Object.defineProperty?!0:!1,e={};try{Object.defineProperty(e,"bar",{get:function(){return this._bar},set:function(t){this._bar=t}})}catch(i){t=!1}createjs.definePropertySupported=t}(),this.createjs=this.createjs||{},function(){function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var s;s=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var o=s[t];return o&&this.removeEventListener(t,e,i),o=s[t],o?o.push(e):s[t]=[e],e},e.on=function(t,e,i,s,o,r){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,o),s&&t.remove()},r)},e.removeEventListener=function(t,e,i){var s=i?this._captureListeners:this._listeners;if(s){var o=s[t];if(o)for(var r=0,n=o.length;n>r;r++)if(o[r]==e){1==n?delete s[t]:o.splice(r,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(i){}if(t.bubbles&&this.parent){for(var s=this,o=[s];s.parent;)o.push(s=s.parent);var r,n=o.length;for(r=n-1;r>=0&&!t.propagationStopped;r--)o[r]._dispatchEvent(t,1+(0==r));for(r=1;n>r&&!t.propagationStopped;r++)o[r]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,s=1==e?this._captureListeners:this._listeners;if(t&&s){var o=s[t.type];if(!o||!(i=o.length))return;try{t.currentTarget=this}catch(r){}try{t.eventPhase=e}catch(r){}t.removed=!1,o=o.slice();for(var n=0;i>n&&!t.immediatePropagationStopped;n++){var a=o[n];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(t,"Event")}(window),this.createjs=this.createjs||{},function(){function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin="Anonymous",this.loadTimeout=8e3}var e=t.prototype={},i=t;i.create=function(e){if("string"==typeof e){var s=new t;return s.src=e,s}if(e instanceof i)return e;if(e instanceof Object)return e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={};t.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,t.RELATIVE_PATT=/^[.\/]*?\//i,t.EXTENSION_PATT=/\/?[^\/]+\.(\w{1,5})$/i,t.parseURI=function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var s=e.indexOf("?");s>-1&&(e=e.substr(0,s));var o;return t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(o=e.match(t.EXTENSION_PATT))&&(i.extension=o[1].toLowerCase()),i},t.formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var s in t)i.push(s+"="+escape(t[s]));return e&&(i=i.concat(e)),i.join("&")},t.buildPath=function(t,e){if(null==e)return t;var i=[],s=t.indexOf("?");if(-1!=s){var o=t.slice(s+1);i=i.concat(o.split("&"))}return-1!=s?t.slice(0,s)+"?"+this._formatQueryString(e,i):t+"?"+this._formatQueryString(e,i)},t.isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");i.href=location.href;var s=""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname);return s},t.isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},t.isBinary=function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},t.isImageTag=function(t){return t instanceof HTMLImageElement},t.isAudioTag=function(t){return window.HTMLAudioElement?t instanceof HTMLAudioElement:!1},t.isVideoTag=function(t){return window.HTMLVideoElement?t instanceof HTMLVideoElement:void 0},t.isText=function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:return!0;default:return!1}},t.getTypeByExtension=function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this),i=this;e instanceof Function?e(function(t){i._result=t,i._sendComplete()}):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(t.type)}},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._formatResult=function(t){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(t.getTag().src=t.getResult(!0)),t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0),this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._tag[this._tagSrcAttribute]=this._item.src},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){this._tag.onstalled=createjs.proxy(this._handleStalled,this),this._tag.onprogress=createjs.proxy(this._handleProgress,this),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._tag.onprogress=null,this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}},e.setResponseType=function(t){this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){this.loaded=!0;var t=this._checkError();if(t)return void this._handleError(t);this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){
var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},o=null;if(window.XMLHttpRequest)o=new XMLHttpRequest,e&&void 0===o.withCredentials&&window.XDomainRequest&&(o=new XDomainRequest);else{for(var r=0,n=s.ACTIVEX_VERSIONS.length;n>r;r++){s.ACTIVEX_VERSIONS[r];try{o=new ActiveXObject(axVersions);break}catch(a){}}if(null==o)return!1}t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof o.responseType?2:1;var h=null;if(h=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,o.open(t.method||createjs.AbstractLoader.GET,h,!0),e&&o instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var l in t.headers)i[l]=t.headers[l];for(l in i)o.setRequestHeader(l,i[l]);return o instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(o.withCredentials=t.withCredentials),this._request=o,!0},e._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){function t(){throw"Sound cannot be instantiated"}function e(t,e){this.init(t,e)}var i=t;i.INTERRUPT_ANY="any",i.INTERRUPT_EARLY="early",i.INTERRUPT_LATE="late",i.INTERRUPT_NONE="none",i.PLAY_INITED="playInited",i.PLAY_SUCCEEDED="playSucceeded",i.PLAY_INTERRUPTED="playInterrupted",i.PLAY_FINISHED="playFinished",i.PLAY_FAILED="playFailed",i.SUPPORTED_EXTENSIONS=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"],i.EXTENSION_MAP={m4a:"mp4"},i.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?((?:[^\/?]+)\.(\w+))(?:\?(\S+)?)?$/,i.defaultInterruptBehavior=i.INTERRUPT_NONE,i.alternateExtensions=[],i.activePlugin=null,i._pluginsRegistered=!1,i._lastID=0,i._masterVolume=1,i._masterMute=!1,i._instances=[],i._idHash={},i._preloadHash={},i.addEventListener=null,i.removeEventListener=null,i.removeAllEventListeners=null,i.dispatchEvent=null,i.hasEventListener=null,i._listeners=null,createjs.EventDispatcher.initialize(i),i.getPreloadHandlers=function(){return{callback:createjs.proxy(i.initLoad,i),types:["sound"],extensions:i.SUPPORTED_EXTENSIONS}},i._handleLoadComplete=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var s=0,o=i._preloadHash[e].length;o>s;s++){var r=i._preloadHash[e][s];if(i._preloadHash[e][s]=!0,i.hasEventListener("fileload")){var t=new createjs.Event("fileload");t.src=r.src,t.id=r.id,t.data=r.data,t.sprite=r.sprite,i.dispatchEvent(t)}}},i._handleLoadError=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var s=0,o=i._preloadHash[e].length;o>s;s++){var r=i._preloadHash[e][s];if(i._preloadHash[e][s]=!1,i.hasEventListener("fileerror")){var t=new createjs.Event("fileerror");t.src=r.src,t.id=r.id,t.data=r.data,t.sprite=r.sprite,i.dispatchEvent(t)}}},i._registerPlugin=function(t){return t.isSupported()?(i.activePlugin=new t,!0):!1},i.registerPlugins=function(t){i._pluginsRegistered=!0;for(var e=0,s=t.length;s>e;e++)if(i._registerPlugin(t[e]))return!0;return!1},i.initializeDefaultPlugins=function(){return null!=i.activePlugin?!0:i._pluginsRegistered?!1:i.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},i.isReady=function(){return null!=i.activePlugin},i.getCapabilities=function(){return null==i.activePlugin?null:i.activePlugin._capabilities},i.getCapability=function(t){return null==i.activePlugin?null:i.activePlugin._capabilities[t]},i.initLoad=function(t){return i._registerSound(t)},i._registerSound=function(t){if(!i.initializeDefaultPlugins())return!1;var s=i._parsePath(t.src);if(null==s)return!1;t.src=s.src,t.type="sound";var o=t.data,r=i.activePlugin.defaultNumChannels||null;if(null!=o&&(isNaN(o.channels)?isNaN(o)||(r=parseInt(o)):r=parseInt(o.channels),o.audioSprite))for(var n,a=o.audioSprite.length;a--;)n=o.audioSprite[a],i._idHash[n.id]={src:t.src,startTime:parseInt(n.startTime),duration:parseInt(n.duration)};null!=t.id&&(i._idHash[t.id]={src:t.src});var h=i.activePlugin.register(t,r);return e.create(t.src,r),null!=o&&isNaN(o)?t.data.channels=r||e.maxPerChannel():t.data=r||e.maxPerChannel(),h.type&&(t.type=h.type),h},i.registerSound=function(t,e,s,o){var r={src:t,id:e,data:s};t instanceof Object&&(o=e,r=t),r=createjs.LoadItem.create(r),null!=o&&(r.src=o+t);var n=i._registerSound(r);if(!n)return!1;if(i._preloadHash[r.src]||(i._preloadHash[r.src]=[]),i._preloadHash[r.src].push(r),1==i._preloadHash[r.src].length)n.on("complete",createjs.proxy(this._handleLoadComplete,this)),n.on("error",createjs.proxy(this._handleLoadError,this)),i.activePlugin.preload(n);else if(1==i._preloadHash[r.src][0])return!0;return r},i.registerSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path);for(var s=0,o=t.length;o>s;s++)i[s]=createjs.Sound.registerSound(t[s].src,t[s].id,t[s].data,e);return i},i.registerManifest=function(t,e){try{}catch(i){}return this.registerSounds(t,e)},i.removeSound=function(t,s){if(null==i.activePlugin)return!1;t instanceof Object&&(t=t.src),t=i._getSrcById(t).src,null!=s&&(t=s+t);var o=i._parsePath(t);if(null==o)return!1;t=o.src;for(var r in i._idHash)i._idHash[r].src==t&&delete i._idHash[r];return e.removeSrc(t),delete i._preloadHash[t],i.activePlugin.removeSound(t),!0},i.removeSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path);for(var s=0,o=t.length;o>s;s++)i[s]=createjs.Sound.removeSound(t[s].src,e);return i},i.removeManifest=function(t,e){try{}catch(s){}return i.removeSounds(t,e)},i.removeAllSounds=function(){i._idHash={},i._preloadHash={},e.removeAll(),i.activePlugin&&i.activePlugin.removeAllSounds()},i.loadComplete=function(t){if(!i.isReady())return!1;var e=i._parsePath(t);return t=e?i._getSrcById(e.src).src:i._getSrcById(t).src,1==i._preloadHash[t][0]},i._parsePath=function(t){"string"!=typeof t&&(t=t.toString());var e=t.match(i.FILE_PATTERN);if(null==e)return!1;for(var s=e[4],o=e[5],r=i.getCapabilities(),n=0;!r[o];)if(o=i.alternateExtensions[n++],n>i.alternateExtensions.length)return null;t=t.replace("."+e[5],"."+o);var a={name:s,src:t,extension:o};return a},i.play=function(t,e,s,o,r,n,a,h,l){e instanceof Object&&(s=e.delay,o=e.offset,r=e.loop,n=e.volume,a=e.pan,h=e.startTime,l=e.duration,e=e.interrupt);var c=i.createInstance(t,h,l),u=i._playInstance(c,e,s,o,r,n,a);return u||c._playFailed(),c},i.createInstance=function(t,s,o){if(!i.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(t,s,o);t=i._getSrcById(t);var r=i._parsePath(t.src),n=null;return null!=r&&null!=r.src?(e.create(r.src),null==s&&(s=t.startTime),n=i.activePlugin.create(r.src,s,o||t.duration)):n=new createjs.DefaultSoundInstance(t,s,o),n.uniqueId=i._lastID++,n},i.setVolume=function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,s=0,o=e.length;o>s;s++)e[s].setMasterVolume(t)},i.getVolume=function(){return i._masterVolume},i.setMute=function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,s=e.length;s>i;i++)e[i].setMasterMute(t);return!0},i.getMute=function(){return this._masterMute},i.stop=function(){for(var t=this._instances,e=t.length;e--;)t[e].stop()},i._playInstance=function(t,e,s,o,r,n,a){if(e instanceof Object&&(s=e.delay,o=e.offset,r=e.loop,n=e.volume,a=e.pan,e=e.interrupt),e=e||i.defaultInterruptBehavior,null==s&&(s=0),null==o&&(o=t.getPosition()),null==r&&(r=t.loop),null==n&&(n=t.volume),null==a&&(a=t.pan),0==s){var h=i._beginPlaying(t,e,o,r,n,a);if(!h)return!1}else{var l=setTimeout(function(){i._beginPlaying(t,e,o,r,n,a)},s);t.delayTimeoutId=l}return this._instances.push(t),!0},i._beginPlaying=function(t,i,s,o,r,n){if(!e.add(t,i))return!1;var a=t._beginPlaying(s,o,r,n);if(!a){var h=createjs.indexOf(this._instances,t);return h>-1&&this._instances.splice(h,1),!1}return!0},i._getSrcById=function(t){return i._idHash[t]||{src:t}},i._playFinished=function(t){e.remove(t);var i=createjs.indexOf(this._instances,t);i>-1&&this._instances.splice(i,1)},createjs.Sound=t,e.channels={},e.create=function(t,i){var s=e.get(t);return null==s?(e.channels[t]=new e(t,i),!0):!1},e.removeSrc=function(t){var i=e.get(t);return null==i?!1:(i._removeAll(),delete e.channels[t],!0)},e.removeAll=function(){for(var t in e.channels)e.channels[t]._removeAll();e.channels={}},e.add=function(t,i){var s=e.get(t.src);return null==s?!1:s._add(t,i)},e.remove=function(t){var i=e.get(t.src);return null==i?!1:(i._remove(t),!0)},e.maxPerChannel=function(){return s.maxDefault},e.get=function(t){return e.channels[t]};var s=e.prototype;s.constructor=e,s.src=null,s.max=null,s.maxDefault=100,s.length=0,s.init=function(t,e){this.src=t,this.max=e||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},s._get=function(t){return this._instances[t]},s._add=function(t,e){return this._getSlot(e,t)?(this._instances.push(t),this.length++,!0):!1},s._remove=function(t){var e=createjs.indexOf(this._instances,t);return-1==e?!1:(this._instances.splice(e,1),this.length--,!0)},s._removeAll=function(){for(var t=this.length-1;t>=0;t--)this._instances[t].stop()},s._getSlot=function(e){var i,s;if(e!=t.INTERRUPT_NONE&&(s=this._get(0),null==s))return!0;for(var o=0,r=this.max;r>o;o++){if(i=this._get(o),null==i)return!0;if(i.playState==t.PLAY_FINISHED||i.playState==t.PLAY_INTERRUPTED||i.playState==t.PLAY_FAILED){s=i;break}e!=t.INTERRUPT_NONE&&(e==t.INTERRUPT_EARLY&&i.getPosition()<s.getPosition()||e==t.INTERRUPT_LATE&&i.getPosition()>s.getPosition())&&(s=i)}return null!=s?(s._interrupt(),this._remove(s),!0):!1},s.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){var t=function(t,e,i,s){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._startTime=Math.max(0,e||0),this._volume=1,createjs.definePropertySupported&&Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,createjs.definePropertySupported&&Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._duration=Math.max(0,i||0),createjs.definePropertySupported&&Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,createjs.definePropertySupported&&Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),s!==!1&&s!==!0&&this.setPlaybackResource(s),this._position=0,createjs.definePropertySupported&&Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,createjs.definePropertySupported&&Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,createjs.definePropertySupported&&Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,createjs.definePropertySupported&&Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},e=createjs.extend(t,createjs.EventDispatcher);e.play=function(t,e,i,s,o,r){return this.playState==createjs.Sound.PLAY_SUCCEEDED?(t instanceof Object&&(i=t.offset,s=t.loop,o=t.volume,r=t.pan),null!=i&&this.setPosition(i),null!=s&&this.setLoop(s),null!=o&&this.setVolume(o),null!=r&&this.setPan(r),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,t,e,i,s,o,r),this)},e.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?!1:(this.setPaused(!0),!0)},e.resume=function(){return this._paused?(this.setPaused(!1),!0):!1},e.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},e.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},e.toString=function(){return"[AbstractSoundInstance]"},e.getPaused=function(){return this._paused},e.setPaused=function(t){return t!==!0&&t!==!1||this._paused==t||1==t&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=t,t?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},e.setVolume=function(t){return t==this._volume?this:(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume(),this)},e.getVolume=function(){return this._volume},e.setMute=function(t){this.setMuted(t)},e.getMute=function(){return this._muted},e.setMuted=function(t){return t===!0||t===!1?(this._muted=t,this._updateVolume(),this):void 0},e.getMuted=function(){return this._muted},e.setPan=function(t){return t==this._pan?this:(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan(),this)},e.getPan=function(){return this._pan},e.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?this._position:this._calculateCurrentPosition()},e.setPosition=function(t){return this._position=Math.max(0,t),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},e.getDuration=function(){return this._duration},e.setDuration=function(t){return t==this._duration?this:(this._duration=Math.max(0,t||0),this._updateDuration(),this)},e.setPlaybackResource=function(t){return this._playbackResource=t,0==this._duration&&this._setDurationFromSource(),this},e.getPlaybackResource=function(){return this._playbackResource},e.getLoop=function(){return this._loop},e.setLoop=function(t){null!=this._playbackResource&&(0!=this._loop&&0==t&&this._removeLooping(t),0==this._loop&&0!=t&&this._addLooping(t)),this._loop=t},e._sendEvent=function(t){var e=new createjs.Event(t);this.dispatchEvent(e)},e._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},e._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},e._beginPlaying=function(t,e,i,s){return this.setPosition(t),this.setLoop(e),this.setVolume(i),this.setPan(s),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},e._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},e._handleSoundReady=function(){},e._updateVolume=function(){},e._updatePan=function(){},e._updateDuration=function(){},e._setDurationFromSource=function(){},e._calculateCurrentPosition=function(){},e._updatePosition=function(){},e._removeLooping=function(){},e._addLooping=function(){},e._pause=function(){},e._resume=function(){},e._handleStop=function(){},e._handleCleanUp=function(){},e._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(t,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){var t=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._loaderClass,this._soundInstanceClass},e=t.prototype;t._capabilities=null,t.isSupported=function(){return!0},e.register=function(t){if(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],this._loaders[t.src])return this._loaders[t.src];var e=new this._loaderClass(t);return e.on("complete",createjs.proxy(this._handlePreloadComplete,this)),this._loaders[t.src]=e,e},e.preload=function(t){t.on("error",createjs.proxy(this._handlePreloadError,this)),t.load()},e.isPreloadStarted=function(t){return null!=this._audioSources[t]},e.isPreloadComplete=function(t){return!(null==this._audioSources[t]||1==this._audioSources[t])},e.removeSound=function(t){if(this._soundInstances[t]){for(var e=this._soundInstances[t].length;e--;){var i=this._soundInstances[t][e];i.destroy()}delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},e.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},e.create=function(t,e,i){this.isPreloadStarted(t)||this.preload(this.register(t));var s=new this._soundInstanceClass(t,e,i,this._audioSources[t]);return this._soundInstances[t].push(s),s},e.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},e.getVolume=function(){return this._volume},e.setMute=function(){return this._updateVolume(),!0},e.toString=function(){return"[AbstractPlugin]"},e._handlePreloadComplete=function(t){var e=t.target.getItem().src;this._audioSources[e]=t.result;for(var i=0,s=this._soundInstances[e].length;s>i;i++){var o=this._soundInstances[e][i];o.setPlaybackResource(this._audioSources[e])}},e._handlePreloadError=function(){},e._updateVolume=function(){},createjs.AbstractPlugin=t}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.SOUND)}var e=createjs.extend(t,createjs.AbstractLoader);t.context=null,e.toString=function(){return"[WebAudioLoader]"},e._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},e._sendComplete=function(){t.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._handleError,this))},e._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e,s,o){this.AbstractSoundInstance_constructor(t,e,s,o),this.gainNode=i.context.createGain(),this.panNode=i.context.createPanner(),this.panNode.panningModel=i._panningModel,this.panNode.connect(this.gainNode),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),i=t;i.context=null,i.destinationNode=null,i._panningModel="equalpower",e.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},e.toString=function(){return"[WebAudioSoundInstance]"},e._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},e._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},e._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},e._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},e._cleanUpAudioNode=function(t){return t&&(t.stop(0),t.disconnect(0),t=null),t},e._handleSoundReady=function(){this.gainNode.connect(i.destinationNode);var t=.001*this._duration,e=.001*this._position;this.sourceNode=this._createAndPlayAudioNode(i.context.currentTime-t,e),this._playbackStartTime=this.sourceNode.startTime-e,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(t-e)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._createAndPlayAudioNode=function(t,e){var s=i.context.createBufferSource();s.buffer=this.playbackResource,s.connect(this.panNode);var o=.001*this._duration;return s.startTime=t+o,s.start(s.startTime,e+.001*this._startTime,o-e),s},e._pause=function(){this._position=1e3*(i.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},e._resume=function(){this._handleSoundReady()},e._updateVolume=function(){var t=this._muted?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},e._calculateCurrentPosition=function(){return 1e3*(i.context.currentTime-this._playbackStartTime)},e._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},e._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},e._updateDuration=function(){this._pause(),this._resume()},createjs.WebAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){function t(){this.AbstractPlugin_constructor(),this._panningModel=i._panningModel,this._volume=1,this.context=i.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=i._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i._capabilities=null,i._panningModel="equalpower",i.context=null,i.isSupported=function(){var t=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return"file:"!=location.protocol||t||this._isFileXHRSupported()?(i._generateCapabilities(),null==i.context?!1:!0):!1},i.playEmptySound=function(){var t=i.context.createBufferSource();t.buffer=i.context.createBuffer(1,1,22050),t.connect(i.context.destination),t.start(0,0,0)},i._isFileXHRSupported=function(){var t=!0,e=new XMLHttpRequest;try{e.open("GET","WebAudioPluginTest.fail",!1)}catch(i){return t=!1}e.onerror=function(){t=!1},e.onload=function(){t=404==this.status||200==this.status||0==this.status&&""!=this.response};try{e.send()}catch(i){t=!1}return t},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;if(null==i.context)if(window.AudioContext)i.context=new AudioContext;else{if(!window.webkitAudioContext)return null;i.context=new webkitAudioContext}i._compatibilitySetUp(),i.playEmptySound(),i._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,s=createjs.Sound.EXTENSION_MAP,o=0,r=e.length;r>o;o++){var n=e[o],a=s[n]||n;i._capabilities[n]="no"!=t.canPlayType("audio/"+n)&&""!=t.canPlayType("audio/"+n)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}i.context.destination.numberOfChannels<2&&(i._capabilities.panning=!1)}},i._compatibilitySetUp=function(){if(i._panningModel="equalpower",!i.context.createGain){i.context.createGain=i.context.createGainNode;var t=i.context.createBufferSource();t.__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff,i._panningModel=0}},e.toString=function(){return"[WebAudioPlugin]"},e._addPropsToClasses=function(){var t=this._soundInstanceClass;t.context=this.context,t.destinationNode=this.gainNode,t._panningModel=this._panningModel,this._loaderClass.context=this.context},e._updateVolume=function(){var t=createjs.Sound._masterMute?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},createjs.WebAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){function t(t){this.src=t,this.length=0,this.available=0,this.tags=[],this.duration=0}var e=t.prototype;e.constructor=t;var i=t;i.tags={},i.get=function(e){var s=i.tags[e];return null==s&&(s=i.tags[e]=new t(e)),s},i.remove=function(t){var e=i.tags[t];return null==e?!1:(e.removeAll(),delete i.tags[t],!0)},i.getInstance=function(t){var e=i.tags[t];return null==e?null:e.get()},i.setInstance=function(t,e){var s=i.tags[t];return null==s?null:s.set(e)},i.getDuration=function(t){var e=i.tags[t];return null==e?0:e.getDuration()},e.add=function(t){this.tags.push(t),this.length++,this.available++},e.removeAll=function(){for(var t;this.length--;)t=this.tags[this.length],t.parentNode&&t.parentNode.removeChild(t),delete this.tags[this.length];this.src=null,this.tags.length=0},e.get=function(){if(0==this.tags.length)return null;this.available=this.tags.length;var t=this.tags.pop();return null==t.parentNode&&document.body.appendChild(t),t},e.set=function(t){var e=createjs.indexOf(this.tags,t);-1==e&&this.tags.push(t),this.available=this.tags.length},e.getDuration=function(){return this.duration||(this.duration=1e3*this.tags[this.tags.length-1].duration),this.duration},e.toString=function(){return"[HTMLAudioTagPool]"},createjs.HTMLAudioTagPool=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i,s){this.AbstractSoundInstance_constructor(t,e,i,s),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this.playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),i?this._audioSpriteStopTime=.001*(e+i):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var e=createjs.extend(t,createjs.AbstractSoundInstance);e.setMasterVolume=function(){this._updateVolume()},e.setMasterMute=function(){this._updateVolume()},e.toString=function(){return"[HTMLAudioSoundInstance]"},e._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},e._handleCleanUp=function(){var t=this._playbackResource;if(null!=t){t.pause(),t.loop=!1,t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch(e){}createjs.HTMLAudioTagPool.setInstance(this.src,t),this._playbackResource=null}},e._beginPlaying=function(t,e,i,s){return this._playbackResource=createjs.HTMLAudioTagPool.getInstance(this.src),this.AbstractSoundInstance__beginPlaying(t,e,i,s)},e._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var t=this._playbackResource;return t.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.preload="auto",void t.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},e._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},e._pause=function(){this._playbackResource.pause()},e._resume=function(){this._playbackResource.play()},e._updateVolume=function(){if(null!=this._playbackResource){var t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;t!=this._playbackResource.volume&&(this._playbackResource.volume=t)}},e._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},e._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(t){this._handleSetPositionSeek(null)}},e._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},e._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._updateDuration=function(){this._audioSpriteStopTime=.001*(startTime+duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1));
},createjs.HTMLAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){function t(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=i._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i.MAX_INSTANCES=30,i._AUDIO_READY="canplaythrough",i._AUDIO_ENDED="ended",i._AUDIO_SEEKED="seeked",i._AUDIO_STALLED="stalled",i._TIME_UPDATE="timeupdate",i._capabilities=null,i.enableIOS=!1,i.isSupported=function(){return i._generateCapabilities(),null==i._capabilities?!1:!0},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;i._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,s=createjs.Sound.EXTENSION_MAP,o=0,r=e.length;r>o;o++){var n=e[o],a=s[n]||n;i._capabilities[n]="no"!=t.canPlayType("audio/"+n)&&""!=t.canPlayType("audio/"+n)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}}},e.register=function(t,e){for(var i=createjs.HTMLAudioTagPool.get(t.src),s=null,o=0;e>o;o++)s=this._createTag(t.src),i.add(s);var r=this.AbstractPlugin_register(t,e);return r.setTag(s),r},e.removeSound=function(t){this.AbstractPlugin_removeSound(t),createjs.HTMLAudioTagPool.remove(t)},e.create=function(t,e,i){var s=this.AbstractPlugin_create(t,e,i);return s.setPlaybackResource(null),s},e.toString=function(){return"[HTMLAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.HTMLAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),define("soundjs",function(){}),window.ASSET_URL="media/",config={app:"com/rebels/app/RebelsApp"},window.console||(window.console={log:function(t){}}),window.console.log||(window.console.log=function(t){}),document.body.style["background-color"]="black";var bust=20;require.config({baseUrl:"./js",paths:{PIXI:"libs/pixi",SPINE:"libs/pixi-spine",TWEEN:"libs/TweenMax.min",TIMELINE:"libs/TimelineLite.min",BEZIER:"libs/BezierPlugin.min",EASEPACK:"libs/EasePack.min",CSSPACK:"libs/CSSPlugin.min",SM2:"libs/soundmanager2/script/soundmanager2-nodebug",HOWLER:"libs/howler.min",preloader:"libs/soundjs/preloadjs-0.6.0.min",soundjs:"libs/soundjs/soundjs-0.6.0.min",signals:"../node_modules/signals/dist/signals",starwars:"../node_modules/starwars-common/scripts",fido:"../node_modules/fido.js",APP_root:"com/rebels/app/RebelsApp",stats:"libs/stats.min",p2:"../../../../../../Goodboy/p2.js/build/p2",WorldData:"levelData",tracker:"libs/disney/tracking_new/Tracker"}}),window.DEVICE_SCALE=window.devicePixelRatio||1,hasCanvasSupport()?(runISL(),(window.valid||"localhost"==document.location.hostname||"dev.goodboydigital.com"==document.location.hostname||"work.goodboydigital.com"==document.location.hostname)&&require(["TWEEN","EASEPACK","CSSPACK","BEZIER","HOWLER","SM2","PIXI","APP_root","stats","fido/system/Device","WorldData","TIMELINE","preloader","soundjs"],function(t,e,i,s,o,r,n,a,h,l,c,u){require(["./pixi-spine"],function(t){function e(){document.getElementById("container");l.instance.iOS&&l.instance.iOS_version<7||window.scrollTo(0,0),window.scrollTo(0,0),s.resize(window.innerWidth,window.innerHeight)}l.instance.useSM2&&(r.defaultOptions.autoLoad=!0,r.setup({url:"libs/arzvhaebfazdsc/soundmanager2/swf/",flashVersion:9,onready:function(){s.onSoundReady.dispatch()},ontimeout:function(){window.noSound=!0}})),window.stats=new Stats,window.stats.domElement.style.position="absolute",window.stats.domElement.style.top="0px",window.stats.domElement.style.zIndex=3;var i=!1;if(i)require(["fido/app/Fallback"],function(){new Fallback(document.body)});else{var s=new a;window.app=s;var o=document.getElementById("container");o.appendChild(s.view),o.style.background="black",s.view.style.top=0,s.view.style.left=0,window.addEventListener("resize",function(){e()}),e()}})})):require(["fido/app/Fallback"],function(){new Fallback(document.body)}),define("Boot",function(){});