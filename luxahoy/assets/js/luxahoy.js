function _handleMultipleEvents(a, b, c, d) {
    vjs.arr.forEach(c, function(c) {
        a(b, c, d)
    })
}

function _logType(a, b) {
        var c, d, e;
        c = Array.prototype.slice.call(b), d = function() {}, e = window.console || {
            log: d,
            warn: d,
            error: d
        }, a ? c.unshift(a.toUpperCase() + ":") : a = "log", vjs.log.history.push(c), c.unshift("VIDEOJS:"), e[a].apply ? e[a].apply(e, c) : e[a](c.join(" "))
    }! function(a) {
        function b() {
            var a = !1;
            if ("localStorage" in window) try {
                window.localStorage.setItem("_tmptest", "tmpval"), a = !0, window.localStorage.removeItem("_tmptest")
            } catch (b) {}
            if (a) try {
                    window.localStorage && (i = window.localStorage, n = "localStorage")
                } catch (d) {} else if ("globalStorage" in window) try {
                    window.globalStorage && (i = window.globalStorage[window.location.hostname], n = "globalStorage")
                } catch (e) {} else {
                    if (j = document.createElement("link"), !j.addBehavior) return void(j = null);
                    j.style.behavior = "url(#default#userData)", document.getElementsByTagName("head")[0].appendChild(j), j.load("jStorage");
                    var g = "{}";
                    try {
                        g = j.getAttribute("jStorage")
                    } catch (h) {}
                    i.jStorage = g, n = "userDataBehavior"
                }
                c(), f()
        }

        function c() {
            if (i.jStorage) try {
                h = m(String(i.jStorage))
            } catch (a) {
                i.jStorage = "{}"
            } else i.jStorage = "{}";
            k = i.jStorage ? String(i.jStorage).length : 0
        }

        function d() {
            try {
                i.jStorage = l(h), j && (j.setAttribute("jStorage", i.jStorage), j.save("jStorage")), k = i.jStorage ? String(i.jStorage).length : 0
            } catch (a) {}
        }

        function e(a) {
            if (!a || "string" != typeof a && "number" != typeof a) throw new TypeError("Key name must be string or numeric");
            if ("__jstorage_meta" == a) throw new TypeError("Reserved key name");
            return !0
        }

        function f() {
            var a, b, c, e = 1 / 0,
                i = !1;
            if (clearTimeout(g), h.__jstorage_meta && "object" == typeof h.__jstorage_meta.TTL) {
                a = +new Date, c = h.__jstorage_meta.TTL;
                for (b in c) c.hasOwnProperty(b) && (c[b] <= a ? (delete c[b], delete h[b], i = !0) : c[b] < e && (e = c[b]));
                e != 1 / 0 && (g = setTimeout(f, e - a)), i && d()
            }
        }
        if (!a || !(a.toJSON || Object.toJSON || window.JSON)) throw new Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");
        var g, h = {},
            i = {
                jStorage: "{}"
            },
            j = null,
            k = 0,
            l = a.toJSON || Object.toJSON || window.JSON && (JSON.encode || JSON.stringify),
            m = a.evalJSON || window.JSON && (JSON.decode || JSON.parse) || function(a) {
                return String(a).evalJSON()
            },
            n = !1,
            o = {
                isXML: function(a) {
                    var b = (a ? a.ownerDocument || a : 0).documentElement;
                    return b ? "HTML" !== b.nodeName : !1
                },
                encode: function(a) {
                    if (!this.isXML(a)) return !1;
                    try {
                        return (new XMLSerializer).serializeToString(a)
                    } catch (b) {
                        try {
                            return a.xml
                        } catch (c) {}
                    }
                    return !1
                },
                decode: function(a) {
                    var b, c = "DOMParser" in window && (new DOMParser).parseFromString || window.ActiveXObject && function(a) {
                        var b = new ActiveXObject("Microsoft.XMLDOM");
                        return b.async = "false", b.loadXML(a), b
                    };
                    return c ? (b = c.call("DOMParser" in window && new DOMParser || window, a, "text/xml"), this.isXML(b) ? b : !1) : !1
                }
            };
        a.jStorage = {
            version: "0.1.6.1",
            set: function(a, b) {
                return e(a), o.isXML(b) ? b = {
                    _is_xml: !0,
                    xml: o.encode(b)
                } : "function" == typeof b ? b = null : b && "object" == typeof b && (b = m(l(b))), h[a] = b, d(), b
            },
            get: function(a, b) {
                return e(a), a in h ? h[a] && "object" == typeof h[a] && h[a]._is_xml && h[a]._is_xml ? o.decode(h[a].xml) : h[a] : "undefined" == typeof b ? null : b
            },
            deleteKey: function(a) {
                return e(a), a in h ? (delete h[a], h.__jstorage_meta && "object" == typeof h.__jstorage_meta.TTL && a in h.__jstorage_meta.TTL && delete h.__jstorage_meta.TTL[a], d(), !0) : !1
            },
            setTTL: function(a, b) {
                var c = +new Date;
                return e(a), b = Number(b) || 0, a in h ? (h.__jstorage_meta || (h.__jstorage_meta = {}), h.__jstorage_meta.TTL || (h.__jstorage_meta.TTL = {}), b > 0 ? h.__jstorage_meta.TTL[a] = c + b : delete h.__jstorage_meta.TTL[a], d(), f(), !0) : !1
            },
            flush: function() {
                return h = {}, d(), !0
            },
            storageObj: function() {
                function a() {}
                return a.prototype = h, new a
            },
            index: function() {
                var a, b = [];
                for (a in h) h.hasOwnProperty(a) && "__jstorage_meta" != a && b.push(a);
                return b
            },
            storageSize: function() {
                return k
            },
            currentBackend: function() {
                return n
            },
            storageAvailable: function() {
                return !!n
            },
            reInit: function() {
                var a, b;
                if (j && j.addBehavior) {
                    a = document.createElement("link"), j.parentNode.replaceChild(a, j), j = a, j.style.behavior = "url(#default#userData)", document.getElementsByTagName("head")[0].appendChild(j), j.load("jStorage"), b = "{}";
                    try {
                        b = j.getAttribute("jStorage")
                    } catch (d) {}
                    i.jStorage = b, n = "userDataBehavior"
                }
                c()
            }
        }, b()
    }(window.jQuery || window.$), jQuery.easing.jswing = jQuery.easing.swing, jQuery.extend(jQuery.easing, {
        def: "easeOutQuad",
        swing: function(a, b, c, d, e) {
            return jQuery.easing[jQuery.easing.def](a, b, c, d, e)
        },
        easeInQuad: function(a, b, c, d, e) {
            return d * (b /= e) * b + c
        },
        easeOutQuad: function(a, b, c, d, e) {
            return -d * (b /= e) * (b - 2) + c
        },
        easeInOutQuad: function(a, b, c, d, e) {
            return (b /= e / 2) < 1 ? d / 2 * b * b + c : -d / 2 * (--b * (b - 2) - 1) + c
        },
        easeInCubic: function(a, b, c, d, e) {
            return d * (b /= e) * b * b + c
        },
        easeOutCubic: function(a, b, c, d, e) {
            return d * ((b = b / e - 1) * b * b + 1) + c
        },
        easeInOutCubic: function(a, b, c, d, e) {
            return (b /= e / 2) < 1 ? d / 2 * b * b * b + c : d / 2 * ((b -= 2) * b * b + 2) + c
        },
        easeInQuart: function(a, b, c, d, e) {
            return d * (b /= e) * b * b * b + c
        },
        easeOutQuart: function(a, b, c, d, e) {
            return -d * ((b = b / e - 1) * b * b * b - 1) + c
        },
        easeInOutQuart: function(a, b, c, d, e) {
            return (b /= e / 2) < 1 ? d / 2 * b * b * b * b + c : -d / 2 * ((b -= 2) * b * b * b - 2) + c
        },
        easeInQuint: function(a, b, c, d, e) {
            return d * (b /= e) * b * b * b * b + c
        },
        easeOutQuint: function(a, b, c, d, e) {
            return d * ((b = b / e - 1) * b * b * b * b + 1) + c
        },
        easeInOutQuint: function(a, b, c, d, e) {
            return (b /= e / 2) < 1 ? d / 2 * b * b * b * b * b + c : d / 2 * ((b -= 2) * b * b * b * b + 2) + c
        },
        easeInSine: function(a, b, c, d, e) {
            return -d * Math.cos(b / e * (Math.PI / 2)) + d + c
        },
        easeOutSine: function(a, b, c, d, e) {
            return d * Math.sin(b / e * (Math.PI / 2)) + c
        },
        easeInOutSine: function(a, b, c, d, e) {
            return -d / 2 * (Math.cos(Math.PI * b / e) - 1) + c
        },
        easeInExpo: function(a, b, c, d, e) {
            return 0 === b ? c : d * Math.pow(2, 10 * (b / e - 1)) + c
        },
        easeOutExpo: function(a, b, c, d, e) {
            return b == e ? c + d : d * (-Math.pow(2, -10 * b / e) + 1) + c
        },
        easeInOutExpo: function(a, b, c, d, e) {
            return 0 === b ? c : b == e ? c + d : (b /= e / 2) < 1 ? d / 2 * Math.pow(2, 10 * (b - 1)) + c : d / 2 * (-Math.pow(2, -10 * --b) + 2) + c
        },
        easeInCirc: function(a, b, c, d, e) {
            return -d * (Math.sqrt(1 - (b /= e) * b) - 1) + c
        },
        easeOutCirc: function(a, b, c, d, e) {
            return d * Math.sqrt(1 - (b = b / e - 1) * b) + c
        },
        easeInOutCirc: function(a, b, c, d, e) {
            return (b /= e / 2) < 1 ? -d / 2 * (Math.sqrt(1 - b * b) - 1) + c : d / 2 * (Math.sqrt(1 - (b -= 2) * b) + 1) + c
        },
        easeInElastic: function(a, b, c, d, e) {
            var f = 1.70158,
                g = 0,
                h = d;
            return 0 === b ? c : 1 === (b /= e) ? c + d : (g || (g = .3 * e), h < Math.abs(d) ? (h = d, f = g / 4) : f = g / (2 * Math.PI) * Math.asin(d / h), -(h * Math.pow(2, 10 * (b -= 1)) * Math.sin(2 * (b * e - f) * Math.PI / g)) + c)
        },
        easeOutElastic: function(a, b, c, d, e) {
            var f = 1.70158,
                g = 0,
                h = d;
            return 0 === b ? c : 1 == (b /= e) ? c + d : (g || (g = .3 * e), h < Math.abs(d) ? (h = d, f = g / 4) : f = g / (2 * Math.PI) * Math.asin(d / h), h * Math.pow(2, -10 * b) * Math.sin(2 * (b * e - f) * Math.PI / g) + d + c)
        },
        easeInOutElastic: function(a, b, c, d, e) {
            var f = 1.70158,
                g = 0,
                h = d;
            return 0 === b ? c : 2 == (b /= e / 2) ? c + d : (g || (g = .3 * e * 1.5), h < Math.abs(d) ? (h = d, f = g / 4) : f = g / (2 * Math.PI) * Math.asin(d / h), 1 > b ? -.5 * h * Math.pow(2, 10 * (b -= 1)) * Math.sin(2 * (b * e - f) * Math.PI / g) + c : h * Math.pow(2, -10 * (b -= 1)) * Math.sin(2 * (b * e - f) * Math.PI / g) * .5 + d + c)
        },
        easeInBack: function(a, b, c, d, e, f) {
            return void 0 === f && (f = 1.70158), d * (b /= e) * b * ((f + 1) * b - f) + c
        },
        easeOutBack: function(a, b, c, d, e, f) {
            return void 0 === f && (f = 1.70158), d * ((b = b / e - 1) * b * ((f + 1) * b + f) + 1) + c
        },
        easeInOutBack: function(a, b, c, d, e, f) {
            return void 0 === f && (f = 1.70158), (b /= e / 2) < 1 ? d / 2 * b * b * (((f *= 1.525) + 1) * b - f) + c : d / 2 * ((b -= 2) * b * (((f *= 1.525) + 1) * b + f) + 2) + c
        },
        easeInBounce: function(a, b, c, d, e) {
            return d - jQuery.easing.easeOutBounce(a, e - b, 0, d, e) + c
        },
        easeOutBounce: function(a, b, c, d, e) {
            return (b /= e) < 1 / 2.75 ? 7.5625 * d * b * b + c : 2 / 2.75 > b ? d * (7.5625 * (b -= 1.5 / 2.75) * b + .75) + c : 2.5 / 2.75 > b ? d * (7.5625 * (b -= 2.25 / 2.75) * b + .9375) + c : d * (7.5625 * (b -= 2.625 / 2.75) * b + .984375) + c
        },
        easeInOutBounce: function(a, b, c, d, e) {
            return e / 2 > b ? .5 * jQuery.easing.easeInBounce(a, 2 * b, 0, d, e) + c : .5 * jQuery.easing.easeOutBounce(a, 2 * b - e, 0, d, e) + .5 * d + c
        }
    }),
    function(a) {
        function b(a) {
            if (a in l.style) return a;
            var b = ["Moz", "Webkit", "O", "ms"],
                c = a.charAt(0).toUpperCase() + a.substr(1);
            if (a in l.style) return a;
            for (var d = 0; d < b.length; ++d) {
                var e = b[d] + c;
                if (e in l.style) return e
            }
        }

        function c() {
            return l.style[m.transform] = "", l.style[m.transform] = "rotateY(90deg)", "" !== l.style[m.transform]
        }

        function d(a) {
            return "string" == typeof a && this.parse(a), this
        }

        function e(a, b, c) {
            b === !0 ? a.queue(c) : b ? a.queue(b, c) : c()
        }

        function f(b) {
            var c = [];
            return a.each(b, function(b) {
                b = a.camelCase(b), b = a.transit.propertyMap[b] || a.cssProps[b] || b, b = i(b), -1 === a.inArray(b, c) && c.push(b)
            }), c
        }

        function g(b, c, d, e) {
            var g = f(b);
            a.cssEase[d] && (d = a.cssEase[d]);
            var h = "" + k(c) + " " + d;
            parseInt(e, 10) > 0 && (h += " " + k(e));
            var i = [];
            return a.each(g, function(a, b) {
                i.push(b + " " + h)
            }), i.join(", ")
        }

        function h(b, c) {
            c || (a.cssNumber[b] = !0), a.transit.propertyMap[b] = m.transform, a.cssHooks[b] = {
                get: function(c) {
                    var d = a(c).css("transit:transform");
                    return d.get(b)
                },
                set: function(c, d) {
                    var e = a(c).css("transit:transform");
                    e.setFromString(b, d), a(c).css({
                        "transit:transform": e
                    })
                }
            }
        }

        function i(a) {
            return a.replace(/([A-Z])/g, function(a) {
                return "-" + a.toLowerCase()
            })
        }

        function j(a, b) {
            return "string" != typeof a || a.match(/^[\-0-9\.]+$/) ? "" + a + b : a
        }

        function k(b) {
            var c = b;
            return a.fx.speeds[c] && (c = a.fx.speeds[c]), j(c, "ms")
        }
        a.transit = {
            version: "0.9.9",
            propertyMap: {
                marginLeft: "margin",
                marginRight: "margin",
                marginBottom: "margin",
                marginTop: "margin",
                paddingLeft: "padding",
                paddingRight: "padding",
                paddingBottom: "padding",
                paddingTop: "padding"
            },
            enabled: !0,
            useTransitionEnd: !1
        };
        var l = document.createElement("div"),
            m = {},
            n = navigator.userAgent.toLowerCase().indexOf("chrome") > -1;
        m.transition = b("transition"), m.transitionDelay = b("transitionDelay"), m.transform = b("transform"), m.transformOrigin = b("transformOrigin"), m.transform3d = c();
        var o = {
                transition: "transitionEnd",
                MozTransition: "transitionend",
                OTransition: "oTransitionEnd",
                WebkitTransition: "webkitTransitionEnd",
                msTransition: "MSTransitionEnd"
            },
            p = m.transitionEnd = o[m.transition] || null;
        for (var q in m) m.hasOwnProperty(q) && "undefined" == typeof a.support[q] && (a.support[q] = m[q]);
        l = null, a.cssEase = {
            _default: "ease",
            "in": "ease-in",
            out: "ease-out",
            "in-out": "ease-in-out",
            snap: "cubic-bezier(0,1,.5,1)",
            easeOutCubic: "cubic-bezier(.215,.61,.355,1)",
            easeInOutCubic: "cubic-bezier(.645,.045,.355,1)",
            easeInCirc: "cubic-bezier(.6,.04,.98,.335)",
            easeOutCirc: "cubic-bezier(.075,.82,.165,1)",
            easeInOutCirc: "cubic-bezier(.785,.135,.15,.86)",
            easeInExpo: "cubic-bezier(.95,.05,.795,.035)",
            easeOutExpo: "cubic-bezier(.19,1,.22,1)",
            easeInOutExpo: "cubic-bezier(1,0,0,1)",
            easeInQuad: "cubic-bezier(.55,.085,.68,.53)",
            easeOutQuad: "cubic-bezier(.25,.46,.45,.94)",
            easeInOutQuad: "cubic-bezier(.455,.03,.515,.955)",
            easeInQuart: "cubic-bezier(.895,.03,.685,.22)",
            easeOutQuart: "cubic-bezier(.165,.84,.44,1)",
            easeInOutQuart: "cubic-bezier(.77,0,.175,1)",
            easeInQuint: "cubic-bezier(.755,.05,.855,.06)",
            easeOutQuint: "cubic-bezier(.23,1,.32,1)",
            easeInOutQuint: "cubic-bezier(.86,0,.07,1)",
            easeInSine: "cubic-bezier(.47,0,.745,.715)",
            easeOutSine: "cubic-bezier(.39,.575,.565,1)",
            easeInOutSine: "cubic-bezier(.445,.05,.55,.95)",
            easeInBack: "cubic-bezier(.6,-.28,.735,.045)",
            easeOutBack: "cubic-bezier(.175, .885,.32,1.275)",
            easeInOutBack: "cubic-bezier(.68,-.55,.265,1.55)"
        }, a.cssHooks["transit:transform"] = {
            get: function(b) {
                return a(b).data("transform") || new d
            },
            set: function(b, c) {
                var e = c;
                e instanceof d || (e = new d(e)), b.style[m.transform] = "WebkitTransform" !== m.transform || n ? e.toString() : e.toString(!0), a(b).data("transform", e)
            }
        }, a.cssHooks.transform = {
            set: a.cssHooks["transit:transform"].set
        }, a.fn.jquery < "1.8" && (a.cssHooks.transformOrigin = {
            get: function(a) {
                return a.style[m.transformOrigin]
            },
            set: function(a, b) {
                a.style[m.transformOrigin] = b
            }
        }, a.cssHooks.transition = {
            get: function(a) {
                return a.style[m.transition]
            },
            set: function(a, b) {
                a.style[m.transition] = b
            }
        }), h("scale"), h("translate"), h("rotate"), h("rotateX"), h("rotateY"), h("rotate3d"), h("perspective"), h("skewX"), h("skewY"), h("x", !0), h("y", !0), d.prototype = {
            setFromString: function(a, b) {
                var c = "string" == typeof b ? b.split(",") : b.constructor === Array ? b : [b];
                c.unshift(a), d.prototype.set.apply(this, c)
            },
            set: function(a) {
                var b = Array.prototype.slice.apply(arguments, [1]);
                this.setter[a] ? this.setter[a].apply(this, b) : this[a] = b.join(",")
            },
            get: function(a) {
                return this.getter[a] ? this.getter[a].apply(this) : this[a] || 0
            },
            setter: {
                rotate: function(a) {
                    this.rotate = j(a, "deg")
                },
                rotateX: function(a) {
                    this.rotateX = j(a, "deg")
                },
                rotateY: function(a) {
                    this.rotateY = j(a, "deg")
                },
                scale: function(a, b) {
                    void 0 === b && (b = a), this.scale = a + "," + b
                },
                skewX: function(a) {
                    this.skewX = j(a, "deg")
                },
                skewY: function(a) {
                    this.skewY = j(a, "deg")
                },
                perspective: function(a) {
                    this.perspective = j(a, "px")
                },
                x: function(a) {
                    this.set("translate", a, null)
                },
                y: function(a) {
                    this.set("translate", null, a)
                },
                translate: function(a, b) {
                    void 0 === this._translateX && (this._translateX = 0), void 0 === this._translateY && (this._translateY = 0), null !== a && void 0 !== a && (this._translateX = j(a, "px")), null !== b && void 0 !== b && (this._translateY = j(b, "px")), this.translate = this._translateX + "," + this._translateY
                }
            },
            getter: {
                x: function() {
                    return this._translateX || 0
                },
                y: function() {
                    return this._translateY || 0
                },
                scale: function() {
                    var a = (this.scale || "1,1").split(",");
                    return a[0] && (a[0] = parseFloat(a[0])), a[1] && (a[1] = parseFloat(a[1])), a[0] === a[1] ? a[0] : a
                },
                rotate3d: function() {
                    for (var a = (this.rotate3d || "0,0,0,0deg").split(","), b = 0; 3 >= b; ++b) a[b] && (a[b] = parseFloat(a[b]));
                    return a[3] && (a[3] = j(a[3], "deg")), a
                }
            },
            parse: function(a) {
                var b = this;
                a.replace(/([a-zA-Z0-9]+)\((.*?)\)/g, function(a, c, d) {
                    b.setFromString(c, d)
                })
            },
            toString: function(a) {
                var b = [];
                for (var c in this)
                    if (this.hasOwnProperty(c)) {
                        if (!m.transform3d && ("rotateX" === c || "rotateY" === c || "perspective" === c || "transformOrigin" === c)) continue;
                        "_" !== c[0] && b.push(a && "scale" === c ? c + "3d(" + this[c] + ",1)" : a && "translate" === c ? c + "3d(" + this[c] + ",0)" : c + "(" + this[c] + ")")
                    }
                return b.join(" ")
            }
        }, a.fn.transition = a.fn.transit = function(b, c, d, f) {
            var h = this,
                i = 0,
                j = !0;
            "function" == typeof c && (f = c, c = void 0), "function" == typeof d && (f = d, d = void 0), "undefined" != typeof b.easing && (d = b.easing, delete b.easing), "undefined" != typeof b.duration && (c = b.duration, delete b.duration), "undefined" != typeof b.complete && (f = b.complete, delete b.complete), "undefined" != typeof b.queue && (j = b.queue, delete b.queue), "undefined" != typeof b.delay && (i = b.delay, delete b.delay), "undefined" == typeof c && (c = a.fx.speeds._default), "undefined" == typeof d && (d = a.cssEase._default), c = k(c);
            var l = g(b, c, d, i),
                n = a.transit.enabled && m.transition,
                o = n ? parseInt(c, 10) + parseInt(i, 10) : 0;
            if (0 === o) {
                var q = function(a) {
                    h.css(b), f && f.apply(h), a && a()
                };
                return e(h, j, q), h
            }
            var r = {},
                s = function(c) {
                    var d = !1,
                        e = function() {
                            d && h.unbind(p, e), o > 0 && h.each(function() {
                                this.style[m.transition] = r[this] || null
                            }), "function" == typeof f && f.apply(h), "function" == typeof c && c()
                        };
                    o > 0 && p && a.transit.useTransitionEnd ? (d = !0, h.bind(p, e)) : window.setTimeout(e, o), h.each(function() {
                        o > 0 && (this.style[m.transition] = l), a(this).css(b)
                    })
                },
                t = function(a) {
                    this.offsetWidth, s(a)
                };
            return e(h, j, t), this
        }, a.transit.getTransitionValue = g
    }(jQuery),
    function(a) {
        var b, c, d, e, f, g, h = {},
            i = {
                init: function(j, k) {
                    var l = a(this),
                        m = {
                            seconds: 10,
                            colour: "rgba(255, 255, 255, 0.8)",
                            height: l.height(),
                            width: l.width()
                        };
                    j && a.extend(m, j), b = 360, g = !1, h.settings = m, h.instance = l, h.callback = k, h.paused = !0, h.complete = !1, h.promted = !1, d && m.width === e && m.height === f || (e = m.width, f = m.height, c = a('<canvas id="pie_timer" width="' + e + '" height="' + f + ' data="' + Math.random() + '"></canvas>')[0], c.getContext && (d = c.getContext("2d")), l.empty().append(c)), i.draw(b)
                },
                start: function() {
                    h.paused = !1, i.draw(b)
                },
                pause: function() {
                    h.paused = !0
                },
                clear: function() {
                    b = 360, h.complete = !1, h.paused = !0
                },
                setColor: function(a) {
                    h.settings.colour = a
                },
                timer: function() {
                    if (!h.complete && !h.paused) {
                        if (131 > b && !h.promted && (h.promted = !0, luxanimals.uiManager.message.prompt("Hurry Up!")), 0 >= b && !h.complete) {
                            h.complete = !0, i.draw(0);
                            var a = h.callback;
                            "function" == typeof a && a.call()
                        } else d && i.draw(b);
                        b -= 360 / h.settings.seconds
                    }
                },
                draw: function() {
                    if (c.width = e, b > 0) {
                        d.beginPath(), d.moveTo(e / 2, f / 2);
                        var a = Math.min(e, f) / 2,
                            g = 3 * Math.PI / 2;
                        d.arc(e / 2, f / 2, a, g - b * (Math.PI / 180), g, !1), d.closePath(), d.fillStyle = h.settings.colour, d.fill()
                    }
                },
                data: h
            };
        jQuery.fn.pietimer = function(b) {
            return this.setColor || a.extend(this, i), this[b] ? this[b](Array.prototype.slice.call(arguments, 1)) : "object" == typeof b && this.init(arguments), this
        }
    }(jQuery),
    function(a) {
        function b(a) {
            a = a.replace(/left|top/g, "0px"), a = a.replace(/right|bottom/g, "100%"), a = a.replace(/([0-9\.]+)(\s|\)|$)/g, "$1px$2");
            var b = a.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);
            return [parseFloat(b[1], 10), b[2], parseFloat(b[3], 10), b[4]]
        }
        if (!document.defaultView || !document.defaultView.getComputedStyle) {
            var c = a.css;
            a.css = function(a, b, d) {
                if ("background-position" === b && (b = "backgroundPosition"), "backgroundPosition" !== b || !a.currentStyle || a.currentStyle[b]) return c.apply(this, arguments);
                var e = a.style;
                return !d && e && e[b] ? e[b] : c(a, "backgroundPositionX", d) + " " + c(a, "backgroundPositionY", d)
            }
        }
        var d = a.fn.animate;
        a.fn.animate = function(a) {
            return "background-position" in a && (a.backgroundPosition = a["background-position"], delete a["background-position"]), "backgroundPosition" in a && (a.backgroundPosition = "(" + a.backgroundPosition), d.apply(this, arguments)
        }, a.fx.step.backgroundPosition = function(c) {
            if (!c.bgPosReady) {
                var d = a.css(c.elem, "backgroundPosition");
                d || (d = "0px 0px"), d = b(d), c.start = [d[0], d[2]];
                var e = b(c.end);
                c.end = [e[0], e[2]], c.unit = [e[1], e[3]], c.bgPosReady = !0
            }
            var f = [];
            f[0] = (c.end[0] - c.start[0]) * c.pos + c.start[0] + c.unit[0], f[1] = (c.end[1] - c.start[1]) * c.pos + c.start[1] + c.unit[1], c.elem.style.backgroundPosition = f[0] + " " + f[1]
        }
    }(jQuery), this.createjs = this.createjs || {},
    function() {
        var a = function() {
            throw "UID cannot be instantiated"
        };
        a._nextID = 0, a.get = function() {
            return a._nextID++
        }, createjs.UID = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = createjs.PreloadJS = createjs.PreloadJS || {};
        a.version = "0.6.0", a.buildDate = "Thu, 11 Dec 2014 23:32:09 GMT"
    }(), this.createjs = this.createjs || {}, createjs.extend = function(a, b) {
        "use strict";

        function c() {
            this.constructor = a
        }
        return c.prototype = b.prototype, a.prototype = new c
    }, this.createjs = this.createjs || {}, createjs.promote = function(a, b) {
        "use strict";
        var c = a.prototype,
            d = Object.getPrototypeOf && Object.getPrototypeOf(c) || c.__proto__;
        if (d) {
            c[(b += "_") + "constructor"] = d.constructor;
            for (var e in d) c.hasOwnProperty(e) && "function" == typeof d[e] && (c[b + e] = d[e])
        }
        return a
    }, this.createjs = this.createjs || {}, createjs.indexOf = function(a, b) {
        "use strict";
        for (var c = 0, d = a.length; d > c; c++)
            if (b === a[c]) return c;
        return -1
    }, this.createjs = this.createjs || {},
    function() {
        "use strict";
        createjs.proxy = function(a, b) {
            var c = Array.prototype.slice.call(arguments, 2);
            return function() {
                return a.apply(b, Array.prototype.slice.call(arguments, 0).concat(c))
            }
        }
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            throw "BrowserDetect cannot be instantiated"
        }
        var b = a.agent = window.navigator.userAgent;
        a.isWindowPhone = b.indexOf("IEMobile") > -1 || b.indexOf("Windows Phone") > -1, a.isFirefox = b.indexOf("Firefox") > -1, a.isOpera = null != window.opera, a.isChrome = b.indexOf("Chrome") > -1, a.isIOS = (b.indexOf("iPod") > -1 || b.indexOf("iPhone") > -1 || b.indexOf("iPad") > -1) && !a.isWindowPhone, a.isAndroid = b.indexOf("Android") > -1 && !a.isWindowPhone, a.isBlackberry = b.indexOf("Blackberry") > -1, createjs.BrowserDetect = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.type = a, this.target = null, this.currentTarget = null, this.eventPhase = 0, this.bubbles = !!b, this.cancelable = !!c, this.timeStamp = (new Date).getTime(), this.defaultPrevented = !1, this.propagationStopped = !1, this.immediatePropagationStopped = !1, this.removed = !1
        }
        var b = a.prototype;
        b.preventDefault = function() {
            this.defaultPrevented = this.cancelable && !0
        }, b.stopPropagation = function() {
            this.propagationStopped = !0
        }, b.stopImmediatePropagation = function() {
            this.immediatePropagationStopped = this.propagationStopped = !0
        }, b.remove = function() {
            this.removed = !0
        }, b.clone = function() {
            return new a(this.type, this.bubbles, this.cancelable)
        }, b.set = function(a) {
            for (var b in a) this[b] = a[b];
            return this
        }, b.toString = function() {
            return "[Event (type=" + this.type + ")]"
        }, createjs.Event = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.Event_constructor("error"), this.title = a, this.message = b, this.data = c
        }
        var b = createjs.extend(a, createjs.Event);
        b.clone = function() {
            return new createjs.ErrorEvent(this.title, this.message, this.data)
        }, createjs.ErrorEvent = createjs.promote(a, "Event")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this._listeners = null, this._captureListeners = null
        }
        var b = a.prototype;
        a.initialize = function(a) {
            a.addEventListener = b.addEventListener, a.on = b.on, a.removeEventListener = a.off = b.removeEventListener, a.removeAllEventListeners = b.removeAllEventListeners, a.hasEventListener = b.hasEventListener, a.dispatchEvent = b.dispatchEvent, a._dispatchEvent = b._dispatchEvent, a.willTrigger = b.willTrigger
        }, b.addEventListener = function(a, b, c) {
            var d;
            d = c ? this._captureListeners = this._captureListeners || {} : this._listeners = this._listeners || {};
            var e = d[a];
            return e && this.removeEventListener(a, b, c), e = d[a], e ? e.push(b) : d[a] = [b], b
        }, b.on = function(a, b, c, d, e, f) {
            return b.handleEvent && (c = c || b, b = b.handleEvent), c = c || this, this.addEventListener(a, function(a) {
                b.call(c, a, e), d && a.remove()
            }, f)
        }, b.removeEventListener = function(a, b, c) {
            var d = c ? this._captureListeners : this._listeners;
            if (d) {
                var e = d[a];
                if (e)
                    for (var f = 0, g = e.length; g > f; f++)
                        if (e[f] == b) {
                            1 == g ? delete d[a] : e.splice(f, 1);
                            break
                        }
            }
        }, b.off = b.removeEventListener, b.removeAllEventListeners = function(a) {
            a ? (this._listeners && delete this._listeners[a], this._captureListeners && delete this._captureListeners[a]) : this._listeners = this._captureListeners = null
        }, b.dispatchEvent = function(a) {
            if ("string" == typeof a) {
                var b = this._listeners;
                if (!b || !b[a]) return !1;
                a = new createjs.Event(a)
            } else a.target && a.clone && (a = a.clone());
            try {
                a.target = this
            } catch (c) {}
            if (a.bubbles && this.parent) {
                for (var d = this, e = [d]; d.parent;) e.push(d = d.parent);
                var f, g = e.length;
                for (f = g - 1; f >= 0 && !a.propagationStopped; f--) e[f]._dispatchEvent(a, 1 + (0 == f));
                for (f = 1; g > f && !a.propagationStopped; f++) e[f]._dispatchEvent(a, 3)
            } else this._dispatchEvent(a, 2);
            return a.defaultPrevented
        }, b.hasEventListener = function(a) {
            var b = this._listeners,
                c = this._captureListeners;
            return !!(b && b[a] || c && c[a])
        }, b.willTrigger = function(a) {
            for (var b = this; b;) {
                if (b.hasEventListener(a)) return !0;
                b = b.parent
            }
            return !1
        }, b.toString = function() {
            return "[EventDispatcher]"
        }, b._dispatchEvent = function(a, b) {
            var c, d = 1 == b ? this._captureListeners : this._listeners;
            if (a && d) {
                var e = d[a.type];
                if (!e || !(c = e.length)) return;
                try {
                    a.currentTarget = this
                } catch (f) {}
                try {
                    a.eventPhase = b
                } catch (f) {}
                a.removed = !1, e = e.slice();
                for (var g = 0; c > g && !a.immediatePropagationStopped; g++) {
                    var h = e[g];
                    h.handleEvent ? h.handleEvent(a) : h(a), a.removed && (this.off(a.type, h, 1 == b), a.removed = !1)
                }
            }
        }, createjs.EventDispatcher = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b) {
            this.Event_constructor("progress"), this.loaded = a, this.total = null == b ? 1 : b, this.progress = 0 == b ? 0 : this.loaded / this.total
        }
        var b = createjs.extend(a, createjs.Event);
        b.clone = function() {
            return new createjs.ProgressEvent(this.loaded, this.total)
        }, createjs.ProgressEvent = createjs.promote(a, "Event")
    }(window),
    function() {
        function a(b, d) {
            function f(a) {
                if (f[a] !== q) return f[a];
                var b;
                if ("bug-string-char-index" == a) b = "a" != "a" [0];
                else if ("json" == a) b = f("json-stringify") && f("json-parse");
                else {
                    var c, e = '{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';
                    if ("json-stringify" == a) {
                        var i = d.stringify,
                            k = "function" == typeof i && t;
                        if (k) {
                            (c = function() {
                                return 1
                            }).toJSON = c;
                            try {
                                k = "0" === i(0) && "0" === i(new g) && '""' == i(new h) && i(s) === q && i(q) === q && i() === q && "1" === i(c) && "[1]" == i([c]) && "[null]" == i([q]) && "null" == i(null) && "[null,null,null]" == i([q, s, null]) && i({
                                    a: [c, !0, !1, null, "\x00\b\n\f\r	"]
                                }) == e && "1" === i(null, c) && "[\n 1,\n 2\n]" == i([1, 2], null, 1) && '"-271821-04-20T00:00:00.000Z"' == i(new j(-864e13)) && '"+275760-09-13T00:00:00.000Z"' == i(new j(864e13)) && '"-000001-01-01T00:00:00.000Z"' == i(new j(-621987552e5)) && '"1969-12-31T23:59:59.999Z"' == i(new j(-1))
                            } catch (l) {
                                k = !1
                            }
                        }
                        b = k
                    }
                    if ("json-parse" == a) {
                        var m = d.parse;
                        if ("function" == typeof m) try {
                            if (0 === m("0") && !m(!1)) {
                                c = m(e);
                                var n = 5 == c.a.length && 1 === c.a[0];
                                if (n) {
                                    try {
                                        n = !m('"	"')
                                    } catch (l) {}
                                    if (n) try {
                                        n = 1 !== m("01")
                                    } catch (l) {}
                                    if (n) try {
                                        n = 1 !== m("1.")
                                    } catch (l) {}
                                }
                            }
                        } catch (l) {
                            n = !1
                        }
                        b = n
                    }
                }
                return f[a] = !!b
            }
            b || (b = e.Object()), d || (d = e.Object());
            var g = b.Number || e.Number,
                h = b.String || e.String,
                i = b.Object || e.Object,
                j = b.Date || e.Date,
                k = b.SyntaxError || e.SyntaxError,
                l = b.TypeError || e.TypeError,
                m = b.Math || e.Math,
                n = b.JSON || e.JSON;
            "object" == typeof n && n && (d.stringify = n.stringify, d.parse = n.parse);
            var o, p, q, r = i.prototype,
                s = r.toString,
                t = new j(-0xc782b5b800cec);
            try {
                t = -109252 == t.getUTCFullYear() && 0 === t.getUTCMonth() && 1 === t.getUTCDate() && 10 == t.getUTCHours() && 37 == t.getUTCMinutes() && 6 == t.getUTCSeconds() && 708 == t.getUTCMilliseconds()
            } catch (u) {}
            if (!f("json")) {
                var v = "[object Function]",
                    w = "[object Date]",
                    x = "[object Number]",
                    y = "[object String]",
                    z = "[object Array]",
                    A = "[object Boolean]",
                    B = f("bug-string-char-index");
                if (!t) var C = m.floor,
                    D = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334],
                    E = function(a, b) {
                        return D[b] + 365 * (a - 1970) + C((a - 1969 + (b = +(b > 1))) / 4) - C((a - 1901 + b) / 100) + C((a - 1601 + b) / 400)
                    };
                if ((o = r.hasOwnProperty) || (o = function(a) {
                        var b, c = {};
                        return (c.__proto__ = null, c.__proto__ = {
                            toString: 1
                        }, c).toString != s ? o = function(a) {
                            var b = this.__proto__,
                                c = a in (this.__proto__ = null, this);
                            return this.__proto__ = b, c
                        } : (b = c.constructor, o = function(a) {
                            var c = (this.constructor || b).prototype;
                            return a in this && !(a in c && this[a] === c[a])
                        }), c = null, o.call(this, a)
                    }), p = function(a, b) {
                        var d, e, f, g = 0;
                        (d = function() {
                            this.valueOf = 0
                        }).prototype.valueOf = 0, e = new d;
                        for (f in e) o.call(e, f) && g++;
                        return d = e = null, g ? p = 2 == g ? function(a, b) {
                            var c, d = {},
                                e = s.call(a) == v;
                            for (c in a) e && "prototype" == c || o.call(d, c) || !(d[c] = 1) || !o.call(a, c) || b(c)
                        } : function(a, b) {
                            var c, d, e = s.call(a) == v;
                            for (c in a) e && "prototype" == c || !o.call(a, c) || (d = "constructor" === c) || b(c);
                            (d || o.call(a, c = "constructor")) && b(c)
                        } : (e = ["valueOf", "toString", "toLocaleString", "propertyIsEnumerable", "isPrototypeOf", "hasOwnProperty", "constructor"], p = function(a, b) {
                            var d, f, g = s.call(a) == v,
                                h = !g && "function" != typeof a.constructor && c[typeof a.hasOwnProperty] && a.hasOwnProperty || o;
                            for (d in a) g && "prototype" == d || !h.call(a, d) || b(d);
                            for (f = e.length; d = e[--f]; h.call(a, d) && b(d));
                        }), p(a, b)
                    }, !f("json-stringify")) {
                    var F = {
                            92: "\\\\",
                            34: '\\"',
                            8: "\\b",
                            12: "\\f",
                            10: "\\n",
                            13: "\\r",
                            9: "\\t"
                        },
                        G = "000000",
                        H = function(a, b) {
                            return (G + (b || 0)).slice(-a)
                        },
                        I = "\\u00",
                        J = function(a) {
                            for (var b = '"', c = 0, d = a.length, e = !B || d > 10, f = e && (B ? a.split("") : a); d > c; c++) {
                                var g = a.charCodeAt(c);
                                switch (g) {
                                    case 8:
                                    case 9:
                                    case 10:
                                    case 12:
                                    case 13:
                                    case 34:
                                    case 92:
                                        b += F[g];
                                        break;
                                    default:
                                        if (32 > g) {
                                            b += I + H(2, g.toString(16));
                                            break
                                        }
                                        b += e ? f[c] : a.charAt(c)
                                }
                            }
                            return b + '"'
                        },
                        K = function(a, b, c, d, e, f, g) {
                            var h, i, j, k, m, n, r, t, u, v, B, D, F, G, I, L;
                            try {
                                h = b[a]
                            } catch (M) {}
                            if ("object" == typeof h && h)
                                if (i = s.call(h), i != w || o.call(h, "toJSON")) "function" == typeof h.toJSON && (i != x && i != y && i != z || o.call(h, "toJSON")) && (h = h.toJSON(a));
                                else if (h > -1 / 0 && 1 / 0 > h) {
                                if (E) {
                                    for (m = C(h / 864e5), j = C(m / 365.2425) + 1970 - 1; E(j + 1, 0) <= m; j++);
                                    for (k = C((m - E(j, 0)) / 30.42); E(j, k + 1) <= m; k++);
                                    m = 1 + m - E(j, k), n = (h % 864e5 + 864e5) % 864e5, r = C(n / 36e5) % 24, t = C(n / 6e4) % 60, u = C(n / 1e3) % 60, v = n % 1e3
                                } else j = h.getUTCFullYear(), k = h.getUTCMonth(), m = h.getUTCDate(), r = h.getUTCHours(), t = h.getUTCMinutes(), u = h.getUTCSeconds(), v = h.getUTCMilliseconds();
                                h = (0 >= j || j >= 1e4 ? (0 > j ? "-" : "+") + H(6, 0 > j ? -j : j) : H(4, j)) + "-" + H(2, k + 1) + "-" + H(2, m) + "T" + H(2, r) + ":" + H(2, t) + ":" + H(2, u) + "." + H(3, v) + "Z"
                            } else h = null;
                            if (c && (h = c.call(b, a, h)), null === h) return "null";
                            if (i = s.call(h), i == A) return "" + h;
                            if (i == x) return h > -1 / 0 && 1 / 0 > h ? "" + h : "null";
                            if (i == y) return J("" + h);
                            if ("object" == typeof h) {
                                for (G = g.length; G--;)
                                    if (g[G] === h) throw l();
                                if (g.push(h), B = [], I = f, f += e, i == z) {
                                    for (F = 0, G = h.length; G > F; F++) D = K(F, h, c, d, e, f, g), B.push(D === q ? "null" : D);
                                    L = B.length ? e ? "[\n" + f + B.join(",\n" + f) + "\n" + I + "]" : "[" + B.join(",") + "]" : "[]"
                                } else p(d || h, function(a) {
                                    var b = K(a, h, c, d, e, f, g);
                                    b !== q && B.push(J(a) + ":" + (e ? " " : "") + b)
                                }), L = B.length ? e ? "{\n" + f + B.join(",\n" + f) + "\n" + I + "}" : "{" + B.join(",") + "}" : "{}";
                                return g.pop(), L
                            }
                        };
                    d.stringify = function(a, b, d) {
                        var e, f, g, h;
                        if (c[typeof b] && b)
                            if ((h = s.call(b)) == v) f = b;
                            else if (h == z) {
                            g = {};
                            for (var i, j = 0, k = b.length; k > j; i = b[j++], h = s.call(i), (h == y || h == x) && (g[i] = 1));
                        }
                        if (d)
                            if ((h = s.call(d)) == x) {
                                if ((d -= d % 1) > 0)
                                    for (e = "", d > 10 && (d = 10); e.length < d; e += " ");
                            } else h == y && (e = d.length <= 10 ? d : d.slice(0, 10));
                        return K("", (i = {}, i[""] = a, i), f, g, e, "", [])
                    }
                }
                if (!f("json-parse")) {
                    var L, M, N = h.fromCharCode,
                        O = {
                            92: "\\",
                            34: '"',
                            47: "/",
                            98: "\b",
                            116: "	",
                            110: "\n",
                            102: "\f",
                            114: "\r"
                        },
                        P = function() {
                            throw L = M = null, k()
                        },
                        Q = function() {
                            for (var a, b, c, d, e, f = M, g = f.length; g > L;) switch (e = f.charCodeAt(L)) {
                                case 9:
                                case 10:
                                case 13:
                                case 32:
                                    L++;
                                    break;
                                case 123:
                                case 125:
                                case 91:
                                case 93:
                                case 58:
                                case 44:
                                    return a = B ? f.charAt(L) : f[L], L++, a;
                                case 34:
                                    for (a = "@", L++; g > L;)
                                        if (e = f.charCodeAt(L), 32 > e) P();
                                        else if (92 == e) switch (e = f.charCodeAt(++L)) {
                                        case 92:
                                        case 34:
                                        case 47:
                                        case 98:
                                        case 116:
                                        case 110:
                                        case 102:
                                        case 114:
                                            a += O[e], L++;
                                            break;
                                        case 117:
                                            for (b = ++L, c = L + 4; c > L; L++) e = f.charCodeAt(L), e >= 48 && 57 >= e || e >= 97 && 102 >= e || e >= 65 && 70 >= e || P();
                                            a += N("0x" + f.slice(b, L));
                                            break;
                                        default:
                                            P()
                                    } else {
                                        if (34 == e) break;
                                        for (e = f.charCodeAt(L), b = L; e >= 32 && 92 != e && 34 != e;) e = f.charCodeAt(++L);
                                        a += f.slice(b, L)
                                    }
                                    if (34 == f.charCodeAt(L)) return L++, a;
                                    P();
                                default:
                                    if (b = L, 45 == e && (d = !0, e = f.charCodeAt(++L)), e >= 48 && 57 >= e) {
                                        for (48 == e && (e = f.charCodeAt(L + 1), e >= 48 && 57 >= e) && P(), d = !1; g > L && (e = f.charCodeAt(L), e >= 48 && 57 >= e); L++);
                                        if (46 == f.charCodeAt(L)) {
                                            for (c = ++L; g > c && (e = f.charCodeAt(c), e >= 48 && 57 >= e); c++);
                                            c == L && P(), L = c
                                        }
                                        if (e = f.charCodeAt(L), 101 == e || 69 == e) {
                                            for (e = f.charCodeAt(++L), (43 == e || 45 == e) && L++, c = L; g > c && (e = f.charCodeAt(c), e >= 48 && 57 >= e); c++);
                                            c == L && P(), L = c
                                        }
                                        return +f.slice(b, L)
                                    }
                                    if (d && P(), "true" == f.slice(L, L + 4)) return L += 4, !0;
                                    if ("false" == f.slice(L, L + 5)) return L += 5, !1;
                                    if ("null" == f.slice(L, L + 4)) return L += 4, null;
                                    P()
                            }
                            return "$"
                        },
                        R = function(a) {
                            var b, c;
                            if ("$" == a && P(), "string" == typeof a) {
                                if ("@" == (B ? a.charAt(0) : a[0])) return a.slice(1);
                                if ("[" == a) {
                                    for (b = []; a = Q(), "]" != a; c || (c = !0)) c && ("," == a ? (a = Q(), "]" == a && P()) : P()), "," == a && P(), b.push(R(a));
                                    return b
                                }
                                if ("{" == a) {
                                    for (b = {}; a = Q(), "}" != a; c || (c = !0)) c && ("," == a ? (a = Q(), "}" == a && P()) : P()), ("," == a || "string" != typeof a || "@" != (B ? a.charAt(0) : a[0]) || ":" != Q()) && P(), b[a.slice(1)] = R(Q());
                                    return b
                                }
                                P()
                            }
                            return a
                        },
                        S = function(a, b, c) {
                            var d = T(a, b, c);
                            d === q ? delete a[b] : a[b] = d
                        },
                        T = function(a, b, c) {
                            var d, e = a[b];
                            if ("object" == typeof e && e)
                                if (s.call(e) == z)
                                    for (d = e.length; d--;) S(e, d, c);
                                else p(e, function(a) {
                                    S(e, a, c)
                                });
                            return c.call(a, b, e)
                        };
                    d.parse = function(a, b) {
                        var c, d;
                        return L = 0, M = "" + a, c = R(Q()), "$" != Q() && P(), L = M = null, b && s.call(b) == v ? T((d = {}, d[""] = c, d), "", b) : c
                    }
                }
            }
            return d.runInContext = a, d
        }
        var b = "function" == typeof define && define.amd,
            c = {
                "function": !0,
                object: !0
            },
            d = c[typeof exports] && exports && !exports.nodeType && exports,
            e = c[typeof window] && window || this,
            f = d && c[typeof module] && module && !module.nodeType && "object" == typeof global && global;
        if (!f || f.global !== f && f.window !== f && f.self !== f || (e = f), d && !b) a(e, d);
        else {
            var g = e.JSON,
                h = e.JSON3,
                i = !1,
                j = a(e, e.JSON3 = {
                    noConflict: function() {
                        return i || (i = !0, e.JSON = g, e.JSON3 = h, g = h = null), j
                    }
                });
            e.JSON = {
                parse: j.parse,
                stringify: j.stringify
            }
        }
        b && define(function() {
            return j
        })
    }.call(this),
    function() {
        var a = {};
        a.parseXML = function(a, b) {
            var c = null;
            try {
                if (window.DOMParser) {
                    var d = new DOMParser;
                    c = d.parseFromString(a, b)
                } else c = new ActiveXObject("Microsoft.XMLDOM"), c.async = !1, c.loadXML(a)
            } catch (e) {}
            return c
        }, a.parseJSON = function(a) {
            if (null == a) return null;
            try {
                return JSON.parse(a)
            } catch (b) {
                throw b
            }
        }, createjs.DataUtils = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this.src = null, this.type = null, this.id = null, this.maintainOrder = !1, this.callback = null, this.data = null, this.method = createjs.LoadItem.GET, this.values = null, this.headers = null, this.withCredentials = !1, this.mimeType = null, this.crossOrigin = null, this.loadTimeout = 8e3
        }
        var b = a.prototype = {},
            c = a;
        c.create = function(b) {
            if ("string" == typeof b) {
                var d = new a;
                return d.src = b, d
            }
            if (b instanceof c) return b;
            if (b instanceof Object) return b;
            throw new Error("Type not recognized.")
        }, b.set = function(a) {
            for (var b in a) this[b] = a[b];
            return this
        }, createjs.LoadItem = c
    }(),
    function() {
        var a = {};
        a.ABSOLUTE_PATT = /^(?:\w+:)?\/{2}/i, a.RELATIVE_PATT = /^[./]*?\//i, a.EXTENSION_PATT = /\/?[^/]+\.(\w{1,5})$/i, a.parseURI = function(b) {
            var c = {
                absolute: !1,
                relative: !1
            };
            if (null == b) return c;
            var d = b.indexOf("?");
            d > -1 && (b = b.substr(0, d));
            var e;
            return a.ABSOLUTE_PATT.test(b) ? c.absolute = !0 : a.RELATIVE_PATT.test(b) && (c.relative = !0), (e = b.match(a.EXTENSION_PATT)) && (c.extension = e[1].toLowerCase()), c
        }, a.formatQueryString = function(a, b) {
            if (null == a) throw new Error("You must specify data.");
            var c = [];
            for (var d in a) c.push(d + "=" + escape(a[d]));
            return b && (c = c.concat(b)), c.join("&")
        }, a.buildPath = function(a, b) {
            if (null == b) return a;
            var c = [],
                d = a.indexOf("?");
            if (-1 != d) {
                var e = a.slice(d + 1);
                c = c.concat(e.split("&"))
            }
            return -1 != d ? a.slice(0, d) + "?" + this._formatQueryString(b, c) : a + "?" + this._formatQueryString(b, c)
        }, a.isCrossDomain = function(a) {
            var b = document.createElement("a");
            b.href = a.src;
            var c = document.createElement("a");
            c.href = location.href;
            var d = "" != b.hostname && (b.port != c.port || b.protocol != c.protocol || b.hostname != c.hostname);

            return d
        }, a.isLocal = function(a) {
            var b = document.createElement("a");
            return b.href = a.src, "" == b.hostname && "file:" == b.protocol
        }, a.isBinary = function(a) {
            switch (a) {
                case createjs.AbstractLoader.IMAGE:
                case createjs.AbstractLoader.BINARY:
                    return !0;
                default:
                    return !1
            }
        }, a.isImageTag = function(a) {
            return a instanceof HTMLImageElement
        }, a.isAudioTag = function(a) {
            return window.HTMLAudioElement ? a instanceof HTMLAudioElement : !1
        }, a.isVideoTag = function(a) {
            return window.HTMLVideoElement ? a instanceof HTMLVideoElement : void 0
        }, a.isText = function(a) {
            switch (a) {
                case createjs.AbstractLoader.TEXT:
                case createjs.AbstractLoader.JSON:
                case createjs.AbstractLoader.MANIFEST:
                case createjs.AbstractLoader.XML:
                case createjs.AbstractLoader.CSS:
                case createjs.AbstractLoader.SVG:
                case createjs.AbstractLoader.JAVASCRIPT:
                    return !0;
                default:
                    return !1
            }
        }, a.getTypeByExtension = function(a) {
            if (null == a) return createjs.AbstractLoader.TEXT;
            switch (a.toLowerCase()) {
                case "jpeg":
                case "jpg":
                case "gif":
                case "png":
                case "webp":
                case "bmp":
                    return createjs.AbstractLoader.IMAGE;
                case "ogg":
                case "mp3":
                case "webm":
                    return createjs.AbstractLoader.SOUND;
                case "mp4":
                case "webm":
                case "ts":
                    return createjs.AbstractLoader.VIDEO;
                case "json":
                    return createjs.AbstractLoader.JSON;
                case "xml":
                    return createjs.AbstractLoader.XML;
                case "css":
                    return createjs.AbstractLoader.CSS;
                case "js":
                    return createjs.AbstractLoader.JAVASCRIPT;
                case "svg":
                    return createjs.AbstractLoader.SVG;
                default:
                    return createjs.AbstractLoader.TEXT
            }
        }, createjs.RequestUtils = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.EventDispatcher_constructor(), this.loaded = !1, this.canceled = !1, this.progress = 0, this.type = c, this.resultFormatter = null, this._item = a ? createjs.LoadItem.create(a) : null, this._preferXHR = b, this._result = null, this._rawResult = null, this._loadedItems = null, this._tagSrcAttribute = null, this._tag = null
        }
        var b = createjs.extend(a, createjs.EventDispatcher),
            c = a;
        c.POST = "POST", c.GET = "GET", c.BINARY = "binary", c.CSS = "css", c.IMAGE = "image", c.JAVASCRIPT = "javascript", c.JSON = "json", c.JSONP = "jsonp", c.MANIFEST = "manifest", c.SOUND = "sound", c.VIDEO = "video", c.SPRITESHEET = "spritesheet", c.SVG = "svg", c.TEXT = "text", c.XML = "xml", b.getItem = function() {
            return this._item
        }, b.getResult = function(a) {
            return a ? this._rawResult : this._result
        }, b.getTag = function() {
            return this._tag
        }, b.setTag = function(a) {
            this._tag = a
        }, b.load = function() {
            this._createRequest(), this._request.on("complete", this, this), this._request.on("progress", this, this), this._request.on("loadStart", this, this), this._request.on("abort", this, this), this._request.on("timeout", this, this), this._request.on("error", this, this);
            var a = new createjs.Event("initialize");
            a.loader = this._request, this.dispatchEvent(a), this._request.load()
        }, b.cancel = function() {
            this.canceled = !0, this.destroy()
        }, b.destroy = function() {
            this._request && (this._request.removeAllEventListeners(), this._request.destroy()), this._request = null, this._item = null, this._rawResult = null, this._result = null, this._loadItems = null, this.removeAllEventListeners()
        }, b.getLoadedItems = function() {
            return this._loadedItems
        }, b._createRequest = function() {
            this._request = this._preferXHR ? new createjs.XHRRequest(this._item) : new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute)
        }, b._createTag = function() {
            return null
        }, b._sendLoadStart = function() {
            this._isCanceled() || this.dispatchEvent("loadstart")
        }, b._sendProgress = function(a) {
            if (!this._isCanceled()) {
                var b = null;
                "number" == typeof a ? (this.progress = a, b = new createjs.ProgressEvent(this.progress)) : (b = a, this.progress = a.loaded / a.total, b.progress = this.progress, (isNaN(this.progress) || this.progress == 1 / 0) && (this.progress = 0)), this.hasEventListener("progress") && this.dispatchEvent(b)
            }
        }, b._sendComplete = function() {
            if (!this._isCanceled()) {
                this.loaded = !0;
                var a = new createjs.Event("complete");
                a.rawResult = this._rawResult, null != this._result && (a.result = this._result), this.dispatchEvent(a)
            }
        }, b._sendError = function(a) {
            !this._isCanceled() && this.hasEventListener("error") && (null == a && (a = new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")), this.dispatchEvent(a))
        }, b._isCanceled = function() {
            return null == window.createjs || this.canceled ? !0 : !1
        }, b.resultFormatter = null, b.handleEvent = function(a) {
            switch (a.type) {
                case "complete":
                    this._rawResult = a.target._response;
                    var b = this.resultFormatter && this.resultFormatter(this),
                        c = this;
                    b instanceof Function ? b(function(a) {
                        c._result = a, c._sendComplete()
                    }) : (this._result = b || this._rawResult, this._sendComplete());
                    break;
                case "progress":
                    this._sendProgress(a);
                    break;
                case "error":
                    this._sendError(a);
                    break;
                case "loadstart":
                    this._sendLoadStart();
                    break;
                case "abort":
                case "timeout":
                    this._isCanceled() || this.dispatchEvent(a.type)
            }
        }, b.buildPath = function(a, b) {
            return createjs.RequestUtils.buildPath(a, b)
        }, b.toString = function() {
            return "[PreloadJS AbstractLoader]"
        }, createjs.AbstractLoader = createjs.promote(a, "EventDispatcher")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.AbstractLoader_constructor(a, b, c), this.resultFormatter = this._formatResult, this._tagSrcAttribute = "src"
        }
        var b = createjs.extend(a, createjs.AbstractLoader);
        b.load = function() {
            this._tag || (this._tag = this._createTag(this._item.src)), this._tag.preload = "auto", this._tag.load(), this.AbstractLoader_load()
        }, b._createTag = function() {}, b._createRequest = function() {
            this._request = this._preferXHR ? new createjs.XHRRequest(this._item) : new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute)
        }, b._formatResult = function(a) {
            return this._tag.removeEventListener && this._tag.removeEventListener("canplaythrough", this._loadedHandler), this._tag.onstalled = null, this._preferXHR && (a.getTag().src = a.getResult(!0)), a.getTag()
        }, createjs.AbstractMediaLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = function(a) {
                this._item = a
            },
            b = createjs.extend(a, createjs.EventDispatcher);
        b.load = function() {}, b.destroy = function() {}, b.cancel = function() {}, createjs.AbstractRequest = createjs.promote(a, "EventDispatcher")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.AbstractRequest_constructor(a), this._tag = b, this._tagSrcAttribute = c, this._loadedHandler = createjs.proxy(this._handleTagComplete, this), this._addedToDOM = !1, this._startTagVisibility = null
        }
        var b = createjs.extend(a, createjs.AbstractRequest);
        b.load = function() {
            null == this._tag.parentNode && (window.document.body.appendChild(this._tag), this._addedToDOM = !0), this._tag.onload = createjs.proxy(this._handleTagComplete, this), this._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);
            var a = new createjs.Event("initialize");
            a.loader = this._tag, this.dispatchEvent(a), this._hideTag(), this._tag[this._tagSrcAttribute] = this._item.src
        }, b.destroy = function() {
            this._clean(), this._tag = null, this.AbstractRequest_destroy()
        }, b._handleReadyStateChange = function() {
            clearTimeout(this._loadTimeout);
            var a = this._tag;
            ("loaded" == a.readyState || "complete" == a.readyState) && this._handleTagComplete()
        }, b._handleTagComplete = function() {
            this._rawResult = this._tag, this._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult, this._clean(), this._showTag(), this.dispatchEvent("complete")
        }, b._clean = function() {
            this._tag.onload = null, this._tag.onreadystatechange = null, this._addedToDOM && null != this._tag.parentNode && this._tag.parentNode.removeChild(this._tag)
        }, b._hideTag = function() {
            this._startTagVisibility = this._tag.style.visibility, this._tag.style.visibility = "hidden"
        }, b._showTag = function() {
            this._tag.style.visibility = this._startTagVisibility
        }, b._handleStalled = function() {}, createjs.TagRequest = createjs.promote(a, "AbstractRequest")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.AbstractRequest_constructor(a), this._tag = b, this._tagSrcAttribute = c, this._loadedHandler = createjs.proxy(this._handleTagComplete, this)
        }
        var b = createjs.extend(a, createjs.TagRequest);
        b.load = function() {
            this._tag.onstalled = createjs.proxy(this._handleStalled, this), this._tag.onprogress = createjs.proxy(this._handleProgress, this), this._tag.addEventListener && this._tag.addEventListener("canplaythrough", this._loadedHandler, !1), this.TagRequest_load()
        }, b._handleReadyStateChange = function() {
            clearTimeout(this._loadTimeout);
            var a = this._tag;
            ("loaded" == a.readyState || "complete" == a.readyState) && this._handleTagComplete()
        }, b._handleStalled = function() {}, b._handleProgress = function(a) {
            if (a && !(a.loaded > 0 && 0 == a.total)) {
                var b = new createjs.ProgressEvent(a.loaded, a.total);
                this.dispatchEvent(b)
            }
        }, b._clean = function() {
            this._tag.removeEventListener && this._tag.removeEventListener("canplaythrough", this._loadedHandler), this._tag.onstalled = null, this._tag.onprogress = null, this.TagRequest__clean()
        }, createjs.MediaTagRequest = createjs.promote(a, "TagRequest")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractRequest_constructor(a), this._request = null, this._loadTimeout = null, this._xhrLevel = 1, this._response = null, this._rawResponse = null, this._canceled = !1, this._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this), this._handleProgressProxy = createjs.proxy(this._handleProgress, this), this._handleAbortProxy = createjs.proxy(this._handleAbort, this), this._handleErrorProxy = createjs.proxy(this._handleError, this), this._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this), this._handleLoadProxy = createjs.proxy(this._handleLoad, this), this._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this), !this._createXHR(a)
        }
        var b = createjs.extend(a, createjs.AbstractRequest);
        a.ACTIVEX_VERSIONS = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.5.0", "Msxml2.XMLHTTP.4.0", "MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP"], b.getResult = function(a) {
            return a && this._rawResponse ? this._rawResponse : this._response
        }, b.cancel = function() {
            this.canceled = !0, this._clean(), this._request.abort()
        }, b.load = function() {
            if (null == this._request) return void this._handleError();
            this._request.addEventListener("loadstart", this._handleLoadStartProxy, !1), this._request.addEventListener("progress", this._handleProgressProxy, !1), this._request.addEventListener("abort", this._handleAbortProxy, !1), this._request.addEventListener("error", this._handleErrorProxy, !1), this._request.addEventListener("timeout", this._handleTimeoutProxy, !1), this._request.addEventListener("load", this._handleLoadProxy, !1), this._request.addEventListener("readystatechange", this._handleReadyStateChangeProxy, !1), 1 == this._xhrLevel && (this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout));
            try {
                this._item.values && this._item.method != createjs.AbstractLoader.GET ? this._item.method == createjs.AbstractLoader.POST && this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)) : this._request.send()
            } catch (a) {
                this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND", null, a))
            }
        }, b.setResponseType = function(a) {
            this._request.responseType = a
        }, b.getAllResponseHeaders = function() {
            return this._request.getAllResponseHeaders instanceof Function ? this._request.getAllResponseHeaders() : null
        }, b.getResponseHeader = function(a) {
            return this._request.getResponseHeader instanceof Function ? this._request.getResponseHeader(a) : null
        }, b._handleProgress = function(a) {
            if (a && !(a.loaded > 0 && 0 == a.total)) {
                var b = new createjs.ProgressEvent(a.loaded, a.total);
                this.dispatchEvent(b)
            }
        }, b._handleLoadStart = function() {
            clearTimeout(this._loadTimeout), this.dispatchEvent("loadstart")
        }, b._handleAbort = function(a) {
            this._clean(), this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED", null, a))
        }, b._handleError = function(a) {
            this._clean(), this.dispatchEvent(new createjs.ErrorEvent(a.message))
        }, b._handleReadyStateChange = function() {
            4 == this._request.readyState && this._handleLoad()
        }, b._handleLoad = function() {
            if (!this.loaded) {
                this.loaded = !0;
                var a = this._checkError();
                if (a) return void this._handleError(a);
                this._response = this._getResponse(), this._clean(), this.dispatchEvent(new createjs.Event("complete"))
            }
        }, b._handleTimeout = function(a) {
            this._clean(), this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT", null, a))
        }, b._checkError = function() {
            var a = parseInt(this._request.status);
            switch (a) {
                case 404:
                case 0:
                    return new Error(a)
            }
            return null
        }, b._getResponse = function() {
            if (null != this._response) return this._response;
            if (null != this._request.response) return this._request.response;
            try {
                if (null != this._request.responseText) return this._request.responseText
            } catch (a) {}
            try {
                if (null != this._request.responseXML) return this._request.responseXML
            } catch (a) {}
            return null
        }, b._createXHR = function(a) {
            var b = createjs.RequestUtils.isCrossDomain(a),
                c = {},
                d = null;
            if (window.XMLHttpRequest) d = new XMLHttpRequest, b && void 0 === d.withCredentials && window.XDomainRequest && (d = new XDomainRequest);
            else {
                for (var e = 0, f = s.ACTIVEX_VERSIONS.length; f > e; e++) {
                    {
                        s.ACTIVEX_VERSIONS[e]
                    }
                    try {
                        d = new ActiveXObject(axVersions);
                        break
                    } catch (g) {}
                }
                if (null == d) return !1
            }
            a.mimeType && d.overrideMimeType && d.overrideMimeType(a.mimeType), this._xhrLevel = "string" == typeof d.responseType ? 2 : 1;
            var h = null;
            if (h = a.method == createjs.AbstractLoader.GET ? createjs.RequestUtils.buildPath(a.src, a.values) : a.src, d.open(a.method || createjs.AbstractLoader.GET, h, !0), b && d instanceof XMLHttpRequest && 1 == this._xhrLevel && (c.Origin = location.origin), a.values && a.method == createjs.AbstractLoader.POST && (c["Content-Type"] = "application/x-www-form-urlencoded"), b || c["X-Requested-With"] || (c["X-Requested-With"] = "XMLHttpRequest"), a.headers)
                for (var i in a.headers) c[i] = a.headers[i];
            for (i in c) d.setRequestHeader(i, c[i]);
            return d instanceof XMLHttpRequest && void 0 !== a.withCredentials && (d.withCredentials = a.withCredentials), this._request = d, !0
        }, b._clean = function() {
            clearTimeout(this._loadTimeout), this._request.removeEventListener("loadstart", this._handleLoadStartProxy), this._request.removeEventListener("progress", this._handleProgressProxy), this._request.removeEventListener("abort", this._handleAbortProxy), this._request.removeEventListener("error", this._handleErrorProxy), this._request.removeEventListener("timeout", this._handleTimeoutProxy), this._request.removeEventListener("load", this._handleLoadProxy), this._request.removeEventListener("readystatechange", this._handleReadyStateChangeProxy)
        }, b.toString = function() {
            return "[PreloadJS XHRRequest]"
        }, createjs.XHRRequest = createjs.promote(a, "AbstractRequest")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.AbstractLoader_constructor(), this.init(a, b, c)
        }
        var b = createjs.extend(a, createjs.AbstractLoader),
            c = a;
        b.init = function(a, b, c) {
            this.useXHR = !0, this.preferXHR = !0, this._preferXHR = !0, this.setPreferXHR(a), this.stopOnError = !1, this.maintainScriptOrder = !0, this.next = null, this._paused = !1, this._basePath = b, this._crossOrigin = c, this._typeCallbacks = {}, this._extensionCallbacks = {}, this._loadStartWasDispatched = !1, this._maxConnections = 1, this._currentlyLoadingScript = null, this._currentLoads = [], this._loadQueue = [], this._loadQueueBackup = [], this._loadItemsById = {}, this._loadItemsBySrc = {}, this._loadedResults = {}, this._loadedRawResults = {}, this._numItems = 0, this._numItemsLoaded = 0, this._scriptOrder = [], this._loadedScripts = [], this._lastProgress = 0 / 0, this._availableLoaders = [createjs.ImageLoader, createjs.JavaScriptLoader, createjs.CSSLoader, createjs.JSONLoader, createjs.JSONPLoader, createjs.SoundLoader, createjs.ManifestLoader, createjs.SpriteSheetLoader, createjs.XMLLoader, createjs.SVGLoader, createjs.BinaryLoader, createjs.VideoLoader, createjs.TextLoader], this._defaultLoaderLength = this._availableLoaders.length
        }, c.loadTimeout = 8e3, c.LOAD_TIMEOUT = 0, c.BINARY = createjs.AbstractLoader.BINARY, c.CSS = createjs.AbstractLoader.CSS, c.IMAGE = createjs.AbstractLoader.IMAGE, c.JAVASCRIPT = createjs.AbstractLoader.JAVASCRIPT, c.JSON = createjs.AbstractLoader.JSON, c.JSONP = createjs.AbstractLoader.JSONP, c.MANIFEST = createjs.AbstractLoader.MANIFEST, c.SOUND = createjs.AbstractLoader.SOUND, c.VIDEO = createjs.AbstractLoader.VIDEO, c.SVG = createjs.AbstractLoader.SVG, c.TEXT = createjs.AbstractLoader.TEXT, c.XML = createjs.AbstractLoader.XML, c.POST = createjs.AbstractLoader.POST, c.GET = createjs.AbstractLoader.GET, b.registerLoader = function(a) {
            if (!a || !a.canLoadItem) throw new Error("loader is of an incorrect type.");
            if (-1 != this._availableLoaders.indexOf(a)) throw new Error("loader already exists.");
            this._availableLoaders.unshift(a)
        }, b.unregisterLoader = function(a) {
            var b = this._availableLoaders.indexOf(a); - 1 != b && b < this._defaultLoaderLength - 1 && this._availableLoaders.splice(b, 1)
        }, b.setUseXHR = function(a) {
            return this.setPreferXHR(a)
        }, b.setPreferXHR = function(a) {
            return this.preferXHR = 0 != a && null != window.XMLHttpRequest, this.preferXHR
        }, b.removeAll = function() {
            this.remove()
        }, b.remove = function(a) {
            var b = null;
            if (!a || a instanceof Array) {
                if (a) b = a;
                else if (arguments.length > 0) return
            } else b = [a];
            var c = !1;
            if (b) {
                for (; b.length;) {
                    var d = b.pop(),
                        e = this.getResult(d);
                    for (f = this._loadQueue.length - 1; f >= 0; f--)
                        if (g = this._loadQueue[f].getItem(), g.id == d || g.src == d) {
                            this._loadQueue.splice(f, 1)[0].cancel();
                            break
                        }
                    for (f = this._loadQueueBackup.length - 1; f >= 0; f--)
                        if (g = this._loadQueueBackup[f].getItem(), g.id == d || g.src == d) {
                            this._loadQueueBackup.splice(f, 1)[0].cancel();
                            break
                        }
                    if (e) delete this._loadItemsById[e.id], delete this._loadItemsBySrc[e.src], this._disposeItem(e);
                    else
                        for (var f = this._currentLoads.length - 1; f >= 0; f--) {
                            var g = this._currentLoads[f].getItem();
                            if (g.id == d || g.src == d) {
                                this._currentLoads.splice(f, 1)[0].cancel(), c = !0;
                                break
                            }
                        }
                }
                c && this._loadNext()
            } else {
                this.close();
                for (var h in this._loadItemsById) this._disposeItem(this._loadItemsById[h]);
                this.init(this.preferXHR, this._basePath)
            }
        }, b.reset = function() {
            this.close();
            for (var a in this._loadItemsById) this._disposeItem(this._loadItemsById[a]);
            for (var b = [], c = 0, d = this._loadQueueBackup.length; d > c; c++) b.push(this._loadQueueBackup[c].getItem());
            this.loadManifest(b, !1)
        }, b.installPlugin = function(a) {
            if (null != a && null != a.getPreloadHandlers) {
                var b = a.getPreloadHandlers();
                if (b.scope = a, null != b.types)
                    for (var c = 0, d = b.types.length; d > c; c++) this._typeCallbacks[b.types[c]] = b;
                if (null != b.extensions)
                    for (c = 0, d = b.extensions.length; d > c; c++) this._extensionCallbacks[b.extensions[c]] = b
            }
        }, b.setMaxConnections = function(a) {
            this._maxConnections = a, !this._paused && this._loadQueue.length > 0 && this._loadNext()
        }, b.loadFile = function(a, b, c) {
            if (null == a) {
                var d = new createjs.ErrorEvent("PRELOAD_NO_FILE");
                return void this._sendError(d)
            }
            this._addItem(a, null, c), this.setPaused(b !== !1 ? !1 : !0)
        }, b.loadManifest = function(a, b, d) {
            var e = null,
                f = null;
            if (a instanceof Array) {
                if (0 == a.length) {
                    var g = new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");
                    return void this._sendError(g)
                }
                e = a
            } else if ("string" == typeof a) e = [{
                src: a,
                type: c.MANIFEST
            }];
            else {
                if ("object" != typeof a) {
                    var g = new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");
                    return void this._sendError(g)
                }
                if (void 0 !== a.src) {
                    if (null == a.type) a.type = c.MANIFEST;
                    else if (a.type != c.MANIFEST) {
                        var g = new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");
                        this._sendError(g)
                    }
                    e = [a]
                } else void 0 !== a.manifest && (e = a.manifest, f = a.path)
            }
            for (var h = 0, i = e.length; i > h; h++) this._addItem(e[h], f, d);
            this.setPaused(b !== !1 ? !1 : !0)
        }, b.load = function() {
            this.setPaused(!1)
        }, b.getItem = function(a) {
            return this._loadItemsById[a] || this._loadItemsBySrc[a]
        }, b.getResult = function(a, b) {
            var c = this._loadItemsById[a] || this._loadItemsBySrc[a];
            if (null == c) return null;
            var d = c.id;
            return b && this._loadedRawResults[d] ? this._loadedRawResults[d] : this._loadedResults[d]
        }, b.getItems = function(a) {
            for (var b = [], c = 0, d = this._loadQueueBackup.length; d > c; c++) {
                var e = this._loadQueueBackup[c],
                    f = e.getItem();
                (a !== !0 || e.loaded) && b.push({
                    item: f,
                    result: this.getResult(f.id),
                    rawResult: this.getResult(f.id, !0)
                })
            }
            return b
        }, b.setPaused = function(a) {
            this._paused = a, this._paused || this._loadNext()
        }, b.close = function() {
            for (; this._currentLoads.length;) this._currentLoads.pop().cancel();
            this._scriptOrder.length = 0, this._loadedScripts.length = 0, this.loadStartWasDispatched = !1, this._itemCount = 0, this._lastProgress = 0 / 0
        }, b._addItem = function(a, b, c) {
            var d = this._createLoadItem(a, b, c);
            if (null != d) {
                var e = this._createLoader(d);
                null != e && (d._loader = e, this._loadQueue.push(e), this._loadQueueBackup.push(e), this._numItems++, this._updateProgress(), (this.maintainScriptOrder && d.type == createjs.LoadQueue.JAVASCRIPT || d.maintainOrder === !0) && (this._scriptOrder.push(d), this._loadedScripts.push(null)))
            }
        }, b._createLoadItem = function(a, b, d) {
            var e = createjs.LoadItem.create(a);
            if (null == e) return null;
            var f = createjs.RequestUtils.parseURI(e.src);
            f.extension && (e.ext = f.extension), null == e.type && (e.type = createjs.RequestUtils.getTypeByExtension(e.ext));
            var g = "",
                h = d || this._basePath,
                i = e.src;
            if (!f.absolute && !f.relative)
                if (b) {
                    g = b;
                    var j = createjs.RequestUtils.parseURI(b);
                    i = b + i, null == h || j.absolute || j.relative || (g = h + g)
                } else null != h && (g = h);
            e.src = g + e.src, e.path = g, (void 0 === e.id || null === e.id || "" === e.id) && (e.id = i);
            var k = this._typeCallbacks[e.type] || this._extensionCallbacks[e.ext];
            if (k) {
                var l = k.callback.call(k.scope, e, this);
                if (l === !1) return null;
                l === !0 || null != l && (e._loader = l), f = createjs.RequestUtils.parseURI(e.src), null != f.extension && (e.ext = f.extension)
            }
            return this._loadItemsById[e.id] = e, this._loadItemsBySrc[e.src] = e, null == e.loadTimeout && (e.loadTimeout = c.loadTimeout), null == e.crossOrigin && (e.crossOrigin = this._crossOrigin), e
        }, b._createLoader = function(a) {
            if (null != a._loader) return a._loader;
            for (var b = this.preferXHR, c = 0; c < this._availableLoaders.length; c++) {
                var d = this._availableLoaders[c];
                if (d && d.canLoadItem(a)) return new d(a, b)
            }
            return null
        }, b._loadNext = function() {
            if (!this._paused) {
                this._loadStartWasDispatched || (this._sendLoadStart(), this._loadStartWasDispatched = !0), this._numItems == this._numItemsLoaded ? (this.loaded = !0, this._sendComplete(), this.next && this.next.load && this.next.load()) : this.loaded = !1;
                for (var a = 0; a < this._loadQueue.length && !(this._currentLoads.length >= this._maxConnections); a++) {
                    var b = this._loadQueue[a];
                    this._canStartLoad(b) && (this._loadQueue.splice(a, 1), a--, this._loadItem(b))
                }
            }
        }, b._loadItem = function(a) {
            a.on("fileload", this._handleFileLoad, this), a.on("progress", this._handleProgress, this), a.on("complete", this._handleFileComplete, this), a.on("error", this._handleError, this), a.on("fileerror", this._handleFileError, this), this._currentLoads.push(a), this._sendFileStart(a.getItem()), a.load()
        }, b._handleFileLoad = function(a) {
            a.target = null, this.dispatchEvent(a)
        }, b._handleFileError = function(a) {
            var b = new createjs.ErrorEvent("FILE_LOAD_ERROR", null, a.item);
            this._sendError(b)
        }, b._handleError = function(a) {
            var b = a.target;
            this._numItemsLoaded++, this._finishOrderedItem(b, !0), this._updateProgress();
            var c = new createjs.ErrorEvent("FILE_LOAD_ERROR", null, b.getItem());
            this._sendError(c), this.stopOnError || (this._removeLoadItem(b), this._loadNext())
        }, b._handleFileComplete = function(a) {
            var b = a.target,
                c = b.getItem(),
                d = b.getResult();
            this._loadedResults[c.id] = d;
            var e = b.getResult(!0);
            null != e && e !== d && (this._loadedRawResults[c.id] = e), this._saveLoadedItems(b), this._removeLoadItem(b), this._finishOrderedItem(b) || this._processFinishedLoad(c, b)
        }, b._saveLoadedItems = function(a) {
            var b = a.getLoadedItems();
            if (null !== b)
                for (var c = 0; c < b.length; c++) {
                    var d = b[c].item;
                    this._loadItemsBySrc[d.src] = d, this._loadItemsById[d.id] = d, this._loadedResults[d.id] = b[c].result, this._loadedRawResults[d.id] = b[c].rawResult
                }
        }, b._finishOrderedItem = function(a, b) {
            var c = a.getItem();
            if (this.maintainScriptOrder && c.type == createjs.LoadQueue.JAVASCRIPT || c.maintainOrder) {
                a instanceof createjs.JavaScriptLoader && (this._currentlyLoadingScript = !1);
                var d = createjs.indexOf(this._scriptOrder, c);
                return -1 == d ? !1 : (this._loadedScripts[d] = b === !0 ? !0 : c, this._checkScriptLoadOrder(), !0)
            }
            return !1
        }, b._checkScriptLoadOrder = function() {
            for (var a = this._loadedScripts.length, b = 0; a > b; b++) {
                var c = this._loadedScripts[b];
                if (null === c) break;
                if (c !== !0) {
                    var d = this._loadedResults[c.id];
                    c.type == createjs.LoadQueue.JAVASCRIPT && (document.body || document.getElementsByTagName("body")[0]).appendChild(d);
                    var e = c._loader;
                    this._processFinishedLoad(c, e), this._loadedScripts[b] = !0
                }
            }
        }, b._processFinishedLoad = function(a, b) {
            this._numItemsLoaded++, this._updateProgress(), this._sendFileComplete(a, b), this._loadNext()
        }, b._canStartLoad = function(a) {
            if (!this.maintainScriptOrder || a.preferXHR) return !0;
            var b = a.getItem();
            if (b.type != createjs.LoadQueue.JAVASCRIPT) return !0;
            if (this._currentlyLoadingScript) return !1;
            for (var c = this._scriptOrder.indexOf(b), d = 0; c > d;) {
                var e = this._loadedScripts[d];
                if (null == e) return !1;
                d++
            }
            return this._currentlyLoadingScript = !0, !0
        }, b._removeLoadItem = function(a) {
            var b = a.getItem();
            delete b._loader;
            for (var c = this._currentLoads.length, d = 0; c > d; d++)
                if (this._currentLoads[d] == a) {
                    this._currentLoads.splice(d, 1);
                    break
                }
        }, b._handleProgress = function(a) {
            var b = a.target;
            this._sendFileProgress(b.getItem(), b.progress), this._updateProgress()
        }, b._updateProgress = function() {
            var a = this._numItemsLoaded / this._numItems,
                b = this._numItems - this._numItemsLoaded;
            if (b > 0) {
                for (var c = 0, d = 0, e = this._currentLoads.length; e > d; d++) c += this._currentLoads[d].progress;
                a += c / b * (b / this._numItems)
            }
            this._lastProgress != a && (this._sendProgress(a), this._lastProgress = a)
        }, b._disposeItem = function(a) {
            delete this._loadedResults[a.id], delete this._loadedRawResults[a.id], delete this._loadItemsById[a.id], delete this._loadItemsBySrc[a.src]
        }, b._sendFileProgress = function(a, b) {
            if (this._isCanceled()) return void this._cleanUp();
            if (this.hasEventListener("fileprogress")) {
                var c = new createjs.Event("fileprogress");
                c.progress = b, c.loaded = b, c.total = 1, c.item = a, this.dispatchEvent(c)
            }
        }, b._sendFileComplete = function(a, b) {
            if (!this._isCanceled()) {
                var c = new createjs.Event("fileload");
                c.loader = b, c.item = a, c.result = this._loadedResults[a.id], c.rawResult = this._loadedRawResults[a.id], a.completeHandler && a.completeHandler(c), this.hasEventListener("fileload") && this.dispatchEvent(c)
            }
        }, b._sendFileStart = function(a) {
            var b = new createjs.Event("filestart");
            b.item = a, this.hasEventListener("filestart") && this.dispatchEvent(b)
        }, b.toString = function() {
            return "[PreloadJS LoadQueue]"
        }, createjs.LoadQueue = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractLoader_constructor(a, !0, createjs.AbstractLoader.TEXT)
        }
        var b = (createjs.extend(a, createjs.AbstractLoader), a);
        b.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.TEXT
        }, createjs.TextLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractLoader_constructor(a, !0, createjs.AbstractLoader.BINARY), this.on("initialize", this._updateXHR, this)
        }
        var b = createjs.extend(a, createjs.AbstractLoader),
            c = a;
        c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.BINARY
        }, b._updateXHR = function(a) {
            a.loader.setResponseType("arraybuffer")
        }, createjs.BinaryLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b) {
            this.AbstractLoader_constructor(a, b, createjs.AbstractLoader.CSS), this.resultFormatter = this._formatResult, this._tagSrcAttribute = "href", this._tag = document.createElement(b ? "style" : "link"), this._tag.rel = "stylesheet", this._tag.type = "text/css"
        }
        var b = createjs.extend(a, createjs.AbstractLoader),
            c = a;
        c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.CSS
        }, b._formatResult = function(a) {
            if (this._preferXHR) {
                var b = a.getTag(),
                    c = document.getElementsByTagName("head")[0];
                if (c.appendChild(b), b.styleSheet) b.styleSheet.cssText = a.getResult(!0);
                else {
                    var d = document.createTextNode(a.getResult(!0));
                    b.appendChild(d)
                }
            } else b = this._tag;
            return b
        }, createjs.CSSLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b) {
            this.AbstractLoader_constructor(a, b, createjs.AbstractLoader.IMAGE), this.resultFormatter = this._formatResult, this._tagSrcAttribute = "src", createjs.RequestUtils.isImageTag(a) ? this._tag = a : createjs.RequestUtils.isImageTag(a.src) ? this._tag = a.src : createjs.RequestUtils.isImageTag(a.tag) && (this._tag = a.tag), null != this._tag ? this._preferXHR = !1 : this._tag = document.createElement("img"), this.on("initialize", this._updateXHR, this)
        }
        var b = createjs.extend(a, createjs.AbstractLoader),
            c = a;
        c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.IMAGE
        }, b.load = function() {
            if ("" != this._tag.src && this._tag.complete) return void this._sendComplete();
            var a = this._item.crossOrigin;
            1 == a && (a = "Anonymous"), null == a || createjs.RequestUtils.isLocal(this._item.src) || (this._tag.crossOrigin = a), this.AbstractLoader_load()
        }, b._updateXHR = function(a) {
            a.loader.mimeType = "text/plain; charset=x-user-defined-binary", a.loader.setResponseType && a.loader.setResponseType("blob")
        }, b._formatResult = function(a) {
            var b = this;
            return function(c) {
                var d = b._tag,
                    e = window.URL || window.webkitURL;
                if (b._preferXHR)
                    if (e) {
                        var f = e.createObjectURL(a.getResult(!0));
                        d.src = f, d.onload = function() {
                            e.revokeObjectURL(b.src)
                        }
                    } else d.src = a.getItem().src;
                else;
                d.complete ? c(d) : d.onload = function() {
                    c(this)
                }
            }
        }, createjs.ImageLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b) {
            this.AbstractLoader_constructor(a, b, createjs.AbstractLoader.JAVASCRIPT), this.resultFormatter = this._formatResult, this._tagSrcAttribute = "src", this.setTag(document.createElement("script"))
        }
        var b = createjs.extend(a, createjs.AbstractLoader),
            c = a;
        c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.JAVASCRIPT
        }, b._formatResult = function(a) {
            var b = a.getTag();
            return this._preferXHR && (b.text = a.getResult(!0)), b
        }, createjs.JavaScriptLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractLoader_constructor(a, !0, createjs.AbstractLoader.JSON), this.resultFormatter = this._formatResult
        }
        var b = createjs.extend(a, createjs.AbstractLoader),
            c = a;
        c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.JSON && !a._loadAsJSONP
        }, b._formatResult = function(a) {
            var b = null;
            try {
                b = createjs.DataUtils.parseJSON(a.getResult(!0))
            } catch (c) {
                var d = new createjs.ErrorEvent("JSON_FORMAT", null, c);
                return this._sendError(d), c
            }
            return b
        }, createjs.JSONLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractLoader_constructor(a, !1, createjs.AbstractLoader.JSONP), this.setTag(document.createElement("script")), this.getTag().type = "text/javascript"
        }
        var b = createjs.extend(a, createjs.AbstractLoader),
            c = a;
        c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.JSONP || a._loadAsJSONP
        }, b.cancel = function() {
            this.AbstractLoader_cancel(), this._dispose()
        }, b.load = function() {
            if (null == this._item.callback) throw new Error("callback is required for loading JSONP requests.");
            if (null != window[this._item.callback]) throw new Error("JSONP callback '" + this._item.callback + "' already exists on window. You need to specify a different callback or re-name the current one.");
            window[this._item.callback] = createjs.proxy(this._handleLoad, this), window.document.body.appendChild(this._tag), this._tag.src = this._item.src
        }, b._handleLoad = function(a) {
            this._result = this._rawResult = a, this._sendComplete(), this._dispose()
        }, b._dispose = function() {
            window.document.body.removeChild(this._tag), delete window[this._item.callback]
        }, createjs.JSONPLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractLoader_constructor(a, null, createjs.AbstractLoader.MANIFEST), this._manifestQueue = null
        }
        var b = createjs.extend(a, createjs.AbstractLoader),
            c = a;
        c.MANIFEST_PROGRESS = .25, c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.MANIFEST
        }, b.load = function() {
            this.AbstractLoader_load()
        }, b._createRequest = function() {
            var a = this._item.callback;
            this._request = null != a ? new createjs.JSONPLoader(this._item) : new createjs.JSONLoader(this._item)
        }, b.handleEvent = function(a) {
            switch (a.type) {
                case "complete":
                    return this._rawResult = a.target.getResult(!0), this._result = a.target.getResult(), this._sendProgress(c.MANIFEST_PROGRESS), void this._loadManifest(this._result);
                case "progress":
                    return a.loaded *= c.MANIFEST_PROGRESS, this.progress = a.loaded / a.total, (isNaN(this.progress) || this.progress == 1 / 0) && (this.progress = 0), void this._sendProgress(a)
            }
            this.AbstractLoader_handleEvent(a)
        }, b.destroy = function() {
            this.AbstractLoader_destroy(), this._manifestQueue.close()
        }, b._loadManifest = function(a) {
            if (a && a.manifest) {
                var b = this._manifestQueue = new createjs.LoadQueue;
                b.on("fileload", this._handleManifestFileLoad, this), b.on("progress", this._handleManifestProgress, this), b.on("complete", this._handleManifestComplete, this, !0), b.on("error", this._handleManifestError, this, !0), b.loadManifest(a)
            } else this._sendComplete()
        }, b._handleManifestFileLoad = function(a) {
            a.target = null, this.dispatchEvent(a)
        }, b._handleManifestComplete = function() {
            this._loadedItems = this._manifestQueue.getItems(!0), this._sendComplete()
        }, b._handleManifestProgress = function(a) {
            this.progress = a.progress * (1 - c.MANIFEST_PROGRESS) + c.MANIFEST_PROGRESS, this._sendProgress(this.progress)
        }, b._handleManifestError = function(a) {
            var b = new createjs.Event("fileerror");
            b.item = a.data, this.dispatchEvent(b)
        }, createjs.ManifestLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b) {
            this.AbstractMediaLoader_constructor(a, b, createjs.AbstractLoader.SOUND), createjs.RequestUtils.isAudioTag(a) ? this._tag = a : createjs.RequestUtils.isAudioTag(a.src) ? this._tag = a : createjs.RequestUtils.isAudioTag(a.tag) && (this._tag = createjs.RequestUtils.isAudioTag(a) ? a : a.src), null != this._tag && (this._preferXHR = !1)
        }
        var b = createjs.extend(a, createjs.AbstractMediaLoader),
            c = a;
        c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.SOUND
        }, b._createTag = function(a) {
            var b = document.createElement("audio");
            return b.autoplay = !1, b.preload = "none", b.src = a, b
        }, createjs.SoundLoader = createjs.promote(a, "AbstractMediaLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b) {
            this.AbstractMediaLoader_constructor(a, b, createjs.AbstractLoader.VIDEO), createjs.RequestUtils.isVideoTag(a) || createjs.RequestUtils.isVideoTag(a.src) ? (this.setTag(createjs.RequestUtils.isVideoTag(a) ? a : a.src), this._preferXHR = !1) : this.setTag(this._createTag())
        }
        var b = createjs.extend(a, createjs.AbstractMediaLoader),
            c = a;
        b._createTag = function() {
            return document.createElement("video")
        }, c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.VIDEO
        }, createjs.VideoLoader = createjs.promote(a, "AbstractMediaLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractLoader_constructor(a, null, createjs.AbstractLoader.SPRITESHEET), this._manifestQueue = null
        }
        var b = createjs.extend(a, createjs.AbstractLoader),
            c = a;
        c.SPRITESHEET_PROGRESS = .25, c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.SPRITESHEET
        }, b.destroy = function() {
            this.AbstractLoader_destroy, this._manifestQueue.close()
        }, b._createRequest = function() {
            var a = this._item.callback;
            this._request = null != a && a instanceof Function ? new createjs.JSONPLoader(this._item) : new createjs.JSONLoader(this._item)
        }, b.handleEvent = function(a) {
            switch (a.type) {
                case "complete":
                    return this._rawResult = a.target.getResult(!0), this._result = a.target.getResult(), this._sendProgress(c.SPRITESHEET_PROGRESS), void this._loadManifest(this._result);
                case "progress":
                    return a.loaded *= c.SPRITESHEET_PROGRESS, this.progress = a.loaded / a.total, (isNaN(this.progress) || this.progress == 1 / 0) && (this.progress = 0), void this._sendProgress(a)
            }
            this.AbstractLoader_handleEvent(a)
        }, b._loadManifest = function(a) {
            if (a && a.images) {
                var b = this._manifestQueue = new createjs.LoadQueue;
                b.on("complete", this._handleManifestComplete, this, !0), b.on("fileload", this._handleManifestFileLoad, this), b.on("progress", this._handleManifestProgress, this), b.on("error", this._handleManifestError, this, !0), b.loadManifest(a.images)
            }
        }, b._handleManifestFileLoad = function(a) {
            var b = a.result;
            if (null != b) {
                var c = this.getResult().images,
                    d = c.indexOf(a.item.src);
                c[d] = b
            }
        }, b._handleManifestComplete = function() {
            this._result = new createjs.SpriteSheet(this._result), this._loadedItems = this._manifestQueue.getItems(!0), this._sendComplete()
        }, b._handleManifestProgress = function(a) {
            this.progress = a.progress * (1 - c.SPRITESHEET_PROGRESS) + c.SPRITESHEET_PROGRESS, this._sendProgress(this.progress)
        }, b._handleManifestError = function(a) {
            var b = new createjs.Event("fileerror");
            b.item = a.data, this.dispatchEvent(b)
        }, createjs.SpriteSheetLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b) {
            this.AbstractLoader_constructor(a, b, createjs.AbstractLoader.SVG), this.resultFormatter = this._formatResult, this._tagSrcAttribute = "data", b ? this.setTag(document.createElement("svg")) : (this.setTag(document.createElement("object")), this.getTag().type = "image/svg+xml"), this.getTag().style.visibility = "hidden"
        }
        var b = createjs.extend(a, createjs.AbstractLoader),
            c = a;
        c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.SVG
        }, b._formatResult = function(a) {
            var b = createjs.DataUtils.parseXML(a.getResult(!0), "text/xml"),
                c = a.getTag();
            return !this._preferXHR && document.body.contains(c) && document.body.removeChild(c), null != b.documentElement ? (c.appendChild(b.documentElement), c.style.visibility = "visible", c) : b
        }, createjs.SVGLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractLoader_constructor(a, !0, createjs.AbstractLoader.XML), this.resultFormatter = this._formatResult
        }
        var b = createjs.extend(a, createjs.AbstractLoader),
            c = a;
        c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.XML
        }, b._formatResult = function(a) {
            return createjs.DataUtils.parseXML(a.getResult(!0), "text/xml")
        }, createjs.XMLLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        var a = createjs.SoundJS = createjs.SoundJS || {};
        a.version = "0.6.0", a.buildDate = "Thu, 11 Dec 2014 23:32:09 GMT"
    }(), this.createjs = this.createjs || {}, createjs.extend = function(a, b) {
        "use strict";

        function c() {
            this.constructor = a
        }
        return c.prototype = b.prototype, a.prototype = new c
    }, this.createjs = this.createjs || {}, createjs.promote = function(a, b) {
        "use strict";
        var c = a.prototype,
            d = Object.getPrototypeOf && Object.getPrototypeOf(c) || c.__proto__;
        if (d) {
            c[(b += "_") + "constructor"] = d.constructor;
            for (var e in d) c.hasOwnProperty(e) && "function" == typeof d[e] && (c[b + e] = d[e])
        }
        return a
    }, this.createjs = this.createjs || {}, createjs.indexOf = function(a, b) {
        "use strict";
        for (var c = 0, d = a.length; d > c; c++)
            if (b === a[c]) return c;
        return -1
    }, this.createjs = this.createjs || {},
    function() {
        "use strict";
        createjs.proxy = function(a, b) {
            var c = Array.prototype.slice.call(arguments, 2);
            return function() {
                return a.apply(b, Array.prototype.slice.call(arguments, 0).concat(c))
            }
        }
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = Object.defineProperty ? !0 : !1,
            b = {};
        try {
            Object.defineProperty(b, "bar", {
                get: function() {
                    return this._bar
                },
                set: function(a) {
                    this._bar = a
                }
            })
        } catch (c) {
            a = !1
        }
        createjs.definePropertySupported = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            throw "BrowserDetect cannot be instantiated"
        }
        var b = a.agent = window.navigator.userAgent;
        a.isWindowPhone = b.indexOf("IEMobile") > -1 || b.indexOf("Windows Phone") > -1, a.isFirefox = b.indexOf("Firefox") > -1, a.isOpera = null != window.opera, a.isChrome = b.indexOf("Chrome") > -1, a.isIOS = (b.indexOf("iPod") > -1 || b.indexOf("iPhone") > -1 || b.indexOf("iPad") > -1) && !a.isWindowPhone, a.isAndroid = b.indexOf("Android") > -1 && !a.isWindowPhone, a.isBlackberry = b.indexOf("Blackberry") > -1, createjs.BrowserDetect = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this._listeners = null, this._captureListeners = null
        }
        var b = a.prototype;
        a.initialize = function(a) {
            a.addEventListener = b.addEventListener, a.on = b.on, a.removeEventListener = a.off = b.removeEventListener, a.removeAllEventListeners = b.removeAllEventListeners, a.hasEventListener = b.hasEventListener, a.dispatchEvent = b.dispatchEvent, a._dispatchEvent = b._dispatchEvent, a.willTrigger = b.willTrigger
        }, b.addEventListener = function(a, b, c) {
            var d;
            d = c ? this._captureListeners = this._captureListeners || {} : this._listeners = this._listeners || {};
            var e = d[a];
            return e && this.removeEventListener(a, b, c), e = d[a], e ? e.push(b) : d[a] = [b], b
        }, b.on = function(a, b, c, d, e, f) {
            return b.handleEvent && (c = c || b, b = b.handleEvent), c = c || this, this.addEventListener(a, function(a) {
                b.call(c, a, e), d && a.remove()
            }, f)
        }, b.removeEventListener = function(a, b, c) {
            var d = c ? this._captureListeners : this._listeners;
            if (d) {
                var e = d[a];
                if (e)
                    for (var f = 0, g = e.length; g > f; f++)
                        if (e[f] == b) {
                            1 == g ? delete d[a] : e.splice(f, 1);
                            break
                        }
            }
        }, b.off = b.removeEventListener, b.removeAllEventListeners = function(a) {
            a ? (this._listeners && delete this._listeners[a], this._captureListeners && delete this._captureListeners[a]) : this._listeners = this._captureListeners = null
        }, b.dispatchEvent = function(a) {
            if ("string" == typeof a) {
                var b = this._listeners;
                if (!b || !b[a]) return !1;
                a = new createjs.Event(a)
            } else a.target && a.clone && (a = a.clone());
            try {
                a.target = this
            } catch (c) {}
            if (a.bubbles && this.parent) {
                for (var d = this, e = [d]; d.parent;) e.push(d = d.parent);
                var f, g = e.length;
                for (f = g - 1; f >= 0 && !a.propagationStopped; f--) e[f]._dispatchEvent(a, 1 + (0 == f));
                for (f = 1; g > f && !a.propagationStopped; f++) e[f]._dispatchEvent(a, 3)
            } else this._dispatchEvent(a, 2);
            return a.defaultPrevented
        }, b.hasEventListener = function(a) {
            var b = this._listeners,
                c = this._captureListeners;
            return !!(b && b[a] || c && c[a])
        }, b.willTrigger = function(a) {
            for (var b = this; b;) {
                if (b.hasEventListener(a)) return !0;
                b = b.parent
            }
            return !1
        }, b.toString = function() {
            return "[EventDispatcher]"
        }, b._dispatchEvent = function(a, b) {
            var c, d = 1 == b ? this._captureListeners : this._listeners;
            if (a && d) {
                var e = d[a.type];
                if (!e || !(c = e.length)) return;
                try {
                    a.currentTarget = this
                } catch (f) {}
                try {
                    a.eventPhase = b
                } catch (f) {}
                a.removed = !1, e = e.slice();
                for (var g = 0; c > g && !a.immediatePropagationStopped; g++) {
                    var h = e[g];
                    h.handleEvent ? h.handleEvent(a) : h(a), a.removed && (this.off(a.type, h, 1 == b), a.removed = !1)
                }
            }
        }, createjs.EventDispatcher = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.type = a, this.target = null, this.currentTarget = null, this.eventPhase = 0, this.bubbles = !!b, this.cancelable = !!c, this.timeStamp = (new Date).getTime(), this.defaultPrevented = !1, this.propagationStopped = !1, this.immediatePropagationStopped = !1, this.removed = !1
        }
        var b = a.prototype;
        b.preventDefault = function() {
            this.defaultPrevented = this.cancelable && !0
        }, b.stopPropagation = function() {
            this.propagationStopped = !0
        }, b.stopImmediatePropagation = function() {
            this.immediatePropagationStopped = this.propagationStopped = !0
        }, b.remove = function() {
            this.removed = !0
        }, b.clone = function() {
            return new a(this.type, this.bubbles, this.cancelable)
        }, b.set = function(a) {
            for (var b in a) this[b] = a[b];
            return this
        }, b.toString = function() {
            return "[Event (type=" + this.type + ")]"
        }, createjs.Event = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.Event_constructor("error"), this.title = a, this.message = b, this.data = c
        }
        var b = createjs.extend(a, createjs.Event);
        b.clone = function() {
            return new createjs.ErrorEvent(this.title, this.message, this.data)
        }, createjs.ErrorEvent = createjs.promote(a, "Event")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b) {
            this.Event_constructor("progress"), this.loaded = a, this.total = null == b ? 1 : b, this.progress = 0 == b ? 0 : this.loaded / this.total
        }
        var b = createjs.extend(a, createjs.Event);
        b.clone = function() {
            return new createjs.ProgressEvent(this.loaded, this.total)
        }, createjs.ProgressEvent = createjs.promote(a, "Event")
    }(window), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this.src = null, this.type = null, this.id = null, this.maintainOrder = !1, this.callback = null, this.data = null, this.method = createjs.LoadItem.GET, this.values = null, this.headers = null, this.withCredentials = !1, this.mimeType = null, this.crossOrigin = "Anonymous", this.loadTimeout = 8e3
        }
        var b = a.prototype = {},
            c = a;
        c.create = function(b) {
            if ("string" == typeof b) {
                var d = new a;
                return d.src = b, d
            }
            if (b instanceof c) return b;
            if (b instanceof Object) return b;
            throw new Error("Type not recognized.")
        }, b.set = function(a) {
            for (var b in a) this[b] = a[b];
            return this
        }, createjs.LoadItem = c
    }(),
    function() {
        var a = {};
        a.ABSOLUTE_PATT = /^(?:\w+:)?\/{2}/i, a.RELATIVE_PATT = /^[./]*?\//i, a.EXTENSION_PATT = /\/?[^/]+\.(\w{1,5})$/i, a.parseURI = function(b) {
            var c = {
                absolute: !1,
                relative: !1
            };
            if (null == b) return c;
            var d = b.indexOf("?");
            d > -1 && (b = b.substr(0, d));
            var e;
            return a.ABSOLUTE_PATT.test(b) ? c.absolute = !0 : a.RELATIVE_PATT.test(b) && (c.relative = !0), (e = b.match(a.EXTENSION_PATT)) && (c.extension = e[1].toLowerCase()), c
        }, a.formatQueryString = function(a, b) {
            if (null == a) throw new Error("You must specify data.");
            var c = [];
            for (var d in a) c.push(d + "=" + escape(a[d]));
            return b && (c = c.concat(b)), c.join("&")
        }, a.buildPath = function(a, b) {
            if (null == b) return a;
            var c = [],
                d = a.indexOf("?");
            if (-1 != d) {
                var e = a.slice(d + 1);
                c = c.concat(e.split("&"))
            }
            return -1 != d ? a.slice(0, d) + "?" + this._formatQueryString(b, c) : a + "?" + this._formatQueryString(b, c)
        }, a.isCrossDomain = function(a) {
            var b = document.createElement("a");
            b.href = a.src;
            var c = document.createElement("a");
            c.href = location.href;
            var d = "" != b.hostname && (b.port != c.port || b.protocol != c.protocol || b.hostname != c.hostname);
            return d
        }, a.isLocal = function(a) {
            var b = document.createElement("a");
            return b.href = a.src, "" == b.hostname && "file:" == b.protocol
        }, a.isBinary = function(a) {
            switch (a) {
                case createjs.AbstractLoader.IMAGE:
                case createjs.AbstractLoader.BINARY:
                    return !0;
                default:
                    return !1
            }
        }, a.isImageTag = function(a) {
            return a instanceof HTMLImageElement
        }, a.isAudioTag = function(a) {
            return window.HTMLAudioElement ? a instanceof HTMLAudioElement : !1
        }, a.isVideoTag = function(a) {
            return window.HTMLVideoElement ? a instanceof HTMLVideoElement : void 0
        }, a.isText = function(a) {
            switch (a) {
                case createjs.AbstractLoader.TEXT:
                case createjs.AbstractLoader.JSON:
                case createjs.AbstractLoader.MANIFEST:
                case createjs.AbstractLoader.XML:
                case createjs.AbstractLoader.CSS:
                case createjs.AbstractLoader.SVG:
                case createjs.AbstractLoader.JAVASCRIPT:
                    return !0;
                default:
                    return !1
            }
        }, a.getTypeByExtension = function(a) {
            if (null == a) return createjs.AbstractLoader.TEXT;
            switch (a.toLowerCase()) {
                case "jpeg":
                case "jpg":
                case "gif":
                case "png":
                case "webp":
                case "bmp":
                    return createjs.AbstractLoader.IMAGE;
                case "ogg":
                case "mp3":
                case "webm":
                    return createjs.AbstractLoader.SOUND;
                case "mp4":
                case "webm":
                case "ts":
                    return createjs.AbstractLoader.VIDEO;
                case "json":
                    return createjs.AbstractLoader.JSON;
                case "xml":
                    return createjs.AbstractLoader.XML;
                case "css":
                    return createjs.AbstractLoader.CSS;
                case "js":
                    return createjs.AbstractLoader.JAVASCRIPT;
                case "svg":
                    return createjs.AbstractLoader.SVG;
                default:
                    return createjs.AbstractLoader.TEXT
            }
        }, createjs.RequestUtils = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.EventDispatcher_constructor(), this.loaded = !1, this.canceled = !1, this.progress = 0, this.type = c, this.resultFormatter = null, this._item = a ? createjs.LoadItem.create(a) : null, this._preferXHR = b, this._result = null, this._rawResult = null, this._loadedItems = null, this._tagSrcAttribute = null, this._tag = null
        }
        var b = createjs.extend(a, createjs.EventDispatcher),
            c = a;
        c.POST = "POST", c.GET = "GET", c.BINARY = "binary", c.CSS = "css", c.IMAGE = "image", c.JAVASCRIPT = "javascript", c.JSON = "json", c.JSONP = "jsonp", c.MANIFEST = "manifest", c.SOUND = "sound", c.VIDEO = "video", c.SPRITESHEET = "spritesheet", c.SVG = "svg", c.TEXT = "text", c.XML = "xml", b.getItem = function() {
            return this._item
        }, b.getResult = function(a) {
            return a ? this._rawResult : this._result
        }, b.getTag = function() {
            return this._tag
        }, b.setTag = function(a) {
            this._tag = a
        }, b.load = function() {
            this._createRequest(), this._request.on("complete", this, this), this._request.on("progress", this, this), this._request.on("loadStart", this, this), this._request.on("abort", this, this), this._request.on("timeout", this, this), this._request.on("error", this, this);
            var a = new createjs.Event("initialize");
            a.loader = this._request, this.dispatchEvent(a), this._request.load()
        }, b.cancel = function() {
            this.canceled = !0, this.destroy()
        }, b.destroy = function() {
            this._request && (this._request.removeAllEventListeners(), this._request.destroy()), this._request = null, this._item = null, this._rawResult = null, this._result = null, this._loadItems = null, this.removeAllEventListeners()
        }, b.getLoadedItems = function() {
            return this._loadedItems
        }, b._createRequest = function() {
            this._request = this._preferXHR ? new createjs.XHRRequest(this._item) : new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute)
        }, b._createTag = function() {
            return null
        }, b._sendLoadStart = function() {
            this._isCanceled() || this.dispatchEvent("loadstart")
        }, b._sendProgress = function(a) {
            if (!this._isCanceled()) {
                var b = null;
                "number" == typeof a ? (this.progress = a, b = new createjs.ProgressEvent(this.progress)) : (b = a, this.progress = a.loaded / a.total, b.progress = this.progress, (isNaN(this.progress) || this.progress == 1 / 0) && (this.progress = 0)), this.hasEventListener("progress") && this.dispatchEvent(b)
            }
        }, b._sendComplete = function() {
            if (!this._isCanceled()) {
                this.loaded = !0;
                var a = new createjs.Event("complete");
                a.rawResult = this._rawResult, null != this._result && (a.result = this._result), this.dispatchEvent(a)
            }
        }, b._sendError = function(a) {
            !this._isCanceled() && this.hasEventListener("error") && (null == a && (a = new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")), this.dispatchEvent(a))
        }, b._isCanceled = function() {
            return null == window.createjs || this.canceled ? !0 : !1
        }, b.resultFormatter = null, b.handleEvent = function(a) {
            switch (a.type) {
                case "complete":
                    this._rawResult = a.target._response;
                    var b = this.resultFormatter && this.resultFormatter(this),
                        c = this;
                    b instanceof Function ? b(function(a) {
                        c._result = a, c._sendComplete()
                    }) : (this._result = b || this._rawResult, this._sendComplete());
                    break;
                case "progress":
                    this._sendProgress(a);
                    break;
                case "error":
                    this._sendError(a);
                    break;
                case "loadstart":
                    this._sendLoadStart();
                    break;
                case "abort":
                case "timeout":
                    this._isCanceled() || this.dispatchEvent(a.type)
            }
        }, b.buildPath = function(a, b) {
            return createjs.RequestUtils.buildPath(a, b)
        }, b.toString = function() {
            return "[PreloadJS AbstractLoader]"
        }, createjs.AbstractLoader = createjs.promote(a, "EventDispatcher")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.AbstractLoader_constructor(a, b, c), this.resultFormatter = this._formatResult, this._tagSrcAttribute = "src"
        }
        var b = createjs.extend(a, createjs.AbstractLoader);
        b.load = function() {
            this._tag || (this._tag = this._createTag(this._item.src)), this._tag.preload = "auto", this._tag.load(), this.AbstractLoader_load()
        }, b._createTag = function() {}, b._createRequest = function() {
            this._request = this._preferXHR ? new createjs.XHRRequest(this._item) : new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute)
        }, b._formatResult = function(a) {
            return this._tag.removeEventListener && this._tag.removeEventListener("canplaythrough", this._loadedHandler), this._tag.onstalled = null, this._preferXHR && (a.getTag().src = a.getResult(!0)), a.getTag()
        }, createjs.AbstractMediaLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = function(a) {
                this._item = a
            },
            b = createjs.extend(a, createjs.EventDispatcher);
        b.load = function() {}, b.destroy = function() {}, b.cancel = function() {}, createjs.AbstractRequest = createjs.promote(a, "EventDispatcher")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.AbstractRequest_constructor(a), this._tag = b, this._tagSrcAttribute = c, this._loadedHandler = createjs.proxy(this._handleTagComplete, this), this._addedToDOM = !1, this._startTagVisibility = null
        }
        var b = createjs.extend(a, createjs.AbstractRequest);
        b.load = function() {
            null == this._tag.parentNode && (window.document.body.appendChild(this._tag), this._addedToDOM = !0), this._tag.onload = createjs.proxy(this._handleTagComplete, this), this._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);
            var a = new createjs.Event("initialize");
            a.loader = this._tag, this.dispatchEvent(a), this._hideTag(), this._tag[this._tagSrcAttribute] = this._item.src
        }, b.destroy = function() {
            this._clean(), this._tag = null, this.AbstractRequest_destroy()
        }, b._handleReadyStateChange = function() {
            clearTimeout(this._loadTimeout);
            var a = this._tag;
            ("loaded" == a.readyState || "complete" == a.readyState) && this._handleTagComplete()
        }, b._handleTagComplete = function() {
            this._rawResult = this._tag, this._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult, this._clean(), this._showTag(), this.dispatchEvent("complete")
        }, b._clean = function() {
            this._tag.onload = null, this._tag.onreadystatechange = null, this._addedToDOM && null != this._tag.parentNode && this._tag.parentNode.removeChild(this._tag)
        }, b._hideTag = function() {
            this._startTagVisibility = this._tag.style.visibility, this._tag.style.visibility = "hidden"
        }, b._showTag = function() {
            this._tag.style.visibility = this._startTagVisibility
        }, b._handleStalled = function() {}, createjs.TagRequest = createjs.promote(a, "AbstractRequest")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.AbstractRequest_constructor(a), this._tag = b, this._tagSrcAttribute = c, this._loadedHandler = createjs.proxy(this._handleTagComplete, this)
        }
        var b = createjs.extend(a, createjs.TagRequest);
        b.load = function() {
            this._tag.onstalled = createjs.proxy(this._handleStalled, this), this._tag.onprogress = createjs.proxy(this._handleProgress, this), this._tag.addEventListener && this._tag.addEventListener("canplaythrough", this._loadedHandler, !1), this.TagRequest_load()
        }, b._handleReadyStateChange = function() {
            clearTimeout(this._loadTimeout);
            var a = this._tag;
            ("loaded" == a.readyState || "complete" == a.readyState) && this._handleTagComplete()
        }, b._handleStalled = function() {}, b._handleProgress = function(a) {
            if (a && !(a.loaded > 0 && 0 == a.total)) {
                var b = new createjs.ProgressEvent(a.loaded, a.total);
                this.dispatchEvent(b)
            }
        }, b._clean = function() {
            this._tag.removeEventListener && this._tag.removeEventListener("canplaythrough", this._loadedHandler), this._tag.onstalled = null, this._tag.onprogress = null, this.TagRequest__clean()
        }, createjs.MediaTagRequest = createjs.promote(a, "TagRequest")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractRequest_constructor(a), this._request = null, this._loadTimeout = null, this._xhrLevel = 1, this._response = null, this._rawResponse = null, this._canceled = !1, this._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this), this._handleProgressProxy = createjs.proxy(this._handleProgress, this), this._handleAbortProxy = createjs.proxy(this._handleAbort, this), this._handleErrorProxy = createjs.proxy(this._handleError, this), this._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this), this._handleLoadProxy = createjs.proxy(this._handleLoad, this), this._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this), !this._createXHR(a)
        }
        var b = createjs.extend(a, createjs.AbstractRequest);
        a.ACTIVEX_VERSIONS = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.5.0", "Msxml2.XMLHTTP.4.0", "MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP"], b.getResult = function(a) {
            return a && this._rawResponse ? this._rawResponse : this._response
        }, b.cancel = function() {
            this.canceled = !0, this._clean(), this._request.abort()
        }, b.load = function() {
            if (null == this._request) return void this._handleError();
            this._request.addEventListener("loadstart", this._handleLoadStartProxy, !1), this._request.addEventListener("progress", this._handleProgressProxy, !1), this._request.addEventListener("abort", this._handleAbortProxy, !1), this._request.addEventListener("error", this._handleErrorProxy, !1), this._request.addEventListener("timeout", this._handleTimeoutProxy, !1), this._request.addEventListener("load", this._handleLoadProxy, !1), this._request.addEventListener("readystatechange", this._handleReadyStateChangeProxy, !1), 1 == this._xhrLevel && (this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout));
            try {
                this._item.values && this._item.method != createjs.AbstractLoader.GET ? this._item.method == createjs.AbstractLoader.POST && this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)) : this._request.send()
            } catch (a) {
                this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND", null, a))
            }
        }, b.setResponseType = function(a) {
            this._request.responseType = a
        }, b.getAllResponseHeaders = function() {
            return this._request.getAllResponseHeaders instanceof Function ? this._request.getAllResponseHeaders() : null
        }, b.getResponseHeader = function(a) {
            return this._request.getResponseHeader instanceof Function ? this._request.getResponseHeader(a) : null
        }, b._handleProgress = function(a) {
            if (a && !(a.loaded > 0 && 0 == a.total)) {
                var b = new createjs.ProgressEvent(a.loaded, a.total);
                this.dispatchEvent(b)
            }
        }, b._handleLoadStart = function() {
            clearTimeout(this._loadTimeout), this.dispatchEvent("loadstart")
        }, b._handleAbort = function(a) {
            this._clean(), this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED", null, a))
        }, b._handleError = function(a) {
            this._clean(), this.dispatchEvent(new createjs.ErrorEvent(a.message))
        }, b._handleReadyStateChange = function() {
            4 == this._request.readyState && this._handleLoad()
        }, b._handleLoad = function() {
            if (!this.loaded) {
                this.loaded = !0;
                var a = this._checkError();
                if (a) return void this._handleError(a);
                this._response = this._getResponse(), this._clean(), this.dispatchEvent(new createjs.Event("complete"))
            }
        }, b._handleTimeout = function(a) {
            this._clean(), this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT", null, a))
        }, b._checkError = function() {
            var a = parseInt(this._request.status);
            switch (a) {
                case 404:
                case 0:
                    return new Error(a)
            }
            return null
        }, b._getResponse = function() {
            if (null != this._response) return this._response;
            if (null != this._request.response) return this._request.response;
            try {
                if (null != this._request.responseText) return this._request.responseText
            } catch (a) {}
            try {
                if (null != this._request.responseXML) return this._request.responseXML
            } catch (a) {}
            return null
        }, b._createXHR = function(a) {
            var b = createjs.RequestUtils.isCrossDomain(a),
                c = {},
                d = null;
            if (window.XMLHttpRequest) d = new XMLHttpRequest, b && void 0 === d.withCredentials && window.XDomainRequest && (d = new XDomainRequest);
            else {
                for (var e = 0, f = s.ACTIVEX_VERSIONS.length; f > e; e++) {
                    {
                        s.ACTIVEX_VERSIONS[e]
                    }
                    try {
                        d = new ActiveXObject(axVersions);
                        break
                    } catch (g) {}
                }
                if (null == d) return !1
            }
            a.mimeType && d.overrideMimeType && d.overrideMimeType(a.mimeType), this._xhrLevel = "string" == typeof d.responseType ? 2 : 1;
            var h = null;
            if (h = a.method == createjs.AbstractLoader.GET ? createjs.RequestUtils.buildPath(a.src, a.values) : a.src, d.open(a.method || createjs.AbstractLoader.GET, h, !0), b && d instanceof XMLHttpRequest && 1 == this._xhrLevel && (c.Origin = location.origin), a.values && a.method == createjs.AbstractLoader.POST && (c["Content-Type"] = "application/x-www-form-urlencoded"), b || c["X-Requested-With"] || (c["X-Requested-With"] = "XMLHttpRequest"), a.headers)
                for (var i in a.headers) c[i] = a.headers[i];
            for (i in c) d.setRequestHeader(i, c[i]);
            return d instanceof XMLHttpRequest && void 0 !== a.withCredentials && (d.withCredentials = a.withCredentials), this._request = d, !0
        }, b._clean = function() {
            clearTimeout(this._loadTimeout), this._request.removeEventListener("loadstart", this._handleLoadStartProxy), this._request.removeEventListener("progress", this._handleProgressProxy), this._request.removeEventListener("abort", this._handleAbortProxy), this._request.removeEventListener("error", this._handleErrorProxy), this._request.removeEventListener("timeout", this._handleTimeoutProxy), this._request.removeEventListener("load", this._handleLoadProxy), this._request.removeEventListener("readystatechange", this._handleReadyStateChangeProxy)
        }, b.toString = function() {
            return "[PreloadJS XHRRequest]"
        }, createjs.XHRRequest = createjs.promote(a, "AbstractRequest")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b) {
            this.AbstractMediaLoader_constructor(a, b, createjs.AbstractLoader.SOUND), createjs.RequestUtils.isAudioTag(a) ? this._tag = a : createjs.RequestUtils.isAudioTag(a.src) ? this._tag = a : createjs.RequestUtils.isAudioTag(a.tag) && (this._tag = createjs.RequestUtils.isAudioTag(a) ? a : a.src), null != this._tag && (this._preferXHR = !1)
        }
        var b = createjs.extend(a, createjs.AbstractMediaLoader),
            c = a;
        c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.SOUND
        }, b._createTag = function(a) {
            var b = document.createElement("audio");
            return b.autoplay = !1, b.preload = "none", b.src = a, b
        }, createjs.SoundLoader = createjs.promote(a, "AbstractMediaLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            throw "Sound cannot be instantiated"
        }

        function b(a, b) {
            this.init(a, b)
        }
        var c = a;
        c.INTERRUPT_ANY = "any", c.INTERRUPT_EARLY = "early", c.INTERRUPT_LATE = "late", c.INTERRUPT_NONE = "none", c.PLAY_INITED = "playInited", c.PLAY_SUCCEEDED = "playSucceeded", c.PLAY_INTERRUPTED = "playInterrupted", c.PLAY_FINISHED = "playFinished", c.PLAY_FAILED = "playFailed", c.SUPPORTED_EXTENSIONS = ["mp3", "ogg", "mpeg", "wav", "m4a", "mp4", "aiff", "wma", "mid"], c.EXTENSION_MAP = {
            m4a: "mp4"
        }, c.FILE_PATTERN = /^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/, c.defaultInterruptBehavior = c.INTERRUPT_NONE, c.alternateExtensions = [], c.activePlugin = null, c._pluginsRegistered = !1, c._lastID = 0, c._masterVolume = 1, c._masterMute = !1, c._instances = [], c._idHash = {}, c._preloadHash = {}, c.addEventListener = null, c.removeEventListener = null, c.removeAllEventListeners = null, c.dispatchEvent = null, c.hasEventListener = null, c._listeners = null, createjs.EventDispatcher.initialize(c), c.getPreloadHandlers = function() {
            return {
                callback: createjs.proxy(c.initLoad, c),
                types: ["sound"],
                extensions: c.SUPPORTED_EXTENSIONS
            }
        }, c._handleLoadComplete = function(a) {
            var b = a.target.getItem().src;
            if (c._preloadHash[b])
                for (var d = 0, e = c._preloadHash[b].length; e > d; d++) {
                    var f = c._preloadHash[b][d];
                    if (c._preloadHash[b][d] = !0, c.hasEventListener("fileload")) {
                        var a = new createjs.Event("fileload");
                        a.src = f.src, a.id = f.id, a.data = f.data, a.sprite = f.sprite, c.dispatchEvent(a)
                    }
                }
        }, c._handleLoadError = function(a) {
            var b = a.target.getItem().src;
            if (c._preloadHash[b])
                for (var d = 0, e = c._preloadHash[b].length; e > d; d++) {
                    var f = c._preloadHash[b][d];
                    if (c._preloadHash[b][d] = !1, c.hasEventListener("fileerror")) {
                        var a = new createjs.Event("fileerror");
                        a.src = f.src, a.id = f.id, a.data = f.data, a.sprite = f.sprite, c.dispatchEvent(a)
                    }
                }
        }, c._registerPlugin = function(a) {
            return a.isSupported() ? (c.activePlugin = new a, !0) : !1
        }, c.registerPlugins = function(a) {
            c._pluginsRegistered = !0;
            for (var b = 0, d = a.length; d > b; b++)
                if (c._registerPlugin(a[b])) return !0;
            return !1
        }, c.initializeDefaultPlugins = function() {
            return null != c.activePlugin ? !0 : c._pluginsRegistered ? !1 : c.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin]) ? !0 : !1
        }, c.isReady = function() {
            return null != c.activePlugin
        }, c.getCapabilities = function() {
            return null == c.activePlugin ? null : c.activePlugin._capabilities
        }, c.getCapability = function(a) {
            return null == c.activePlugin ? null : c.activePlugin._capabilities[a]
        }, c.initLoad = function(a) {
            return c._registerSound(a)
        }, c._registerSound = function(a) {
            if (!c.initializeDefaultPlugins()) return !1;
            var d = c._parsePath(a.src);
            if (null == d) return !1;
            a.src = d.src, a.type = "sound";
            var e = a.data,
                f = c.activePlugin.defaultNumChannels || null;
            if (null != e && (isNaN(e.channels) ? isNaN(e) || (f = parseInt(e)) : f = parseInt(e.channels), e.audioSprite))
                for (var g, h = e.audioSprite.length; h--;) g = e.audioSprite[h], c._idHash[g.id] = {
                    src: a.src,
                    startTime: parseInt(g.startTime),
                    duration: parseInt(g.duration)
                };
            null != a.id && (c._idHash[a.id] = {
                src: a.src
            });
            var i = c.activePlugin.register(a, f);
            return b.create(a.src, f), null != e && isNaN(e) ? a.data.channels = f || b.maxPerChannel() : a.data = f || b.maxPerChannel(), i.type && (a.type = i.type), i
        }, c.registerSound = function(a, b, d, e) {
            var f = {
                src: a,
                id: b,
                data: d
            };
            a instanceof Object && (e = b, f = a), f = createjs.LoadItem.create(f), null != e && (f.src = e + a);
            var g = c._registerSound(f);
            if (!g) return !1;
            if (c._preloadHash[f.src] || (c._preloadHash[f.src] = []), c._preloadHash[f.src].push(f), 1 == c._preloadHash[f.src].length) g.on("complete", createjs.proxy(this._handleLoadComplete, this)), g.on("error", createjs.proxy(this._handleLoadError, this)), c.activePlugin.preload(g);
            else if (1 == c._preloadHash[f.src][0]) return !0;
            return f
        }, c.registerSounds = function(a, b) {
            var c = [];
            a.path && (b ? b += a.path : b = a.path);
            for (var d = 0, e = a.length; e > d; d++) c[d] = createjs.Sound.registerSound(a[d].src, a[d].id, a[d].data, b);
            return c
        }, c.registerManifest = function(a, b) {
            try {
                console.log("createjs.Sound.registerManifest is deprecated, please use createjs.Sound.registerSounds.")
            } catch (c) {}
            return this.registerSounds(a, b)
        }, c.removeSound = function(a, d) {
            if (null == c.activePlugin) return !1;
            a instanceof Object && (a = a.src), a = c._getSrcById(a).src, null != d && (a = d + a);
            var e = c._parsePath(a);
            if (null == e) return !1;
            a = e.src;
            for (var f in c._idHash) c._idHash[f].src == a && delete c._idHash[f];
            return b.removeSrc(a), delete c._preloadHash[a], c.activePlugin.removeSound(a), !0
        }, c.removeSounds = function(a, b) {
            var c = [];
            a.path && (b ? b += a.path : b = a.path);
            for (var d = 0, e = a.length; e > d; d++) c[d] = createjs.Sound.removeSound(a[d].src, b);
            return c
        }, c.removeManifest = function(a, b) {
            try {
                console.log("createjs.Sound.removeManifest is deprecated, please use createjs.Sound.removeSounds.")
            } catch (d) {}
            return c.removeSounds(a, b)
        }, c.removeAllSounds = function() {
            c._idHash = {}, c._preloadHash = {}, b.removeAll(), c.activePlugin && c.activePlugin.removeAllSounds()
        }, c.loadComplete = function(a) {
            if (!c.isReady()) return !1;
            var b = c._parsePath(a);
            return a = b ? c._getSrcById(b.src).src : c._getSrcById(a).src, 1 == c._preloadHash[a][0]
        }, c._parsePath = function(a) {
            "string" != typeof a && (a = a.toString());
            var b = a.match(c.FILE_PATTERN);
            if (null == b) return !1;
            for (var d = b[4], e = b[5], f = c.getCapabilities(), g = 0; !f[e];)
                if (e = c.alternateExtensions[g++],
                    g > c.alternateExtensions.length) return null;
            a = a.replace("." + b[5], "." + e);
            var h = {
                name: d,
                src: a,
                extension: e
            };
            return h
        }, c.play = function(a, b, d, e, f, g, h, i, j) {
            b instanceof Object && (d = b.delay, e = b.offset, f = b.loop, g = b.volume, h = b.pan, i = b.startTime, j = b.duration, b = b.interrupt);
            var k = c.createInstance(a, i, j),
                l = c._playInstance(k, b, d, e, f, g, h);
            return l || k._playFailed(), k
        }, c.createInstance = function(a, d, e) {
            if (!c.initializeDefaultPlugins()) return new createjs.DefaultSoundInstance(a, d, e);
            a = c._getSrcById(a);
            var f = c._parsePath(a.src),
                g = null;
            return null != f && null != f.src ? (b.create(f.src), null == d && (d = a.startTime), g = c.activePlugin.create(f.src, d, e || a.duration)) : g = new createjs.DefaultSoundInstance(a, d, e), g.uniqueId = c._lastID++, g
        }, c.setVolume = function(a) {
            if (null == Number(a)) return !1;
            if (a = Math.max(0, Math.min(1, a)), c._masterVolume = a, !this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(a))
                for (var b = this._instances, d = 0, e = b.length; e > d; d++) b[d].setMasterVolume(a)
        }, c.getVolume = function() {
            return c._masterVolume
        }, c.setMute = function(a) {
            if (null == a) return !1;
            if (this._masterMute = a, !this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(a))
                for (var b = this._instances, c = 0, d = b.length; d > c; c++) b[c].setMasterMute(a);
            return !0
        }, c.getMute = function() {
            return this._masterMute
        }, c.stop = function() {
            for (var a = this._instances, b = a.length; b--;) a[b].stop()
        }, c._playInstance = function(a, b, d, e, f, g, h) {
            if (b instanceof Object && (d = b.delay, e = b.offset, f = b.loop, g = b.volume, h = b.pan, b = b.interrupt), b = b || c.defaultInterruptBehavior, null == d && (d = 0), null == e && (e = a.getPosition()), null == f && (f = a.loop), null == g && (g = a.volume), null == h && (h = a.pan), 0 == d) {
                var i = c._beginPlaying(a, b, e, f, g, h);
                if (!i) return !1
            } else {
                var j = setTimeout(function() {
                    c._beginPlaying(a, b, e, f, g, h)
                }, d);
                a.delayTimeoutId = j
            }
            return this._instances.push(a), !0
        }, c._beginPlaying = function(a, c, d, e, f, g) {
            if (!b.add(a, c)) return !1;
            var h = a._beginPlaying(d, e, f, g);
            if (!h) {
                var i = createjs.indexOf(this._instances, a);
                return i > -1 && this._instances.splice(i, 1), !1
            }
            return !0
        }, c._getSrcById = function(a) {
            return c._idHash[a] || {
                src: a
            }
        }, c._playFinished = function(a) {
            b.remove(a);
            var c = createjs.indexOf(this._instances, a);
            c > -1 && this._instances.splice(c, 1)
        }, createjs.Sound = a, b.channels = {}, b.create = function(a, c) {
            var d = b.get(a);
            return null == d ? (b.channels[a] = new b(a, c), !0) : !1
        }, b.removeSrc = function(a) {
            var c = b.get(a);
            return null == c ? !1 : (c._removeAll(), delete b.channels[a], !0)
        }, b.removeAll = function() {
            for (var a in b.channels) b.channels[a]._removeAll();
            b.channels = {}
        }, b.add = function(a, c) {
            var d = b.get(a.src);
            return null == d ? !1 : d._add(a, c)
        }, b.remove = function(a) {
            var c = b.get(a.src);
            return null == c ? !1 : (c._remove(a), !0)
        }, b.maxPerChannel = function() {
            return d.maxDefault
        }, b.get = function(a) {
            return b.channels[a]
        };
        var d = b.prototype;
        d.constructor = b, d.src = null, d.max = null, d.maxDefault = 100, d.length = 0, d.init = function(a, b) {
            this.src = a, this.max = b || this.maxDefault, -1 == this.max && (this.max = this.maxDefault), this._instances = []
        }, d._get = function(a) {
            return this._instances[a]
        }, d._add = function(a, b) {
            return this._getSlot(b, a) ? (this._instances.push(a), this.length++, !0) : !1
        }, d._remove = function(a) {
            var b = createjs.indexOf(this._instances, a);
            return -1 == b ? !1 : (this._instances.splice(b, 1), this.length--, !0)
        }, d._removeAll = function() {
            for (var a = this.length - 1; a >= 0; a--) this._instances[a].stop()
        }, d._getSlot = function(b) {
            var c, d;
            if (b != a.INTERRUPT_NONE && (d = this._get(0), null == d)) return !0;
            for (var e = 0, f = this.max; f > e; e++) {
                if (c = this._get(e), null == c) return !0;
                if (c.playState == a.PLAY_FINISHED || c.playState == a.PLAY_INTERRUPTED || c.playState == a.PLAY_FAILED) {
                    d = c;
                    break
                }
                b != a.INTERRUPT_NONE && (b == a.INTERRUPT_EARLY && c.getPosition() < d.getPosition() || b == a.INTERRUPT_LATE && c.getPosition() > d.getPosition()) && (d = c)
            }
            return null != d ? (d._interrupt(), this._remove(d), !0) : !1
        }, d.toString = function() {
            return "[Sound SoundChannel]"
        }
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = function(a, b, c, d) {
                this.EventDispatcher_constructor(), this.src = a, this.uniqueId = -1, this.playState = null, this.delayTimeoutId = null, this._startTime = Math.max(0, b || 0), this._volume = 1, createjs.definePropertySupported && Object.defineProperty(this, "volume", {
                    get: this.getVolume,
                    set: this.setVolume
                }), this._pan = 0, createjs.definePropertySupported && Object.defineProperty(this, "pan", {
                    get: this.getPan,
                    set: this.setPan
                }), this._duration = Math.max(0, c || 0), createjs.definePropertySupported && Object.defineProperty(this, "duration", {
                    get: this.getDuration,
                    set: this.setDuration
                }), this._playbackResource = null, createjs.definePropertySupported && Object.defineProperty(this, "playbackResource", {
                    get: this.getPlaybackResource,
                    set: this.setPlaybackResource
                }), d !== !1 && d !== !0 && this.setPlaybackResource(d), this._position = 0, createjs.definePropertySupported && Object.defineProperty(this, "position", {
                    get: this.getPosition,
                    set: this.setPosition
                }), this._loop = 0, createjs.definePropertySupported && Object.defineProperty(this, "loop", {
                    get: this.getLoop,
                    set: this.setLoop
                }), this._muted = !1, createjs.definePropertySupported && Object.defineProperty(this, "muted", {
                    get: this.getMuted,
                    set: this.setMuted
                }), this._paused = !1, createjs.definePropertySupported && Object.defineProperty(this, "paused", {
                    get: this.getPaused,
                    set: this.setPaused
                })
            },
            b = createjs.extend(a, createjs.EventDispatcher);
        b.play = function(a, b, c, d, e, f) {
            return this.playState == createjs.Sound.PLAY_SUCCEEDED ? (a instanceof Object && (c = a.offset, d = a.loop, e = a.volume, f = a.pan), null != c && this.setPosition(c), null != d && this.setLoop(d), null != e && this.setVolume(e), null != f && this.setPan(f), void(this._paused && this.setPaused(!1))) : (this._cleanUp(), createjs.Sound._playInstance(this, a, b, c, d, e, f), this)
        }, b.pause = function() {
            return this._paused || this.playState != createjs.Sound.PLAY_SUCCEEDED ? !1 : (this.setPaused(!0), !0)
        }, b.resume = function() {
            return this._paused ? (this.setPaused(!1), !0) : !1
        }, b.stop = function() {
            return this._position = 0, this._paused = !1, this._handleStop(), this._cleanUp(), this.playState = createjs.Sound.PLAY_FINISHED, this
        }, b.destroy = function() {
            this._cleanUp(), this.src = null, this.playbackResource = null, this.removeAllEventListeners()
        }, b.toString = function() {
            return "[AbstractSoundInstance]"
        }, b.getPaused = function() {
            return this._paused
        }, b.setPaused = function(a) {
            return a !== !0 && a !== !1 || this._paused == a || 1 == a && this.playState != createjs.Sound.PLAY_SUCCEEDED ? void 0 : (this._paused = a, a ? this._pause() : this._resume(), clearTimeout(this.delayTimeoutId), this)
        }, b.setVolume = function(a) {
            return a == this._volume ? this : (this._volume = Math.max(0, Math.min(1, a)), this._muted || this._updateVolume(), this)
        }, b.getVolume = function() {
            return this._volume
        }, b.setMute = function(a) {
            this.setMuted(a)
        }, b.getMute = function() {
            return this._muted
        }, b.setMuted = function(a) {
            return a === !0 || a === !1 ? (this._muted = a, this._updateVolume(), this) : void 0
        }, b.getMuted = function() {
            return this._muted
        }, b.setPan = function(a) {
            return a == this._pan ? this : (this._pan = Math.max(-1, Math.min(1, a)), this._updatePan(), this)
        }, b.getPan = function() {
            return this._pan
        }, b.getPosition = function() {
            return this._paused || this.playState != createjs.Sound.PLAY_SUCCEEDED ? this._position : this._calculateCurrentPosition()
        }, b.setPosition = function(a) {
            return this._position = Math.max(0, a), this.playState == createjs.Sound.PLAY_SUCCEEDED && this._updatePosition(), this
        }, b.getDuration = function() {
            return this._duration
        }, b.setDuration = function(a) {
            return a == this._duration ? this : (this._duration = Math.max(0, a || 0), this._updateDuration(), this)
        }, b.setPlaybackResource = function(a) {
            return this._playbackResource = a, 0 == this._duration && this._setDurationFromSource(), this
        }, b.getPlaybackResource = function() {
            return this._playbackResource
        }, b.getLoop = function() {
            return this._loop
        }, b.setLoop = function(a) {
            null != this._playbackResource && (0 != this._loop && 0 == a && this._removeLooping(a), 0 == this._loop && 0 != a && this._addLooping(a)), this._loop = a
        }, b._sendEvent = function(a) {
            var b = new createjs.Event(a);
            this.dispatchEvent(b)
        }, b._cleanUp = function() {
            clearTimeout(this.delayTimeoutId), this._handleCleanUp(), this._paused = !1, createjs.Sound._playFinished(this)
        }, b._interrupt = function() {
            this._cleanUp(), this.playState = createjs.Sound.PLAY_INTERRUPTED, this._sendEvent("interrupted")
        }, b._beginPlaying = function(a, b, c, d) {
            return this.setPosition(a), this.setLoop(b), this.setVolume(c), this.setPan(d), null != this._playbackResource && this._position < this._duration ? (this._paused = !1, this._handleSoundReady(), this.playState = createjs.Sound.PLAY_SUCCEEDED, this._sendEvent("succeeded"), !0) : (this._playFailed(), !1)
        }, b._playFailed = function() {
            this._cleanUp(), this.playState = createjs.Sound.PLAY_FAILED, this._sendEvent("failed")
        }, b._handleSoundComplete = function() {
            return this._position = 0, 0 != this._loop ? (this._loop--, this._handleLoop(), void this._sendEvent("loop")) : (this._cleanUp(), this.playState = createjs.Sound.PLAY_FINISHED, void this._sendEvent("complete"))
        }, b._handleSoundReady = function() {}, b._updateVolume = function() {}, b._updatePan = function() {}, b._updateDuration = function() {}, b._setDurationFromSource = function() {}, b._calculateCurrentPosition = function() {}, b._updatePosition = function() {}, b._removeLooping = function() {}, b._addLooping = function() {}, b._pause = function() {}, b._resume = function() {}, b._handleStop = function() {}, b._handleCleanUp = function() {}, b._handleLoop = function() {}, createjs.AbstractSoundInstance = createjs.promote(a, "EventDispatcher"), createjs.DefaultSoundInstance = createjs.AbstractSoundInstance
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = function() {
                this._capabilities = null, this._loaders = {}, this._audioSources = {}, this._soundInstances = {}, this._loaderClass, this._soundInstanceClass
            },
            b = a.prototype;
        a._capabilities = null, a.isSupported = function() {
            return !0
        }, b.register = function(a) {
            if (this._audioSources[a.src] = !0, this._soundInstances[a.src] = [], this._loaders[a.src]) return this._loaders[a.src];
            var b = new this._loaderClass(a);
            return b.on("complete", createjs.proxy(this._handlePreloadComplete, this)), this._loaders[a.src] = b, b
        }, b.preload = function(a) {
            a.on("error", createjs.proxy(this._handlePreloadError, this)), a.load()
        }, b.isPreloadStarted = function(a) {
            return null != this._audioSources[a]
        }, b.isPreloadComplete = function(a) {
            return !(null == this._audioSources[a] || 1 == this._audioSources[a])
        }, b.removeSound = function(a) {
            if (this._soundInstances[a]) {
                for (var b = this._soundInstances[a].length; b--;) {
                    var c = this._soundInstances[a][b];
                    c.destroy()
                }
                delete this._soundInstances[a], delete this._audioSources[a], this._loaders[a] && this._loaders[a].destroy(), delete this._loaders[a]
            }
        }, b.removeAllSounds = function() {
            for (var a in this._audioSources) this.removeSound(a)
        }, b.create = function(a, b, c) {
            this.isPreloadStarted(a) || this.preload(this.register(a));
            var d = new this._soundInstanceClass(a, b, c, this._audioSources[a]);
            return this._soundInstances[a].push(d), d
        }, b.setVolume = function(a) {
            return this._volume = a, this._updateVolume(), !0
        }, b.getVolume = function() {
            return this._volume
        }, b.setMute = function() {
            return this._updateVolume(), !0
        }, b.toString = function() {
            return "[AbstractPlugin]"
        }, b._handlePreloadComplete = function(a) {
            var b = a.target.getItem().src;
            this._audioSources[b] = a.result;
            for (var c = 0, d = this._soundInstances[b].length; d > c; c++) {
                var e = this._soundInstances[b][c];
                e.setPlaybackResource(this._audioSources[b])
            }
        }, b._handlePreloadError = function() {}, b._updateVolume = function() {}, createjs.AbstractPlugin = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractLoader_constructor(a, !0, createjs.AbstractLoader.SOUND)
        }
        var b = createjs.extend(a, createjs.AbstractLoader);
        a.context = null, b.toString = function() {
            return "[WebAudioLoader]"
        }, b._createRequest = function() {
            this._request = new createjs.XHRRequest(this._item, !1), this._request.setResponseType("arraybuffer")
        }, b._sendComplete = function() {
            a.context.decodeAudioData(this._rawResult, createjs.proxy(this._handleAudioDecoded, this), createjs.proxy(this._handleError, this))
        }, b._handleAudioDecoded = function(a) {
            this._result = a, this.AbstractLoader__sendComplete()
        }, createjs.WebAudioLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, d, e) {
            this.AbstractSoundInstance_constructor(a, b, d, e), this.gainNode = c.context.createGain(), this.panNode = c.context.createPanner(), this.panNode.panningModel = c._panningModel, this.panNode.connect(this.gainNode), this.sourceNode = null, this._soundCompleteTimeout = null, this._sourceNodeNext = null, this._playbackStartTime = 0, this._endedHandler = createjs.proxy(this._handleSoundComplete, this)
        }
        var b = createjs.extend(a, createjs.AbstractSoundInstance),
            c = a;
        c.context = null, c.destinationNode = null, c._panningModel = "equalpower", b.destroy = function() {
            this.AbstractSoundInstance_destroy(), this.panNode.disconnect(0), this.panNode = null, this.gainNode.disconnect(0), this.gainNode = null
        }, b.toString = function() {
            return "[WebAudioSoundInstance]"
        }, b._updatePan = function() {
            this.panNode.setPosition(this._pan, 0, -.5)
        }, b._removeLooping = function() {
            this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext)
        }, b._addLooping = function() {
            this.playState == createjs.Sound.PLAY_SUCCEEDED && (this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0))
        }, b._setDurationFromSource = function() {
            this._duration = 1e3 * this.playbackResource.duration
        }, b._handleCleanUp = function() {
            this.sourceNode && this.playState == createjs.Sound.PLAY_SUCCEEDED && (this.sourceNode = this._cleanUpAudioNode(this.sourceNode), this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext)), 0 != this.gainNode.numberOfOutputs && this.gainNode.disconnect(0), clearTimeout(this._soundCompleteTimeout), this._playbackStartTime = 0
        }, b._cleanUpAudioNode = function(a) {
            return a && (a.stop(0), a.disconnect(0), a = null), a
        }, b._handleSoundReady = function() {
            this.gainNode.connect(c.destinationNode);
            var a = .001 * this._duration,
                b = .001 * this._position;
            this.sourceNode = this._createAndPlayAudioNode(c.context.currentTime - a, b), this._playbackStartTime = this.sourceNode.startTime - b, this._soundCompleteTimeout = setTimeout(this._endedHandler, 1e3 * (a - b)), 0 != this._loop && (this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0))
        }, b._createAndPlayAudioNode = function(a, b) {
            var d = c.context.createBufferSource();
            d.buffer = this.playbackResource, d.connect(this.panNode);
            var e = .001 * this._duration;
            return d.startTime = a + e, d.start(d.startTime, b + .001 * this._startTime, e - b), d
        }, b._pause = function() {
            this._position = 1e3 * (c.context.currentTime - this._playbackStartTime), this.sourceNode = this._cleanUpAudioNode(this.sourceNode), this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext), 0 != this.gainNode.numberOfOutputs && this.gainNode.disconnect(0), clearTimeout(this._soundCompleteTimeout)
        }, b._resume = function() {
            this._handleSoundReady()
        }, b._updateVolume = function() {
            var a = this._muted ? 0 : this._volume;
            a != this.gainNode.gain.value && (this.gainNode.gain.value = a)
        }, b._calculateCurrentPosition = function() {
            return 1e3 * (c.context.currentTime - this._playbackStartTime)
        }, b._updatePosition = function() {
            this.sourceNode = this._cleanUpAudioNode(this.sourceNode), this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext), clearTimeout(this._soundCompleteTimeout), this._paused || this._handleSoundReady()
        }, b._handleLoop = function() {
            this._cleanUpAudioNode(this.sourceNode), this.sourceNode = this._sourceNodeNext, this._playbackStartTime = this.sourceNode.startTime, this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0), this._soundCompleteTimeout = setTimeout(this._endedHandler, this._duration)
        }, b._updateDuration = function() {
            this._pause(), this._resume()
        }, createjs.WebAudioSoundInstance = createjs.promote(a, "AbstractSoundInstance")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this.AbstractPlugin_constructor(), this._panningModel = c._panningModel, this._volume = 1, this.context = c.context, this.dynamicsCompressorNode = this.context.createDynamicsCompressor(), this.dynamicsCompressorNode.connect(this.context.destination), this.gainNode = this.context.createGain(), this.gainNode.connect(this.dynamicsCompressorNode), createjs.WebAudioSoundInstance.destinationNode = this.gainNode, this._capabilities = c._capabilities, this._loaderClass = createjs.WebAudioLoader, this._soundInstanceClass = createjs.WebAudioSoundInstance, this._addPropsToClasses()
        }
        var b = createjs.extend(a, createjs.AbstractPlugin),
            c = a;
        c._capabilities = null, c._panningModel = "equalpower", c.context = null, c.isSupported = function() {
            var a = createjs.BrowserDetect.isIOS || createjs.BrowserDetect.isAndroid || createjs.BrowserDetect.isBlackberry;
            return "file:" != location.protocol || a || this._isFileXHRSupported() ? (c._generateCapabilities(), null == c.context ? !1 : !0) : !1
        }, c.playEmptySound = function() {
            var a = c.context.createBufferSource();
            a.buffer = c.context.createBuffer(1, 1, 22050), a.connect(c.context.destination), a.start(0, 0, 0)
        }, c._isFileXHRSupported = function() {
            var a = !0,
                b = new XMLHttpRequest;
            try {
                b.open("GET", "WebAudioPluginTest.fail", !1)
            } catch (c) {
                return a = !1
            }
            b.onerror = function() {
                a = !1
            }, b.onload = function() {
                a = 404 == this.status || 200 == this.status || 0 == this.status && "" != this.response
            };
            try {
                b.send()
            } catch (c) {
                a = !1
            }
            return a
        }, c._generateCapabilities = function() {
            if (null == c._capabilities) {
                var a = document.createElement("audio");
                if (null == a.canPlayType) return null;
                if (null == c.context)
                    if (window.AudioContext) c.context = new AudioContext;
                    else {
                        if (!window.webkitAudioContext) return null;
                        c.context = new webkitAudioContext
                    }
                c._compatibilitySetUp(), c.playEmptySound(), c._capabilities = {
                    panning: !0,
                    volume: !0,
                    tracks: -1
                };
                for (var b = createjs.Sound.SUPPORTED_EXTENSIONS, d = createjs.Sound.EXTENSION_MAP, e = 0, f = b.length; f > e; e++) {
                    var g = b[e],
                        h = d[g] || g;
                    c._capabilities[g] = "no" != a.canPlayType("audio/" + g) && "" != a.canPlayType("audio/" + g) || "no" != a.canPlayType("audio/" + h) && "" != a.canPlayType("audio/" + h)
                }
                c.context.destination.numberOfChannels < 2 && (c._capabilities.panning = !1)
            }
        }, c._compatibilitySetUp = function() {
            if (c._panningModel = "equalpower", !c.context.createGain) {
                c.context.createGain = c.context.createGainNode;
                var a = c.context.createBufferSource();
                a.__proto__.start = a.__proto__.noteGrainOn, a.__proto__.stop = a.__proto__.noteOff, c._panningModel = 0
            }
        }, b.toString = function() {
            return "[WebAudioPlugin]"
        }, b._addPropsToClasses = function() {
            var a = this._soundInstanceClass;
            a.context = this.context, a.destinationNode = this.gainNode, a._panningModel = this._panningModel, this._loaderClass.context = this.context
        }, b._updateVolume = function() {
            var a = createjs.Sound._masterMute ? 0 : this._volume;
            a != this.gainNode.gain.value && (this.gainNode.gain.value = a)
        }, createjs.WebAudioPlugin = createjs.promote(a, "AbstractPlugin")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.src = a, this.length = 0, this.available = 0, this.tags = [], this.duration = 0
        }
        var b = a.prototype;
        b.constructor = a;
        var c = a;
        c.tags = {}, c.get = function(b) {
            var d = c.tags[b];
            return null == d && (d = c.tags[b] = new a(b)), d
        }, c.remove = function(a) {
            var b = c.tags[a];
            return null == b ? !1 : (b.removeAll(), delete c.tags[a], !0)
        }, c.getInstance = function(a) {
            var b = c.tags[a];
            return null == b ? null : b.get()
        }, c.setInstance = function(a, b) {
            var d = c.tags[a];
            return null == d ? null : d.set(b)
        }, c.getDuration = function(a) {
            var b = c.tags[a];
            return null == b ? 0 : b.getDuration()
        }, b.add = function(a) {
            this.tags.push(a), this.length++, this.available++
        }, b.removeAll = function() {
            for (var a; this.length--;) a = this.tags[this.length], a.parentNode && a.parentNode.removeChild(a), delete this.tags[this.length];
            this.src = null, this.tags.length = 0
        }, b.get = function() {
            if (0 == this.tags.length) return null;
            this.available = this.tags.length;
            var a = this.tags.pop();
            return null == a.parentNode && document.body.appendChild(a), a
        }, b.set = function(a) {
            var b = createjs.indexOf(this.tags, a); - 1 == b && this.tags.push(a), this.available = this.tags.length
        }, b.getDuration = function() {
            return this.duration || (this.duration = 1e3 * this.tags[this.tags.length - 1].duration), this.duration
        }, b.toString = function() {
            return "[HTMLAudioTagPool]"
        }, createjs.HTMLAudioTagPool = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c, d) {
            this.AbstractSoundInstance_constructor(a, b, c, d), this._audioSpriteStopTime = null, this._delayTimeoutId = null, this._endedHandler = createjs.proxy(this._handleSoundComplete, this), this._readyHandler = createjs.proxy(this._handleTagReady, this), this._stalledHandler = createjs.proxy(this.playFailed, this), this._audioSpriteEndHandler = createjs.proxy(this._handleAudioSpriteLoop, this), this._loopHandler = createjs.proxy(this._handleSoundComplete, this), c ? this._audioSpriteStopTime = .001 * (b + c) : this._duration = createjs.HTMLAudioTagPool.getDuration(this.src)
        }
        var b = createjs.extend(a, createjs.AbstractSoundInstance);
        b.setMasterVolume = function() {
            this._updateVolume()
        }, b.setMasterMute = function() {
            this._updateVolume()
        }, b.toString = function() {
            return "[HTMLAudioSoundInstance]"
        }, b._removeLooping = function() {
            null != this._playbackResource && (this._playbackResource.loop = !1, this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1))
        }, b._addLooping = function() {
            null == this._playbackResource || this._audioSpriteStopTime || (this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1), this._playbackResource.loop = !0)
        }, b._handleCleanUp = function() {
            var a = this._playbackResource;
            if (null != a) {
                a.pause(), a.loop = !1, a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, !1), a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, !1), a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, !1), a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1), a.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, !1);
                try {
                    a.currentTime = this._startTime
                } catch (b) {}
                createjs.HTMLAudioTagPool.setInstance(this.src, a), this._playbackResource = null
            }
        }, b._beginPlaying = function(a, b, c, d) {
            return this._playbackResource = createjs.HTMLAudioTagPool.getInstance(this.src), this.AbstractSoundInstance__beginPlaying(a, b, c, d)
        }, b._handleSoundReady = function() {
            if (4 !== this._playbackResource.readyState) {
                var a = this._playbackResource;
                return a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, !1), a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, !1), a.preload = "auto", void a.load()
            }
            this._updateVolume(), this._playbackResource.currentTime = .001 * (this._startTime + this._position), this._audioSpriteStopTime ? this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, !1) : (this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, !1), 0 != this._loop && (this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1), this._playbackResource.loop = !0)), this._playbackResource.play()
        }, b._handleTagReady = function() {
            this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, !1), this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, !1), this._handleSoundReady()
        }, b._pause = function() {
            this._playbackResource.pause()
        }, b._resume = function() {
            this._playbackResource.play()
        }, b._updateVolume = function() {
            if (null != this._playbackResource) {
                var a = this._muted || createjs.Sound._masterMute ? 0 : this._volume * createjs.Sound._masterVolume;
                a != this._playbackResource.volume && (this._playbackResource.volume = a)
            }
        }, b._calculateCurrentPosition = function() {
            return 1e3 * this._playbackResource.currentTime - this._startTime
        }, b._updatePosition = function() {
            this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1), this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, !1);
            try {
                this._playbackResource.currentTime = .001 * (this._position + this._startTime)
            } catch (a) {
                this._handleSetPositionSeek(null)
            }
        }, b._handleSetPositionSeek = function() {
            null != this._playbackResource && (this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, !1), this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1))
        }, b._handleAudioSpriteLoop = function() {
            this._playbackResource.currentTime <= this._audioSpriteStopTime || (this._playbackResource.pause(), 0 == this._loop ? this._handleSoundComplete(null) : (this._position = 0, this._loop--, this._playbackResource.currentTime = .001 * this._startTime, this._paused || this._playbackResource.play(), this._sendEvent("loop")))
        }, b._handleLoop = function() {
            0 == this._loop && (this._playbackResource.loop = !1, this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1))
        }, b._updateDuration = function() {
            this._audioSpriteStopTime = .001 * (startTime + duration), this.playState == createjs.Sound.PLAY_SUCCEEDED && (this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, !1), this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, !1))
        }, createjs.HTMLAudioSoundInstance = createjs.promote(a, "AbstractSoundInstance")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this.AbstractPlugin_constructor(), this.defaultNumChannels = 2, this._capabilities = c._capabilities, this._loaderClass = createjs.SoundLoader, this._soundInstanceClass = createjs.HTMLAudioSoundInstance
        }
        var b = createjs.extend(a, createjs.AbstractPlugin),
            c = a;
        c.MAX_INSTANCES = 30, c._AUDIO_READY = "canplaythrough", c._AUDIO_ENDED = "ended", c._AUDIO_SEEKED = "seeked", c._AUDIO_STALLED = "stalled", c._TIME_UPDATE = "timeupdate", c._capabilities = null, c.enableIOS = !1, c.isSupported = function() {
            return c._generateCapabilities(), null == c._capabilities ? !1 : !0
        }, c._generateCapabilities = function() {
            if (null == c._capabilities) {
                var a = document.createElement("audio");
                if (null == a.canPlayType) return null;
                c._capabilities = {
                    panning: !0,
                    volume: !0,
                    tracks: -1
                };
                for (var b = createjs.Sound.SUPPORTED_EXTENSIONS, d = createjs.Sound.EXTENSION_MAP, e = 0, f = b.length; f > e; e++) {
                    var g = b[e],
                        h = d[g] || g;
                    c._capabilities[g] = "no" != a.canPlayType("audio/" + g) && "" != a.canPlayType("audio/" + g) || "no" != a.canPlayType("audio/" + h) && "" != a.canPlayType("audio/" + h)
                }
            }
        }, b.register = function(a, b) {
            for (var c = createjs.HTMLAudioTagPool.get(a.src), d = null, e = 0; b > e; e++) d = this._createTag(a.src), c.add(d);
            var f = this.AbstractPlugin_register(a, b);
            return f.setTag(d), f
        }, b.removeSound = function(a) {
            this.AbstractPlugin_removeSound(a), createjs.HTMLAudioTagPool.remove(a)
        }, b.create = function(a, b, c) {
            var d = this.AbstractPlugin_create(a, b, c);
            return d.setPlaybackResource(null), d
        }, b.toString = function() {
            return "[HTMLAudioPlugin]"
        }, b.setVolume = b.getVolume = b.setMute = null, b._createTag = function(a) {
            var b = document.createElement("audio");
            return b.autoplay = !1, b.preload = "none", b.src = a, b
        }, createjs.HTMLAudioPlugin = createjs.promote(a, "AbstractPlugin")
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function() {
                this.initialize()
            },
            b = a.prototype;
        a.initialize = function(a) {
            a.addEventListener = b.addEventListener, a.removeEventListener = b.removeEventListener, a.removeAllEventListeners = b.removeAllEventListeners, a.hasEventListener = b.hasEventListener, a.dispatchEvent = b.dispatchEvent
        }, b._listeners = null, b.initialize = function() {}, b.addEventListener = function(a, b) {
            var c = this._listeners;
            c ? this.removeEventListener(a, b) : c = this._listeners = {};
            var d = c[a];
            return d || (d = c[a] = []), d.push(b), b
        }, b.removeEventListener = function(a, b) {
            var c = this._listeners;
            if (c) {
                var d = c[a];
                if (d)
                    for (var e = 0, f = d.length; f > e; e++)
                        if (d[e] == b) {
                            1 == f ? delete c[a] : d.splice(e, 1);
                            break
                        }
            }
        }, b.removeAllEventListeners = function(a) {
            a ? this._listeners && delete this._listeners[a] : this._listeners = null
        }, b.dispatchEvent = function(a, b) {
            var c = !1,
                d = this._listeners;
            if (a && d) {
                "string" == typeof a && (a = {
                    type: a
                });
                var e = d[a.type];
                if (!e) return c;
                a.target = b || this, e = e.slice();
                for (var f = 0, g = e.length; g > f; f++) {
                    var h = e[f];
                    c = h.handleEvent ? c || h.handleEvent(a) : c || h(a)
                }
            }
            return !!c
        }, b.hasEventListener = function(a) {
            var b = this._listeners;
            return !(!b || !b[a])
        }, b.toString = function() {
            return "[EventDispatcher]"
        }, createjs.EventDispatcher = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function() {
            throw "Ticker cannot be instantiated."
        };
        a.useRAF = !1, a.addEventListener = null, a.removeEventListener = null, a.removeAllEventListeners = null, a.dispatchEvent = null, a.hasEventListener = null, a._listeners = null, createjs.EventDispatcher.initialize(a), a._listeners = null, a._pauseable = null, a._paused = !1, a._inited = !1, a._startTime = 0, a._pausedTime = 0, a._ticks = 0, a._pausedTicks = 0, a._interval = 50, a._lastTime = 0, a._times = null, a._tickTimes = null, a._rafActive = !1, a._timeoutID = null, a.addListener = function(b, c) {
            null != b && (a.removeListener(b), a._pauseable[a._listeners.length] = null == c ? !0 : c, a._listeners.push(b))
        }, a.init = function() {
            a._inited = !0, a._times = [], a._tickTimes = [], a._pauseable = [], a._listeners = [], a._times.push(a._lastTime = a._startTime = a._getTime()), a.setInterval(a._interval)
        }, a.removeListener = function(b) {
            var c = a._listeners;
            if (c) {
                var d = c.indexOf(b); - 1 != d && (c.splice(d, 1), a._pauseable.splice(d, 1))
            }
        }, a.removeAllListeners = function() {
            a._listeners = [], a._pauseable = []
        }, a.setInterval = function(b) {
            a._interval = b, a._inited && a._setupTick()
        }, a.getInterval = function() {
            return a._interval
        }, a.setFPS = function(b) {
            a.setInterval(1e3 / b)
        }, a.getFPS = function() {
            return 1e3 / a._interval
        }, a.getMeasuredFPS = function(b) {
            return a._times.length < 2 ? -1 : (null == b && (b = 0 | a.getFPS()), b = Math.min(a._times.length - 1, b), 1e3 / ((a._times[0] - a._times[b]) / b))
        }, a.setPaused = function(b) {
            a._paused = b
        }, a.getPaused = function() {
            return a._paused
        }, a.getTime = function(b) {
            return a._getTime() - a._startTime - (b ? a._pausedTime : 0)
        }, a.getTicks = function(b) {
            return a._ticks - (b ? a._pausedTicks : 0)
        }, a._handleAF = function() {
            a._rafActive = !1, a._setupTick(), a._getTime() - a._lastTime >= .97 * (a._interval - 1) && a._tick()
        }, a._handleTimeout = function() {
            a.timeoutID = null, a._setupTick(), a._tick()
        }, a._setupTick = function() {
            if (!a._rafActive && null == a.timeoutID) {
                if (a.useRAF) {
                    var b = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;
                    if (b) return b(a._handleAF), void(a._rafActive = !0)
                }
                a.timeoutID = setTimeout(a._handleTimeout, a._interval)
            }
        }, a._tick = function() {
            var b = a._getTime();
            a._ticks++;
            var c = b - a._lastTime,
                d = a._paused;
            d && (a._pausedTicks++, a._pausedTime += c), a._lastTime = b;
            for (var e = a._pauseable, f = a._listeners.slice(), g = f ? f.length : 0, h = 0; g > h; h++) {
                var i = f[h];
                null == i || d && e[h] || (i.tick ? i.tick(c, d) : i instanceof Function && i(c, d))
            }
            for (a.dispatchEvent({
                    type: "tick",
                    paused: d,
                    delta: c,
                    time: b,
                    runTime: b - a._pausedTime
                }), a._tickTimes.unshift(a._getTime() - b); a._tickTimes.length > 100;) a._tickTimes.pop();
            for (a._times.unshift(b); a._times.length > 100;) a._times.pop()
        };
        var b = window.performance && (performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow);
        a._getTime = function() {
            return b && b.call(performance) || (new Date).getTime()
        }, a.init(), createjs.Ticker = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a, b, c, d, e, f, g, h, i) {
                this.initialize(a, b, c, d, e, f, g, h, i)
            },
            b = a.prototype;
        b.stageX = 0, b.stageY = 0, b.rawX = 0, b.rawY = 0, b.type = null, b.nativeEvent = null, b.onMouseMove = null, b.onMouseUp = null, b.target = null, b.pointerID = 0, b.primary = !1, b.addEventListener = null, b.removeEventListener = null, b.removeAllEventListeners = null, b.dispatchEvent = null, b.hasEventListener = null, b._listeners = null, createjs.EventDispatcher.initialize(b), b.initialize = function(a, b, c, d, e, f, g, h, i) {
            this.type = a, this.stageX = b, this.stageY = c, this.target = d, this.nativeEvent = e, this.pointerID = f, this.primary = g, this.rawX = null == h ? b : h, this.rawY = null == i ? c : i
        }, b.clone = function() {
            return new a(this.type, this.stageX, this.stageY, this.target, this.nativeEvent, this.pointerID, this.primary, this.rawX, this.rawY)
        }, b.toString = function() {
            return "[MouseEvent (type=" + this.type + " stageX=" + this.stageX + " stageY=" + this.stageY + ")]"
        }, createjs.MouseEvent = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a, b, c, d, e, f) {
                this.initialize(a, b, c, d, e, f)
            },
            b = a.prototype;
        a.identity = null, a.DEG_TO_RAD = Math.PI / 180, b.a = 1, b.b = 0, b.c = 0, b.d = 1, b.tx = 0, b.ty = 0, b.alpha = 1, b.shadow = null, b.compositeOperation = null, b.initialize = function(a, b, c, d, e, f) {
            return null != a && (this.a = a), this.b = b || 0, this.c = c || 0, null != d && (this.d = d), this.tx = e || 0, this.ty = f || 0, this
        }, b.prepend = function(a, b, c, d, e, f) {
            var g = this.tx;
            if (1 != a || 0 != b || 0 != c || 1 != d) {
                var h = this.a,
                    i = this.c;
                this.a = h * a + this.b * c, this.b = h * b + this.b * d, this.c = i * a + this.d * c, this.d = i * b + this.d * d
            }
            return this.tx = g * a + this.ty * c + e, this.ty = g * b + this.ty * d + f, this
        }, b.append = function(a, b, c, d, e, f) {
            var g = this.a,
                h = this.b,
                i = this.c,
                j = this.d;
            return this.a = a * g + b * i, this.b = a * h + b * j, this.c = c * g + d * i, this.d = c * h + d * j, this.tx = e * g + f * i + this.tx, this.ty = e * h + f * j + this.ty, this
        }, b.prependMatrix = function(a) {
            return this.prepend(a.a, a.b, a.c, a.d, a.tx, a.ty), this.prependProperties(a.alpha, a.shadow, a.compositeOperation), this
        }, b.appendMatrix = function(a) {
            return this.append(a.a, a.b, a.c, a.d, a.tx, a.ty), this.appendProperties(a.alpha, a.shadow, a.compositeOperation), this
        }, b.prependTransform = function(b, c, d, e, f, g, h, i, j) {
            if (f % 360) var k = f * a.DEG_TO_RAD,
                l = Math.cos(k),
                m = Math.sin(k);
            else l = 1, m = 0;
            return (i || j) && (this.tx -= i, this.ty -= j), g || h ? (g *= a.DEG_TO_RAD, h *= a.DEG_TO_RAD, this.prepend(l * d, m * d, -m * e, l * e, 0, 0), this.prepend(Math.cos(h), Math.sin(h), -Math.sin(g), Math.cos(g), b, c)) : this.prepend(l * d, m * d, -m * e, l * e, b, c), this
        }, b.appendTransform = function(b, c, d, e, f, g, h, i, j) {
            if (f % 360) var k = f * a.DEG_TO_RAD,
                l = Math.cos(k),
                m = Math.sin(k);
            else l = 1, m = 0;
            return g || h ? (g *= a.DEG_TO_RAD, h *= a.DEG_TO_RAD, this.append(Math.cos(h), Math.sin(h), -Math.sin(g), Math.cos(g), b, c), this.append(l * d, m * d, -m * e, l * e, 0, 0)) : this.append(l * d, m * d, -m * e, l * e, b, c), (i || j) && (this.tx -= i * this.a + j * this.c, this.ty -= i * this.b + j * this.d), this
        }, b.rotate = function(a) {
            var b = Math.cos(a),
                c = Math.sin(a),
                d = this.a,
                e = this.c,
                f = this.tx;
            return this.a = d * b - this.b * c, this.b = d * c + this.b * b, this.c = e * b - this.d * c, this.d = e * c + this.d * b, this.tx = f * b - this.ty * c, this.ty = f * c + this.ty * b, this
        }, b.skew = function(b, c) {
            return b *= a.DEG_TO_RAD, c *= a.DEG_TO_RAD, this.append(Math.cos(c), Math.sin(c), -Math.sin(b), Math.cos(b), 0, 0), this
        }, b.scale = function(a, b) {
            return this.a *= a, this.d *= b, this.c *= a, this.b *= b, this.tx *= a, this.ty *= b, this
        }, b.translate = function(a, b) {
            return this.tx += a, this.ty += b, this
        }, b.identity = function() {
            return this.alpha = this.a = this.d = 1, this.b = this.c = this.tx = this.ty = 0, this.shadow = this.compositeOperation = null, this
        }, b.invert = function() {
            var a = this.a,
                b = this.b,
                c = this.c,
                d = this.d,
                e = this.tx,
                f = a * d - b * c;
            return this.a = d / f, this.b = -b / f, this.c = -c / f, this.d = a / f, this.tx = (c * this.ty - d * e) / f, this.ty = -(a * this.ty - b * e) / f, this
        }, b.isIdentity = function() {
            return 0 == this.tx && 0 == this.ty && 1 == this.a && 0 == this.b && 0 == this.c && 1 == this.d
        }, b.decompose = function(b) {
            null == b && (b = {}), b.x = this.tx, b.y = this.ty, b.scaleX = Math.sqrt(this.a * this.a + this.b * this.b), b.scaleY = Math.sqrt(this.c * this.c + this.d * this.d);
            var c = Math.atan2(-this.c, this.d),
                d = Math.atan2(this.b, this.a);
            return c == d ? (b.rotation = d / a.DEG_TO_RAD, this.a < 0 && this.d >= 0 && (b.rotation += b.rotation <= 0 ? 180 : -180), b.skewX = b.skewY = 0) : (b.skewX = c / a.DEG_TO_RAD, b.skewY = d / a.DEG_TO_RAD), b
        }, b.reinitialize = function(a, b, c, d, e, f, g, h, i) {
            return this.initialize(a, b, c, d, e, f), this.alpha = g || 1, this.shadow = h, this.compositeOperation = i, this
        }, b.appendProperties = function(a, b, c) {
            return this.alpha *= a, this.shadow = b || this.shadow, this.compositeOperation = c || this.compositeOperation, this
        }, b.prependProperties = function(a, b, c) {
            return this.alpha *= a, this.shadow = this.shadow || b, this.compositeOperation = this.compositeOperation || c, this
        }, b.clone = function() {
            var b = new a(this.a, this.b, this.c, this.d, this.tx, this.ty);
            return b.shadow = this.shadow, b.alpha = this.alpha, b.compositeOperation = this.compositeOperation, b
        }, b.toString = function() {
            return "[Matrix2D (a=" + this.a + " b=" + this.b + " c=" + this.c + " d=" + this.d + " tx=" + this.tx + " ty=" + this.ty + ")]"
        }, a.identity = new a(1, 0, 0, 1, 0, 0), createjs.Matrix2D = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a, b) {
                this.initialize(a, b)
            },
            b = a.prototype;
        b.x = 0, b.y = 0, b.initialize = function(a, b) {
            this.x = null == a ? 0 : a, this.y = null == b ? 0 : b
        }, b.clone = function() {
            return new a(this.x, this.y)
        }, b.toString = function() {
            return "[Point (x=" + this.x + " y=" + this.y + ")]"
        }, createjs.Point = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a, b, c, d) {
                this.initialize(a, b, c, d)
            },
            b = a.prototype;
        b.x = 0, b.y = 0, b.width = 0, b.height = 0, b.initialize = function(a, b, c, d) {
            this.x = null == a ? 0 : a, this.y = null == b ? 0 : b, this.width = null == c ? 0 : c, this.height = null == d ? 0 : d
        }, b.clone = function() {
            return new a(this.x, this.y, this.width, this.height)
        }, b.toString = function() {
            return "[Rectangle (x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + ")]"
        }, createjs.Rectangle = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a, b, c, d, e, f, g) {
                this.initialize(a, b, c, d, e, f, g)
            },
            b = a.prototype;
        b.target = null, b.overLabel = null, b.outLabel = null, b.downLabel = null, b.play = !1, b._isPressed = !1, b._isOver = !1, b.initialize = function(a, b, c, d, e, f, g) {
            a.addEventListener && (this.target = a, a.cursor = "pointer", this.overLabel = null == c ? "over" : c, this.outLabel = null == b ? "out" : b, this.downLabel = null == d ? "down" : d, this.play = e, this.setEnabled(!0), this.handleEvent({}), f && (g && (f.actionsEnabled = !1, f.gotoAndStop && f.gotoAndStop(g)), a.hitArea = f))
        }, b.setEnabled = function(a) {
            var b = this.target;
            a ? (b.addEventListener("mouseover", this), b.addEventListener("mouseout", this), b.addEventListener("mousedown", this)) : (b.removeEventListener("mouseover", this), b.removeEventListener("mouseout", this), b.removeEventListener("mousedown", this))
        }, b.toString = function() {
            return "[ButtonHelper]"
        }, b.handleEvent = function(a) {
            var b, c = this.target,
                d = a.type;
            "mousedown" == d ? (a.addEventListener("mouseup", this), this._isPressed = !0, b = this.downLabel) : "mouseup" == d ? (this._isPressed = !1, b = this._isOver ? this.overLabel : this.outLabel) : "mouseover" == d ? (this._isOver = !0, b = this._isPressed ? this.downLabel : this.overLabel) : (this._isOver = !1, b = this._isPressed ? this.overLabel : this.outLabel), this.play ? c.gotoAndPlay && c.gotoAndPlay(b) : c.gotoAndStop && c.gotoAndStop(b)
        }, createjs.ButtonHelper = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function() {
                this.initialize()
            },
            b = a.prototype;
        b.initialize = function() {}, b.getBounds = function() {
            return new createjs.Rectangle(0, 0, 0, 0)
        }, b.applyFilter = function() {}, b.toString = function() {
            return "[Filter]"
        }, b.clone = function() {
            return new a
        }, createjs.Filter = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a, b, c) {
                this.initialize(a, b, c)
            },
            b = a.prototype = new createjs.Filter;
        b.initialize = function(a, b, c) {
            (isNaN(a) || 0 > a) && (a = 0), this.blurX = 0 | a, (isNaN(b) || 0 > b) && (b = 0), this.blurY = 0 | b, (isNaN(c) || 1 > c) && (c = 1), this.quality = 0 | c
        }, b.blurX = 0, b.blurY = 0, b.quality = 1, b.getBounds = function() {
            return new createjs.Rectangle(-this.blurX, -this.blurY, 2 * this.blurX, 2 * this.blurY)
        }, b.applyFilter = function(a, b, c, d, e, f, g, h) {
            f = f || a, null == g && (g = b), null == h && (h = c);
            try {
                var i = a.getImageData(b, c, d, e)
            } catch (j) {
                return !1
            }
            var k = this.blurX;
            if (isNaN(k) || 0 > k) return !1;
            k |= 0;
            var l = this.blurY;
            if (isNaN(l) || 0 > l) return !1;
            if (l |= 0, 0 == k && 0 == l) return !1;
            var m = this.quality;
            (isNaN(m) || 1 > m) && (m = 1), m |= 0, m > 3 && (m = 3), 1 > m && (m = 1);
            for (var n, o, p, q, b, c, r, s, t, u, v, w, x, y = i.data, z = d - 1, A = e - 1, B = k + 1, C = k + B, D = l + 1, E = l + D, F = 1 / (C * E), G = [], H = [], I = [], J = [], K = [], L = []; m-- > 0;) {
                for (x = w = 0, c = 0; e > c; c++) {
                    for (n = y[x] * B, o = y[x + 1] * B, p = y[x + 2] * B, q = y[x + 3] * B, r = 1; k >= r; r++) s = x + ((r > z ? z : r) << 2), n += y[s++], o += y[s++], p += y[s++], q += y[s];
                    for (b = 0; d > b; b++) G[w] = n, H[w] = o, I[w] = p, J[w] = q, 0 == c && (K[b] = Math.min(b + B, z) << 2, L[b] = Math.max(b - k, 0) << 2), t = x + K[b], u = x + L[b], n += y[t++] - y[u++], o += y[t++] - y[u++], p += y[t++] - y[u++], q += y[t] - y[u], w++;
                    x += d << 2
                }
                for (b = 0; d > b; b++) {
                    for (v = b, n = G[v] * D, o = H[v] * D, p = I[v] * D, q = J[v] * D, r = 1; l >= r; r++) v += r > A ? 0 : d, n += G[v], o += H[v], p += I[v], q += J[v];
                    for (w = b << 2, c = 0; e > c; c++) y[w] = n * F + .5 | 0, y[w + 1] = o * F + .5 | 0, y[w + 2] = p * F + .5 | 0, y[w + 3] = q * F + .5 | 0, 0 == b && (K[c] = Math.min(c + D, A) * d, L[c] = Math.max(c - l, 0) * d), t = b + K[c], u = b + L[c], n += G[t] - G[u], o += H[t] - H[u], p += I[t] - I[u], q += J[t] - J[u], w += d << 2
                }
            }
            return f.putImageData(i, g, h), !0
        }, b.clone = function() {
            return new a(this.blurX, this.blurY, this.quality)
        }, b.toString = function() {
            return "[BoxBlurFilter]"
        }, createjs.BoxBlurFilter = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a) {
                this.initialize(a)
            },
            b = a.prototype = new createjs.Filter;
        b.matrix = null, b.initialize = function(a) {
            this.matrix = a
        }, b.applyFilter = function(a, b, c, d, e, f, g, h) {
            f = f || a, null == g && (g = b), null == h && (h = c);
            try {
                var i = a.getImageData(b, c, d, e)
            } catch (j) {
                return !1
            }
            for (var k, l, m, n, o = i.data, p = o.length, q = this.matrix, r = q[0], s = q[1], t = q[2], u = q[3], v = q[4], w = q[5], x = q[6], y = q[7], z = q[8], A = q[9], B = q[10], C = q[11], D = q[12], E = q[13], F = q[14], G = q[15], H = q[16], I = q[17], J = q[18], K = q[19], L = 0; p > L; L += 4) k = o[L], l = o[L + 1], m = o[L + 2], n = o[L + 3], o[L] = k * r + l * s + m * t + n * u + v, o[L + 1] = k * w + l * x + m * y + n * z + A, o[L + 2] = k * B + l * C + m * D + n * E + F, o[L + 3] = k * G + l * H + m * I + n * J + K;
            return i.data = o, f.putImageData(i, g, h), !0
        }, b.toString = function() {
            return "[ColorMatrixFilter]"
        }, b.clone = function() {
            return new a(this.matrix)
        }, createjs.ColorMatrixFilter = a
    }(), this.createjs = this.createjs || {},
    function() {
        ColorMatrix = function(a, b, c, d) {
            this.initialize(a, b, c, d)
        };
        var a = ColorMatrix.prototype = [];
        ColorMatrix.DELTA_INDEX = [0, .01, .02, .04, .05, .06, .07, .08, .1, .11, .12, .14, .15, .16, .17, .18, .2, .21, .22, .24, .25, .27, .28, .3, .32, .34, .36, .38, .4, .42, .44, .46, .48, .5, .53, .56, .59, .62, .65, .68, .71, .74, .77, .8, .83, .86, .89, .92, .95, .98, 1, 1.06, 1.12, 1.18, 1.24, 1.3, 1.36, 1.42, 1.48, 1.54, 1.6, 1.66, 1.72, 1.78, 1.84, 1.9, 1.96, 2, 2.12, 2.25, 2.37, 2.5, 2.62, 2.75, 2.87, 3, 3.2, 3.4, 3.6, 3.8, 4, 4.3, 4.7, 4.9, 5, 5.5, 6, 6.5, 6.8, 7, 7.3, 7.5, 7.8, 8, 8.4, 8.7, 9, 9.4, 9.6, 9.8, 10], ColorMatrix.IDENTITY_MATRIX = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1], ColorMatrix.LENGTH = ColorMatrix.IDENTITY_MATRIX.length, a.initialize = function(a, b, c, d) {
            return this.reset(), this.adjustColor(a, b, c, d), this
        }, a.reset = function() {
            return this.copyMatrix(ColorMatrix.IDENTITY_MATRIX)
        }, a.adjustColor = function(a, b, c, d) {
            return this.adjustHue(d), this.adjustContrast(b), this.adjustBrightness(a), this.adjustSaturation(c)
        }, a.adjustBrightness = function(a) {
            return 0 == a || isNaN(a) ? this : (a = this._cleanValue(a, 255), this._multiplyMatrix([1, 0, 0, 0, a, 0, 1, 0, 0, a, 0, 0, 1, 0, a, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]), this)
        }, a.adjustContrast = function(a) {
            if (0 == a || isNaN(a)) return this;
            a = this._cleanValue(a, 100);
            var b;
            return 0 > a ? b = 127 + a / 100 * 127 : (b = a % 1, b = 0 == b ? ColorMatrix.DELTA_INDEX[a] : ColorMatrix.DELTA_INDEX[a << 0] * (1 - b) + ColorMatrix.DELTA_INDEX[(a << 0) + 1] * b, b = 127 * b + 127), this._multiplyMatrix([b / 127, 0, 0, 0, .5 * (127 - b), 0, b / 127, 0, 0, .5 * (127 - b), 0, 0, b / 127, 0, .5 * (127 - b), 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]), this
        }, a.adjustSaturation = function(a) {
            if (0 == a || isNaN(a)) return this;
            a = this._cleanValue(a, 100);
            var b = 1 + (a > 0 ? 3 * a / 100 : a / 100),
                c = .3086,
                d = .6094,
                e = .082;
            return this._multiplyMatrix([c * (1 - b) + b, d * (1 - b), e * (1 - b), 0, 0, c * (1 - b), d * (1 - b) + b, e * (1 - b), 0, 0, c * (1 - b), d * (1 - b), e * (1 - b) + b, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]), this
        }, a.adjustHue = function(a) {
            if (0 == a || isNaN(a)) return this;
            a = this._cleanValue(a, 180) / 180 * Math.PI;
            var b = Math.cos(a),
                c = Math.sin(a),
                d = .213,
                e = .715,
                f = .072;
            return this._multiplyMatrix([d + b * (1 - d) + c * -d, e + b * -e + c * -e, f + b * -f + c * (1 - f), 0, 0, d + b * -d + .143 * c, e + b * (1 - e) + .14 * c, f + b * -f + c * -.283, 0, 0, d + b * -d + c * -(1 - d), e + b * -e + c * e, f + b * (1 - f) + c * f, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]), this
        }, a.concat = function(a) {
            return a = this._fixMatrix(a), a.length != ColorMatrix.LENGTH ? this : (this._multiplyMatrix(a), this)
        }, a.clone = function() {
            return new ColorMatrix(this)
        }, a.toArray = function() {
            return this.slice(0, ColorMatrix.LENGTH)
        }, a.copyMatrix = function(a) {
            for (var b = ColorMatrix.LENGTH, c = 0; b > c; c++) this[c] = a[c];
            return this
        }, a._multiplyMatrix = function(a) {
            for (var b = [], c = 0; 5 > c; c++) {
                for (var d = 0; 5 > d; d++) b[d] = this[d + 5 * c];
                for (var d = 0; 5 > d; d++) {
                    for (var e = 0, f = 0; 5 > f; f++) e += a[d + 5 * f] * b[f];
                    this[d + 5 * c] = e
                }
            }
        }, a._cleanValue = function(a, b) {
            return Math.min(b, Math.max(-b, a))
        }, a._fixMatrix = function(a) {
            return a instanceof ColorMatrix && (a = a.slice(0)), a.length < ColorMatrix.LENGTH ? a = a.slice(0, a.length).concat(ColorMatrix.IDENTITY_MATRIX.slice(a.length, ColorMatrix.LENGTH)) : a.length > ColorMatrix.LENGTH && (a = a.slice(0, ColorMatrix.LENGTH)), a
        }, createjs.ColorMatrix = ColorMatrix
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a, b, c, d, e, f, g, h) {
                this.initialize(a, b, c, d, e, f, g, h)
            },
            b = a.prototype = new createjs.Filter;
        b.redMultiplier = 1, b.greenMultiplier = 1, b.blueMultiplier = 1, b.alphaMultiplier = 1, b.redOffset = 0, b.greenOffset = 0, b.blueOffset = 0, b.alphaOffset = 0, b.initialize = function(a, b, c, d, e, f, g, h) {
            this.redMultiplier = null != a ? a : 1, this.greenMultiplier = null != b ? b : 1, this.blueMultiplier = null != c ? c : 1, this.alphaMultiplier = null != d ? d : 1, this.redOffset = e || 0, this.greenOffset = f || 0, this.blueOffset = g || 0, this.alphaOffset = h || 0
        }, b.applyFilter = function(a, b, c, d, e, f, g, h) {
            f = f || a, null == g && (g = b), null == h && (h = c);
            try {
                var i = a.getImageData(b, c, d, e)
            } catch (j) {
                return !1
            }
            for (var k = i.data, l = k.length, m = 0; l > m; m += 4) k[m] = k[m] * this.redMultiplier + this.redOffset, k[m + 1] = k[m + 1] * this.greenMultiplier + this.greenOffset, k[m + 2] = k[m + 2] * this.blueMultiplier + this.blueOffset, k[m + 3] = k[m + 3] * this.alphaMultiplier + this.alphaOffset;
            return i.data = k, f.putImageData(i, g, h), !0
        }, b.toString = function() {
            return "[ColorFilter]"
        }, b.clone = function() {
            return new a(this.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset)
        }, createjs.ColorFilter = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a, b, c, d) {
                this.initialize(a, b, c, d)
            },
            b = a.prototype;
        a.identity = null, b.color = null, b.offsetX = 0, b.offsetY = 0, b.blur = 0, b.initialize = function(a, b, c, d) {
            this.color = a, this.offsetX = b, this.offsetY = c, this.blur = d
        }, b.toString = function() {
            return "[Shadow]"
        }, b.clone = function() {
            return new a(this.color, this.offsetX, this.offsetY, this.blur)
        }, a.identity = new a("transparent", 0, 0, 0), createjs.Shadow = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a) {
                this.initialize(a)
            },
            b = a.prototype;
        b.complete = !0, b.onComplete = null, b.addEventListener = null, b.removeEventListener = null, b.removeAllEventListeners = null, b.dispatchEvent = null, b.hasEventListener = null, b._listeners = null, createjs.EventDispatcher.initialize(b), b._animations = null, b._frames = null, b._images = null, b._data = null, b._loadCount = 0, b._frameHeight = 0, b._frameWidth = 0, b._numFrames = 0, b._regX = 0, b._regY = 0, b.initialize = function(a) {
            var b, c, d, e;
            if (null != a) {
                if (a.images && (c = a.images.length) > 0)
                    for (e = this._images = [], b = 0; c > b; b++) {
                        var f = a.images[b];
                        if ("string" == typeof f) {
                            var g = f;
                            f = new Image, f.src = g
                        }
                        e.push(f), f.getContext || f.complete || (this._loadCount++, this.complete = !1, function(a) {
                            f.onload = function() {
                                a._handleImageLoad()
                            }
                        }(this))
                    }
                if (null == a.frames);
                else if (a.frames instanceof Array)
                    for (this._frames = [], e = a.frames, b = 0, c = e.length; c > b; b++) {
                        var h = e[b];
                        this._frames.push({
                            image: this._images[h[4] ? h[4] : 0],
                            rect: new createjs.Rectangle(h[0], h[1], h[2], h[3]),
                            regX: h[5] || 0,
                            regY: h[6] || 0
                        })
                    } else d = a.frames, this._frameWidth = d.width, this._frameHeight = d.height, this._regX = d.regX || 0, this._regY = d.regY || 0, this._numFrames = d.count, 0 == this._loadCount && this._calculateFrames();
                if (null != (d = a.animations)) {
                    this._animations = [], this._data = {};
                    var i;
                    for (i in d) {
                        var j = {
                                name: i
                            },
                            k = d[i];
                        if ("number" == typeof k) e = j.frames = [k];
                        else if (k instanceof Array)
                            if (1 == k.length) j.frames = [k[0]];
                            else
                                for (j.frequency = k[3], j.next = k[2], e = j.frames = [], b = k[0]; b <= k[1]; b++) e.push(b);
                        else {
                            j.frequency = k.frequency, j.next = k.next;
                            var l = k.frames;
                            e = j.frames = "number" == typeof l ? [l] : l.slice(0)
                        }
                        j.next = e.length < 2 || 0 == j.next ? null : null == j.next || 1 == j.next ? i : j.next, j.frequency || (j.frequency = 1), this._animations.push(i), this._data[i] = j
                    }
                }
            }
        }, b.getNumFrames = function(a) {
            if (null == a) return this._frames ? this._frames.length : this._numFrames;
            var b = this._data[a];
            return null == b ? 0 : b.frames.length
        }, b.getAnimations = function() {
            return this._animations.slice(0)
        }, b.getAnimation = function(a) {
            return this._data[a]
        }, b.getFrame = function(a) {
            var b;
            return this.complete && this._frames && (b = this._frames[a]) ? b : null
        }, b.getFrameBounds = function(a) {
            var b = this.getFrame(a);
            return b ? new createjs.Rectangle(-b.regX, -b.regY, b.rect.width, b.rect.height) : null
        }, b.toString = function() {
            return "[SpriteSheet]"
        }, b.clone = function() {
            var b = new a;
            return b.complete = this.complete, b._animations = this._animations, b._frames = this._frames, b._images = this._images, b._data = this._data, b._frameHeight = this._frameHeight, b._frameWidth = this._frameWidth, b._numFrames = this._numFrames, b._loadCount = this._loadCount, b
        }, b._handleImageLoad = function() {
            0 == --this._loadCount && (this._calculateFrames(), this.complete = !0, this.onComplete && this.onComplete(), this.dispatchEvent("complete"))
        }, b._calculateFrames = function() {
            if (!this._frames && 0 != this._frameWidth) {
                this._frames = [];
                for (var a = 0, b = this._frameWidth, c = this._frameHeight, d = 0, e = this._images; d < e.length; d++) {
                    for (var f = e[d], g = (f.width + 1) / b | 0, h = (f.height + 1) / c | 0, i = this._numFrames > 0 ? Math.min(this._numFrames - a, g * h) : g * h, j = 0; i > j; j++) this._frames.push({
                        image: f,
                        rect: new createjs.Rectangle(j % g * b, (j / g | 0) * c, b, c),
                        regX: this._regX,
                        regY: this._regY
                    });
                    a += i
                }
                this._numFrames = a
            }
        }, createjs.SpriteSheet = a
    }(), this.createjs = this.createjs || {},
    function() {
        function a(a, b, c) {
            this.f = a, this.params = b, this.path = null == c ? !0 : c
        }
        a.prototype.exec = function(a) {
            this.f.apply(a, this.params)
        };
        var b = function() {
                this.initialize()
            },
            c = b.prototype;
        b.getRGB = function(a, b, c, d) {
            return null != a && null == c && (d = b, c = 255 & a, b = a >> 8 & 255, a = a >> 16 & 255), null == d ? "rgb(" + a + "," + b + "," + c + ")" : "rgba(" + a + "," + b + "," + c + "," + d + ")"
        }, b.getHSL = function(a, b, c, d) {
            return null == d ? "hsl(" + a % 360 + "," + b + "%," + c + "%)" : "hsla(" + a % 360 + "," + b + "%," + c + "%," + d + ")"
        }, b.BASE_64 = {
            A: 0,
            B: 1,
            C: 2,
            D: 3,
            E: 4,
            F: 5,
            G: 6,
            H: 7,
            I: 8,
            J: 9,
            K: 10,
            L: 11,
            M: 12,
            N: 13,
            O: 14,
            P: 15,
            Q: 16,
            R: 17,
            S: 18,
            T: 19,
            U: 20,
            V: 21,
            W: 22,
            X: 23,
            Y: 24,
            Z: 25,
            a: 26,
            b: 27,
            c: 28,
            d: 29,
            e: 30,
            f: 31,
            g: 32,
            h: 33,
            i: 34,
            j: 35,
            k: 36,
            l: 37,
            m: 38,
            n: 39,
            o: 40,
            p: 41,
            q: 42,
            r: 43,
            s: 44,
            t: 45,
            u: 46,
            v: 47,
            w: 48,
            x: 49,
            y: 50,
            z: 51,
            0: 52,
            1: 53,
            2: 54,
            3: 55,
            4: 56,
            5: 57,
            6: 58,
            7: 59,
            8: 60,
            9: 61,
            "+": 62,
            "/": 63
        }, b.STROKE_CAPS_MAP = ["butt", "round", "square"], b.STROKE_JOINTS_MAP = ["miter", "round", "bevel"], b._ctx = (createjs.createCanvas ? createjs.createCanvas() : document.createElement("canvas")).getContext("2d"), b.beginCmd = new a(b._ctx.beginPath, [], !1), b.fillCmd = new a(b._ctx.fill, [], !1), b.strokeCmd = new a(b._ctx.stroke, [], !1), c._strokeInstructions = null, c._strokeStyleInstructions = null, c._ignoreScaleStroke = !1, c._fillInstructions = null, c._instructions = null, c._oldInstructions = null, c._activeInstructions = null, c._active = !1, c._dirty = !1, c.initialize = function() {
            this.clear(), this._ctx = b._ctx
        }, c.isEmpty = function() {
            return !(this._instructions.length || this._oldInstructions.length || this._activeInstructions.length)
        }, c.draw = function(a) {
            this._dirty && this._updateInstructions();
            for (var b = this._instructions, c = 0, d = b.length; d > c; c++) b[c].exec(a)
        }, c.drawAsPath = function(a) {
            this._dirty && this._updateInstructions();
            for (var b, c = this._instructions, d = 0, e = c.length; e > d; d++)((b = c[d]).path || 0 == d) && b.exec(a)
        }, c.moveTo = function(b, c) {
            return this._activeInstructions.push(new a(this._ctx.moveTo, [b, c])), this
        }, c.lineTo = function(b, c) {
            return this._dirty = this._active = !0, this._activeInstructions.push(new a(this._ctx.lineTo, [b, c])), this
        }, c.arcTo = function(b, c, d, e, f) {
            return this._dirty = this._active = !0, this._activeInstructions.push(new a(this._ctx.arcTo, [b, c, d, e, f])), this
        }, c.arc = function(b, c, d, e, f, g) {
            return this._dirty = this._active = !0, null == g && (g = !1), this._activeInstructions.push(new a(this._ctx.arc, [b, c, d, e, f, g])), this
        }, c.quadraticCurveTo = function(b, c, d, e) {
            return this._dirty = this._active = !0, this._activeInstructions.push(new a(this._ctx.quadraticCurveTo, [b, c, d, e])), this
        }, c.bezierCurveTo = function(b, c, d, e, f, g) {
            return this._dirty = this._active = !0, this._activeInstructions.push(new a(this._ctx.bezierCurveTo, [b, c, d, e, f, g])), this
        }, c.rect = function(b, c, d, e) {
            return this._dirty = this._active = !0, this._activeInstructions.push(new a(this._ctx.rect, [b, c, d, e])), this
        }, c.closePath = function() {
            return this._active && (this._dirty = !0, this._activeInstructions.push(new a(this._ctx.closePath, []))), this
        }, c.clear = function() {
            return this._instructions = [], this._oldInstructions = [], this._activeInstructions = [], this._strokeStyleInstructions = this._strokeInstructions = this._fillInstructions = null, this._active = this._dirty = !1, this
        }, c.beginFill = function(c) {
            return this._active && this._newPath(), this._fillInstructions = c ? [new a(this._setProp, ["fillStyle", c], !1), b.fillCmd] : null, this
        }, c.beginLinearGradientFill = function(c, d, e, f, g, h) {
            this._active && this._newPath();
            for (var i = this._ctx.createLinearGradient(e, f, g, h), j = 0, k = c.length; k > j; j++) i.addColorStop(d[j], c[j]);
            return this._fillInstructions = [new a(this._setProp, ["fillStyle", i], !1), b.fillCmd], this
        }, c.beginRadialGradientFill = function(c, d, e, f, g, h, i, j) {
            this._active && this._newPath();
            for (var k = this._ctx.createRadialGradient(e, f, g, h, i, j), l = 0, m = c.length; m > l; l++) k.addColorStop(d[l], c[l]);
            return this._fillInstructions = [new a(this._setProp, ["fillStyle", k], !1), b.fillCmd], this
        }, c.beginBitmapFill = function(c, d, e) {
            this._active && this._newPath(), d = d || "";
            var f, g = this._ctx.createPattern(c, d),
                h = new a(this._setProp, ["fillStyle", g], !1);
            return f = e ? [h, new a(this._ctx.save, [], !1), new a(this._ctx.transform, [e.a, e.b, e.c, e.d, e.tx, e.ty], !1), b.fillCmd, new a(this._ctx.restore, [], !1)] : [h, b.fillCmd], this._fillInstructions = f, this
        }, c.endFill = function() {
            return this.beginFill()
        }, c.setStrokeStyle = function(c, d, e, f, g) {
            return this._active && this._newPath(), this._strokeStyleInstructions = [new a(this._setProp, ["lineWidth", null == c ? "1" : c], !1), new a(this._setProp, ["lineCap", null == d ? "butt" : isNaN(d) ? d : b.STROKE_CAPS_MAP[d]], !1), new a(this._setProp, ["lineJoin", null == e ? "miter" : isNaN(e) ? e : b.STROKE_JOINTS_MAP[e]], !1), new a(this._setProp, ["miterLimit", null == f ? "10" : f], !1)], this._ignoreScaleStroke = g, this
        }, c.beginStroke = function(b) {
            return this._active && this._newPath(), this._strokeInstructions = b ? [new a(this._setProp, ["strokeStyle", b], !1)] : null, this
        }, c.beginLinearGradientStroke = function(b, c, d, e, f, g) {
            this._active && this._newPath();
            for (var h = this._ctx.createLinearGradient(d, e, f, g), i = 0, j = b.length; j > i; i++) h.addColorStop(c[i], b[i]);
            return this._strokeInstructions = [new a(this._setProp, ["strokeStyle", h], !1)], this
        }, c.beginRadialGradientStroke = function(b, c, d, e, f, g, h, i) {
            this._active && this._newPath();
            for (var j = this._ctx.createRadialGradient(d, e, f, g, h, i), k = 0, l = b.length; l > k; k++) j.addColorStop(c[k], b[k]);
            return this._strokeInstructions = [new a(this._setProp, ["strokeStyle", j], !1)], this
        }, c.beginBitmapStroke = function(b, c) {
            this._active && this._newPath(), c = c || "";
            var d = this._ctx.createPattern(b, c);
            return this._strokeInstructions = [new a(this._setProp, ["strokeStyle", d], !1)], this
        }, c.endStroke = function() {
            return this.beginStroke(), this
        }, c.curveTo = c.quadraticCurveTo, c.drawRect = c.rect, c.drawRoundRect = function(a, b, c, d, e) {
            return this.drawRoundRectComplex(a, b, c, d, e, e, e, e), this
        }, c.drawRoundRectComplex = function(b, c, d, e, f, g, h, i) {
            var j = (e > d ? d : e) / 2,
                k = 0,
                l = 0,
                m = 0,
                n = 0;
            0 > f && (f *= k = -1), f > j && (f = j), 0 > g && (g *= l = -1), g > j && (g = j), 0 > h && (h *= m = -1), h > j && (h = j), 0 > i && (i *= n = -1), i > j && (i = j), this._dirty = this._active = !0;
            var o = this._ctx.arcTo,
                p = this._ctx.lineTo;
            return this._activeInstructions.push(new a(this._ctx.moveTo, [b + d - g, c]), new a(o, [b + d + g * l, c - g * l, b + d, c + g, g]), new a(p, [b + d, c + e - h]), new a(o, [b + d + h * m, c + e + h * m, b + d - h, c + e, h]), new a(p, [b + i, c + e]), new a(o, [b - i * n, c + e + i * n, b, c + e - i, i]), new a(p, [b, c + f]), new a(o, [b - f * k, c - f * k, b + f, c, f]), new a(this._ctx.closePath)), this
        }, c.drawCircle = function(a, b, c) {
            return this.arc(a, b, c, 0, 2 * Math.PI), this
        }, c.drawEllipse = function(b, c, d, e) {
            this._dirty = this._active = !0;
            var f = .5522848,
                g = d / 2 * f,
                h = e / 2 * f,
                i = b + d,
                j = c + e,
                k = b + d / 2,
                l = c + e / 2;
            return this._activeInstructions.push(new a(this._ctx.moveTo, [b, l]), new a(this._ctx.bezierCurveTo, [b, l - h, k - g, c, k, c]), new a(this._ctx.bezierCurveTo, [k + g, c, i, l - h, i, l]), new a(this._ctx.bezierCurveTo, [i, l + h, k + g, j, k, j]), new a(this._ctx.bezierCurveTo, [k - g, j, b, l + h, b, l])), this
        }, c.drawPolyStar = function(b, c, d, e, f, g) {
            this._dirty = this._active = !0, null == f && (f = 0), f = 1 - f, null == g ? g = 0 : g /= 180 / Math.PI;
            var h = Math.PI / e;
            this._activeInstructions.push(new a(this._ctx.moveTo, [b + Math.cos(g) * d, c + Math.sin(g) * d]));
            for (var i = 0; e > i; i++) g += h, 1 != f && this._activeInstructions.push(new a(this._ctx.lineTo, [b + Math.cos(g) * d * f, c + Math.sin(g) * d * f])), g += h, this._activeInstructions.push(new a(this._ctx.lineTo, [b + Math.cos(g) * d, c + Math.sin(g) * d]));
            return this
        }, c.decodePath = function(a) {
            for (var c = [this.moveTo, this.lineTo, this.quadraticCurveTo, this.bezierCurveTo, this.closePath], d = [2, 2, 4, 6, 0], e = 0, f = a.length, g = [], h = 0, i = 0, j = b.BASE_64; f > e;) {
                var k = a.charAt(e),
                    l = j[k],
                    m = l >> 3,
                    n = c[m];
                if (!n || 3 & l) throw "bad path data (@" + e + "): " + k;
                var o = d[m];
                m || (h = i = 0), g.length = 0, e++;
                for (var p = (l >> 2 & 1) + 2, q = 0; o > q; q++) {
                    var r = j[a.charAt(e)],
                        s = r >> 5 ? -1 : 1;
                    r = (31 & r) << 6 | j[a.charAt(e + 1)], 3 == p && (r = r << 6 | j[a.charAt(e + 2)]), r = s * r / 10, q % 2 ? h = r += h : i = r += i, g[q] = r, e += p
                }
                n.apply(this, g)
            }
            return this
        }, c.clone = function() {
            var a = new b;
            return a._instructions = this._instructions.slice(), a._activeInstructions = this._activeInstructions.slice(), a._oldInstructions = this._oldInstructions.slice(), this._fillInstructions && (a._fillInstructions = this._fillInstructions.slice()), this._strokeInstructions && (a._strokeInstructions = this._strokeInstructions.slice()), this._strokeStyleInstructions && (a._strokeStyleInstructions = this._strokeStyleInstructions.slice()), a._active = this._active, a._dirty = this._dirty, a
        }, c.toString = function() {
            return "[Graphics]"
        }, c.mt = c.moveTo, c.lt = c.lineTo, c.at = c.arcTo, c.bt = c.bezierCurveTo, c.qt = c.quadraticCurveTo, c.a = c.arc, c.r = c.rect, c.cp = c.closePath, c.c = c.clear, c.f = c.beginFill, c.lf = c.beginLinearGradientFill, c.rf = c.beginRadialGradientFill, c.bf = c.beginBitmapFill, c.ef = c.endFill, c.ss = c.setStrokeStyle, c.s = c.beginStroke, c.ls = c.beginLinearGradientStroke, c.rs = c.beginRadialGradientStroke, c.bs = c.beginBitmapStroke, c.es = c.endStroke, c.dr = c.drawRect, c.rr = c.drawRoundRect, c.rc = c.drawRoundRectComplex, c.dc = c.drawCircle, c.de = c.drawEllipse, c.dp = c.drawPolyStar, c.p = c.decodePath, c._updateInstructions = function() {
            this._instructions = this._oldInstructions.slice(), this._instructions.push(b.beginCmd), this._instructions.push.apply(this._instructions, this._activeInstructions), this._fillInstructions && this._instructions.push.apply(this._instructions, this._fillInstructions), this._strokeInstructions && (this._strokeStyleInstructions && this._instructions.push.apply(this._instructions, this._strokeStyleInstructions), this._instructions.push.apply(this._instructions, this._strokeInstructions), this._ignoreScaleStroke ? this._instructions.push(new a(this._ctx.save, [], !1), new a(this._ctx.setTransform, [1, 0, 0, 1, 0, 0], !1), b.strokeCmd, new a(this._ctx.restore, [], !1)) : this._instructions.push(b.strokeCmd))
        }, c._newPath = function() {
            this._dirty && this._updateInstructions(), this._oldInstructions = this._instructions, this._activeInstructions = [], this._active = this._dirty = !1
        }, c._setProp = function(a, b) {
            this[a] = b
        }, createjs.Graphics = b
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function() {
                this.initialize()
            },
            b = a.prototype;
        a.suppressCrossDomainErrors = !1, a._hitTestCanvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement("canvas"), a._hitTestCanvas.width = a._hitTestCanvas.height = 1, a._hitTestContext = a._hitTestCanvas.getContext("2d"), a._nextCacheID = 1, b.alpha = 1, b.cacheCanvas = null, b.id = -1, b.mouseEnabled = !0, b.name = null, b.parent = null, b.regX = 0, b.regY = 0, b.rotation = 0, b.scaleX = 1, b.scaleY = 1, b.skewX = 0, b.skewY = 0, b.shadow = null, b.visible = !0, b.x = 0, b.y = 0, b.compositeOperation = null, b.snapToPixel = !1, b.onPress = null, b.onClick = null, b.onDoubleClick = null, b.onMouseOver = null, b.onMouseOut = null, b.onTick = null, b.filters = null, b.cacheID = 0, b.mask = null, b.hitArea = null, b.cursor = null, b.addEventListener = null, b.removeEventListener = null, b.removeAllEventListeners = null, b.dispatchEvent = null, b.hasEventListener = null, b._listeners = null, createjs.EventDispatcher.initialize(b), b._cacheOffsetX = 0, b._cacheOffsetY = 0, b._cacheScale = 1, b._cacheDataURLID = 0, b._cacheDataURL = null, b._matrix = null, b.initialize = function() {
            this.id = createjs.UID.get(), this._matrix = new createjs.Matrix2D
        }, b.isVisible = function() {
            return !!(this.visible && this.alpha > 0 && 0 != this.scaleX && 0 != this.scaleY)
        }, b.draw = function(a, b) {
            var c = this.cacheCanvas;
            if (b || !c) return !1;
            var d = this._cacheScale;
            return a.drawImage(c, this._cacheOffsetX, this._cacheOffsetY, c.width / d, c.height / d), !0
        }, b.updateContext = function(a) {
            var b, c = this.mask,
                d = this;
            c && c.graphics && !c.graphics.isEmpty() && (b = c.getMatrix(c._matrix), a.transform(b.a, b.b, b.c, b.d, b.tx, b.ty), c.graphics.drawAsPath(a), a.clip(), b.invert(), a.transform(b.a, b.b, b.c, b.d, b.tx, b.ty)), b = d._matrix.identity().appendTransform(d.x, d.y, d.scaleX, d.scaleY, d.rotation, d.skewX, d.skewY, d.regX, d.regY), a.transform(b.a, b.b, b.c, b.d, b.tx + .5 | 0, b.ty + .5 | 0), a.globalAlpha *= d.alpha, d.compositeOperation && (a.globalCompositeOperation = d.compositeOperation), d.shadow && this._applyShadow(a, d.shadow)
        }, b.cache = function(a, b, c, d, e) {
            e = e || 1, this.cacheCanvas || (this.cacheCanvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement("canvas")), this.cacheCanvas.width = Math.ceil(c * e), this.cacheCanvas.height = Math.ceil(d * e), this._cacheOffsetX = a, this._cacheOffsetY = b, this._cacheScale = e || 1, this.updateCache()
        }, b.updateCache = function(b) {
            var c = this.cacheCanvas,
                d = this._cacheScale,
                e = this._cacheOffsetX * d,
                f = this._cacheOffsetY * d;
            if (!c) throw "cache() must be called before updateCache()";
            var g = c.getContext("2d");
            g.save(), b || g.clearRect(0, 0, c.width + 1, c.height + 1), g.globalCompositeOperation = b, g.setTransform(d, 0, 0, d, -e, -f), this.draw(g, !0), this._applyFilters(), g.restore(), this.cacheID = a._nextCacheID++
        }, b.uncache = function() {
            this._cacheDataURL = this.cacheCanvas = null, this.cacheID = this._cacheOffsetX = this._cacheOffsetY = 0, this._cacheScale = 1
        }, b.getCacheDataURL = function() {
            return this.cacheCanvas ? (this.cacheID != this._cacheDataURLID && (this._cacheDataURL = this.cacheCanvas.toDataURL()), this._cacheDataURL) : null
        }, b.getStage = function() {
            for (var a = this; a.parent;) a = a.parent;
            return a instanceof createjs.Stage ? a : null
        }, b.localToGlobal = function(a, b) {
            var c = this.getConcatenatedMatrix(this._matrix);
            return null == c ? null : (c.append(1, 0, 0, 1, a, b), new createjs.Point(c.tx, c.ty))
        }, b.globalToLocal = function(a, b) {
            var c = this.getConcatenatedMatrix(this._matrix);
            return null == c ? null : (c.invert(), c.append(1, 0, 0, 1, a, b), new createjs.Point(c.tx, c.ty))
        }, b.localToLocal = function(a, b, c) {
            var d = this.localToGlobal(a, b);
            return c.globalToLocal(d.x, d.y)
        }, b.setTransform = function(a, b, c, d, e, f, g, h, i) {
            return this.x = a || 0, this.y = b || 0, this.scaleX = null == c ? 1 : c, this.scaleY = null == d ? 1 : d, this.rotation = e || 0, this.skewX = f || 0, this.skewY = g || 0, this.regX = h || 0, this.regY = i || 0, this
        }, b.getMatrix = function(a) {
            var b = this;
            return (a ? a.identity() : new createjs.Matrix2D).appendTransform(b.x, b.y, b.scaleX, b.scaleY, b.rotation, b.skewX, b.skewY, b.regX, b.regY).appendProperties(b.alpha, b.shadow, b.compositeOperation)
        }, b.getConcatenatedMatrix = function(a) {
            a ? a.identity() : a = new createjs.Matrix2D;
            for (var b = this; null != b;) a.prependTransform(b.x, b.y, b.scaleX, b.scaleY, b.rotation, b.skewX, b.skewY, b.regX, b.regY).prependProperties(b.alpha, b.shadow, b.compositeOperation), b = b.parent;
            return a
        }, b.hitTest = function(b, c) {
            var d = a._hitTestContext;
            d.setTransform(1, 0, 0, 1, -b, -c), this.draw(d);
            var e = this._testHit(d);
            return d.setTransform(1, 0, 0, 1, 0, 0), d.clearRect(0, 0, 2, 2), e
        }, b.set = function(a) {
            for (var b in a) this[b] = a[b];
            return this
        }, b.clone = function() {
            var b = new a;
            return this.cloneProps(b), b
        }, b.toString = function() {
            return "[DisplayObject (name=" + this.name + ")]"
        }, b.cloneProps = function(a) {
            a.alpha = this.alpha, a.name = this.name, a.regX = this.regX, a.regY = this.regY, a.rotation = this.rotation, a.scaleX = this.scaleX, a.scaleY = this.scaleY, a.shadow = this.shadow, a.skewX = this.skewX, a.skewY = this.skewY, a.visible = this.visible, a.x = this.x, a.y = this.y, a.mouseEnabled = this.mouseEnabled, a.compositeOperation = this.compositeOperation, this.cacheCanvas && (a.cacheCanvas = this.cacheCanvas.cloneNode(!0), a.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0, 0, this.cacheCanvas.width, this.cacheCanvas.height), 0, 0))
        }, b._applyShadow = function(a, b) {
            b = b || Shadow.identity, a.shadowColor = b.color, a.shadowOffsetX = b.offsetX, a.shadowOffsetY = b.offsetY, a.shadowBlur = b.blur
        }, b._tick = function(a) {
            this.onTick && this.onTick.apply(this, a);
            var b = this._listeners;
            b && b.tick && this.dispatchEvent({
                type: "tick",
                params: a
            })
        }, b._testHit = function(b) {
            try {
                var c = b.getImageData(0, 0, 1, 1).data[3] > 1
            } catch (d) {
                if (!a.suppressCrossDomainErrors) throw "An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."
            }
            return c
        }, b._applyFilters = function() {
            if (this.filters && 0 != this.filters.length && this.cacheCanvas)
                for (var a = this.filters.length, b = this.cacheCanvas.getContext("2d"), c = this.cacheCanvas.width, d = this.cacheCanvas.height, e = 0; a > e; e++) this.filters[e].applyFilter(b, 0, 0, c, d)
        }, b._hasMouseHandler = function(a) {
            var b = this._listeners;
            return !!(1 & a && (this.onPress || this.onClick || this.onDoubleClick || b && (this.hasEventListener("mousedown") || this.hasEventListener("click") || this.hasEventListener("dblclick"))) || 2 & a && (this.onMouseOver || this.onMouseOut || this.cursor || b && (this.hasEventListener("mouseover") || this.hasEventListener("mouseout"))))
        }, createjs.DisplayObject = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function() {
                this.initialize()
            },
            b = a.prototype = new createjs.DisplayObject;
        b.children = null, b.DisplayObject_initialize = b.initialize, b.initialize = function() {
            this.DisplayObject_initialize(), this.children = []
        }, b.isVisible = function() {
            var a = this.cacheCanvas || this.children.length;
            return !!(this.visible && this.alpha > 0 && 0 != this.scaleX && 0 != this.scaleY && a)
        }, b.DisplayObject_draw = b.draw, b.draw = function(a, b) {
            if (this.DisplayObject_draw(a, b)) return !0;

            for (var c = this.children.slice(0), d = 0, e = c.length; e > d; d++) {
                var f = c[d];
                f.isVisible() && (a.save(), f.updateContext(a), f.draw(a), a.restore())
            }
            return !0
        }, b.addChild = function(a) {
            if (null == a) return a;
            var b = arguments.length;
            if (b > 1) {
                for (var c = 0; b > c; c++) this.addChild(arguments[c]);
                return arguments[b - 1]
            }
            return a.parent && a.parent.removeChild(a), a.parent = this, this.children.push(a), a
        }, b.addChildAt = function(a, b) {
            var c = arguments.length,
                d = arguments[c - 1];
            if (0 > d || d > this.children.length) return arguments[c - 2];
            if (c > 2) {
                for (var e = 0; c - 1 > e; e++) this.addChildAt(arguments[e], d + e);
                return arguments[c - 2]
            }
            return a.parent && a.parent.removeChild(a), a.parent = this, this.children.splice(b, 0, a), a
        }, b.removeChild = function(a) {
            var b = arguments.length;
            if (b > 1) {
                for (var c = !0, d = 0; b > d; d++) c = c && this.removeChild(arguments[d]);
                return c
            }
            return this.removeChildAt(this.children.indexOf(a))
        }, b.removeChildAt = function(a) {
            var b = arguments.length;
            if (b > 1) {
                for (var c = [], d = 0; b > d; d++) c[d] = arguments[d];
                c.sort(function(a, b) {
                    return b - a
                });
                for (var e = !0, d = 0; b > d; d++) e = e && this.removeChildAt(c[d]);
                return e
            }
            if (0 > a || a > this.children.length - 1) return !1;
            var f = this.children[a];
            return f && (f.parent = null), this.children.splice(a, 1), !0
        }, b.removeAllChildren = function() {
            for (var a = this.children; a.length;) a.pop().parent = null
        }, b.getChildAt = function(a) {
            return this.children[a]
        }, b.getChildByName = function(a) {
            for (var b = this.children, c = 0, d = b.length; d > c; c++)
                if (b[c].name == a) return b[c];
            return null
        }, b.sortChildren = function(a) {
            this.children.sort(a)
        }, b.getChildIndex = function(a) {
            return this.children.indexOf(a)
        }, b.getNumChildren = function() {
            return this.children.length
        }, b.swapChildrenAt = function(a, b) {
            var c = this.children,
                d = c[a],
                e = c[b];
            d && e && (c[a] = e, c[b] = d)
        }, b.swapChildren = function(a, b) {
            for (var c, d, e = this.children, f = 0, g = e.length; g > f && (e[f] == a && (c = f), e[f] == b && (d = f), null == c || null == d); f++);
            f != g && (e[c] = b, e[d] = a)
        }, b.setChildIndex = function(a, b) {
            var c = this.children,
                d = c.length;
            if (!(a.parent != this || 0 > b || b >= d)) {
                for (var e = 0; d > e && c[e] != a; e++);
                e != d && e != b && (c.splice(e, 1), e > b && b--, c.splice(b, 0, a))
            }
        }, b.contains = function(a) {
            for (; a;) {
                if (a == this) return !0;
                a = a.parent
            }
            return !1
        }, b.hitTest = function(a, b) {
            return null != this.getObjectUnderPoint(a, b)
        }, b.getObjectsUnderPoint = function(a, b) {
            var c = [],
                d = this.localToGlobal(a, b);
            return this._getObjectsUnderPoint(d.x, d.y, c), c
        }, b.getObjectUnderPoint = function(a, b) {
            var c = this.localToGlobal(a, b);
            return this._getObjectsUnderPoint(c.x, c.y)
        }, b.clone = function(b) {
            var c = new a;
            if (this.cloneProps(c), b)
                for (var d = c.children = [], e = 0, f = this.children.length; f > e; e++) {
                    var g = this.children[e].clone(b);
                    g.parent = c, d.push(g)
                }
            return c
        }, b.toString = function() {
            return "[Container (name=" + this.name + ")]"
        }, b.DisplayObject__tick = b._tick, b._tick = function(a) {
            for (var b = this.children.length - 1; b >= 0; b--) {
                var c = this.children[b];
                c._tick && c._tick(a)
            }
            this.DisplayObject__tick(a)
        }, b._getObjectsUnderPoint = function(b, c, d, e) {
            var f = createjs.DisplayObject._hitTestContext,
                g = this._matrix,
                h = this._hasMouseHandler(e);
            if (!this.hitArea && this.cacheCanvas && h && (this.getConcatenatedMatrix(g), f.setTransform(g.a, g.b, g.c, g.d, g.tx - b, g.ty - c), f.globalAlpha = g.alpha, this.draw(f), this._testHit(f))) return f.setTransform(1, 0, 0, 1, 0, 0), f.clearRect(0, 0, 2, 2), this;
            for (var i = this.children.length, j = i - 1; j >= 0; j--) {
                var k = this.children[j],
                    l = k.hitArea;
                if (k.visible && (l || k.isVisible()) && (!e || k.mouseEnabled)) {
                    var m = e && k._hasMouseHandler(e);
                    if (!(k instanceof a) || l && m) {
                        if (!e || h || m) {
                            if (k.getConcatenatedMatrix(g), l && (g.appendTransform(l.x, l.y, l.scaleX, l.scaleY, l.rotation, l.skewX, l.skewY, l.regX, l.regY), g.alpha = l.alpha), f.globalAlpha = g.alpha, f.setTransform(g.a, g.b, g.c, g.d, g.tx - b, g.ty - c), (l || k).draw(f), !this._testHit(f)) continue;
                            if (f.setTransform(1, 0, 0, 1, 0, 0), f.clearRect(0, 0, 2, 2), h) return this;
                            if (!d) return k;
                            d.push(k)
                        }
                    } else {
                        var n;
                        if (h) {
                            if (n = k._getObjectsUnderPoint(b, c)) return this
                        } else if (n = k._getObjectsUnderPoint(b, c, d, e), !d && n) return n
                    }
                }
            }
            return null
        }, createjs.Container = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a) {
                this.initialize(a)
            },
            b = a.prototype = new createjs.Container;
        a._snapToPixelEnabled = !1, b.autoClear = !0, b.canvas = null, b.ctx = null, b.mouseX = 0, b.mouseY = 0, b.onMouseMove = null, b.onMouseUp = null, b.onMouseDown = null, b.snapToPixelEnabled = !1, b.mouseInBounds = !1, b.tickOnUpdate = !0, b.mouseMoveOutside = !1, b._pointerData = null, b._pointerCount = 0, b._primaryPointerID = null, b._mouseOverIntervalID = null, b.Container_initialize = b.initialize, b.initialize = function(a) {
            this.Container_initialize(), this.canvas = "string" == typeof a ? document.getElementById(a) : a, this.ctx = this.canvas.getContext("2d"), this._pointerData = {}, this.enableDOMEvents(!0)
        }, b.update = function() {
            if (this.canvas) {
                this.autoClear && this.clear(), a._snapToPixelEnabled = this.snapToPixelEnabled, this.tickOnUpdate && this._tick(arguments.length ? arguments : null);
                var b = this.ctx;
                b.save(), this.updateContext(b), this.draw(b, !1), b.restore()
            }
        }, b.tick = b.update, b.handleEvent = function(a) {
            "tick" == a.type && this.update(a)
        }, b.clear = function() {
            if (this.canvas) {
                var a = this.ctx;
                a.clearRect(0, 0, this.canvas.width + 1, this.canvas.height + 1)
            }
        }, b.toDataURL = function(a, b) {
            b || (b = "image/png");
            var c, d = this.canvas.getContext("2d"),
                e = this.canvas.width,
                f = this.canvas.height;
            if (a) {
                c = d.getImageData(0, 0, e, f);
                var g = d.globalCompositeOperation;
                d.globalCompositeOperation = "destination-over", d.fillStyle = a, d.fillRect(0, 0, e, f)
            }
            var h = this.canvas.toDataURL(b);
            return a && (d.clearRect(0, 0, e + 1, f + 1), d.putImageData(c, 0, 0), d.globalCompositeOperation = g), h
        }, b.enableMouseOver = function(a) {
            if (this._mouseOverIntervalID && (clearInterval(this._mouseOverIntervalID), this._mouseOverIntervalID = null), null == a) a = 20;
            else if (0 >= a) return;
            var b = this;
            this._mouseOverIntervalID = setInterval(function() {
                b._testMouseOver()
            }, 1e3 / Math.min(50, a))
        }, b.enableDOMEvents = function(a) {
            null == a && (a = !0);
            var b, c, d = this._eventListeners;
            if (!a && d) {
                for (b in d) c = d[b], c.t.removeEventListener(b, c.f);
                this._eventListeners = null
            } else if (a && !d && this.canvas) {
                var e = window.addEventListener ? window : document,
                    f = this;
                d = this._eventListeners = {}, d.mouseup = {
                    t: e,
                    f: function(a) {
                        f._handleMouseUp(a)
                    }
                }, d.mousemove = {
                    t: e,
                    f: function(a) {
                        f._handleMouseMove(a)
                    }
                }, d.dblclick = {
                    t: e,
                    f: function(a) {
                        f._handleDoubleClick(a)
                    }
                }, d.mousedown = {
                    t: this.canvas,
                    f: function(a) {
                        f._handleMouseDown(a)
                    }
                };
                for (b in d) c = d[b], c.t.addEventListener(b, c.f)
            }
        }, b.clone = function() {
            var b = new a(null);
            return this.cloneProps(b), b
        }, b.toString = function() {
            return "[Stage (name=" + this.name + ")]"
        }, b._getPointerData = function(a) {
            var b = this._pointerData[a];
            return b || (b = this._pointerData[a] = {
                x: 0,
                y: 0
            }, (null == this._primaryPointerID || -1 == this._primaryPointerID) && (this._primaryPointerID = a)), b
        }, b._handleMouseMove = function(a) {
            a || (a = window.event), this._handlePointerMove(-1, a, a.pageX, a.pageY)
        }, b._handlePointerMove = function(a, b, c, d) {
            if (this.canvas) {
                var e, f = this._getPointerData(a),
                    g = f.inBounds;
                if (this._updatePointerPosition(a, c, d), g || f.inBounds || this.mouseMoveOutside) {
                    (this.onMouseMove || this.hasEventListener("stagemousemove")) && (e = new createjs.MouseEvent("stagemousemove", f.x, f.y, this, b, a, a == this._primaryPointerID, f.rawX, f.rawY), this.onMouseMove && this.onMouseMove(e), this.dispatchEvent(e));
                    var h = f.event;
                    h && (h.onMouseMove || h.hasEventListener("mousemove")) && (e = new createjs.MouseEvent("mousemove", f.x, f.y, h.target, b, a, a == this._primaryPointerID, f.rawX, f.rawY), h.onMouseMove && h.onMouseMove(e), h.dispatchEvent(e, h.target))
                }
            }
        }, b._updatePointerPosition = function(a, b, c) {
            var d = this._getElementRect(this.canvas);
            b -= d.left, c -= d.top;
            var e = this.canvas.width,
                f = this.canvas.height;
            b /= (d.right - d.left) / e, c /= (d.bottom - d.top) / f;
            var g = this._getPointerData(a);
            (g.inBounds = b >= 0 && c >= 0 && e - 1 >= b && f - 1 >= c) ? (g.x = b, g.y = c) : this.mouseMoveOutside && (g.x = 0 > b ? 0 : b > e - 1 ? e - 1 : b, g.y = 0 > c ? 0 : c > f - 1 ? f - 1 : c), g.rawX = b, g.rawY = c, a == this._primaryPointerID && (this.mouseX = g.x, this.mouseY = g.y, this.mouseInBounds = g.inBounds)
        }, b._getElementRect = function(a) {
            var b;
            try {
                b = a.getBoundingClientRect()
            } catch (c) {
                b = {
                    top: a.offsetTop,
                    left: a.offsetLeft,
                    width: a.offsetWidth,
                    height: a.offsetHeight
                }
            }
            var d = (window.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || document.body.clientLeft || 0),
                e = (window.pageYOffset || document.scrollTop || 0) - (document.clientTop || document.body.clientTop || 0),
                f = window.getComputedStyle ? getComputedStyle(a) : a.currentStyle,
                g = parseInt(f.paddingLeft) + parseInt(f.borderLeftWidth),
                h = parseInt(f.paddingTop) + parseInt(f.borderTopWidth),
                i = parseInt(f.paddingRight) + parseInt(f.borderRightWidth),
                j = parseInt(f.paddingBottom) + parseInt(f.borderBottomWidth);
            return {
                left: b.left + d + g,
                right: b.right + d - i,
                top: b.top + e + h,
                bottom: b.bottom + e - j
            }
        }, b._handleMouseUp = function(a) {
            this._handlePointerUp(-1, a, !1)
        }, b._handlePointerUp = function(a, b, c) {
            var d, e = this._getPointerData(a);
            (this.onMouseMove || this.hasEventListener("stagemouseup")) && (d = new createjs.MouseEvent("stagemouseup", e.x, e.y, this, b, a, a == this._primaryPointerID, e.rawX, e.rawY), this.onMouseUp && this.onMouseUp(d), this.dispatchEvent(d));
            var f = e.event;
            f && (f.onMouseUp || f.hasEventListener("mouseup")) && (d = new createjs.MouseEvent("mouseup", e.x, e.y, f.target, b, a, a == this._primaryPointerID, e.rawX, e.rawY), f.onMouseUp && f.onMouseUp(d), f.dispatchEvent(d, f.target));
            var g = e.target;
            g && (g.onClick || g.hasEventListener("click")) && this._getObjectsUnderPoint(e.x, e.y, null, !0, this._mouseOverIntervalID ? 3 : 1) == g && (d = new createjs.MouseEvent("click", e.x, e.y, g, b, a, a == this._primaryPointerID, e.rawX, e.rawY), g.onClick && g.onClick(d), g.dispatchEvent(d)), c ? (a == this._primaryPointerID && (this._primaryPointerID = null), delete this._pointerData[a]) : e.event = e.target = null
        }, b._handleMouseDown = function(a) {
            this._handlePointerDown(-1, a, !1)
        }, b._handlePointerDown = function(a, b, c, d) {
            var e = this._getPointerData(a);
            if (null != d && this._updatePointerPosition(a, c, d), this.onMouseDown || this.hasEventListener("stagemousedown")) {
                var f = new createjs.MouseEvent("stagemousedown", e.x, e.y, this, b, a, a == this._primaryPointerID, e.rawX, e.rawY);
                this.onMouseDown && this.onMouseDown(f), this.dispatchEvent(f)
            }
            var g = this._getObjectsUnderPoint(e.x, e.y, null, this._mouseOverIntervalID ? 3 : 1);
            g && (e.target = g, (g.onPress || g.hasEventListener("mousedown")) && (f = new createjs.MouseEvent("mousedown", e.x, e.y, g, b, a, a == this._primaryPointerID, e.rawX, e.rawY), g.onPress && g.onPress(f), g.dispatchEvent(f), (f.onMouseMove || f.onMouseUp || f.hasEventListener("mousemove") || f.hasEventListener("mouseup")) && (e.event = f)))
        }, b._testMouseOver = function() {
            if (-1 == this._primaryPointerID && (this.mouseX != this._mouseOverX || this.mouseY != this._mouseOverY || !this.mouseInBounds)) {
                var a = null;
                this.mouseInBounds && (a = this._getObjectsUnderPoint(this.mouseX, this.mouseY, null, 3), this._mouseOverX = this.mouseX, this._mouseOverY = this.mouseY);
                var b = this._mouseOverTarget;
                if (b != a) {
                    var c = this._getPointerData(-1);
                    if (b && (b.onMouseOut || b.hasEventListener("mouseout"))) {
                        var d = new createjs.MouseEvent("mouseout", c.x, c.y, b, null, -1, c.rawX, c.rawY);
                        b.onMouseOut && b.onMouseOut(d), b.dispatchEvent(d)
                    }
                    b && (this.canvas.style.cursor = ""), a && (a.onMouseOver || a.hasEventListener("mouseover")) && (d = new createjs.MouseEvent("mouseover", c.x, c.y, a, null, -1, c.rawX, c.rawY), a.onMouseOver && a.onMouseOver(d), a.dispatchEvent(d)), a && (this.canvas.style.cursor = a.cursor || ""), this._mouseOverTarget = a
                }
            }
        }, b._handleDoubleClick = function(a) {
            var b = this._getPointerData(-1),
                c = this._getObjectsUnderPoint(b.x, b.y, null, this._mouseOverIntervalID ? 3 : 1);
            c && (c.onDoubleClick || c.hasEventListener("dblclick")) && (evt = new createjs.MouseEvent("dblclick", b.x, b.y, c, a, -1, !0, b.rawX, b.rawY), c.onDoubleClick && c.onDoubleClick(evt), c.dispatchEvent(evt))
        }, createjs.Stage = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a) {
                this.initialize(a)
            },
            b = a.prototype = new createjs.DisplayObject;
        b.image = null, b.snapToPixel = !0, b.sourceRect = null, b.DisplayObject_initialize = b.initialize, b.initialize = function(a) {
            this.DisplayObject_initialize(), "string" == typeof a ? (this.image = new Image, this.image.src = a) : this.image = a
        }, b.isVisible = function() {
            var a = this.cacheCanvas || this.image && (this.image.complete || this.image.getContext || this.image.readyState >= 2);
            return !!(this.visible && this.alpha > 0 && 0 != this.scaleX && 0 != this.scaleY && a)
        }, b.DisplayObject_draw = b.draw, b.draw = function(a, b) {
            if (this.DisplayObject_draw(a, b)) return !0;
            var c = this.sourceRect;
            return c ? a.drawImage(this.image, c.x, c.y, c.width, c.height, 0, 0, c.width, c.height) : a.drawImage(this.image, 0, 0), !0
        }, b.clone = function() {
            var b = new a(this.image);
            return this.sourceRect && (b.sourceRect = this.sourceRect.clone()), this.cloneProps(b), b
        }, b.toString = function() {
            return "[Bitmap (name=" + this.name + ")]"
        }, createjs.Bitmap = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a) {
                this.initialize(a)
            },
            b = a.prototype = new createjs.DisplayObject;
        b.onAnimationEnd = null, b.currentFrame = -1, b.currentAnimation = null, b.paused = !0, b.spriteSheet = null, b.snapToPixel = !0, b.offset = 0, b.currentAnimationFrame = 0, b.addEventListener = null, b.removeEventListener = null, b.removeAllEventListeners = null, b.dispatchEvent = null, b.hasEventListener = null, b._listeners = null, createjs.EventDispatcher.initialize(b), b._advanceCount = 0, b._animation = null, b.DisplayObject_initialize = b.initialize, b.initialize = function(a) {
            this.DisplayObject_initialize(), this.spriteSheet = a
        }, b.isVisible = function() {
            var a = this.cacheCanvas || this.spriteSheet.complete && this.currentFrame >= 0;
            return !!(this.visible && this.alpha > 0 && 0 != this.scaleX && 0 != this.scaleY && a)
        }, b.DisplayObject_draw = b.draw, b.draw = function(a, b) {
            if (this.DisplayObject_draw(a, b)) return !0;
            this._normalizeFrame();
            var c = this.spriteSheet.getFrame(this.currentFrame);
            if (c) {
                var d = c.rect;
                return a.drawImage(c.image, d.x, d.y, d.width, d.height, -c.regX, -c.regY, d.width, d.height), !0
            }
        }, b.play = function() {
            this.paused = !1
        }, b.stop = function() {
            this.paused = !0
        }, b.gotoAndPlay = function(a) {
            this.paused = !1, this._goto(a)
        }, b.gotoAndStop = function(a) {
            this.paused = !0, this._goto(a)
        }, b.advance = function() {
            this._animation ? this.currentAnimationFrame++ : this.currentFrame++, this._normalizeFrame()
        }, b.getBounds = function() {
            return this.spriteSheet.getFrameBounds(this.currentFrame)
        }, b.clone = function() {
            var b = new a(this.spriteSheet);
            return this.cloneProps(b), b
        }, b.toString = function() {
            return "[BitmapAnimation (name=" + this.name + ")]"
        }, b.DisplayObject__tick = b._tick, b._tick = function(a) {
            var b = this._animation ? this._animation.frequency : 1;
            this.paused || (++this._advanceCount + this.offset) % b != 0 || this.advance(), this.DisplayObject__tick(a)
        }, b._normalizeFrame = function() {
            var a, b = this._animation,
                c = this.currentFrame,
                d = this.paused;
            if (b)
                if (a = b.frames.length, this.currentAnimationFrame >= a) {
                    var e = b.next;
                    this._dispatchAnimationEnd(b, c, d, e, a - 1) || (e ? this._goto(e) : (this.paused = !0, this.currentAnimationFrame = b.frames.length - 1, this.currentFrame = b.frames[this.currentAnimationFrame]))
                } else this.currentFrame = b.frames[this.currentAnimationFrame];
            else a = this.spriteSheet.getNumFrames(), c >= a && (this._dispatchAnimationEnd(b, c, d, a - 1) || (this.currentFrame = 0))
        }, b._dispatchAnimationEnd = function(a, b, c, d, e) {
            var f = a ? a.name : null;
            return this.onAnimationEnd && this.onAnimationEnd(this, f, d), this.dispatchEvent({
                type: "animationend",
                name: f,
                next: d
            }), !c && this.paused && (this.currentAnimationFrame = e), this.paused != c || this._animation != a || this.currentFrame != b
        }, b.DisplayObject_cloneProps = b.cloneProps, b.cloneProps = function(a) {
            this.DisplayObject_cloneProps(a), a.onAnimationEnd = this.onAnimationEnd, a.currentFrame = this.currentFrame, a.currentAnimation = this.currentAnimation, a.paused = this.paused, a.offset = this.offset, a._animation = this._animation, a.currentAnimationFrame = this.currentAnimationFrame
        }, b._goto = function(a) {
            if (isNaN(a)) {
                var b = this.spriteSheet.getAnimation(a);
                b && (this.currentAnimationFrame = 0, this._animation = b, this.currentAnimation = a, this._normalizeFrame())
            } else this.currentAnimation = this._animation = null, this.currentFrame = a
        }, createjs.BitmapAnimation = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a) {
                this.initialize(a)
            },
            b = a.prototype = new createjs.DisplayObject;
        b.graphics = null, b.DisplayObject_initialize = b.initialize, b.initialize = function(a) {
            this.DisplayObject_initialize(), this.graphics = a ? a : new createjs.Graphics
        }, b.isVisible = function() {
            var a = this.cacheCanvas || this.graphics && !this.graphics.isEmpty();
            return !!(this.visible && this.alpha > 0 && 0 != this.scaleX && 0 != this.scaleY && a)
        }, b.DisplayObject_draw = b.draw, b.draw = function(a, b) {
            return this.DisplayObject_draw(a, b) ? !0 : (this.graphics.draw(a), !0)
        }, b.clone = function(b) {
            var c = new a(b && this.graphics ? this.graphics.clone() : this.graphics);
            return this.cloneProps(c), c
        }, b.toString = function() {
            return "[Shape (name=" + this.name + ")]"
        }, createjs.Shape = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a, b, c) {
                this.initialize(a, b, c)
            },
            b = a.prototype = new createjs.DisplayObject;
        a._workingContext = (createjs.createCanvas ? createjs.createCanvas() : document.createElement("canvas")).getContext("2d"), b.text = "", b.font = null, b.color = "#000", b.textAlign = "left", b.textBaseline = "top", b.maxWidth = null, b.outline = !1, b.lineHeight = 0, b.lineWidth = null, b.DisplayObject_initialize = b.initialize, b.initialize = function(a, b, c) {
            this.DisplayObject_initialize(), this.text = a, this.font = b, this.color = c ? c : "#000"
        }, b.isVisible = function() {
            var a = this.cacheCanvas || null != this.text && "" !== this.text;
            return !!(this.visible && this.alpha > 0 && 0 != this.scaleX && 0 != this.scaleY && a)
        }, b.DisplayObject_draw = b.draw, b.draw = function(a, b) {
            return this.DisplayObject_draw(a, b) ? !0 : (this.outline ? a.strokeStyle = this.color : a.fillStyle = this.color, a.font = this.font, a.textAlign = this.textAlign || "start", a.textBaseline = this.textBaseline || "alphabetic", this._drawText(a), !0)
        }, b.getMeasuredWidth = function() {
            return this._getWorkingContext().measureText(this.text).width
        }, b.getMeasuredLineHeight = function() {
            return 1.2 * this._getWorkingContext().measureText("M").width
        }, b.getMeasuredHeight = function() {
            return this._drawText() * (this.lineHeight || this.getMeasuredLineHeight())
        }, b.clone = function() {
            var b = new a(this.text, this.font, this.color);
            return this.cloneProps(b), b
        }, b.toString = function() {
            return "[Text (text=" + (this.text.length > 20 ? this.text.substr(0, 17) + "..." : this.text) + ")]"
        }, b.DisplayObject_cloneProps = b.cloneProps, b.cloneProps = function(a) {
            this.DisplayObject_cloneProps(a), a.textAlign = this.textAlign, a.textBaseline = this.textBaseline, a.maxWidth = this.maxWidth, a.outline = this.outline, a.lineHeight = this.lineHeight, a.lineWidth = this.lineWidth
        }, b._getWorkingContext = function() {
            var b = a._workingContext;
            return b.font = this.font, b.textAlign = this.textAlign || "start", b.textBaseline = this.textBaseline || "alphabetic", b
        }, b._drawText = function(a) {
            var b = !!a;
            b || (a = this._getWorkingContext());
            for (var c = String(this.text).split(/(?:\r\n|\r|\n)/), d = this.lineHeight || this.getMeasuredLineHeight(), e = 0, f = 0, g = c.length; g > f; f++) {
                var h = a.measureText(c[f]).width;
                if (null == this.lineWidth || h < this.lineWidth) b && this._drawTextLine(a, c[f], e * d), e++;
                else {
                    for (var i = c[f].split(/(\s)/), j = i[0], k = 1, l = i.length; l > k; k += 2) a.measureText(j + i[k] + i[k + 1]).width > this.lineWidth ? (b && this._drawTextLine(a, j, e * d), e++, j = i[k + 1]) : j += i[k] + i[k + 1];
                    b && this._drawTextLine(a, j, e * d), e++
                }
            }
            return e
        }, b._drawTextLine = function(a, b, c) {
            this.outline ? a.strokeText(b, 0, c, this.maxWidth || 65535) : a.fillText(b, 0, c, this.maxWidth || 65535)
        }, createjs.Text = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function() {
            throw "SpriteSheetUtils cannot be instantiated"
        };
        a._workingCanvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement("canvas"), a._workingContext = a._workingCanvas.getContext("2d"), a.addFlippedFrames = function(b, c, d, e) {
            if (c || d || e) {
                var f = 0;
                c && a._flip(b, ++f, !0, !1), d && a._flip(b, ++f, !1, !0), e && a._flip(b, ++f, !0, !0)
            }
        }, a.extractFrame = function(b, c) {
            isNaN(c) && (c = b.getAnimation(c).frames[0]);
            var d = b.getFrame(c);
            if (!d) return null;
            var e = d.rect,
                f = a._workingCanvas;
            f.width = e.width, f.height = e.height, a._workingContext.drawImage(d.image, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height);
            var g = new Image;
            return g.src = f.toDataURL("image/png"), g
        }, a.mergeAlpha = function(a, b, c) {
            c || (c = createjs.createCanvas ? createjs.createCanvas() : document.createElement("canvas")), c.width = Math.max(b.width, a.width), c.height = Math.max(b.height, a.height);
            var d = c.getContext("2d");
            return d.save(), d.drawImage(a, 0, 0), d.globalCompositeOperation = "destination-in", d.drawImage(b, 0, 0), d.restore(), c
        }, a._flip = function(b, c, d, e) {
            for (var f = b._images, g = a._workingCanvas, h = a._workingContext, i = f.length / c, j = 0; i > j; j++) {
                var k = f[j];
                k.__tmp = j, h.setTransform(1, 0, 0, 1, 0, 0), h.clearRect(0, 0, g.width + 1, g.height + 1), g.width = k.width, g.height = k.height, h.setTransform(d ? -1 : 1, 0, 0, e ? -1 : 1, d ? k.width : 0, e ? k.height : 0), h.drawImage(k, 0, 0);
                var l = new Image;
                l.src = g.toDataURL("image/png"), l.width = k.width, l.height = k.height, f.push(l)
            }
            var m = b._frames,
                n = m.length / c;
            for (j = 0; n > j; j++) {
                k = m[j];
                var o = k.rect.clone();
                l = f[k.image.__tmp + i * c];
                var p = {
                    image: l,
                    rect: o,
                    regX: k.regX,
                    regY: k.regY
                };
                d && (o.x = l.width - o.x - o.width, p.regX = o.width - k.regX), e && (o.y = l.height - o.y - o.height, p.regY = o.height - k.regY), m.push(p)
            }
            var q = "_" + (d ? "h" : "") + (e ? "v" : ""),
                r = b._animations,
                s = b._data,
                t = r.length / c;
            for (j = 0; t > j; j++) {
                var u = r[j];
                k = s[u];
                var v = {
                    name: u + q,
                    frequency: k.frequency,
                    next: k.next,
                    frames: []
                };
                k.next && (v.next += q), m = k.frames;
                for (var w = 0, x = m.length; x > w; w++) v.frames.push(m[w] + n * c);
                s[v.name] = v, r.push(v.name)
            }
        }, createjs.SpriteSheetUtils = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function() {
                this.initialize()
            },
            b = a.prototype;
        a.ERR_DIMENSIONS = "frame dimensions exceed max spritesheet dimensions", a.ERR_RUNNING = "a build is already running", b.maxWidth = 2048, b.maxHeight = 2048, b.spriteSheet = null, b.scale = 1, b.padding = 1, b.timeSlice = .3, b.progress = -1, b.onComplete = null, b.onProgress = null, b.addEventListener = null, b.removeEventListener = null, b.removeAllEventListeners = null, b.dispatchEvent = null, b.hasEventListener = null, b._listeners = null, createjs.EventDispatcher.initialize(b), b._frames = null, b._animations = null, b._data = null, b._nextFrameIndex = 0, b._index = 0, b._timerID = null, b._scale = 1, b.initialize = function() {
            this._frames = [], this._animations = {}
        }, b.addFrame = function(b, c, d, e, f, g) {
            if (this._data) throw a.ERR_RUNNING;
            var h = c || b.bounds || b.nominalBounds;
            return !h && b.getBounds && (h = b.getBounds()), h ? (d = d || 1, this._frames.push({
                source: b,
                sourceRect: h,
                scale: d,
                funct: e,
                params: f,
                scope: g,
                index: this._frames.length,
                height: h.height * d
            }) - 1) : null
        }, b.addAnimation = function(b, c, d, e) {
            if (this._data) throw a.ERR_RUNNING;
            this._animations[b] = {
                frames: c,
                next: d,
                frequency: e
            }
        }, b.addMovieClip = function(b, c, d) {
            if (this._data) throw a.ERR_RUNNING;
            var e = b.frameBounds,
                f = c || b.bounds || b.nominalBounds;
            if (!f && b.getBounds && (f = b.getBounds()), !f && !e) return null;
            for (var g = this._frames.length, h = b.timeline.duration, i = 0; h > i; i++) {
                var j = e && e[i] ? e[i] : f;
                this.addFrame(b, j, d, function(a) {
                    var b = this.actionsEnabled;
                    this.actionsEnabled = !1, this.gotoAndStop(a), this.actionsEnabled = b
                }, [i], b)
            }
            var k = b.timeline._labels,
                l = [];
            for (var m in k) l.push({
                index: k[m],
                label: m
            });
            if (l.length) {
                l.sort(function(a, b) {
                    return a.index - b.index
                });
                for (var i = 0, n = l.length; n > i; i++) {
                    for (var o = l[i].label, p = g + l[i].index, q = g + (i == n - 1 ? h : l[i + 1].index), r = [], s = p; q > s; s++) r.push(s);
                    this.addAnimation(o, r, !0)
                }
            }
        }, b.build = function() {
            if (this._data) throw a.ERR_RUNNING;
            for (this._startBuild(); this._drawNext(););
            return this._endBuild(), this.spriteSheet
        }, b.buildAsync = function(b) {
            if (this._data) throw a.ERR_RUNNING;
            this.timeSlice = b, this._startBuild();
            var c = this;
            this._timerID = setTimeout(function() {
                c._run()
            }, 50 - 50 * Math.max(.01, Math.min(.99, this.timeSlice || .3)))
        }, b.stopAsync = function() {
            clearTimeout(this._timerID), this._data = null
        }, b.clone = function() {
            throw "SpriteSheetBuilder cannot be cloned."
        }, b.toString = function() {
            return "[SpriteSheetBuilder]"
        }, b._startBuild = function() {
            var b = this.padding || 0;
            this.progress = 0, this.spriteSheet = null, this._index = 0, this._scale = this.scale;
            var c = [];
            this._data = {
                images: [],
                frames: c,
                animations: this._animations
            };
            var d = this._frames.slice();
            if (d.sort(function(a, b) {
                    return a.height <= b.height ? -1 : 1
                }), d[d.length - 1].height + 2 * b > this.maxHeight) throw a.ERR_DIMENSIONS;
            for (var e = 0, f = 0, g = 0; d.length;) {
                var h = this._fillRow(d, e, g, c, b);
                if (h.w > f && (f = h.w), e += h.h, !h.h || !d.length) {
                    var i = createjs.createCanvas ? createjs.createCanvas() : document.createElement("canvas");
                    i.width = this._getSize(f, this.maxWidth), i.height = this._getSize(e, this.maxHeight), this._data.images[g] = i, h.h || (f = e = 0, g++)
                }
            }
        }, b._getSize = function(a, b) {
            for (var c = 4; Math.pow(2, ++c) < a;);
            return Math.min(b, Math.pow(2, c))
        }, b._fillRow = function(b, c, d, e, f) {
            var g = this.maxWidth,
                h = this.maxHeight;
            c += f;
            for (var i = h - c, j = f, k = 0, l = b.length - 1; l >= 0; l--) {
                var m = b[l],
                    n = this._scale * m.scale,
                    o = m.sourceRect,
                    p = m.source,
                    q = Math.floor(n * o.x - f),
                    r = Math.floor(n * o.y - f),
                    s = Math.ceil(n * o.height + 2 * f),
                    t = Math.ceil(n * o.width + 2 * f);
                if (t > g) throw a.ERR_DIMENSIONS;
                s > i || j + t > g || (m.img = d, m.rect = new createjs.Rectangle(j, c, t, s), k = k || s, b.splice(l, 1), e[m.index] = [j, c, t, s, d, Math.round(-q + n * p.regX - f), Math.round(-r + n * p.regY - f)], j += t)
            }
            return {
                w: j,
                h: k
            }
        }, b._endBuild = function() {
            this.spriteSheet = new createjs.SpriteSheet(this._data), this._data = null, this.progress = 1, this.onComplete && this.onComplete(this), this.dispatchEvent("complete")
        }, b._run = function() {
            for (var a = 50 * Math.max(.01, Math.min(.99, this.timeSlice || .3)), b = (new Date).getTime() + a, c = !1; b > (new Date).getTime();)
                if (!this._drawNext()) {
                    c = !0;
                    break
                }
            if (c) this._endBuild();
            else {
                var d = this;
                this._timerID = setTimeout(function() {
                    d._run()
                }, 50 - a)
            }
            var e = this.progress = this._index / this._frames.length;
            this.onProgress && this.onProgress(this, e), this.dispatchEvent({
                type: "progress",
                progress: e
            })
        }, b._drawNext = function() {
            var a = this._frames[this._index],
                b = a.scale * this._scale,
                c = a.rect,
                d = a.sourceRect,
                e = this._data.images[a.img],
                f = e.getContext("2d");
            return a.funct && a.funct.apply(a.scope, a.params), f.save(), f.beginPath(), f.rect(c.x, c.y, c.width, c.height), f.clip(), f.translate(Math.ceil(c.x - d.x * b), Math.ceil(c.y - d.y * b)), f.scale(b, b), a.source.draw(f), f.restore(), ++this._index < this._frames.length
        }, createjs.SpriteSheetBuilder = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a) {
                this.initialize(a)
            },
            b = a.prototype = new createjs.DisplayObject;
        b.htmlElement = null, b._oldMtx = null, b.DisplayObject_initialize = b.initialize, b.initialize = function(a) {
            "string" == typeof a && (a = document.getElementById(a)), this.DisplayObject_initialize(), this.mouseEnabled = !1, this.htmlElement = a;
            var b = a.style;
            b.position = "absolute", b.transformOrigin = b.WebkitTransformOrigin = b.msTransformOrigin = b.MozTransformOrigin = b.OTransformOrigin = "0% 0%"
        }, b.isVisible = function() {
            return null != this.htmlElement
        }, b.draw = function() {
            if (null != this.htmlElement) {
                var a = this.getConcatenatedMatrix(this._matrix),
                    b = this.htmlElement,
                    c = b.style;
                if (!this.visible) return !0;
                c.visibility = "visible";
                var d = this._oldMtx || {};
                return d.alpha != a.alpha && (c.opacity = "" + a.alpha, d.alpha = a.alpha), (d.tx != a.tx || d.ty != a.ty || d.a != a.a || d.b != a.b || d.c != a.c || d.d != a.d) && (c.transform = c.WebkitTransform = c.OTransform = c.msTransform = ["matrix(" + a.a, a.b, a.c, a.d, a.tx + .5 | 0, (a.ty + .5 | 0) + ")"].join(","), c.MozTransform = ["matrix(" + a.a, a.b, a.c, a.d, (a.tx + .5 | 0) + "px", (a.ty + .5 | 0) + "px)"].join(","), this._oldMtx = a.clone()), !0
            }
        }, b.cache = function() {}, b.uncache = function() {}, b.updateCache = function() {}, b.hitTest = function() {}, b.localToGlobal = function() {}, b.globalToLocal = function() {}, b.localToLocal = function() {}, b.clone = function() {
            throw "DOMElement cannot be cloned."
        }, b.toString = function() {
            return "[DOMElement (name=" + this.name + ")]"
        }, b.DisplayObject__tick = b._tick, b._tick = function(a) {
            this.htmlElement.style.visibility = "hidden", this.DisplayObject__tick(a)
        }, createjs.DOMElement = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function() {
            throw "Touch cannot be instantiated"
        };
        a.isSupported = function() {
            return "ontouchstart" in window || window.navigator.msPointerEnabled
        }, a.enable = function(b, c, d) {
            return b && b.canvas && a.isSupported() ? (b.__touch = {
                pointers: {},
                multitouch: !c,
                preventDefault: !d,
                count: 0
            }, "ontouchstart" in window ? a._IOS_enable(b) : window.navigator.msPointerEnabled && a._IE_enable(b), !0) : !1
        }, a.disable = function(b) {
            b && ("ontouchstart" in window ? a._IOS_disable(b) : window.navigator.msPointerEnabled && a._IE_disable(b))
        }, a._IOS_enable = function(b) {
            var c = b.canvas,
                d = b.__touch.f = function(c) {
                    a._IOS_handleEvent(b, c)
                };
            c.addEventListener("touchstart", d, !1), c.addEventListener("touchmove", d, !1), c.addEventListener("touchend", d, !1), c.addEventListener("touchcancel", d, !1)
        }, a._IOS_disable = function(a) {
            var b = a.canvas;
            if (b) {
                var c = a.__touch.f;
                b.removeEventListener("touchstart", c, !1), b.removeEventListener("touchmove", c, !1), b.removeEventListener("touchend", c, !1), b.removeEventListener("touchcancel", c, !1)
            }
        }, a._IOS_handleEvent = function(a, b) {
            if (a) {
                a.__touch.preventDefault && b.preventDefault && b.preventDefault();
                for (var c = b.changedTouches, d = b.type, e = 0, f = c.length; f > e; e++) {
                    var g = c[e],
                        h = g.identifier;
                    g.target == a.canvas && ("touchstart" == d ? this._handleStart(a, h, b, g.pageX, g.pageY) : "touchmove" == d ? this._handleMove(a, h, b, g.pageX, g.pageY) : ("touchend" == d || "touchcancel" == d) && this._handleEnd(a, h, b))
                }
            }
        }, a._IE_enable = function(b) {
            var c = b.canvas,
                d = b.__touch.f = function(c) {
                    a._IE_handleEvent(b, c)
                };
            c.addEventListener("MSPointerDown", d, !1), window.addEventListener("MSPointerMove", d, !1), window.addEventListener("MSPointerUp", d, !1), window.addEventListener("MSPointerCancel", d, !1), b.__touch.preventDefault && (c.style.msTouchAction = "none"), b.__touch.activeIDs = {}
        }, a._IE_disable = function(a) {
            var b = a.__touch.f;
            window.removeEventListener("MSPointerMove", b, !1), window.removeEventListener("MSPointerUp", b, !1), window.removeEventListener("MSPointerCancel", b, !1), a.canvas && a.canvas.removeEventListener("MSPointerDown", b, !1)
        }, a._IE_handleEvent = function(a, b) {
            if (a) {
                a.__touch.preventDefault && b.preventDefault && b.preventDefault();
                var c = b.type,
                    d = b.pointerId,
                    e = a.__touch.activeIDs;
                if ("MSPointerDown" == c) {
                    if (b.srcElement != a.canvas) return;
                    e[d] = !0, this._handleStart(a, d, b, b.pageX, b.pageY)
                } else e[d] && ("MSPointerMove" == c ? this._handleMove(a, d, b, b.pageX, b.pageY) : ("MSPointerUp" == c || "MSPointerCancel" == c) && (delete e[d], this._handleEnd(a, d, b)))
            }
        }, a._handleStart = function(a, b, c, d, e) {
            var f = a.__touch;
            if (f.multitouch || !f.count) {
                var g = f.pointers;
                g[b] || (g[b] = !0, f.count++, a._handlePointerDown(b, c, d, e))
            }
        }, a._handleMove = function(a, b, c, d, e) {
            a.__touch.pointers[b] && a._handlePointerMove(b, c, d, e)
        }, a._handleEnd = function(a, b, c) {
            var d = a.__touch,
                e = d.pointers;
            e[b] && (d.count--, a._handlePointerUp(b, c, !0), delete e[b])
        }, createjs.Touch = a
    }(),
    function() {
        var a = this.createjs = this.createjs || {};
        a = a.EaselJS = a.EaselJS || {}, a.version = "0.6.1", a.buildDate = "Thu, 16 May 2013 16:05:45 GMT"
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function() {
                this.initialize()
            },
            b = a.prototype;
        a.initialize = function(a) {
            a.addEventListener = b.addEventListener, a.removeEventListener = b.removeEventListener, a.removeAllEventListeners = b.removeAllEventListeners, a.hasEventListener = b.hasEventListener, a.dispatchEvent = b.dispatchEvent
        }, b._listeners = null, b.initialize = function() {}, b.addEventListener = function(a, b) {
            var c = this._listeners;
            c ? this.removeEventListener(a, b) : c = this._listeners = {};
            var d = c[a];
            return d || (d = c[a] = []), d.push(b), b
        }, b.removeEventListener = function(a, b) {
            var c = this._listeners;
            if (c) {
                var d = c[a];
                if (d)
                    for (var e = 0, f = d.length; f > e; e++)
                        if (d[e] == b) {
                            1 == f ? delete c[a] : d.splice(e, 1);
                            break
                        }
            }
        }, b.removeAllEventListeners = function(a) {
            a ? this._listeners && delete this._listeners[a] : this._listeners = null
        }, b.dispatchEvent = function(a, b) {
            var c = !1,
                d = this._listeners;
            if (a && d) {
                if ("string" == typeof a && (a = {
                        type: a
                    }), d = d[a.type], !d) return c;
                a.target = b || this;
                for (var d = d.slice(), e = 0, f = d.length; f > e; e++) var g = d[e],
                    c = g.handleEvent ? c || g.handleEvent(a) : c || g(a)
            }
            return !!c
        }, b.hasEventListener = function(a) {
            var b = this._listeners;
            return !(!b || !b[a])
        }, b.toString = function() {
            return "[EventDispatcher]"
        }, createjs.EventDispatcher = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a, b, c) {
                this.initialize(a, b, c)
            },
            b = a.prototype;
        a.NONE = 0, a.LOOP = 1, a.REVERSE = 2, a.IGNORE = {}, a._tweens = [], a._plugins = {}, a.get = function(b, c, d, e) {
            return e && a.removeTweens(b), new a(b, c, d)
        }, a.tick = function(b, c) {
            for (var d = a._tweens.slice(), e = d.length - 1; e >= 0; e--) {
                var f = d[e];
                c && !f.ignoreGlobalPause || f._paused || f.tick(f._useTicks ? 1 : b)
            }
        }, createjs.Ticker && createjs.Ticker.addListener(a, !1), a.removeTweens = function(b) {
            if (b.tweenjs_count) {
                for (var c = a._tweens, d = c.length - 1; d >= 0; d--) c[d]._target == b && (c[d]._paused = !0, c.splice(d, 1));
                b.tweenjs_count = 0
            }
        }, a.removeAllTweens = function() {
            for (var b = a._tweens, c = 0, d = b.length; d > c; c++) {
                var e = b[c];
                e.paused = !0, e.target.tweenjs_count = 0
            }
            b.length = 0
        }, a.hasActiveTweens = function(b) {
            return b ? b.tweenjs_count : a._tweens && a._tweens.length
        }, a.installPlugin = function(b, c) {
            var d = b.priority;
            null == d && (b.priority = d = 0);
            for (var e = 0, f = c.length, g = a._plugins; f > e; e++) {
                var h = c[e];
                if (g[h]) {
                    for (var i = g[h], j = 0, k = i.length; k > j && !(d < i[j].priority); j++);
                    g[h].splice(j, 0, b)
                } else g[h] = [b]
            }
        }, a._register = function(b, c) {
            var d = b._target;
            c ? (d && (d.tweenjs_count = d.tweenjs_count ? d.tweenjs_count + 1 : 1),
                a._tweens.push(b)) : (d && d.tweenjs_count--, d = a._tweens.indexOf(b), -1 != d && a._tweens.splice(d, 1))
        }, b.addEventListener = null, b.removeEventListener = null, b.removeAllEventListeners = null, b.dispatchEvent = null, b.hasEventListener = null, b._listeners = null, createjs.EventDispatcher.initialize(b), b.ignoreGlobalPause = !1, b.loop = !1, b.duration = 0, b.pluginData = null, b.onChange = null, b.change = null, b.target = null, b.position = null, b._paused = !1, b._curQueueProps = null, b._initQueueProps = null, b._steps = null, b._actions = null, b._prevPosition = 0, b._stepPosition = 0, b._prevPos = -1, b._target = null, b._useTicks = !1, b.initialize = function(b, c, d) {
            this.target = this._target = b, c && (this._useTicks = c.useTicks, this.ignoreGlobalPause = c.ignoreGlobalPause, this.loop = c.loop, this.onChange = c.onChange, c.override && a.removeTweens(b)), this.pluginData = d || {}, this._curQueueProps = {}, this._initQueueProps = {}, this._steps = [], this._actions = [], c && c.paused ? this._paused = !0 : a._register(this, !0), c && null != c.position && this.setPosition(c.position, a.NONE)
        }, b.wait = function(a) {
            if (null == a || 0 >= a) return this;
            var b = this._cloneProps(this._curQueueProps);
            return this._addStep({
                d: a,
                p0: b,
                e: this._linearEase,
                p1: b
            })
        }, b.to = function(a, b, c) {
            return (isNaN(b) || 0 > b) && (b = 0), this._addStep({
                d: b || 0,
                p0: this._cloneProps(this._curQueueProps),
                e: c,
                p1: this._cloneProps(this._appendQueueProps(a))
            })
        }, b.call = function(a, b, c) {
            return this._addAction({
                f: a,
                p: b ? b : [this],
                o: c ? c : this._target
            })
        }, b.set = function(a, b) {
            return this._addAction({
                f: this._set,
                o: this,
                p: [a, b ? b : this._target]
            })
        }, b.play = function(a) {
            return this.call(a.setPaused, [!1], a)
        }, b.pause = function(a) {
            return a || (a = this), this.call(a.setPaused, [!0], a)
        }, b.setPosition = function(a, b) {
            0 > a && (a = 0), null == b && (b = 1);
            var c = a,
                d = !1;
            if (c >= this.duration && (this.loop ? c %= this.duration : (c = this.duration, d = !0)), c == this._prevPos) return d;
            var e = this._prevPos;
            if (this.position = this._prevPos = c, this._prevPosition = a, this._target)
                if (d) this._updateTargetProps(null, 1);
                else if (0 < this._steps.length) {
                for (var f = 0, g = this._steps.length; g > f && !(this._steps[f].t > c); f++);
                f = this._steps[f - 1], this._updateTargetProps(f, (this._stepPosition = c - f.t) / f.d)
            }
            return 0 != b && 0 < this._actions.length && (this._useTicks ? this._runActions(c, c) : 1 == b && e > c ? (e != this.duration && this._runActions(e, this.duration), this._runActions(0, c, !0)) : this._runActions(e, c)), d && this.setPaused(!0), this.onChange && this.onChange(this), this.dispatchEvent("change"), d
        }, b.tick = function(a) {
            this._paused || this.setPosition(this._prevPosition + a)
        }, b.setPaused = function(b) {
            return this._paused = !!b, a._register(this, !b), this
        }, b.w = b.wait, b.t = b.to, b.c = b.call, b.s = b.set, b.toString = function() {
            return "[Tween]"
        }, b.clone = function() {
            throw "Tween can not be cloned."
        }, b._updateTargetProps = function(b, c) {
            var d, e, f, g;
            b || 1 != c ? (b.e && (c = b.e(c, 0, 1, 1)), d = b.p0, e = b.p1) : d = e = this._curQueueProps;
            for (n in this._initQueueProps) {
                null == (f = d[n]) && (d[n] = f = this._initQueueProps[n]), null == (g = e[n]) && (e[n] = g = f), f = f == g || 0 == c || 1 == c || "number" != typeof f ? 1 == c ? g : f : f + (g - f) * c;
                var h = !1;
                if (g = a._plugins[n])
                    for (var i = 0, j = g.length; j > i; i++) {
                        var k = g[i].tween(this, n, f, d, e, c, !!b && d == e, !b);
                        k == a.IGNORE ? h = !0 : f = k
                    }
                h || (this._target[n] = f)
            }
        }, b._runActions = function(a, b, c) {
            var d = a,
                e = b,
                f = -1,
                g = this._actions.length,
                h = 1;
            for (a > b && (d = b, e = a, f = g, g = h = -1);
                (f += h) != g;) {
                b = this._actions[f];
                var i = b.t;
                (i == e || i > d && e > i || c && i == a) && b.f.apply(b.o, b.p)
            }
        }, b._appendQueueProps = function(b) {
            var c, d, e, f, g, h;
            for (h in b) {
                if (void 0 === this._initQueueProps[h]) {
                    if (d = this._target[h], c = a._plugins[h])
                        for (e = 0, f = c.length; f > e; e++) d = c[e].init(this, h, d);
                    this._initQueueProps[h] = void 0 === d ? null : d
                } else d = this._curQueueProps[h];
                if (c = a._plugins[h])
                    for (g = g || {}, e = 0, f = c.length; f > e; e++) c[e].step && c[e].step(this, h, d, b[h], g);
                this._curQueueProps[h] = b[h]
            }
            return g && this._appendQueueProps(g), this._curQueueProps
        }, b._cloneProps = function(a) {
            var b, c = {};
            for (b in a) c[b] = a[b];
            return c
        }, b._addStep = function(a) {
            return 0 < a.d && (this._steps.push(a), a.t = this.duration, this.duration += a.d), this
        }, b._addAction = function(a) {
            return a.t = this.duration, this._actions.push(a), this
        }, b._set = function(a, b) {
            for (var c in a) b[c] = a[c]
        }, createjs.Tween = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function(a, b, c) {
                this.initialize(a, b, c)
            },
            b = a.prototype;
        b.ignoreGlobalPause = !1, b.duration = 0, b.loop = !1, b.onChange = null, b.position = null, b._paused = !1, b._tweens = null, b._labels = null, b._prevPosition = 0, b._prevPos = -1, b._useTicks = !1, b.initialize = function(a, b, c) {
            this._tweens = [], c && (this._useTicks = c.useTicks, this.loop = c.loop, this.ignoreGlobalPause = c.ignoreGlobalPause, this.onChange = c.onChange), a && this.addTween.apply(this, a), this.setLabels(b), c && c.paused ? this._paused = !0 : createjs.Tween._register(this, !0), c && null != c.position && this.setPosition(c.position, createjs.Tween.NONE)
        }, b.addTween = function(a) {
            var b = arguments.length;
            if (b > 1) {
                for (var c = 0; b > c; c++) this.addTween(arguments[c]);
                return arguments[0]
            }
            return 0 == b ? null : (this.removeTween(a), this._tweens.push(a), a.setPaused(!0), a._paused = !1, a._useTicks = this._useTicks, a.duration > this.duration && (this.duration = a.duration), 0 <= this._prevPos && a.setPosition(this._prevPos, createjs.Tween.NONE), a)
        }, b.removeTween = function(a) {
            var b = arguments.length;
            if (b > 1) {
                for (var c = !0, d = 0; b > d; d++) c = c && this.removeTween(arguments[d]);
                return c
            }
            return 0 == b ? !1 : (b = this._tweens.indexOf(a), -1 != b ? (this._tweens.splice(b, 1), a.duration >= this.duration && this.updateDuration(), !0) : !1)
        }, b.addLabel = function(a, b) {
            this._labels[a] = b
        }, b.setLabels = function(a) {
            this._labels = a ? a : {}
        }, b.gotoAndPlay = function(a) {
            this.setPaused(!1), this._goto(a)
        }, b.gotoAndStop = function(a) {
            this.setPaused(!0), this._goto(a)
        }, b.setPosition = function(a, b) {
            0 > a && (a = 0);
            var c = this.loop ? a % this.duration : a,
                d = !this.loop && a >= this.duration;
            if (c == this._prevPos) return d;
            this._prevPosition = a, this.position = this._prevPos = c;
            for (var e = 0, f = this._tweens.length; f > e; e++)
                if (this._tweens[e].setPosition(c, b), c != this._prevPos) return !1;
            return d && this.setPaused(!0), this.onChange && this.onChange(this), d
        }, b.setPaused = function(a) {
            this._paused = !!a, createjs.Tween._register(this, !a)
        }, b.updateDuration = function() {
            for (var a = this.duration = 0, b = this._tweens.length; b > a; a++) {
                var c = this._tweens[a];
                c.duration > this.duration && (this.duration = c.duration)
            }
        }, b.tick = function(a) {
            this.setPosition(this._prevPosition + a)
        }, b.resolve = function(a) {
            var b = parseFloat(a);
            return isNaN(b) && (b = this._labels[a]), b
        }, b.toString = function() {
            return "[Timeline]"
        }, b.clone = function() {
            throw "Timeline can not be cloned."
        }, b._goto = function(a) {
            a = this.resolve(a), null != a && this.setPosition(a)
        }, createjs.Timeline = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function() {
            throw "Ease cannot be instantiated."
        };
        a.linear = function(a) {
            return a
        }, a.none = a.linear, a.get = function(a) {
            return -1 > a && (a = -1), a > 1 && (a = 1),
                function(b) {
                    return 0 == a ? b : 0 > a ? b * (b * -a + 1 + a) : b * ((2 - b) * a + (1 - a))
                }
        }, a.getPowIn = function(a) {
            return function(b) {
                return Math.pow(b, a)
            }
        }, a.getPowOut = function(a) {
            return function(b) {
                return 1 - Math.pow(1 - b, a)
            }
        }, a.getPowInOut = function(a) {
            return function(b) {
                return 1 > (b *= 2) ? .5 * Math.pow(b, a) : 1 - .5 * Math.abs(Math.pow(2 - b, a))
            }
        }, a.quadIn = a.getPowIn(2), a.quadOut = a.getPowOut(2), a.quadInOut = a.getPowInOut(2), a.cubicIn = a.getPowIn(3), a.cubicOut = a.getPowOut(3), a.cubicInOut = a.getPowInOut(3), a.quartIn = a.getPowIn(4), a.quartOut = a.getPowOut(4), a.quartInOut = a.getPowInOut(4), a.quintIn = a.getPowIn(5), a.quintOut = a.getPowOut(5), a.quintInOut = a.getPowInOut(5), a.sineIn = function(a) {
            return 1 - Math.cos(a * Math.PI / 2)
        }, a.sineOut = function(a) {
            return Math.sin(a * Math.PI / 2)
        }, a.sineInOut = function(a) {
            return -.5 * (Math.cos(Math.PI * a) - 1)
        }, a.getBackIn = function(a) {
            return function(b) {
                return b * b * ((a + 1) * b - a)
            }
        }, a.backIn = a.getBackIn(1.7), a.getBackOut = function(a) {
            return function(b) {
                return --b * b * ((a + 1) * b + a) + 1
            }
        }, a.backOut = a.getBackOut(1.7), a.getBackInOut = function(a) {
            return a *= 1.525,
                function(b) {
                    return 1 > (b *= 2) ? .5 * b * b * ((a + 1) * b - a) : .5 * ((b -= 2) * b * ((a + 1) * b + a) + 2)
                }
        }, a.backInOut = a.getBackInOut(1.7), a.circIn = function(a) {
            return -(Math.sqrt(1 - a * a) - 1)
        }, a.circOut = function(a) {
            return Math.sqrt(1 - --a * a)
        }, a.circInOut = function(a) {
            return 1 > (a *= 2) ? -.5 * (Math.sqrt(1 - a * a) - 1) : .5 * (Math.sqrt(1 - (a -= 2) * a) + 1)
        }, a.bounceIn = function(b) {
            return 1 - a.bounceOut(1 - b)
        }, a.bounceOut = function(a) {
            return 1 / 2.75 > a ? 7.5625 * a * a : 2 / 2.75 > a ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : 2.5 / 2.75 > a ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375
        }, a.bounceInOut = function(b) {
            return .5 > b ? .5 * a.bounceIn(2 * b) : .5 * a.bounceOut(2 * b - 1) + .5
        }, a.getElasticIn = function(a, b) {
            var c = 2 * Math.PI;
            return function(d) {
                if (0 == d || 1 == d) return d;
                var e = b / c * Math.asin(1 / a);
                return -(a * Math.pow(2, 10 * (d -= 1)) * Math.sin((d - e) * c / b))
            }
        }, a.elasticIn = a.getElasticIn(1, .3), a.getElasticOut = function(a, b) {
            var c = 2 * Math.PI;
            return function(d) {
                if (0 == d || 1 == d) return d;
                var e = b / c * Math.asin(1 / a);
                return a * Math.pow(2, -10 * d) * Math.sin((d - e) * c / b) + 1
            }
        }, a.elasticOut = a.getElasticOut(1, .3), a.getElasticInOut = function(a, b) {
            var c = 2 * Math.PI;
            return function(d) {
                var e = b / c * Math.asin(1 / a);
                return 1 > (d *= 2) ? -.5 * a * Math.pow(2, 10 * (d -= 1)) * Math.sin((d - e) * c / b) : .5 * a * Math.pow(2, -10 * (d -= 1)) * Math.sin((d - e) * c / b) + 1
            }
        }, a.elasticInOut = a.getElasticInOut(1, .3 * 1.5), createjs.Ease = a
    }(), this.createjs = this.createjs || {},
    function() {
        var a = function() {
            throw "MotionGuidePlugin cannot be instantiated."
        };
        a.priority = 0, a.install = function() {
            return createjs.Tween.installPlugin(a, ["guide", "x", "y", "rotation"]), createjs.Tween.IGNORE
        }, a.init = function(a, b, c) {
            return a = a.target, a.hasOwnProperty("x") || (a.x = 0), a.hasOwnProperty("y") || (a.y = 0), a.hasOwnProperty("rotation") || (a.rotation = 0), "guide" == b ? null : c
        }, a.step = function(b, c, d, e, f) {
            if ("guide" != c) return e;
            var g;
            if (e.hasOwnProperty("path") || (e.path = []), b = e.path, e.hasOwnProperty("end") || (e.end = 1), e.hasOwnProperty("start") || (e.start = d && d.hasOwnProperty("end") && d.path === b ? d.end : 0), e.hasOwnProperty("_segments") && e._length) return e;
            if (d = b.length, !(d >= 6 && 0 == (d - 2) % 4)) throw "invalid 'path' data, please see documentation for valid paths";
            for (e._segments = [], e._length = 0, c = 2; d > c; c += 4) {
                for (var h, i, j = b[c - 2], k = b[c - 1], l = b[c + 0], m = b[c + 1], n = b[c + 2], o = b[c + 3], p = j, q = k, r = 0, s = [], t = 1; 10 >= t; t++) {
                    i = t / 10;
                    var u = 1 - i;
                    h = u * u * j + 2 * u * i * l + i * i * n, i = u * u * k + 2 * u * i * m + i * i * o, r += s[s.push(Math.sqrt((g = h - p) * g + (g = i - q) * g)) - 1], p = h, q = i
                }
                e._segments.push(r), e._segments.push(s), e._length += r
            }
            return g = e.orient, e.orient = !1, a.calc(e, e.end, f), e.orient = g, e
        }, a.tween = function(b, c, d, e, f, g, h) {
            return f = f.guide, void 0 == f || f === e.guide ? d : (f.lastRatio != g && (a.calc(f, (f.end - f.start) * (h ? f.end : g) + f.start, b.target), f.orient && (b.target.rotation += e.rotation || 0), f.lastRatio = g), f.orient || "rotation" != c ? b.target[c] : d)
        }, a.calc = function(b, c, d) {
            void 0 == b._segments && a.validate(b), void 0 == d && (d = {
                x: 0,
                y: 0,
                rotation: 0
            });
            var e = b._segments,
                f = b.path,
                g = b._length * c,
                h = e.length - 2;
            for (c = 0; g > e[c] && h > c;) g -= e[c], c += 2;
            for (var e = e[c + 1], i = 0, h = e.length - 1; g > e[i] && h > i;) g -= e[i], i++;
            return g = i / ++h + g / (h * e[i]), c = 2 * c + 2, h = 1 - g, d.x = h * h * f[c - 2] + 2 * h * g * f[c + 0] + g * g * f[c + 2], d.y = h * h * f[c - 1] + 2 * h * g * f[c + 1] + g * g * f[c + 3], b.orient && (d.rotation = 57.2957795 * Math.atan2((f[c + 1] - f[c - 1]) * h + (f[c + 3] - f[c + 1]) * g, (f[c + 0] - f[c - 2]) * h + (f[c + 2] - f[c + 0]) * g)), d
        }, createjs.MotionGuidePlugin = a
    }(),
    function() {
        var a = this.createjs = this.createjs || {},
            a = a.TweenJS = a.TweenJS || {};
        a.version = "0.4.0", a.buildDate = "Tue, 12 Feb 2013 21:08:16 GMT"
    }();
var Box2D = {};
! function(a, b) {
    function c() {}!(Object.prototype.defineProperty instanceof Function) && Object.prototype.__defineGetter__ instanceof Function && Object.prototype.__defineSetter__ instanceof Function && (Object.defineProperty = function(a, b, c) {
        c.get instanceof Function && a.__defineGetter__(b, c.get), c.set instanceof Function && a.__defineSetter__(b, c.set)
    }), a.inherit = function(a, b) {
        var d = a;
        c.prototype = b.prototype, a.prototype = new c, a.prototype.constructor = d
    }, a.generateCallback = function(a, b) {
        return function() {
            b.apply(a, arguments)
        }
    }, a.NVector = function(a) {
        switch (a) {
            case 3:
                return [0, 0, 0];
            case 0:
                return [];
            case 2:
                return [0, 0];
            case 1:
                return [0]
        }
    }, a.is = function(a, c) {
        return null === a ? !1 : c instanceof Function && a instanceof c ? !0 : a.constructor.__implements != b && a.constructor.__implements[c] ? !0 : !1
    }, a.parseUInt = function(a) {
        var b = a >> 31;
        return (a ^ b) - b
    }, a.MIN_VALUE = Number.MIN_VALUE;
    for (var d = 2; 0 === a.MIN_VALUE;) a.MIN_VALUE = 1 / (Number.MAX_VALUE / d), d *= 2
}(Box2D);
var Vector = Array,
    Vector_a2j_Number = Box2D.NVector;
"undefined" == typeof Box2D && (Box2D = {}), "undefined" == typeof Box2D.Collision && (Box2D.Collision = {}), "undefined" == typeof Box2D.Collision.Shapes && (Box2D.Collision.Shapes = {}), "undefined" == typeof Box2D.Common && (Box2D.Common = {}), "undefined" == typeof Box2D.Common.Math && (Box2D.Common.Math = {}), "undefined" == typeof Box2D.Dynamics && (Box2D.Dynamics = {}), "undefined" == typeof Box2D.Dynamics.Contacts && (Box2D.Dynamics.Contacts = {}), "undefined" == typeof Box2D.Dynamics.Controllers && (Box2D.Dynamics.Controllers = {}), "undefined" == typeof Box2D.Dynamics.Joints && (Box2D.Dynamics.Joints = {}),
    function() {
        function a() {
            a.b2AABB.apply(this, arguments)
        }

        function b() {
            b.b2Bound.apply(this, arguments)
        }

        function c() {
            c.b2BoundValues.apply(this, arguments), this.constructor === c && this.b2BoundValues.apply(this, arguments)
        }

        function d() {
            d.b2Collision.apply(this, arguments)
        }

        function e() {
            e.b2ContactID.apply(this, arguments), this.constructor === e && this.b2ContactID.apply(this, arguments)
        }

        function f() {
            f.b2ContactPoint.apply(this, arguments)
        }

        function g() {
            g.b2Distance.apply(this, arguments)
        }

        function h() {
            h.b2DistanceInput.apply(this, arguments)
        }

        function i() {
            i.b2DistanceOutput.apply(this, arguments)
        }

        function j() {
            j.b2DistanceProxy.apply(this, arguments)
        }

        function k() {
            k.b2DynamicTree.apply(this, arguments), this.constructor === k && this.b2DynamicTree.apply(this, arguments)
        }

        function l() {
            l.b2DynamicTreeBroadPhase.apply(this, arguments)
        }

        function m() {
            m.b2DynamicTreeNode.apply(this, arguments)
        }

        function n() {
            n.b2DynamicTreePair.apply(this, arguments)
        }

        function o() {
            o.b2Manifold.apply(this, arguments), this.constructor === o && this.b2Manifold.apply(this, arguments)
        }

        function p() {
            p.b2ManifoldPoint.apply(this, arguments), this.constructor === p && this.b2ManifoldPoint.apply(this, arguments)
        }

        function q() {
            q.b2Point.apply(this, arguments)
        }

        function r() {
            r.b2RayCastInput.apply(this, arguments), this.constructor === r && this.b2RayCastInput.apply(this, arguments)
        }

        function s() {
            s.b2RayCastOutput.apply(this, arguments)
        }

        function t() {
            t.b2Segment.apply(this, arguments)
        }

        function u() {
            u.b2SeparationFunction.apply(this, arguments)
        }

        function v() {
            v.b2Simplex.apply(this, arguments), this.constructor === v && this.b2Simplex.apply(this, arguments)
        }

        function w() {
            w.b2SimplexCache.apply(this, arguments)
        }

        function x() {
            x.b2SimplexVertex.apply(this, arguments)
        }

        function y() {
            y.b2TimeOfImpact.apply(this, arguments)
        }

        function z() {
            z.b2TOIInput.apply(this, arguments)
        }

        function A() {
            A.b2WorldManifold.apply(this, arguments), this.constructor === A && this.b2WorldManifold.apply(this, arguments)
        }

        function B() {
            B.ClipVertex.apply(this, arguments)
        }

        function C() {
            C.Features.apply(this, arguments)
        }

        function D() {
            D.b2CircleShape.apply(this, arguments), this.constructor === D && this.b2CircleShape.apply(this, arguments)
        }

        function E() {
            E.b2EdgeChainDef.apply(this, arguments), this.constructor === E && this.b2EdgeChainDef.apply(this, arguments)
        }

        function F() {
            F.b2EdgeShape.apply(this, arguments), this.constructor === F && this.b2EdgeShape.apply(this, arguments)
        }

        function G() {
            G.b2MassData.apply(this, arguments)
        }

        function H() {
            H.b2PolygonShape.apply(this, arguments), this.constructor === H && this.b2PolygonShape.apply(this, arguments)
        }

        function I() {
            I.b2Shape.apply(this, arguments), this.constructor === I && this.b2Shape.apply(this, arguments)
        }

        function J() {
            J.b2Color.apply(this, arguments), this.constructor === J && this.b2Color.apply(this, arguments)
        }

        function K() {
            K.b2Settings.apply(this, arguments)
        }

        function L() {
            L.b2Mat22.apply(this, arguments), this.constructor === L && this.b2Mat22.apply(this, arguments)
        }

        function M() {
            M.b2Mat33.apply(this, arguments), this.constructor === M && this.b2Mat33.apply(this, arguments)
        }

        function N() {
            N.b2Math.apply(this, arguments)
        }

        function O() {
            O.b2Sweep.apply(this, arguments)
        }

        function P() {
            P.b2Transform.apply(this, arguments), this.constructor === P && this.b2Transform.apply(this, arguments)
        }

        function Q() {
            Q.b2Vec2.apply(this, arguments), this.constructor === Q && this.b2Vec2.apply(this, arguments)
        }

        function R() {
            R.b2Vec3.apply(this, arguments), this.constructor === R && this.b2Vec3.apply(this, arguments)
        }

        function S() {
            S.b2Body.apply(this, arguments), this.constructor === S && this.b2Body.apply(this, arguments)
        }

        function T() {
            T.b2BodyDef.apply(this, arguments), this.constructor === T && this.b2BodyDef.apply(this, arguments)
        }

        function U() {
            U.b2ContactFilter.apply(this, arguments)
        }

        function V() {
            V.b2ContactImpulse.apply(this, arguments)
        }

        function W() {
            W.b2ContactListener.apply(this, arguments)
        }

        function X() {
            X.b2ContactManager.apply(this, arguments), this.constructor === X && this.b2ContactManager.apply(this, arguments)
        }

        function Y() {
            Y.b2DebugDraw.apply(this, arguments), this.constructor === Y && this.b2DebugDraw.apply(this, arguments)
        }

        function Z() {
            Z.b2DestructionListener.apply(this, arguments)
        }

        function $() {
            $.b2FilterData.apply(this, arguments)
        }

        function _() {
            _.b2Fixture.apply(this, arguments), this.constructor === _ && this.b2Fixture.apply(this, arguments)
        }

        function aa() {
            aa.b2FixtureDef.apply(this, arguments), this.constructor === aa && this.b2FixtureDef.apply(this, arguments)
        }

        function ba() {
            ba.b2Island.apply(this, arguments), this.constructor === ba && this.b2Island.apply(this, arguments)
        }

        function ca() {
            ca.b2TimeStep.apply(this, arguments)
        }

        function da() {
            da.b2World.apply(this, arguments), this.constructor === da && this.b2World.apply(this, arguments)
        }

        function ea() {
            ea.b2CircleContact.apply(this, arguments)
        }

        function fa() {
            fa.b2Contact.apply(this, arguments), this.constructor === fa && this.b2Contact.apply(this, arguments)
        }

        function ga() {
            ga.b2ContactConstraint.apply(this, arguments), this.constructor === ga && this.b2ContactConstraint.apply(this, arguments)
        }

        function ha() {
            ha.b2ContactConstraintPoint.apply(this, arguments)
        }

        function ia() {
            ia.b2ContactEdge.apply(this, arguments)
        }

        function ja() {
            ja.b2ContactFactory.apply(this, arguments), this.constructor === ja && this.b2ContactFactory.apply(this, arguments)
        }

        function ka() {
            ka.b2ContactRegister.apply(this, arguments)
        }

        function la() {
            la.b2ContactResult.apply(this, arguments)
        }

        function ma() {
            ma.b2ContactSolver.apply(this, arguments), this.constructor === ma && this.b2ContactSolver.apply(this, arguments)
        }

        function na() {
            na.b2EdgeAndCircleContact.apply(this, arguments)
        }

        function oa() {
            oa.b2NullContact.apply(this, arguments), this.constructor === oa && this.b2NullContact.apply(this, arguments)
        }

        function pa() {
            pa.b2PolyAndCircleContact.apply(this, arguments)
        }

        function qa() {
            qa.b2PolyAndEdgeContact.apply(this, arguments)
        }

        function ra() {
            ra.b2PolygonContact.apply(this, arguments)
        }

        function sa() {
            sa.b2PositionSolverManifold.apply(this, arguments), this.constructor === sa && this.b2PositionSolverManifold.apply(this, arguments)
        }

        function ta() {
            ta.b2BuoyancyController.apply(this, arguments)
        }

        function ua() {
            ua.b2ConstantAccelController.apply(this, arguments)
        }

        function va() {
            va.b2ConstantForceController.apply(this, arguments)
        }

        function wa() {
            wa.b2Controller.apply(this, arguments)
        }

        function xa() {
            xa.b2ControllerEdge.apply(this, arguments)
        }

        function ya() {
            ya.b2GravityController.apply(this, arguments)
        }

        function za() {
            za.b2TensorDampingController.apply(this, arguments)
        }

        function Aa() {
            Aa.b2DistanceJoint.apply(this, arguments), this.constructor === Aa && this.b2DistanceJoint.apply(this, arguments)
        }

        function Ba() {
            Ba.b2DistanceJointDef.apply(this, arguments), this.constructor === Ba && this.b2DistanceJointDef.apply(this, arguments)
        }

        function Ca() {
            Ca.b2FrictionJoint.apply(this, arguments), this.constructor === Ca && this.b2FrictionJoint.apply(this, arguments)
        }

        function Da() {
            Da.b2FrictionJointDef.apply(this, arguments), this.constructor === Da && this.b2FrictionJointDef.apply(this, arguments)
        }

        function Ea() {
            Ea.b2GearJoint.apply(this, arguments), this.constructor === Ea && this.b2GearJoint.apply(this, arguments)
        }

        function Fa() {
            Fa.b2GearJointDef.apply(this, arguments), this.constructor === Fa && this.b2GearJointDef.apply(this, arguments)
        }

        function Ga() {
            Ga.b2Jacobian.apply(this, arguments)
        }

        function Ha() {
            Ha.b2Joint.apply(this, arguments), this.constructor === Ha && this.b2Joint.apply(this, arguments)
        }

        function Ia() {
            Ia.b2JointDef.apply(this, arguments), this.constructor === Ia && this.b2JointDef.apply(this, arguments)
        }

        function Ja() {
            Ja.b2JointEdge.apply(this, arguments)
        }

        function Ka() {
            Ka.b2LineJoint.apply(this, arguments), this.constructor === Ka && this.b2LineJoint.apply(this, arguments)
        }

        function La() {
            La.b2LineJointDef.apply(this, arguments), this.constructor === La && this.b2LineJointDef.apply(this, arguments)
        }

        function Ma() {
            Ma.b2MouseJoint.apply(this, arguments), this.constructor === Ma && this.b2MouseJoint.apply(this, arguments)
        }

        function Na() {
            Na.b2MouseJointDef.apply(this, arguments), this.constructor === Na && this.b2MouseJointDef.apply(this, arguments)
        }

        function Oa() {
            Oa.b2PrismaticJoint.apply(this, arguments), this.constructor === Oa && this.b2PrismaticJoint.apply(this, arguments)
        }

        function Pa() {
            Pa.b2PrismaticJointDef.apply(this, arguments), this.constructor === Pa && this.b2PrismaticJointDef.apply(this, arguments)
        }

        function Qa() {
            Qa.b2PulleyJoint.apply(this, arguments), this.constructor === Qa && this.b2PulleyJoint.apply(this, arguments)
        }

        function Ra() {
            Ra.b2PulleyJointDef.apply(this, arguments), this.constructor === Ra && this.b2PulleyJointDef.apply(this, arguments)
        }

        function Sa() {
            Sa.b2RevoluteJoint.apply(this, arguments), this.constructor === Sa && this.b2RevoluteJoint.apply(this, arguments)
        }

        function Ta() {
            Ta.b2RevoluteJointDef.apply(this, arguments), this.constructor === Ta && this.b2RevoluteJointDef.apply(this, arguments)
        }

        function Ua() {
            Ua.b2WeldJoint.apply(this, arguments), this.constructor === Ua && this.b2WeldJoint.apply(this, arguments)
        }

        function Va() {
            Va.b2WeldJointDef.apply(this, arguments), this.constructor === Va && this.b2WeldJointDef.apply(this, arguments)
        }
        Box2D.Collision.IBroadPhase = "Box2D.Collision.IBroadPhase", Box2D.Collision.b2AABB = a, Box2D.Collision.b2Bound = b, Box2D.Collision.b2BoundValues = c, Box2D.Collision.b2Collision = d, Box2D.Collision.b2ContactID = e, Box2D.Collision.b2ContactPoint = f, Box2D.Collision.b2Distance = g, Box2D.Collision.b2DistanceInput = h, Box2D.Collision.b2DistanceOutput = i, Box2D.Collision.b2DistanceProxy = j, Box2D.Collision.b2DynamicTree = k, Box2D.Collision.b2DynamicTreeBroadPhase = l, Box2D.Collision.b2DynamicTreeNode = m, Box2D.Collision.b2DynamicTreePair = n, Box2D.Collision.b2Manifold = o, Box2D.Collision.b2ManifoldPoint = p, Box2D.Collision.b2Point = q, Box2D.Collision.b2RayCastInput = r, Box2D.Collision.b2RayCastOutput = s, Box2D.Collision.b2Segment = t, Box2D.Collision.b2SeparationFunction = u, Box2D.Collision.b2Simplex = v, Box2D.Collision.b2SimplexCache = w, Box2D.Collision.b2SimplexVertex = x, Box2D.Collision.b2TimeOfImpact = y, Box2D.Collision.b2TOIInput = z, Box2D.Collision.b2WorldManifold = A, Box2D.Collision.ClipVertex = B, Box2D.Collision.Features = C, Box2D.Collision.Shapes.b2CircleShape = D, Box2D.Collision.Shapes.b2EdgeChainDef = E, Box2D.Collision.Shapes.b2EdgeShape = F, Box2D.Collision.Shapes.b2MassData = G, Box2D.Collision.Shapes.b2PolygonShape = H, Box2D.Collision.Shapes.b2Shape = I, Box2D.Common.b2internal = "Box2D.Common.b2internal", Box2D.Common.b2Color = J, Box2D.Common.b2Settings = K, Box2D.Common.Math.b2Mat22 = L, Box2D.Common.Math.b2Mat33 = M, Box2D.Common.Math.b2Math = N, Box2D.Common.Math.b2Sweep = O, Box2D.Common.Math.b2Transform = P, Box2D.Common.Math.b2Vec2 = Q, Box2D.Common.Math.b2Vec3 = R, Box2D.Dynamics.b2Body = S, Box2D.Dynamics.b2BodyDef = T, Box2D.Dynamics.b2ContactFilter = U, Box2D.Dynamics.b2ContactImpulse = V, Box2D.Dynamics.b2ContactListener = W, Box2D.Dynamics.b2ContactManager = X, Box2D.Dynamics.b2DebugDraw = Y, Box2D.Dynamics.b2DestructionListener = Z, Box2D.Dynamics.b2FilterData = $, Box2D.Dynamics.b2Fixture = _, Box2D.Dynamics.b2FixtureDef = aa, Box2D.Dynamics.b2Island = ba, Box2D.Dynamics.b2TimeStep = ca, Box2D.Dynamics.b2World = da, Box2D.Dynamics.Contacts.b2CircleContact = ea, Box2D.Dynamics.Contacts.b2Contact = fa, Box2D.Dynamics.Contacts.b2ContactConstraint = ga, Box2D.Dynamics.Contacts.b2ContactConstraintPoint = ha, Box2D.Dynamics.Contacts.b2ContactEdge = ia, Box2D.Dynamics.Contacts.b2ContactFactory = ja, Box2D.Dynamics.Contacts.b2ContactRegister = ka, Box2D.Dynamics.Contacts.b2ContactResult = la, Box2D.Dynamics.Contacts.b2ContactSolver = ma, Box2D.Dynamics.Contacts.b2EdgeAndCircleContact = na, Box2D.Dynamics.Contacts.b2NullContact = oa, Box2D.Dynamics.Contacts.b2PolyAndCircleContact = pa, Box2D.Dynamics.Contacts.b2PolyAndEdgeContact = qa, Box2D.Dynamics.Contacts.b2PolygonContact = ra, Box2D.Dynamics.Contacts.b2PositionSolverManifold = sa, Box2D.Dynamics.Controllers.b2BuoyancyController = ta, Box2D.Dynamics.Controllers.b2ConstantAccelController = ua, Box2D.Dynamics.Controllers.b2ConstantForceController = va, Box2D.Dynamics.Controllers.b2Controller = wa, Box2D.Dynamics.Controllers.b2ControllerEdge = xa, Box2D.Dynamics.Controllers.b2GravityController = ya, Box2D.Dynamics.Controllers.b2TensorDampingController = za, Box2D.Dynamics.Joints.b2DistanceJoint = Aa, Box2D.Dynamics.Joints.b2DistanceJointDef = Ba, Box2D.Dynamics.Joints.b2FrictionJoint = Ca, Box2D.Dynamics.Joints.b2FrictionJointDef = Da, Box2D.Dynamics.Joints.b2GearJoint = Ea, Box2D.Dynamics.Joints.b2GearJointDef = Fa, Box2D.Dynamics.Joints.b2Jacobian = Ga, Box2D.Dynamics.Joints.b2Joint = Ha, Box2D.Dynamics.Joints.b2JointDef = Ia, Box2D.Dynamics.Joints.b2JointEdge = Ja, Box2D.Dynamics.Joints.b2LineJoint = Ka, Box2D.Dynamics.Joints.b2LineJointDef = La, Box2D.Dynamics.Joints.b2MouseJoint = Ma, Box2D.Dynamics.Joints.b2MouseJointDef = Na, Box2D.Dynamics.Joints.b2PrismaticJoint = Oa, Box2D.Dynamics.Joints.b2PrismaticJointDef = Pa, Box2D.Dynamics.Joints.b2PulleyJoint = Qa, Box2D.Dynamics.Joints.b2PulleyJointDef = Ra, Box2D.Dynamics.Joints.b2RevoluteJoint = Sa, Box2D.Dynamics.Joints.b2RevoluteJointDef = Ta, Box2D.Dynamics.Joints.b2WeldJoint = Ua, Box2D.Dynamics.Joints.b2WeldJointDef = Va
    }(), Box2D.postDefs = [],
    function() {
        var a = Box2D.Collision.Shapes.b2CircleShape,
            b = (Box2D.Collision.Shapes.b2EdgeChainDef, Box2D.Collision.Shapes.b2EdgeShape, Box2D.Collision.Shapes.b2MassData, Box2D.Collision.Shapes.b2PolygonShape),
            c = Box2D.Collision.Shapes.b2Shape,
            d = (Box2D.Common.b2Color, Box2D.Common.b2internal, Box2D.Common.b2Settings),
            e = (Box2D.Common.Math.b2Mat22, Box2D.Common.Math.b2Mat33, Box2D.Common.Math.b2Math),
            f = Box2D.Common.Math.b2Sweep,
            g = Box2D.Common.Math.b2Transform,
            h = Box2D.Common.Math.b2Vec2,
            i = (Box2D.Common.Math.b2Vec3, Box2D.Collision.b2AABB),
            j = Box2D.Collision.b2Bound,
            k = Box2D.Collision.b2BoundValues,
            l = Box2D.Collision.b2Collision,
            m = Box2D.Collision.b2ContactID,
            n = Box2D.Collision.b2ContactPoint,
            o = Box2D.Collision.b2Distance,
            p = Box2D.Collision.b2DistanceInput,
            q = Box2D.Collision.b2DistanceOutput,
            r = Box2D.Collision.b2DistanceProxy,
            s = Box2D.Collision.b2DynamicTree,
            t = Box2D.Collision.b2DynamicTreeBroadPhase,
            u = Box2D.Collision.b2DynamicTreeNode,
            v = Box2D.Collision.b2DynamicTreePair,
            w = Box2D.Collision.b2Manifold,
            x = Box2D.Collision.b2ManifoldPoint,
            y = Box2D.Collision.b2Point,
            z = Box2D.Collision.b2RayCastInput,
            A = Box2D.Collision.b2RayCastOutput,
            B = Box2D.Collision.b2Segment,
            C = Box2D.Collision.b2SeparationFunction,
            D = Box2D.Collision.b2Simplex,
            E = Box2D.Collision.b2SimplexCache,
            F = Box2D.Collision.b2SimplexVertex,
            G = Box2D.Collision.b2TimeOfImpact,
            H = Box2D.Collision.b2TOIInput,
            I = Box2D.Collision.b2WorldManifold,
            J = Box2D.Collision.ClipVertex,
            K = Box2D.Collision.Features,
            L = Box2D.Collision.IBroadPhase;
        i.b2AABB = function() {
            this.lowerBound = new h, this.upperBound = new h
        }, i.prototype.IsValid = function() {
            var a = this.upperBound.x - this.lowerBound.x,
                b = this.upperBound.y - this.lowerBound.y,
                c = a >= 0 && b >= 0;
            return c = c && this.lowerBound.IsValid() && this.upperBound.IsValid()
        }, i.prototype.GetCenter = function() {
            return new h((this.lowerBound.x + this.upperBound.x) / 2, (this.lowerBound.y + this.upperBound.y) / 2)
        }, i.prototype.GetExtents = function() {
            return new h((this.upperBound.x - this.lowerBound.x) / 2, (this.upperBound.y - this.lowerBound.y) / 2)
        }, i.prototype.Contains = function(a) {
            var b = !0;
            return b = b && this.lowerBound.x <= a.lowerBound.x, b = b && this.lowerBound.y <= a.lowerBound.y, b = b && a.upperBound.x <= this.upperBound.x, b = b && a.upperBound.y <= this.upperBound.y
        }, i.prototype.RayCast = function(a, b) {
            var c = -Number.MAX_VALUE,
                d = Number.MAX_VALUE,
                e = b.p1.x,
                f = b.p1.y,
                g = b.p2.x - b.p1.x,
                h = b.p2.y - b.p1.y,
                i = Math.abs(g),
                j = Math.abs(h),
                k = a.normal,
                l = 0,
                m = 0,
                n = 0,
                o = 0,
                p = 0;
            if (i < Box2D.MIN_VALUE) {
                if (e < this.lowerBound.x || this.upperBound.x < e) return !1
            } else if (l = 1 / g, m = (this.lowerBound.x - e) * l, n = (this.upperBound.x - e) * l, p = -1, m > n && (o = m, m = n, n = o, p = 1), m > c && (k.x = p, k.y = 0, c = m), d = Math.min(d, n), c > d) return !1;
            if (j < Box2D.MIN_VALUE) {
                if (f < this.lowerBound.y || this.upperBound.y < f) return !1
            } else if (l = 1 / h, m = (this.lowerBound.y - f) * l, n = (this.upperBound.y - f) * l, p = -1, m > n && (o = m, m = n, n = o, p = 1), m > c && (k.y = p, k.x = 0, c = m), d = Math.min(d, n), c > d) return !1;
            return a.fraction = c, !0
        }, i.prototype.TestOverlap = function(a) {
            var b = a.lowerBound.x - this.upperBound.x,
                c = a.lowerBound.y - this.upperBound.y,
                d = this.lowerBound.x - a.upperBound.x,
                e = this.lowerBound.y - a.upperBound.y;
            return b > 0 || c > 0 ? !1 : d > 0 || e > 0 ? !1 : !0
        }, i.Combine = function(a, b) {
            var c = new i;
            return c.Combine(a, b), c
        }, i.prototype.Combine = function(a, b) {
            this.lowerBound.x = Math.min(a.lowerBound.x, b.lowerBound.x), this.lowerBound.y = Math.min(a.lowerBound.y, b.lowerBound.y), this.upperBound.x = Math.max(a.upperBound.x, b.upperBound.x), this.upperBound.y = Math.max(a.upperBound.y, b.upperBound.y)
        }, j.b2Bound = function() {}, j.prototype.IsLower = function() {
            return 0 == (1 & this.value)
        }, j.prototype.IsUpper = function() {
            return 1 == (1 & this.value)
        }, j.prototype.Swap = function(a) {
            var b = this.value,
                c = this.proxy,
                d = this.stabbingCount;
            this.value = a.value, this.proxy = a.proxy, this.stabbingCount = a.stabbingCount, a.value = b, a.proxy = c, a.stabbingCount = d
        }, k.b2BoundValues = function() {}, k.prototype.b2BoundValues = function() {
            this.lowerValues = new Vector_a2j_Number(0), this.lowerValues[0] = 0, this.lowerValues[1] = 0, this.upperValues = new Vector_a2j_Number(0), this.upperValues[0] = 0, this.upperValues[1] = 0
        }, l.b2Collision = function() {}, l.ClipSegmentToLine = function(a, b, c, d) {
            void 0 === d && (d = 0);
            var e, f = 0;
            e = b[0];
            var g = e.v;
            e = b[1];
            var h = e.v,
                i = c.x * g.x + c.y * g.y - d,
                j = c.x * h.x + c.y * h.y - d;
            if (0 >= i && a[f++].Set(b[0]), 0 >= j && a[f++].Set(b[1]), 0 > i * j) {
                var k = i / (i - j);
                e = a[f];
                var l = e.v;
                l.x = g.x + k * (h.x - g.x), l.y = g.y + k * (h.y - g.y), e = a[f];
                var m;
                i > 0 ? (m = b[0], e.id = m.id) : (m = b[1], e.id = m.id), ++f
            }
            return f
        }, l.EdgeSeparation = function(a, b, c, d, e) {
            void 0 === c && (c = 0);
            var f, g, h = (parseInt(a.m_vertexCount), a.m_vertices),
                i = a.m_normals,
                j = parseInt(d.m_vertexCount),
                k = d.m_vertices;
            f = b.R, g = i[c];
            var l = f.col1.x * g.x + f.col2.x * g.y,
                m = f.col1.y * g.x + f.col2.y * g.y;
            f = e.R;
            for (var n = f.col1.x * l + f.col1.y * m, o = f.col2.x * l + f.col2.y * m, p = 0, q = Number.MAX_VALUE, r = 0; j > r; ++r) {
                g = k[r];
                var s = g.x * n + g.y * o;
                q > s && (q = s, p = r)
            }
            g = h[c], f = b.R;
            var t = b.position.x + (f.col1.x * g.x + f.col2.x * g.y),
                u = b.position.y + (f.col1.y * g.x + f.col2.y * g.y);
            g = k[p], f = e.R;
            var v = e.position.x + (f.col1.x * g.x + f.col2.x * g.y),
                w = e.position.y + (f.col1.y * g.x + f.col2.y * g.y);
            v -= t, w -= u;
            var x = v * l + w * m;
            return x
        }, l.FindMaxSeparation = function(a, b, c, d, e) {
            var f, g, h = parseInt(b.m_vertexCount),
                i = b.m_normals;
            g = e.R, f = d.m_centroid;
            var j = e.position.x + (g.col1.x * f.x + g.col2.x * f.y),
                k = e.position.y + (g.col1.y * f.x + g.col2.y * f.y);
            g = c.R, f = b.m_centroid, j -= c.position.x + (g.col1.x * f.x + g.col2.x * f.y), k -= c.position.y + (g.col1.y * f.x + g.col2.y * f.y);
            for (var m = j * c.R.col1.x + k * c.R.col1.y, n = j * c.R.col2.x + k * c.R.col2.y, o = 0, p = -Number.MAX_VALUE, q = 0; h > q; ++q) {
                f = i[q];
                var r = f.x * m + f.y * n;
                r > p && (p = r, o = q)
            }
            var s = l.EdgeSeparation(b, c, o, d, e),
                t = parseInt(o - 1 >= 0 ? o - 1 : h - 1),
                u = l.EdgeSeparation(b, c, t, d, e),
                v = parseInt(h > o + 1 ? o + 1 : 0),
                w = l.EdgeSeparation(b, c, v, d, e),
                x = 0,
                y = 0,
                z = 0;
            if (u > s && u > w) z = -1, x = t, y = u;
            else {
                if (!(w > s)) return a[0] = o, s;
                z = 1, x = v, y = w
            }
            for (;;) {
                if (o = -1 == z ? x - 1 >= 0 ? x - 1 : h - 1 : h > x + 1 ? x + 1 : 0, s = l.EdgeSeparation(b, c, o, d, e), !(s > y)) break;
                x = o, y = s
            }
            return a[0] = x, y
        }, l.FindIncidentEdge = function(a, b, c, d, e, f) {
            void 0 === d && (d = 0);
            var g, h, i = (parseInt(b.m_vertexCount), b.m_normals),
                j = parseInt(e.m_vertexCount),
                k = e.m_vertices,
                l = e.m_normals;
            g = c.R, h = i[d];
            var m = g.col1.x * h.x + g.col2.x * h.y,
                n = g.col1.y * h.x + g.col2.y * h.y;
            g = f.R;
            var o = g.col1.x * m + g.col1.y * n;
            n = g.col2.x * m + g.col2.y * n, m = o;
            for (var p = 0, q = Number.MAX_VALUE, r = 0; j > r; ++r) {
                h = l[r];
                var s = m * h.x + n * h.y;
                q > s && (q = s, p = r)
            }
            var t, u = parseInt(p),
                v = parseInt(j > u + 1 ? u + 1 : 0);
            t = a[0], h = k[u], g = f.R, t.v.x = f.position.x + (g.col1.x * h.x + g.col2.x * h.y), t.v.y = f.position.y + (g.col1.y * h.x + g.col2.y * h.y), t.id.features.referenceEdge = d, t.id.features.incidentEdge = u, t.id.features.incidentVertex = 0, t = a[1], h = k[v], g = f.R, t.v.x = f.position.x + (g.col1.x * h.x + g.col2.x * h.y), t.v.y = f.position.y + (g.col1.y * h.x + g.col2.y * h.y), t.id.features.referenceEdge = d, t.id.features.incidentEdge = v, t.id.features.incidentVertex = 1
        }, l.MakeClipPointVector = function() {
            var a = new Vector(2);
            return a[0] = new J, a[1] = new J, a
        }, l.CollidePolygons = function(a, b, c, e, f) {
            var g;
            a.m_pointCount = 0;
            var h = b.m_radius + e.m_radius,
                i = 0;
            l.s_edgeAO[0] = i;
            var j = l.FindMaxSeparation(l.s_edgeAO, b, c, e, f);
            if (i = l.s_edgeAO[0], !(j > h)) {
                var k = 0;
                l.s_edgeBO[0] = k;
                var m = l.FindMaxSeparation(l.s_edgeBO, e, f, b, c);
                if (k = l.s_edgeBO[0], !(m > h)) {
                    var n, o, p, q, r, s = 0,
                        t = 0,
                        u = .98,
                        v = .001;
                    m > u * j + v ? (n = e, o = b, p = f, q = c, s = k, a.m_type = w.e_faceB,
                        t = 1) : (n = b, o = e, p = c, q = f, s = i, a.m_type = w.e_faceA, t = 0);
                    var x = l.s_incidentEdge;
                    l.FindIncidentEdge(x, n, p, s, o, q);
                    var y, z = parseInt(n.m_vertexCount),
                        A = n.m_vertices,
                        B = A[s];
                    y = z > s + 1 ? A[parseInt(s + 1)] : A[0];
                    var C = l.s_localTangent;
                    C.Set(y.x - B.x, y.y - B.y), C.Normalize();
                    var D = l.s_localNormal;
                    D.x = C.y, D.y = -C.x;
                    var E = l.s_planePoint;
                    E.Set(.5 * (B.x + y.x), .5 * (B.y + y.y));
                    var F = l.s_tangent;
                    r = p.R, F.x = r.col1.x * C.x + r.col2.x * C.y, F.y = r.col1.y * C.x + r.col2.y * C.y;
                    var G = l.s_tangent2;
                    G.x = -F.x, G.y = -F.y;
                    var H = l.s_normal;
                    H.x = F.y, H.y = -F.x;
                    var I = l.s_v11,
                        J = l.s_v12;
                    I.x = p.position.x + (r.col1.x * B.x + r.col2.x * B.y), I.y = p.position.y + (r.col1.y * B.x + r.col2.y * B.y), J.x = p.position.x + (r.col1.x * y.x + r.col2.x * y.y), J.y = p.position.y + (r.col1.y * y.x + r.col2.y * y.y);
                    var K = H.x * I.x + H.y * I.y,
                        L = -F.x * I.x - F.y * I.y + h,
                        M = F.x * J.x + F.y * J.y + h,
                        N = l.s_clipPoints1,
                        O = l.s_clipPoints2,
                        P = 0;
                    if (P = l.ClipSegmentToLine(N, x, G, L), !(2 > P || (P = l.ClipSegmentToLine(O, N, F, M), 2 > P))) {
                        a.m_localPlaneNormal.SetV(D), a.m_localPoint.SetV(E);
                        for (var Q = 0, R = 0; R < d.b2_maxManifoldPoints; ++R) {
                            g = O[R];
                            var S = H.x * g.v.x + H.y * g.v.y - K;
                            if (h >= S) {
                                var T = a.m_points[Q];
                                r = q.R;
                                var U = g.v.x - q.position.x,
                                    V = g.v.y - q.position.y;
                                T.m_localPoint.x = U * r.col1.x + V * r.col1.y, T.m_localPoint.y = U * r.col2.x + V * r.col2.y, T.m_id.Set(g.id), T.m_id.features.flip = t, ++Q
                            }
                        }
                        a.m_pointCount = Q
                    }
                }
            }
        }, l.CollideCircles = function(a, b, c, d, e) {
            a.m_pointCount = 0;
            var f, g;
            f = c.R, g = b.m_p;
            var h = c.position.x + (f.col1.x * g.x + f.col2.x * g.y),
                i = c.position.y + (f.col1.y * g.x + f.col2.y * g.y);
            f = e.R, g = d.m_p;
            var j = e.position.x + (f.col1.x * g.x + f.col2.x * g.y),
                k = e.position.y + (f.col1.y * g.x + f.col2.y * g.y),
                l = j - h,
                m = k - i,
                n = l * l + m * m,
                o = b.m_radius + d.m_radius;
            n > o * o || (a.m_type = w.e_circles, a.m_localPoint.SetV(b.m_p), a.m_localPlaneNormal.SetZero(), a.m_pointCount = 1, a.m_points[0].m_localPoint.SetV(d.m_p), a.m_points[0].m_id.key = 0)
        }, l.CollidePolygonAndCircle = function(a, b, c, d, e) {
            a.m_pointCount = 0;
            var f, g, h = 0,
                i = 0;
            g = e.R, f = d.m_p;
            var j = e.position.x + (g.col1.x * f.x + g.col2.x * f.y),
                k = e.position.y + (g.col1.y * f.x + g.col2.y * f.y);
            h = j - c.position.x, i = k - c.position.y, g = c.R;
            for (var l = h * g.col1.x + i * g.col1.y, m = h * g.col2.x + i * g.col2.y, n = 0, o = -Number.MAX_VALUE, p = b.m_radius + d.m_radius, q = parseInt(b.m_vertexCount), r = b.m_vertices, s = b.m_normals, t = 0; q > t; ++t) {
                f = r[t], h = l - f.x, i = m - f.y, f = s[t];
                var u = f.x * h + f.y * i;
                if (u > p) return;
                u > o && (o = u, n = t)
            }
            var v = parseInt(n),
                x = parseInt(q > v + 1 ? v + 1 : 0),
                y = r[v],
                z = r[x];
            if (o < Box2D.MIN_VALUE) return a.m_pointCount = 1, a.m_type = w.e_faceA, a.m_localPlaneNormal.SetV(s[n]), a.m_localPoint.x = .5 * (y.x + z.x), a.m_localPoint.y = .5 * (y.y + z.y), a.m_points[0].m_localPoint.SetV(d.m_p), void(a.m_points[0].m_id.key = 0);
            var A = (l - y.x) * (z.x - y.x) + (m - y.y) * (z.y - y.y),
                B = (l - z.x) * (y.x - z.x) + (m - z.y) * (y.y - z.y);
            if (0 >= A) {
                if ((l - y.x) * (l - y.x) + (m - y.y) * (m - y.y) > p * p) return;
                a.m_pointCount = 1, a.m_type = w.e_faceA, a.m_localPlaneNormal.x = l - y.x, a.m_localPlaneNormal.y = m - y.y, a.m_localPlaneNormal.Normalize(), a.m_localPoint.SetV(y), a.m_points[0].m_localPoint.SetV(d.m_p), a.m_points[0].m_id.key = 0
            } else if (0 >= B) {
                if ((l - z.x) * (l - z.x) + (m - z.y) * (m - z.y) > p * p) return;
                a.m_pointCount = 1, a.m_type = w.e_faceA, a.m_localPlaneNormal.x = l - z.x, a.m_localPlaneNormal.y = m - z.y, a.m_localPlaneNormal.Normalize(), a.m_localPoint.SetV(z), a.m_points[0].m_localPoint.SetV(d.m_p), a.m_points[0].m_id.key = 0
            } else {
                var C = .5 * (y.x + z.x),
                    D = .5 * (y.y + z.y);
                if (o = (l - C) * s[v].x + (m - D) * s[v].y, o > p) return;
                a.m_pointCount = 1, a.m_type = w.e_faceA, a.m_localPlaneNormal.x = s[v].x, a.m_localPlaneNormal.y = s[v].y, a.m_localPlaneNormal.Normalize(), a.m_localPoint.Set(C, D), a.m_points[0].m_localPoint.SetV(d.m_p), a.m_points[0].m_id.key = 0
            }
        }, l.TestOverlap = function(a, b) {
            var c = b.lowerBound,
                d = a.upperBound,
                e = c.x - d.x,
                f = c.y - d.y;
            c = a.lowerBound, d = b.upperBound;
            var g = c.x - d.x,
                h = c.y - d.y;
            return e > 0 || f > 0 ? !1 : g > 0 || h > 0 ? !1 : !0
        }, Box2D.postDefs.push(function() {
            Box2D.Collision.b2Collision.s_incidentEdge = l.MakeClipPointVector(), Box2D.Collision.b2Collision.s_clipPoints1 = l.MakeClipPointVector(), Box2D.Collision.b2Collision.s_clipPoints2 = l.MakeClipPointVector(), Box2D.Collision.b2Collision.s_edgeAO = new Vector_a2j_Number(1), Box2D.Collision.b2Collision.s_edgeBO = new Vector_a2j_Number(1), Box2D.Collision.b2Collision.s_localTangent = new h, Box2D.Collision.b2Collision.s_localNormal = new h, Box2D.Collision.b2Collision.s_planePoint = new h, Box2D.Collision.b2Collision.s_normal = new h, Box2D.Collision.b2Collision.s_tangent = new h, Box2D.Collision.b2Collision.s_tangent2 = new h, Box2D.Collision.b2Collision.s_v11 = new h, Box2D.Collision.b2Collision.s_v12 = new h, Box2D.Collision.b2Collision.b2CollidePolyTempVec = new h, Box2D.Collision.b2Collision.b2_nullFeature = 255
        }), m.b2ContactID = function() {
            this.features = new K
        }, m.prototype.b2ContactID = function() {
            this.features._m_id = this
        }, m.prototype.Set = function(a) {
            this.key = a._key
        }, m.prototype.Copy = function() {
            var a = new m;
            return a.key = this.key, a
        }, Object.defineProperty(m.prototype, "key", {
            enumerable: !1,
            configurable: !0,
            get: function() {
                return this._key
            }
        }), Object.defineProperty(m.prototype, "key", {
            enumerable: !1,
            configurable: !0,
            set: function(a) {
                void 0 === a && (a = 0), this._key = a, this.features._referenceEdge = 255 & this._key, this.features._incidentEdge = (65280 & this._key) >> 8 & 255, this.features._incidentVertex = (16711680 & this._key) >> 16 & 255, this.features._flip = (4278190080 & this._key) >> 24 & 255
            }
        }), n.b2ContactPoint = function() {
            this.position = new h, this.velocity = new h, this.normal = new h, this.id = new m
        }, o.b2Distance = function() {}, o.Distance = function(a, b, c) {
            ++o.b2_gjkCalls;
            var f = c.proxyA,
                g = c.proxyB,
                i = c.transformA,
                j = c.transformB,
                k = o.s_simplex;
            k.ReadCache(b, f, i, g, j);
            for (var l, m = k.m_vertices, n = 20, p = o.s_saveA, q = o.s_saveB, r = 0, s = k.GetClosestPoint(), t = s.LengthSquared(), u = t, v = 0, w = 0; n > w;) {
                for (r = k.m_count, v = 0; r > v; v++) p[v] = m[v].indexA, q[v] = m[v].indexB;
                switch (k.m_count) {
                    case 1:
                        break;
                    case 2:
                        k.Solve2();
                        break;
                    case 3:
                        k.Solve3();
                        break;
                    default:
                        d.b2Assert(!1)
                }
                if (3 == k.m_count) break;
                l = k.GetClosestPoint(), u = l.LengthSquared(), t = u;
                var x = k.GetSearchDirection();
                if (x.LengthSquared() < Box2D.MIN_VALUE * Box2D.MIN_VALUE) break;
                var y = m[k.m_count];
                y.indexA = f.GetSupport(e.MulTMV(i.R, x.GetNegative())), y.wA = e.MulX(i, f.GetVertex(y.indexA)), y.indexB = g.GetSupport(e.MulTMV(j.R, x)), y.wB = e.MulX(j, g.GetVertex(y.indexB)), y.w = e.SubtractVV(y.wB, y.wA), ++w, ++o.b2_gjkIters;
                var z = !1;
                for (v = 0; r > v; v++)
                    if (y.indexA == p[v] && y.indexB == q[v]) {
                        z = !0;
                        break
                    }
                if (z) break;
                ++k.m_count
            }
            if (o.b2_gjkMaxIters = e.Max(o.b2_gjkMaxIters, w), k.GetWitnessPoints(a.pointA, a.pointB), a.distance = e.SubtractVV(a.pointA, a.pointB).Length(), a.iterations = w, k.WriteCache(b), c.useRadii) {
                var A = f.m_radius,
                    B = g.m_radius;
                if (a.distance > A + B && a.distance > Box2D.MIN_VALUE) {
                    a.distance -= A + B;
                    var C = e.SubtractVV(a.pointB, a.pointA);
                    C.Normalize(), a.pointA.x += A * C.x, a.pointA.y += A * C.y, a.pointB.x -= B * C.x, a.pointB.y -= B * C.y
                } else l = new h, l.x = .5 * (a.pointA.x + a.pointB.x), l.y = .5 * (a.pointA.y + a.pointB.y), a.pointA.x = a.pointB.x = l.x, a.pointA.y = a.pointB.y = l.y, a.distance = 0
            }
        }, Box2D.postDefs.push(function() {
            Box2D.Collision.b2Distance.s_simplex = new D, Box2D.Collision.b2Distance.s_saveA = new Vector_a2j_Number(3), Box2D.Collision.b2Distance.s_saveB = new Vector_a2j_Number(3)
        }), p.b2DistanceInput = function() {}, q.b2DistanceOutput = function() {
            this.pointA = new h, this.pointB = new h
        }, r.b2DistanceProxy = function() {}, r.prototype.Set = function(e) {
            switch (e.GetType()) {
                case c.e_circleShape:
                    var f = e instanceof a ? e : null;
                    this.m_vertices = new Vector(1, !0), this.m_vertices[0] = f.m_p, this.m_count = 1, this.m_radius = f.m_radius;
                    break;
                case c.e_polygonShape:
                    var g = e instanceof b ? e : null;
                    this.m_vertices = g.m_vertices, this.m_count = g.m_vertexCount, this.m_radius = g.m_radius;
                    break;
                default:
                    d.b2Assert(!1)
            }
        }, r.prototype.GetSupport = function(a) {
            for (var b = 0, c = this.m_vertices[0].x * a.x + this.m_vertices[0].y * a.y, d = 1; d < this.m_count; ++d) {
                var e = this.m_vertices[d].x * a.x + this.m_vertices[d].y * a.y;
                e > c && (b = d, c = e)
            }
            return b
        }, r.prototype.GetSupportVertex = function(a) {
            for (var b = 0, c = this.m_vertices[0].x * a.x + this.m_vertices[0].y * a.y, d = 1; d < this.m_count; ++d) {
                var e = this.m_vertices[d].x * a.x + this.m_vertices[d].y * a.y;
                e > c && (b = d, c = e)
            }
            return this.m_vertices[b]
        }, r.prototype.GetVertexCount = function() {
            return this.m_count
        }, r.prototype.GetVertex = function(a) {
            return void 0 === a && (a = 0), d.b2Assert(a >= 0 && a < this.m_count), this.m_vertices[a]
        }, s.b2DynamicTree = function() {}, s.prototype.b2DynamicTree = function() {
            this.m_root = null, this.m_freeList = null, this.m_path = 0, this.m_insertionCount = 0
        }, s.prototype.CreateProxy = function(a, b) {
            var c = this.AllocateNode(),
                e = d.b2_aabbExtension,
                f = d.b2_aabbExtension;
            return c.aabb.lowerBound.x = a.lowerBound.x - e, c.aabb.lowerBound.y = a.lowerBound.y - f, c.aabb.upperBound.x = a.upperBound.x + e, c.aabb.upperBound.y = a.upperBound.y + f, c.userData = b, this.InsertLeaf(c), c
        }, s.prototype.DestroyProxy = function(a) {
            this.RemoveLeaf(a), this.FreeNode(a)
        }, s.prototype.MoveProxy = function(a, b, c) {
            if (d.b2Assert(a.IsLeaf()), a.aabb.Contains(b)) return !1;
            this.RemoveLeaf(a);
            var e = d.b2_aabbExtension + d.b2_aabbMultiplier * (c.x > 0 ? c.x : -c.x),
                f = d.b2_aabbExtension + d.b2_aabbMultiplier * (c.y > 0 ? c.y : -c.y);
            return a.aabb.lowerBound.x = b.lowerBound.x - e, a.aabb.lowerBound.y = b.lowerBound.y - f, a.aabb.upperBound.x = b.upperBound.x + e, a.aabb.upperBound.y = b.upperBound.y + f, this.InsertLeaf(a), !0
        }, s.prototype.Rebalance = function(a) {
            if (void 0 === a && (a = 0), null != this.m_root)
                for (var b = 0; a > b; b++) {
                    for (var c = this.m_root, d = 0; 0 == c.IsLeaf();) c = this.m_path >> d & 1 ? c.child2 : c.child1, d = d + 1 & 31;
                    ++this.m_path, this.RemoveLeaf(c), this.InsertLeaf(c)
                }
        }, s.prototype.GetFatAABB = function(a) {
            return a.aabb
        }, s.prototype.GetUserData = function(a) {
            return a.userData
        }, s.prototype.Query = function(a, b) {
            if (null != this.m_root) {
                var c = new Vector,
                    d = 0;
                for (c[d++] = this.m_root; d > 0;) {
                    var e = c[--d];
                    if (e.aabb.TestOverlap(b))
                        if (e.IsLeaf()) {
                            var f = a(e);
                            if (!f) return
                        } else c[d++] = e.child1, c[d++] = e.child2
                }
            }
        }, s.prototype.RayCast = function(a, b) {
            if (null != this.m_root) {
                var c = b.p1,
                    d = b.p2,
                    f = e.SubtractVV(c, d);
                f.Normalize();
                var g = e.CrossFV(1, f),
                    h = e.AbsV(g),
                    j = b.maxFraction,
                    k = new i,
                    l = 0,
                    m = 0;
                l = c.x + j * (d.x - c.x), m = c.y + j * (d.y - c.y), k.lowerBound.x = Math.min(c.x, l), k.lowerBound.y = Math.min(c.y, m), k.upperBound.x = Math.max(c.x, l), k.upperBound.y = Math.max(c.y, m);
                var n = new Vector,
                    o = 0;
                for (n[o++] = this.m_root; o > 0;) {
                    var p = n[--o];
                    if (0 != p.aabb.TestOverlap(k)) {
                        var q = p.aabb.GetCenter(),
                            r = p.aabb.GetExtents(),
                            s = Math.abs(g.x * (c.x - q.x) + g.y * (c.y - q.y)) - h.x * r.x - h.y * r.y;
                        if (!(s > 0))
                            if (p.IsLeaf()) {
                                var t = new z;
                                if (t.p1 = b.p1, t.p2 = b.p2, t.maxFraction = b.maxFraction, j = a(t, p), 0 == j) return;
                                j > 0 && (l = c.x + j * (d.x - c.x), m = c.y + j * (d.y - c.y), k.lowerBound.x = Math.min(c.x, l), k.lowerBound.y = Math.min(c.y, m), k.upperBound.x = Math.max(c.x, l), k.upperBound.y = Math.max(c.y, m))
                            } else n[o++] = p.child1, n[o++] = p.child2
                    }
                }
            }
        }, s.prototype.AllocateNode = function() {
            if (this.m_freeList) {
                var a = this.m_freeList;
                return this.m_freeList = a.parent, a.parent = null, a.child1 = null, a.child2 = null, a
            }
            return new u
        }, s.prototype.FreeNode = function(a) {
            a.parent = this.m_freeList, this.m_freeList = a
        }, s.prototype.InsertLeaf = function(a) {
            if (++this.m_insertionCount, null == this.m_root) return this.m_root = a, void(this.m_root.parent = null);
            var b = a.aabb.GetCenter(),
                c = this.m_root;
            if (0 == c.IsLeaf())
                do {
                    var d = c.child1,
                        e = c.child2,
                        f = Math.abs((d.aabb.lowerBound.x + d.aabb.upperBound.x) / 2 - b.x) + Math.abs((d.aabb.lowerBound.y + d.aabb.upperBound.y) / 2 - b.y),
                        g = Math.abs((e.aabb.lowerBound.x + e.aabb.upperBound.x) / 2 - b.x) + Math.abs((e.aabb.lowerBound.y + e.aabb.upperBound.y) / 2 - b.y);
                    c = g > f ? d : e
                } while (0 == c.IsLeaf());
            var h = c.parent,
                i = this.AllocateNode();
            if (i.parent = h, i.userData = null, i.aabb.Combine(a.aabb, c.aabb), h) {
                c.parent.child1 == c ? h.child1 = i : h.child2 = i, i.child1 = c, i.child2 = a, c.parent = i, a.parent = i;
                do {
                    if (h.aabb.Contains(i.aabb)) break;
                    h.aabb.Combine(h.child1.aabb, h.child2.aabb), i = h, h = h.parent
                } while (h)
            } else i.child1 = c, i.child2 = a, c.parent = i, a.parent = i, this.m_root = i
        }, s.prototype.RemoveLeaf = function(a) {
            if (a == this.m_root) return void(this.m_root = null);
            var b, c = a.parent,
                d = c.parent;
            if (b = c.child1 == a ? c.child2 : c.child1, d)
                for (d.child1 == c ? d.child1 = b : d.child2 = b, b.parent = d, this.FreeNode(c); d;) {
                    var e = d.aabb;
                    if (d.aabb = i.Combine(d.child1.aabb, d.child2.aabb), e.Contains(d.aabb)) break;
                    d = d.parent
                } else this.m_root = b, b.parent = null, this.FreeNode(c)
        }, t.b2DynamicTreeBroadPhase = function() {
            this.m_tree = new s, this.m_moveBuffer = new Vector, this.m_pairBuffer = new Vector, this.m_pairCount = 0
        }, t.prototype.CreateProxy = function(a, b) {
            var c = this.m_tree.CreateProxy(a, b);
            return ++this.m_proxyCount, this.BufferMove(c), c
        }, t.prototype.DestroyProxy = function(a) {
            this.UnBufferMove(a), --this.m_proxyCount, this.m_tree.DestroyProxy(a)
        }, t.prototype.MoveProxy = function(a, b, c) {
            var d = this.m_tree.MoveProxy(a, b, c);
            d && this.BufferMove(a)
        }, t.prototype.TestOverlap = function(a, b) {
            var c = this.m_tree.GetFatAABB(a),
                d = this.m_tree.GetFatAABB(b);
            return c.TestOverlap(d)
        }, t.prototype.GetUserData = function(a) {
            return this.m_tree.GetUserData(a)
        }, t.prototype.GetFatAABB = function(a) {
            return this.m_tree.GetFatAABB(a)
        }, t.prototype.GetProxyCount = function() {
            return this.m_proxyCount
        }, t.prototype.UpdatePairs = function(a) {
            var b = this;
            b.m_pairCount = 0;
            var c, d, e = 0;
            for (e = 0; e < b.m_moveBuffer.length; ++e) {
                c = b.m_moveBuffer[e], d = function(a) {
                    if (a == c) return !0;
                    b.m_pairCount == b.m_pairBuffer.length && (b.m_pairBuffer[b.m_pairCount] = new v);
                    var d = b.m_pairBuffer[b.m_pairCount];
                    return d.proxyA = c > a ? a : c, d.proxyB = a >= c ? a : c, ++b.m_pairCount, !0
                };
                var f = b.m_tree.GetFatAABB(c);
                b.m_tree.Query(d, f)
            }
            for (b.m_moveBuffer.length = 0, e = 0; e < b.m_pairCount;) {
                var g = b.m_pairBuffer[e],
                    h = b.m_tree.GetUserData(g.proxyA),
                    i = b.m_tree.GetUserData(g.proxyB);
                for (a(h, i), ++e; e < b.m_pairCount;) {
                    var j = b.m_pairBuffer[e];
                    if (j.proxyA != g.proxyA || j.proxyB != g.proxyB) break;
                    ++e
                }
            }
        }, t.prototype.Query = function(a, b) {
            this.m_tree.Query(a, b)
        }, t.prototype.RayCast = function(a, b) {
            this.m_tree.RayCast(a, b)
        }, t.prototype.Validate = function() {}, t.prototype.Rebalance = function(a) {
            void 0 === a && (a = 0), this.m_tree.Rebalance(a)
        }, t.prototype.BufferMove = function(a) {
            this.m_moveBuffer[this.m_moveBuffer.length] = a
        }, t.prototype.UnBufferMove = function(a) {
            var b = parseInt(this.m_moveBuffer.indexOf(a));
            this.m_moveBuffer.splice(b, 1)
        }, t.prototype.ComparePairs = function() {
            return 0
        }, t.__implements = {}, t.__implements[L] = !0, u.b2DynamicTreeNode = function() {
            this.aabb = new i
        }, u.prototype.IsLeaf = function() {
            return null == this.child1
        }, v.b2DynamicTreePair = function() {}, w.b2Manifold = function() {
            this.m_pointCount = 0
        }, w.prototype.b2Manifold = function() {
            this.m_points = new Vector(d.b2_maxManifoldPoints);
            for (var a = 0; a < d.b2_maxManifoldPoints; a++) this.m_points[a] = new x;
            this.m_localPlaneNormal = new h, this.m_localPoint = new h
        }, w.prototype.Reset = function() {
            for (var a = 0; a < d.b2_maxManifoldPoints; a++)(this.m_points[a] instanceof x ? this.m_points[a] : null).Reset();
            this.m_localPlaneNormal.SetZero(), this.m_localPoint.SetZero(), this.m_type = 0, this.m_pointCount = 0
        }, w.prototype.Set = function(a) {
            this.m_pointCount = a.m_pointCount;
            for (var b = 0; b < d.b2_maxManifoldPoints; b++)(this.m_points[b] instanceof x ? this.m_points[b] : null).Set(a.m_points[b]);
            this.m_localPlaneNormal.SetV(a.m_localPlaneNormal), this.m_localPoint.SetV(a.m_localPoint), this.m_type = a.m_type
        }, w.prototype.Copy = function() {
            var a = new w;
            return a.Set(this), a
        }, Box2D.postDefs.push(function() {
            Box2D.Collision.b2Manifold.e_circles = 1, Box2D.Collision.b2Manifold.e_faceA = 2, Box2D.Collision.b2Manifold.e_faceB = 4
        }), x.b2ManifoldPoint = function() {
            this.m_localPoint = new h, this.m_id = new m
        }, x.prototype.b2ManifoldPoint = function() {
            this.Reset()
        }, x.prototype.Reset = function() {
            this.m_localPoint.SetZero(), this.m_normalImpulse = 0, this.m_tangentImpulse = 0, this.m_id.key = 0
        }, x.prototype.Set = function(a) {
            this.m_localPoint.SetV(a.m_localPoint), this.m_normalImpulse = a.m_normalImpulse, this.m_tangentImpulse = a.m_tangentImpulse, this.m_id.Set(a.m_id)
        }, y.b2Point = function() {
            this.p = new h
        }, y.prototype.Support = function(a, b, c) {
            return void 0 === b && (b = 0), void 0 === c && (c = 0), this.p
        }, y.prototype.GetFirstVertex = function() {
            return this.p
        }, z.b2RayCastInput = function() {
            this.p1 = new h, this.p2 = new h
        }, z.prototype.b2RayCastInput = function(a, b, c) {
            void 0 === a && (a = null), void 0 === b && (b = null), void 0 === c && (c = 1), a && this.p1.SetV(a), b && this.p2.SetV(b), this.maxFraction = c
        }, A.b2RayCastOutput = function() {
            this.normal = new h
        }, B.b2Segment = function() {
            this.p1 = new h, this.p2 = new h
        }, B.prototype.TestSegment = function(a, b, c, d) {
            void 0 === d && (d = 0);
            var e = c.p1,
                f = c.p2.x - e.x,
                g = c.p2.y - e.y,
                h = this.p2.x - this.p1.x,
                i = this.p2.y - this.p1.y,
                j = i,
                k = -h,
                l = 100 * Box2D.MIN_VALUE,
                m = -(f * j + g * k);
            if (m > l) {
                var n = e.x - this.p1.x,
                    o = e.y - this.p1.y,
                    p = n * j + o * k;
                if (p >= 0 && d * m >= p) {
                    var q = -f * o + g * n;
                    if (q >= -l * m && m * (1 + l) >= q) {
                        p /= m;
                        var r = Math.sqrt(j * j + k * k);
                        return j /= r, k /= r, a[0] = p, b.Set(j, k), !0
                    }
                }
            }
            return !1
        }, B.prototype.Extend = function(a) {
            this.ExtendForward(a), this.ExtendBackward(a)
        }, B.prototype.ExtendForward = function(a) {
            var b = this.p2.x - this.p1.x,
                c = this.p2.y - this.p1.y,
                d = Math.min(b > 0 ? (a.upperBound.x - this.p1.x) / b : 0 > b ? (a.lowerBound.x - this.p1.x) / b : Number.POSITIVE_INFINITY, c > 0 ? (a.upperBound.y - this.p1.y) / c : 0 > c ? (a.lowerBound.y - this.p1.y) / c : Number.POSITIVE_INFINITY);
            this.p2.x = this.p1.x + b * d, this.p2.y = this.p1.y + c * d
        }, B.prototype.ExtendBackward = function(a) {
            var b = -this.p2.x + this.p1.x,
                c = -this.p2.y + this.p1.y,
                d = Math.min(b > 0 ? (a.upperBound.x - this.p2.x) / b : 0 > b ? (a.lowerBound.x - this.p2.x) / b : Number.POSITIVE_INFINITY, c > 0 ? (a.upperBound.y - this.p2.y) / c : 0 > c ? (a.lowerBound.y - this.p2.y) / c : Number.POSITIVE_INFINITY);
            this.p1.x = this.p2.x + b * d, this.p1.y = this.p2.y + c * d
        }, C.b2SeparationFunction = function() {
            this.m_localPoint = new h, this.m_axis = new h
        }, C.prototype.Initialize = function(a, b, c, f, g) {
            this.m_proxyA = b, this.m_proxyB = f;
            var i = parseInt(a.count);
            d.b2Assert(i > 0 && 3 > i);
            var j, k, l, m, n, o, p, q, r = 0,
                s = 0,
                t = 0,
                u = 0,
                v = 0,
                w = 0,
                x = 0,
                y = 0;
            if (1 == i) this.m_type = C.e_points, j = this.m_proxyA.GetVertex(a.indexA[0]), m = this.m_proxyB.GetVertex(a.indexB[0]), q = j, p = c.R, r = c.position.x + (p.col1.x * q.x + p.col2.x * q.y), s = c.position.y + (p.col1.y * q.x + p.col2.y * q.y), q = m, p = g.R, t = g.position.x + (p.col1.x * q.x + p.col2.x * q.y), u = g.position.y + (p.col1.y * q.x + p.col2.y * q.y), this.m_axis.x = t - r, this.m_axis.y = u - s, this.m_axis.Normalize();
            else if (a.indexB[0] == a.indexB[1]) this.m_type = C.e_faceA, k = this.m_proxyA.GetVertex(a.indexA[0]), l = this.m_proxyA.GetVertex(a.indexA[1]), m = this.m_proxyB.GetVertex(a.indexB[0]), this.m_localPoint.x = .5 * (k.x + l.x), this.m_localPoint.y = .5 * (k.y + l.y), this.m_axis = e.CrossVF(e.SubtractVV(l, k), 1), this.m_axis.Normalize(), q = this.m_axis, p = c.R, v = p.col1.x * q.x + p.col2.x * q.y, w = p.col1.y * q.x + p.col2.y * q.y, q = this.m_localPoint, p = c.R, r = c.position.x + (p.col1.x * q.x + p.col2.x * q.y), s = c.position.y + (p.col1.y * q.x + p.col2.y * q.y), q = m, p = g.R, t = g.position.x + (p.col1.x * q.x + p.col2.x * q.y), u = g.position.y + (p.col1.y * q.x + p.col2.y * q.y), x = (t - r) * v + (u - s) * w, 0 > x && this.m_axis.NegativeSelf();
            else if (a.indexA[0] == a.indexA[0]) this.m_type = C.e_faceB, n = this.m_proxyB.GetVertex(a.indexB[0]), o = this.m_proxyB.GetVertex(a.indexB[1]), j = this.m_proxyA.GetVertex(a.indexA[0]), this.m_localPoint.x = .5 * (n.x + o.x), this.m_localPoint.y = .5 * (n.y + o.y), this.m_axis = e.CrossVF(e.SubtractVV(o, n), 1), this.m_axis.Normalize(), q = this.m_axis, p = g.R, v = p.col1.x * q.x + p.col2.x * q.y, w = p.col1.y * q.x + p.col2.y * q.y, q = this.m_localPoint, p = g.R, t = g.position.x + (p.col1.x * q.x + p.col2.x * q.y), u = g.position.y + (p.col1.y * q.x + p.col2.y * q.y), q = j, p = c.R, r = c.position.x + (p.col1.x * q.x + p.col2.x * q.y), s = c.position.y + (p.col1.y * q.x + p.col2.y * q.y), x = (r - t) * v + (s - u) * w, 0 > x && this.m_axis.NegativeSelf();
            else {
                k = this.m_proxyA.GetVertex(a.indexA[0]), l = this.m_proxyA.GetVertex(a.indexA[1]), n = this.m_proxyB.GetVertex(a.indexB[0]), o = this.m_proxyB.GetVertex(a.indexB[1]);
                var z = (e.MulX(c, j), e.MulMV(c.R, e.SubtractVV(l, k))),
                    A = (e.MulX(g, m), e.MulMV(g.R, e.SubtractVV(o, n))),
                    B = z.x * z.x + z.y * z.y,
                    D = A.x * A.x + A.y * A.y,
                    E = e.SubtractVV(A, z),
                    F = z.x * E.x + z.y * E.y,
                    G = A.x * E.x + A.y * E.y,
                    H = z.x * A.x + z.y * A.y,
                    I = B * D - H * H;
                x = 0, 0 != I && (x = e.Clamp((H * G - F * D) / I, 0, 1));
                var J = (H * x + G) / D;
                0 > J && (J = 0, x = e.Clamp((H - F) / B, 0, 1)), j = new h, j.x = k.x + x * (l.x - k.x), j.y = k.y + x * (l.y - k.y), m = new h, m.x = n.x + x * (o.x - n.x), m.y = n.y + x * (o.y - n.y), 0 == x || 1 == x ? (this.m_type = C.e_faceB, this.m_axis = e.CrossVF(e.SubtractVV(o, n), 1), this.m_axis.Normalize(), this.m_localPoint = m, q = this.m_axis, p = g.R, v = p.col1.x * q.x + p.col2.x * q.y, w = p.col1.y * q.x + p.col2.y * q.y, q = this.m_localPoint, p = g.R, t = g.position.x + (p.col1.x * q.x + p.col2.x * q.y), u = g.position.y + (p.col1.y * q.x + p.col2.y * q.y), q = j, p = c.R, r = c.position.x + (p.col1.x * q.x + p.col2.x * q.y), s = c.position.y + (p.col1.y * q.x + p.col2.y * q.y), y = (r - t) * v + (s - u) * w, 0 > x && this.m_axis.NegativeSelf()) : (this.m_type = C.e_faceA, this.m_axis = e.CrossVF(e.SubtractVV(l, k), 1), this.m_localPoint = j, q = this.m_axis, p = c.R, v = p.col1.x * q.x + p.col2.x * q.y, w = p.col1.y * q.x + p.col2.y * q.y, q = this.m_localPoint, p = c.R, r = c.position.x + (p.col1.x * q.x + p.col2.x * q.y), s = c.position.y + (p.col1.y * q.x + p.col2.y * q.y), q = m, p = g.R, t = g.position.x + (p.col1.x * q.x + p.col2.x * q.y), u = g.position.y + (p.col1.y * q.x + p.col2.y * q.y), y = (t - r) * v + (u - s) * w, 0 > x && this.m_axis.NegativeSelf())
            }
        }, C.prototype.Evaluate = function(a, b) {
            var c, f, g, h, i, j, k, l = 0;
            switch (this.m_type) {
                case C.e_points:
                    return c = e.MulTMV(a.R, this.m_axis), f = e.MulTMV(b.R, this.m_axis.GetNegative()), g = this.m_proxyA.GetSupportVertex(c), h = this.m_proxyB.GetSupportVertex(f), i = e.MulX(a, g), j = e.MulX(b, h), l = (j.x - i.x) * this.m_axis.x + (j.y - i.y) * this.m_axis.y;
                case C.e_faceA:
                    return k = e.MulMV(a.R, this.m_axis), i = e.MulX(a, this.m_localPoint), f = e.MulTMV(b.R, k.GetNegative()), h = this.m_proxyB.GetSupportVertex(f), j = e.MulX(b, h), l = (j.x - i.x) * k.x + (j.y - i.y) * k.y;
                case C.e_faceB:
                    return k = e.MulMV(b.R, this.m_axis), j = e.MulX(b, this.m_localPoint), c = e.MulTMV(a.R, k.GetNegative()), g = this.m_proxyA.GetSupportVertex(c), i = e.MulX(a, g), l = (i.x - j.x) * k.x + (i.y - j.y) * k.y;
                default:
                    return d.b2Assert(!1), 0
            }
        }, Box2D.postDefs.push(function() {
            Box2D.Collision.b2SeparationFunction.e_points = 1, Box2D.Collision.b2SeparationFunction.e_faceA = 2, Box2D.Collision.b2SeparationFunction.e_faceB = 4
        }), D.b2Simplex = function() {
            this.m_v1 = new F, this.m_v2 = new F, this.m_v3 = new F, this.m_vertices = new Vector(3)
        }, D.prototype.b2Simplex = function() {
            this.m_vertices[0] = this.m_v1, this.m_vertices[1] = this.m_v2, this.m_vertices[2] = this.m_v3
        }, D.prototype.ReadCache = function(a, b, c, f, g) {
            d.b2Assert(0 <= a.count && a.count <= 3);
            var h, i;
            this.m_count = a.count;
            for (var j = this.m_vertices, k = 0; k < this.m_count; k++) {
                var l = j[k];
                l.indexA = a.indexA[k], l.indexB = a.indexB[k], h = b.GetVertex(l.indexA), i = f.GetVertex(l.indexB), l.wA = e.MulX(c, h), l.wB = e.MulX(g, i), l.w = e.SubtractVV(l.wB, l.wA), l.a = 0
            }
            if (this.m_count > 1) {
                var m = a.metric,
                    n = this.GetMetric();
                (.5 * m > n || n > 2 * m || n < Box2D.MIN_VALUE) && (this.m_count = 0)
            }
            0 == this.m_count && (l = j[0], l.indexA = 0, l.indexB = 0, h = b.GetVertex(0), i = f.GetVertex(0), l.wA = e.MulX(c, h), l.wB = e.MulX(g, i), l.w = e.SubtractVV(l.wB, l.wA), this.m_count = 1)
        }, D.prototype.WriteCache = function(a) {
            a.metric = this.GetMetric(), a.count = Box2D.parseUInt(this.m_count);
            for (var b = this.m_vertices, c = 0; c < this.m_count; c++) a.indexA[c] = Box2D.parseUInt(b[c].indexA), a.indexB[c] = Box2D.parseUInt(b[c].indexB)
        }, D.prototype.GetSearchDirection = function() {
            switch (this.m_count) {
                case 1:
                    return this.m_v1.w.GetNegative();
                case 2:
                    var a = e.SubtractVV(this.m_v2.w, this.m_v1.w),
                        b = e.CrossVV(a, this.m_v1.w.GetNegative());
                    return b > 0 ? e.CrossFV(1, a) : e.CrossVF(a, 1);
                default:
                    return d.b2Assert(!1), new h
            }
        }, D.prototype.GetClosestPoint = function() {
            switch (this.m_count) {
                case 0:
                    return d.b2Assert(!1), new h;
                case 1:
                    return this.m_v1.w;
                case 2:
                    return new h(this.m_v1.a * this.m_v1.w.x + this.m_v2.a * this.m_v2.w.x, this.m_v1.a * this.m_v1.w.y + this.m_v2.a * this.m_v2.w.y);
                default:
                    return d.b2Assert(!1), new h
            }
        }, D.prototype.GetWitnessPoints = function(a, b) {
            switch (this.m_count) {
                case 0:
                    d.b2Assert(!1);
                    break;
                case 1:
                    a.SetV(this.m_v1.wA), b.SetV(this.m_v1.wB);
                    break;
                case 2:
                    a.x = this.m_v1.a * this.m_v1.wA.x + this.m_v2.a * this.m_v2.wA.x, a.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y, b.x = this.m_v1.a * this.m_v1.wB.x + this.m_v2.a * this.m_v2.wB.x, b.y = this.m_v1.a * this.m_v1.wB.y + this.m_v2.a * this.m_v2.wB.y;
                    break;
                case 3:
                    b.x = a.x = this.m_v1.a * this.m_v1.wA.x + this.m_v2.a * this.m_v2.wA.x + this.m_v3.a * this.m_v3.wA.x, b.y = a.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y + this.m_v3.a * this.m_v3.wA.y;
                    break;
                default:
                    d.b2Assert(!1)
            }
        }, D.prototype.GetMetric = function() {
            switch (this.m_count) {
                case 0:
                    return d.b2Assert(!1), 0;
                case 1:
                    return 0;
                case 2:
                    return e.SubtractVV(this.m_v1.w, this.m_v2.w).Length();
                case 3:
                    return e.CrossVV(e.SubtractVV(this.m_v2.w, this.m_v1.w), e.SubtractVV(this.m_v3.w, this.m_v1.w));
                default:
                    return d.b2Assert(!1), 0
            }
        }, D.prototype.Solve2 = function() {
            var a = this.m_v1.w,
                b = this.m_v2.w,
                c = e.SubtractVV(b, a),
                d = -(a.x * c.x + a.y * c.y);
            if (0 >= d) return this.m_v1.a = 1, void(this.m_count = 1);
            var f = b.x * c.x + b.y * c.y;
            if (0 >= f) return this.m_v2.a = 1, this.m_count = 1, void this.m_v1.Set(this.m_v2);
            var g = 1 / (f + d);
            this.m_v1.a = f * g, this.m_v2.a = d * g, this.m_count = 2
        }, D.prototype.Solve3 = function() {
            var a = this.m_v1.w,
                b = this.m_v2.w,
                c = this.m_v3.w,
                d = e.SubtractVV(b, a),
                f = e.Dot(a, d),
                g = e.Dot(b, d),
                h = g,
                i = -f,
                j = e.SubtractVV(c, a),
                k = e.Dot(a, j),
                l = e.Dot(c, j),
                m = l,
                n = -k,
                o = e.SubtractVV(c, b),
                p = e.Dot(b, o),
                q = e.Dot(c, o),
                r = q,
                s = -p,
                t = e.CrossVV(d, j),
                u = t * e.CrossVV(b, c),
                v = t * e.CrossVV(c, a),
                w = t * e.CrossVV(a, b);
            if (0 >= i && 0 >= n) return this.m_v1.a = 1, void(this.m_count = 1);
            if (h > 0 && i > 0 && 0 >= w) {
                var x = 1 / (h + i);
                return this.m_v1.a = h * x, this.m_v2.a = i * x, void(this.m_count = 2)
            }
            if (m > 0 && n > 0 && 0 >= v) {
                var y = 1 / (m + n);
                return this.m_v1.a = m * y, this.m_v3.a = n * y, this.m_count = 2, void this.m_v2.Set(this.m_v3)
            }
            if (0 >= h && 0 >= s) return this.m_v2.a = 1, this.m_count = 1, void this.m_v1.Set(this.m_v2);
            if (0 >= m && 0 >= r) return this.m_v3.a = 1, this.m_count = 1, void this.m_v1.Set(this.m_v3);
            if (r > 0 && s > 0 && 0 >= u) {
                var z = 1 / (r + s);
                return this.m_v2.a = r * z, this.m_v3.a = s * z, this.m_count = 2, void this.m_v1.Set(this.m_v3)
            }
            var A = 1 / (u + v + w);
            this.m_v1.a = u * A, this.m_v2.a = v * A, this.m_v3.a = w * A, this.m_count = 3
        }, E.b2SimplexCache = function() {
            this.indexA = new Vector_a2j_Number(3), this.indexB = new Vector_a2j_Number(3)
        }, F.b2SimplexVertex = function() {}, F.prototype.Set = function(a) {
            this.wA.SetV(a.wA), this.wB.SetV(a.wB), this.w.SetV(a.w), this.a = a.a, this.indexA = a.indexA, this.indexB = a.indexB
        }, G.b2TimeOfImpact = function() {}, G.TimeOfImpact = function(a) {
            ++G.b2_toiCalls;
            var b = a.proxyA,
                c = a.proxyB,
                f = a.sweepA,
                g = a.sweepB;
            d.b2Assert(f.t0 == g.t0), d.b2Assert(1 - f.t0 > Box2D.MIN_VALUE);
            var h = b.m_radius + c.m_radius,
                i = a.tolerance,
                j = 0,
                k = 1e3,
                l = 0,
                m = 0;
            for (G.s_cache.count = 0, G.s_distanceInput.useRadii = !1;;) {
                if (f.GetTransform(G.s_xfA, j), g.GetTransform(G.s_xfB, j), G.s_distanceInput.proxyA = b, G.s_distanceInput.proxyB = c, G.s_distanceInput.transformA = G.s_xfA, G.s_distanceInput.transformB = G.s_xfB, o.Distance(G.s_distanceOutput, G.s_cache, G.s_distanceInput), G.s_distanceOutput.distance <= 0) {
                    j = 1;
                    break
                }
                G.s_fcn.Initialize(G.s_cache, b, G.s_xfA, c, G.s_xfB);
                var n = G.s_fcn.Evaluate(G.s_xfA, G.s_xfB);
                if (0 >= n) {
                    j = 1;
                    break
                }
                if (0 == l && (m = n > h ? e.Max(h - i, .75 * h) : e.Max(n - i, .02 * h)), .5 * i > n - m) {
                    if (0 == l) {
                        j = 1;
                        break
                    }
                    break
                }
                var p = j,
                    q = j,
                    r = 1,
                    s = n;
                f.GetTransform(G.s_xfA, r), g.GetTransform(G.s_xfB, r);
                var t = G.s_fcn.Evaluate(G.s_xfA, G.s_xfB);
                if (t >= m) {
                    j = 1;
                    break
                }
                for (var u = 0;;) {
                    var v = 0;
                    v = 1 & u ? q + (m - s) * (r - q) / (t - s) : .5 * (q + r), f.GetTransform(G.s_xfA, v), g.GetTransform(G.s_xfB, v);
                    var w = G.s_fcn.Evaluate(G.s_xfA, G.s_xfB);
                    if (e.Abs(w - m) < .025 * i) {
                        p = v;
                        break
                    }
                    if (w > m ? (q = v, s = w) : (r = v, t = w), ++u, ++G.b2_toiRootIters, 50 == u) break
                }
                if (G.b2_toiMaxRootIters = e.Max(G.b2_toiMaxRootIters, u), p < (1 + 100 * Box2D.MIN_VALUE) * j) break;
                if (j = p, l++, ++G.b2_toiIters, l == k) break
            }
            return G.b2_toiMaxIters = e.Max(G.b2_toiMaxIters, l), j
        }, Box2D.postDefs.push(function() {
            Box2D.Collision.b2TimeOfImpact.b2_toiCalls = 0, Box2D.Collision.b2TimeOfImpact.b2_toiIters = 0, Box2D.Collision.b2TimeOfImpact.b2_toiMaxIters = 0, Box2D.Collision.b2TimeOfImpact.b2_toiRootIters = 0, Box2D.Collision.b2TimeOfImpact.b2_toiMaxRootIters = 0, Box2D.Collision.b2TimeOfImpact.s_cache = new E, Box2D.Collision.b2TimeOfImpact.s_distanceInput = new p, Box2D.Collision.b2TimeOfImpact.s_xfA = new g, Box2D.Collision.b2TimeOfImpact.s_xfB = new g, Box2D.Collision.b2TimeOfImpact.s_fcn = new C, Box2D.Collision.b2TimeOfImpact.s_distanceOutput = new q
        }), H.b2TOIInput = function() {
            this.proxyA = new r, this.proxyB = new r, this.sweepA = new f, this.sweepB = new f
        }, I.b2WorldManifold = function() {
            this.m_normal = new h
        }, I.prototype.b2WorldManifold = function() {
            this.m_points = new Vector(d.b2_maxManifoldPoints);
            for (var a = 0; a < d.b2_maxManifoldPoints; a++) this.m_points[a] = new h
        }, I.prototype.Initialize = function(a, b, c, d, e) {
            if (void 0 === c && (c = 0), void 0 === e && (e = 0), 0 != a.m_pointCount) {
                var f, g, h = 0,
                    i = 0,
                    j = 0,
                    k = 0,
                    l = 0,
                    m = 0,
                    n = 0;
                switch (a.m_type) {
                    case w.e_circles:
                        g = b.R, f = a.m_localPoint;
                        var o = b.position.x + g.col1.x * f.x + g.col2.x * f.y,
                            p = b.position.y + g.col1.y * f.x + g.col2.y * f.y;
                        g = d.R, f = a.m_points[0].m_localPoint;
                        var q = d.position.x + g.col1.x * f.x + g.col2.x * f.y,
                            r = d.position.y + g.col1.y * f.x + g.col2.y * f.y,
                            s = q - o,
                            t = r - p,
                            u = s * s + t * t;
                        if (u > Box2D.MIN_VALUE * Box2D.MIN_VALUE) {
                            var v = Math.sqrt(u);
                            this.m_normal.x = s / v, this.m_normal.y = t / v
                        } else this.m_normal.x = 1, this.m_normal.y = 0;
                        var x = o + c * this.m_normal.x,
                            y = p + c * this.m_normal.y,
                            z = q - e * this.m_normal.x,
                            A = r - e * this.m_normal.y;
                        this.m_points[0].x = .5 * (x + z), this.m_points[0].y = .5 * (y + A);
                        break;
                    case w.e_faceA:
                        for (g = b.R, f = a.m_localPlaneNormal, i = g.col1.x * f.x + g.col2.x * f.y, j = g.col1.y * f.x + g.col2.y * f.y, g = b.R, f = a.m_localPoint, k = b.position.x + g.col1.x * f.x + g.col2.x * f.y, l = b.position.y + g.col1.y * f.x + g.col2.y * f.y, this.m_normal.x = i, this.m_normal.y = j, h = 0; h < a.m_pointCount; h++) g = d.R, f = a.m_points[h].m_localPoint, m = d.position.x + g.col1.x * f.x + g.col2.x * f.y, n = d.position.y + g.col1.y * f.x + g.col2.y * f.y, this.m_points[h].x = m + .5 * (c - (m - k) * i - (n - l) * j - e) * i, this.m_points[h].y = n + .5 * (c - (m - k) * i - (n - l) * j - e) * j;
                        break;
                    case w.e_faceB:
                        for (g = d.R, f = a.m_localPlaneNormal, i = g.col1.x * f.x + g.col2.x * f.y, j = g.col1.y * f.x + g.col2.y * f.y, g = d.R, f = a.m_localPoint, k = d.position.x + g.col1.x * f.x + g.col2.x * f.y, l = d.position.y + g.col1.y * f.x + g.col2.y * f.y, this.m_normal.x = -i, this.m_normal.y = -j, h = 0; h < a.m_pointCount; h++) g = b.R, f = a.m_points[h].m_localPoint, m = b.position.x + g.col1.x * f.x + g.col2.x * f.y, n = b.position.y + g.col1.y * f.x + g.col2.y * f.y, this.m_points[h].x = m + .5 * (e - (m - k) * i - (n - l) * j - c) * i, this.m_points[h].y = n + .5 * (e - (m - k) * i - (n - l) * j - c) * j
                }
            }
        }, J.ClipVertex = function() {
            this.v = new h, this.id = new m
        }, J.prototype.Set = function(a) {
            this.v.SetV(a.v), this.id.Set(a.id)
        }, K.Features = function() {}, Object.defineProperty(K.prototype, "referenceEdge", {
            enumerable: !1,
            configurable: !0,
            get: function() {
                return this._referenceEdge
            }
        }), Object.defineProperty(K.prototype, "referenceEdge", {
            enumerable: !1,
            configurable: !0,
            set: function(a) {
                void 0 === a && (a = 0), this._referenceEdge = a, this._m_id._key = 4294967040 & this._m_id._key | 255 & this._referenceEdge
            }
        }), Object.defineProperty(K.prototype, "incidentEdge", {
            enumerable: !1,
            configurable: !0,
            get: function() {
                return this._incidentEdge
            }
        }), Object.defineProperty(K.prototype, "incidentEdge", {
            enumerable: !1,
            configurable: !0,
            set: function(a) {
                void 0 === a && (a = 0), this._incidentEdge = a, this._m_id._key = 4294902015 & this._m_id._key | this._incidentEdge << 8 & 65280
            }
        }), Object.defineProperty(K.prototype, "incidentVertex", {
            enumerable: !1,
            configurable: !0,
            get: function() {
                return this._incidentVertex
            }
        }), Object.defineProperty(K.prototype, "incidentVertex", {
            enumerable: !1,
            configurable: !0,
            set: function(a) {
                void 0 === a && (a = 0), this._incidentVertex = a, this._m_id._key = 4278255615 & this._m_id._key | this._incidentVertex << 16 & 16711680
            }
        }), Object.defineProperty(K.prototype, "flip", {
            enumerable: !1,
            configurable: !0,
            get: function() {
                return this._flip
            }
        }), Object.defineProperty(K.prototype, "flip", {
            enumerable: !1,
            configurable: !0,
            set: function(a) {
                void 0 === a && (a = 0), this._flip = a, this._m_id._key = 16777215 & this._m_id._key | this._flip << 24 & 4278190080
            }
        })
    }(),
    function() {
        {
            var a = (Box2D.Common.b2Color, Box2D.Common.b2internal, Box2D.Common.b2Settings),
                b = Box2D.Collision.Shapes.b2CircleShape,
                c = Box2D.Collision.Shapes.b2EdgeChainDef,
                d = Box2D.Collision.Shapes.b2EdgeShape,
                e = Box2D.Collision.Shapes.b2MassData,
                f = Box2D.Collision.Shapes.b2PolygonShape,
                g = Box2D.Collision.Shapes.b2Shape,
                h = Box2D.Common.Math.b2Mat22,
                i = (Box2D.Common.Math.b2Mat33, Box2D.Common.Math.b2Math),
                j = (Box2D.Common.Math.b2Sweep, Box2D.Common.Math.b2Transform),
                k = Box2D.Common.Math.b2Vec2,
                l = (Box2D.Common.Math.b2Vec3, Box2D.Dynamics.b2Body, Box2D.Dynamics.b2BodyDef, Box2D.Dynamics.b2ContactFilter, Box2D.Dynamics.b2ContactImpulse, Box2D.Dynamics.b2ContactListener, Box2D.Dynamics.b2ContactManager, Box2D.Dynamics.b2DebugDraw, Box2D.Dynamics.b2DestructionListener, Box2D.Dynamics.b2FilterData, Box2D.Dynamics.b2Fixture, Box2D.Dynamics.b2FixtureDef, Box2D.Dynamics.b2Island, Box2D.Dynamics.b2TimeStep, Box2D.Dynamics.b2World, Box2D.Collision.b2AABB, Box2D.Collision.b2Bound, Box2D.Collision.b2BoundValues, Box2D.Collision.b2Collision, Box2D.Collision.b2ContactID, Box2D.Collision.b2ContactPoint, Box2D.Collision.b2Distance),
                m = Box2D.Collision.b2DistanceInput,
                n = Box2D.Collision.b2DistanceOutput,
                o = Box2D.Collision.b2DistanceProxy,
                p = (Box2D.Collision.b2DynamicTree, Box2D.Collision.b2DynamicTreeBroadPhase, Box2D.Collision.b2DynamicTreeNode, Box2D.Collision.b2DynamicTreePair, Box2D.Collision.b2Manifold, Box2D.Collision.b2ManifoldPoint, Box2D.Collision.b2Point, Box2D.Collision.b2RayCastInput, Box2D.Collision.b2RayCastOutput, Box2D.Collision.b2Segment, Box2D.Collision.b2SeparationFunction, Box2D.Collision.b2Simplex, Box2D.Collision.b2SimplexCache);
            Box2D.Collision.b2SimplexVertex, Box2D.Collision.b2TimeOfImpact, Box2D.Collision.b2TOIInput,
                Box2D.Collision.b2WorldManifold, Box2D.Collision.ClipVertex, Box2D.Collision.Features, Box2D.Collision.IBroadPhase
        }
        Box2D.inherit(b, Box2D.Collision.Shapes.b2Shape), b.prototype.__super = Box2D.Collision.Shapes.b2Shape.prototype, b.b2CircleShape = function() {
            Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this, arguments), this.m_p = new k
        }, b.prototype.Copy = function() {
            var a = new b;
            return a.Set(this), a
        }, b.prototype.Set = function(a) {
            if (this.__super.Set.call(this, a), Box2D.is(a, b)) {
                var c = a instanceof b ? a : null;
                this.m_p.SetV(c.m_p)
            }
        }, b.prototype.TestPoint = function(a, b) {
            var c = a.R,
                d = a.position.x + (c.col1.x * this.m_p.x + c.col2.x * this.m_p.y),
                e = a.position.y + (c.col1.y * this.m_p.x + c.col2.y * this.m_p.y);
            return d = b.x - d, e = b.y - e, d * d + e * e <= this.m_radius * this.m_radius
        }, b.prototype.RayCast = function(a, b, c) {
            var d = c.R,
                e = c.position.x + (d.col1.x * this.m_p.x + d.col2.x * this.m_p.y),
                f = c.position.y + (d.col1.y * this.m_p.x + d.col2.y * this.m_p.y),
                g = b.p1.x - e,
                h = b.p1.y - f,
                i = g * g + h * h - this.m_radius * this.m_radius,
                j = b.p2.x - b.p1.x,
                k = b.p2.y - b.p1.y,
                l = g * j + h * k,
                m = j * j + k * k,
                n = l * l - m * i;
            if (0 > n || m < Box2D.MIN_VALUE) return !1;
            var o = -(l + Math.sqrt(n));
            return o >= 0 && o <= b.maxFraction * m ? (o /= m, a.fraction = o, a.normal.x = g + o * j, a.normal.y = h + o * k, a.normal.Normalize(), !0) : !1
        }, b.prototype.ComputeAABB = function(a, b) {
            var c = b.R,
                d = b.position.x + (c.col1.x * this.m_p.x + c.col2.x * this.m_p.y),
                e = b.position.y + (c.col1.y * this.m_p.x + c.col2.y * this.m_p.y);
            a.lowerBound.Set(d - this.m_radius, e - this.m_radius), a.upperBound.Set(d + this.m_radius, e + this.m_radius)
        }, b.prototype.ComputeMass = function(b, c) {
            void 0 === c && (c = 0), b.mass = c * a.b2_pi * this.m_radius * this.m_radius, b.center.SetV(this.m_p), b.I = b.mass * (.5 * this.m_radius * this.m_radius + (this.m_p.x * this.m_p.x + this.m_p.y * this.m_p.y))
        }, b.prototype.ComputeSubmergedArea = function(a, b, c, d) {
            void 0 === b && (b = 0);
            var e = i.MulX(c, this.m_p),
                f = -(i.Dot(a, e) - b);
            if (f < -this.m_radius + Box2D.MIN_VALUE) return 0;
            if (f > this.m_radius) return d.SetV(e), Math.PI * this.m_radius * this.m_radius;
            var g = this.m_radius * this.m_radius,
                h = f * f,
                j = g * (Math.asin(f / this.m_radius) + Math.PI / 2) + f * Math.sqrt(g - h),
                k = -2 / 3 * Math.pow(g - h, 1.5) / j;
            return d.x = e.x + a.x * k, d.y = e.y + a.y * k, j
        }, b.prototype.GetLocalPosition = function() {
            return this.m_p
        }, b.prototype.SetLocalPosition = function(a) {
            this.m_p.SetV(a)
        }, b.prototype.GetRadius = function() {
            return this.m_radius
        }, b.prototype.SetRadius = function(a) {
            void 0 === a && (a = 0), this.m_radius = a
        }, b.prototype.b2CircleShape = function(a) {
            void 0 === a && (a = 0), this.__super.b2Shape.call(this), this.m_type = g.e_circleShape, this.m_radius = a
        }, c.b2EdgeChainDef = function() {}, c.prototype.b2EdgeChainDef = function() {
            this.vertexCount = 0, this.isALoop = !0, this.vertices = []
        }, Box2D.inherit(d, Box2D.Collision.Shapes.b2Shape), d.prototype.__super = Box2D.Collision.Shapes.b2Shape.prototype, d.b2EdgeShape = function() {
            Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this, arguments), this.s_supportVec = new k, this.m_v1 = new k, this.m_v2 = new k, this.m_coreV1 = new k, this.m_coreV2 = new k, this.m_normal = new k, this.m_direction = new k, this.m_cornerDir1 = new k, this.m_cornerDir2 = new k
        }, d.prototype.TestPoint = function() {
            return !1
        }, d.prototype.RayCast = function(a, b, c) {
            var d, e = b.p2.x - b.p1.x,
                f = b.p2.y - b.p1.y;
            d = c.R;
            var g = c.position.x + (d.col1.x * this.m_v1.x + d.col2.x * this.m_v1.y),
                h = c.position.y + (d.col1.y * this.m_v1.x + d.col2.y * this.m_v1.y),
                i = c.position.y + (d.col1.y * this.m_v2.x + d.col2.y * this.m_v2.y) - h,
                j = -(c.position.x + (d.col1.x * this.m_v2.x + d.col2.x * this.m_v2.y) - g),
                k = 100 * Box2D.MIN_VALUE,
                l = -(e * i + f * j);
            if (l > k) {
                var m = b.p1.x - g,
                    n = b.p1.y - h,
                    o = m * i + n * j;
                if (o >= 0 && o <= b.maxFraction * l) {
                    var p = -e * n + f * m;
                    if (p >= -k * l && l * (1 + k) >= p) {
                        o /= l, a.fraction = o;
                        var q = Math.sqrt(i * i + j * j);
                        return a.normal.x = i / q, a.normal.y = j / q, !0
                    }
                }
            }
            return !1
        }, d.prototype.ComputeAABB = function(a, b) {
            var c = b.R,
                d = b.position.x + (c.col1.x * this.m_v1.x + c.col2.x * this.m_v1.y),
                e = b.position.y + (c.col1.y * this.m_v1.x + c.col2.y * this.m_v1.y),
                f = b.position.x + (c.col1.x * this.m_v2.x + c.col2.x * this.m_v2.y),
                g = b.position.y + (c.col1.y * this.m_v2.x + c.col2.y * this.m_v2.y);
            f > d ? (a.lowerBound.x = d, a.upperBound.x = f) : (a.lowerBound.x = f, a.upperBound.x = d), g > e ? (a.lowerBound.y = e, a.upperBound.y = g) : (a.lowerBound.y = g, a.upperBound.y = e)
        }, d.prototype.ComputeMass = function(a, b) {
            void 0 === b && (b = 0), a.mass = 0, a.center.SetV(this.m_v1), a.I = 0
        }, d.prototype.ComputeSubmergedArea = function(a, b, c, d) {
            void 0 === b && (b = 0);
            var e = new k(a.x * b, a.y * b),
                f = i.MulX(c, this.m_v1),
                g = i.MulX(c, this.m_v2),
                h = i.Dot(a, f) - b,
                j = i.Dot(a, g) - b;
            if (h > 0) {
                if (j > 0) return 0;
                f.x = -j / (h - j) * f.x + h / (h - j) * g.x, f.y = -j / (h - j) * f.y + h / (h - j) * g.y
            } else j > 0 && (g.x = -j / (h - j) * f.x + h / (h - j) * g.x, g.y = -j / (h - j) * f.y + h / (h - j) * g.y);
            return d.x = (e.x + f.x + g.x) / 3, d.y = (e.y + f.y + g.y) / 3, .5 * ((f.x - e.x) * (g.y - e.y) - (f.y - e.y) * (g.x - e.x))
        }, d.prototype.GetLength = function() {
            return this.m_length
        }, d.prototype.GetVertex1 = function() {
            return this.m_v1
        }, d.prototype.GetVertex2 = function() {
            return this.m_v2
        }, d.prototype.GetCoreVertex1 = function() {
            return this.m_coreV1
        }, d.prototype.GetCoreVertex2 = function() {
            return this.m_coreV2
        }, d.prototype.GetNormalVector = function() {
            return this.m_normal
        }, d.prototype.GetDirectionVector = function() {
            return this.m_direction
        }, d.prototype.GetCorner1Vector = function() {
            return this.m_cornerDir1
        }, d.prototype.GetCorner2Vector = function() {
            return this.m_cornerDir2
        }, d.prototype.Corner1IsConvex = function() {
            return this.m_cornerConvex1
        }, d.prototype.Corner2IsConvex = function() {
            return this.m_cornerConvex2
        }, d.prototype.GetFirstVertex = function(a) {
            var b = a.R;
            return new k(a.position.x + (b.col1.x * this.m_coreV1.x + b.col2.x * this.m_coreV1.y), a.position.y + (b.col1.y * this.m_coreV1.x + b.col2.y * this.m_coreV1.y))
        }, d.prototype.GetNextEdge = function() {
            return this.m_nextEdge
        }, d.prototype.GetPrevEdge = function() {
            return this.m_prevEdge
        }, d.prototype.Support = function(a, b, c) {
            void 0 === b && (b = 0), void 0 === c && (c = 0);
            var d = a.R,
                e = a.position.x + (d.col1.x * this.m_coreV1.x + d.col2.x * this.m_coreV1.y),
                f = a.position.y + (d.col1.y * this.m_coreV1.x + d.col2.y * this.m_coreV1.y),
                g = a.position.x + (d.col1.x * this.m_coreV2.x + d.col2.x * this.m_coreV2.y),
                h = a.position.y + (d.col1.y * this.m_coreV2.x + d.col2.y * this.m_coreV2.y);
            return e * b + f * c > g * b + h * c ? (this.s_supportVec.x = e, this.s_supportVec.y = f) : (this.s_supportVec.x = g, this.s_supportVec.y = h), this.s_supportVec
        }, d.prototype.b2EdgeShape = function(b, c) {
            this.__super.b2Shape.call(this), this.m_type = g.e_edgeShape, this.m_prevEdge = null, this.m_nextEdge = null, this.m_v1 = b, this.m_v2 = c, this.m_direction.Set(this.m_v2.x - this.m_v1.x, this.m_v2.y - this.m_v1.y), this.m_length = this.m_direction.Normalize(), this.m_normal.Set(this.m_direction.y, -this.m_direction.x), this.m_coreV1.Set(-a.b2_toiSlop * (this.m_normal.x - this.m_direction.x) + this.m_v1.x, -a.b2_toiSlop * (this.m_normal.y - this.m_direction.y) + this.m_v1.y), this.m_coreV2.Set(-a.b2_toiSlop * (this.m_normal.x + this.m_direction.x) + this.m_v2.x, -a.b2_toiSlop * (this.m_normal.y + this.m_direction.y) + this.m_v2.y), this.m_cornerDir1 = this.m_normal, this.m_cornerDir2.Set(-this.m_normal.x, -this.m_normal.y)
        }, d.prototype.SetPrevEdge = function(a, b, c, d) {
            this.m_prevEdge = a, this.m_coreV1 = b, this.m_cornerDir1 = c, this.m_cornerConvex1 = d
        }, d.prototype.SetNextEdge = function(a, b, c, d) {
            this.m_nextEdge = a, this.m_coreV2 = b, this.m_cornerDir2 = c, this.m_cornerConvex2 = d
        }, e.b2MassData = function() {
            this.mass = 0, this.center = new k(0, 0), this.I = 0
        }, Box2D.inherit(f, Box2D.Collision.Shapes.b2Shape), f.prototype.__super = Box2D.Collision.Shapes.b2Shape.prototype, f.b2PolygonShape = function() {
            Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this, arguments)
        }, f.prototype.Copy = function() {
            var a = new f;
            return a.Set(this), a
        }, f.prototype.Set = function(a) {
            if (this.__super.Set.call(this, a), Box2D.is(a, f)) {
                var b = a instanceof f ? a : null;
                this.m_centroid.SetV(b.m_centroid), this.m_vertexCount = b.m_vertexCount, this.Reserve(this.m_vertexCount);
                for (var c = 0; c < this.m_vertexCount; c++) this.m_vertices[c].SetV(b.m_vertices[c]), this.m_normals[c].SetV(b.m_normals[c])
            }
        }, f.prototype.SetAsArray = function(a, b) {
            void 0 === b && (b = 0);
            var c, d = new Vector,
                e = 0;
            for (e = 0; e < a.length; ++e) c = a[e], d.push(c);
            this.SetAsVector(d, b)
        }, f.AsArray = function(a, b) {
            void 0 === b && (b = 0);
            var c = new f;
            return c.SetAsArray(a, b), c
        }, f.prototype.SetAsVector = function(b, c) {
            void 0 === c && (c = 0), 0 == c && (c = b.length), a.b2Assert(c >= 2), this.m_vertexCount = c, this.Reserve(c);
            var d = 0;
            for (d = 0; d < this.m_vertexCount; d++) this.m_vertices[d].SetV(b[d]);
            for (d = 0; d < this.m_vertexCount; ++d) {
                var e = parseInt(d),
                    g = parseInt(d + 1 < this.m_vertexCount ? d + 1 : 0),
                    h = i.SubtractVV(this.m_vertices[g], this.m_vertices[e]);
                a.b2Assert(h.LengthSquared() > Box2D.MIN_VALUE), this.m_normals[d].SetV(i.CrossVF(h, 1)), this.m_normals[d].Normalize()
            }
            this.m_centroid = f.ComputeCentroid(this.m_vertices, this.m_vertexCount)
        }, f.AsVector = function(a, b) {
            void 0 === b && (b = 0);
            var c = new f;
            return c.SetAsVector(a, b), c
        }, f.prototype.SetAsBox = function(a, b) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), this.m_vertexCount = 4, this.Reserve(4), this.m_vertices[0].Set(-a, -b), this.m_vertices[1].Set(a, -b), this.m_vertices[2].Set(a, b), this.m_vertices[3].Set(-a, b), this.m_normals[0].Set(0, -1), this.m_normals[1].Set(1, 0), this.m_normals[2].Set(0, 1), this.m_normals[3].Set(-1, 0), this.m_centroid.SetZero()
        }, f.AsBox = function(a, b) {
            void 0 === a && (a = 0), void 0 === b && (b = 0);
            var c = new f;
            return c.SetAsBox(a, b), c
        }, f.prototype.SetAsOrientedBox = function(a, b, c, d) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === c && (c = null), void 0 === d && (d = 0), this.m_vertexCount = 4, this.Reserve(4), this.m_vertices[0].Set(-a, -b), this.m_vertices[1].Set(a, -b), this.m_vertices[2].Set(a, b), this.m_vertices[3].Set(-a, b), this.m_normals[0].Set(0, -1), this.m_normals[1].Set(1, 0), this.m_normals[2].Set(0, 1), this.m_normals[3].Set(-1, 0), this.m_centroid = c;
            var e = new j;
            e.position = c, e.R.Set(d);
            for (var f = 0; f < this.m_vertexCount; ++f) this.m_vertices[f] = i.MulX(e, this.m_vertices[f]), this.m_normals[f] = i.MulMV(e.R, this.m_normals[f])
        }, f.AsOrientedBox = function(a, b, c, d) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === c && (c = null), void 0 === d && (d = 0);
            var e = new f;
            return e.SetAsOrientedBox(a, b, c, d), e
        }, f.prototype.SetAsEdge = function(a, b) {
            this.m_vertexCount = 2, this.Reserve(2), this.m_vertices[0].SetV(a), this.m_vertices[1].SetV(b), this.m_centroid.x = .5 * (a.x + b.x), this.m_centroid.y = .5 * (a.y + b.y), this.m_normals[0] = i.CrossVF(i.SubtractVV(b, a), 1), this.m_normals[0].Normalize(), this.m_normals[1].x = -this.m_normals[0].x, this.m_normals[1].y = -this.m_normals[0].y
        }, f.AsEdge = function(a, b) {
            var c = new f;
            return c.SetAsEdge(a, b), c
        }, f.prototype.TestPoint = function(a, b) {
            for (var c, d = a.R, e = b.x - a.position.x, f = b.y - a.position.y, g = e * d.col1.x + f * d.col1.y, h = e * d.col2.x + f * d.col2.y, i = 0; i < this.m_vertexCount; ++i) {
                c = this.m_vertices[i], e = g - c.x, f = h - c.y, c = this.m_normals[i];
                var j = c.x * e + c.y * f;
                if (j > 0) return !1
            }
            return !0
        }, f.prototype.RayCast = function(a, b, c) {
            var d, e, f = 0,
                g = b.maxFraction,
                h = 0,
                i = 0;
            h = b.p1.x - c.position.x, i = b.p1.y - c.position.y, d = c.R;
            var j = h * d.col1.x + i * d.col1.y,
                k = h * d.col2.x + i * d.col2.y;
            h = b.p2.x - c.position.x, i = b.p2.y - c.position.y, d = c.R;
            for (var l = h * d.col1.x + i * d.col1.y, m = h * d.col2.x + i * d.col2.y, n = l - j, o = m - k, p = parseInt(-1), q = 0; q < this.m_vertexCount; ++q) {
                e = this.m_vertices[q], h = e.x - j, i = e.y - k, e = this.m_normals[q];
                var r = e.x * h + e.y * i,
                    s = e.x * n + e.y * o;
                if (0 == s) {
                    if (0 > r) return !1
                } else 0 > s && f * s > r ? (f = r / s, p = q) : s > 0 && g * s > r && (g = r / s);
                if (g < f - Box2D.MIN_VALUE) return !1
            }
            return p >= 0 ? (a.fraction = f, d = c.R, e = this.m_normals[p], a.normal.x = d.col1.x * e.x + d.col2.x * e.y, a.normal.y = d.col1.y * e.x + d.col2.y * e.y, !0) : !1
        }, f.prototype.ComputeAABB = function(a, b) {
            for (var c = b.R, d = this.m_vertices[0], e = b.position.x + (c.col1.x * d.x + c.col2.x * d.y), f = b.position.y + (c.col1.y * d.x + c.col2.y * d.y), g = e, h = f, i = 1; i < this.m_vertexCount; ++i) {
                d = this.m_vertices[i];
                var j = b.position.x + (c.col1.x * d.x + c.col2.x * d.y),
                    k = b.position.y + (c.col1.y * d.x + c.col2.y * d.y);
                e = j > e ? e : j, f = k > f ? f : k, g = g > j ? g : j, h = h > k ? h : k
            }
            a.lowerBound.x = e - this.m_radius, a.lowerBound.y = f - this.m_radius, a.upperBound.x = g + this.m_radius, a.upperBound.y = h + this.m_radius
        }, f.prototype.ComputeMass = function(a, b) {
            if (void 0 === b && (b = 0), 2 == this.m_vertexCount) return a.center.x = .5 * (this.m_vertices[0].x + this.m_vertices[1].x), a.center.y = .5 * (this.m_vertices[0].y + this.m_vertices[1].y), a.mass = 0, void(a.I = 0);
            for (var c = 0, d = 0, e = 0, f = 0, g = 0, h = 0, i = 1 / 3, j = 0; j < this.m_vertexCount; ++j) {
                var k = this.m_vertices[j],
                    l = j + 1 < this.m_vertexCount ? this.m_vertices[parseInt(j + 1)] : this.m_vertices[0],
                    m = k.x - g,
                    n = k.y - h,
                    o = l.x - g,
                    p = l.y - h,
                    q = m * p - n * o,
                    r = .5 * q;
                e += r, c += r * i * (g + k.x + l.x), d += r * i * (h + k.y + l.y);
                var s = g,
                    t = h,
                    u = m,
                    v = n,
                    w = o,
                    x = p,
                    y = i * (.25 * (u * u + w * u + w * w) + (s * u + s * w)) + .5 * s * s,
                    z = i * (.25 * (v * v + x * v + x * x) + (t * v + t * x)) + .5 * t * t;
                f += q * (y + z)
            }
            a.mass = b * e, c *= 1 / e, d *= 1 / e, a.center.Set(c, d), a.I = b * f
        }, f.prototype.ComputeSubmergedArea = function(a, b, c, d) {
            void 0 === b && (b = 0);
            var f = i.MulTMV(c.R, a),
                g = b - i.Dot(a, c.position),
                h = new Vector_a2j_Number(0),
                j = 0,
                l = parseInt(-1),
                m = parseInt(-1),
                n = !1,
                o = 0;
            for (o = 0; o < this.m_vertexCount; ++o) {
                h[o] = i.Dot(f, this.m_vertices[o]) - g;
                var p = h[o] < -Box2D.MIN_VALUE;
                o > 0 && (p ? n || (l = o - 1, j++) : n && (m = o - 1, j++)), n = p
            }
            switch (j) {
                case 0:
                    if (n) {
                        var q = new e;
                        return this.ComputeMass(q, 1), d.SetV(i.MulX(c, q.center)), q.mass
                    }
                    return 0;
                case 1:
                    -1 == l ? l = this.m_vertexCount - 1 : m = this.m_vertexCount - 1
            }
            var r, s = parseInt((l + 1) % this.m_vertexCount),
                t = parseInt((m + 1) % this.m_vertexCount),
                u = (0 - h[l]) / (h[s] - h[l]),
                v = (0 - h[m]) / (h[t] - h[m]),
                w = new k(this.m_vertices[l].x * (1 - u) + this.m_vertices[s].x * u, this.m_vertices[l].y * (1 - u) + this.m_vertices[s].y * u),
                x = new k(this.m_vertices[m].x * (1 - v) + this.m_vertices[t].x * v, this.m_vertices[m].y * (1 - v) + this.m_vertices[t].y * v),
                y = 0,
                z = new k,
                A = this.m_vertices[s];
            for (o = s; o != t;) {
                o = (o + 1) % this.m_vertexCount, r = o == t ? x : this.m_vertices[o];
                var B = .5 * ((A.x - w.x) * (r.y - w.y) - (A.y - w.y) * (r.x - w.x));
                y += B, z.x += B * (w.x + A.x + r.x) / 3, z.y += B * (w.y + A.y + r.y) / 3, A = r
            }
            return z.Multiply(1 / y), d.SetV(i.MulX(c, z)), y
        }, f.prototype.GetVertexCount = function() {
            return this.m_vertexCount
        }, f.prototype.GetVertices = function() {
            return this.m_vertices
        }, f.prototype.GetNormals = function() {
            return this.m_normals
        }, f.prototype.GetSupport = function(a) {
            for (var b = 0, c = this.m_vertices[0].x * a.x + this.m_vertices[0].y * a.y, d = 1; d < this.m_vertexCount; ++d) {
                var e = this.m_vertices[d].x * a.x + this.m_vertices[d].y * a.y;
                e > c && (b = d, c = e)
            }
            return b
        }, f.prototype.GetSupportVertex = function(a) {
            for (var b = 0, c = this.m_vertices[0].x * a.x + this.m_vertices[0].y * a.y, d = 1; d < this.m_vertexCount; ++d) {
                var e = this.m_vertices[d].x * a.x + this.m_vertices[d].y * a.y;
                e > c && (b = d, c = e)
            }
            return this.m_vertices[b]
        }, f.prototype.Validate = function() {
            return !1
        }, f.prototype.b2PolygonShape = function() {
            this.__super.b2Shape.call(this), this.m_type = g.e_polygonShape, this.m_centroid = new k, this.m_vertices = new Vector, this.m_normals = new Vector
        }, f.prototype.Reserve = function(a) {
            void 0 === a && (a = 0);
            for (var b = parseInt(this.m_vertices.length); a > b; b++) this.m_vertices[b] = new k, this.m_normals[b] = new k
        }, f.ComputeCentroid = function(a, b) {
            void 0 === b && (b = 0);
            for (var c = new k, d = 0, e = 0, f = 0, g = 1 / 3, h = 0; b > h; ++h) {
                var i = a[h],
                    j = b > h + 1 ? a[parseInt(h + 1)] : a[0],
                    l = i.x - e,
                    m = i.y - f,
                    n = j.x - e,
                    o = j.y - f,
                    p = l * o - m * n,
                    q = .5 * p;
                d += q, c.x += q * g * (e + i.x + j.x), c.y += q * g * (f + i.y + j.y)
            }
            return c.x *= 1 / d, c.y *= 1 / d, c
        }, f.ComputeOBB = function(a, b, c) {
            void 0 === c && (c = 0);
            var d = 0,
                e = new Vector(c + 1);
            for (d = 0; c > d; ++d) e[d] = b[d];
            e[c] = e[0];
            var f = Number.MAX_VALUE;
            for (d = 1; c >= d; ++d) {
                var g = e[parseInt(d - 1)],
                    h = e[d].x - g.x,
                    i = e[d].y - g.y,
                    j = Math.sqrt(h * h + i * i);
                h /= j, i /= j;
                for (var k = -i, l = h, m = Number.MAX_VALUE, n = Number.MAX_VALUE, o = -Number.MAX_VALUE, p = -Number.MAX_VALUE, q = 0; c > q; ++q) {
                    var r = e[q].x - g.x,
                        s = e[q].y - g.y,
                        t = h * r + i * s,
                        u = k * r + l * s;
                    m > t && (m = t), n > u && (n = u), t > o && (o = t), u > p && (p = u)
                }
                var v = (o - m) * (p - n);
                if (.95 * f > v) {
                    f = v, a.R.col1.x = h, a.R.col1.y = i, a.R.col2.x = k, a.R.col2.y = l;
                    var w = .5 * (m + o),
                        x = .5 * (n + p),
                        y = a.R;
                    a.center.x = g.x + (y.col1.x * w + y.col2.x * x), a.center.y = g.y + (y.col1.y * w + y.col2.y * x), a.extents.x = .5 * (o - m), a.extents.y = .5 * (p - n)
                }
            }
        }, Box2D.postDefs.push(function() {
            Box2D.Collision.Shapes.b2PolygonShape.s_mat = new h
        }), g.b2Shape = function() {}, g.prototype.Copy = function() {
            return null
        }, g.prototype.Set = function(a) {
            this.m_radius = a.m_radius
        }, g.prototype.GetType = function() {
            return this.m_type
        }, g.prototype.TestPoint = function() {
            return !1
        }, g.prototype.RayCast = function() {
            return !1
        }, g.prototype.ComputeAABB = function() {}, g.prototype.ComputeMass = function(a, b) {
            void 0 === b && (b = 0)
        }, g.prototype.ComputeSubmergedArea = function(a, b) {
            return void 0 === b && (b = 0), 0
        }, g.TestOverlap = function(a, b, c, d) {
            var e = new m;
            e.proxyA = new o, e.proxyA.Set(a), e.proxyB = new o, e.proxyB.Set(c), e.transformA = b, e.transformB = d, e.useRadii = !0;
            var f = new p;
            f.count = 0;
            var g = new n;
            return l.Distance(g, f, e), g.distance < 10 * Box2D.MIN_VALUE
        }, g.prototype.b2Shape = function() {
            this.m_type = g.e_unknownShape, this.m_radius = a.b2_linearSlop
        }, Box2D.postDefs.push(function() {
            Box2D.Collision.Shapes.b2Shape.e_unknownShape = parseInt(-1), Box2D.Collision.Shapes.b2Shape.e_circleShape = 0, Box2D.Collision.Shapes.b2Shape.e_polygonShape = 1, Box2D.Collision.Shapes.b2Shape.e_edgeShape = 2, Box2D.Collision.Shapes.b2Shape.e_shapeTypeCount = 3, Box2D.Collision.Shapes.b2Shape.e_hitCollide = 1, Box2D.Collision.Shapes.b2Shape.e_missCollide = 0, Box2D.Collision.Shapes.b2Shape.e_startsInsideCollide = parseInt(-1)
        })
    }(),
    function() {
        {
            var a = Box2D.Common.b2Color,
                b = (Box2D.Common.b2internal, Box2D.Common.b2Settings),
                c = (Box2D.Common.Math.b2Mat22, Box2D.Common.Math.b2Mat33, Box2D.Common.Math.b2Math);
            Box2D.Common.Math.b2Sweep, Box2D.Common.Math.b2Transform, Box2D.Common.Math.b2Vec2, Box2D.Common.Math.b2Vec3
        }
        a.b2Color = function() {
            this._r = 0, this._g = 0, this._b = 0
        }, a.prototype.b2Color = function(a, b, d) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === d && (d = 0), this._r = Box2D.parseUInt(255 * c.Clamp(a, 0, 1)), this._g = Box2D.parseUInt(255 * c.Clamp(b, 0, 1)), this._b = Box2D.parseUInt(255 * c.Clamp(d, 0, 1))
        }, a.prototype.Set = function(a, b, d) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === d && (d = 0), this._r = Box2D.parseUInt(255 * c.Clamp(a, 0, 1)), this._g = Box2D.parseUInt(255 * c.Clamp(b, 0, 1)), this._b = Box2D.parseUInt(255 * c.Clamp(d, 0, 1))
        }, Object.defineProperty(a.prototype, "r", {
            enumerable: !1,
            configurable: !0,
            set: function(a) {
                void 0 === a && (a = 0), this._r = Box2D.parseUInt(255 * c.Clamp(a, 0, 1))
            }
        }), Object.defineProperty(a.prototype, "g", {
            enumerable: !1,
            configurable: !0,
            set: function(a) {
                void 0 === a && (a = 0), this._g = Box2D.parseUInt(255 * c.Clamp(a, 0, 1))
            }
        }), Object.defineProperty(a.prototype, "b", {
            enumerable: !1,
            configurable: !0,
            set: function(a) {
                void 0 === a && (a = 0), this._b = Box2D.parseUInt(255 * c.Clamp(a, 0, 1))
            }
        }), Object.defineProperty(a.prototype, "color", {
            enumerable: !1,
            configurable: !0,
            get: function() {
                return this._r << 16 | this._g << 8 | this._b
            }
        }), b.b2Settings = function() {}, b.b2MixFriction = function(a, b) {
            return void 0 === a && (a = 0), void 0 === b && (b = 0), Math.sqrt(a * b)
        }, b.b2MixRestitution = function(a, b) {
            return void 0 === a && (a = 0), void 0 === b && (b = 0), a > b ? a : b
        }, b.b2Assert = function(a) {
            if (!a) throw "Assertion Failed"
        }, Box2D.postDefs.push(function() {
            Box2D.Common.b2Settings.VERSION = "2.1alpha", Box2D.Common.b2Settings.USHRT_MAX = 65535, Box2D.Common.b2Settings.b2_pi = Math.PI, Box2D.Common.b2Settings.b2_maxManifoldPoints = 2, Box2D.Common.b2Settings.b2_aabbExtension = .1, Box2D.Common.b2Settings.b2_aabbMultiplier = 2, Box2D.Common.b2Settings.b2_polygonRadius = 2 * b.b2_linearSlop, Box2D.Common.b2Settings.b2_linearSlop = .005, Box2D.Common.b2Settings.b2_angularSlop = 2 / 180 * b.b2_pi, Box2D.Common.b2Settings.b2_toiSlop = 8 * b.b2_linearSlop, Box2D.Common.b2Settings.b2_maxTOIContactsPerIsland = 32, Box2D.Common.b2Settings.b2_maxTOIJointsPerIsland = 32, Box2D.Common.b2Settings.b2_velocityThreshold = 1, Box2D.Common.b2Settings.b2_maxLinearCorrection = .2, Box2D.Common.b2Settings.b2_maxAngularCorrection = 8 / 180 * b.b2_pi, Box2D.Common.b2Settings.b2_maxTranslation = 2, Box2D.Common.b2Settings.b2_maxTranslationSquared = b.b2_maxTranslation * b.b2_maxTranslation, Box2D.Common.b2Settings.b2_maxRotation = .5 * b.b2_pi, Box2D.Common.b2Settings.b2_maxRotationSquared = b.b2_maxRotation * b.b2_maxRotation, Box2D.Common.b2Settings.b2_contactBaumgarte = .2, Box2D.Common.b2Settings.b2_timeToSleep = .5, Box2D.Common.b2Settings.b2_linearSleepTolerance = .01, Box2D.Common.b2Settings.b2_angularSleepTolerance = 2 / 180 * b.b2_pi
        })
    }(),
    function() {
        var a = (Box2D.Collision.b2AABB, Box2D.Common.b2Color, Box2D.Common.b2internal, Box2D.Common.b2Settings, Box2D.Common.Math.b2Mat22),
            b = Box2D.Common.Math.b2Mat33,
            c = Box2D.Common.Math.b2Math,
            d = Box2D.Common.Math.b2Sweep,
            e = Box2D.Common.Math.b2Transform,
            f = Box2D.Common.Math.b2Vec2,
            g = Box2D.Common.Math.b2Vec3;
        a.b2Mat22 = function() {
            this.col1 = new f, this.col2 = new f
        }, a.prototype.b2Mat22 = function() {
            this.SetIdentity()
        }, a.FromAngle = function(b) {
            void 0 === b && (b = 0);
            var c = new a;
            return c.Set(b), c
        }, a.FromVV = function(b, c) {
            var d = new a;
            return d.SetVV(b, c), d
        }, a.prototype.Set = function(a) {
            void 0 === a && (a = 0);
            var b = Math.cos(a),
                c = Math.sin(a);
            this.col1.x = b, this.col2.x = -c, this.col1.y = c, this.col2.y = b
        }, a.prototype.SetVV = function(a, b) {
            this.col1.SetV(a), this.col2.SetV(b)
        }, a.prototype.Copy = function() {
            var b = new a;
            return b.SetM(this), b
        }, a.prototype.SetM = function(a) {
            this.col1.SetV(a.col1), this.col2.SetV(a.col2)
        }, a.prototype.AddM = function(a) {
            this.col1.x += a.col1.x, this.col1.y += a.col1.y, this.col2.x += a.col2.x, this.col2.y += a.col2.y
        }, a.prototype.SetIdentity = function() {
            this.col1.x = 1, this.col2.x = 0, this.col1.y = 0, this.col2.y = 1
        }, a.prototype.SetZero = function() {
            this.col1.x = 0, this.col2.x = 0, this.col1.y = 0, this.col2.y = 0
        }, a.prototype.GetAngle = function() {
            return Math.atan2(this.col1.y, this.col1.x)
        }, a.prototype.GetInverse = function(a) {
            var b = this.col1.x,
                c = this.col2.x,
                d = this.col1.y,
                e = this.col2.y,
                f = b * e - c * d;
            return 0 != f && (f = 1 / f), a.col1.x = f * e, a.col2.x = -f * c, a.col1.y = -f * d, a.col2.y = f * b, a
        }, a.prototype.Solve = function(a, b, c) {
            void 0 === b && (b = 0), void 0 === c && (c = 0);
            var d = this.col1.x,
                e = this.col2.x,
                f = this.col1.y,
                g = this.col2.y,
                h = d * g - e * f;
            return 0 != h && (h = 1 / h), a.x = h * (g * b - e * c), a.y = h * (d * c - f * b), a
        }, a.prototype.Abs = function() {
            this.col1.Abs(), this.col2.Abs()
        }, b.b2Mat33 = function() {
            this.col1 = new g, this.col2 = new g, this.col3 = new g
        }, b.prototype.b2Mat33 = function(a, b, c) {
            void 0 === a && (a = null), void 0 === b && (b = null), void 0 === c && (c = null), a || b || c ? (this.col1.SetV(a), this.col2.SetV(b), this.col3.SetV(c)) : (this.col1.SetZero(), this.col2.SetZero(), this.col3.SetZero())
        }, b.prototype.SetVVV = function(a, b, c) {
            this.col1.SetV(a), this.col2.SetV(b), this.col3.SetV(c)
        }, b.prototype.Copy = function() {
            return new b(this.col1, this.col2, this.col3)
        }, b.prototype.SetM = function(a) {
            this.col1.SetV(a.col1), this.col2.SetV(a.col2), this.col3.SetV(a.col3)
        }, b.prototype.AddM = function(a) {
            this.col1.x += a.col1.x, this.col1.y += a.col1.y, this.col1.z += a.col1.z, this.col2.x += a.col2.x, this.col2.y += a.col2.y, this.col2.z += a.col2.z, this.col3.x += a.col3.x, this.col3.y += a.col3.y, this.col3.z += a.col3.z
        }, b.prototype.SetIdentity = function() {
            this.col1.x = 1, this.col2.x = 0, this.col3.x = 0, this.col1.y = 0, this.col2.y = 1, this.col3.y = 0, this.col1.z = 0, this.col2.z = 0, this.col3.z = 1
        }, b.prototype.SetZero = function() {
            this.col1.x = 0, this.col2.x = 0, this.col3.x = 0, this.col1.y = 0, this.col2.y = 0, this.col3.y = 0, this.col1.z = 0, this.col2.z = 0, this.col3.z = 0
        }, b.prototype.Solve22 = function(a, b, c) {
            void 0 === b && (b = 0), void 0 === c && (c = 0);
            var d = this.col1.x,
                e = this.col2.x,
                f = this.col1.y,
                g = this.col2.y,
                h = d * g - e * f;
            return 0 != h && (h = 1 / h), a.x = h * (g * b - e * c), a.y = h * (d * c - f * b), a
        }, b.prototype.Solve33 = function(a, b, c, d) {
            void 0 === b && (b = 0), void 0 === c && (c = 0), void 0 === d && (d = 0);
            var e = this.col1.x,
                f = this.col1.y,
                g = this.col1.z,
                h = this.col2.x,
                i = this.col2.y,
                j = this.col2.z,
                k = this.col3.x,
                l = this.col3.y,
                m = this.col3.z,
                n = e * (i * m - j * l) + f * (j * k - h * m) + g * (h * l - i * k);
            return 0 != n && (n = 1 / n), a.x = n * (b * (i * m - j * l) + c * (j * k - h * m) + d * (h * l - i * k)), a.y = n * (e * (c * m - d * l) + f * (d * k - b * m) + g * (b * l - c * k)), a.z = n * (e * (i * d - j * c) + f * (j * b - h * d) + g * (h * c - i * b)), a
        }, c.b2Math = function() {}, c.IsValid = function(a) {
            return void 0 === a && (a = 0), isFinite(a)
        }, c.Dot = function(a, b) {
            return a.x * b.x + a.y * b.y
        }, c.CrossVV = function(a, b) {
            return a.x * b.y - a.y * b.x
        }, c.CrossVF = function(a, b) {
            void 0 === b && (b = 0);
            var c = new f(b * a.y, -b * a.x);
            return c
        }, c.CrossFV = function(a, b) {
            void 0 === a && (a = 0);
            var c = new f(-a * b.y, a * b.x);
            return c
        }, c.MulMV = function(a, b) {
            var c = new f(a.col1.x * b.x + a.col2.x * b.y, a.col1.y * b.x + a.col2.y * b.y);
            return c
        }, c.MulTMV = function(a, b) {
            var d = new f(c.Dot(b, a.col1), c.Dot(b, a.col2));
            return d
        }, c.MulX = function(a, b) {
            var d = c.MulMV(a.R, b);
            return d.x += a.position.x, d.y += a.position.y, d
        }, c.MulXT = function(a, b) {
            var d = c.SubtractVV(b, a.position),
                e = d.x * a.R.col1.x + d.y * a.R.col1.y;
            return d.y = d.x * a.R.col2.x + d.y * a.R.col2.y, d.x = e, d
        }, c.AddVV = function(a, b) {
            var c = new f(a.x + b.x, a.y + b.y);
            return c
        }, c.SubtractVV = function(a, b) {
            var c = new f(a.x - b.x, a.y - b.y);
            return c
        }, c.Distance = function(a, b) {
            var c = a.x - b.x,
                d = a.y - b.y;
            return Math.sqrt(c * c + d * d)
        }, c.DistanceSquared = function(a, b) {
            var c = a.x - b.x,
                d = a.y - b.y;
            return c * c + d * d
        }, c.MulFV = function(a, b) {
            void 0 === a && (a = 0);
            var c = new f(a * b.x, a * b.y);
            return c
        }, c.AddMM = function(b, d) {
            var e = a.FromVV(c.AddVV(b.col1, d.col1), c.AddVV(b.col2, d.col2));
            return e
        }, c.MulMM = function(b, d) {
            var e = a.FromVV(c.MulMV(b, d.col1), c.MulMV(b, d.col2));
            return e
        }, c.MulTMM = function(b, d) {
            var e = new f(c.Dot(b.col1, d.col1), c.Dot(b.col2, d.col1)),
                g = new f(c.Dot(b.col1, d.col2), c.Dot(b.col2, d.col2)),
                h = a.FromVV(e, g);
            return h
        }, c.Abs = function(a) {
            return void 0 === a ? 0 : a > 0 ? a : -a
        }, c.AbsV = function(a) {
            var b = new f(c.Abs(a.x), c.Abs(a.y));
            return b
        }, c.AbsM = function(b) {
            var d = a.FromVV(c.AbsV(b.col1), c.AbsV(b.col2));
            return d
        }, c.Min = function(a, b) {
            return void 0 === a && (a = 0), void 0 === b && (b = 0), b > a ? a : b
        }, c.MinV = function(a, b) {
            var d = new f(c.Min(a.x, b.x), c.Min(a.y, b.y));
            return d
        }, c.Max = function(a, b) {
            return void 0 === a && (a = 0), void 0 === b && (b = 0), a > b ? a : b
        }, c.MaxV = function(a, b) {
            var d = new f(c.Max(a.x, b.x), c.Max(a.y, b.y));
            return d
        }, c.Clamp = function(a, b, c) {
            return void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === c && (c = 0), b > a ? b : a > c ? c : a
        }, c.ClampV = function(a, b, d) {
            return c.MaxV(b, c.MinV(a, d))
        }, c.Swap = function(a, b) {
            var c = a[0];
            a[0] = b[0], b[0] = c
        }, c.Random = function() {
            return 2 * Math.random() - 1
        }, c.RandomRange = function(a, b) {
            void 0 === a && (a = 0), void 0 === b && (b = 0);
            var c = Math.random();
            return c = (b - a) * c + a
        }, c.NextPowerOfTwo = function(a) {
            return void 0 === a && (a = 0), a |= a >> 1 & 2147483647, a |= a >> 2 & 1073741823, a |= a >> 4 & 268435455, a |= a >> 8 & 16777215, a |= a >> 16 & 65535, a + 1
        }, c.IsPowerOfTwo = function(a) {
            void 0 === a && (a = 0);
            var b = a > 0 && 0 == (a & a - 1);
            return b
        }, Box2D.postDefs.push(function() {
            Box2D.Common.Math.b2Math.b2Vec2_zero = new f(0, 0), Box2D.Common.Math.b2Math.b2Mat22_identity = a.FromVV(new f(1, 0), new f(0, 1)), Box2D.Common.Math.b2Math.b2Transform_identity = new e(c.b2Vec2_zero, c.b2Mat22_identity)
        }), d.b2Sweep = function() {
            this.localCenter = new f, this.c0 = new f, this.c = new f
        }, d.prototype.Set = function(a) {
            this.localCenter.SetV(a.localCenter), this.c0.SetV(a.c0), this.c.SetV(a.c), this.a0 = a.a0, this.a = a.a, this.t0 = a.t0
        }, d.prototype.Copy = function() {
            var a = new d;
            return a.localCenter.SetV(this.localCenter), a.c0.SetV(this.c0), a.c.SetV(this.c), a.a0 = this.a0, a.a = this.a, a.t0 = this.t0, a
        }, d.prototype.GetTransform = function(a, b) {
            void 0 === b && (b = 0), a.position.x = (1 - b) * this.c0.x + b * this.c.x, a.position.y = (1 - b) * this.c0.y + b * this.c.y;
            var c = (1 - b) * this.a0 + b * this.a;
            a.R.Set(c);
            var d = a.R;
            a.position.x -= d.col1.x * this.localCenter.x + d.col2.x * this.localCenter.y, a.position.y -= d.col1.y * this.localCenter.x + d.col2.y * this.localCenter.y
        }, d.prototype.Advance = function(a) {
            if (void 0 === a && (a = 0), this.t0 < a && 1 - this.t0 > Box2D.MIN_VALUE) {
                var b = (a - this.t0) / (1 - this.t0);
                this.c0.x = (1 - b) * this.c0.x + b * this.c.x, this.c0.y = (1 - b) * this.c0.y + b * this.c.y, this.a0 = (1 - b) * this.a0 + b * this.a, this.t0 = a
            }
        }, e.b2Transform = function() {
            this.position = new f, this.R = new a
        }, e.prototype.b2Transform = function(a, b) {
            void 0 === a && (a = null), void 0 === b && (b = null), a && (this.position.SetV(a), this.R.SetM(b))
        }, e.prototype.Initialize = function(a, b) {
            this.position.SetV(a), this.R.SetM(b)
        }, e.prototype.SetIdentity = function() {
            this.position.SetZero(), this.R.SetIdentity()
        }, e.prototype.Set = function(a) {
            this.position.SetV(a.position), this.R.SetM(a.R)
        }, e.prototype.GetAngle = function() {
            return Math.atan2(this.R.col1.y, this.R.col1.x)
        }, f.b2Vec2 = function() {}, f.prototype.b2Vec2 = function(a, b) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), this.x = a, this.y = b
        }, f.prototype.SetZero = function() {
            this.x = 0, this.y = 0
        }, f.prototype.Set = function(a, b) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), this.x = a, this.y = b
        }, f.prototype.SetV = function(a) {
            this.x = a.x, this.y = a.y
        }, f.prototype.GetNegative = function() {
            return new f(-this.x, -this.y)
        }, f.prototype.NegativeSelf = function() {
            this.x = -this.x, this.y = -this.y
        }, f.Make = function(a, b) {
            return void 0 === a && (a = 0), void 0 === b && (b = 0), new f(a, b)
        }, f.prototype.Copy = function() {
            return new f(this.x, this.y)
        }, f.prototype.Add = function(a) {
            this.x += a.x, this.y += a.y
        }, f.prototype.Subtract = function(a) {
            this.x -= a.x, this.y -= a.y
        }, f.prototype.Multiply = function(a) {
            void 0 === a && (a = 0), this.x *= a, this.y *= a
        }, f.prototype.MulM = function(a) {
            var b = this.x;
            this.x = a.col1.x * b + a.col2.x * this.y, this.y = a.col1.y * b + a.col2.y * this.y
        }, f.prototype.MulTM = function(a) {
            var b = c.Dot(this, a.col1);
            this.y = c.Dot(this, a.col2), this.x = b
        }, f.prototype.CrossVF = function(a) {
            void 0 === a && (a = 0);
            var b = this.x;
            this.x = a * this.y, this.y = -a * b
        }, f.prototype.CrossFV = function(a) {
            void 0 === a && (a = 0);
            var b = this.x;
            this.x = -a * this.y, this.y = a * b
        }, f.prototype.MinV = function(a) {
            this.x = this.x < a.x ? this.x : a.x, this.y = this.y < a.y ? this.y : a.y
        }, f.prototype.MaxV = function(a) {
            this.x = this.x > a.x ? this.x : a.x, this.y = this.y > a.y ? this.y : a.y
        }, f.prototype.Abs = function() {
            this.x < 0 && (this.x = -this.x), this.y < 0 && (this.y = -this.y)
        }, f.prototype.Length = function() {
            return Math.sqrt(this.x * this.x + this.y * this.y)
        }, f.prototype.LengthSquared = function() {
            return this.x * this.x + this.y * this.y
        }, f.prototype.Normalize = function() {
            var a = Math.sqrt(this.x * this.x + this.y * this.y);
            if (a < Box2D.MIN_VALUE) return 0;
            var b = 1 / a;
            return this.x *= b, this.y *= b, a
        }, f.prototype.IsValid = function() {
            return c.IsValid(this.x) && c.IsValid(this.y)
        }, g.b2Vec3 = function() {}, g.prototype.b2Vec3 = function(a, b, c) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === c && (c = 0), this.x = a, this.y = b, this.z = c
        }, g.prototype.SetZero = function() {
            this.x = this.y = this.z = 0
        }, g.prototype.Set = function(a, b, c) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === c && (c = 0), this.x = a, this.y = b, this.z = c
        }, g.prototype.SetV = function(a) {
            this.x = a.x, this.y = a.y, this.z = a.z
        }, g.prototype.GetNegative = function() {
            return new g(-this.x, -this.y, -this.z)
        }, g.prototype.NegativeSelf = function() {
            this.x = -this.x, this.y = -this.y, this.z = -this.z
        }, g.prototype.Copy = function() {
            return new g(this.x, this.y, this.z)
        }, g.prototype.Add = function(a) {
            this.x += a.x, this.y += a.y, this.z += a.z
        }, g.prototype.Subtract = function(a) {
            this.x -= a.x, this.y -= a.y, this.z -= a.z
        }, g.prototype.Multiply = function(a) {
            void 0 === a && (a = 0), this.x *= a, this.y *= a, this.z *= a
        }
    }(),
    function() {
        {
            var a = (Box2D.Dynamics.Controllers.b2ControllerEdge, Box2D.Common.Math.b2Mat22, Box2D.Common.Math.b2Mat33, Box2D.Common.Math.b2Math),
                b = Box2D.Common.Math.b2Sweep,
                c = Box2D.Common.Math.b2Transform,
                d = Box2D.Common.Math.b2Vec2,
                e = (Box2D.Common.Math.b2Vec3, Box2D.Common.b2Color),
                f = (Box2D.Common.b2internal, Box2D.Common.b2Settings),
                g = Box2D.Collision.b2AABB,
                h = (Box2D.Collision.b2Bound, Box2D.Collision.b2BoundValues, Box2D.Collision.b2Collision, Box2D.Collision.b2ContactID, Box2D.Collision.b2ContactPoint),
                i = (Box2D.Collision.b2Distance, Box2D.Collision.b2DistanceInput, Box2D.Collision.b2DistanceOutput, Box2D.Collision.b2DistanceProxy, Box2D.Collision.b2DynamicTree, Box2D.Collision.b2DynamicTreeBroadPhase),
                j = (Box2D.Collision.b2DynamicTreeNode, Box2D.Collision.b2DynamicTreePair, Box2D.Collision.b2Manifold, Box2D.Collision.b2ManifoldPoint, Box2D.Collision.b2Point, Box2D.Collision.b2RayCastInput),
                k = Box2D.Collision.b2RayCastOutput,
                l = (Box2D.Collision.b2Segment, Box2D.Collision.b2SeparationFunction, Box2D.Collision.b2Simplex, Box2D.Collision.b2SimplexCache, Box2D.Collision.b2SimplexVertex, Box2D.Collision.b2TimeOfImpact, Box2D.Collision.b2TOIInput, Box2D.Collision.b2WorldManifold, Box2D.Collision.ClipVertex, Box2D.Collision.Features, Box2D.Collision.IBroadPhase, Box2D.Collision.Shapes.b2CircleShape),
                m = (Box2D.Collision.Shapes.b2EdgeChainDef, Box2D.Collision.Shapes.b2EdgeShape),
                n = Box2D.Collision.Shapes.b2MassData,
                o = Box2D.Collision.Shapes.b2PolygonShape,
                p = Box2D.Collision.Shapes.b2Shape,
                q = Box2D.Dynamics.b2Body,
                r = Box2D.Dynamics.b2BodyDef,
                s = Box2D.Dynamics.b2ContactFilter,
                t = Box2D.Dynamics.b2ContactImpulse,
                u = Box2D.Dynamics.b2ContactListener,
                v = Box2D.Dynamics.b2ContactManager,
                w = Box2D.Dynamics.b2DebugDraw,
                x = Box2D.Dynamics.b2DestructionListener,
                y = Box2D.Dynamics.b2FilterData,
                z = Box2D.Dynamics.b2Fixture,
                A = Box2D.Dynamics.b2FixtureDef,
                B = Box2D.Dynamics.b2Island,
                C = Box2D.Dynamics.b2TimeStep,
                D = Box2D.Dynamics.b2World,
                E = (Box2D.Dynamics.Contacts.b2CircleContact, Box2D.Dynamics.Contacts.b2Contact),
                F = (Box2D.Dynamics.Contacts.b2ContactConstraint, Box2D.Dynamics.Contacts.b2ContactConstraintPoint, Box2D.Dynamics.Contacts.b2ContactEdge, Box2D.Dynamics.Contacts.b2ContactFactory),
                G = (Box2D.Dynamics.Contacts.b2ContactRegister, Box2D.Dynamics.Contacts.b2ContactResult, Box2D.Dynamics.Contacts.b2ContactSolver),
                H = (Box2D.Dynamics.Contacts.b2EdgeAndCircleContact, Box2D.Dynamics.Contacts.b2NullContact, Box2D.Dynamics.Contacts.b2PolyAndCircleContact, Box2D.Dynamics.Contacts.b2PolyAndEdgeContact, Box2D.Dynamics.Contacts.b2PolygonContact, Box2D.Dynamics.Contacts.b2PositionSolverManifold, Box2D.Dynamics.Controllers.b2Controller, Box2D.Dynamics.Joints.b2DistanceJoint, Box2D.Dynamics.Joints.b2DistanceJointDef,
                    Box2D.Dynamics.Joints.b2FrictionJoint, Box2D.Dynamics.Joints.b2FrictionJointDef, Box2D.Dynamics.Joints.b2GearJoint, Box2D.Dynamics.Joints.b2GearJointDef, Box2D.Dynamics.Joints.b2Jacobian, Box2D.Dynamics.Joints.b2Joint),
                I = (Box2D.Dynamics.Joints.b2JointDef, Box2D.Dynamics.Joints.b2JointEdge, Box2D.Dynamics.Joints.b2LineJoint, Box2D.Dynamics.Joints.b2LineJointDef, Box2D.Dynamics.Joints.b2MouseJoint, Box2D.Dynamics.Joints.b2MouseJointDef, Box2D.Dynamics.Joints.b2PrismaticJoint, Box2D.Dynamics.Joints.b2PrismaticJointDef, Box2D.Dynamics.Joints.b2PulleyJoint);
            Box2D.Dynamics.Joints.b2PulleyJointDef, Box2D.Dynamics.Joints.b2RevoluteJoint, Box2D.Dynamics.Joints.b2RevoluteJointDef, Box2D.Dynamics.Joints.b2WeldJoint, Box2D.Dynamics.Joints.b2WeldJointDef
        }
        q.b2Body = function() {
            this.m_xf = new c, this.m_sweep = new b, this.m_linearVelocity = new d, this.m_force = new d
        }, q.prototype.connectEdges = function(b, c, d) {
            void 0 === d && (d = 0);
            var e = Math.atan2(c.GetDirectionVector().y, c.GetDirectionVector().x),
                g = Math.tan(.5 * (e - d)),
                h = a.MulFV(g, c.GetDirectionVector());
            h = a.SubtractVV(h, c.GetNormalVector()), h = a.MulFV(f.b2_toiSlop, h), h = a.AddVV(h, c.GetVertex1());
            var i = a.AddVV(b.GetDirectionVector(), c.GetDirectionVector());
            i.Normalize();
            var j = a.Dot(b.GetDirectionVector(), c.GetNormalVector()) > 0;
            return b.SetNextEdge(c, h, i, j), c.SetPrevEdge(b, h, i, j), e
        }, q.prototype.CreateFixture = function(a) {
            if (1 == this.m_world.IsLocked()) return null;
            var b = new z;
            if (b.Create(this, this.m_xf, a), this.m_flags & q.e_activeFlag) {
                var c = this.m_world.m_contactManager.m_broadPhase;
                b.CreateProxy(c, this.m_xf)
            }
            return b.m_next = this.m_fixtureList, this.m_fixtureList = b, ++this.m_fixtureCount, b.m_body = this, b.m_density > 0 && this.ResetMassData(), this.m_world.m_flags |= D.e_newFixture, b
        }, q.prototype.CreateFixture2 = function(a, b) {
            void 0 === b && (b = 0);
            var c = new A;
            return c.shape = a, c.density = b, this.CreateFixture(c)
        }, q.prototype.DestroyFixture = function(a) {
            if (1 != this.m_world.IsLocked()) {
                for (var b = this.m_fixtureList, c = null, d = !1; null != b;) {
                    if (b == a) {
                        c ? c.m_next = a.m_next : this.m_fixtureList = a.m_next, d = !0;
                        break
                    }
                    c = b, b = b.m_next
                }
                for (var e = this.m_contactList; e;) {
                    var f = e.contact;
                    e = e.next;
                    var g = f.GetFixtureA(),
                        h = f.GetFixtureB();
                    (a == g || a == h) && this.m_world.m_contactManager.Destroy(f)
                }
                if (this.m_flags & q.e_activeFlag) {
                    var i = this.m_world.m_contactManager.m_broadPhase;
                    a.DestroyProxy(i)
                }
                a.Destroy(), a.m_body = null, a.m_next = null, --this.m_fixtureCount, this.ResetMassData()
            }
        }, q.prototype.SetPositionAndAngle = function(a, b) {
            void 0 === b && (b = 0);
            var c;
            if (1 != this.m_world.IsLocked()) {
                this.m_xf.R.Set(b), this.m_xf.position.SetV(a);
                var d = this.m_xf.R,
                    e = this.m_sweep.localCenter;
                this.m_sweep.c.x = d.col1.x * e.x + d.col2.x * e.y, this.m_sweep.c.y = d.col1.y * e.x + d.col2.y * e.y, this.m_sweep.c.x += this.m_xf.position.x, this.m_sweep.c.y += this.m_xf.position.y, this.m_sweep.c0.SetV(this.m_sweep.c), this.m_sweep.a0 = this.m_sweep.a = b;
                var f = this.m_world.m_contactManager.m_broadPhase;
                for (c = this.m_fixtureList; c; c = c.m_next) c.Synchronize(f, this.m_xf, this.m_xf);
                this.m_world.m_contactManager.FindNewContacts()
            }
        }, q.prototype.SetTransform = function(a) {
            this.SetPositionAndAngle(a.position, a.GetAngle())
        }, q.prototype.GetTransform = function() {
            return this.m_xf
        }, q.prototype.GetPosition = function() {
            return this.m_xf.position
        }, q.prototype.SetPosition = function(a) {
            this.SetPositionAndAngle(a, this.GetAngle())
        }, q.prototype.GetAngle = function() {
            return this.m_sweep.a
        }, q.prototype.SetAngle = function(a) {
            void 0 === a && (a = 0), this.SetPositionAndAngle(this.GetPosition(), a)
        }, q.prototype.GetWorldCenter = function() {
            return this.m_sweep.c
        }, q.prototype.GetLocalCenter = function() {
            return this.m_sweep.localCenter
        }, q.prototype.SetLinearVelocity = function(a) {
            this.m_type != q.b2_staticBody && this.m_linearVelocity.SetV(a)
        }, q.prototype.GetLinearVelocity = function() {
            return this.m_linearVelocity
        }, q.prototype.SetAngularVelocity = function(a) {
            void 0 === a && (a = 0), this.m_type != q.b2_staticBody && (this.m_angularVelocity = a)
        }, q.prototype.GetAngularVelocity = function() {
            return this.m_angularVelocity
        }, q.prototype.GetDefinition = function() {
            var a = new r;
            return a.type = this.GetType(), a.allowSleep = (this.m_flags & q.e_allowSleepFlag) == q.e_allowSleepFlag, a.angle = this.GetAngle(), a.angularDamping = this.m_angularDamping, a.angularVelocity = this.m_angularVelocity, a.fixedRotation = (this.m_flags & q.e_fixedRotationFlag) == q.e_fixedRotationFlag, a.bullet = (this.m_flags & q.e_bulletFlag) == q.e_bulletFlag, a.awake = (this.m_flags & q.e_awakeFlag) == q.e_awakeFlag, a.linearDamping = this.m_linearDamping, a.linearVelocity.SetV(this.GetLinearVelocity()), a.position = this.GetPosition(), a.userData = this.GetUserData(), a
        }, q.prototype.ApplyForce = function(a, b) {
            this.m_type == q.b2_dynamicBody && (0 == this.IsAwake() && this.SetAwake(!0), this.m_force.x += a.x, this.m_force.y += a.y, this.m_torque += (b.x - this.m_sweep.c.x) * a.y - (b.y - this.m_sweep.c.y) * a.x)
        }, q.prototype.ApplyTorque = function(a) {
            void 0 === a && (a = 0), this.m_type == q.b2_dynamicBody && (0 == this.IsAwake() && this.SetAwake(!0), this.m_torque += a)
        }, q.prototype.ApplyImpulse = function(a, b) {
            this.m_type == q.b2_dynamicBody && (0 == this.IsAwake() && this.SetAwake(!0), this.m_linearVelocity.x += this.m_invMass * a.x, this.m_linearVelocity.y += this.m_invMass * a.y, this.m_angularVelocity += this.m_invI * ((b.x - this.m_sweep.c.x) * a.y - (b.y - this.m_sweep.c.y) * a.x))
        }, q.prototype.Split = function(b) {
            for (var c, d = this.GetLinearVelocity().Copy(), e = this.GetAngularVelocity(), f = this.GetWorldCenter(), g = this, h = this.m_world.CreateBody(this.GetDefinition()), i = g.m_fixtureList; i;)
                if (b(i)) {
                    var j = i.m_next;
                    c ? c.m_next = j : g.m_fixtureList = j, g.m_fixtureCount--, i.m_next = h.m_fixtureList, h.m_fixtureList = i, h.m_fixtureCount++, i.m_body = h, i = j
                } else c = i, i = i.m_next;
            g.ResetMassData(), h.ResetMassData();
            var k = g.GetWorldCenter(),
                l = h.GetWorldCenter(),
                m = a.AddVV(d, a.CrossFV(e, a.SubtractVV(k, f))),
                n = a.AddVV(d, a.CrossFV(e, a.SubtractVV(l, f)));
            return g.SetLinearVelocity(m), h.SetLinearVelocity(n), g.SetAngularVelocity(e), h.SetAngularVelocity(e), g.SynchronizeFixtures(), h.SynchronizeFixtures(), h
        }, q.prototype.Merge = function(a) {
            var b;
            for (b = a.m_fixtureList; b;) {
                var c = b.m_next;
                a.m_fixtureCount--, b.m_next = this.m_fixtureList, this.m_fixtureList = b, this.m_fixtureCount++, b.m_body = e, b = c
            }
            d.m_fixtureCount = 0; {
                var d = this,
                    e = a;
                d.GetWorldCenter(), e.GetWorldCenter(), d.GetLinearVelocity().Copy(), e.GetLinearVelocity().Copy(), d.GetAngularVelocity(), e.GetAngularVelocity()
            }
            d.ResetMassData(), this.SynchronizeFixtures()
        }, q.prototype.GetMass = function() {
            return this.m_mass
        }, q.prototype.GetInertia = function() {
            return this.m_I
        }, q.prototype.GetMassData = function(a) {
            a.mass = this.m_mass, a.I = this.m_I, a.center.SetV(this.m_sweep.localCenter)
        }, q.prototype.SetMassData = function(b) {
            if (f.b2Assert(0 == this.m_world.IsLocked()), 1 != this.m_world.IsLocked() && this.m_type == q.b2_dynamicBody) {
                this.m_invMass = 0, this.m_I = 0, this.m_invI = 0, this.m_mass = b.mass, this.m_mass <= 0 && (this.m_mass = 1), this.m_invMass = 1 / this.m_mass, b.I > 0 && 0 == (this.m_flags & q.e_fixedRotationFlag) && (this.m_I = b.I - this.m_mass * (b.center.x * b.center.x + b.center.y * b.center.y), this.m_invI = 1 / this.m_I);
                var c = this.m_sweep.c.Copy();
                this.m_sweep.localCenter.SetV(b.center), this.m_sweep.c0.SetV(a.MulX(this.m_xf, this.m_sweep.localCenter)), this.m_sweep.c.SetV(this.m_sweep.c0), this.m_linearVelocity.x += this.m_angularVelocity * -(this.m_sweep.c.y - c.y), this.m_linearVelocity.y += this.m_angularVelocity * +(this.m_sweep.c.x - c.x)
            }
        }, q.prototype.ResetMassData = function() {
            if (this.m_mass = 0, this.m_invMass = 0, this.m_I = 0, this.m_invI = 0, this.m_sweep.localCenter.SetZero(), this.m_type != q.b2_staticBody && this.m_type != q.b2_kinematicBody) {
                for (var b = d.Make(0, 0), c = this.m_fixtureList; c; c = c.m_next)
                    if (0 != c.m_density) {
                        var e = c.GetMassData();
                        this.m_mass += e.mass, b.x += e.center.x * e.mass, b.y += e.center.y * e.mass, this.m_I += e.I
                    }
                this.m_mass > 0 ? (this.m_invMass = 1 / this.m_mass, b.x *= this.m_invMass, b.y *= this.m_invMass) : (this.m_mass = 1, this.m_invMass = 1), this.m_I > 0 && 0 == (this.m_flags & q.e_fixedRotationFlag) ? (this.m_I -= this.m_mass * (b.x * b.x + b.y * b.y), this.m_I *= this.m_inertiaScale, f.b2Assert(this.m_I > 0), this.m_invI = 1 / this.m_I) : (this.m_I = 0, this.m_invI = 0);
                var g = this.m_sweep.c.Copy();
                this.m_sweep.localCenter.SetV(b), this.m_sweep.c0.SetV(a.MulX(this.m_xf, this.m_sweep.localCenter)), this.m_sweep.c.SetV(this.m_sweep.c0), this.m_linearVelocity.x += this.m_angularVelocity * -(this.m_sweep.c.y - g.y), this.m_linearVelocity.y += this.m_angularVelocity * +(this.m_sweep.c.x - g.x)
            }
        }, q.prototype.GetWorldPoint = function(a) {
            var b = this.m_xf.R,
                c = new d(b.col1.x * a.x + b.col2.x * a.y, b.col1.y * a.x + b.col2.y * a.y);
            return c.x += this.m_xf.position.x, c.y += this.m_xf.position.y, c
        }, q.prototype.GetWorldVector = function(b) {
            return a.MulMV(this.m_xf.R, b)
        }, q.prototype.GetLocalPoint = function(b) {
            return a.MulXT(this.m_xf, b)
        }, q.prototype.GetLocalVector = function(b) {
            return a.MulTMV(this.m_xf.R, b)
        }, q.prototype.GetLinearVelocityFromWorldPoint = function(a) {
            return new d(this.m_linearVelocity.x - this.m_angularVelocity * (a.y - this.m_sweep.c.y), this.m_linearVelocity.y + this.m_angularVelocity * (a.x - this.m_sweep.c.x))
        }, q.prototype.GetLinearVelocityFromLocalPoint = function(a) {
            var b = this.m_xf.R,
                c = new d(b.col1.x * a.x + b.col2.x * a.y, b.col1.y * a.x + b.col2.y * a.y);
            return c.x += this.m_xf.position.x, c.y += this.m_xf.position.y, new d(this.m_linearVelocity.x - this.m_angularVelocity * (c.y - this.m_sweep.c.y), this.m_linearVelocity.y + this.m_angularVelocity * (c.x - this.m_sweep.c.x))
        }, q.prototype.GetLinearDamping = function() {
            return this.m_linearDamping
        }, q.prototype.SetLinearDamping = function(a) {
            void 0 === a && (a = 0), this.m_linearDamping = a
        }, q.prototype.GetAngularDamping = function() {
            return this.m_angularDamping
        }, q.prototype.SetAngularDamping = function(a) {
            void 0 === a && (a = 0), this.m_angularDamping = a
        }, q.prototype.SetType = function(a) {
            if (void 0 === a && (a = 0), this.m_type != a) {
                this.m_type = a, this.ResetMassData(), this.m_type == q.b2_staticBody && (this.m_linearVelocity.SetZero(), this.m_angularVelocity = 0), this.SetAwake(!0), this.m_force.SetZero(), this.m_torque = 0;
                for (var b = this.m_contactList; b; b = b.next) b.contact.FlagForFiltering()
            }
        }, q.prototype.GetType = function() {
            return this.m_type
        }, q.prototype.SetBullet = function(a) {
            a ? this.m_flags |= q.e_bulletFlag : this.m_flags &= ~q.e_bulletFlag
        }, q.prototype.IsBullet = function() {
            return (this.m_flags & q.e_bulletFlag) == q.e_bulletFlag
        }, q.prototype.SetSleepingAllowed = function(a) {
            a ? this.m_flags |= q.e_allowSleepFlag : (this.m_flags &= ~q.e_allowSleepFlag, this.SetAwake(!0))
        }, q.prototype.SetAwake = function(a) {
            a ? (this.m_flags |= q.e_awakeFlag, this.m_sleepTime = 0) : (this.m_flags &= ~q.e_awakeFlag, this.m_sleepTime = 0, this.m_linearVelocity.SetZero(), this.m_angularVelocity = 0, this.m_force.SetZero(), this.m_torque = 0)
        }, q.prototype.IsAwake = function() {
            return (this.m_flags & q.e_awakeFlag) == q.e_awakeFlag
        }, q.prototype.SetFixedRotation = function(a) {
            a ? this.m_flags |= q.e_fixedRotationFlag : this.m_flags &= ~q.e_fixedRotationFlag, this.ResetMassData()
        }, q.prototype.IsFixedRotation = function() {
            return (this.m_flags & q.e_fixedRotationFlag) == q.e_fixedRotationFlag
        }, q.prototype.SetActive = function(a) {
            if (a != this.IsActive()) {
                var b, c;
                if (a)
                    for (this.m_flags |= q.e_activeFlag, b = this.m_world.m_contactManager.m_broadPhase, c = this.m_fixtureList; c; c = c.m_next) c.CreateProxy(b, this.m_xf);
                else {
                    for (this.m_flags &= ~q.e_activeFlag, b = this.m_world.m_contactManager.m_broadPhase, c = this.m_fixtureList; c; c = c.m_next) c.DestroyProxy(b);
                    for (var d = this.m_contactList; d;) {
                        var e = d;
                        d = d.next, this.m_world.m_contactManager.Destroy(e.contact)
                    }
                    this.m_contactList = null
                }
            }
        }, q.prototype.IsActive = function() {
            return (this.m_flags & q.e_activeFlag) == q.e_activeFlag
        }, q.prototype.IsSleepingAllowed = function() {
            return (this.m_flags & q.e_allowSleepFlag) == q.e_allowSleepFlag
        }, q.prototype.GetFixtureList = function() {
            return this.m_fixtureList
        }, q.prototype.GetJointList = function() {
            return this.m_jointList
        }, q.prototype.GetControllerList = function() {
            return this.m_controllerList
        }, q.prototype.GetContactList = function() {
            return this.m_contactList
        }, q.prototype.GetNext = function() {
            return this.m_next
        }, q.prototype.GetUserData = function() {
            return this.m_userData
        }, q.prototype.SetUserData = function(a) {
            this.m_userData = a
        }, q.prototype.GetWorld = function() {
            return this.m_world
        }, q.prototype.b2Body = function(a, b) {
            this.m_flags = 0, a.bullet && (this.m_flags |= q.e_bulletFlag), a.fixedRotation && (this.m_flags |= q.e_fixedRotationFlag), a.allowSleep && (this.m_flags |= q.e_allowSleepFlag), a.awake && (this.m_flags |= q.e_awakeFlag), a.active && (this.m_flags |= q.e_activeFlag), this.m_world = b, this.m_xf.position.SetV(a.position), this.m_xf.R.Set(a.angle), this.m_sweep.localCenter.SetZero(), this.m_sweep.t0 = 1, this.m_sweep.a0 = this.m_sweep.a = a.angle;
            var c = this.m_xf.R,
                d = this.m_sweep.localCenter;
            this.m_sweep.c.x = c.col1.x * d.x + c.col2.x * d.y, this.m_sweep.c.y = c.col1.y * d.x + c.col2.y * d.y, this.m_sweep.c.x += this.m_xf.position.x, this.m_sweep.c.y += this.m_xf.position.y, this.m_sweep.c0.SetV(this.m_sweep.c), this.m_jointList = null, this.m_controllerList = null, this.m_contactList = null, this.m_controllerCount = 0, this.m_prev = null, this.m_next = null, this.m_linearVelocity.SetV(a.linearVelocity), this.m_angularVelocity = a.angularVelocity, this.m_linearDamping = a.linearDamping, this.m_angularDamping = a.angularDamping, this.m_force.Set(0, 0), this.m_torque = 0, this.m_sleepTime = 0, this.m_type = a.type, this.m_type == q.b2_dynamicBody ? (this.m_mass = 1, this.m_invMass = 1) : (this.m_mass = 0, this.m_invMass = 0), this.m_I = 0, this.m_invI = 0, this.m_inertiaScale = a.inertiaScale, this.m_userData = a.userData, this.m_fixtureList = null, this.m_fixtureCount = 0
        }, q.prototype.SynchronizeFixtures = function() {
            var a = q.s_xf1;
            a.R.Set(this.m_sweep.a0);
            var b = a.R,
                c = this.m_sweep.localCenter;
            a.position.x = this.m_sweep.c0.x - (b.col1.x * c.x + b.col2.x * c.y), a.position.y = this.m_sweep.c0.y - (b.col1.y * c.x + b.col2.y * c.y);
            var d, e = this.m_world.m_contactManager.m_broadPhase;
            for (d = this.m_fixtureList; d; d = d.m_next) d.Synchronize(e, a, this.m_xf)
        }, q.prototype.SynchronizeTransform = function() {
            this.m_xf.R.Set(this.m_sweep.a);
            var a = this.m_xf.R,
                b = this.m_sweep.localCenter;
            this.m_xf.position.x = this.m_sweep.c.x - (a.col1.x * b.x + a.col2.x * b.y), this.m_xf.position.y = this.m_sweep.c.y - (a.col1.y * b.x + a.col2.y * b.y)
        }, q.prototype.ShouldCollide = function(a) {
            if (this.m_type != q.b2_dynamicBody && a.m_type != q.b2_dynamicBody) return !1;
            for (var b = this.m_jointList; b; b = b.next)
                if (b.other == a && 0 == b.joint.m_collideConnected) return !1;
            return !0
        }, q.prototype.Advance = function(a) {
            void 0 === a && (a = 0), this.m_sweep.Advance(a), this.m_sweep.c.SetV(this.m_sweep.c0), this.m_sweep.a = this.m_sweep.a0, this.SynchronizeTransform()
        }, Box2D.postDefs.push(function() {
            Box2D.Dynamics.b2Body.s_xf1 = new c, Box2D.Dynamics.b2Body.e_islandFlag = 1, Box2D.Dynamics.b2Body.e_awakeFlag = 2, Box2D.Dynamics.b2Body.e_allowSleepFlag = 4, Box2D.Dynamics.b2Body.e_bulletFlag = 8, Box2D.Dynamics.b2Body.e_fixedRotationFlag = 16, Box2D.Dynamics.b2Body.e_activeFlag = 32, Box2D.Dynamics.b2Body.b2_staticBody = 0, Box2D.Dynamics.b2Body.b2_kinematicBody = 1, Box2D.Dynamics.b2Body.b2_dynamicBody = 2
        }), r.b2BodyDef = function() {
            this.position = new d, this.linearVelocity = new d
        }, r.prototype.b2BodyDef = function() {
            this.userData = null, this.position.Set(0, 0), this.angle = 0, this.linearVelocity.Set(0, 0), this.angularVelocity = 0, this.linearDamping = 0, this.angularDamping = 0, this.allowSleep = !0, this.awake = !0, this.fixedRotation = !1, this.bullet = !1, this.type = q.b2_staticBody, this.active = !0, this.inertiaScale = 1
        }, s.b2ContactFilter = function() {}, s.prototype.ShouldCollide = function(a, b) {
            var c = a.GetFilterData(),
                d = b.GetFilterData();
            if (c.groupIndex == d.groupIndex && 0 != c.groupIndex) return c.groupIndex > 0;
            var e = 0 != (c.maskBits & d.categoryBits) && 0 != (c.categoryBits & d.maskBits);
            return e
        }, s.prototype.RayCollide = function(a, b) {
            return a ? this.ShouldCollide(a instanceof z ? a : null, b) : !0
        }, Box2D.postDefs.push(function() {
            Box2D.Dynamics.b2ContactFilter.b2_defaultFilter = new s
        }), t.b2ContactImpulse = function() {
            this.normalImpulses = new Vector_a2j_Number(f.b2_maxManifoldPoints), this.tangentImpulses = new Vector_a2j_Number(f.b2_maxManifoldPoints)
        }, u.b2ContactListener = function() {}, u.prototype.BeginContact = function() {}, u.prototype.EndContact = function() {}, u.prototype.PreSolve = function() {}, u.prototype.PostSolve = function() {}, Box2D.postDefs.push(function() {
            Box2D.Dynamics.b2ContactListener.b2_defaultListener = new u
        }), v.b2ContactManager = function() {}, v.prototype.b2ContactManager = function() {
            this.m_world = null, this.m_contactCount = 0, this.m_contactFilter = s.b2_defaultFilter, this.m_contactListener = u.b2_defaultListener, this.m_contactFactory = new F(this.m_allocator), this.m_broadPhase = new i
        }, v.prototype.AddPair = function(a, b) {
            var c = a instanceof z ? a : null,
                d = b instanceof z ? b : null,
                e = c.GetBody(),
                f = d.GetBody();
            if (e != f) {
                for (var g = f.GetContactList(); g;) {
                    if (g.other == e) {
                        var h = g.contact.GetFixtureA(),
                            i = g.contact.GetFixtureB();
                        if (h == c && i == d) return;
                        if (h == d && i == c) return
                    }
                    g = g.next
                }
                if (0 != f.ShouldCollide(e) && 0 != this.m_contactFilter.ShouldCollide(c, d)) {
                    var j = this.m_contactFactory.Create(c, d);
                    c = j.GetFixtureA(), d = j.GetFixtureB(), e = c.m_body, f = d.m_body, j.m_prev = null, j.m_next = this.m_world.m_contactList, null != this.m_world.m_contactList && (this.m_world.m_contactList.m_prev = j), this.m_world.m_contactList = j, j.m_nodeA.contact = j, j.m_nodeA.other = f, j.m_nodeA.prev = null, j.m_nodeA.next = e.m_contactList, null != e.m_contactList && (e.m_contactList.prev = j.m_nodeA), e.m_contactList = j.m_nodeA, j.m_nodeB.contact = j, j.m_nodeB.other = e, j.m_nodeB.prev = null, j.m_nodeB.next = f.m_contactList, null != f.m_contactList && (f.m_contactList.prev = j.m_nodeB), f.m_contactList = j.m_nodeB, ++this.m_world.m_contactCount
                }
            }
        }, v.prototype.FindNewContacts = function() {
            this.m_broadPhase.UpdatePairs(Box2D.generateCallback(this, this.AddPair))
        }, v.prototype.Destroy = function(a) {
            var b = a.GetFixtureA(),
                c = a.GetFixtureB(),
                d = b.GetBody(),
                e = c.GetBody();
            a.IsTouching() && this.m_contactListener.EndContact(a), a.m_prev && (a.m_prev.m_next = a.m_next), a.m_next && (a.m_next.m_prev = a.m_prev), a == this.m_world.m_contactList && (this.m_world.m_contactList = a.m_next), a.m_nodeA.prev && (a.m_nodeA.prev.next = a.m_nodeA.next), a.m_nodeA.next && (a.m_nodeA.next.prev = a.m_nodeA.prev), a.m_nodeA == d.m_contactList && (d.m_contactList = a.m_nodeA.next), a.m_nodeB.prev && (a.m_nodeB.prev.next = a.m_nodeB.next), a.m_nodeB.next && (a.m_nodeB.next.prev = a.m_nodeB.prev), a.m_nodeB == e.m_contactList && (e.m_contactList = a.m_nodeB.next), this.m_contactFactory.Destroy(a), --this.m_contactCount
        }, v.prototype.Collide = function() {
            for (var a = this.m_world.m_contactList; a;) {
                var b = a.GetFixtureA(),
                    c = a.GetFixtureB(),
                    d = b.GetBody(),
                    e = c.GetBody();
                if (0 != d.IsAwake() || 0 != e.IsAwake()) {
                    if (a.m_flags & E.e_filterFlag) {
                        if (0 == e.ShouldCollide(d)) {
                            var f = a;
                            a = f.GetNext(), this.Destroy(f);
                            continue
                        }
                        if (0 == this.m_contactFilter.ShouldCollide(b, c)) {
                            f = a, a = f.GetNext(), this.Destroy(f);
                            continue
                        }
                        a.m_flags &= ~E.e_filterFlag
                    }
                    var g = b.m_proxy,
                        h = c.m_proxy,
                        i = this.m_broadPhase.TestOverlap(g, h);
                    0 != i ? (a.Update(this.m_contactListener), a = a.GetNext()) : (f = a, a = f.GetNext(), this.Destroy(f))
                } else a = a.GetNext()
            }
        }, Box2D.postDefs.push(function() {
            Box2D.Dynamics.b2ContactManager.s_evalCP = new h
        }), w.b2DebugDraw = function() {}, w.prototype.b2DebugDraw = function() {}, w.prototype.SetFlags = function(a) {
            void 0 === a && (a = 0)
        }, w.prototype.GetFlags = function() {}, w.prototype.AppendFlags = function(a) {
            void 0 === a && (a = 0)
        }, w.prototype.ClearFlags = function(a) {
            void 0 === a && (a = 0)
        }, w.prototype.SetSprite = function() {}, w.prototype.GetSprite = function() {}, w.prototype.SetDrawScale = function(a) {
            void 0 === a && (a = 0)
        }, w.prototype.GetDrawScale = function() {}, w.prototype.SetLineThickness = function(a) {
            void 0 === a && (a = 0)
        }, w.prototype.GetLineThickness = function() {}, w.prototype.SetAlpha = function(a) {
            void 0 === a && (a = 0)
        }, w.prototype.GetAlpha = function() {}, w.prototype.SetFillAlpha = function(a) {
            void 0 === a && (a = 0)
        }, w.prototype.GetFillAlpha = function() {}, w.prototype.SetXFormScale = function(a) {
            void 0 === a && (a = 0)
        }, w.prototype.GetXFormScale = function() {}, w.prototype.DrawPolygon = function(a, b) {
            void 0 === b && (b = 0)
        }, w.prototype.DrawSolidPolygon = function(a, b) {
            void 0 === b && (b = 0)
        }, w.prototype.DrawCircle = function(a, b) {
            void 0 === b && (b = 0)
        }, w.prototype.DrawSolidCircle = function(a, b) {
            void 0 === b && (b = 0)
        }, w.prototype.DrawSegment = function() {}, w.prototype.DrawTransform = function() {}, Box2D.postDefs.push(function() {
            Box2D.Dynamics.b2DebugDraw.e_shapeBit = 1, Box2D.Dynamics.b2DebugDraw.e_jointBit = 2, Box2D.Dynamics.b2DebugDraw.e_aabbBit = 4, Box2D.Dynamics.b2DebugDraw.e_pairBit = 8, Box2D.Dynamics.b2DebugDraw.e_centerOfMassBit = 16, Box2D.Dynamics.b2DebugDraw.e_controllerBit = 32
        }), x.b2DestructionListener = function() {}, x.prototype.SayGoodbyeJoint = function() {}, x.prototype.SayGoodbyeFixture = function() {}, y.b2FilterData = function() {
            this.categoryBits = 1, this.maskBits = 65535, this.groupIndex = 0
        }, y.prototype.Copy = function() {
            var a = new y;
            return a.categoryBits = this.categoryBits, a.maskBits = this.maskBits, a.groupIndex = this.groupIndex, a
        }, z.b2Fixture = function() {
            this.m_filter = new y
        }, z.prototype.GetType = function() {
            return this.m_shape.GetType()
        }, z.prototype.GetShape = function() {
            return this.m_shape
        }, z.prototype.SetSensor = function(a) {
            if (this.m_isSensor != a && (this.m_isSensor = a, null != this.m_body))
                for (var b = this.m_body.GetContactList(); b;) {
                    var c = b.contact,
                        d = c.GetFixtureA(),
                        e = c.GetFixtureB();
                    (d == this || e == this) && c.SetSensor(d.IsSensor() || e.IsSensor()), b = b.next
                }
        }, z.prototype.IsSensor = function() {
            return this.m_isSensor
        }, z.prototype.SetFilterData = function(a) {
            if (this.m_filter = a.Copy(), !this.m_body)
                for (var b = this.m_body.GetContactList(); b;) {
                    var c = b.contact,
                        d = c.GetFixtureA(),
                        e = c.GetFixtureB();
                    (d == this || e == this) && c.FlagForFiltering(), b = b.next
                }
        }, z.prototype.GetFilterData = function() {
            return this.m_filter.Copy()
        }, z.prototype.GetBody = function() {
            return this.m_body
        }, z.prototype.GetNext = function() {
            return this.m_next
        }, z.prototype.GetUserData = function() {
            return this.m_userData
        }, z.prototype.SetUserData = function(a) {
            this.m_userData = a
        }, z.prototype.TestPoint = function(a) {
            return this.m_shape.TestPoint(this.m_body.GetTransform(), a)
        }, z.prototype.RayCast = function(a, b) {
            return this.m_shape.RayCast(a, b, this.m_body.GetTransform())
        }, z.prototype.GetMassData = function(a) {
            return void 0 === a && (a = null), null == a && (a = new n), this.m_shape.ComputeMass(a, this.m_density), a
        }, z.prototype.SetDensity = function(a) {
            void 0 === a && (a = 0), this.m_density = a
        }, z.prototype.GetDensity = function() {
            return this.m_density
        }, z.prototype.GetFriction = function() {
            return this.m_friction
        }, z.prototype.SetFriction = function(a) {
            void 0 === a && (a = 0), this.m_friction = a
        }, z.prototype.GetRestitution = function() {
            return this.m_restitution
        }, z.prototype.SetRestitution = function(a) {
            void 0 === a && (a = 0), this.m_restitution = a
        }, z.prototype.GetAABB = function() {
            return this.m_aabb
        }, z.prototype.b2Fixture = function() {
            this.m_aabb = new g, this.m_userData = null, this.m_body = null, this.m_next = null, this.m_shape = null, this.m_density = 0, this.m_friction = 0, this.m_restitution = 0
        }, z.prototype.Create = function(a, b, c) {
            this.m_userData = c.userData, this.m_friction = c.friction, this.m_restitution = c.restitution, this.m_body = a, this.m_next = null, this.m_filter = c.filter.Copy(), this.m_isSensor = c.isSensor, this.m_shape = c.shape.Copy(), this.m_density = c.density
        }, z.prototype.Destroy = function() {
            this.m_shape = null
        }, z.prototype.CreateProxy = function(a, b) {
            this.m_shape.ComputeAABB(this.m_aabb, b), this.m_proxy = a.CreateProxy(this.m_aabb, this)
        }, z.prototype.DestroyProxy = function(a) {
            null != this.m_proxy && (a.DestroyProxy(this.m_proxy), this.m_proxy = null)
        }, z.prototype.Synchronize = function(b, c, d) {
            if (this.m_proxy) {
                var e = new g,
                    f = new g;
                this.m_shape.ComputeAABB(e, c), this.m_shape.ComputeAABB(f, d), this.m_aabb.Combine(e, f);
                var h = a.SubtractVV(d.position, c.position);
                b.MoveProxy(this.m_proxy, this.m_aabb, h)
            }
        }, A.b2FixtureDef = function() {
            this.filter = new y
        }, A.prototype.b2FixtureDef = function() {
            this.shape = null, this.userData = null, this.friction = .2, this.restitution = 0, this.density = 0, this.filter.categoryBits = 1, this.filter.maskBits = 65535, this.filter.groupIndex = 0, this.isSensor = !1
        }, B.b2Island = function() {}, B.prototype.b2Island = function() {
            this.m_bodies = new Vector, this.m_contacts = new Vector, this.m_joints = new Vector
        }, B.prototype.Initialize = function(a, b, c, d, e, f) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === c && (c = 0);
            var g = 0;
            for (this.m_bodyCapacity = a, this.m_contactCapacity = b, this.m_jointCapacity = c, this.m_bodyCount = 0, this.m_contactCount = 0, this.m_jointCount = 0, this.m_allocator = d, this.m_listener = e, this.m_contactSolver = f, g = this.m_bodies.length; a > g; g++) this.m_bodies[g] = null;
            for (g = this.m_contacts.length; b > g; g++) this.m_contacts[g] = null;
            for (g = this.m_joints.length; c > g; g++) this.m_joints[g] = null
        }, B.prototype.Clear = function() {
            this.m_bodyCount = 0, this.m_contactCount = 0, this.m_jointCount = 0
        }, B.prototype.Solve = function(b, c, d) {
            var e, g, h = 0,
                i = 0;
            for (h = 0; h < this.m_bodyCount; ++h) e = this.m_bodies[h], e.GetType() == q.b2_dynamicBody && (e.m_linearVelocity.x += b.dt * (c.x + e.m_invMass * e.m_force.x), e.m_linearVelocity.y += b.dt * (c.y + e.m_invMass * e.m_force.y), e.m_angularVelocity += b.dt * e.m_invI * e.m_torque, e.m_linearVelocity.Multiply(a.Clamp(1 - b.dt * e.m_linearDamping, 0, 1)), e.m_angularVelocity *= a.Clamp(1 - b.dt * e.m_angularDamping, 0, 1));
            this.m_contactSolver.Initialize(b, this.m_contacts, this.m_contactCount, this.m_allocator);
            var j = this.m_contactSolver;
            for (j.InitVelocityConstraints(b), h = 0; h < this.m_jointCount; ++h) g = this.m_joints[h], g.InitVelocityConstraints(b);
            for (h = 0; h < b.velocityIterations; ++h) {
                for (i = 0; i < this.m_jointCount; ++i) g = this.m_joints[i], g.SolveVelocityConstraints(b);
                j.SolveVelocityConstraints()
            }
            for (h = 0; h < this.m_jointCount; ++h) g = this.m_joints[h], g.FinalizeVelocityConstraints();
            for (j.FinalizeVelocityConstraints(), h = 0; h < this.m_bodyCount; ++h)
                if (e = this.m_bodies[h], e.GetType() != q.b2_staticBody) {
                    var k = b.dt * e.m_linearVelocity.x,
                        l = b.dt * e.m_linearVelocity.y;
                    k * k + l * l > f.b2_maxTranslationSquared && (e.m_linearVelocity.Normalize(), e.m_linearVelocity.x *= f.b2_maxTranslation * b.inv_dt, e.m_linearVelocity.y *= f.b2_maxTranslation * b.inv_dt);
                    var m = b.dt * e.m_angularVelocity;
                    m * m > f.b2_maxRotationSquared && (e.m_angularVelocity = e.m_angularVelocity < 0 ? -f.b2_maxRotation * b.inv_dt : f.b2_maxRotation * b.inv_dt), e.m_sweep.c0.SetV(e.m_sweep.c), e.m_sweep.a0 = e.m_sweep.a, e.m_sweep.c.x += b.dt * e.m_linearVelocity.x, e.m_sweep.c.y += b.dt * e.m_linearVelocity.y, e.m_sweep.a += b.dt * e.m_angularVelocity, e.SynchronizeTransform()
                }
            for (h = 0; h < b.positionIterations; ++h) {
                var n = j.SolvePositionConstraints(f.b2_contactBaumgarte),
                    o = !0;
                for (i = 0; i < this.m_jointCount; ++i) {
                    g = this.m_joints[i];
                    var p = g.SolvePositionConstraints(f.b2_contactBaumgarte);
                    o = o && p
                }
                if (n && o) break
            }
            if (this.Report(j.m_constraints), d) {
                var r = Number.MAX_VALUE,
                    s = f.b2_linearSleepTolerance * f.b2_linearSleepTolerance,
                    t = f.b2_angularSleepTolerance * f.b2_angularSleepTolerance;
                for (h = 0; h < this.m_bodyCount; ++h) e = this.m_bodies[h], e.GetType() != q.b2_staticBody && (0 == (e.m_flags & q.e_allowSleepFlag) && (e.m_sleepTime = 0, r = 0), 0 == (e.m_flags & q.e_allowSleepFlag) || e.m_angularVelocity * e.m_angularVelocity > t || a.Dot(e.m_linearVelocity, e.m_linearVelocity) > s ? (e.m_sleepTime = 0, r = 0) : (e.m_sleepTime += b.dt, r = a.Min(r, e.m_sleepTime)));
                if (r >= f.b2_timeToSleep)
                    for (h = 0; h < this.m_bodyCount; ++h) e = this.m_bodies[h], e.SetAwake(!1)
            }
        }, B.prototype.SolveTOI = function(a) {
            var b = 0,
                c = 0;
            this.m_contactSolver.Initialize(a, this.m_contacts, this.m_contactCount, this.m_allocator);
            var d = this.m_contactSolver;
            for (b = 0; b < this.m_jointCount; ++b) this.m_joints[b].InitVelocityConstraints(a);
            for (b = 0; b < a.velocityIterations; ++b)
                for (d.SolveVelocityConstraints(), c = 0; c < this.m_jointCount; ++c) this.m_joints[c].SolveVelocityConstraints(a);
            for (b = 0; b < this.m_bodyCount; ++b) {
                var e = this.m_bodies[b];
                if (e.GetType() != q.b2_staticBody) {
                    var g = a.dt * e.m_linearVelocity.x,
                        h = a.dt * e.m_linearVelocity.y;
                    g * g + h * h > f.b2_maxTranslationSquared && (e.m_linearVelocity.Normalize(), e.m_linearVelocity.x *= f.b2_maxTranslation * a.inv_dt, e.m_linearVelocity.y *= f.b2_maxTranslation * a.inv_dt);
                    var i = a.dt * e.m_angularVelocity;
                    i * i > f.b2_maxRotationSquared && (e.m_angularVelocity = e.m_angularVelocity < 0 ? -f.b2_maxRotation * a.inv_dt : f.b2_maxRotation * a.inv_dt), e.m_sweep.c0.SetV(e.m_sweep.c), e.m_sweep.a0 = e.m_sweep.a, e.m_sweep.c.x += a.dt * e.m_linearVelocity.x, e.m_sweep.c.y += a.dt * e.m_linearVelocity.y, e.m_sweep.a += a.dt * e.m_angularVelocity, e.SynchronizeTransform()
                }
            }
            var j = .75;
            for (b = 0; b < a.positionIterations; ++b) {
                var k = d.SolvePositionConstraints(j),
                    l = !0;
                for (c = 0; c < this.m_jointCount; ++c) {
                    var m = this.m_joints[c].SolvePositionConstraints(f.b2_contactBaumgarte);
                    l = l && m
                }
                if (k && l) break
            }
            this.Report(d.m_constraints)
        }, B.prototype.Report = function(a) {
            if (null != this.m_listener)
                for (var b = 0; b < this.m_contactCount; ++b) {
                    for (var c = this.m_contacts[b], d = a[b], e = 0; e < d.pointCount; ++e) B.s_impulse.normalImpulses[e] = d.points[e].normalImpulse, B.s_impulse.tangentImpulses[e] = d.points[e].tangentImpulse;
                    this.m_listener.PostSolve(c, B.s_impulse)
                }
        }, B.prototype.AddBody = function(a) {
            a.m_islandIndex = this.m_bodyCount, this.m_bodies[this.m_bodyCount++] = a
        }, B.prototype.AddContact = function(a) {
            this.m_contacts[this.m_contactCount++] = a
        }, B.prototype.AddJoint = function(a) {
            this.m_joints[this.m_jointCount++] = a
        }, Box2D.postDefs.push(function() {
            Box2D.Dynamics.b2Island.s_impulse = new t
        }), C.b2TimeStep = function() {}, C.prototype.Set = function(a) {
            this.dt = a.dt, this.inv_dt = a.inv_dt, this.positionIterations = a.positionIterations, this.velocityIterations = a.velocityIterations, this.warmStarting = a.warmStarting
        }, D.b2World = function() {
            this.s_stack = new Vector, this.m_contactManager = new v, this.m_contactSolver = new G, this.m_island = new B
        }, D.prototype.b2World = function(a, b) {
            this.m_destructionListener = null, this.m_debugDraw = null, this.m_bodyList = null, this.m_contactList = null, this.m_jointList = null, this.m_controllerList = null, this.m_bodyCount = 0, this.m_contactCount = 0, this.m_jointCount = 0, this.m_controllerCount = 0, D.m_warmStarting = !0, D.m_continuousPhysics = !0, this.m_allowSleep = b, this.m_gravity = a, this.m_inv_dt0 = 0, this.m_contactManager.m_world = this;
            var c = new r;
            this.m_groundBody = this.CreateBody(c)
        }, D.prototype.SetDestructionListener = function(a) {
            this.m_destructionListener = a
        }, D.prototype.SetContactFilter = function(a) {
            this.m_contactManager.m_contactFilter = a
        }, D.prototype.SetContactListener = function(a) {
            this.m_contactManager.m_contactListener = a
        }, D.prototype.SetDebugDraw = function(a) {
            this.m_debugDraw = a
        }, D.prototype.SetBroadPhase = function(a) {
            var b = this.m_contactManager.m_broadPhase;
            this.m_contactManager.m_broadPhase = a;
            for (var c = this.m_bodyList; c; c = c.m_next)
                for (var d = c.m_fixtureList; d; d = d.m_next) d.m_proxy = a.CreateProxy(b.GetFatAABB(d.m_proxy), d)
        }, D.prototype.Validate = function() {
            this.m_contactManager.m_broadPhase.Validate()
        }, D.prototype.GetProxyCount = function() {
            return this.m_contactManager.m_broadPhase.GetProxyCount()
        }, D.prototype.CreateBody = function(a) {
            if (1 == this.IsLocked()) return null;
            var b = new q(a, this);
            return b.m_prev = null, b.m_next = this.m_bodyList, this.m_bodyList && (this.m_bodyList.m_prev = b), this.m_bodyList = b, ++this.m_bodyCount, b
        }, D.prototype.DestroyBody = function(a) {
            if (1 != this.IsLocked()) {
                for (var b = a.m_jointList; b;) {
                    var c = b;
                    b = b.next, this.m_destructionListener && this.m_destructionListener.SayGoodbyeJoint(c.joint), this.DestroyJoint(c.joint)
                }
                for (var d = a.m_controllerList; d;) {
                    var e = d;
                    d = d.nextController, e.controller.RemoveBody(a)
                }
                for (var f = a.m_contactList; f;) {
                    var g = f;
                    f = f.next, this.m_contactManager.Destroy(g.contact)
                }
                a.m_contactList = null;
                for (var h = a.m_fixtureList; h;) {
                    var i = h;
                    h = h.m_next, this.m_destructionListener && this.m_destructionListener.SayGoodbyeFixture(i), i.DestroyProxy(this.m_contactManager.m_broadPhase), i.Destroy()
                }
                a.m_fixtureList = null, a.m_fixtureCount = 0, a.m_prev && (a.m_prev.m_next = a.m_next), a.m_next && (a.m_next.m_prev = a.m_prev), a == this.m_bodyList && (this.m_bodyList = a.m_next), --this.m_bodyCount
            }
        }, D.prototype.CreateJoint = function(a) {
            var b = H.Create(a, null);
            b.m_prev = null, b.m_next = this.m_jointList, this.m_jointList && (this.m_jointList.m_prev = b), this.m_jointList = b, ++this.m_jointCount, b.m_edgeA.joint = b, b.m_edgeA.other = b.m_bodyB, b.m_edgeA.prev = null, b.m_edgeA.next = b.m_bodyA.m_jointList, b.m_bodyA.m_jointList && (b.m_bodyA.m_jointList.prev = b.m_edgeA), b.m_bodyA.m_jointList = b.m_edgeA, b.m_edgeB.joint = b, b.m_edgeB.other = b.m_bodyA, b.m_edgeB.prev = null, b.m_edgeB.next = b.m_bodyB.m_jointList, b.m_bodyB.m_jointList && (b.m_bodyB.m_jointList.prev = b.m_edgeB), b.m_bodyB.m_jointList = b.m_edgeB;
            var c = a.bodyA,
                d = a.bodyB;
            if (0 == a.collideConnected)
                for (var e = d.GetContactList(); e;) e.other == c && e.contact.FlagForFiltering(), e = e.next;
            return b
        }, D.prototype.DestroyJoint = function(a) {
            var b = a.m_collideConnected;
            a.m_prev && (a.m_prev.m_next = a.m_next), a.m_next && (a.m_next.m_prev = a.m_prev), a == this.m_jointList && (this.m_jointList = a.m_next);
            var c = a.m_bodyA,
                d = a.m_bodyB;
            if (c.SetAwake(!0), d.SetAwake(!0), a.m_edgeA.prev && (a.m_edgeA.prev.next = a.m_edgeA.next), a.m_edgeA.next && (a.m_edgeA.next.prev = a.m_edgeA.prev), a.m_edgeA == c.m_jointList && (c.m_jointList = a.m_edgeA.next), a.m_edgeA.prev = null, a.m_edgeA.next = null, a.m_edgeB.prev && (a.m_edgeB.prev.next = a.m_edgeB.next), a.m_edgeB.next && (a.m_edgeB.next.prev = a.m_edgeB.prev), a.m_edgeB == d.m_jointList && (d.m_jointList = a.m_edgeB.next),
                a.m_edgeB.prev = null, a.m_edgeB.next = null, H.Destroy(a, null), --this.m_jointCount, 0 == b)
                for (var e = d.GetContactList(); e;) e.other == c && e.contact.FlagForFiltering(), e = e.next
        }, D.prototype.AddController = function(a) {
            return a.m_next = this.m_controllerList, a.m_prev = null, this.m_controllerList = a, a.m_world = this, this.m_controllerCount++, a
        }, D.prototype.RemoveController = function(a) {
            a.m_prev && (a.m_prev.m_next = a.m_next), a.m_next && (a.m_next.m_prev = a.m_prev), this.m_controllerList == a && (this.m_controllerList = a.m_next), this.m_controllerCount--
        }, D.prototype.CreateController = function(a) {
            if (a.m_world != this) throw new Error("Controller can only be a member of one world");
            return a.m_next = this.m_controllerList, a.m_prev = null, this.m_controllerList && (this.m_controllerList.m_prev = a), this.m_controllerList = a, ++this.m_controllerCount, a.m_world = this, a
        }, D.prototype.DestroyController = function(a) {
            a.Clear(), a.m_next && (a.m_next.m_prev = a.m_prev), a.m_prev && (a.m_prev.m_next = a.m_next), a == this.m_controllerList && (this.m_controllerList = a.m_next), --this.m_controllerCount
        }, D.prototype.SetWarmStarting = function(a) {
            D.m_warmStarting = a
        }, D.prototype.SetContinuousPhysics = function(a) {
            D.m_continuousPhysics = a
        }, D.prototype.GetBodyCount = function() {
            return this.m_bodyCount
        }, D.prototype.GetJointCount = function() {
            return this.m_jointCount
        }, D.prototype.GetContactCount = function() {
            return this.m_contactCount
        }, D.prototype.SetGravity = function(a) {
            this.m_gravity = a
        }, D.prototype.GetGravity = function() {
            return this.m_gravity
        }, D.prototype.GetGroundBody = function() {
            return this.m_groundBody
        }, D.prototype.Step = function(a, b, c) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === c && (c = 0), this.m_flags & D.e_newFixture && (this.m_contactManager.FindNewContacts(), this.m_flags &= ~D.e_newFixture), this.m_flags |= D.e_locked;
            var d = D.s_timestep2;
            d.dt = a, d.velocityIterations = b, d.positionIterations = c, d.inv_dt = a > 0 ? 1 / a : 0, d.dtRatio = this.m_inv_dt0 * a, d.warmStarting = D.m_warmStarting, this.m_contactManager.Collide(), d.dt > 0 && this.Solve(d), D.m_continuousPhysics && d.dt > 0 && this.SolveTOI(d), d.dt > 0 && (this.m_inv_dt0 = d.inv_dt), this.m_flags &= ~D.e_locked
        }, D.prototype.ClearForces = function() {
            for (var a = this.m_bodyList; a; a = a.m_next) a.m_force.SetZero(), a.m_torque = 0
        }, D.prototype.DrawDebugData = function() {
            if (null != this.m_debugDraw) {
                this.m_debugDraw.m_sprite.graphics.clear();
                var a, b, c, f, h, i, j = this.m_debugDraw.GetFlags(),
                    k = (new d, new d, new d, new g, new g, [new d, new d, new d, new d]),
                    l = new e(0, 0, 0);
                if (j & w.e_shapeBit)
                    for (a = this.m_bodyList; a; a = a.m_next)
                        for (i = a.m_xf, b = a.GetFixtureList(); b; b = b.m_next) c = b.GetShape(), 0 == a.IsActive() ? (l.Set(.5, .5, .3), this.DrawShape(c, i, l)) : a.GetType() == q.b2_staticBody ? (l.Set(.5, .9, .5), this.DrawShape(c, i, l)) : a.GetType() == q.b2_kinematicBody ? (l.Set(.5, .5, .9), this.DrawShape(c, i, l)) : 0 == a.IsAwake() ? (l.Set(.6, .6, .6), this.DrawShape(c, i, l)) : (l.Set(.9, .7, .7), this.DrawShape(c, i, l));
                if (j & w.e_jointBit)
                    for (f = this.m_jointList; f; f = f.m_next) this.DrawJoint(f);
                if (j & w.e_controllerBit)
                    for (var m = this.m_controllerList; m; m = m.m_next) m.Draw(this.m_debugDraw);
                if (j & w.e_pairBit) {
                    l.Set(.3, .9, .9);
                    for (var n = this.m_contactManager.m_contactList; n; n = n.GetNext()) {
                        var o = n.GetFixtureA(),
                            p = n.GetFixtureB(),
                            r = o.GetAABB().GetCenter(),
                            s = p.GetAABB().GetCenter();
                        this.m_debugDraw.DrawSegment(r, s, l)
                    }
                }
                if (j & w.e_aabbBit)
                    for (h = this.m_contactManager.m_broadPhase, k = [new d, new d, new d, new d], a = this.m_bodyList; a; a = a.GetNext())
                        if (0 != a.IsActive())
                            for (b = a.GetFixtureList(); b; b = b.GetNext()) {
                                var t = h.GetFatAABB(b.m_proxy);
                                k[0].Set(t.lowerBound.x, t.lowerBound.y), k[1].Set(t.upperBound.x, t.lowerBound.y), k[2].Set(t.upperBound.x, t.upperBound.y), k[3].Set(t.lowerBound.x, t.upperBound.y), this.m_debugDraw.DrawPolygon(k, 4, l)
                            }
                        if (j & w.e_centerOfMassBit)
                            for (a = this.m_bodyList; a; a = a.m_next) i = D.s_xf, i.R = a.m_xf.R, i.position = a.GetWorldCenter(), this.m_debugDraw.DrawTransform(i)
            }
        }, D.prototype.QueryAABB = function(a, b) {
            function c(b) {
                return a(e.GetUserData(b))
            }
            var d = this,
                e = d.m_contactManager.m_broadPhase;
            e.Query(c, b)
        }, D.prototype.QueryShape = function(a, b, d) {
            function e(c) {
                var e = h.GetUserData(c) instanceof z ? h.GetUserData(c) : null;
                return p.TestOverlap(b, d, e.GetShape(), e.GetBody().GetTransform()) ? a(e) : !0
            }
            var f = this;
            void 0 === d && (d = null), null == d && (d = new c, d.SetIdentity());
            var h = f.m_contactManager.m_broadPhase,
                i = new g;
            b.ComputeAABB(i, d), h.Query(e, i)
        }, D.prototype.QueryPoint = function(a, b) {
            function c(c) {
                var d = e.GetUserData(c) instanceof z ? e.GetUserData(c) : null;
                return d.TestPoint(b) ? a(d) : !0
            }
            var d = this,
                e = d.m_contactManager.m_broadPhase,
                h = new g;
            h.lowerBound.Set(b.x - f.b2_linearSlop, b.y - f.b2_linearSlop), h.upperBound.Set(b.x + f.b2_linearSlop, b.y + f.b2_linearSlop), e.Query(c, h)
        }, D.prototype.RayCast = function(a, b, c) {
            function e(e, f) {
                var i = g.GetUserData(f),
                    j = i instanceof z ? i : null,
                    k = j.RayCast(h, e);
                if (k) {
                    var l = h.fraction,
                        m = new d((1 - l) * b.x + l * c.x, (1 - l) * b.y + l * c.y);
                    return a(j, m, h.normal, l)
                }
                return e.maxFraction
            }
            var f = this,
                g = f.m_contactManager.m_broadPhase,
                h = new k,
                i = new j(b, c);
            g.RayCast(e, i)
        }, D.prototype.RayCastOne = function(a, b) {
            function c(a, b, c, e) {
                return void 0 === e && (e = 0), d = a, e
            }
            var d, e = this;
            return e.RayCast(c, a, b), d
        }, D.prototype.RayCastAll = function(a, b) {
            function c(a, b, c, d) {
                return void 0 === d && (d = 0), e[e.length] = a, 1
            }
            var d = this,
                e = new Vector;
            return d.RayCast(c, a, b), e
        }, D.prototype.GetBodyList = function() {
            return this.m_bodyList
        }, D.prototype.GetJointList = function() {
            return this.m_jointList
        }, D.prototype.GetContactList = function() {
            return this.m_contactList
        }, D.prototype.IsLocked = function() {
            return (this.m_flags & D.e_locked) > 0
        }, D.prototype.Solve = function(a) {
            for (var b, c = this.m_controllerList; c; c = c.m_next) c.Step(a);
            var d = this.m_island;
            for (d.Initialize(this.m_bodyCount, this.m_contactCount, this.m_jointCount, null, this.m_contactManager.m_contactListener, this.m_contactSolver), b = this.m_bodyList; b; b = b.m_next) b.m_flags &= ~q.e_islandFlag;
            for (var e = this.m_contactList; e; e = e.m_next) e.m_flags &= ~E.e_islandFlag;
            for (var f = this.m_jointList; f; f = f.m_next) f.m_islandFlag = !1;
            for (var g = (parseInt(this.m_bodyCount), this.s_stack), h = this.m_bodyList; h; h = h.m_next)
                if (!(h.m_flags & q.e_islandFlag) && 0 != h.IsAwake() && 0 != h.IsActive() && h.GetType() != q.b2_staticBody) {
                    d.Clear();
                    var i = 0;
                    for (g[i++] = h, h.m_flags |= q.e_islandFlag; i > 0;)
                        if (b = g[--i], d.AddBody(b), 0 == b.IsAwake() && b.SetAwake(!0), b.GetType() != q.b2_staticBody) {
                            for (var j, k = b.m_contactList; k; k = k.next) k.contact.m_flags & E.e_islandFlag || 1 != k.contact.IsSensor() && 0 != k.contact.IsEnabled() && 0 != k.contact.IsTouching() && (d.AddContact(k.contact), k.contact.m_flags |= E.e_islandFlag, j = k.other, j.m_flags & q.e_islandFlag || (g[i++] = j, j.m_flags |= q.e_islandFlag));
                            for (var l = b.m_jointList; l; l = l.next) 1 != l.joint.m_islandFlag && (j = l.other, 0 != j.IsActive() && (d.AddJoint(l.joint), l.joint.m_islandFlag = !0, j.m_flags & q.e_islandFlag || (g[i++] = j, j.m_flags |= q.e_islandFlag)))
                        }
                    d.Solve(a, this.m_gravity, this.m_allowSleep);
                    for (var m = 0; m < d.m_bodyCount; ++m) b = d.m_bodies[m], b.GetType() == q.b2_staticBody && (b.m_flags &= ~q.e_islandFlag)
                }
            for (m = 0; m < g.length && g[m]; ++m) g[m] = null;
            for (b = this.m_bodyList; b; b = b.m_next) 0 != b.IsAwake() && 0 != b.IsActive() && b.GetType() != q.b2_staticBody && b.SynchronizeFixtures();
            this.m_contactManager.FindNewContacts()
        }, D.prototype.SolveTOI = function(a) {
            var b, c, d, e, g, h, i, j = this.m_island;
            j.Initialize(this.m_bodyCount, f.b2_maxTOIContactsPerIsland, f.b2_maxTOIJointsPerIsland, null, this.m_contactManager.m_contactListener, this.m_contactSolver);
            var k = D.s_queue;
            for (b = this.m_bodyList; b; b = b.m_next) b.m_flags &= ~q.e_islandFlag, b.m_sweep.t0 = 0;
            var l;
            for (l = this.m_contactList; l; l = l.m_next) l.m_flags &= ~(E.e_toiFlag | E.e_islandFlag);
            for (i = this.m_jointList; i; i = i.m_next) i.m_islandFlag = !1;
            for (;;) {
                var m = null,
                    n = 1;
                for (l = this.m_contactList; l; l = l.m_next)
                    if (1 != l.IsSensor() && 0 != l.IsEnabled() && 0 != l.IsContinuous()) {
                        var o = 1;
                        if (l.m_flags & E.e_toiFlag) o = l.m_toi;
                        else {
                            if (c = l.m_fixtureA, d = l.m_fixtureB, e = c.m_body, g = d.m_body, !(e.GetType() == q.b2_dynamicBody && 0 != e.IsAwake() || g.GetType() == q.b2_dynamicBody && 0 != g.IsAwake())) continue;
                            var p = e.m_sweep.t0;
                            e.m_sweep.t0 < g.m_sweep.t0 ? (p = g.m_sweep.t0, e.m_sweep.Advance(p)) : g.m_sweep.t0 < e.m_sweep.t0 && (p = e.m_sweep.t0, g.m_sweep.Advance(p)), o = l.ComputeTOI(e.m_sweep, g.m_sweep), f.b2Assert(o >= 0 && 1 >= o), o > 0 && 1 > o && (o = (1 - o) * p + o, o > 1 && (o = 1)), l.m_toi = o, l.m_flags |= E.e_toiFlag
                        }
                        Box2D.MIN_VALUE < o && n > o && (m = l, n = o)
                    }
                if (null == m || 1 - 100 * Box2D.MIN_VALUE < n) break;
                if (c = m.m_fixtureA, d = m.m_fixtureB, e = c.m_body, g = d.m_body, D.s_backupA.Set(e.m_sweep), D.s_backupB.Set(g.m_sweep), e.Advance(n), g.Advance(n), m.Update(this.m_contactManager.m_contactListener), m.m_flags &= ~E.e_toiFlag, 1 != m.IsSensor() && 0 != m.IsEnabled()) {
                    if (0 != m.IsTouching()) {
                        var r = e;
                        r.GetType() != q.b2_dynamicBody && (r = g), j.Clear();
                        var s = 0,
                            t = 0;
                        for (k[s + t++] = r, r.m_flags |= q.e_islandFlag; t > 0;)
                            if (b = k[s++], --t, j.AddBody(b), 0 == b.IsAwake() && b.SetAwake(!0), b.GetType() == q.b2_dynamicBody) {
                                for (h = b.m_contactList; h && j.m_contactCount != j.m_contactCapacity; h = h.next)
                                    if (!(h.contact.m_flags & E.e_islandFlag) && 1 != h.contact.IsSensor() && 0 != h.contact.IsEnabled() && 0 != h.contact.IsTouching()) {
                                        j.AddContact(h.contact), h.contact.m_flags |= E.e_islandFlag;
                                        var u = h.other;
                                        u.m_flags & q.e_islandFlag || (u.GetType() != q.b2_staticBody && (u.Advance(n), u.SetAwake(!0)), k[s + t] = u, ++t, u.m_flags |= q.e_islandFlag)
                                    }
                                for (var v = b.m_jointList; v; v = v.next) j.m_jointCount != j.m_jointCapacity && 1 != v.joint.m_islandFlag && (u = v.other, 0 != u.IsActive() && (j.AddJoint(v.joint), v.joint.m_islandFlag = !0, u.m_flags & q.e_islandFlag || (u.GetType() != q.b2_staticBody && (u.Advance(n), u.SetAwake(!0)), k[s + t] = u, ++t, u.m_flags |= q.e_islandFlag)))
                            }
                        var w = D.s_timestep;
                        w.warmStarting = !1, w.dt = (1 - n) * a.dt, w.inv_dt = 1 / w.dt, w.dtRatio = 0, w.velocityIterations = a.velocityIterations, w.positionIterations = a.positionIterations, j.SolveTOI(w);
                        var x = 0;
                        for (x = 0; x < j.m_bodyCount; ++x)
                            if (b = j.m_bodies[x], b.m_flags &= ~q.e_islandFlag, 0 != b.IsAwake() && b.GetType() == q.b2_dynamicBody)
                                for (b.SynchronizeFixtures(), h = b.m_contactList; h; h = h.next) h.contact.m_flags &= ~E.e_toiFlag;
                        for (x = 0; x < j.m_contactCount; ++x) l = j.m_contacts[x], l.m_flags &= ~(E.e_toiFlag | E.e_islandFlag);
                        for (x = 0; x < j.m_jointCount; ++x) i = j.m_joints[x], i.m_islandFlag = !1;
                        this.m_contactManager.FindNewContacts()
                    }
                } else e.m_sweep.Set(D.s_backupA), g.m_sweep.Set(D.s_backupB), e.SynchronizeTransform(), g.SynchronizeTransform()
            }
        }, D.prototype.DrawJoint = function(a) {
            var b = a.GetBodyA(),
                c = a.GetBodyB(),
                d = b.m_xf,
                e = c.m_xf,
                f = d.position,
                g = e.position,
                h = a.GetAnchorA(),
                i = a.GetAnchorB(),
                j = D.s_jointColor;
            switch (a.m_type) {
                case H.e_distanceJoint:
                    this.m_debugDraw.DrawSegment(h, i, j);
                    break;
                case H.e_pulleyJoint:
                    var k = a instanceof I ? a : null,
                        l = k.GetGroundAnchorA(),
                        m = k.GetGroundAnchorB();
                    this.m_debugDraw.DrawSegment(l, h, j), this.m_debugDraw.DrawSegment(m, i, j), this.m_debugDraw.DrawSegment(l, m, j);
                    break;
                case H.e_mouseJoint:
                    this.m_debugDraw.DrawSegment(h, i, j);
                    break;
                default:
                    b != this.m_groundBody && this.m_debugDraw.DrawSegment(f, h, j), this.m_debugDraw.DrawSegment(h, i, j), c != this.m_groundBody && this.m_debugDraw.DrawSegment(g, i, j)
            }
        }, D.prototype.DrawShape = function(b, c, d) {
            switch (b.m_type) {
                case p.e_circleShape:
                    var e = b instanceof l ? b : null,
                        f = a.MulX(c, e.m_p),
                        g = e.m_radius,
                        h = c.R.col1;
                    this.m_debugDraw.DrawSolidCircle(f, g, h, d);
                    break;
                case p.e_polygonShape:
                    var i = 0,
                        j = b instanceof o ? b : null,
                        k = parseInt(j.GetVertexCount()),
                        n = j.GetVertices(),
                        q = new Vector(k);
                    for (i = 0; k > i; ++i) q[i] = a.MulX(c, n[i]);
                    this.m_debugDraw.DrawSolidPolygon(q, k, d);
                    break;
                case p.e_edgeShape:
                    var r = b instanceof m ? b : null;
                    this.m_debugDraw.DrawSegment(a.MulX(c, r.GetVertex1()), a.MulX(c, r.GetVertex2()), d)
            }
        }, Box2D.postDefs.push(function() {
            Box2D.Dynamics.b2World.s_timestep2 = new C, Box2D.Dynamics.b2World.s_xf = new c, Box2D.Dynamics.b2World.s_backupA = new b, Box2D.Dynamics.b2World.s_backupB = new b, Box2D.Dynamics.b2World.s_timestep = new C, Box2D.Dynamics.b2World.s_queue = new Vector, Box2D.Dynamics.b2World.s_jointColor = new e(.5, .8, .8), Box2D.Dynamics.b2World.e_newFixture = 1, Box2D.Dynamics.b2World.e_locked = 2
        })
    }(),
    function() {
        {
            var a = Box2D.Collision.Shapes.b2CircleShape,
                b = (Box2D.Collision.Shapes.b2EdgeChainDef, Box2D.Collision.Shapes.b2EdgeShape),
                c = (Box2D.Collision.Shapes.b2MassData, Box2D.Collision.Shapes.b2PolygonShape),
                d = Box2D.Collision.Shapes.b2Shape,
                e = Box2D.Dynamics.Contacts.b2CircleContact,
                f = Box2D.Dynamics.Contacts.b2Contact,
                g = Box2D.Dynamics.Contacts.b2ContactConstraint,
                h = Box2D.Dynamics.Contacts.b2ContactConstraintPoint,
                i = Box2D.Dynamics.Contacts.b2ContactEdge,
                j = Box2D.Dynamics.Contacts.b2ContactFactory,
                k = Box2D.Dynamics.Contacts.b2ContactRegister,
                l = Box2D.Dynamics.Contacts.b2ContactResult,
                m = Box2D.Dynamics.Contacts.b2ContactSolver,
                n = Box2D.Dynamics.Contacts.b2EdgeAndCircleContact,
                o = Box2D.Dynamics.Contacts.b2NullContact,
                p = Box2D.Dynamics.Contacts.b2PolyAndCircleContact,
                q = Box2D.Dynamics.Contacts.b2PolyAndEdgeContact,
                r = Box2D.Dynamics.Contacts.b2PolygonContact,
                s = Box2D.Dynamics.Contacts.b2PositionSolverManifold,
                t = Box2D.Dynamics.b2Body,
                u = (Box2D.Dynamics.b2BodyDef, Box2D.Dynamics.b2ContactFilter, Box2D.Dynamics.b2ContactImpulse, Box2D.Dynamics.b2ContactListener, Box2D.Dynamics.b2ContactManager, Box2D.Dynamics.b2DebugDraw, Box2D.Dynamics.b2DestructionListener, Box2D.Dynamics.b2FilterData, Box2D.Dynamics.b2Fixture, Box2D.Dynamics.b2FixtureDef, Box2D.Dynamics.b2Island, Box2D.Dynamics.b2TimeStep),
                v = (Box2D.Dynamics.b2World, Box2D.Common.b2Color, Box2D.Common.b2internal, Box2D.Common.b2Settings),
                w = Box2D.Common.Math.b2Mat22,
                x = (Box2D.Common.Math.b2Mat33, Box2D.Common.Math.b2Math),
                y = (Box2D.Common.Math.b2Sweep, Box2D.Common.Math.b2Transform, Box2D.Common.Math.b2Vec2),
                z = (Box2D.Common.Math.b2Vec3, Box2D.Collision.b2AABB, Box2D.Collision.b2Bound, Box2D.Collision.b2BoundValues, Box2D.Collision.b2Collision),
                A = Box2D.Collision.b2ContactID,
                B = (Box2D.Collision.b2ContactPoint, Box2D.Collision.b2Distance, Box2D.Collision.b2DistanceInput, Box2D.Collision.b2DistanceOutput, Box2D.Collision.b2DistanceProxy, Box2D.Collision.b2DynamicTree, Box2D.Collision.b2DynamicTreeBroadPhase, Box2D.Collision.b2DynamicTreeNode, Box2D.Collision.b2DynamicTreePair, Box2D.Collision.b2Manifold),
                C = (Box2D.Collision.b2ManifoldPoint, Box2D.Collision.b2Point, Box2D.Collision.b2RayCastInput, Box2D.Collision.b2RayCastOutput, Box2D.Collision.b2Segment, Box2D.Collision.b2SeparationFunction, Box2D.Collision.b2Simplex, Box2D.Collision.b2SimplexCache, Box2D.Collision.b2SimplexVertex, Box2D.Collision.b2TimeOfImpact),
                D = Box2D.Collision.b2TOIInput,
                E = Box2D.Collision.b2WorldManifold;
            Box2D.Collision.ClipVertex, Box2D.Collision.Features, Box2D.Collision.IBroadPhase
        }
        Box2D.inherit(e, Box2D.Dynamics.Contacts.b2Contact), e.prototype.__super = Box2D.Dynamics.Contacts.b2Contact.prototype, e.b2CircleContact = function() {
            Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this, arguments)
        }, e.Create = function() {
            return new e
        }, e.Destroy = function() {}, e.prototype.Reset = function(a, b) {
            this.__super.Reset.call(this, a, b)
        }, e.prototype.Evaluate = function() {
            var b = this.m_fixtureA.GetBody(),
                c = this.m_fixtureB.GetBody();
            z.CollideCircles(this.m_manifold, this.m_fixtureA.GetShape() instanceof a ? this.m_fixtureA.GetShape() : null, b.m_xf, this.m_fixtureB.GetShape() instanceof a ? this.m_fixtureB.GetShape() : null, c.m_xf)
        }, f.b2Contact = function() {
            this.m_nodeA = new i, this.m_nodeB = new i, this.m_manifold = new B, this.m_oldManifold = new B
        }, f.prototype.GetManifold = function() {
            return this.m_manifold
        }, f.prototype.GetWorldManifold = function(a) {
            var b = this.m_fixtureA.GetBody(),
                c = this.m_fixtureB.GetBody(),
                d = this.m_fixtureA.GetShape(),
                e = this.m_fixtureB.GetShape();
            a.Initialize(this.m_manifold, b.GetTransform(), d.m_radius, c.GetTransform(), e.m_radius)
        }, f.prototype.IsTouching = function() {
            return (this.m_flags & f.e_touchingFlag) == f.e_touchingFlag
        }, f.prototype.IsContinuous = function() {
            return (this.m_flags & f.e_continuousFlag) == f.e_continuousFlag
        }, f.prototype.SetSensor = function(a) {
            a ? this.m_flags |= f.e_sensorFlag : this.m_flags &= ~f.e_sensorFlag
        }, f.prototype.IsSensor = function() {
            return (this.m_flags & f.e_sensorFlag) == f.e_sensorFlag
        }, f.prototype.SetEnabled = function(a) {
            a ? this.m_flags |= f.e_enabledFlag : this.m_flags &= ~f.e_enabledFlag
        }, f.prototype.IsEnabled = function() {
            return (this.m_flags & f.e_enabledFlag) == f.e_enabledFlag
        }, f.prototype.GetNext = function() {
            return this.m_next
        }, f.prototype.GetFixtureA = function() {
            return this.m_fixtureA
        }, f.prototype.GetFixtureB = function() {
            return this.m_fixtureB
        }, f.prototype.FlagForFiltering = function() {
            this.m_flags |= f.e_filterFlag
        }, f.prototype.b2Contact = function() {}, f.prototype.Reset = function(a, b) {
            if (void 0 === a && (a = null), void 0 === b && (b = null), this.m_flags = f.e_enabledFlag, !a || !b) return this.m_fixtureA = null, void(this.m_fixtureB = null);
            (a.IsSensor() || b.IsSensor()) && (this.m_flags |= f.e_sensorFlag);
            var c = a.GetBody(),
                d = b.GetBody();
            (c.GetType() != t.b2_dynamicBody || c.IsBullet() || d.GetType() != t.b2_dynamicBody || d.IsBullet()) && (this.m_flags |= f.e_continuousFlag), this.m_fixtureA = a, this.m_fixtureB = b, this.m_manifold.m_pointCount = 0, this.m_prev = null, this.m_next = null, this.m_nodeA.contact = null, this.m_nodeA.prev = null, this.m_nodeA.next = null, this.m_nodeA.other = null, this.m_nodeB.contact = null, this.m_nodeB.prev = null, this.m_nodeB.next = null, this.m_nodeB.other = null
        }, f.prototype.Update = function(a) {
            var b = this.m_oldManifold;
            this.m_oldManifold = this.m_manifold, this.m_manifold = b, this.m_flags |= f.e_enabledFlag;
            var c = !1,
                e = (this.m_flags & f.e_touchingFlag) == f.e_touchingFlag,
                g = this.m_fixtureA.m_body,
                h = this.m_fixtureB.m_body,
                i = this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);
            if (this.m_flags & f.e_sensorFlag) {
                if (i) {
                    var j = this.m_fixtureA.GetShape(),
                        k = this.m_fixtureB.GetShape(),
                        l = g.GetTransform(),
                        m = h.GetTransform();
                    c = d.TestOverlap(j, l, k, m)
                }
                this.m_manifold.m_pointCount = 0
            } else {
                if (g.GetType() != t.b2_dynamicBody || g.IsBullet() || h.GetType() != t.b2_dynamicBody || h.IsBullet() ? this.m_flags |= f.e_continuousFlag : this.m_flags &= ~f.e_continuousFlag, i) {
                    this.Evaluate(), c = this.m_manifold.m_pointCount > 0;
                    for (var n = 0; n < this.m_manifold.m_pointCount; ++n) {
                        var o = this.m_manifold.m_points[n];
                        o.m_normalImpulse = 0, o.m_tangentImpulse = 0;
                        for (var p = o.m_id, q = 0; q < this.m_oldManifold.m_pointCount; ++q) {
                            var r = this.m_oldManifold.m_points[q];
                            if (r.m_id.key == p.key) {
                                o.m_normalImpulse = r.m_normalImpulse, o.m_tangentImpulse = r.m_tangentImpulse;
                                break
                            }
                        }
                    }
                } else this.m_manifold.m_pointCount = 0;
                c != e && (g.SetAwake(!0), h.SetAwake(!0))
            }
            c ? this.m_flags |= f.e_touchingFlag : this.m_flags &= ~f.e_touchingFlag, 0 == e && 1 == c && a.BeginContact(this), 1 == e && 0 == c && a.EndContact(this), 0 == (this.m_flags & f.e_sensorFlag) && a.PreSolve(this, this.m_oldManifold)
        }, f.prototype.Evaluate = function() {}, f.prototype.ComputeTOI = function(a, b) {
            return f.s_input.proxyA.Set(this.m_fixtureA.GetShape()), f.s_input.proxyB.Set(this.m_fixtureB.GetShape()), f.s_input.sweepA = a, f.s_input.sweepB = b, f.s_input.tolerance = v.b2_linearSlop, C.TimeOfImpact(f.s_input)
        }, Box2D.postDefs.push(function() {
            Box2D.Dynamics.Contacts.b2Contact.e_sensorFlag = 1, Box2D.Dynamics.Contacts.b2Contact.e_continuousFlag = 2, Box2D.Dynamics.Contacts.b2Contact.e_islandFlag = 4, Box2D.Dynamics.Contacts.b2Contact.e_toiFlag = 8, Box2D.Dynamics.Contacts.b2Contact.e_touchingFlag = 16, Box2D.Dynamics.Contacts.b2Contact.e_enabledFlag = 32, Box2D.Dynamics.Contacts.b2Contact.e_filterFlag = 64, Box2D.Dynamics.Contacts.b2Contact.s_input = new D
        }), g.b2ContactConstraint = function() {
            this.localPlaneNormal = new y, this.localPoint = new y, this.normal = new y, this.normalMass = new w, this.K = new w
        }, g.prototype.b2ContactConstraint = function() {
            this.points = new Vector(v.b2_maxManifoldPoints);
            for (var a = 0; a < v.b2_maxManifoldPoints; a++) this.points[a] = new h
        }, h.b2ContactConstraintPoint = function() {
            this.localPoint = new y, this.rA = new y, this.rB = new y
        }, i.b2ContactEdge = function() {}, j.b2ContactFactory = function() {}, j.prototype.b2ContactFactory = function(a) {
            this.m_allocator = a, this.InitializeRegisters()
        }, j.prototype.AddType = function(a, b, c, d) {
            void 0 === c && (c = 0), void 0 === d && (d = 0), this.m_registers[c][d].createFcn = a, this.m_registers[c][d].destroyFcn = b, this.m_registers[c][d].primary = !0, c != d && (this.m_registers[d][c].createFcn = a, this.m_registers[d][c].destroyFcn = b, this.m_registers[d][c].primary = !1)
        }, j.prototype.InitializeRegisters = function() {
            this.m_registers = new Vector(d.e_shapeTypeCount);
            for (var a = 0; a < d.e_shapeTypeCount; a++) {
                this.m_registers[a] = new Vector(d.e_shapeTypeCount);
                for (var b = 0; b < d.e_shapeTypeCount; b++) this.m_registers[a][b] = new k
            }
            this.AddType(e.Create, e.Destroy, d.e_circleShape, d.e_circleShape), this.AddType(p.Create, p.Destroy, d.e_polygonShape, d.e_circleShape), this.AddType(r.Create, r.Destroy, d.e_polygonShape, d.e_polygonShape), this.AddType(n.Create, n.Destroy, d.e_edgeShape, d.e_circleShape), this.AddType(q.Create, q.Destroy, d.e_polygonShape, d.e_edgeShape)
        }, j.prototype.Create = function(a, b) {
            var c, d = parseInt(a.GetType()),
                e = parseInt(b.GetType()),
                f = this.m_registers[d][e];
            if (f.pool) return c = f.pool, f.pool = c.m_next, f.poolCount--, c.Reset(a, b), c;
            var g = f.createFcn;
            return null != g ? f.primary ? (c = g(this.m_allocator), c.Reset(a, b), c) : (c = g(this.m_allocator), c.Reset(b, a), c) : null
        }, j.prototype.Destroy = function(a) {
            a.m_manifold.m_pointCount > 0 && (a.m_fixtureA.m_body.SetAwake(!0), a.m_fixtureB.m_body.SetAwake(!0));
            var b = parseInt(a.m_fixtureA.GetType()),
                c = parseInt(a.m_fixtureB.GetType()),
                d = this.m_registers[b][c];
            d.poolCount++, a.m_next = d.pool, d.pool = a;
            var e = d.destroyFcn;
            e(a, this.m_allocator)
        }, k.b2ContactRegister = function() {}, l.b2ContactResult = function() {
            this.position = new y, this.normal = new y, this.id = new A
        }, m.b2ContactSolver = function() {
            this.m_step = new u, this.m_constraints = new Vector
        }, m.prototype.b2ContactSolver = function() {}, m.prototype.Initialize = function(a, b, c, d) {
            void 0 === c && (c = 0);
            var e;
            this.m_step.Set(a), this.m_allocator = d;
            var f = 0;
            for (this.m_constraintCount = c; this.m_constraints.length < this.m_constraintCount;) this.m_constraints[this.m_constraints.length] = new g;
            for (f = 0; c > f; ++f) {
                e = b[f];
                var h = e.m_fixtureA,
                    i = e.m_fixtureB,
                    j = h.m_shape,
                    k = i.m_shape,
                    l = j.m_radius,
                    n = k.m_radius,
                    o = h.m_body,
                    p = i.m_body,
                    q = e.GetManifold(),
                    r = v.b2MixFriction(h.GetFriction(), i.GetFriction()),
                    s = v.b2MixRestitution(h.GetRestitution(), i.GetRestitution()),
                    t = o.m_linearVelocity.x,
                    u = o.m_linearVelocity.y,
                    w = p.m_linearVelocity.x,
                    x = p.m_linearVelocity.y,
                    y = o.m_angularVelocity,
                    z = p.m_angularVelocity;
                v.b2Assert(q.m_pointCount > 0), m.s_worldManifold.Initialize(q, o.m_xf, l, p.m_xf, n);
                var A = m.s_worldManifold.m_normal.x,
                    B = m.s_worldManifold.m_normal.y,
                    C = this.m_constraints[f];
                C.bodyA = o, C.bodyB = p, C.manifold = q, C.normal.x = A, C.normal.y = B, C.pointCount = q.m_pointCount, C.friction = r, C.restitution = s, C.localPlaneNormal.x = q.m_localPlaneNormal.x, C.localPlaneNormal.y = q.m_localPlaneNormal.y, C.localPoint.x = q.m_localPoint.x, C.localPoint.y = q.m_localPoint.y, C.radius = l + n, C.type = q.m_type;
                for (var D = 0; D < C.pointCount; ++D) {
                    var E = q.m_points[D],
                        F = C.points[D];
                    F.normalImpulse = E.m_normalImpulse, F.tangentImpulse = E.m_tangentImpulse, F.localPoint.SetV(E.m_localPoint);
                    var G = F.rA.x = m.s_worldManifold.m_points[D].x - o.m_sweep.c.x,
                        H = F.rA.y = m.s_worldManifold.m_points[D].y - o.m_sweep.c.y,
                        I = F.rB.x = m.s_worldManifold.m_points[D].x - p.m_sweep.c.x,
                        J = F.rB.y = m.s_worldManifold.m_points[D].y - p.m_sweep.c.y,
                        K = G * B - H * A,
                        L = I * B - J * A;
                    K *= K, L *= L;
                    var M = o.m_invMass + p.m_invMass + o.m_invI * K + p.m_invI * L;
                    F.normalMass = 1 / M;
                    var N = o.m_mass * o.m_invMass + p.m_mass * p.m_invMass;
                    N += o.m_mass * o.m_invI * K + p.m_mass * p.m_invI * L, F.equalizedMass = 1 / N;
                    var O = B,
                        P = -A,
                        Q = G * P - H * O,
                        R = I * P - J * O;
                    Q *= Q, R *= R;
                    var S = o.m_invMass + p.m_invMass + o.m_invI * Q + p.m_invI * R;
                    F.tangentMass = 1 / S, F.velocityBias = 0;
                    var T = w + -z * J - t - -y * H,
                        U = x + z * I - u - y * G,
                        V = C.normal.x * T + C.normal.y * U;
                    V < -v.b2_velocityThreshold && (F.velocityBias += -C.restitution * V)
                }
                if (2 == C.pointCount) {
                    var W = C.points[0],
                        X = C.points[1],
                        Y = o.m_invMass,
                        Z = o.m_invI,
                        $ = p.m_invMass,
                        _ = p.m_invI,
                        aa = W.rA.x * B - W.rA.y * A,
                        ba = W.rB.x * B - W.rB.y * A,
                        ca = X.rA.x * B - X.rA.y * A,
                        da = X.rB.x * B - X.rB.y * A,
                        ea = Y + $ + Z * aa * aa + _ * ba * ba,
                        fa = Y + $ + Z * ca * ca + _ * da * da,
                        ga = Y + $ + Z * aa * ca + _ * ba * da,
                        ha = 100;
                    ha * (ea * fa - ga * ga) > ea * ea ? (C.K.col1.Set(ea, ga), C.K.col2.Set(ga, fa), C.K.GetInverse(C.normalMass)) : C.pointCount = 1
                }
            }
        }, m.prototype.InitVelocityConstraints = function(a) {
            for (var b = 0; b < this.m_constraintCount; ++b) {
                var c = this.m_constraints[b],
                    d = c.bodyA,
                    e = c.bodyB,
                    f = d.m_invMass,
                    g = d.m_invI,
                    h = e.m_invMass,
                    i = e.m_invI,
                    j = c.normal.x,
                    k = c.normal.y,
                    l = k,
                    m = -j,
                    n = 0,
                    o = 0;
                if (a.warmStarting)
                    for (o = c.pointCount, n = 0; o > n; ++n) {
                        var p = c.points[n];
                        p.normalImpulse *= a.dtRatio, p.tangentImpulse *= a.dtRatio;
                        var q = p.normalImpulse * j + p.tangentImpulse * l,
                            r = p.normalImpulse * k + p.tangentImpulse * m;
                        d.m_angularVelocity -= g * (p.rA.x * r - p.rA.y * q), d.m_linearVelocity.x -= f * q, d.m_linearVelocity.y -= f * r, e.m_angularVelocity += i * (p.rB.x * r - p.rB.y * q), e.m_linearVelocity.x += h * q, e.m_linearVelocity.y += h * r
                    } else
                        for (o = c.pointCount, n = 0; o > n; ++n) {
                            var s = c.points[n];
                            s.normalImpulse = 0, s.tangentImpulse = 0
                        }
            }
        }, m.prototype.SolveVelocityConstraints = function() {
            for (var a, b, c = 0, d = 0, e = 0, f = 0, g = 0, h = 0, i = 0, j = 0, k = 0, l = 0, m = 0, n = 0, o = 0, p = 0, q = 0, r = 0, s = 0; s < this.m_constraintCount; ++s) {
                var t = this.m_constraints[s],
                    u = t.bodyA,
                    v = t.bodyB,
                    w = u.m_angularVelocity,
                    y = v.m_angularVelocity,
                    z = u.m_linearVelocity,
                    A = v.m_linearVelocity,
                    B = u.m_invMass,
                    C = u.m_invI,
                    D = v.m_invMass,
                    E = v.m_invI,
                    F = t.normal.x,
                    G = t.normal.y,
                    H = G,
                    I = -F,
                    J = t.friction;
                for (c = 0; c < t.pointCount; c++) a = t.points[c], d = A.x - y * a.rB.y - z.x + w * a.rA.y, e = A.y + y * a.rB.x - z.y - w * a.rA.x, g = d * H + e * I, h = a.tangentMass * -g, i = J * a.normalImpulse, j = x.Clamp(a.tangentImpulse + h, -i, i), h = j - a.tangentImpulse, k = h * H, l = h * I, z.x -= B * k, z.y -= B * l, w -= C * (a.rA.x * l - a.rA.y * k), A.x += D * k, A.y += D * l, y += E * (a.rB.x * l - a.rB.y * k), a.tangentImpulse = j; {
                    parseInt(t.pointCount)
                }
                if (1 == t.pointCount) a = t.points[0], d = A.x + -y * a.rB.y - z.x - -w * a.rA.y, e = A.y + y * a.rB.x - z.y - w * a.rA.x, f = d * F + e * G, h = -a.normalMass * (f - a.velocityBias), j = a.normalImpulse + h, j = j > 0 ? j : 0, h = j - a.normalImpulse, k = h * F, l = h * G, z.x -= B * k, z.y -= B * l, w -= C * (a.rA.x * l - a.rA.y * k), A.x += D * k, A.y += D * l, y += E * (a.rB.x * l - a.rB.y * k), a.normalImpulse = j;
                else {
                    var K = t.points[0],
                        L = t.points[1],
                        M = K.normalImpulse,
                        N = L.normalImpulse,
                        O = A.x - y * K.rB.y - z.x + w * K.rA.y,
                        P = A.y + y * K.rB.x - z.y - w * K.rA.x,
                        Q = A.x - y * L.rB.y - z.x + w * L.rA.y,
                        R = A.y + y * L.rB.x - z.y - w * L.rA.x,
                        S = O * F + P * G,
                        T = Q * F + R * G,
                        U = S - K.velocityBias,
                        V = T - L.velocityBias;
                    b = t.K, U -= b.col1.x * M + b.col2.x * N, V -= b.col1.y * M + b.col2.y * N;
                    for (;;) {
                        b = t.normalMass;
                        var W = -(b.col1.x * U + b.col2.x * V),
                            X = -(b.col1.y * U + b.col2.y * V);
                        if (W >= 0 && X >= 0) {
                            m = W - M, n = X - N, o = m * F, p = m * G, q = n * F, r = n * G, z.x -= B * (o + q), z.y -= B * (p + r), w -= C * (K.rA.x * p - K.rA.y * o + L.rA.x * r - L.rA.y * q), A.x += D * (o + q), A.y += D * (p + r), y += E * (K.rB.x * p - K.rB.y * o + L.rB.x * r - L.rB.y * q), K.normalImpulse = W, L.normalImpulse = X;
                            break
                        }
                        if (W = -K.normalMass * U, X = 0, S = 0, T = t.K.col1.y * W + V, W >= 0 && T >= 0) {
                            m = W - M, n = X - N, o = m * F, p = m * G, q = n * F, r = n * G, z.x -= B * (o + q), z.y -= B * (p + r), w -= C * (K.rA.x * p - K.rA.y * o + L.rA.x * r - L.rA.y * q), A.x += D * (o + q), A.y += D * (p + r), y += E * (K.rB.x * p - K.rB.y * o + L.rB.x * r - L.rB.y * q), K.normalImpulse = W, L.normalImpulse = X;
                            break
                        }
                        if (W = 0, X = -L.normalMass * V, S = t.K.col2.x * X + U, T = 0, X >= 0 && S >= 0) {
                            m = W - M, n = X - N, o = m * F, p = m * G, q = n * F, r = n * G, z.x -= B * (o + q), z.y -= B * (p + r), w -= C * (K.rA.x * p - K.rA.y * o + L.rA.x * r - L.rA.y * q), A.x += D * (o + q), A.y += D * (p + r), y += E * (K.rB.x * p - K.rB.y * o + L.rB.x * r - L.rB.y * q), K.normalImpulse = W, L.normalImpulse = X;
                            break
                        }
                        if (W = 0, X = 0, S = U, T = V, S >= 0 && T >= 0) {
                            m = W - M, n = X - N, o = m * F, p = m * G, q = n * F, r = n * G, z.x -= B * (o + q), z.y -= B * (p + r), w -= C * (K.rA.x * p - K.rA.y * o + L.rA.x * r - L.rA.y * q), A.x += D * (o + q), A.y += D * (p + r), y += E * (K.rB.x * p - K.rB.y * o + L.rB.x * r - L.rB.y * q), K.normalImpulse = W, L.normalImpulse = X;
                            break
                        }
                        break
                    }
                }
                u.m_angularVelocity = w, v.m_angularVelocity = y
            }
        }, m.prototype.FinalizeVelocityConstraints = function() {
            for (var a = 0; a < this.m_constraintCount; ++a)
                for (var b = this.m_constraints[a], c = b.manifold, d = 0; d < b.pointCount; ++d) {
                    var e = c.m_points[d],
                        f = b.points[d];
                    e.m_normalImpulse = f.normalImpulse, e.m_tangentImpulse = f.tangentImpulse
                }
        }, m.prototype.SolvePositionConstraints = function(a) {
            void 0 === a && (a = 0);
            for (var b = 0, c = 0; c < this.m_constraintCount; c++) {
                var d = this.m_constraints[c],
                    e = d.bodyA,
                    f = d.bodyB,
                    g = e.m_mass * e.m_invMass,
                    h = e.m_mass * e.m_invI,
                    i = f.m_mass * f.m_invMass,
                    j = f.m_mass * f.m_invI;
                m.s_psm.Initialize(d);
                for (var k = m.s_psm.m_normal, l = 0; l < d.pointCount; l++) {
                    var n = d.points[l],
                        o = m.s_psm.m_points[l],
                        p = m.s_psm.m_separations[l],
                        q = o.x - e.m_sweep.c.x,
                        r = o.y - e.m_sweep.c.y,
                        s = o.x - f.m_sweep.c.x,
                        t = o.y - f.m_sweep.c.y;
                    b = p > b ? b : p;
                    var u = x.Clamp(a * (p + v.b2_linearSlop), -v.b2_maxLinearCorrection, 0),
                        w = -n.equalizedMass * u,
                        y = w * k.x,
                        z = w * k.y;
                    e.m_sweep.c.x -= g * y, e.m_sweep.c.y -= g * z, e.m_sweep.a -= h * (q * z - r * y), e.SynchronizeTransform(), f.m_sweep.c.x += i * y, f.m_sweep.c.y += i * z, f.m_sweep.a += j * (s * z - t * y), f.SynchronizeTransform()
                }
            }
            return b > -1.5 * v.b2_linearSlop
        }, Box2D.postDefs.push(function() {
            Box2D.Dynamics.Contacts.b2ContactSolver.s_worldManifold = new E, Box2D.Dynamics.Contacts.b2ContactSolver.s_psm = new s
        }), Box2D.inherit(n, Box2D.Dynamics.Contacts.b2Contact), n.prototype.__super = Box2D.Dynamics.Contacts.b2Contact.prototype, n.b2EdgeAndCircleContact = function() {
            Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this, arguments)
        }, n.Create = function() {
            return new n
        }, n.Destroy = function() {}, n.prototype.Reset = function(a, b) {
            this.__super.Reset.call(this, a, b)
        }, n.prototype.Evaluate = function() {
            var c = this.m_fixtureA.GetBody(),
                d = this.m_fixtureB.GetBody();
            this.b2CollideEdgeAndCircle(this.m_manifold, this.m_fixtureA.GetShape() instanceof b ? this.m_fixtureA.GetShape() : null, c.m_xf, this.m_fixtureB.GetShape() instanceof a ? this.m_fixtureB.GetShape() : null, d.m_xf)
        }, n.prototype.b2CollideEdgeAndCircle = function() {}, Box2D.inherit(o, Box2D.Dynamics.Contacts.b2Contact), o.prototype.__super = Box2D.Dynamics.Contacts.b2Contact.prototype, o.b2NullContact = function() {
            Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this, arguments)
        }, o.prototype.b2NullContact = function() {
            this.__super.b2Contact.call(this)
        }, o.prototype.Evaluate = function() {}, Box2D.inherit(p, Box2D.Dynamics.Contacts.b2Contact), p.prototype.__super = Box2D.Dynamics.Contacts.b2Contact.prototype, p.b2PolyAndCircleContact = function() {
            Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this, arguments)
        }, p.Create = function() {
            return new p
        }, p.Destroy = function() {}, p.prototype.Reset = function(a, b) {
            this.__super.Reset.call(this, a, b), v.b2Assert(a.GetType() == d.e_polygonShape), v.b2Assert(b.GetType() == d.e_circleShape)
        }, p.prototype.Evaluate = function() {
            var b = this.m_fixtureA.m_body,
                d = this.m_fixtureB.m_body;
            z.CollidePolygonAndCircle(this.m_manifold, this.m_fixtureA.GetShape() instanceof c ? this.m_fixtureA.GetShape() : null, b.m_xf, this.m_fixtureB.GetShape() instanceof a ? this.m_fixtureB.GetShape() : null, d.m_xf)
        }, Box2D.inherit(q, Box2D.Dynamics.Contacts.b2Contact), q.prototype.__super = Box2D.Dynamics.Contacts.b2Contact.prototype, q.b2PolyAndEdgeContact = function() {
            Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this, arguments)
        }, q.Create = function() {
            return new q
        }, q.Destroy = function() {}, q.prototype.Reset = function(a, b) {
            this.__super.Reset.call(this, a, b), v.b2Assert(a.GetType() == d.e_polygonShape), v.b2Assert(b.GetType() == d.e_edgeShape)
        }, q.prototype.Evaluate = function() {
            var a = this.m_fixtureA.GetBody(),
                d = this.m_fixtureB.GetBody();
            this.b2CollidePolyAndEdge(this.m_manifold, this.m_fixtureA.GetShape() instanceof c ? this.m_fixtureA.GetShape() : null, a.m_xf, this.m_fixtureB.GetShape() instanceof b ? this.m_fixtureB.GetShape() : null, d.m_xf)
        }, q.prototype.b2CollidePolyAndEdge = function() {}, Box2D.inherit(r, Box2D.Dynamics.Contacts.b2Contact), r.prototype.__super = Box2D.Dynamics.Contacts.b2Contact.prototype, r.b2PolygonContact = function() {
            Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this, arguments)
        }, r.Create = function() {
            return new r
        }, r.Destroy = function() {}, r.prototype.Reset = function(a, b) {
            this.__super.Reset.call(this, a, b)
        }, r.prototype.Evaluate = function() {
            var a = this.m_fixtureA.GetBody(),
                b = this.m_fixtureB.GetBody();
            z.CollidePolygons(this.m_manifold, this.m_fixtureA.GetShape() instanceof c ? this.m_fixtureA.GetShape() : null, a.m_xf, this.m_fixtureB.GetShape() instanceof c ? this.m_fixtureB.GetShape() : null, b.m_xf)
        }, s.b2PositionSolverManifold = function() {}, s.prototype.b2PositionSolverManifold = function() {
            this.m_normal = new y, this.m_separations = new Vector_a2j_Number(v.b2_maxManifoldPoints), this.m_points = new Vector(v.b2_maxManifoldPoints);
            for (var a = 0; a < v.b2_maxManifoldPoints; a++) this.m_points[a] = new y
        }, s.prototype.Initialize = function(a) {
            v.b2Assert(a.pointCount > 0);
            var b, c, d = 0,
                e = 0,
                f = 0,
                g = 0,
                h = 0;
            switch (a.type) {
                case B.e_circles:
                    b = a.bodyA.m_xf.R, c = a.localPoint;
                    var i = a.bodyA.m_xf.position.x + (b.col1.x * c.x + b.col2.x * c.y),
                        j = a.bodyA.m_xf.position.y + (b.col1.y * c.x + b.col2.y * c.y);
                    b = a.bodyB.m_xf.R, c = a.points[0].localPoint;
                    var k = a.bodyB.m_xf.position.x + (b.col1.x * c.x + b.col2.x * c.y),
                        l = a.bodyB.m_xf.position.y + (b.col1.y * c.x + b.col2.y * c.y),
                        m = k - i,
                        n = l - j,
                        o = m * m + n * n;
                    if (o > Box2D.MIN_VALUE * Box2D.MIN_VALUE) {
                        var p = Math.sqrt(o);
                        this.m_normal.x = m / p, this.m_normal.y = n / p
                    } else this.m_normal.x = 1, this.m_normal.y = 0;
                    this.m_points[0].x = .5 * (i + k), this.m_points[0].y = .5 * (j + l), this.m_separations[0] = m * this.m_normal.x + n * this.m_normal.y - a.radius;
                    break;
                case B.e_faceA:
                    for (b = a.bodyA.m_xf.R, c = a.localPlaneNormal, this.m_normal.x = b.col1.x * c.x + b.col2.x * c.y, this.m_normal.y = b.col1.y * c.x + b.col2.y * c.y, b = a.bodyA.m_xf.R, c = a.localPoint, g = a.bodyA.m_xf.position.x + (b.col1.x * c.x + b.col2.x * c.y), h = a.bodyA.m_xf.position.y + (b.col1.y * c.x + b.col2.y * c.y), b = a.bodyB.m_xf.R, d = 0; d < a.pointCount; ++d) c = a.points[d].localPoint,
                        e = a.bodyB.m_xf.position.x + (b.col1.x * c.x + b.col2.x * c.y), f = a.bodyB.m_xf.position.y + (b.col1.y * c.x + b.col2.y * c.y), this.m_separations[d] = (e - g) * this.m_normal.x + (f - h) * this.m_normal.y - a.radius, this.m_points[d].x = e, this.m_points[d].y = f;
                    break;
                case B.e_faceB:
                    for (b = a.bodyB.m_xf.R, c = a.localPlaneNormal, this.m_normal.x = b.col1.x * c.x + b.col2.x * c.y, this.m_normal.y = b.col1.y * c.x + b.col2.y * c.y, b = a.bodyB.m_xf.R, c = a.localPoint, g = a.bodyB.m_xf.position.x + (b.col1.x * c.x + b.col2.x * c.y), h = a.bodyB.m_xf.position.y + (b.col1.y * c.x + b.col2.y * c.y), b = a.bodyA.m_xf.R, d = 0; d < a.pointCount; ++d) c = a.points[d].localPoint, e = a.bodyA.m_xf.position.x + (b.col1.x * c.x + b.col2.x * c.y), f = a.bodyA.m_xf.position.y + (b.col1.y * c.x + b.col2.y * c.y), this.m_separations[d] = (e - g) * this.m_normal.x + (f - h) * this.m_normal.y - a.radius, this.m_points[d].Set(e, f);
                    this.m_normal.x *= -1, this.m_normal.y *= -1
            }
        }, Box2D.postDefs.push(function() {
            Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointA = new y, Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointB = new y
        })
    }(),
    function() {
        var a = (Box2D.Dynamics.b2Body, Box2D.Dynamics.b2BodyDef, Box2D.Dynamics.b2ContactFilter, Box2D.Dynamics.b2ContactImpulse, Box2D.Dynamics.b2ContactListener, Box2D.Dynamics.b2ContactManager, Box2D.Dynamics.b2DebugDraw, Box2D.Dynamics.b2DestructionListener, Box2D.Dynamics.b2FilterData, Box2D.Dynamics.b2Fixture, Box2D.Dynamics.b2FixtureDef, Box2D.Dynamics.b2Island, Box2D.Dynamics.b2TimeStep, Box2D.Dynamics.b2World, Box2D.Common.Math.b2Mat22),
            b = (Box2D.Common.Math.b2Mat33, Box2D.Common.Math.b2Math),
            c = (Box2D.Common.Math.b2Sweep, Box2D.Common.Math.b2Transform, Box2D.Common.Math.b2Vec2),
            d = (Box2D.Common.Math.b2Vec3, Box2D.Common.b2Color),
            e = (Box2D.Common.b2internal, Box2D.Common.b2Settings, Box2D.Collision.Shapes.b2CircleShape, Box2D.Collision.Shapes.b2EdgeChainDef, Box2D.Collision.Shapes.b2EdgeShape, Box2D.Collision.Shapes.b2MassData, Box2D.Collision.Shapes.b2PolygonShape, Box2D.Collision.Shapes.b2Shape, Box2D.Dynamics.Controllers.b2BuoyancyController),
            f = Box2D.Dynamics.Controllers.b2ConstantAccelController,
            g = Box2D.Dynamics.Controllers.b2ConstantForceController,
            h = Box2D.Dynamics.Controllers.b2Controller,
            i = Box2D.Dynamics.Controllers.b2ControllerEdge,
            j = Box2D.Dynamics.Controllers.b2GravityController,
            k = Box2D.Dynamics.Controllers.b2TensorDampingController;
        Box2D.inherit(e, Box2D.Dynamics.Controllers.b2Controller), e.prototype.__super = Box2D.Dynamics.Controllers.b2Controller.prototype, e.b2BuoyancyController = function() {
            Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this, arguments), this.normal = new c(0, -1), this.offset = 0, this.density = 0, this.velocity = new c(0, 0), this.linearDrag = 2, this.angularDrag = 1, this.useDensity = !1, this.useWorldGravity = !0, this.gravity = null
        }, e.prototype.Step = function() {
            if (this.m_bodyList) {
                this.useWorldGravity && (this.gravity = this.GetWorld().GetGravity().Copy());
                for (var a = this.m_bodyList; a; a = a.nextBody) {
                    var b = a.body;
                    if (0 != b.IsAwake()) {
                        for (var d = new c, e = new c, f = 0, g = 0, h = b.GetFixtureList(); h; h = h.GetNext()) {
                            var i = new c,
                                j = h.GetShape().ComputeSubmergedArea(this.normal, this.offset, b.GetTransform(), i);
                            f += j, d.x += j * i.x, d.y += j * i.y;
                            var k = 0;
                            k = (this.useDensity, 1), g += j * k, e.x += j * i.x * k, e.y += j * i.y * k
                        }
                        if (d.x /= f, d.y /= f, e.x /= g, e.y /= g, !(f < Box2D.MIN_VALUE)) {
                            var l = this.gravity.GetNegative();
                            l.Multiply(this.density * f), b.ApplyForce(l, e);
                            var m = b.GetLinearVelocityFromWorldPoint(d);
                            m.Subtract(this.velocity), m.Multiply(-this.linearDrag * f), b.ApplyForce(m, d), b.ApplyTorque(-b.GetInertia() / b.GetMass() * f * b.GetAngularVelocity() * this.angularDrag)
                        }
                    }
                }
            }
        }, e.prototype.Draw = function(a) {
            var b = 1e3,
                e = new c,
                f = new c;
            e.x = this.normal.x * this.offset + this.normal.y * b, e.y = this.normal.y * this.offset - this.normal.x * b, f.x = this.normal.x * this.offset - this.normal.y * b, f.y = this.normal.y * this.offset + this.normal.x * b;
            var g = new d(0, 0, 1);
            a.DrawSegment(e, f, g)
        }, Box2D.inherit(f, Box2D.Dynamics.Controllers.b2Controller), f.prototype.__super = Box2D.Dynamics.Controllers.b2Controller.prototype, f.b2ConstantAccelController = function() {
            Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this, arguments), this.A = new c(0, 0)
        }, f.prototype.Step = function(a) {
            for (var b = new c(this.A.x * a.dt, this.A.y * a.dt), d = this.m_bodyList; d; d = d.nextBody) {
                var e = d.body;
                e.IsAwake() && e.SetLinearVelocity(new c(e.GetLinearVelocity().x + b.x, e.GetLinearVelocity().y + b.y))
            }
        }, Box2D.inherit(g, Box2D.Dynamics.Controllers.b2Controller), g.prototype.__super = Box2D.Dynamics.Controllers.b2Controller.prototype, g.b2ConstantForceController = function() {
            Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this, arguments), this.F = new c(0, 0)
        }, g.prototype.Step = function() {
            for (var a = this.m_bodyList; a; a = a.nextBody) {
                var b = a.body;
                b.IsAwake() && b.ApplyForce(this.F, b.GetWorldCenter())
            }
        }, h.b2Controller = function() {}, h.prototype.Step = function() {}, h.prototype.Draw = function() {}, h.prototype.AddBody = function(a) {
            var b = new i;
            b.controller = this, b.body = a, b.nextBody = this.m_bodyList, b.prevBody = null, this.m_bodyList = b, b.nextBody && (b.nextBody.prevBody = b), this.m_bodyCount++, b.nextController = a.m_controllerList, b.prevController = null, a.m_controllerList = b, b.nextController && (b.nextController.prevController = b), a.m_controllerCount++
        }, h.prototype.RemoveBody = function(a) {
            for (var b = a.m_controllerList; b && b.controller != this;) b = b.nextController;
            b.prevBody && (b.prevBody.nextBody = b.nextBody), b.nextBody && (b.nextBody.prevBody = b.prevBody), b.nextController && (b.nextController.prevController = b.prevController), b.prevController && (b.prevController.nextController = b.nextController), this.m_bodyList == b && (this.m_bodyList = b.nextBody), a.m_controllerList == b && (a.m_controllerList = b.nextController), a.m_controllerCount--, this.m_bodyCount--
        }, h.prototype.Clear = function() {
            for (; this.m_bodyList;) this.RemoveBody(this.m_bodyList.body)
        }, h.prototype.GetNext = function() {
            return this.m_next
        }, h.prototype.GetWorld = function() {
            return this.m_world
        }, h.prototype.GetBodyList = function() {
            return this.m_bodyList
        }, i.b2ControllerEdge = function() {}, Box2D.inherit(j, Box2D.Dynamics.Controllers.b2Controller), j.prototype.__super = Box2D.Dynamics.Controllers.b2Controller.prototype, j.b2GravityController = function() {
            Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this, arguments), this.G = 1, this.invSqr = !0
        }, j.prototype.Step = function() {
            var a = null,
                b = null,
                d = null,
                e = 0,
                f = null,
                g = null,
                h = null,
                i = 0,
                j = 0,
                k = 0,
                l = null;
            if (this.invSqr)
                for (a = this.m_bodyList; a; a = a.nextBody)
                    for (b = a.body, d = b.GetWorldCenter(), e = b.GetMass(), f = this.m_bodyList; f != a; f = f.nextBody) g = f.body, h = g.GetWorldCenter(), i = h.x - d.x, j = h.y - d.y, k = i * i + j * j, k < Box2D.MIN_VALUE || (l = new c(i, j), l.Multiply(this.G / k / Math.sqrt(k) * e * g.GetMass()), b.IsAwake() && b.ApplyForce(l, d), l.Multiply(-1), g.IsAwake() && g.ApplyForce(l, h));
            else
                for (a = this.m_bodyList; a; a = a.nextBody)
                    for (b = a.body, d = b.GetWorldCenter(), e = b.GetMass(), f = this.m_bodyList; f != a; f = f.nextBody) g = f.body, h = g.GetWorldCenter(), i = h.x - d.x, j = h.y - d.y, k = i * i + j * j, k < Box2D.MIN_VALUE || (l = new c(i, j), l.Multiply(this.G / k * e * g.GetMass()), b.IsAwake() && b.ApplyForce(l, d), l.Multiply(-1), g.IsAwake() && g.ApplyForce(l, h))
        }, Box2D.inherit(k, Box2D.Dynamics.Controllers.b2Controller), k.prototype.__super = Box2D.Dynamics.Controllers.b2Controller.prototype, k.b2TensorDampingController = function() {
            Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this, arguments), this.T = new a, this.maxTimestep = 0
        }, k.prototype.SetAxisAligned = function(a, b) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), this.T.col1.x = -a, this.T.col1.y = 0, this.T.col2.x = 0, this.T.col2.y = -b, this.maxTimestep = a > 0 || b > 0 ? 1 / Math.max(a, b) : 0
        }, k.prototype.Step = function(a) {
            var d = a.dt;
            if (!(d <= Box2D.MIN_VALUE)) {
                d > this.maxTimestep && this.maxTimestep > 0 && (d = this.maxTimestep);
                for (var e = this.m_bodyList; e; e = e.nextBody) {
                    var f = e.body;
                    if (f.IsAwake()) {
                        var g = f.GetWorldVector(b.MulMV(this.T, f.GetLocalVector(f.GetLinearVelocity())));
                        f.SetLinearVelocity(new c(f.GetLinearVelocity().x + g.x * d, f.GetLinearVelocity().y + g.y * d))
                    }
                }
            }
        }
    }(),
    function() {
        {
            var a = (Box2D.Common.b2Color, Box2D.Common.b2internal, Box2D.Common.b2Settings),
                b = Box2D.Common.Math.b2Mat22,
                c = Box2D.Common.Math.b2Mat33,
                d = Box2D.Common.Math.b2Math,
                e = (Box2D.Common.Math.b2Sweep, Box2D.Common.Math.b2Transform, Box2D.Common.Math.b2Vec2),
                f = Box2D.Common.Math.b2Vec3,
                g = Box2D.Dynamics.Joints.b2DistanceJoint,
                h = Box2D.Dynamics.Joints.b2DistanceJointDef,
                i = Box2D.Dynamics.Joints.b2FrictionJoint,
                j = Box2D.Dynamics.Joints.b2FrictionJointDef,
                k = Box2D.Dynamics.Joints.b2GearJoint,
                l = Box2D.Dynamics.Joints.b2GearJointDef,
                m = Box2D.Dynamics.Joints.b2Jacobian,
                n = Box2D.Dynamics.Joints.b2Joint,
                o = Box2D.Dynamics.Joints.b2JointDef,
                p = Box2D.Dynamics.Joints.b2JointEdge,
                q = Box2D.Dynamics.Joints.b2LineJoint,
                r = Box2D.Dynamics.Joints.b2LineJointDef,
                s = Box2D.Dynamics.Joints.b2MouseJoint,
                t = Box2D.Dynamics.Joints.b2MouseJointDef,
                u = Box2D.Dynamics.Joints.b2PrismaticJoint,
                v = Box2D.Dynamics.Joints.b2PrismaticJointDef,
                w = Box2D.Dynamics.Joints.b2PulleyJoint,
                x = Box2D.Dynamics.Joints.b2PulleyJointDef,
                y = Box2D.Dynamics.Joints.b2RevoluteJoint,
                z = Box2D.Dynamics.Joints.b2RevoluteJointDef,
                A = Box2D.Dynamics.Joints.b2WeldJoint,
                B = Box2D.Dynamics.Joints.b2WeldJointDef;
            Box2D.Dynamics.b2Body, Box2D.Dynamics.b2BodyDef, Box2D.Dynamics.b2ContactFilter, Box2D.Dynamics.b2ContactImpulse, Box2D.Dynamics.b2ContactListener, Box2D.Dynamics.b2ContactManager, Box2D.Dynamics.b2DebugDraw, Box2D.Dynamics.b2DestructionListener, Box2D.Dynamics.b2FilterData, Box2D.Dynamics.b2Fixture, Box2D.Dynamics.b2FixtureDef, Box2D.Dynamics.b2Island, Box2D.Dynamics.b2TimeStep, Box2D.Dynamics.b2World
        }
        Box2D.inherit(g, Box2D.Dynamics.Joints.b2Joint), g.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype, g.b2DistanceJoint = function() {
            Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments), this.m_localAnchor1 = new e, this.m_localAnchor2 = new e, this.m_u = new e
        }, g.prototype.GetAnchorA = function() {
            return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)
        }, g.prototype.GetAnchorB = function() {
            return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)
        }, g.prototype.GetReactionForce = function(a) {
            return void 0 === a && (a = 0), new e(a * this.m_impulse * this.m_u.x, a * this.m_impulse * this.m_u.y)
        }, g.prototype.GetReactionTorque = function(a) {
            return void 0 === a && (a = 0), 0
        }, g.prototype.GetLength = function() {
            return this.m_length
        }, g.prototype.SetLength = function(a) {
            void 0 === a && (a = 0), this.m_length = a
        }, g.prototype.GetFrequency = function() {
            return this.m_frequencyHz
        }, g.prototype.SetFrequency = function(a) {
            void 0 === a && (a = 0), this.m_frequencyHz = a
        }, g.prototype.GetDampingRatio = function() {
            return this.m_dampingRatio
        }, g.prototype.SetDampingRatio = function(a) {
            void 0 === a && (a = 0), this.m_dampingRatio = a
        }, g.prototype.b2DistanceJoint = function(a) {
            this.__super.b2Joint.call(this, a);
            this.m_localAnchor1.SetV(a.localAnchorA), this.m_localAnchor2.SetV(a.localAnchorB), this.m_length = a.length, this.m_frequencyHz = a.frequencyHz, this.m_dampingRatio = a.dampingRatio, this.m_impulse = 0, this.m_gamma = 0, this.m_bias = 0
        }, g.prototype.InitVelocityConstraints = function(b) {
            var c, d = 0,
                e = this.m_bodyA,
                f = this.m_bodyB;
            c = e.m_xf.R;
            var g = this.m_localAnchor1.x - e.m_sweep.localCenter.x,
                h = this.m_localAnchor1.y - e.m_sweep.localCenter.y;
            d = c.col1.x * g + c.col2.x * h, h = c.col1.y * g + c.col2.y * h, g = d, c = f.m_xf.R;
            var i = this.m_localAnchor2.x - f.m_sweep.localCenter.x,
                j = this.m_localAnchor2.y - f.m_sweep.localCenter.y;
            d = c.col1.x * i + c.col2.x * j, j = c.col1.y * i + c.col2.y * j, i = d, this.m_u.x = f.m_sweep.c.x + i - e.m_sweep.c.x - g, this.m_u.y = f.m_sweep.c.y + j - e.m_sweep.c.y - h;
            var k = Math.sqrt(this.m_u.x * this.m_u.x + this.m_u.y * this.m_u.y);
            k > a.b2_linearSlop ? this.m_u.Multiply(1 / k) : this.m_u.SetZero();
            var l = g * this.m_u.y - h * this.m_u.x,
                m = i * this.m_u.y - j * this.m_u.x,
                n = e.m_invMass + e.m_invI * l * l + f.m_invMass + f.m_invI * m * m;
            if (this.m_mass = 0 != n ? 1 / n : 0, this.m_frequencyHz > 0) {
                var o = k - this.m_length,
                    p = 2 * Math.PI * this.m_frequencyHz,
                    q = 2 * this.m_mass * this.m_dampingRatio * p,
                    r = this.m_mass * p * p;
                this.m_gamma = b.dt * (q + b.dt * r), this.m_gamma = 0 != this.m_gamma ? 1 / this.m_gamma : 0, this.m_bias = o * b.dt * r * this.m_gamma, this.m_mass = n + this.m_gamma, this.m_mass = 0 != this.m_mass ? 1 / this.m_mass : 0
            }
            if (b.warmStarting) {
                this.m_impulse *= b.dtRatio;
                var s = this.m_impulse * this.m_u.x,
                    t = this.m_impulse * this.m_u.y;
                e.m_linearVelocity.x -= e.m_invMass * s, e.m_linearVelocity.y -= e.m_invMass * t, e.m_angularVelocity -= e.m_invI * (g * t - h * s), f.m_linearVelocity.x += f.m_invMass * s, f.m_linearVelocity.y += f.m_invMass * t, f.m_angularVelocity += f.m_invI * (i * t - j * s)
            } else this.m_impulse = 0
        }, g.prototype.SolveVelocityConstraints = function() {
            var a, b = this.m_bodyA,
                c = this.m_bodyB;
            a = b.m_xf.R;
            var d = this.m_localAnchor1.x - b.m_sweep.localCenter.x,
                e = this.m_localAnchor1.y - b.m_sweep.localCenter.y,
                f = a.col1.x * d + a.col2.x * e;
            e = a.col1.y * d + a.col2.y * e, d = f, a = c.m_xf.R;
            var g = this.m_localAnchor2.x - c.m_sweep.localCenter.x,
                h = this.m_localAnchor2.y - c.m_sweep.localCenter.y;
            f = a.col1.x * g + a.col2.x * h, h = a.col1.y * g + a.col2.y * h, g = f;
            var i = b.m_linearVelocity.x + -b.m_angularVelocity * e,
                j = b.m_linearVelocity.y + b.m_angularVelocity * d,
                k = c.m_linearVelocity.x + -c.m_angularVelocity * h,
                l = c.m_linearVelocity.y + c.m_angularVelocity * g,
                m = this.m_u.x * (k - i) + this.m_u.y * (l - j),
                n = -this.m_mass * (m + this.m_bias + this.m_gamma * this.m_impulse);
            this.m_impulse += n;
            var o = n * this.m_u.x,
                p = n * this.m_u.y;
            b.m_linearVelocity.x -= b.m_invMass * o, b.m_linearVelocity.y -= b.m_invMass * p, b.m_angularVelocity -= b.m_invI * (d * p - e * o), c.m_linearVelocity.x += c.m_invMass * o, c.m_linearVelocity.y += c.m_invMass * p, c.m_angularVelocity += c.m_invI * (g * p - h * o)
        }, g.prototype.SolvePositionConstraints = function(b) {
            void 0 === b && (b = 0);
            var c;
            if (this.m_frequencyHz > 0) return !0;
            var e = this.m_bodyA,
                f = this.m_bodyB;
            c = e.m_xf.R;
            var g = this.m_localAnchor1.x - e.m_sweep.localCenter.x,
                h = this.m_localAnchor1.y - e.m_sweep.localCenter.y,
                i = c.col1.x * g + c.col2.x * h;
            h = c.col1.y * g + c.col2.y * h, g = i, c = f.m_xf.R;
            var j = this.m_localAnchor2.x - f.m_sweep.localCenter.x,
                k = this.m_localAnchor2.y - f.m_sweep.localCenter.y;
            i = c.col1.x * j + c.col2.x * k, k = c.col1.y * j + c.col2.y * k, j = i;
            var l = f.m_sweep.c.x + j - e.m_sweep.c.x - g,
                m = f.m_sweep.c.y + k - e.m_sweep.c.y - h,
                n = Math.sqrt(l * l + m * m);
            l /= n, m /= n;
            var o = n - this.m_length;
            o = d.Clamp(o, -a.b2_maxLinearCorrection, a.b2_maxLinearCorrection);
            var p = -this.m_mass * o;
            this.m_u.Set(l, m);
            var q = p * this.m_u.x,
                r = p * this.m_u.y;
            return e.m_sweep.c.x -= e.m_invMass * q, e.m_sweep.c.y -= e.m_invMass * r, e.m_sweep.a -= e.m_invI * (g * r - h * q), f.m_sweep.c.x += f.m_invMass * q, f.m_sweep.c.y += f.m_invMass * r, f.m_sweep.a += f.m_invI * (j * r - k * q), e.SynchronizeTransform(), f.SynchronizeTransform(), d.Abs(o) < a.b2_linearSlop
        }, Box2D.inherit(h, Box2D.Dynamics.Joints.b2JointDef), h.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype, h.b2DistanceJointDef = function() {
            Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments), this.localAnchorA = new e, this.localAnchorB = new e
        }, h.prototype.b2DistanceJointDef = function() {
            this.__super.b2JointDef.call(this), this.type = n.e_distanceJoint, this.length = 1, this.frequencyHz = 0, this.dampingRatio = 0
        }, h.prototype.Initialize = function(a, b, c, d) {
            this.bodyA = a, this.bodyB = b, this.localAnchorA.SetV(this.bodyA.GetLocalPoint(c)), this.localAnchorB.SetV(this.bodyB.GetLocalPoint(d));
            var e = d.x - c.x,
                f = d.y - c.y;
            this.length = Math.sqrt(e * e + f * f), this.frequencyHz = 0, this.dampingRatio = 0
        }, Box2D.inherit(i, Box2D.Dynamics.Joints.b2Joint), i.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype, i.b2FrictionJoint = function() {
            Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments), this.m_localAnchorA = new e, this.m_localAnchorB = new e, this.m_linearMass = new b, this.m_linearImpulse = new e
        }, i.prototype.GetAnchorA = function() {
            return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)
        }, i.prototype.GetAnchorB = function() {
            return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)
        }, i.prototype.GetReactionForce = function(a) {
            return void 0 === a && (a = 0), new e(a * this.m_linearImpulse.x, a * this.m_linearImpulse.y)
        }, i.prototype.GetReactionTorque = function(a) {
            return void 0 === a && (a = 0), a * this.m_angularImpulse
        }, i.prototype.SetMaxForce = function(a) {
            void 0 === a && (a = 0), this.m_maxForce = a
        }, i.prototype.GetMaxForce = function() {
            return this.m_maxForce
        }, i.prototype.SetMaxTorque = function(a) {
            void 0 === a && (a = 0), this.m_maxTorque = a
        }, i.prototype.GetMaxTorque = function() {
            return this.m_maxTorque
        }, i.prototype.b2FrictionJoint = function(a) {
            this.__super.b2Joint.call(this, a), this.m_localAnchorA.SetV(a.localAnchorA), this.m_localAnchorB.SetV(a.localAnchorB), this.m_linearMass.SetZero(), this.m_angularMass = 0, this.m_linearImpulse.SetZero(), this.m_angularImpulse = 0, this.m_maxForce = a.maxForce, this.m_maxTorque = a.maxTorque
        }, i.prototype.InitVelocityConstraints = function(a) {
            var c, d = 0,
                e = this.m_bodyA,
                f = this.m_bodyB;
            c = e.m_xf.R;
            var g = this.m_localAnchorA.x - e.m_sweep.localCenter.x,
                h = this.m_localAnchorA.y - e.m_sweep.localCenter.y;
            d = c.col1.x * g + c.col2.x * h, h = c.col1.y * g + c.col2.y * h, g = d, c = f.m_xf.R;
            var i = this.m_localAnchorB.x - f.m_sweep.localCenter.x,
                j = this.m_localAnchorB.y - f.m_sweep.localCenter.y;
            d = c.col1.x * i + c.col2.x * j, j = c.col1.y * i + c.col2.y * j, i = d;
            var k = e.m_invMass,
                l = f.m_invMass,
                m = e.m_invI,
                n = f.m_invI,
                o = new b;
            if (o.col1.x = k + l, o.col2.x = 0, o.col1.y = 0, o.col2.y = k + l, o.col1.x += m * h * h, o.col2.x += -m * g * h, o.col1.y += -m * g * h, o.col2.y += m * g * g, o.col1.x += n * j * j, o.col2.x += -n * i * j, o.col1.y += -n * i * j, o.col2.y += n * i * i, o.GetInverse(this.m_linearMass), this.m_angularMass = m + n, this.m_angularMass > 0 && (this.m_angularMass = 1 / this.m_angularMass), a.warmStarting) {
                this.m_linearImpulse.x *= a.dtRatio, this.m_linearImpulse.y *= a.dtRatio, this.m_angularImpulse *= a.dtRatio;
                var p = this.m_linearImpulse;
                e.m_linearVelocity.x -= k * p.x, e.m_linearVelocity.y -= k * p.y, e.m_angularVelocity -= m * (g * p.y - h * p.x + this.m_angularImpulse), f.m_linearVelocity.x += l * p.x, f.m_linearVelocity.y += l * p.y, f.m_angularVelocity += n * (i * p.y - j * p.x + this.m_angularImpulse)
            } else this.m_linearImpulse.SetZero(), this.m_angularImpulse = 0
        }, i.prototype.SolveVelocityConstraints = function(a) {
            var b, c = 0,
                f = this.m_bodyA,
                g = this.m_bodyB,
                h = f.m_linearVelocity,
                i = f.m_angularVelocity,
                j = g.m_linearVelocity,
                k = g.m_angularVelocity,
                l = f.m_invMass,
                m = g.m_invMass,
                n = f.m_invI,
                o = g.m_invI;
            b = f.m_xf.R;
            var p = this.m_localAnchorA.x - f.m_sweep.localCenter.x,
                q = this.m_localAnchorA.y - f.m_sweep.localCenter.y;
            c = b.col1.x * p + b.col2.x * q, q = b.col1.y * p + b.col2.y * q, p = c, b = g.m_xf.R;
            var r = this.m_localAnchorB.x - g.m_sweep.localCenter.x,
                s = this.m_localAnchorB.y - g.m_sweep.localCenter.y;
            c = b.col1.x * r + b.col2.x * s, s = b.col1.y * r + b.col2.y * s, r = c;
            var t = 0,
                u = k - i,
                v = -this.m_angularMass * u,
                w = this.m_angularImpulse;
            t = a.dt * this.m_maxTorque, this.m_angularImpulse = d.Clamp(this.m_angularImpulse + v, -t, t), v = this.m_angularImpulse - w, i -= n * v, k += o * v;
            var x = j.x - k * s - h.x + i * q,
                y = j.y + k * r - h.y - i * p,
                z = d.MulMV(this.m_linearMass, new e(-x, -y)),
                A = this.m_linearImpulse.Copy();
            this.m_linearImpulse.Add(z), t = a.dt * this.m_maxForce, this.m_linearImpulse.LengthSquared() > t * t && (this.m_linearImpulse.Normalize(), this.m_linearImpulse.Multiply(t)), z = d.SubtractVV(this.m_linearImpulse, A), h.x -= l * z.x, h.y -= l * z.y, i -= n * (p * z.y - q * z.x), j.x += m * z.x, j.y += m * z.y, k += o * (r * z.y - s * z.x), f.m_angularVelocity = i, g.m_angularVelocity = k
        }, i.prototype.SolvePositionConstraints = function(a) {
            return void 0 === a && (a = 0), !0
        }, Box2D.inherit(j, Box2D.Dynamics.Joints.b2JointDef), j.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype, j.b2FrictionJointDef = function() {
            Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments), this.localAnchorA = new e, this.localAnchorB = new e
        }, j.prototype.b2FrictionJointDef = function() {
            this.__super.b2JointDef.call(this), this.type = n.e_frictionJoint, this.maxForce = 0, this.maxTorque = 0
        }, j.prototype.Initialize = function(a, b, c) {
            this.bodyA = a, this.bodyB = b, this.localAnchorA.SetV(this.bodyA.GetLocalPoint(c)), this.localAnchorB.SetV(this.bodyB.GetLocalPoint(c))
        }, Box2D.inherit(k, Box2D.Dynamics.Joints.b2Joint), k.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype, k.b2GearJoint = function() {
            Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments), this.m_groundAnchor1 = new e, this.m_groundAnchor2 = new e, this.m_localAnchor1 = new e, this.m_localAnchor2 = new e, this.m_J = new m
        }, k.prototype.GetAnchorA = function() {
            return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)
        }, k.prototype.GetAnchorB = function() {
            return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)
        }, k.prototype.GetReactionForce = function(a) {
            return void 0 === a && (a = 0), new e(a * this.m_impulse * this.m_J.linearB.x, a * this.m_impulse * this.m_J.linearB.y)
        }, k.prototype.GetReactionTorque = function(a) {
            void 0 === a && (a = 0);
            var b = this.m_bodyB.m_xf.R,
                c = this.m_localAnchor1.x - this.m_bodyB.m_sweep.localCenter.x,
                d = this.m_localAnchor1.y - this.m_bodyB.m_sweep.localCenter.y,
                e = b.col1.x * c + b.col2.x * d;
            d = b.col1.y * c + b.col2.y * d, c = e;
            var f = this.m_impulse * this.m_J.linearB.x,
                g = this.m_impulse * this.m_J.linearB.y;
            return a * (this.m_impulse * this.m_J.angularB - c * g + d * f)
        }, k.prototype.GetRatio = function() {
            return this.m_ratio
        }, k.prototype.SetRatio = function(a) {
            void 0 === a && (a = 0), this.m_ratio = a
        }, k.prototype.b2GearJoint = function(a) {
            this.__super.b2Joint.call(this, a);
            var b = parseInt(a.joint1.m_type),
                c = parseInt(a.joint2.m_type);
            this.m_revolute1 = null, this.m_prismatic1 = null, this.m_revolute2 = null, this.m_prismatic2 = null;
            var d = 0,
                e = 0;
            this.m_ground1 = a.joint1.GetBodyA(), this.m_bodyA = a.joint1.GetBodyB(), b == n.e_revoluteJoint ? (this.m_revolute1 = a.joint1 instanceof y ? a.joint1 : null, this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1), this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2), d = this.m_revolute1.GetJointAngle()) : (this.m_prismatic1 = a.joint1 instanceof u ? a.joint1 : null, this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1), this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2), d = this.m_prismatic1.GetJointTranslation()), this.m_ground2 = a.joint2.GetBodyA(), this.m_bodyB = a.joint2.GetBodyB(), c == n.e_revoluteJoint ? (this.m_revolute2 = a.joint2 instanceof y ? a.joint2 : null, this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1), this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2), e = this.m_revolute2.GetJointAngle()) : (this.m_prismatic2 = a.joint2 instanceof u ? a.joint2 : null, this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1), this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2), e = this.m_prismatic2.GetJointTranslation()), this.m_ratio = a.ratio, this.m_constant = d + this.m_ratio * e, this.m_impulse = 0
        }, k.prototype.InitVelocityConstraints = function(a) {
            var b, c, d = this.m_ground1,
                e = this.m_ground2,
                f = this.m_bodyA,
                g = this.m_bodyB,
                h = 0,
                i = 0,
                j = 0,
                k = 0,
                l = 0,
                m = 0,
                n = 0;
            this.m_J.SetZero(), this.m_revolute1 ? (this.m_J.angularA = -1, n += f.m_invI) : (b = d.m_xf.R, c = this.m_prismatic1.m_localXAxis1, h = b.col1.x * c.x + b.col2.x * c.y, i = b.col1.y * c.x + b.col2.y * c.y, b = f.m_xf.R, j = this.m_localAnchor1.x - f.m_sweep.localCenter.x, k = this.m_localAnchor1.y - f.m_sweep.localCenter.y, m = b.col1.x * j + b.col2.x * k, k = b.col1.y * j + b.col2.y * k, j = m, l = j * i - k * h, this.m_J.linearA.Set(-h, -i), this.m_J.angularA = -l, n += f.m_invMass + f.m_invI * l * l), this.m_revolute2 ? (this.m_J.angularB = -this.m_ratio, n += this.m_ratio * this.m_ratio * g.m_invI) : (b = e.m_xf.R, c = this.m_prismatic2.m_localXAxis1, h = b.col1.x * c.x + b.col2.x * c.y, i = b.col1.y * c.x + b.col2.y * c.y, b = g.m_xf.R, j = this.m_localAnchor2.x - g.m_sweep.localCenter.x, k = this.m_localAnchor2.y - g.m_sweep.localCenter.y, m = b.col1.x * j + b.col2.x * k, k = b.col1.y * j + b.col2.y * k, j = m, l = j * i - k * h, this.m_J.linearB.Set(-this.m_ratio * h, -this.m_ratio * i), this.m_J.angularB = -this.m_ratio * l, n += this.m_ratio * this.m_ratio * (g.m_invMass + g.m_invI * l * l)), this.m_mass = n > 0 ? 1 / n : 0, a.warmStarting ? (f.m_linearVelocity.x += f.m_invMass * this.m_impulse * this.m_J.linearA.x, f.m_linearVelocity.y += f.m_invMass * this.m_impulse * this.m_J.linearA.y, f.m_angularVelocity += f.m_invI * this.m_impulse * this.m_J.angularA, g.m_linearVelocity.x += g.m_invMass * this.m_impulse * this.m_J.linearB.x, g.m_linearVelocity.y += g.m_invMass * this.m_impulse * this.m_J.linearB.y, g.m_angularVelocity += g.m_invI * this.m_impulse * this.m_J.angularB) : this.m_impulse = 0
        }, k.prototype.SolveVelocityConstraints = function() {
            var a = this.m_bodyA,
                b = this.m_bodyB,
                c = this.m_J.Compute(a.m_linearVelocity, a.m_angularVelocity, b.m_linearVelocity, b.m_angularVelocity),
                d = -this.m_mass * c;
            this.m_impulse += d, a.m_linearVelocity.x += a.m_invMass * d * this.m_J.linearA.x, a.m_linearVelocity.y += a.m_invMass * d * this.m_J.linearA.y, a.m_angularVelocity += a.m_invI * d * this.m_J.angularA, b.m_linearVelocity.x += b.m_invMass * d * this.m_J.linearB.x, b.m_linearVelocity.y += b.m_invMass * d * this.m_J.linearB.y, b.m_angularVelocity += b.m_invI * d * this.m_J.angularB
        }, k.prototype.SolvePositionConstraints = function(b) {
            void 0 === b && (b = 0);
            var c = 0,
                d = this.m_bodyA,
                e = this.m_bodyB,
                f = 0,
                g = 0;
            f = this.m_revolute1 ? this.m_revolute1.GetJointAngle() : this.m_prismatic1.GetJointTranslation(), g = this.m_revolute2 ? this.m_revolute2.GetJointAngle() : this.m_prismatic2.GetJointTranslation();
            var h = this.m_constant - (f + this.m_ratio * g),
                i = -this.m_mass * h;
            return d.m_sweep.c.x += d.m_invMass * i * this.m_J.linearA.x, d.m_sweep.c.y += d.m_invMass * i * this.m_J.linearA.y, d.m_sweep.a += d.m_invI * i * this.m_J.angularA, e.m_sweep.c.x += e.m_invMass * i * this.m_J.linearB.x, e.m_sweep.c.y += e.m_invMass * i * this.m_J.linearB.y, e.m_sweep.a += e.m_invI * i * this.m_J.angularB, d.SynchronizeTransform(), e.SynchronizeTransform(), c < a.b2_linearSlop
        }, Box2D.inherit(l, Box2D.Dynamics.Joints.b2JointDef), l.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype, l.b2GearJointDef = function() {
            Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments)
        }, l.prototype.b2GearJointDef = function() {
            this.__super.b2JointDef.call(this), this.type = n.e_gearJoint, this.joint1 = null, this.joint2 = null, this.ratio = 1
        }, m.b2Jacobian = function() {
            this.linearA = new e, this.linearB = new e
        }, m.prototype.SetZero = function() {
            this.linearA.SetZero(), this.angularA = 0, this.linearB.SetZero(), this.angularB = 0
        }, m.prototype.Set = function(a, b, c, d) {
            void 0 === b && (b = 0), void 0 === d && (d = 0), this.linearA.SetV(a), this.angularA = b, this.linearB.SetV(c), this.angularB = d
        }, m.prototype.Compute = function(a, b, c, d) {
            return void 0 === b && (b = 0), void 0 === d && (d = 0), this.linearA.x * a.x + this.linearA.y * a.y + this.angularA * b + (this.linearB.x * c.x + this.linearB.y * c.y) + this.angularB * d
        }, n.b2Joint = function() {
            this.m_edgeA = new p, this.m_edgeB = new p, this.m_localCenterA = new e, this.m_localCenterB = new e
        }, n.prototype.GetType = function() {
            return this.m_type
        }, n.prototype.GetAnchorA = function() {
            return null
        }, n.prototype.GetAnchorB = function() {
            return null
        }, n.prototype.GetReactionForce = function(a) {
            return void 0 === a && (a = 0), null
        }, n.prototype.GetReactionTorque = function(a) {
            return void 0 === a && (a = 0), 0
        }, n.prototype.GetBodyA = function() {
            return this.m_bodyA
        }, n.prototype.GetBodyB = function() {
            return this.m_bodyB
        }, n.prototype.GetNext = function() {
            return this.m_next
        }, n.prototype.GetUserData = function() {
            return this.m_userData
        }, n.prototype.SetUserData = function(a) {
            this.m_userData = a
        }, n.prototype.IsActive = function() {
            return this.m_bodyA.IsActive() && this.m_bodyB.IsActive()
        }, n.Create = function(a) {
            var b = null;
            switch (a.type) {
                case n.e_distanceJoint:
                    b = new g(a instanceof h ? a : null);
                    break;
                case n.e_mouseJoint:
                    b = new s(a instanceof t ? a : null);
                    break;
                case n.e_prismaticJoint:
                    b = new u(a instanceof v ? a : null);
                    break;
                case n.e_revoluteJoint:
                    b = new y(a instanceof z ? a : null);
                    break;
                case n.e_pulleyJoint:
                    b = new w(a instanceof x ? a : null);
                    break;
                case n.e_gearJoint:
                    b = new k(a instanceof l ? a : null);
                    break;
                case n.e_lineJoint:
                    b = new q(a instanceof r ? a : null);
                    break;
                case n.e_weldJoint:
                    b = new A(a instanceof B ? a : null);
                    break;
                case n.e_frictionJoint:
                    b = new i(a instanceof j ? a : null)
            }
            return b
        }, n.Destroy = function() {}, n.prototype.b2Joint = function(b) {
            a.b2Assert(b.bodyA != b.bodyB), this.m_type = b.type, this.m_prev = null, this.m_next = null, this.m_bodyA = b.bodyA, this.m_bodyB = b.bodyB, this.m_collideConnected = b.collideConnected, this.m_islandFlag = !1, this.m_userData = b.userData
        }, n.prototype.InitVelocityConstraints = function() {}, n.prototype.SolveVelocityConstraints = function() {}, n.prototype.FinalizeVelocityConstraints = function() {}, n.prototype.SolvePositionConstraints = function(a) {
            return void 0 === a && (a = 0), !1
        }, Box2D.postDefs.push(function() {
            Box2D.Dynamics.Joints.b2Joint.e_unknownJoint = 0, Box2D.Dynamics.Joints.b2Joint.e_revoluteJoint = 1, Box2D.Dynamics.Joints.b2Joint.e_prismaticJoint = 2, Box2D.Dynamics.Joints.b2Joint.e_distanceJoint = 3, Box2D.Dynamics.Joints.b2Joint.e_pulleyJoint = 4, Box2D.Dynamics.Joints.b2Joint.e_mouseJoint = 5, Box2D.Dynamics.Joints.b2Joint.e_gearJoint = 6, Box2D.Dynamics.Joints.b2Joint.e_lineJoint = 7, Box2D.Dynamics.Joints.b2Joint.e_weldJoint = 8, Box2D.Dynamics.Joints.b2Joint.e_frictionJoint = 9, Box2D.Dynamics.Joints.b2Joint.e_inactiveLimit = 0, Box2D.Dynamics.Joints.b2Joint.e_atLowerLimit = 1, Box2D.Dynamics.Joints.b2Joint.e_atUpperLimit = 2, Box2D.Dynamics.Joints.b2Joint.e_equalLimits = 3
        }), o.b2JointDef = function() {}, o.prototype.b2JointDef = function() {
            this.type = n.e_unknownJoint, this.userData = null, this.bodyA = null, this.bodyB = null, this.collideConnected = !1
        }, p.b2JointEdge = function() {}, Box2D.inherit(q, Box2D.Dynamics.Joints.b2Joint), q.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype, q.b2LineJoint = function() {
            Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments), this.m_localAnchor1 = new e, this.m_localAnchor2 = new e, this.m_localXAxis1 = new e, this.m_localYAxis1 = new e, this.m_axis = new e, this.m_perp = new e, this.m_K = new b, this.m_impulse = new e
        }, q.prototype.GetAnchorA = function() {
            return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)
        }, q.prototype.GetAnchorB = function() {
            return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)
        }, q.prototype.GetReactionForce = function(a) {
            return void 0 === a && (a = 0), new e(a * (this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.x), a * (this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.y))
        }, q.prototype.GetReactionTorque = function(a) {
            return void 0 === a && (a = 0), a * this.m_impulse.y
        }, q.prototype.GetJointTranslation = function() {
            var a = this.m_bodyA,
                b = this.m_bodyB,
                c = a.GetWorldPoint(this.m_localAnchor1),
                d = b.GetWorldPoint(this.m_localAnchor2),
                e = d.x - c.x,
                f = d.y - c.y,
                g = a.GetWorldVector(this.m_localXAxis1),
                h = g.x * e + g.y * f;
            return h
        }, q.prototype.GetJointSpeed = function() {
            var a, b = this.m_bodyA,
                c = this.m_bodyB;
            a = b.m_xf.R;
            var d = this.m_localAnchor1.x - b.m_sweep.localCenter.x,
                e = this.m_localAnchor1.y - b.m_sweep.localCenter.y,
                f = a.col1.x * d + a.col2.x * e;
            e = a.col1.y * d + a.col2.y * e, d = f, a = c.m_xf.R;
            var g = this.m_localAnchor2.x - c.m_sweep.localCenter.x,
                h = this.m_localAnchor2.y - c.m_sweep.localCenter.y;
            f = a.col1.x * g + a.col2.x * h, h = a.col1.y * g + a.col2.y * h, g = f;
            var i = b.m_sweep.c.x + d,
                j = b.m_sweep.c.y + e,
                k = c.m_sweep.c.x + g,
                l = c.m_sweep.c.y + h,
                m = k - i,
                n = l - j,
                o = b.GetWorldVector(this.m_localXAxis1),
                p = b.m_linearVelocity,
                q = c.m_linearVelocity,
                r = b.m_angularVelocity,
                s = c.m_angularVelocity,
                t = m * -r * o.y + n * r * o.x + (o.x * (q.x + -s * h - p.x - -r * e) + o.y * (q.y + s * g - p.y - r * d));
            return t
        }, q.prototype.IsLimitEnabled = function() {
            return this.m_enableLimit
        }, q.prototype.EnableLimit = function(a) {
            this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_enableLimit = a
        }, q.prototype.GetLowerLimit = function() {
            return this.m_lowerTranslation
        }, q.prototype.GetUpperLimit = function() {
            return this.m_upperTranslation
        }, q.prototype.SetLimits = function(a, b) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_lowerTranslation = a, this.m_upperTranslation = b
        }, q.prototype.IsMotorEnabled = function() {
            return this.m_enableMotor
        }, q.prototype.EnableMotor = function(a) {
            this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_enableMotor = a
        }, q.prototype.SetMotorSpeed = function(a) {
            void 0 === a && (a = 0), this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_motorSpeed = a
        }, q.prototype.GetMotorSpeed = function() {
            return this.m_motorSpeed
        }, q.prototype.SetMaxMotorForce = function(a) {
            void 0 === a && (a = 0), this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_maxMotorForce = a
        }, q.prototype.GetMaxMotorForce = function() {
            return this.m_maxMotorForce
        }, q.prototype.GetMotorForce = function() {
            return this.m_motorImpulse
        }, q.prototype.b2LineJoint = function(a) {
            this.__super.b2Joint.call(this, a);
            this.m_localAnchor1.SetV(a.localAnchorA), this.m_localAnchor2.SetV(a.localAnchorB), this.m_localXAxis1.SetV(a.localAxisA), this.m_localYAxis1.x = -this.m_localXAxis1.y, this.m_localYAxis1.y = this.m_localXAxis1.x, this.m_impulse.SetZero(), this.m_motorMass = 0, this.m_motorImpulse = 0, this.m_lowerTranslation = a.lowerTranslation, this.m_upperTranslation = a.upperTranslation, this.m_maxMotorForce = a.maxMotorForce, this.m_motorSpeed = a.motorSpeed, this.m_enableLimit = a.enableLimit, this.m_enableMotor = a.enableMotor, this.m_limitState = n.e_inactiveLimit, this.m_axis.SetZero(), this.m_perp.SetZero()
        }, q.prototype.InitVelocityConstraints = function(b) {
            var c, e = this.m_bodyA,
                f = this.m_bodyB,
                g = 0;
            this.m_localCenterA.SetV(e.GetLocalCenter()), this.m_localCenterB.SetV(f.GetLocalCenter()); {
                var h = e.GetTransform();
                f.GetTransform()
            }
            c = e.m_xf.R;
            var i = this.m_localAnchor1.x - this.m_localCenterA.x,
                j = this.m_localAnchor1.y - this.m_localCenterA.y;
            g = c.col1.x * i + c.col2.x * j, j = c.col1.y * i + c.col2.y * j, i = g, c = f.m_xf.R;
            var k = this.m_localAnchor2.x - this.m_localCenterB.x,
                l = this.m_localAnchor2.y - this.m_localCenterB.y;
            g = c.col1.x * k + c.col2.x * l, l = c.col1.y * k + c.col2.y * l, k = g;
            var m = f.m_sweep.c.x + k - e.m_sweep.c.x - i,
                o = f.m_sweep.c.y + l - e.m_sweep.c.y - j;
            this.m_invMassA = e.m_invMass, this.m_invMassB = f.m_invMass,
                this.m_invIA = e.m_invI, this.m_invIB = f.m_invI, this.m_axis.SetV(d.MulMV(h.R, this.m_localXAxis1)), this.m_a1 = (m + i) * this.m_axis.y - (o + j) * this.m_axis.x, this.m_a2 = k * this.m_axis.y - l * this.m_axis.x, this.m_motorMass = this.m_invMassA + this.m_invMassB + this.m_invIA * this.m_a1 * this.m_a1 + this.m_invIB * this.m_a2 * this.m_a2, this.m_motorMass = this.m_motorMass > Box2D.MIN_VALUE ? 1 / this.m_motorMass : 0, this.m_perp.SetV(d.MulMV(h.R, this.m_localYAxis1)), this.m_s1 = (m + i) * this.m_perp.y - (o + j) * this.m_perp.x, this.m_s2 = k * this.m_perp.y - l * this.m_perp.x;
            var p = this.m_invMassA,
                q = this.m_invMassB,
                r = this.m_invIA,
                s = this.m_invIB;
            if (this.m_K.col1.x = p + q + r * this.m_s1 * this.m_s1 + s * this.m_s2 * this.m_s2, this.m_K.col1.y = r * this.m_s1 * this.m_a1 + s * this.m_s2 * this.m_a2, this.m_K.col2.x = this.m_K.col1.y, this.m_K.col2.y = p + q + r * this.m_a1 * this.m_a1 + s * this.m_a2 * this.m_a2, this.m_enableLimit) {
                var t = this.m_axis.x * m + this.m_axis.y * o;
                d.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2 * a.b2_linearSlop ? this.m_limitState = n.e_equalLimits : t <= this.m_lowerTranslation ? this.m_limitState != n.e_atLowerLimit && (this.m_limitState = n.e_atLowerLimit, this.m_impulse.y = 0) : t >= this.m_upperTranslation ? this.m_limitState != n.e_atUpperLimit && (this.m_limitState = n.e_atUpperLimit, this.m_impulse.y = 0) : (this.m_limitState = n.e_inactiveLimit, this.m_impulse.y = 0)
            } else this.m_limitState = n.e_inactiveLimit;
            if (0 == this.m_enableMotor && (this.m_motorImpulse = 0), b.warmStarting) {
                this.m_impulse.x *= b.dtRatio, this.m_impulse.y *= b.dtRatio, this.m_motorImpulse *= b.dtRatio;
                var u = this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.x,
                    v = this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.y,
                    w = this.m_impulse.x * this.m_s1 + (this.m_motorImpulse + this.m_impulse.y) * this.m_a1,
                    x = this.m_impulse.x * this.m_s2 + (this.m_motorImpulse + this.m_impulse.y) * this.m_a2;
                e.m_linearVelocity.x -= this.m_invMassA * u, e.m_linearVelocity.y -= this.m_invMassA * v, e.m_angularVelocity -= this.m_invIA * w, f.m_linearVelocity.x += this.m_invMassB * u, f.m_linearVelocity.y += this.m_invMassB * v, f.m_angularVelocity += this.m_invIB * x
            } else this.m_impulse.SetZero(), this.m_motorImpulse = 0
        }, q.prototype.SolveVelocityConstraints = function(a) {
            var b = this.m_bodyA,
                c = this.m_bodyB,
                f = b.m_linearVelocity,
                g = b.m_angularVelocity,
                h = c.m_linearVelocity,
                i = c.m_angularVelocity,
                j = 0,
                k = 0,
                l = 0,
                m = 0;
            if (this.m_enableMotor && this.m_limitState != n.e_equalLimits) {
                var o = this.m_axis.x * (h.x - f.x) + this.m_axis.y * (h.y - f.y) + this.m_a2 * i - this.m_a1 * g,
                    p = this.m_motorMass * (this.m_motorSpeed - o),
                    q = this.m_motorImpulse,
                    r = a.dt * this.m_maxMotorForce;
                this.m_motorImpulse = d.Clamp(this.m_motorImpulse + p, -r, r), p = this.m_motorImpulse - q, j = p * this.m_axis.x, k = p * this.m_axis.y, l = p * this.m_a1, m = p * this.m_a2, f.x -= this.m_invMassA * j, f.y -= this.m_invMassA * k, g -= this.m_invIA * l, h.x += this.m_invMassB * j, h.y += this.m_invMassB * k, i += this.m_invIB * m
            }
            var s = this.m_perp.x * (h.x - f.x) + this.m_perp.y * (h.y - f.y) + this.m_s2 * i - this.m_s1 * g;
            if (this.m_enableLimit && this.m_limitState != n.e_inactiveLimit) {
                var t = this.m_axis.x * (h.x - f.x) + this.m_axis.y * (h.y - f.y) + this.m_a2 * i - this.m_a1 * g,
                    u = this.m_impulse.Copy(),
                    v = this.m_K.Solve(new e, -s, -t);
                this.m_impulse.Add(v), this.m_limitState == n.e_atLowerLimit ? this.m_impulse.y = d.Max(this.m_impulse.y, 0) : this.m_limitState == n.e_atUpperLimit && (this.m_impulse.y = d.Min(this.m_impulse.y, 0));
                var w = -s - (this.m_impulse.y - u.y) * this.m_K.col2.x,
                    x = 0;
                x = 0 != this.m_K.col1.x ? w / this.m_K.col1.x + u.x : u.x, this.m_impulse.x = x, v.x = this.m_impulse.x - u.x, v.y = this.m_impulse.y - u.y, j = v.x * this.m_perp.x + v.y * this.m_axis.x, k = v.x * this.m_perp.y + v.y * this.m_axis.y, l = v.x * this.m_s1 + v.y * this.m_a1, m = v.x * this.m_s2 + v.y * this.m_a2, f.x -= this.m_invMassA * j, f.y -= this.m_invMassA * k, g -= this.m_invIA * l, h.x += this.m_invMassB * j, h.y += this.m_invMassB * k, i += this.m_invIB * m
            } else {
                var y = 0;
                y = 0 != this.m_K.col1.x ? -s / this.m_K.col1.x : 0, this.m_impulse.x += y, j = y * this.m_perp.x, k = y * this.m_perp.y, l = y * this.m_s1, m = y * this.m_s2, f.x -= this.m_invMassA * j, f.y -= this.m_invMassA * k, g -= this.m_invIA * l, h.x += this.m_invMassB * j, h.y += this.m_invMassB * k, i += this.m_invIB * m
            }
            b.m_linearVelocity.SetV(f), b.m_angularVelocity = g, c.m_linearVelocity.SetV(h), c.m_angularVelocity = i
        }, q.prototype.SolvePositionConstraints = function(c) {
            void 0 === c && (c = 0);
            var f, g = this.m_bodyA,
                h = this.m_bodyB,
                i = g.m_sweep.c,
                j = g.m_sweep.a,
                k = h.m_sweep.c,
                l = h.m_sweep.a,
                m = 0,
                n = 0,
                o = 0,
                p = 0,
                q = 0,
                r = 0,
                s = 0,
                t = !1,
                u = 0,
                v = b.FromAngle(j),
                w = b.FromAngle(l);
            f = v;
            var x = this.m_localAnchor1.x - this.m_localCenterA.x,
                y = this.m_localAnchor1.y - this.m_localCenterA.y;
            m = f.col1.x * x + f.col2.x * y, y = f.col1.y * x + f.col2.y * y, x = m, f = w;
            var z = this.m_localAnchor2.x - this.m_localCenterB.x,
                A = this.m_localAnchor2.y - this.m_localCenterB.y;
            m = f.col1.x * z + f.col2.x * A, A = f.col1.y * z + f.col2.y * A, z = m;
            var B = k.x + z - i.x - x,
                C = k.y + A - i.y - y;
            if (this.m_enableLimit) {
                this.m_axis = d.MulMV(v, this.m_localXAxis1), this.m_a1 = (B + x) * this.m_axis.y - (C + y) * this.m_axis.x, this.m_a2 = z * this.m_axis.y - A * this.m_axis.x;
                var D = this.m_axis.x * B + this.m_axis.y * C;
                d.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2 * a.b2_linearSlop ? (u = d.Clamp(D, -a.b2_maxLinearCorrection, a.b2_maxLinearCorrection), r = d.Abs(D), t = !0) : D <= this.m_lowerTranslation ? (u = d.Clamp(D - this.m_lowerTranslation + a.b2_linearSlop, -a.b2_maxLinearCorrection, 0), r = this.m_lowerTranslation - D, t = !0) : D >= this.m_upperTranslation && (u = d.Clamp(D - this.m_upperTranslation + a.b2_linearSlop, 0, a.b2_maxLinearCorrection), r = D - this.m_upperTranslation, t = !0)
            }
            this.m_perp = d.MulMV(v, this.m_localYAxis1), this.m_s1 = (B + x) * this.m_perp.y - (C + y) * this.m_perp.x, this.m_s2 = z * this.m_perp.y - A * this.m_perp.x;
            var E = new e,
                F = this.m_perp.x * B + this.m_perp.y * C;
            if (r = d.Max(r, d.Abs(F)), s = 0, t) n = this.m_invMassA, o = this.m_invMassB, p = this.m_invIA, q = this.m_invIB, this.m_K.col1.x = n + o + p * this.m_s1 * this.m_s1 + q * this.m_s2 * this.m_s2, this.m_K.col1.y = p * this.m_s1 * this.m_a1 + q * this.m_s2 * this.m_a2, this.m_K.col2.x = this.m_K.col1.y, this.m_K.col2.y = n + o + p * this.m_a1 * this.m_a1 + q * this.m_a2 * this.m_a2, this.m_K.Solve(E, -F, -u);
            else {
                n = this.m_invMassA, o = this.m_invMassB, p = this.m_invIA, q = this.m_invIB;
                var G = n + o + p * this.m_s1 * this.m_s1 + q * this.m_s2 * this.m_s2,
                    H = 0;
                H = 0 != G ? -F / G : 0, E.x = H, E.y = 0
            }
            var I = E.x * this.m_perp.x + E.y * this.m_axis.x,
                J = E.x * this.m_perp.y + E.y * this.m_axis.y,
                K = E.x * this.m_s1 + E.y * this.m_a1,
                L = E.x * this.m_s2 + E.y * this.m_a2;
            return i.x -= this.m_invMassA * I, i.y -= this.m_invMassA * J, j -= this.m_invIA * K, k.x += this.m_invMassB * I, k.y += this.m_invMassB * J, l += this.m_invIB * L, g.m_sweep.a = j, h.m_sweep.a = l, g.SynchronizeTransform(), h.SynchronizeTransform(), r <= a.b2_linearSlop && s <= a.b2_angularSlop
        }, Box2D.inherit(r, Box2D.Dynamics.Joints.b2JointDef), r.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype, r.b2LineJointDef = function() {
            Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments), this.localAnchorA = new e, this.localAnchorB = new e, this.localAxisA = new e
        }, r.prototype.b2LineJointDef = function() {
            this.__super.b2JointDef.call(this), this.type = n.e_lineJoint, this.localAxisA.Set(1, 0), this.enableLimit = !1, this.lowerTranslation = 0, this.upperTranslation = 0, this.enableMotor = !1, this.maxMotorForce = 0, this.motorSpeed = 0
        }, r.prototype.Initialize = function(a, b, c, d) {
            this.bodyA = a, this.bodyB = b, this.localAnchorA = this.bodyA.GetLocalPoint(c), this.localAnchorB = this.bodyB.GetLocalPoint(c), this.localAxisA = this.bodyA.GetLocalVector(d)
        }, Box2D.inherit(s, Box2D.Dynamics.Joints.b2Joint), s.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype, s.b2MouseJoint = function() {
            Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments), this.K = new b, this.K1 = new b, this.K2 = new b, this.m_localAnchor = new e, this.m_target = new e, this.m_impulse = new e, this.m_mass = new b, this.m_C = new e
        }, s.prototype.GetAnchorA = function() {
            return this.m_target
        }, s.prototype.GetAnchorB = function() {
            return this.m_bodyB.GetWorldPoint(this.m_localAnchor)
        }, s.prototype.GetReactionForce = function(a) {
            return void 0 === a && (a = 0), new e(a * this.m_impulse.x, a * this.m_impulse.y)
        }, s.prototype.GetReactionTorque = function(a) {
            return void 0 === a && (a = 0), 0
        }, s.prototype.GetTarget = function() {
            return this.m_target
        }, s.prototype.SetTarget = function(a) {
            0 == this.m_bodyB.IsAwake() && this.m_bodyB.SetAwake(!0), this.m_target = a
        }, s.prototype.GetMaxForce = function() {
            return this.m_maxForce
        }, s.prototype.SetMaxForce = function(a) {
            void 0 === a && (a = 0), this.m_maxForce = a
        }, s.prototype.GetFrequency = function() {
            return this.m_frequencyHz
        }, s.prototype.SetFrequency = function(a) {
            void 0 === a && (a = 0), this.m_frequencyHz = a
        }, s.prototype.GetDampingRatio = function() {
            return this.m_dampingRatio
        }, s.prototype.SetDampingRatio = function(a) {
            void 0 === a && (a = 0), this.m_dampingRatio = a
        }, s.prototype.b2MouseJoint = function(a) {
            this.__super.b2Joint.call(this, a), this.m_target.SetV(a.target);
            var b = this.m_target.x - this.m_bodyB.m_xf.position.x,
                c = this.m_target.y - this.m_bodyB.m_xf.position.y,
                d = this.m_bodyB.m_xf.R;
            this.m_localAnchor.x = b * d.col1.x + c * d.col1.y, this.m_localAnchor.y = b * d.col2.x + c * d.col2.y, this.m_maxForce = a.maxForce, this.m_impulse.SetZero(), this.m_frequencyHz = a.frequencyHz, this.m_dampingRatio = a.dampingRatio, this.m_beta = 0, this.m_gamma = 0
        }, s.prototype.InitVelocityConstraints = function(a) {
            var b = this.m_bodyB,
                c = b.GetMass(),
                d = 2 * Math.PI * this.m_frequencyHz,
                e = 2 * c * this.m_dampingRatio * d,
                f = c * d * d;
            this.m_gamma = a.dt * (e + a.dt * f), this.m_gamma = 0 != this.m_gamma ? 1 / this.m_gamma : 0, this.m_beta = a.dt * f * this.m_gamma;
            var g;
            g = b.m_xf.R;
            var h = this.m_localAnchor.x - b.m_sweep.localCenter.x,
                i = this.m_localAnchor.y - b.m_sweep.localCenter.y,
                j = g.col1.x * h + g.col2.x * i;
            i = g.col1.y * h + g.col2.y * i, h = j;
            var k = b.m_invMass,
                l = b.m_invI;
            this.K1.col1.x = k, this.K1.col2.x = 0, this.K1.col1.y = 0, this.K1.col2.y = k, this.K2.col1.x = l * i * i, this.K2.col2.x = -l * h * i, this.K2.col1.y = -l * h * i, this.K2.col2.y = l * h * h, this.K.SetM(this.K1), this.K.AddM(this.K2), this.K.col1.x += this.m_gamma, this.K.col2.y += this.m_gamma, this.K.GetInverse(this.m_mass), this.m_C.x = b.m_sweep.c.x + h - this.m_target.x, this.m_C.y = b.m_sweep.c.y + i - this.m_target.y, b.m_angularVelocity *= .98, this.m_impulse.x *= a.dtRatio, this.m_impulse.y *= a.dtRatio, b.m_linearVelocity.x += k * this.m_impulse.x, b.m_linearVelocity.y += k * this.m_impulse.y, b.m_angularVelocity += l * (h * this.m_impulse.y - i * this.m_impulse.x)
        }, s.prototype.SolveVelocityConstraints = function(a) {
            var b, c = this.m_bodyB,
                d = 0,
                e = 0;
            b = c.m_xf.R;
            var f = this.m_localAnchor.x - c.m_sweep.localCenter.x,
                g = this.m_localAnchor.y - c.m_sweep.localCenter.y;
            d = b.col1.x * f + b.col2.x * g, g = b.col1.y * f + b.col2.y * g, f = d;
            var h = c.m_linearVelocity.x + -c.m_angularVelocity * g,
                i = c.m_linearVelocity.y + c.m_angularVelocity * f;
            b = this.m_mass, d = h + this.m_beta * this.m_C.x + this.m_gamma * this.m_impulse.x, e = i + this.m_beta * this.m_C.y + this.m_gamma * this.m_impulse.y;
            var j = -(b.col1.x * d + b.col2.x * e),
                k = -(b.col1.y * d + b.col2.y * e),
                l = this.m_impulse.x,
                m = this.m_impulse.y;
            this.m_impulse.x += j, this.m_impulse.y += k;
            var n = a.dt * this.m_maxForce;
            this.m_impulse.LengthSquared() > n * n && this.m_impulse.Multiply(n / this.m_impulse.Length()), j = this.m_impulse.x - l, k = this.m_impulse.y - m, c.m_linearVelocity.x += c.m_invMass * j, c.m_linearVelocity.y += c.m_invMass * k, c.m_angularVelocity += c.m_invI * (f * k - g * j)
        }, s.prototype.SolvePositionConstraints = function(a) {
            return void 0 === a && (a = 0), !0
        }, Box2D.inherit(t, Box2D.Dynamics.Joints.b2JointDef), t.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype, t.b2MouseJointDef = function() {
            Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments), this.target = new e
        }, t.prototype.b2MouseJointDef = function() {
            this.__super.b2JointDef.call(this), this.type = n.e_mouseJoint, this.maxForce = 0, this.frequencyHz = 5, this.dampingRatio = .7
        }, Box2D.inherit(u, Box2D.Dynamics.Joints.b2Joint), u.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype, u.b2PrismaticJoint = function() {
            Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments), this.m_localAnchor1 = new e, this.m_localAnchor2 = new e, this.m_localXAxis1 = new e, this.m_localYAxis1 = new e, this.m_axis = new e, this.m_perp = new e, this.m_K = new c, this.m_impulse = new f
        }, u.prototype.GetAnchorA = function() {
            return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)
        }, u.prototype.GetAnchorB = function() {
            return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)
        }, u.prototype.GetReactionForce = function(a) {
            return void 0 === a && (a = 0), new e(a * (this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.x), a * (this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.y))
        }, u.prototype.GetReactionTorque = function(a) {
            return void 0 === a && (a = 0), a * this.m_impulse.y
        }, u.prototype.GetJointTranslation = function() {
            var a = this.m_bodyA,
                b = this.m_bodyB,
                c = a.GetWorldPoint(this.m_localAnchor1),
                d = b.GetWorldPoint(this.m_localAnchor2),
                e = d.x - c.x,
                f = d.y - c.y,
                g = a.GetWorldVector(this.m_localXAxis1),
                h = g.x * e + g.y * f;
            return h
        }, u.prototype.GetJointSpeed = function() {
            var a, b = this.m_bodyA,
                c = this.m_bodyB;
            a = b.m_xf.R;
            var d = this.m_localAnchor1.x - b.m_sweep.localCenter.x,
                e = this.m_localAnchor1.y - b.m_sweep.localCenter.y,
                f = a.col1.x * d + a.col2.x * e;
            e = a.col1.y * d + a.col2.y * e, d = f, a = c.m_xf.R;
            var g = this.m_localAnchor2.x - c.m_sweep.localCenter.x,
                h = this.m_localAnchor2.y - c.m_sweep.localCenter.y;
            f = a.col1.x * g + a.col2.x * h, h = a.col1.y * g + a.col2.y * h, g = f;
            var i = b.m_sweep.c.x + d,
                j = b.m_sweep.c.y + e,
                k = c.m_sweep.c.x + g,
                l = c.m_sweep.c.y + h,
                m = k - i,
                n = l - j,
                o = b.GetWorldVector(this.m_localXAxis1),
                p = b.m_linearVelocity,
                q = c.m_linearVelocity,
                r = b.m_angularVelocity,
                s = c.m_angularVelocity,
                t = m * -r * o.y + n * r * o.x + (o.x * (q.x + -s * h - p.x - -r * e) + o.y * (q.y + s * g - p.y - r * d));
            return t
        }, u.prototype.IsLimitEnabled = function() {
            return this.m_enableLimit
        }, u.prototype.EnableLimit = function(a) {
            this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_enableLimit = a
        }, u.prototype.GetLowerLimit = function() {
            return this.m_lowerTranslation
        }, u.prototype.GetUpperLimit = function() {
            return this.m_upperTranslation
        }, u.prototype.SetLimits = function(a, b) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_lowerTranslation = a, this.m_upperTranslation = b
        }, u.prototype.IsMotorEnabled = function() {
            return this.m_enableMotor
        }, u.prototype.EnableMotor = function(a) {
            this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_enableMotor = a
        }, u.prototype.SetMotorSpeed = function(a) {
            void 0 === a && (a = 0), this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_motorSpeed = a
        }, u.prototype.GetMotorSpeed = function() {
            return this.m_motorSpeed
        }, u.prototype.SetMaxMotorForce = function(a) {
            void 0 === a && (a = 0), this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_maxMotorForce = a
        }, u.prototype.GetMotorForce = function() {
            return this.m_motorImpulse
        }, u.prototype.b2PrismaticJoint = function(a) {
            this.__super.b2Joint.call(this, a);
            this.m_localAnchor1.SetV(a.localAnchorA), this.m_localAnchor2.SetV(a.localAnchorB), this.m_localXAxis1.SetV(a.localAxisA), this.m_localYAxis1.x = -this.m_localXAxis1.y, this.m_localYAxis1.y = this.m_localXAxis1.x, this.m_refAngle = a.referenceAngle, this.m_impulse.SetZero(), this.m_motorMass = 0, this.m_motorImpulse = 0, this.m_lowerTranslation = a.lowerTranslation, this.m_upperTranslation = a.upperTranslation, this.m_maxMotorForce = a.maxMotorForce, this.m_motorSpeed = a.motorSpeed, this.m_enableLimit = a.enableLimit, this.m_enableMotor = a.enableMotor, this.m_limitState = n.e_inactiveLimit, this.m_axis.SetZero(), this.m_perp.SetZero()
        }, u.prototype.InitVelocityConstraints = function(b) {
            var c, e = this.m_bodyA,
                f = this.m_bodyB,
                g = 0;
            this.m_localCenterA.SetV(e.GetLocalCenter()), this.m_localCenterB.SetV(f.GetLocalCenter()); {
                var h = e.GetTransform();
                f.GetTransform()
            }
            c = e.m_xf.R;
            var i = this.m_localAnchor1.x - this.m_localCenterA.x,
                j = this.m_localAnchor1.y - this.m_localCenterA.y;
            g = c.col1.x * i + c.col2.x * j, j = c.col1.y * i + c.col2.y * j, i = g, c = f.m_xf.R;
            var k = this.m_localAnchor2.x - this.m_localCenterB.x,
                l = this.m_localAnchor2.y - this.m_localCenterB.y;
            g = c.col1.x * k + c.col2.x * l, l = c.col1.y * k + c.col2.y * l, k = g;
            var m = f.m_sweep.c.x + k - e.m_sweep.c.x - i,
                o = f.m_sweep.c.y + l - e.m_sweep.c.y - j;
            this.m_invMassA = e.m_invMass, this.m_invMassB = f.m_invMass, this.m_invIA = e.m_invI, this.m_invIB = f.m_invI, this.m_axis.SetV(d.MulMV(h.R, this.m_localXAxis1)), this.m_a1 = (m + i) * this.m_axis.y - (o + j) * this.m_axis.x, this.m_a2 = k * this.m_axis.y - l * this.m_axis.x, this.m_motorMass = this.m_invMassA + this.m_invMassB + this.m_invIA * this.m_a1 * this.m_a1 + this.m_invIB * this.m_a2 * this.m_a2, this.m_motorMass > Box2D.MIN_VALUE && (this.m_motorMass = 1 / this.m_motorMass), this.m_perp.SetV(d.MulMV(h.R, this.m_localYAxis1)), this.m_s1 = (m + i) * this.m_perp.y - (o + j) * this.m_perp.x, this.m_s2 = k * this.m_perp.y - l * this.m_perp.x;
            var p = this.m_invMassA,
                q = this.m_invMassB,
                r = this.m_invIA,
                s = this.m_invIB;
            if (this.m_K.col1.x = p + q + r * this.m_s1 * this.m_s1 + s * this.m_s2 * this.m_s2, this.m_K.col1.y = r * this.m_s1 + s * this.m_s2, this.m_K.col1.z = r * this.m_s1 * this.m_a1 + s * this.m_s2 * this.m_a2, this.m_K.col2.x = this.m_K.col1.y, this.m_K.col2.y = r + s, this.m_K.col2.z = r * this.m_a1 + s * this.m_a2, this.m_K.col3.x = this.m_K.col1.z, this.m_K.col3.y = this.m_K.col2.z, this.m_K.col3.z = p + q + r * this.m_a1 * this.m_a1 + s * this.m_a2 * this.m_a2, this.m_enableLimit) {
                var t = this.m_axis.x * m + this.m_axis.y * o;
                d.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2 * a.b2_linearSlop ? this.m_limitState = n.e_equalLimits : t <= this.m_lowerTranslation ? this.m_limitState != n.e_atLowerLimit && (this.m_limitState = n.e_atLowerLimit, this.m_impulse.z = 0) : t >= this.m_upperTranslation ? this.m_limitState != n.e_atUpperLimit && (this.m_limitState = n.e_atUpperLimit, this.m_impulse.z = 0) : (this.m_limitState = n.e_inactiveLimit, this.m_impulse.z = 0)
            } else this.m_limitState = n.e_inactiveLimit;
            if (0 == this.m_enableMotor && (this.m_motorImpulse = 0), b.warmStarting) {
                this.m_impulse.x *= b.dtRatio, this.m_impulse.y *= b.dtRatio, this.m_motorImpulse *= b.dtRatio;
                var u = this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.x,
                    v = this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.y,
                    w = this.m_impulse.x * this.m_s1 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a1,
                    x = this.m_impulse.x * this.m_s2 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a2;
                e.m_linearVelocity.x -= this.m_invMassA * u, e.m_linearVelocity.y -= this.m_invMassA * v, e.m_angularVelocity -= this.m_invIA * w, f.m_linearVelocity.x += this.m_invMassB * u, f.m_linearVelocity.y += this.m_invMassB * v, f.m_angularVelocity += this.m_invIB * x
            } else this.m_impulse.SetZero(), this.m_motorImpulse = 0
        }, u.prototype.SolveVelocityConstraints = function(a) {
            var b = this.m_bodyA,
                c = this.m_bodyB,
                g = b.m_linearVelocity,
                h = b.m_angularVelocity,
                i = c.m_linearVelocity,
                j = c.m_angularVelocity,
                k = 0,
                l = 0,
                m = 0,
                o = 0;
            if (this.m_enableMotor && this.m_limitState != n.e_equalLimits) {
                var p = this.m_axis.x * (i.x - g.x) + this.m_axis.y * (i.y - g.y) + this.m_a2 * j - this.m_a1 * h,
                    q = this.m_motorMass * (this.m_motorSpeed - p),
                    r = this.m_motorImpulse,
                    s = a.dt * this.m_maxMotorForce;
                this.m_motorImpulse = d.Clamp(this.m_motorImpulse + q, -s, s), q = this.m_motorImpulse - r, k = q * this.m_axis.x, l = q * this.m_axis.y, m = q * this.m_a1, o = q * this.m_a2, g.x -= this.m_invMassA * k, g.y -= this.m_invMassA * l, h -= this.m_invIA * m, i.x += this.m_invMassB * k, i.y += this.m_invMassB * l, j += this.m_invIB * o
            }
            var t = this.m_perp.x * (i.x - g.x) + this.m_perp.y * (i.y - g.y) + this.m_s2 * j - this.m_s1 * h,
                u = j - h;
            if (this.m_enableLimit && this.m_limitState != n.e_inactiveLimit) {
                var v = this.m_axis.x * (i.x - g.x) + this.m_axis.y * (i.y - g.y) + this.m_a2 * j - this.m_a1 * h,
                    w = this.m_impulse.Copy(),
                    x = this.m_K.Solve33(new f, -t, -u, -v);
                this.m_impulse.Add(x), this.m_limitState == n.e_atLowerLimit ? this.m_impulse.z = d.Max(this.m_impulse.z, 0) : this.m_limitState == n.e_atUpperLimit && (this.m_impulse.z = d.Min(this.m_impulse.z, 0));
                var y = -t - (this.m_impulse.z - w.z) * this.m_K.col3.x,
                    z = -u - (this.m_impulse.z - w.z) * this.m_K.col3.y,
                    A = this.m_K.Solve22(new e, y, z);
                A.x += w.x, A.y += w.y, this.m_impulse.x = A.x, this.m_impulse.y = A.y, x.x = this.m_impulse.x - w.x, x.y = this.m_impulse.y - w.y, x.z = this.m_impulse.z - w.z, k = x.x * this.m_perp.x + x.z * this.m_axis.x, l = x.x * this.m_perp.y + x.z * this.m_axis.y, m = x.x * this.m_s1 + x.y + x.z * this.m_a1, o = x.x * this.m_s2 + x.y + x.z * this.m_a2, g.x -= this.m_invMassA * k, g.y -= this.m_invMassA * l, h -= this.m_invIA * m, i.x += this.m_invMassB * k, i.y += this.m_invMassB * l, j += this.m_invIB * o
            } else {
                var B = this.m_K.Solve22(new e, -t, -u);
                this.m_impulse.x += B.x, this.m_impulse.y += B.y, k = B.x * this.m_perp.x, l = B.x * this.m_perp.y, m = B.x * this.m_s1 + B.y, o = B.x * this.m_s2 + B.y, g.x -= this.m_invMassA * k, g.y -= this.m_invMassA * l, h -= this.m_invIA * m, i.x += this.m_invMassB * k, i.y += this.m_invMassB * l, j += this.m_invIB * o
            }
            b.m_linearVelocity.SetV(g), b.m_angularVelocity = h, c.m_linearVelocity.SetV(i), c.m_angularVelocity = j
        }, u.prototype.SolvePositionConstraints = function(c) {
            void 0 === c && (c = 0);
            var g, h = this.m_bodyA,
                i = this.m_bodyB,
                j = h.m_sweep.c,
                k = h.m_sweep.a,
                l = i.m_sweep.c,
                m = i.m_sweep.a,
                n = 0,
                o = 0,
                p = 0,
                q = 0,
                r = 0,
                s = 0,
                t = 0,
                u = !1,
                v = 0,
                w = b.FromAngle(k),
                x = b.FromAngle(m);
            g = w;
            var y = this.m_localAnchor1.x - this.m_localCenterA.x,
                z = this.m_localAnchor1.y - this.m_localCenterA.y;
            n = g.col1.x * y + g.col2.x * z, z = g.col1.y * y + g.col2.y * z, y = n, g = x;
            var A = this.m_localAnchor2.x - this.m_localCenterB.x,
                B = this.m_localAnchor2.y - this.m_localCenterB.y;
            n = g.col1.x * A + g.col2.x * B, B = g.col1.y * A + g.col2.y * B, A = n;
            var C = l.x + A - j.x - y,
                D = l.y + B - j.y - z;
            if (this.m_enableLimit) {
                this.m_axis = d.MulMV(w, this.m_localXAxis1), this.m_a1 = (C + y) * this.m_axis.y - (D + z) * this.m_axis.x, this.m_a2 = A * this.m_axis.y - B * this.m_axis.x;
                var E = this.m_axis.x * C + this.m_axis.y * D;
                d.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2 * a.b2_linearSlop ? (v = d.Clamp(E, -a.b2_maxLinearCorrection, a.b2_maxLinearCorrection), s = d.Abs(E), u = !0) : E <= this.m_lowerTranslation ? (v = d.Clamp(E - this.m_lowerTranslation + a.b2_linearSlop, -a.b2_maxLinearCorrection, 0), s = this.m_lowerTranslation - E, u = !0) : E >= this.m_upperTranslation && (v = d.Clamp(E - this.m_upperTranslation + a.b2_linearSlop, 0, a.b2_maxLinearCorrection), s = E - this.m_upperTranslation, u = !0)
            }
            this.m_perp = d.MulMV(w, this.m_localYAxis1), this.m_s1 = (C + y) * this.m_perp.y - (D + z) * this.m_perp.x, this.m_s2 = A * this.m_perp.y - B * this.m_perp.x;
            var F = new f,
                G = this.m_perp.x * C + this.m_perp.y * D,
                H = m - k - this.m_refAngle;
            if (s = d.Max(s, d.Abs(G)), t = d.Abs(H), u) o = this.m_invMassA, p = this.m_invMassB, q = this.m_invIA, r = this.m_invIB, this.m_K.col1.x = o + p + q * this.m_s1 * this.m_s1 + r * this.m_s2 * this.m_s2, this.m_K.col1.y = q * this.m_s1 + r * this.m_s2, this.m_K.col1.z = q * this.m_s1 * this.m_a1 + r * this.m_s2 * this.m_a2, this.m_K.col2.x = this.m_K.col1.y, this.m_K.col2.y = q + r, this.m_K.col2.z = q * this.m_a1 + r * this.m_a2, this.m_K.col3.x = this.m_K.col1.z, this.m_K.col3.y = this.m_K.col2.z, this.m_K.col3.z = o + p + q * this.m_a1 * this.m_a1 + r * this.m_a2 * this.m_a2, this.m_K.Solve33(F, -G, -H, -v);
            else {
                o = this.m_invMassA, p = this.m_invMassB, q = this.m_invIA, r = this.m_invIB;
                var I = o + p + q * this.m_s1 * this.m_s1 + r * this.m_s2 * this.m_s2,
                    J = q * this.m_s1 + r * this.m_s2,
                    K = q + r;
                this.m_K.col1.Set(I, J, 0), this.m_K.col2.Set(J, K, 0);
                var L = this.m_K.Solve22(new e, -G, -H);
                F.x = L.x, F.y = L.y, F.z = 0
            }
            var M = F.x * this.m_perp.x + F.z * this.m_axis.x,
                N = F.x * this.m_perp.y + F.z * this.m_axis.y,
                O = F.x * this.m_s1 + F.y + F.z * this.m_a1,
                P = F.x * this.m_s2 + F.y + F.z * this.m_a2;
            return j.x -= this.m_invMassA * M, j.y -= this.m_invMassA * N, k -= this.m_invIA * O, l.x += this.m_invMassB * M, l.y += this.m_invMassB * N, m += this.m_invIB * P, h.m_sweep.a = k, i.m_sweep.a = m, h.SynchronizeTransform(), i.SynchronizeTransform(), s <= a.b2_linearSlop && t <= a.b2_angularSlop
        }, Box2D.inherit(v, Box2D.Dynamics.Joints.b2JointDef), v.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype, v.b2PrismaticJointDef = function() {
            Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments), this.localAnchorA = new e, this.localAnchorB = new e, this.localAxisA = new e
        }, v.prototype.b2PrismaticJointDef = function() {
            this.__super.b2JointDef.call(this), this.type = n.e_prismaticJoint, this.localAxisA.Set(1, 0), this.referenceAngle = 0, this.enableLimit = !1, this.lowerTranslation = 0, this.upperTranslation = 0, this.enableMotor = !1, this.maxMotorForce = 0, this.motorSpeed = 0
        }, v.prototype.Initialize = function(a, b, c, d) {
            this.bodyA = a, this.bodyB = b, this.localAnchorA = this.bodyA.GetLocalPoint(c), this.localAnchorB = this.bodyB.GetLocalPoint(c), this.localAxisA = this.bodyA.GetLocalVector(d), this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle()
        }, Box2D.inherit(w, Box2D.Dynamics.Joints.b2Joint), w.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype, w.b2PulleyJoint = function() {
            Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments), this.m_groundAnchor1 = new e, this.m_groundAnchor2 = new e, this.m_localAnchor1 = new e, this.m_localAnchor2 = new e, this.m_u1 = new e, this.m_u2 = new e
        }, w.prototype.GetAnchorA = function() {
            return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)
        }, w.prototype.GetAnchorB = function() {
            return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)
        }, w.prototype.GetReactionForce = function(a) {
            return void 0 === a && (a = 0), new e(a * this.m_impulse * this.m_u2.x, a * this.m_impulse * this.m_u2.y)
        }, w.prototype.GetReactionTorque = function(a) {
            return void 0 === a && (a = 0), 0
        }, w.prototype.GetGroundAnchorA = function() {
            var a = this.m_ground.m_xf.position.Copy();
            return a.Add(this.m_groundAnchor1), a
        }, w.prototype.GetGroundAnchorB = function() {
            var a = this.m_ground.m_xf.position.Copy();
            return a.Add(this.m_groundAnchor2), a
        }, w.prototype.GetLength1 = function() {
            var a = this.m_bodyA.GetWorldPoint(this.m_localAnchor1),
                b = this.m_ground.m_xf.position.x + this.m_groundAnchor1.x,
                c = this.m_ground.m_xf.position.y + this.m_groundAnchor1.y,
                d = a.x - b,
                e = a.y - c;
            return Math.sqrt(d * d + e * e)
        }, w.prototype.GetLength2 = function() {
            var a = this.m_bodyB.GetWorldPoint(this.m_localAnchor2),
                b = this.m_ground.m_xf.position.x + this.m_groundAnchor2.x,
                c = this.m_ground.m_xf.position.y + this.m_groundAnchor2.y,
                d = a.x - b,
                e = a.y - c;
            return Math.sqrt(d * d + e * e)
        }, w.prototype.GetRatio = function() {
            return this.m_ratio
        }, w.prototype.b2PulleyJoint = function(a) {
            this.__super.b2Joint.call(this, a);
            this.m_ground = this.m_bodyA.m_world.m_groundBody, this.m_groundAnchor1.x = a.groundAnchorA.x - this.m_ground.m_xf.position.x, this.m_groundAnchor1.y = a.groundAnchorA.y - this.m_ground.m_xf.position.y, this.m_groundAnchor2.x = a.groundAnchorB.x - this.m_ground.m_xf.position.x, this.m_groundAnchor2.y = a.groundAnchorB.y - this.m_ground.m_xf.position.y, this.m_localAnchor1.SetV(a.localAnchorA), this.m_localAnchor2.SetV(a.localAnchorB), this.m_ratio = a.ratio, this.m_constant = a.lengthA + this.m_ratio * a.lengthB, this.m_maxLength1 = d.Min(a.maxLengthA, this.m_constant - this.m_ratio * w.b2_minPulleyLength), this.m_maxLength2 = d.Min(a.maxLengthB, (this.m_constant - w.b2_minPulleyLength) / this.m_ratio), this.m_impulse = 0, this.m_limitImpulse1 = 0, this.m_limitImpulse2 = 0
        }, w.prototype.InitVelocityConstraints = function(b) {
            var c, d = this.m_bodyA,
                e = this.m_bodyB;
            c = d.m_xf.R;
            var f = this.m_localAnchor1.x - d.m_sweep.localCenter.x,
                g = this.m_localAnchor1.y - d.m_sweep.localCenter.y,
                h = c.col1.x * f + c.col2.x * g;
            g = c.col1.y * f + c.col2.y * g, f = h, c = e.m_xf.R;
            var i = this.m_localAnchor2.x - e.m_sweep.localCenter.x,
                j = this.m_localAnchor2.y - e.m_sweep.localCenter.y;
            h = c.col1.x * i + c.col2.x * j, j = c.col1.y * i + c.col2.y * j, i = h;
            var k = d.m_sweep.c.x + f,
                l = d.m_sweep.c.y + g,
                m = e.m_sweep.c.x + i,
                o = e.m_sweep.c.y + j,
                p = this.m_ground.m_xf.position.x + this.m_groundAnchor1.x,
                q = this.m_ground.m_xf.position.y + this.m_groundAnchor1.y,
                r = this.m_ground.m_xf.position.x + this.m_groundAnchor2.x,
                s = this.m_ground.m_xf.position.y + this.m_groundAnchor2.y;
            this.m_u1.Set(k - p, l - q), this.m_u2.Set(m - r, o - s);
            var t = this.m_u1.Length(),
                u = this.m_u2.Length();
            t > a.b2_linearSlop ? this.m_u1.Multiply(1 / t) : this.m_u1.SetZero(), u > a.b2_linearSlop ? this.m_u2.Multiply(1 / u) : this.m_u2.SetZero();
            var v = this.m_constant - t - this.m_ratio * u;
            v > 0 ? (this.m_state = n.e_inactiveLimit, this.m_impulse = 0) : this.m_state = n.e_atUpperLimit, t < this.m_maxLength1 ? (this.m_limitState1 = n.e_inactiveLimit, this.m_limitImpulse1 = 0) : this.m_limitState1 = n.e_atUpperLimit, u < this.m_maxLength2 ? (this.m_limitState2 = n.e_inactiveLimit, this.m_limitImpulse2 = 0) : this.m_limitState2 = n.e_atUpperLimit;
            var w = f * this.m_u1.y - g * this.m_u1.x,
                x = i * this.m_u2.y - j * this.m_u2.x;
            if (this.m_limitMass1 = d.m_invMass + d.m_invI * w * w, this.m_limitMass2 = e.m_invMass + e.m_invI * x * x, this.m_pulleyMass = this.m_limitMass1 + this.m_ratio * this.m_ratio * this.m_limitMass2, this.m_limitMass1 = 1 / this.m_limitMass1, this.m_limitMass2 = 1 / this.m_limitMass2, this.m_pulleyMass = 1 / this.m_pulleyMass, b.warmStarting) {
                this.m_impulse *= b.dtRatio, this.m_limitImpulse1 *= b.dtRatio, this.m_limitImpulse2 *= b.dtRatio;
                var y = (-this.m_impulse - this.m_limitImpulse1) * this.m_u1.x,
                    z = (-this.m_impulse - this.m_limitImpulse1) * this.m_u1.y,
                    A = (-this.m_ratio * this.m_impulse - this.m_limitImpulse2) * this.m_u2.x,
                    B = (-this.m_ratio * this.m_impulse - this.m_limitImpulse2) * this.m_u2.y;
                d.m_linearVelocity.x += d.m_invMass * y, d.m_linearVelocity.y += d.m_invMass * z, d.m_angularVelocity += d.m_invI * (f * z - g * y), e.m_linearVelocity.x += e.m_invMass * A, e.m_linearVelocity.y += e.m_invMass * B, e.m_angularVelocity += e.m_invI * (i * B - j * A)
            } else this.m_impulse = 0, this.m_limitImpulse1 = 0, this.m_limitImpulse2 = 0
        }, w.prototype.SolveVelocityConstraints = function() {
            var a, b = this.m_bodyA,
                c = this.m_bodyB;
            a = b.m_xf.R;
            var e = this.m_localAnchor1.x - b.m_sweep.localCenter.x,
                f = this.m_localAnchor1.y - b.m_sweep.localCenter.y,
                g = a.col1.x * e + a.col2.x * f;
            f = a.col1.y * e + a.col2.y * f, e = g, a = c.m_xf.R;
            var h = this.m_localAnchor2.x - c.m_sweep.localCenter.x,
                i = this.m_localAnchor2.y - c.m_sweep.localCenter.y;
            g = a.col1.x * h + a.col2.x * i, i = a.col1.y * h + a.col2.y * i, h = g;
            var j = 0,
                k = 0,
                l = 0,
                m = 0,
                o = 0,
                p = 0,
                q = 0,
                r = 0,
                s = 0,
                t = 0,
                u = 0;
            this.m_state == n.e_atUpperLimit && (j = b.m_linearVelocity.x + -b.m_angularVelocity * f, k = b.m_linearVelocity.y + b.m_angularVelocity * e, l = c.m_linearVelocity.x + -c.m_angularVelocity * i, m = c.m_linearVelocity.y + c.m_angularVelocity * h, s = -(this.m_u1.x * j + this.m_u1.y * k) - this.m_ratio * (this.m_u2.x * l + this.m_u2.y * m), t = this.m_pulleyMass * -s, u = this.m_impulse, this.m_impulse = d.Max(0, this.m_impulse + t), t = this.m_impulse - u, o = -t * this.m_u1.x, p = -t * this.m_u1.y, q = -this.m_ratio * t * this.m_u2.x, r = -this.m_ratio * t * this.m_u2.y, b.m_linearVelocity.x += b.m_invMass * o, b.m_linearVelocity.y += b.m_invMass * p, b.m_angularVelocity += b.m_invI * (e * p - f * o), c.m_linearVelocity.x += c.m_invMass * q, c.m_linearVelocity.y += c.m_invMass * r, c.m_angularVelocity += c.m_invI * (h * r - i * q)), this.m_limitState1 == n.e_atUpperLimit && (j = b.m_linearVelocity.x + -b.m_angularVelocity * f, k = b.m_linearVelocity.y + b.m_angularVelocity * e, s = -(this.m_u1.x * j + this.m_u1.y * k), t = -this.m_limitMass1 * s, u = this.m_limitImpulse1, this.m_limitImpulse1 = d.Max(0, this.m_limitImpulse1 + t), t = this.m_limitImpulse1 - u, o = -t * this.m_u1.x, p = -t * this.m_u1.y, b.m_linearVelocity.x += b.m_invMass * o, b.m_linearVelocity.y += b.m_invMass * p, b.m_angularVelocity += b.m_invI * (e * p - f * o)), this.m_limitState2 == n.e_atUpperLimit && (l = c.m_linearVelocity.x + -c.m_angularVelocity * i, m = c.m_linearVelocity.y + c.m_angularVelocity * h, s = -(this.m_u2.x * l + this.m_u2.y * m), t = -this.m_limitMass2 * s, u = this.m_limitImpulse2, this.m_limitImpulse2 = d.Max(0, this.m_limitImpulse2 + t), t = this.m_limitImpulse2 - u, q = -t * this.m_u2.x, r = -t * this.m_u2.y, c.m_linearVelocity.x += c.m_invMass * q, c.m_linearVelocity.y += c.m_invMass * r, c.m_angularVelocity += c.m_invI * (h * r - i * q))
        }, w.prototype.SolvePositionConstraints = function(b) {
            void 0 === b && (b = 0);
            var c, e = this.m_bodyA,
                f = this.m_bodyB,
                g = this.m_ground.m_xf.position.x + this.m_groundAnchor1.x,
                h = this.m_ground.m_xf.position.y + this.m_groundAnchor1.y,
                i = this.m_ground.m_xf.position.x + this.m_groundAnchor2.x,
                j = this.m_ground.m_xf.position.y + this.m_groundAnchor2.y,
                k = 0,
                l = 0,
                m = 0,
                o = 0,
                p = 0,
                q = 0,
                r = 0,
                s = 0,
                t = 0,
                u = 0,
                v = 0,
                w = 0,
                x = 0,
                y = 0;
            return this.m_state == n.e_atUpperLimit && (c = e.m_xf.R, k = this.m_localAnchor1.x - e.m_sweep.localCenter.x, l = this.m_localAnchor1.y - e.m_sweep.localCenter.y, x = c.col1.x * k + c.col2.x * l, l = c.col1.y * k + c.col2.y * l, k = x, c = f.m_xf.R, m = this.m_localAnchor2.x - f.m_sweep.localCenter.x, o = this.m_localAnchor2.y - f.m_sweep.localCenter.y, x = c.col1.x * m + c.col2.x * o, o = c.col1.y * m + c.col2.y * o, m = x, p = e.m_sweep.c.x + k, q = e.m_sweep.c.y + l, r = f.m_sweep.c.x + m, s = f.m_sweep.c.y + o, this.m_u1.Set(p - g, q - h), this.m_u2.Set(r - i, s - j), t = this.m_u1.Length(), u = this.m_u2.Length(), t > a.b2_linearSlop ? this.m_u1.Multiply(1 / t) : this.m_u1.SetZero(), u > a.b2_linearSlop ? this.m_u2.Multiply(1 / u) : this.m_u2.SetZero(), v = this.m_constant - t - this.m_ratio * u, y = d.Max(y, -v), v = d.Clamp(v + a.b2_linearSlop, -a.b2_maxLinearCorrection, 0), w = -this.m_pulleyMass * v, p = -w * this.m_u1.x, q = -w * this.m_u1.y, r = -this.m_ratio * w * this.m_u2.x, s = -this.m_ratio * w * this.m_u2.y, e.m_sweep.c.x += e.m_invMass * p, e.m_sweep.c.y += e.m_invMass * q, e.m_sweep.a += e.m_invI * (k * q - l * p), f.m_sweep.c.x += f.m_invMass * r, f.m_sweep.c.y += f.m_invMass * s, f.m_sweep.a += f.m_invI * (m * s - o * r), e.SynchronizeTransform(), f.SynchronizeTransform()), this.m_limitState1 == n.e_atUpperLimit && (c = e.m_xf.R, k = this.m_localAnchor1.x - e.m_sweep.localCenter.x, l = this.m_localAnchor1.y - e.m_sweep.localCenter.y, x = c.col1.x * k + c.col2.x * l, l = c.col1.y * k + c.col2.y * l, k = x, p = e.m_sweep.c.x + k, q = e.m_sweep.c.y + l, this.m_u1.Set(p - g, q - h), t = this.m_u1.Length(), t > a.b2_linearSlop ? (this.m_u1.x *= 1 / t, this.m_u1.y *= 1 / t) : this.m_u1.SetZero(), v = this.m_maxLength1 - t, y = d.Max(y, -v), v = d.Clamp(v + a.b2_linearSlop, -a.b2_maxLinearCorrection, 0), w = -this.m_limitMass1 * v, p = -w * this.m_u1.x, q = -w * this.m_u1.y, e.m_sweep.c.x += e.m_invMass * p, e.m_sweep.c.y += e.m_invMass * q, e.m_sweep.a += e.m_invI * (k * q - l * p), e.SynchronizeTransform()), this.m_limitState2 == n.e_atUpperLimit && (c = f.m_xf.R, m = this.m_localAnchor2.x - f.m_sweep.localCenter.x, o = this.m_localAnchor2.y - f.m_sweep.localCenter.y, x = c.col1.x * m + c.col2.x * o, o = c.col1.y * m + c.col2.y * o, m = x, r = f.m_sweep.c.x + m, s = f.m_sweep.c.y + o, this.m_u2.Set(r - i, s - j),
                u = this.m_u2.Length(), u > a.b2_linearSlop ? (this.m_u2.x *= 1 / u, this.m_u2.y *= 1 / u) : this.m_u2.SetZero(), v = this.m_maxLength2 - u, y = d.Max(y, -v), v = d.Clamp(v + a.b2_linearSlop, -a.b2_maxLinearCorrection, 0), w = -this.m_limitMass2 * v, r = -w * this.m_u2.x, s = -w * this.m_u2.y, f.m_sweep.c.x += f.m_invMass * r, f.m_sweep.c.y += f.m_invMass * s, f.m_sweep.a += f.m_invI * (m * s - o * r), f.SynchronizeTransform()), y < a.b2_linearSlop
        }, Box2D.postDefs.push(function() {
            Box2D.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength = 2
        }), Box2D.inherit(x, Box2D.Dynamics.Joints.b2JointDef), x.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype, x.b2PulleyJointDef = function() {
            Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments), this.groundAnchorA = new e, this.groundAnchorB = new e, this.localAnchorA = new e, this.localAnchorB = new e
        }, x.prototype.b2PulleyJointDef = function() {
            this.__super.b2JointDef.call(this), this.type = n.e_pulleyJoint, this.groundAnchorA.Set(-1, 1), this.groundAnchorB.Set(1, 1), this.localAnchorA.Set(-1, 0), this.localAnchorB.Set(1, 0), this.lengthA = 0, this.maxLengthA = 0, this.lengthB = 0, this.maxLengthB = 0, this.ratio = 1, this.collideConnected = !0
        }, x.prototype.Initialize = function(a, b, c, d, e, f, g) {
            void 0 === g && (g = 0), this.bodyA = a, this.bodyB = b, this.groundAnchorA.SetV(c), this.groundAnchorB.SetV(d), this.localAnchorA = this.bodyA.GetLocalPoint(e), this.localAnchorB = this.bodyB.GetLocalPoint(f);
            var h = e.x - c.x,
                i = e.y - c.y;
            this.lengthA = Math.sqrt(h * h + i * i);
            var j = f.x - d.x,
                k = f.y - d.y;
            this.lengthB = Math.sqrt(j * j + k * k), this.ratio = g;
            var l = this.lengthA + this.ratio * this.lengthB;
            this.maxLengthA = l - this.ratio * w.b2_minPulleyLength, this.maxLengthB = (l - w.b2_minPulleyLength) / this.ratio
        }, Box2D.inherit(y, Box2D.Dynamics.Joints.b2Joint), y.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype, y.b2RevoluteJoint = function() {
            Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments), this.K = new b, this.K1 = new b, this.K2 = new b, this.K3 = new b, this.impulse3 = new f, this.impulse2 = new e, this.reduced = new e, this.m_localAnchor1 = new e, this.m_localAnchor2 = new e, this.m_impulse = new f, this.m_mass = new c
        }, y.prototype.GetAnchorA = function() {
            return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)
        }, y.prototype.GetAnchorB = function() {
            return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)
        }, y.prototype.GetReactionForce = function(a) {
            return void 0 === a && (a = 0), new e(a * this.m_impulse.x, a * this.m_impulse.y)
        }, y.prototype.GetReactionTorque = function(a) {
            return void 0 === a && (a = 0), a * this.m_impulse.z
        }, y.prototype.GetJointAngle = function() {
            return this.m_bodyB.m_sweep.a - this.m_bodyA.m_sweep.a - this.m_referenceAngle
        }, y.prototype.GetJointSpeed = function() {
            return this.m_bodyB.m_angularVelocity - this.m_bodyA.m_angularVelocity
        }, y.prototype.IsLimitEnabled = function() {
            return this.m_enableLimit
        }, y.prototype.EnableLimit = function(a) {
            this.m_enableLimit = a
        }, y.prototype.GetLowerLimit = function() {
            return this.m_lowerAngle
        }, y.prototype.GetUpperLimit = function() {
            return this.m_upperAngle
        }, y.prototype.SetLimits = function(a, b) {
            void 0 === a && (a = 0), void 0 === b && (b = 0), this.m_lowerAngle = a, this.m_upperAngle = b
        }, y.prototype.IsMotorEnabled = function() {
            return this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_enableMotor
        }, y.prototype.EnableMotor = function(a) {
            this.m_enableMotor = a
        }, y.prototype.SetMotorSpeed = function(a) {
            void 0 === a && (a = 0), this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_motorSpeed = a
        }, y.prototype.GetMotorSpeed = function() {
            return this.m_motorSpeed
        }, y.prototype.SetMaxMotorTorque = function(a) {
            void 0 === a && (a = 0), this.m_maxMotorTorque = a
        }, y.prototype.GetMotorTorque = function() {
            return this.m_maxMotorTorque
        }, y.prototype.b2RevoluteJoint = function(a) {
            this.__super.b2Joint.call(this, a), this.m_localAnchor1.SetV(a.localAnchorA), this.m_localAnchor2.SetV(a.localAnchorB), this.m_referenceAngle = a.referenceAngle, this.m_impulse.SetZero(), this.m_motorImpulse = 0, this.m_lowerAngle = a.lowerAngle, this.m_upperAngle = a.upperAngle, this.m_maxMotorTorque = a.maxMotorTorque, this.m_motorSpeed = a.motorSpeed, this.m_enableLimit = a.enableLimit, this.m_enableMotor = a.enableMotor, this.m_limitState = n.e_inactiveLimit
        }, y.prototype.InitVelocityConstraints = function(b) {
            var c, e = this.m_bodyA,
                f = this.m_bodyB,
                g = 0;
            this.m_enableMotor || this.m_enableLimit, c = e.m_xf.R;
            var h = this.m_localAnchor1.x - e.m_sweep.localCenter.x,
                i = this.m_localAnchor1.y - e.m_sweep.localCenter.y;
            g = c.col1.x * h + c.col2.x * i, i = c.col1.y * h + c.col2.y * i, h = g, c = f.m_xf.R;
            var j = this.m_localAnchor2.x - f.m_sweep.localCenter.x,
                k = this.m_localAnchor2.y - f.m_sweep.localCenter.y;
            g = c.col1.x * j + c.col2.x * k, k = c.col1.y * j + c.col2.y * k, j = g;
            var l = e.m_invMass,
                m = f.m_invMass,
                o = e.m_invI,
                p = f.m_invI;
            if (this.m_mass.col1.x = l + m + i * i * o + k * k * p, this.m_mass.col2.x = -i * h * o - k * j * p, this.m_mass.col3.x = -i * o - k * p, this.m_mass.col1.y = this.m_mass.col2.x, this.m_mass.col2.y = l + m + h * h * o + j * j * p, this.m_mass.col3.y = h * o + j * p, this.m_mass.col1.z = this.m_mass.col3.x, this.m_mass.col2.z = this.m_mass.col3.y, this.m_mass.col3.z = o + p, this.m_motorMass = 1 / (o + p), 0 == this.m_enableMotor && (this.m_motorImpulse = 0), this.m_enableLimit) {
                var q = f.m_sweep.a - e.m_sweep.a - this.m_referenceAngle;
                d.Abs(this.m_upperAngle - this.m_lowerAngle) < 2 * a.b2_angularSlop ? this.m_limitState = n.e_equalLimits : q <= this.m_lowerAngle ? (this.m_limitState != n.e_atLowerLimit && (this.m_impulse.z = 0), this.m_limitState = n.e_atLowerLimit) : q >= this.m_upperAngle ? (this.m_limitState != n.e_atUpperLimit && (this.m_impulse.z = 0), this.m_limitState = n.e_atUpperLimit) : (this.m_limitState = n.e_inactiveLimit, this.m_impulse.z = 0)
            } else this.m_limitState = n.e_inactiveLimit;
            if (b.warmStarting) {
                this.m_impulse.x *= b.dtRatio, this.m_impulse.y *= b.dtRatio, this.m_motorImpulse *= b.dtRatio;
                var r = this.m_impulse.x,
                    s = this.m_impulse.y;
                e.m_linearVelocity.x -= l * r, e.m_linearVelocity.y -= l * s, e.m_angularVelocity -= o * (h * s - i * r + this.m_motorImpulse + this.m_impulse.z), f.m_linearVelocity.x += m * r, f.m_linearVelocity.y += m * s, f.m_angularVelocity += p * (j * s - k * r + this.m_motorImpulse + this.m_impulse.z)
            } else this.m_impulse.SetZero(), this.m_motorImpulse = 0
        }, y.prototype.SolveVelocityConstraints = function(a) {
            var b, c = this.m_bodyA,
                e = this.m_bodyB,
                f = 0,
                g = 0,
                h = 0,
                i = 0,
                j = 0,
                k = 0,
                l = c.m_linearVelocity,
                m = c.m_angularVelocity,
                o = e.m_linearVelocity,
                p = e.m_angularVelocity,
                q = c.m_invMass,
                r = e.m_invMass,
                s = c.m_invI,
                t = e.m_invI;
            if (this.m_enableMotor && this.m_limitState != n.e_equalLimits) {
                var u = p - m - this.m_motorSpeed,
                    v = this.m_motorMass * -u,
                    w = this.m_motorImpulse,
                    x = a.dt * this.m_maxMotorTorque;
                this.m_motorImpulse = d.Clamp(this.m_motorImpulse + v, -x, x), v = this.m_motorImpulse - w, m -= s * v, p += t * v
            }
            if (this.m_enableLimit && this.m_limitState != n.e_inactiveLimit) {
                b = c.m_xf.R, h = this.m_localAnchor1.x - c.m_sweep.localCenter.x, i = this.m_localAnchor1.y - c.m_sweep.localCenter.y, f = b.col1.x * h + b.col2.x * i, i = b.col1.y * h + b.col2.y * i, h = f, b = e.m_xf.R, j = this.m_localAnchor2.x - e.m_sweep.localCenter.x, k = this.m_localAnchor2.y - e.m_sweep.localCenter.y, f = b.col1.x * j + b.col2.x * k, k = b.col1.y * j + b.col2.y * k, j = f;
                var y = o.x + -p * k - l.x - -m * i,
                    z = o.y + p * j - l.y - m * h,
                    A = p - m;
                this.m_mass.Solve33(this.impulse3, -y, -z, -A), this.m_limitState == n.e_equalLimits ? this.m_impulse.Add(this.impulse3) : this.m_limitState == n.e_atLowerLimit ? (g = this.m_impulse.z + this.impulse3.z, 0 > g && (this.m_mass.Solve22(this.reduced, -y, -z), this.impulse3.x = this.reduced.x, this.impulse3.y = this.reduced.y, this.impulse3.z = -this.m_impulse.z, this.m_impulse.x += this.reduced.x, this.m_impulse.y += this.reduced.y, this.m_impulse.z = 0)) : this.m_limitState == n.e_atUpperLimit && (g = this.m_impulse.z + this.impulse3.z, g > 0 && (this.m_mass.Solve22(this.reduced, -y, -z), this.impulse3.x = this.reduced.x, this.impulse3.y = this.reduced.y, this.impulse3.z = -this.m_impulse.z, this.m_impulse.x += this.reduced.x, this.m_impulse.y += this.reduced.y, this.m_impulse.z = 0)), l.x -= q * this.impulse3.x, l.y -= q * this.impulse3.y, m -= s * (h * this.impulse3.y - i * this.impulse3.x + this.impulse3.z), o.x += r * this.impulse3.x, o.y += r * this.impulse3.y, p += t * (j * this.impulse3.y - k * this.impulse3.x + this.impulse3.z)
            } else {
                b = c.m_xf.R, h = this.m_localAnchor1.x - c.m_sweep.localCenter.x, i = this.m_localAnchor1.y - c.m_sweep.localCenter.y, f = b.col1.x * h + b.col2.x * i, i = b.col1.y * h + b.col2.y * i, h = f, b = e.m_xf.R, j = this.m_localAnchor2.x - e.m_sweep.localCenter.x, k = this.m_localAnchor2.y - e.m_sweep.localCenter.y, f = b.col1.x * j + b.col2.x * k, k = b.col1.y * j + b.col2.y * k, j = f;
                var B = o.x + -p * k - l.x - -m * i,
                    C = o.y + p * j - l.y - m * h;
                this.m_mass.Solve22(this.impulse2, -B, -C), this.m_impulse.x += this.impulse2.x, this.m_impulse.y += this.impulse2.y, l.x -= q * this.impulse2.x, l.y -= q * this.impulse2.y, m -= s * (h * this.impulse2.y - i * this.impulse2.x), o.x += r * this.impulse2.x, o.y += r * this.impulse2.y, p += t * (j * this.impulse2.y - k * this.impulse2.x)
            }
            c.m_linearVelocity.SetV(l), c.m_angularVelocity = m, e.m_linearVelocity.SetV(o), e.m_angularVelocity = p
        }, y.prototype.SolvePositionConstraints = function(b) {
            void 0 === b && (b = 0);
            var c, e = 0,
                f = this.m_bodyA,
                g = this.m_bodyB,
                h = 0,
                i = 0,
                j = 0,
                k = 0,
                l = 0;
            if (this.m_enableLimit && this.m_limitState != n.e_inactiveLimit) {
                var m = g.m_sweep.a - f.m_sweep.a - this.m_referenceAngle,
                    o = 0;
                this.m_limitState == n.e_equalLimits ? (e = d.Clamp(m - this.m_lowerAngle, -a.b2_maxAngularCorrection, a.b2_maxAngularCorrection), o = -this.m_motorMass * e, h = d.Abs(e)) : this.m_limitState == n.e_atLowerLimit ? (e = m - this.m_lowerAngle, h = -e, e = d.Clamp(e + a.b2_angularSlop, -a.b2_maxAngularCorrection, 0), o = -this.m_motorMass * e) : this.m_limitState == n.e_atUpperLimit && (e = m - this.m_upperAngle, h = e, e = d.Clamp(e - a.b2_angularSlop, 0, a.b2_maxAngularCorrection), o = -this.m_motorMass * e), f.m_sweep.a -= f.m_invI * o, g.m_sweep.a += g.m_invI * o, f.SynchronizeTransform(), g.SynchronizeTransform()
            }
            c = f.m_xf.R;
            var p = this.m_localAnchor1.x - f.m_sweep.localCenter.x,
                q = this.m_localAnchor1.y - f.m_sweep.localCenter.y;
            j = c.col1.x * p + c.col2.x * q, q = c.col1.y * p + c.col2.y * q, p = j, c = g.m_xf.R;
            var r = this.m_localAnchor2.x - g.m_sweep.localCenter.x,
                s = this.m_localAnchor2.y - g.m_sweep.localCenter.y;
            j = c.col1.x * r + c.col2.x * s, s = c.col1.y * r + c.col2.y * s, r = j;
            var t = g.m_sweep.c.x + r - f.m_sweep.c.x - p,
                u = g.m_sweep.c.y + s - f.m_sweep.c.y - q,
                v = t * t + u * u,
                w = Math.sqrt(v);
            i = w;
            var x = f.m_invMass,
                z = g.m_invMass,
                A = f.m_invI,
                B = g.m_invI,
                C = 10 * a.b2_linearSlop;
            if (v > C * C) {
                var D = x + z,
                    E = 1 / D;
                k = E * -t, l = E * -u;
                var F = .5;
                f.m_sweep.c.x -= F * x * k, f.m_sweep.c.y -= F * x * l, g.m_sweep.c.x += F * z * k, g.m_sweep.c.y += F * z * l, t = g.m_sweep.c.x + r - f.m_sweep.c.x - p, u = g.m_sweep.c.y + s - f.m_sweep.c.y - q
            }
            return this.K1.col1.x = x + z, this.K1.col2.x = 0, this.K1.col1.y = 0, this.K1.col2.y = x + z, this.K2.col1.x = A * q * q, this.K2.col2.x = -A * p * q, this.K2.col1.y = -A * p * q, this.K2.col2.y = A * p * p, this.K3.col1.x = B * s * s, this.K3.col2.x = -B * r * s, this.K3.col1.y = -B * r * s, this.K3.col2.y = B * r * r, this.K.SetM(this.K1), this.K.AddM(this.K2), this.K.AddM(this.K3), this.K.Solve(y.tImpulse, -t, -u), k = y.tImpulse.x, l = y.tImpulse.y, f.m_sweep.c.x -= f.m_invMass * k, f.m_sweep.c.y -= f.m_invMass * l, f.m_sweep.a -= f.m_invI * (p * l - q * k), g.m_sweep.c.x += g.m_invMass * k, g.m_sweep.c.y += g.m_invMass * l, g.m_sweep.a += g.m_invI * (r * l - s * k), f.SynchronizeTransform(), g.SynchronizeTransform(), i <= a.b2_linearSlop && h <= a.b2_angularSlop
        }, Box2D.postDefs.push(function() {
            Box2D.Dynamics.Joints.b2RevoluteJoint.tImpulse = new e
        }), Box2D.inherit(z, Box2D.Dynamics.Joints.b2JointDef), z.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype, z.b2RevoluteJointDef = function() {
            Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments), this.localAnchorA = new e, this.localAnchorB = new e
        }, z.prototype.b2RevoluteJointDef = function() {
            this.__super.b2JointDef.call(this), this.type = n.e_revoluteJoint, this.localAnchorA.Set(0, 0), this.localAnchorB.Set(0, 0), this.referenceAngle = 0, this.lowerAngle = 0, this.upperAngle = 0, this.maxMotorTorque = 0, this.motorSpeed = 0, this.enableLimit = !1, this.enableMotor = !1
        }, z.prototype.Initialize = function(a, b, c) {
            this.bodyA = a, this.bodyB = b, this.localAnchorA = this.bodyA.GetLocalPoint(c), this.localAnchorB = this.bodyB.GetLocalPoint(c), this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle()
        }, Box2D.inherit(A, Box2D.Dynamics.Joints.b2Joint), A.prototype.__super = Box2D.Dynamics.Joints.b2Joint.prototype, A.b2WeldJoint = function() {
            Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this, arguments), this.m_localAnchorA = new e, this.m_localAnchorB = new e, this.m_impulse = new f, this.m_mass = new c
        }, A.prototype.GetAnchorA = function() {
            return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)
        }, A.prototype.GetAnchorB = function() {
            return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)
        }, A.prototype.GetReactionForce = function(a) {
            return void 0 === a && (a = 0), new e(a * this.m_impulse.x, a * this.m_impulse.y)
        }, A.prototype.GetReactionTorque = function(a) {
            return void 0 === a && (a = 0), a * this.m_impulse.z
        }, A.prototype.b2WeldJoint = function(a) {
            this.__super.b2Joint.call(this, a), this.m_localAnchorA.SetV(a.localAnchorA), this.m_localAnchorB.SetV(a.localAnchorB), this.m_referenceAngle = a.referenceAngle, this.m_impulse.SetZero(), this.m_mass = new c
        }, A.prototype.InitVelocityConstraints = function(a) {
            var b, c = 0,
                d = this.m_bodyA,
                e = this.m_bodyB;
            b = d.m_xf.R;
            var f = this.m_localAnchorA.x - d.m_sweep.localCenter.x,
                g = this.m_localAnchorA.y - d.m_sweep.localCenter.y;
            c = b.col1.x * f + b.col2.x * g, g = b.col1.y * f + b.col2.y * g, f = c, b = e.m_xf.R;
            var h = this.m_localAnchorB.x - e.m_sweep.localCenter.x,
                i = this.m_localAnchorB.y - e.m_sweep.localCenter.y;
            c = b.col1.x * h + b.col2.x * i, i = b.col1.y * h + b.col2.y * i, h = c;
            var j = d.m_invMass,
                k = e.m_invMass,
                l = d.m_invI,
                m = e.m_invI;
            this.m_mass.col1.x = j + k + g * g * l + i * i * m, this.m_mass.col2.x = -g * f * l - i * h * m, this.m_mass.col3.x = -g * l - i * m, this.m_mass.col1.y = this.m_mass.col2.x, this.m_mass.col2.y = j + k + f * f * l + h * h * m, this.m_mass.col3.y = f * l + h * m, this.m_mass.col1.z = this.m_mass.col3.x, this.m_mass.col2.z = this.m_mass.col3.y, this.m_mass.col3.z = l + m, a.warmStarting ? (this.m_impulse.x *= a.dtRatio, this.m_impulse.y *= a.dtRatio, this.m_impulse.z *= a.dtRatio, d.m_linearVelocity.x -= j * this.m_impulse.x, d.m_linearVelocity.y -= j * this.m_impulse.y, d.m_angularVelocity -= l * (f * this.m_impulse.y - g * this.m_impulse.x + this.m_impulse.z), e.m_linearVelocity.x += k * this.m_impulse.x, e.m_linearVelocity.y += k * this.m_impulse.y, e.m_angularVelocity += m * (h * this.m_impulse.y - i * this.m_impulse.x + this.m_impulse.z)) : this.m_impulse.SetZero()
        }, A.prototype.SolveVelocityConstraints = function() {
            var a, b = 0,
                c = this.m_bodyA,
                d = this.m_bodyB,
                e = c.m_linearVelocity,
                g = c.m_angularVelocity,
                h = d.m_linearVelocity,
                i = d.m_angularVelocity,
                j = c.m_invMass,
                k = d.m_invMass,
                l = c.m_invI,
                m = d.m_invI;
            a = c.m_xf.R;
            var n = this.m_localAnchorA.x - c.m_sweep.localCenter.x,
                o = this.m_localAnchorA.y - c.m_sweep.localCenter.y;
            b = a.col1.x * n + a.col2.x * o, o = a.col1.y * n + a.col2.y * o, n = b, a = d.m_xf.R;
            var p = this.m_localAnchorB.x - d.m_sweep.localCenter.x,
                q = this.m_localAnchorB.y - d.m_sweep.localCenter.y;
            b = a.col1.x * p + a.col2.x * q, q = a.col1.y * p + a.col2.y * q, p = b;
            var r = h.x - i * q - e.x + g * o,
                s = h.y + i * p - e.y - g * n,
                t = i - g,
                u = new f;
            this.m_mass.Solve33(u, -r, -s, -t), this.m_impulse.Add(u), e.x -= j * u.x, e.y -= j * u.y, g -= l * (n * u.y - o * u.x + u.z), h.x += k * u.x, h.y += k * u.y, i += m * (p * u.y - q * u.x + u.z), c.m_angularVelocity = g, d.m_angularVelocity = i
        }, A.prototype.SolvePositionConstraints = function(b) {
            void 0 === b && (b = 0);
            var c, e = 0,
                g = this.m_bodyA,
                h = this.m_bodyB;
            c = g.m_xf.R;
            var i = this.m_localAnchorA.x - g.m_sweep.localCenter.x,
                j = this.m_localAnchorA.y - g.m_sweep.localCenter.y;
            e = c.col1.x * i + c.col2.x * j, j = c.col1.y * i + c.col2.y * j, i = e, c = h.m_xf.R;
            var k = this.m_localAnchorB.x - h.m_sweep.localCenter.x,
                l = this.m_localAnchorB.y - h.m_sweep.localCenter.y;
            e = c.col1.x * k + c.col2.x * l, l = c.col1.y * k + c.col2.y * l, k = e;
            var m = g.m_invMass,
                n = h.m_invMass,
                o = g.m_invI,
                p = h.m_invI,
                q = h.m_sweep.c.x + k - g.m_sweep.c.x - i,
                r = h.m_sweep.c.y + l - g.m_sweep.c.y - j,
                s = h.m_sweep.a - g.m_sweep.a - this.m_referenceAngle,
                t = 10 * a.b2_linearSlop,
                u = Math.sqrt(q * q + r * r),
                v = d.Abs(s);
            u > t && (o *= 1, p *= 1), this.m_mass.col1.x = m + n + j * j * o + l * l * p, this.m_mass.col2.x = -j * i * o - l * k * p, this.m_mass.col3.x = -j * o - l * p, this.m_mass.col1.y = this.m_mass.col2.x, this.m_mass.col2.y = m + n + i * i * o + k * k * p, this.m_mass.col3.y = i * o + k * p, this.m_mass.col1.z = this.m_mass.col3.x, this.m_mass.col2.z = this.m_mass.col3.y, this.m_mass.col3.z = o + p;
            var w = new f;
            return this.m_mass.Solve33(w, -q, -r, -s), g.m_sweep.c.x -= m * w.x, g.m_sweep.c.y -= m * w.y, g.m_sweep.a -= o * (i * w.y - j * w.x + w.z), h.m_sweep.c.x += n * w.x, h.m_sweep.c.y += n * w.y, h.m_sweep.a += p * (k * w.y - l * w.x + w.z), g.SynchronizeTransform(), h.SynchronizeTransform(), u <= a.b2_linearSlop && v <= a.b2_angularSlop
        }, Box2D.inherit(B, Box2D.Dynamics.Joints.b2JointDef), B.prototype.__super = Box2D.Dynamics.Joints.b2JointDef.prototype, B.b2WeldJointDef = function() {
            Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this, arguments), this.localAnchorA = new e, this.localAnchorB = new e
        }, B.prototype.b2WeldJointDef = function() {
            this.__super.b2JointDef.call(this), this.type = n.e_weldJoint, this.referenceAngle = 0
        }, B.prototype.Initialize = function(a, b, c) {
            this.bodyA = a, this.bodyB = b, this.localAnchorA.SetV(this.bodyA.GetLocalPoint(c)), this.localAnchorB.SetV(this.bodyB.GetLocalPoint(c)), this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle()
        }
    }(),
    function() {
        var a = Box2D.Dynamics.b2DebugDraw;
        a.b2DebugDraw = function() {
            this.m_drawScale = 1, this.m_lineThickness = 1, this.m_alpha = 1, this.m_fillAlpha = 1, this.m_xformScale = 1;
            var a = this;
            this.m_sprite = {
                graphics: {
                    clear: function() {
                        a.m_ctx.clearRect(0, 0, a.m_ctx.canvas.width, a.m_ctx.canvas.height)
                    }
                }
            }
        }, a.prototype._color = function(a, b) {
            return "rgba(" + ((16711680 & a) >> 16) + "," + ((65280 & a) >> 8) + "," + (255 & a) + "," + b + ")"
        }, a.prototype.b2DebugDraw = function() {
            this.m_drawFlags = 0
        }, a.prototype.SetFlags = function(a) {
            void 0 === a && (a = 0), this.m_drawFlags = a
        }, a.prototype.GetFlags = function() {
            return this.m_drawFlags
        }, a.prototype.AppendFlags = function(a) {
            void 0 === a && (a = 0), this.m_drawFlags |= a
        }, a.prototype.ClearFlags = function(a) {
            void 0 === a && (a = 0), this.m_drawFlags &= ~a
        }, a.prototype.SetSprite = function(a) {
            this.m_ctx = a
        }, a.prototype.GetSprite = function() {
            return this.m_ctx
        }, a.prototype.SetDrawScale = function(a) {
            void 0 === a && (a = 0), this.m_drawScale = a
        }, a.prototype.GetDrawScale = function() {
            return this.m_drawScale
        }, a.prototype.SetLineThickness = function(a) {
            void 0 === a && (a = 0), this.m_lineThickness = a, this.m_ctx.strokeWidth = a
        }, a.prototype.GetLineThickness = function() {
            return this.m_lineThickness
        }, a.prototype.SetAlpha = function(a) {
            void 0 === a && (a = 0), this.m_alpha = a
        }, a.prototype.GetAlpha = function() {
            return this.m_alpha
        }, a.prototype.SetFillAlpha = function(a) {
            void 0 === a && (a = 0), this.m_fillAlpha = a
        }, a.prototype.GetFillAlpha = function() {
            return this.m_fillAlpha
        }, a.prototype.SetXFormScale = function(a) {
            void 0 === a && (a = 0), this.m_xformScale = a
        }, a.prototype.GetXFormScale = function() {
            return this.m_xformScale
        }, a.prototype.DrawPolygon = function(a, b, c) {
            if (b) {
                var d = this.m_ctx,
                    e = this.m_drawScale;
                d.beginPath(), d.strokeStyle = this._color(c.color, this.m_alpha), d.moveTo(a[0].x * e, a[0].y * e);
                for (var f = 1; b > f; f++) d.lineTo(a[f].x * e, a[f].y * e);
                d.lineTo(a[0].x * e, a[0].y * e), d.closePath(), d.stroke()
            }
        }, a.prototype.DrawSolidPolygon = function(a, b, c) {
            if (b) {
                var d = this.m_ctx,
                    e = this.m_drawScale;
                d.beginPath(), d.strokeStyle = this._color(c.color, this.m_alpha), d.fillStyle = this._color(c.color, this.m_fillAlpha), d.moveTo(a[0].x * e, a[0].y * e);
                for (var f = 1; b > f; f++) d.lineTo(a[f].x * e, a[f].y * e);
                d.lineTo(a[0].x * e, a[0].y * e), d.closePath(), d.fill(), d.stroke()
            }
        }, a.prototype.DrawCircle = function(a, b, c) {
            if (b) {
                var d = this.m_ctx,
                    e = this.m_drawScale;
                d.beginPath(), d.strokeStyle = this._color(c.color, this.m_alpha), d.arc(a.x * e, a.y * e, b * e, 0, 2 * Math.PI, !0), d.closePath(), d.stroke()
            }
        }, a.prototype.DrawSolidCircle = function(a, b, c, d) {
            if (b) {
                var e = this.m_ctx,
                    f = this.m_drawScale,
                    g = a.x * f,
                    h = a.y * f;
                e.moveTo(0, 0), e.beginPath(), e.strokeStyle = this._color(d.color, this.m_alpha), e.fillStyle = this._color(d.color, this.m_fillAlpha), e.arc(g, h, b * f, 0, 2 * Math.PI, !0), e.moveTo(g, h), e.lineTo((a.x + c.x * b) * f, (a.y + c.y * b) * f), e.closePath(), e.fill(), e.stroke()
            }
        }, a.prototype.DrawSegment = function(a, b, c) {
            var d = this.m_ctx,
                e = this.m_drawScale;
            d.strokeStyle = this._color(c.color, this.m_alpha), d.beginPath(), d.moveTo(a.x * e, a.y * e), d.lineTo(b.x * e, b.y * e), d.closePath(), d.stroke()
        }, a.prototype.DrawTransform = function(a) {
            var b = this.m_ctx,
                c = this.m_drawScale;
            b.beginPath(), b.strokeStyle = this._color(16711680, this.m_alpha), b.moveTo(a.position.x * c, a.position.y * c), b.lineTo((a.position.x + this.m_xformScale * a.R.col1.x) * c, (a.position.y + this.m_xformScale * a.R.col1.y) * c), b.strokeStyle = this._color(65280, this.m_alpha), b.moveTo(a.position.x * c, a.position.y * c), b.lineTo((a.position.x + this.m_xformScale * a.R.col2.x) * c, (a.position.y + this.m_xformScale * a.R.col2.y) * c), b.closePath(), b.stroke()
        }
    }();
var i;
for (i = 0; i < Box2D.postDefs.length; ++i) Box2D.postDefs[i]();
delete Box2D.postDefs, document.createElement("video"), document.createElement("audio"), document.createElement("track");
var vjs = function(a, b, c) {
        var d;
        if ("string" == typeof a) {
            if (0 === a.indexOf("#") && (a = a.slice(1)), vjs.players[a]) return b && vjs.log.warn('Player "' + a + '" is already initialised. Options will not be applied.'), c && vjs.players[a].ready(c), vjs.players[a];
            d = vjs.el(a)
        } else d = a;
        if (!d || !d.nodeName) throw new TypeError("The element or ID supplied is not valid. (videojs)");
        return d.player || new vjs.Player(d, b, c)
    },
    videojs = window.videojs = vjs;
vjs.CDN_VERSION = "4.12", vjs.ACCESS_PROTOCOL = "https:" == document.location.protocol ? "https://" : "http://", vjs.VERSION = "4.12.7", vjs.options = {
    techOrder: ["html5", "flash"],
    html5: {},
    flash: {},
    width: 300,
    height: 150,
    defaultVolume: 0,
    playbackRates: [],
    inactivityTimeout: 2e3,
    children: {
        mediaLoader: {},
        posterImage: {},
        loadingSpinner: {},
        textTrackDisplay: {},
        bigPlayButton: {},
        controlBar: {},
        errorDisplay: {},
        textTrackSettings: {}
    },
    language: document.getElementsByTagName("html")[0].getAttribute("lang") || navigator.languages && navigator.languages[0] || navigator.userLanguage || navigator.language || "en",
    languages: {},
    notSupportedMessage: "No compatible source was found for this video."
}, "GENERATED_CDN_VSN" !== vjs.CDN_VERSION && (videojs.options.flash.swf = vjs.ACCESS_PROTOCOL + "vjs.zencdn.net/" + vjs.CDN_VERSION + "/video-js.swf"), vjs.addLanguage = function(a, b) {
    return vjs.options.languages[a] = void 0 !== vjs.options.languages[a] ? vjs.util.mergeOptions(vjs.options.languages[a], b) : b, vjs.options.languages
}, vjs.players = {}, "function" == typeof define && define.amd ? define("videojs", [], function() {
    return videojs
}) : "object" == typeof exports && "object" == typeof module && (module.exports = videojs), vjs.CoreObject = vjs.CoreObject = function() {}, vjs.CoreObject.extend = function(a) {
    var b, c;
    a = a || {}, b = a.init || a.init || this.prototype.init || this.prototype.init || function() {}, c = function() {
        b.apply(this, arguments)
    }, c.prototype = vjs.obj.create(this.prototype), c.prototype.constructor = c, c.extend = vjs.CoreObject.extend, c.create = vjs.CoreObject.create;
    for (var d in a) a.hasOwnProperty(d) && (c.prototype[d] = a[d]);
    return c
}, vjs.CoreObject.create = function() {
    var a = vjs.obj.create(this.prototype);
    return this.apply(a, arguments), a
}, vjs.on = function(a, b, c) {
    if (vjs.obj.isArray(b)) return _handleMultipleEvents(vjs.on, a, b, c);
    var d = vjs.getData(a);
    d.handlers || (d.handlers = {}), d.handlers[b] || (d.handlers[b] = []), c.guid || (c.guid = vjs.guid++), d.handlers[b].push(c), d.dispatcher || (d.disabled = !1, d.dispatcher = function(b) {
        if (!d.disabled) {
            b = vjs.fixEvent(b);
            var c = d.handlers[b.type];
            if (c)
                for (var e = c.slice(0), f = 0, g = e.length; g > f && !b.isImmediatePropagationStopped(); f++) e[f].call(a, b)
        }
    }), 1 == d.handlers[b].length && (a.addEventListener ? a.addEventListener(b, d.dispatcher, !1) : a.attachEvent && a.attachEvent("on" + b, d.dispatcher))
}, vjs.off = function(a, b, c) {
    if (vjs.hasData(a)) {
        var d = vjs.getData(a);
        if (d.handlers) {
            if (vjs.obj.isArray(b)) return _handleMultipleEvents(vjs.off, a, b, c);
            var e = function(b) {
                d.handlers[b] = [], vjs.cleanUpEvents(a, b)
            };
            if (b) {
                var f = d.handlers[b];
                if (f) {
                    if (!c) return void e(b);
                    if (c.guid)
                        for (var g = 0; g < f.length; g++) f[g].guid === c.guid && f.splice(g--, 1);
                    vjs.cleanUpEvents(a, b)
                }
            } else
                for (var h in d.handlers) e(h)
        }
    }
}, vjs.cleanUpEvents = function(a, b) {
    var c = vjs.getData(a);
    0 === c.handlers[b].length && (delete c.handlers[b], a.removeEventListener ? a.removeEventListener(b, c.dispatcher, !1) : a.detachEvent && a.detachEvent("on" + b, c.dispatcher)), vjs.isEmpty(c.handlers) && (delete c.handlers, delete c.dispatcher, delete c.disabled), vjs.isEmpty(c) && vjs.removeData(a)
}, vjs.fixEvent = function(a) {
    function b() {
        return !0
    }

    function c() {
        return !1
    }
    if (!a || !a.isPropagationStopped) {
        var d = a || window.event;
        a = {};
        for (var e in d) "layerX" !== e && "layerY" !== e && "keyLocation" !== e && ("returnValue" == e && d.preventDefault || (a[e] = d[e]));
        if (a.target || (a.target = a.srcElement || document), a.relatedTarget = a.fromElement === a.target ? a.toElement : a.fromElement, a.preventDefault = function() {
                d.preventDefault && d.preventDefault(), a.returnValue = !1, a.isDefaultPrevented = b, a.defaultPrevented = !0
            }, a.isDefaultPrevented = c, a.defaultPrevented = !1, a.stopPropagation = function() {
                d.stopPropagation && d.stopPropagation(), a.cancelBubble = !0, a.isPropagationStopped = b
            }, a.isPropagationStopped = c, a.stopImmediatePropagation = function() {
                d.stopImmediatePropagation && d.stopImmediatePropagation(), a.isImmediatePropagationStopped = b, a.stopPropagation()
            }, a.isImmediatePropagationStopped = c, null != a.clientX) {
            var f = document.documentElement,
                g = document.body;
            a.pageX = a.clientX + (f && f.scrollLeft || g && g.scrollLeft || 0) - (f && f.clientLeft || g && g.clientLeft || 0), a.pageY = a.clientY + (f && f.scrollTop || g && g.scrollTop || 0) - (f && f.clientTop || g && g.clientTop || 0)
        }
        a.which = a.charCode || a.keyCode, null != a.button && (a.button = 1 & a.button ? 0 : 4 & a.button ? 1 : 2 & a.button ? 2 : 0)
    }
    return a
}, vjs.trigger = function(a, b) {
    var c = vjs.hasData(a) ? vjs.getData(a) : {},
        d = a.parentNode || a.ownerDocument;
    if ("string" == typeof b && (b = {
            type: b,
            target: a
        }), b = vjs.fixEvent(b), c.dispatcher && c.dispatcher.call(a, b), d && !b.isPropagationStopped() && b.bubbles !== !1) vjs.trigger(d, b);
    else if (!d && !b.defaultPrevented) {
        var e = vjs.getData(b.target);
        b.target[b.type] && (e.disabled = !0, "function" == typeof b.target[b.type] && b.target[b.type](), e.disabled = !1)
    }
    return !b.defaultPrevented
}, vjs.one = function(a, b, c) {
    if (vjs.obj.isArray(b)) return _handleMultipleEvents(vjs.one, a, b, c);
    var d = function() {
        vjs.off(a, b, d), c.apply(this, arguments)
    };
    d.guid = c.guid = c.guid || vjs.guid++, vjs.on(a, b, d)
};
var hasOwnProp = Object.prototype.hasOwnProperty;
vjs.createEl = function(a, b) {
        var c;
        return a = a || "div", b = b || {}, c = document.createElement(a), vjs.obj.each(b, function(a, b) {
            -1 !== a.indexOf("aria-") || "role" == a ? c.setAttribute(a, b) : c[a] = b
        }), c
    }, vjs.capitalize = function(a) {
        return a.charAt(0).toUpperCase() + a.slice(1)
    }, vjs.obj = {}, vjs.obj.create = Object.create || function(a) {
        function b() {}
        return b.prototype = a, new b
    }, vjs.obj.each = function(a, b, c) {
        for (var d in a) hasOwnProp.call(a, d) && b.call(c || this, d, a[d])
    }, vjs.obj.merge = function(a, b) {
        if (!b) return a;
        for (var c in b) hasOwnProp.call(b, c) && (a[c] = b[c]);
        return a
    }, vjs.obj.deepMerge = function(a, b) {
        var c, d, e;
        a = vjs.obj.copy(a);
        for (c in b) hasOwnProp.call(b, c) && (d = a[c], e = b[c], a[c] = vjs.obj.isPlain(d) && vjs.obj.isPlain(e) ? vjs.obj.deepMerge(d, e) : b[c]);
        return a
    }, vjs.obj.copy = function(a) {
        return vjs.obj.merge({}, a)
    }, vjs.obj.isPlain = function(a) {
        return !!a && "object" == typeof a && "[object Object]" === a.toString() && a.constructor === Object
    }, vjs.obj.isArray = Array.isArray || function(a) {
        return "[object Array]" === Object.prototype.toString.call(a)
    }, vjs.isNaN = function(a) {
        return a !== a
    }, vjs.bind = function(a, b, c) {
        b.guid || (b.guid = vjs.guid++);
        var d = function() {
            return b.apply(a, arguments)
        };
        return d.guid = c ? c + "_" + b.guid : b.guid, d
    }, vjs.cache = {}, vjs.guid = 1, vjs.expando = "vdata" + (new Date).getTime(), vjs.getData = function(a) {
        var b = a[vjs.expando];
        return b || (b = a[vjs.expando] = vjs.guid++), vjs.cache[b] || (vjs.cache[b] = {}), vjs.cache[b]
    }, vjs.hasData = function(a) {
        var b = a[vjs.expando];
        return !(!b || vjs.isEmpty(vjs.cache[b]))
    }, vjs.removeData = function(a) {
        var b = a[vjs.expando];
        if (b) {
            delete vjs.cache[b];
            try {
                delete a[vjs.expando]
            } catch (c) {
                a.removeAttribute ? a.removeAttribute(vjs.expando) : a[vjs.expando] = null
            }
        }
    }, vjs.isEmpty = function(a) {
        for (var b in a)
            if (null !== a[b]) return !1;
        return !0
    }, vjs.hasClass = function(a, b) {
        return -1 !== (" " + a.className + " ").indexOf(" " + b + " ")
    }, vjs.addClass = function(a, b) {
        vjs.hasClass(a, b) || (a.className = "" === a.className ? b : a.className + " " + b)
    }, vjs.removeClass = function(a, b) {
        var c, d;
        if (vjs.hasClass(a, b)) {
            for (c = a.className.split(" "), d = c.length - 1; d >= 0; d--) c[d] === b && c.splice(d, 1);
            a.className = c.join(" ")
        }
    }, vjs.TEST_VID = vjs.createEl("video"),
    function() {
        var a = document.createElement("track");
        a.kind = "captions", a.srclang = "en", a.label = "English", vjs.TEST_VID.appendChild(a)
    }(), vjs.USER_AGENT = navigator.userAgent, vjs.IS_IPHONE = /iPhone/i.test(vjs.USER_AGENT), vjs.IS_IPAD = /iPad/i.test(vjs.USER_AGENT), vjs.IS_IPOD = /iPod/i.test(vjs.USER_AGENT), vjs.IS_IOS = vjs.IS_IPHONE || vjs.IS_IPAD || vjs.IS_IPOD, vjs.IOS_VERSION = function() {
        var a = vjs.USER_AGENT.match(/OS (\d+)_/i);
        return a && a[1] ? a[1] : void 0
    }(), vjs.IS_ANDROID = /Android/i.test(vjs.USER_AGENT), vjs.ANDROID_VERSION = function() {
        var a, b, c = vjs.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);
        return c ? (a = c[1] && parseFloat(c[1]), b = c[2] && parseFloat(c[2]), a && b ? parseFloat(c[1] + "." + c[2]) : a ? a : null) : null
    }(), vjs.IS_OLD_ANDROID = vjs.IS_ANDROID && /webkit/i.test(vjs.USER_AGENT) && vjs.ANDROID_VERSION < 2.3, vjs.IS_FIREFOX = /Firefox/i.test(vjs.USER_AGENT), vjs.IS_CHROME = /Chrome/i.test(vjs.USER_AGENT), vjs.IS_IE8 = /MSIE\s8\.0/.test(vjs.USER_AGENT), vjs.TOUCH_ENABLED = !!("ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch), vjs.BACKGROUND_SIZE_SUPPORTED = "backgroundSize" in vjs.TEST_VID.style, vjs.setElementAttributes = function(a, b) {
        vjs.obj.each(b, function(b, c) {
            null === c || "undefined" == typeof c || c === !1 ? a.removeAttribute(b) : a.setAttribute(b, c === !0 ? "" : c)
        })
    }, vjs.getElementAttributes = function(a) {
        var b, c, d, e, f;
        if (b = {}, c = ",autoplay,controls,loop,muted,default,", a && a.attributes && a.attributes.length > 0) {
            d = a.attributes;
            for (var g = d.length - 1; g >= 0; g--) e = d[g].name, f = d[g].value, ("boolean" == typeof a[e] || -1 !== c.indexOf("," + e + ",")) && (f = null !== f ? !0 : !1), b[e] = f
        }
        return b
    }, vjs.getComputedDimension = function(a, b) {
        var c = "";
        return document.defaultView && document.defaultView.getComputedStyle ? c = document.defaultView.getComputedStyle(a, "").getPropertyValue(b) : a.currentStyle && (c = a["client" + b.substr(0, 1).toUpperCase() + b.substr(1)] + "px"), c
    }, vjs.insertFirst = function(a, b) {
        b.firstChild ? b.insertBefore(a, b.firstChild) : b.appendChild(a)
    }, vjs.browser = {}, vjs.el = function(a) {
        return 0 === a.indexOf("#") && (a = a.slice(1)), document.getElementById(a)
    }, vjs.formatTime = function(a, b) {
        b = b || a;
        var c = Math.floor(a % 60),
            d = Math.floor(a / 60 % 60),
            e = Math.floor(a / 3600),
            f = Math.floor(b / 60 % 60),
            g = Math.floor(b / 3600);
        return (isNaN(a) || a === 1 / 0) && (e = d = c = "-"), e = e > 0 || g > 0 ? e + ":" : "", d = ((e || f >= 10) && 10 > d ? "0" + d : d) + ":", c = 10 > c ? "0" + c : c, e + d + c
    }, vjs.blockTextSelection = function() {
        document.body.focus(), document.onselectstart = function() {
            return !1
        }
    }, vjs.unblockTextSelection = function() {
        document.onselectstart = function() {
            return !0
        }
    }, vjs.trim = function(a) {
        return (a + "").replace(/^\s+|\s+$/g, "")
    }, vjs.round = function(a, b) {
        return b || (b = 0), Math.round(a * Math.pow(10, b)) / Math.pow(10, b)
    }, vjs.createTimeRange = function(a, b) {
        return {
            length: 1,
            start: function() {
                return a
            },
            end: function() {
                return b
            }
        }
    }, vjs.setLocalStorage = function(a, b) {
        try {
            var c = window.localStorage || !1;
            if (!c) return;
            c[a] = b
        } catch (d) {
            22 == d.code || 1014 == d.code ? vjs.log("LocalStorage Full (VideoJS)", d) : 18 == d.code ? vjs.log("LocalStorage not allowed (VideoJS)", d) : vjs.log("LocalStorage Error (VideoJS)", d)
        }
    }, vjs.getAbsoluteURL = function(a) {
        return a.match(/^https?:\/\//) || (a = vjs.createEl("div", {
            innerHTML: '<a href="' + a + '">x</a>'
        }).firstChild.href), a
    }, vjs.parseUrl = function(a) {
        var b, c, d, e, f;
        e = ["protocol", "hostname", "port", "pathname", "search", "hash", "host"], c = vjs.createEl("a", {
            href: a
        }), d = "" === c.host && "file:" !== c.protocol, d && (b = vjs.createEl("div"), b.innerHTML = '<a href="' + a + '"></a>', c = b.firstChild, b.setAttribute("style", "display:none; position:absolute;"), document.body.appendChild(b)), f = {};
        for (var g = 0; g < e.length; g++) f[e[g]] = c[e[g]];
        return "http:" === f.protocol && (f.host = f.host.replace(/:80$/, "")), "https:" === f.protocol && (f.host = f.host.replace(/:443$/, "")), d && document.body.removeChild(b), f
    }, vjs.log = function() {
        _logType(null, arguments)
    }, vjs.log.history = [], vjs.log.error = function() {
        _logType("error", arguments)
    }, vjs.log.warn = function() {
        _logType("warn", arguments)
    }, vjs.findPosition = function(a) {
        var b, c, d, e, f, g, h, i, j;
        return a.getBoundingClientRect && a.parentNode && (b = a.getBoundingClientRect()), b ? (c = document.documentElement, d = document.body, e = c.clientLeft || d.clientLeft || 0, f = window.pageXOffset || d.scrollLeft, g = b.left + f - e, h = c.clientTop || d.clientTop || 0, i = window.pageYOffset || d.scrollTop, j = b.top + i - h, {
            left: vjs.round(g),
            top: vjs.round(j)
        }) : {
            left: 0,
            top: 0
        }
    }, vjs.arr = {}, vjs.arr.forEach = function(a, b, c) {
        if (vjs.obj.isArray(a) && b instanceof Function)
            for (var d = 0, e = a.length; e > d; ++d) b.call(c || vjs, a[d], d, a);
        return a
    }, vjs.xhr = function(a, b) {
        var c, d, e, f, g, h, i, j, k;
        "string" == typeof a && (a = {
            uri: a
        }), videojs.util.mergeOptions({
            method: "GET",
            timeout: 45e3
        }, a), b = b || function() {}, j = function() {
            window.clearTimeout(i), b(null, d, d.response || d.responseText)
        }, k = function(a) {
            window.clearTimeout(i), a && "string" != typeof a || (a = new Error(a)), b(a, d)
        }, c = window.XMLHttpRequest, "undefined" == typeof c && (c = function() {
            try {
                return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")
            } catch (a) {}
            try {
                return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")
            } catch (b) {}
            try {
                return new window.ActiveXObject("Msxml2.XMLHTTP");

            } catch (c) {}
            throw new Error("This browser does not support XMLHttpRequest.")
        }), d = new c, d.uri = a.uri, e = vjs.parseUrl(a.uri), f = window.location, h = e.protocol + e.host !== f.protocol + f.host, !h || !window.XDomainRequest || "withCredentials" in d ? (g = "file:" == e.protocol || "file:" == f.protocol, d.onreadystatechange = function() {
            if (4 === d.readyState) {
                if (d.timedout) return k("timeout");
                200 === d.status || g && 0 === d.status ? j() : k()
            }
        }, a.timeout && (i = window.setTimeout(function() {
            4 !== d.readyState && (d.timedout = !0, d.abort())
        }, a.timeout))) : (d = new window.XDomainRequest, d.onload = j, d.onerror = k, d.onprogress = function() {}, d.ontimeout = function() {});
        try {
            d.open(a.method || "GET", a.uri, !0)
        } catch (l) {
            return k(l)
        }
        a.withCredentials && (d.withCredentials = !0), a.responseType && (d.responseType = a.responseType);
        try {
            d.send()
        } catch (l) {
            return k(l)
        }
        return d
    }, vjs.util = {}, vjs.util.mergeOptions = function(a, b) {
        var c, d, e;
        a = vjs.obj.copy(a);
        for (c in b) b.hasOwnProperty(c) && (d = a[c], e = b[c], a[c] = vjs.obj.isPlain(d) && vjs.obj.isPlain(e) ? vjs.util.mergeOptions(d, e) : b[c]);
        return a
    }, vjs.EventEmitter = function() {}, vjs.EventEmitter.prototype.allowedEvents_ = {}, vjs.EventEmitter.prototype.on = function(a, b) {
        var c = this.addEventListener;
        this.addEventListener = Function.prototype, vjs.on(this, a, b), this.addEventListener = c
    }, vjs.EventEmitter.prototype.addEventListener = vjs.EventEmitter.prototype.on, vjs.EventEmitter.prototype.off = function(a, b) {
        vjs.off(this, a, b)
    }, vjs.EventEmitter.prototype.removeEventListener = vjs.EventEmitter.prototype.off, vjs.EventEmitter.prototype.one = function(a, b) {
        vjs.one(this, a, b)
    }, vjs.EventEmitter.prototype.trigger = function(a) {
        var b = a.type || a;
        "string" == typeof a && (a = {
            type: b
        }), a = vjs.fixEvent(a), this.allowedEvents_[b] && this["on" + b] && this["on" + b](a), vjs.trigger(this, a)
    }, vjs.EventEmitter.prototype.dispatchEvent = vjs.EventEmitter.prototype.trigger, vjs.Component = vjs.CoreObject.extend({
        init: function(a, b, c) {
            this.player_ = a, this.options_ = vjs.obj.copy(this.options_), b = this.options(b), this.id_ = b.id || b.el && b.el.id, this.id_ || (this.id_ = (a.id && a.id() || "no_player") + "_component_" + vjs.guid++), this.name_ = b.name || null, this.el_ = b.el || this.createEl(), this.children_ = [], this.childIndex_ = {}, this.childNameIndex_ = {}, this.initChildren(), this.ready(c), b.reportTouchActivity !== !1 && this.enableTouchActivity()
        }
    }), vjs.Component.prototype.dispose = function() {
        if (this.trigger({
                type: "dispose",
                bubbles: !1
            }), this.children_)
            for (var a = this.children_.length - 1; a >= 0; a--) this.children_[a].dispose && this.children_[a].dispose();
        this.children_ = null, this.childIndex_ = null, this.childNameIndex_ = null, this.off(), this.el_.parentNode && this.el_.parentNode.removeChild(this.el_), vjs.removeData(this.el_), this.el_ = null
    }, vjs.Component.prototype.player_ = !0, vjs.Component.prototype.player = function() {
        return this.player_
    }, vjs.Component.prototype.options_, vjs.Component.prototype.options = function(a) {
        return void 0 === a ? this.options_ : this.options_ = vjs.util.mergeOptions(this.options_, a)
    }, vjs.Component.prototype.el_, vjs.Component.prototype.createEl = function(a, b) {
        return vjs.createEl(a, b)
    }, vjs.Component.prototype.localize = function(a) {
        var b = this.player_.language(),
            c = this.player_.languages();
        return c && c[b] && c[b][a] ? c[b][a] : a
    }, vjs.Component.prototype.el = function() {
        return this.el_
    }, vjs.Component.prototype.contentEl_, vjs.Component.prototype.contentEl = function() {
        return this.contentEl_ || this.el_
    }, vjs.Component.prototype.id_, vjs.Component.prototype.id = function() {
        return this.id_
    }, vjs.Component.prototype.name_, vjs.Component.prototype.name = function() {
        return this.name_
    }, vjs.Component.prototype.children_, vjs.Component.prototype.children = function() {
        return this.children_
    }, vjs.Component.prototype.childIndex_, vjs.Component.prototype.getChildById = function(a) {
        return this.childIndex_[a]
    }, vjs.Component.prototype.childNameIndex_, vjs.Component.prototype.getChild = function(a) {
        return this.childNameIndex_[a]
    }, vjs.Component.prototype.addChild = function(a, b) {
        var c, d, e;
        return "string" == typeof a ? (e = a, b = b || {}, d = b.componentClass || vjs.capitalize(e), b.name = e, c = new window.videojs[d](this.player_ || this, b)) : c = a, this.children_.push(c), "function" == typeof c.id && (this.childIndex_[c.id()] = c), e = e || c.name && c.name(), e && (this.childNameIndex_[e] = c), "function" == typeof c.el && c.el() && this.contentEl().appendChild(c.el()), c
    }, vjs.Component.prototype.removeChild = function(a) {
        if ("string" == typeof a && (a = this.getChild(a)), a && this.children_) {
            for (var b = !1, c = this.children_.length - 1; c >= 0; c--)
                if (this.children_[c] === a) {
                    b = !0, this.children_.splice(c, 1);
                    break
                }
            if (b) {
                this.childIndex_[a.id()] = null, this.childNameIndex_[a.name()] = null;
                var d = a.el();
                d && d.parentNode === this.contentEl() && this.contentEl().removeChild(a.el())
            }
        }
    }, vjs.Component.prototype.initChildren = function() {
        var a, b, c, d, e, f, g;
        if (a = this, b = a.options(), c = b.children)
            if (g = function(c, d) {
                    void 0 !== b[c] && (d = b[c]), d !== !1 && (a[c] = a.addChild(c, d))
                }, vjs.obj.isArray(c))
                for (var h = 0; h < c.length; h++) d = c[h], "string" == typeof d ? (e = d, f = {}) : (e = d.name, f = d), g(e, f);
            else vjs.obj.each(c, g)
    }, vjs.Component.prototype.buildCSSClass = function() {
        return ""
    }, vjs.Component.prototype.on = function(a, b, c) {
        var d, e, f, g, h, i;
        return "string" == typeof a || vjs.obj.isArray(a) ? vjs.on(this.el_, a, vjs.bind(this, b)) : (d = a, e = b, f = vjs.bind(this, c), i = this, g = function() {
            i.off(d, e, f)
        }, g.guid = f.guid, this.on("dispose", g), h = function() {
            i.off("dispose", g)
        }, h.guid = f.guid, a.nodeName ? (vjs.on(d, e, f), vjs.on(d, "dispose", h)) : "function" == typeof a.on && (d.on(e, f), d.on("dispose", h))), this
    }, vjs.Component.prototype.off = function(a, b, c) {
        var d, e, f;
        return !a || "string" == typeof a || vjs.obj.isArray(a) ? vjs.off(this.el_, a, b) : (d = a, e = b, f = vjs.bind(this, c), this.off("dispose", f), a.nodeName ? (vjs.off(d, e, f), vjs.off(d, "dispose", f)) : (d.off(e, f), d.off("dispose", f))), this
    }, vjs.Component.prototype.one = function(a, b, c) {
        var d, e, f, g, h;
        return "string" == typeof a || vjs.obj.isArray(a) ? vjs.one(this.el_, a, vjs.bind(this, b)) : (d = a, e = b, f = vjs.bind(this, c), g = this, h = function() {
            g.off(d, e, h), f.apply(this, arguments)
        }, h.guid = f.guid, this.on(d, e, h)), this
    }, vjs.Component.prototype.trigger = function(a) {
        return vjs.trigger(this.el_, a), this
    }, vjs.Component.prototype.isReady_, vjs.Component.prototype.isReadyOnInitFinish_ = !0, vjs.Component.prototype.readyQueue_, vjs.Component.prototype.ready = function(a) {
        return a && (this.isReady_ ? a.call(this) : (void 0 === this.readyQueue_ && (this.readyQueue_ = []), this.readyQueue_.push(a))), this
    }, vjs.Component.prototype.triggerReady = function() {
        this.isReady_ = !0;
        var a = this.readyQueue_;
        if (a && a.length > 0) {
            for (var b = 0, c = a.length; c > b; b++) a[b].call(this);
            this.readyQueue_ = [], this.trigger("ready")
        }
    }, vjs.Component.prototype.hasClass = function(a) {
        return vjs.hasClass(this.el_, a)
    }, vjs.Component.prototype.addClass = function(a) {
        return vjs.addClass(this.el_, a), this
    }, vjs.Component.prototype.removeClass = function(a) {
        return vjs.removeClass(this.el_, a), this
    }, vjs.Component.prototype.show = function() {
        return this.removeClass("vjs-hidden"), this
    }, vjs.Component.prototype.hide = function() {
        return this.addClass("vjs-hidden"), this
    }, vjs.Component.prototype.lockShowing = function() {
        return this.addClass("vjs-lock-showing"), this
    }, vjs.Component.prototype.unlockShowing = function() {
        return this.removeClass("vjs-lock-showing"), this
    }, vjs.Component.prototype.disable = function() {
        this.hide(), this.show = function() {}
    }, vjs.Component.prototype.width = function(a, b) {
        return this.dimension("width", a, b)
    }, vjs.Component.prototype.height = function(a, b) {
        return this.dimension("height", a, b)
    }, vjs.Component.prototype.dimensions = function(a, b) {
        return this.width(a, !0).height(b)
    }, vjs.Component.prototype.dimension = function(a, b, c) {
        if (void 0 !== b) return (null === b || vjs.isNaN(b)) && (b = 0), this.el_.style[a] = -1 !== ("" + b).indexOf("%") || -1 !== ("" + b).indexOf("px") ? b : "auto" === b ? "" : b + "px", c || this.trigger("resize"), this;
        if (!this.el_) return 0;
        var d = this.el_.style[a],
            e = d.indexOf("px");
        return -1 !== e ? parseInt(d.slice(0, e), 10) : parseInt(this.el_["offset" + vjs.capitalize(a)], 10)
    }, vjs.Component.prototype.onResize, vjs.Component.prototype.emitTapEvents = function() {
        var a, b, c, d, e, f, g, h, i, j;
        a = 0, b = null, i = 10, j = 200, this.on("touchstart", function(c) {
            1 === c.touches.length && (b = vjs.obj.copy(c.touches[0]), a = (new Date).getTime(), d = !0)
        }), this.on("touchmove", function(a) {
            a.touches.length > 1 ? d = !1 : b && (f = a.touches[0].pageX - b.pageX, g = a.touches[0].pageY - b.pageY, h = Math.sqrt(f * f + g * g), h > i && (d = !1))
        }), e = function() {
            d = !1
        }, this.on("touchleave", e), this.on("touchcancel", e), this.on("touchend", function(e) {
            b = null, d === !0 && (c = (new Date).getTime() - a, j > c && (e.preventDefault(), this.trigger("tap")))
        })
    }, vjs.Component.prototype.enableTouchActivity = function() {
        var a, b, c;
        this.player().reportUserActivity && (a = vjs.bind(this.player(), this.player().reportUserActivity), this.on("touchstart", function() {
            a(), this.clearInterval(b), b = this.setInterval(a, 250)
        }), c = function() {
            a(), this.clearInterval(b)
        }, this.on("touchmove", a), this.on("touchend", c), this.on("touchcancel", c))
    }, vjs.Component.prototype.setTimeout = function(a, b) {
        a = vjs.bind(this, a);
        var c = setTimeout(a, b),
            d = function() {
                this.clearTimeout(c)
            };
        return d.guid = "vjs-timeout-" + c, this.on("dispose", d), c
    }, vjs.Component.prototype.clearTimeout = function(a) {
        clearTimeout(a);
        var b = function() {};
        return b.guid = "vjs-timeout-" + a, this.off("dispose", b), a
    }, vjs.Component.prototype.setInterval = function(a, b) {
        a = vjs.bind(this, a);
        var c = setInterval(a, b),
            d = function() {
                this.clearInterval(c)
            };
        return d.guid = "vjs-interval-" + c, this.on("dispose", d), c
    }, vjs.Component.prototype.clearInterval = function(a) {
        clearInterval(a);
        var b = function() {};
        return b.guid = "vjs-interval-" + a, this.off("dispose", b), a
    }, vjs.Button = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b), this.emitTapEvents(), this.on("tap", this.onClick), this.on("click", this.onClick), this.on("focus", this.onFocus), this.on("blur", this.onBlur)
        }
    }), vjs.Button.prototype.createEl = function(a, b) {
        var c;
        return b = vjs.obj.merge({
            className: this.buildCSSClass(),
            role: "button",
            "aria-live": "polite",
            tabIndex: 0
        }, b), c = vjs.Component.prototype.createEl.call(this, a, b), b.innerHTML || (this.contentEl_ = vjs.createEl("div", {
            className: "vjs-control-content"
        }), this.controlText_ = vjs.createEl("span", {
            className: "vjs-control-text",
            innerHTML: this.localize(this.buttonText) || "Need Text"
        }), this.contentEl_.appendChild(this.controlText_), c.appendChild(this.contentEl_)), c
    }, vjs.Button.prototype.buildCSSClass = function() {
        return "vjs-control " + vjs.Component.prototype.buildCSSClass.call(this)
    }, vjs.Button.prototype.onClick = function() {}, vjs.Button.prototype.onFocus = function() {
        vjs.on(document, "keydown", vjs.bind(this, this.onKeyPress))
    }, vjs.Button.prototype.onKeyPress = function(a) {
        (32 == a.which || 13 == a.which) && (a.preventDefault(), this.onClick())
    }, vjs.Button.prototype.onBlur = function() {
        vjs.off(document, "keydown", vjs.bind(this, this.onKeyPress))
    }, vjs.Slider = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b), this.bar = this.getChild(this.options_.barName), this.handle = this.getChild(this.options_.handleName), this.on("mousedown", this.onMouseDown), this.on("touchstart", this.onMouseDown), this.on("focus", this.onFocus), this.on("blur", this.onBlur), this.on("click", this.onClick), this.on(a, "controlsvisible", this.update), this.on(a, this.playerEvent, this.update)
        }
    }), vjs.Slider.prototype.createEl = function(a, b) {
        return b = b || {}, b.className = b.className + " vjs-slider", b = vjs.obj.merge({
            role: "slider",
            "aria-valuenow": 0,
            "aria-valuemin": 0,
            "aria-valuemax": 100,
            tabIndex: 0
        }, b), vjs.Component.prototype.createEl.call(this, a, b)
    }, vjs.Slider.prototype.onMouseDown = function(a) {
        a.preventDefault(), vjs.blockTextSelection(), this.addClass("vjs-sliding"), this.on(document, "mousemove", this.onMouseMove), this.on(document, "mouseup", this.onMouseUp), this.on(document, "touchmove", this.onMouseMove), this.on(document, "touchend", this.onMouseUp), this.onMouseMove(a)
    }, vjs.Slider.prototype.onMouseMove = function() {}, vjs.Slider.prototype.onMouseUp = function() {
        vjs.unblockTextSelection(), this.removeClass("vjs-sliding"), this.off(document, "mousemove", this.onMouseMove), this.off(document, "mouseup", this.onMouseUp), this.off(document, "touchmove", this.onMouseMove), this.off(document, "touchend", this.onMouseUp), this.update()
    }, vjs.Slider.prototype.update = function() {
        if (this.el_) {
            var a, b = this.getPercent(),
                c = this.handle,
                d = this.bar;
            if (("number" != typeof b || b !== b || 0 > b || b === 1 / 0) && (b = 0), a = b, c) {
                var e = this.el_,
                    f = e.offsetWidth,
                    g = c.el().offsetWidth,
                    h = g ? g / f : 0,
                    i = 1 - h,
                    j = b * i;
                a = j + h / 2, c.el().style.left = vjs.round(100 * j, 2) + "%"
            }
            d && (d.el().style.width = vjs.round(100 * a, 2) + "%")
        }
    }, vjs.Slider.prototype.calculateDistance = function(a) {
        var b, c, d, e, f, g, h, i, j;
        if (b = this.el_, c = vjs.findPosition(b), f = g = b.offsetWidth, h = this.handle, this.options().vertical) {
            if (e = c.top, j = a.changedTouches ? a.changedTouches[0].pageY : a.pageY, h) {
                var k = h.el().offsetHeight;
                e += k / 2, g -= k
            }
            return Math.max(0, Math.min(1, (e - j + g) / g))
        }
        if (d = c.left, i = a.changedTouches ? a.changedTouches[0].pageX : a.pageX, h) {
            var l = h.el().offsetWidth;
            d += l / 2, f -= l
        }
        return Math.max(0, Math.min(1, (i - d) / f))
    }, vjs.Slider.prototype.onFocus = function() {
        this.on(document, "keydown", this.onKeyPress)
    }, vjs.Slider.prototype.onKeyPress = function(a) {
        37 == a.which || 40 == a.which ? (a.preventDefault(), this.stepBack()) : (38 == a.which || 39 == a.which) && (a.preventDefault(), this.stepForward())
    }, vjs.Slider.prototype.onBlur = function() {
        this.off(document, "keydown", this.onKeyPress)
    }, vjs.Slider.prototype.onClick = function(a) {
        a.stopImmediatePropagation(), a.preventDefault()
    }, vjs.SliderHandle = vjs.Component.extend(), vjs.SliderHandle.prototype.defaultValue = 0, vjs.SliderHandle.prototype.createEl = function(a, b) {
        return b = b || {}, b.className = b.className + " vjs-slider-handle", b = vjs.obj.merge({
            innerHTML: '<span class="vjs-control-text">' + this.defaultValue + "</span>"
        }, b), vjs.Component.prototype.createEl.call(this, "div", b)
    }, vjs.Menu = vjs.Component.extend(), vjs.Menu.prototype.addItem = function(a) {
        this.addChild(a), a.on("click", vjs.bind(this, function() {
            this.unlockShowing()
        }))
    }, vjs.Menu.prototype.createEl = function() {
        var a = this.options().contentElType || "ul";
        this.contentEl_ = vjs.createEl(a, {
            className: "vjs-menu-content"
        });
        var b = vjs.Component.prototype.createEl.call(this, "div", {
            append: this.contentEl_,
            className: "vjs-menu"
        });
        return b.appendChild(this.contentEl_), vjs.on(b, "click", function(a) {
            a.preventDefault(), a.stopImmediatePropagation()
        }), b
    }, vjs.MenuItem = vjs.Button.extend({
        init: function(a, b) {
            vjs.Button.call(this, a, b), this.selected(b.selected)
        }
    }), vjs.MenuItem.prototype.createEl = function(a, b) {
        return vjs.Button.prototype.createEl.call(this, "li", vjs.obj.merge({
            className: "vjs-menu-item",
            innerHTML: this.localize(this.options_.label)
        }, b))
    }, vjs.MenuItem.prototype.onClick = function() {
        this.selected(!0)
    }, vjs.MenuItem.prototype.selected = function(a) {
        a ? (this.addClass("vjs-selected"), this.el_.setAttribute("aria-selected", !0)) : (this.removeClass("vjs-selected"), this.el_.setAttribute("aria-selected", !1))
    }, vjs.MenuButton = vjs.Button.extend({
        init: function(a, b) {
            vjs.Button.call(this, a, b), this.update(), this.on("keydown", this.onKeyPress), this.el_.setAttribute("aria-haspopup", !0), this.el_.setAttribute("role", "button")
        }
    }), vjs.MenuButton.prototype.update = function() {
        var a = this.createMenu();
        this.menu && this.removeChild(this.menu), this.menu = a, this.addChild(a), this.items && 0 === this.items.length ? this.hide() : this.items && this.items.length > 1 && this.show()
    }, vjs.MenuButton.prototype.buttonPressed_ = !1, vjs.MenuButton.prototype.createMenu = function() {
        var a = new vjs.Menu(this.player_);
        if (this.options().title && a.contentEl().appendChild(vjs.createEl("li", {
                className: "vjs-menu-title",
                innerHTML: vjs.capitalize(this.options().title),
                tabindex: -1
            })), this.items = this.createItems(), this.items)
            for (var b = 0; b < this.items.length; b++) a.addItem(this.items[b]);
        return a
    }, vjs.MenuButton.prototype.createItems = function() {}, vjs.MenuButton.prototype.buildCSSClass = function() {
        return this.className + " vjs-menu-button " + vjs.Button.prototype.buildCSSClass.call(this)
    }, vjs.MenuButton.prototype.onFocus = function() {}, vjs.MenuButton.prototype.onBlur = function() {}, vjs.MenuButton.prototype.onClick = function() {
        this.one("mouseout", vjs.bind(this, function() {
            this.menu.unlockShowing(), this.el_.blur()
        })), this.buttonPressed_ ? this.unpressButton() : this.pressButton()
    }, vjs.MenuButton.prototype.onKeyPress = function(a) {
        32 == a.which || 13 == a.which ? (this.buttonPressed_ ? this.unpressButton() : this.pressButton(), a.preventDefault()) : 27 == a.which && (this.buttonPressed_ && this.unpressButton(), a.preventDefault())
    }, vjs.MenuButton.prototype.pressButton = function() {
        this.buttonPressed_ = !0, this.menu.lockShowing(), this.el_.setAttribute("aria-pressed", !0), this.items && this.items.length > 0 && this.items[0].el().focus()
    }, vjs.MenuButton.prototype.unpressButton = function() {
        this.buttonPressed_ = !1, this.menu.unlockShowing(), this.el_.setAttribute("aria-pressed", !1)
    }, vjs.MediaError = function(a) {
        "number" == typeof a ? this.code = a : "string" == typeof a ? this.message = a : "object" == typeof a && vjs.obj.merge(this, a), this.message || (this.message = vjs.MediaError.defaultMessages[this.code] || "")
    }, vjs.MediaError.prototype.code = 0, vjs.MediaError.prototype.message = "", vjs.MediaError.prototype.status = null, vjs.MediaError.errorTypes = ["MEDIA_ERR_CUSTOM", "MEDIA_ERR_ABORTED", "MEDIA_ERR_NETWORK", "MEDIA_ERR_DECODE", "MEDIA_ERR_SRC_NOT_SUPPORTED", "MEDIA_ERR_ENCRYPTED"], vjs.MediaError.defaultMessages = {
        1: "You aborted the video playback",
        2: "A network error caused the video download to fail part-way.",
        3: "The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",
        4: "The video could not be loaded, either because the server or network failed or because the format is not supported.",
        5: "The video is encrypted and we do not have the keys to decrypt it."
    };
for (var errNum = 0; errNum < vjs.MediaError.errorTypes.length; errNum++) vjs.MediaError[vjs.MediaError.errorTypes[errNum]] = errNum, vjs.MediaError.prototype[vjs.MediaError.errorTypes[errNum]] = errNum;
if (function() {
        var a, b, c, d;
        for (vjs.browser.fullscreenAPI, a = [
                ["requestFullscreen", "exitFullscreen", "fullscreenElement", "fullscreenEnabled", "fullscreenchange", "fullscreenerror"],
                ["webkitRequestFullscreen", "webkitExitFullscreen", "webkitFullscreenElement", "webkitFullscreenEnabled", "webkitfullscreenchange", "webkitfullscreenerror"],
                ["webkitRequestFullScreen", "webkitCancelFullScreen", "webkitCurrentFullScreenElement", "webkitCancelFullScreen", "webkitfullscreenchange", "webkitfullscreenerror"],
                ["mozRequestFullScreen", "mozCancelFullScreen", "mozFullScreenElement", "mozFullScreenEnabled", "mozfullscreenchange", "mozfullscreenerror"],
                ["msRequestFullscreen", "msExitFullscreen", "msFullscreenElement", "msFullscreenEnabled", "MSFullscreenChange", "MSFullscreenError"]
            ], b = a[0], d = 0; d < a.length; d++)
            if (a[d][1] in document) {
                c = a[d];
                break
            }
        if (c)
            for (vjs.browser.fullscreenAPI = {}, d = 0; d < c.length; d++) vjs.browser.fullscreenAPI[b[d]] = c[d]
    }(), vjs.Player = vjs.Component.extend({
        init: function(a, b, c) {
            this.tag = a, a.id = a.id || "vjs_video_" + vjs.guid++, this.tagAttributes = a && vjs.getElementAttributes(a), b = vjs.obj.merge(this.getTagSettings(a), b), this.language_ = b.language || vjs.options.language, this.languages_ = b.languages || vjs.options.languages, this.cache_ = {}, this.poster_ = b.poster || "", this.controls_ = !!b.controls, a.controls = !1, b.reportTouchActivity = !1, this.isAudio("audio" === this.tag.nodeName.toLowerCase()), vjs.Component.call(this, this, b, c), this.addClass(this.controls() ? "vjs-controls-enabled" : "vjs-controls-disabled"), this.isAudio() && this.addClass("vjs-audio"), vjs.players[this.id_] = this, b.plugins && vjs.obj.each(b.plugins, function(a, b) {
                this[a](b)
            }, this), this.listenForUserActivity()
        }
    }), vjs.Player.prototype.language_, vjs.Player.prototype.language = function(a) {
        return void 0 === a ? this.language_ : (this.language_ = a, this)
    }, vjs.Player.prototype.languages_, vjs.Player.prototype.languages = function() {
        return this.languages_
    }, vjs.Player.prototype.options_ = vjs.options, vjs.Player.prototype.dispose = function() {
        this.trigger("dispose"), this.off("dispose"), vjs.players[this.id_] = null, this.tag && this.tag.player && (this.tag.player = null), this.el_ && this.el_.player && (this.el_.player = null), this.tech && this.tech.dispose(), vjs.Component.prototype.dispose.call(this)
    }, vjs.Player.prototype.getTagSettings = function(a) {
        var b, c, d = {
            sources: [],
            tracks: []
        };
        if (b = vjs.getElementAttributes(a), c = b["data-setup"], null !== c && vjs.obj.merge(b, vjs.JSON.parse(c || "{}")), vjs.obj.merge(d, b), a.hasChildNodes()) {
            var e, f, g, h, i;
            for (e = a.childNodes, h = 0, i = e.length; i > h; h++) f = e[h], g = f.nodeName.toLowerCase(), "source" === g ? d.sources.push(vjs.getElementAttributes(f)) : "track" === g && d.tracks.push(vjs.getElementAttributes(f))
        }
        return d
    }, vjs.Player.prototype.createEl = function() {
        var a, b = this.el_ = vjs.Component.prototype.createEl.call(this, "div"),
            c = this.tag;
        return c.removeAttribute("width"), c.removeAttribute("height"), a = vjs.getElementAttributes(c), vjs.obj.each(a, function(c) {
            "class" == c ? b.className = a[c] : b.setAttribute(c, a[c])
        }), c.id += "_html5_api", c.className = "vjs-tech", c.player = b.player = this, this.addClass("vjs-paused"), this.width(this.options_.width, !0), this.height(this.options_.height, !0), c.initNetworkState_ = c.networkState, c.parentNode && c.parentNode.insertBefore(b, c), vjs.insertFirst(c, b), this.el_ = b, this.on("loadstart", this.onLoadStart), this.on("waiting", this.onWaiting), this.on(["canplay", "canplaythrough", "playing", "ended"], this.onWaitEnd), this.on("seeking", this.onSeeking), this.on("seeked", this.onSeeked), this.on("ended", this.onEnded), this.on("play", this.onPlay), this.on("firstplay", this.onFirstPlay), this.on("pause", this.onPause), this.on("progress", this.onProgress), this.on("durationchange", this.onDurationChange), this.on("fullscreenchange", this.onFullscreenChange), b
    }, vjs.Player.prototype.loadTech = function(a, b) {
        this.tech && this.unloadTech(), "Html5" !== a && this.tag && (vjs.Html5.disposeMediaElement(this.tag), this.tag = null), this.techName = a, this.isReady_ = !1;
        var c = function() {
                this.player_.triggerReady()
            },
            d = vjs.obj.merge({
                source: b,
                parentEl: this.el_
            }, this.options_[a.toLowerCase()]);
        b && (this.currentType_ = b.type, b.src == this.cache_.src && this.cache_.currentTime > 0 && (d.startTime = this.cache_.currentTime), this.cache_.src = b.src), this.tech = new window.videojs[a](this, d), this.tech.ready(c)
    }, vjs.Player.prototype.unloadTech = function() {
        this.isReady_ = !1, this.tech.dispose(), this.tech = !1
    }, vjs.Player.prototype.onLoadStart = function() {
        this.removeClass("vjs-ended"), this.error(null), this.paused() ? this.hasStarted(!1) : this.trigger("firstplay")
    }, vjs.Player.prototype.hasStarted_ = !1, vjs.Player.prototype.hasStarted = function(a) {
        return void 0 !== a ? (this.hasStarted_ !== a && (this.hasStarted_ = a, a ? (this.addClass("vjs-has-started"), this.trigger("firstplay")) : this.removeClass("vjs-has-started")), this) : this.hasStarted_
    }, vjs.Player.prototype.onLoadedMetaData, vjs.Player.prototype.onLoadedData, vjs.Player.prototype.onLoadedAllData, vjs.Player.prototype.onPlay = function() {
        this.removeClass("vjs-ended"), this.removeClass("vjs-paused"), this.addClass("vjs-playing"), this.hasStarted(!0)
    }, vjs.Player.prototype.onWaiting = function() {
        this.addClass("vjs-waiting")
    }, vjs.Player.prototype.onWaitEnd = function() {
        this.removeClass("vjs-waiting")
    }, vjs.Player.prototype.onSeeking = function() {
        this.addClass("vjs-seeking")
    }, vjs.Player.prototype.onSeeked = function() {
        this.removeClass("vjs-seeking")
    }, vjs.Player.prototype.onFirstPlay = function() {
        this.options_.starttime && this.currentTime(this.options_.starttime), this.addClass("vjs-has-started")
    }, vjs.Player.prototype.onPause = function() {
        this.removeClass("vjs-playing"), this.addClass("vjs-paused")
    }, vjs.Player.prototype.onTimeUpdate, vjs.Player.prototype.onProgress = function() {
        1 == this.bufferedPercent() && this.trigger("loadedalldata")
    }, vjs.Player.prototype.onEnded = function() {
        this.addClass("vjs-ended"), this.options_.loop ? (this.currentTime(0), this.play()) : this.paused() || this.pause()
    }, vjs.Player.prototype.onDurationChange = function() {
        var a = this.techGet("duration");
        a && (0 > a && (a = 1 / 0), this.duration(a), a === 1 / 0 ? this.addClass("vjs-live") : this.removeClass("vjs-live"))
    }, vjs.Player.prototype.onVolumeChange, vjs.Player.prototype.onFullscreenChange = function() {
        this.isFullscreen() ? this.addClass("vjs-fullscreen") : this.removeClass("vjs-fullscreen")
    }, vjs.Player.prototype.onError, vjs.Player.prototype.cache_, vjs.Player.prototype.getCache = function() {
        return this.cache_
    }, vjs.Player.prototype.techCall = function(a, b) {
        if (this.tech && !this.tech.isReady_) this.tech.ready(function() {
            this[a](b)
        });
        else try {
            this.tech[a](b)
        } catch (c) {
            throw vjs.log(c), c
        }
    }, vjs.Player.prototype.techGet = function(a) {
        if (this.tech && this.tech.isReady_) try {
            return this.tech[a]()
        } catch (b) {
            throw void 0 === this.tech[a] ? vjs.log("Video.js: " + a + " method not defined for " + this.techName + " playback technology.", b) : "TypeError" == b.name ? (vjs.log("Video.js: " + a + " unavailable on " + this.techName + " playback technology element.", b), this.tech.isReady_ = !1) : vjs.log(b), b
        }
    }, vjs.Player.prototype.play = function() {
        return this.techCall("play"), this
    }, vjs.Player.prototype.pause = function() {
        return this.techCall("pause"), this
    }, vjs.Player.prototype.paused = function() {
        return this.techGet("paused") === !1 ? !1 : !0
    }, vjs.Player.prototype.currentTime = function(a) {
        return void 0 !== a ? (this.techCall("setCurrentTime", a), this) : this.cache_.currentTime = this.techGet("currentTime") || 0
    }, vjs.Player.prototype.duration = function(a) {
        return void 0 !== a ? (this.cache_.duration = parseFloat(a), this) : (void 0 === this.cache_.duration && this.onDurationChange(), this.cache_.duration || 0)
    }, vjs.Player.prototype.remainingTime = function() {
        return this.duration() - this.currentTime()
    }, vjs.Player.prototype.buffered = function() {
        var a = this.techGet("buffered");
        return a && a.length || (a = vjs.createTimeRange(0, 0)), a
    }, vjs.Player.prototype.bufferedPercent = function() {
        var a, b, c = this.duration(),
            d = this.buffered(),
            e = 0;
        if (!c) return 0;
        for (var f = 0; f < d.length; f++) a = d.start(f), b = d.end(f), b > c && (b = c), e += b - a;
        return e / c
    }, vjs.Player.prototype.bufferedEnd = function() {
        var a = this.buffered(),
            b = this.duration(),
            c = a.end(a.length - 1);
        return c > b && (c = b), c
    }, vjs.Player.prototype.volume = function(a) {
        var b;
        return void 0 !== a ? (b = Math.max(0, Math.min(1, parseFloat(a))), this.cache_.volume = b, this.techCall("setVolume", b), vjs.setLocalStorage("volume", b), this) : (b = parseFloat(this.techGet("volume")), isNaN(b) ? 1 : b)
    }, vjs.Player.prototype.muted = function(a) {
        return void 0 !== a ? (this.techCall("setMuted", a), this) : this.techGet("muted") || !1
    }, vjs.Player.prototype.supportsFullScreen = function() {
        return this.techGet("supportsFullScreen") || !1
    }, vjs.Player.prototype.isFullscreen_ = !1, vjs.Player.prototype.isFullscreen = function(a) {
        return void 0 !== a ? (this.isFullscreen_ = !!a, this) : this.isFullscreen_
    }, vjs.Player.prototype.isFullScreen = function(a) {
        return vjs.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")'), this.isFullscreen(a)
    }, vjs.Player.prototype.requestFullscreen = function() {
        var a = vjs.browser.fullscreenAPI;
        return this.isFullscreen(!0), a ? (vjs.on(document, a.fullscreenchange, vjs.bind(this, function() {
            this.isFullscreen(document[a.fullscreenElement]), this.isFullscreen() === !1 && vjs.off(document, a.fullscreenchange, arguments.callee), this.trigger("fullscreenchange")
        })), this.el_[a.requestFullscreen]()) : this.tech.supportsFullScreen() ? this.techCall("enterFullScreen") : (this.enterFullWindow(), this.trigger("fullscreenchange")), this
    }, vjs.Player.prototype.requestFullScreen = function() {
        return vjs.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase "s")'), this.requestFullscreen()
    }, vjs.Player.prototype.exitFullscreen = function() {
        var a = vjs.browser.fullscreenAPI;
        return this.isFullscreen(!1), a ? document[a.exitFullscreen]() : this.tech.supportsFullScreen() ? this.techCall("exitFullScreen") : (this.exitFullWindow(), this.trigger("fullscreenchange")), this
    }, vjs.Player.prototype.cancelFullScreen = function() {
        return vjs.log.warn("player.cancelFullScreen() has been deprecated, use player.exitFullscreen()"), this.exitFullscreen()
    }, vjs.Player.prototype.enterFullWindow = function() {
        this.isFullWindow = !0, this.docOrigOverflow = document.documentElement.style.overflow, vjs.on(document, "keydown", vjs.bind(this, this.fullWindowOnEscKey)), document.documentElement.style.overflow = "hidden", vjs.addClass(document.body, "vjs-full-window"), this.trigger("enterFullWindow")
    }, vjs.Player.prototype.fullWindowOnEscKey = function(a) {
        27 === a.keyCode && (this.isFullscreen() === !0 ? this.exitFullscreen() : this.exitFullWindow())
    }, vjs.Player.prototype.exitFullWindow = function() {
        this.isFullWindow = !1, vjs.off(document, "keydown", this.fullWindowOnEscKey), document.documentElement.style.overflow = this.docOrigOverflow, vjs.removeClass(document.body, "vjs-full-window"), this.trigger("exitFullWindow")
    }, vjs.Player.prototype.selectSource = function(a) {
        for (var b = 0, c = this.options_.techOrder; b < c.length; b++) {
            var d = vjs.capitalize(c[b]),
                e = window.videojs[d];
            if (e) {
                if (e.isSupported())
                    for (var f = 0, g = a; f < g.length; f++) {
                        var h = g[f];
                        if (e.canPlaySource(h)) return {
                            source: h,
                            tech: d
                        }
                    }
            } else vjs.log.error('The "' + d + '" tech is undefined. Skipped browser support check for that tech.')
        }
        return !1
    }, vjs.Player.prototype.src = function(a) {
        return void 0 === a ? this.techGet("src") : (vjs.obj.isArray(a) ? this.sourceList_(a) : "string" == typeof a ? this.src({
            src: a
        }) : a instanceof Object && (a.type && !window.videojs[this.techName].canPlaySource(a) ? this.sourceList_([a]) : (this.cache_.src = a.src, this.currentType_ = a.type || "", this.ready(function() {
            window.videojs[this.techName].prototype.hasOwnProperty("setSource") ? this.techCall("setSource", a) : this.techCall("src", a.src), "auto" == this.options_.preload && this.load(), this.options_.autoplay && this.play()
        }))), this)
    }, vjs.Player.prototype.sourceList_ = function(a) {
        var b = this.selectSource(a);
        b ? b.tech === this.techName ? this.src(b.source) : this.loadTech(b.tech, b.source) : (this.setTimeout(function() {
            this.error({
                code: 4,
                message: this.localize(this.options().notSupportedMessage)
            })
        }, 0), this.triggerReady())
    }, vjs.Player.prototype.load = function() {
        return this.techCall("load"), this
    }, vjs.Player.prototype.currentSrc = function() {
        return this.techGet("currentSrc") || this.cache_.src || ""
    }, vjs.Player.prototype.currentType = function() {
        return this.currentType_ || ""
    }, vjs.Player.prototype.preload = function(a) {
        return void 0 !== a ? (this.techCall("setPreload", a), this.options_.preload = a, this) : this.techGet("preload")
    }, vjs.Player.prototype.autoplay = function(a) {
        return void 0 !== a ? (this.techCall("setAutoplay", a), this.options_.autoplay = a, this) : this.techGet("autoplay", a)
    }, vjs.Player.prototype.loop = function(a) {
        return void 0 !== a ? (this.techCall("setLoop", a), this.options_.loop = a, this) : this.techGet("loop")
    }, vjs.Player.prototype.poster_, vjs.Player.prototype.poster = function(a) {
        return void 0 === a ? this.poster_ : (a || (a = ""), this.poster_ = a, this.techCall("setPoster", a), this.trigger("posterchange"), this)
    }, vjs.Player.prototype.controls_, vjs.Player.prototype.controls = function(a) {
        return void 0 !== a ? (a = !!a, this.controls_ !== a && (this.controls_ = a, a ? (this.removeClass("vjs-controls-disabled"), this.addClass("vjs-controls-enabled"), this.trigger("controlsenabled")) : (this.removeClass("vjs-controls-enabled"), this.addClass("vjs-controls-disabled"), this.trigger("controlsdisabled"))), this) : this.controls_
    }, vjs.Player.prototype.usingNativeControls_, vjs.Player.prototype.usingNativeControls = function(a) {
        return void 0 !== a ? (a = !!a, this.usingNativeControls_ !== a && (this.usingNativeControls_ = a, a ? (this.addClass("vjs-using-native-controls"), this.trigger("usingnativecontrols")) : (this.removeClass("vjs-using-native-controls"), this.trigger("usingcustomcontrols"))), this) : this.usingNativeControls_
    }, vjs.Player.prototype.error_ = null, vjs.Player.prototype.error = function(a) {
        return void 0 === a ? this.error_ : null === a ? (this.error_ = a, this.removeClass("vjs-error"), this) : (this.error_ = a instanceof vjs.MediaError ? a : new vjs.MediaError(a), this.trigger("error"), this.addClass("vjs-error"), vjs.log.error("(CODE:" + this.error_.code + " " + vjs.MediaError.errorTypes[this.error_.code] + ")", this.error_.message, this.error_), this)
    }, vjs.Player.prototype.ended = function() {
        return this.techGet("ended")
    }, vjs.Player.prototype.seeking = function() {
        return this.techGet("seeking")
    }, vjs.Player.prototype.userActivity_ = !0, vjs.Player.prototype.reportUserActivity = function() {
        this.userActivity_ = !0
    }, vjs.Player.prototype.userActive_ = !0, vjs.Player.prototype.userActive = function(a) {
        return void 0 !== a ? (a = !!a, a !== this.userActive_ && (this.userActive_ = a, a ? (this.userActivity_ = !0, this.removeClass("vjs-user-inactive"), this.addClass("vjs-user-active"), this.trigger("useractive")) : (this.userActivity_ = !1, this.tech && this.tech.one("mousemove", function(a) {
            a.stopPropagation(), a.preventDefault()
        }), this.removeClass("vjs-user-active"), this.addClass("vjs-user-inactive"), this.trigger("userinactive"))), this) : this.userActive_;

    }, vjs.Player.prototype.listenForUserActivity = function() {
        var a, b, c, d, e, f, g, h, i;
        a = vjs.bind(this, this.reportUserActivity), b = function(b) {
            (b.screenX != h || b.screenY != i) && (h = b.screenX, i = b.screenY, a())
        }, c = function() {
            a(), this.clearInterval(d), d = this.setInterval(a, 250)
        }, e = function() {
            a(), this.clearInterval(d)
        }, this.on("mousedown", c), this.on("mousemove", b), this.on("mouseup", e), this.on("keydown", a), this.on("keyup", a), f = this.setInterval(function() {
            if (this.userActivity_) {
                this.userActivity_ = !1, this.userActive(!0), this.clearTimeout(g);
                var a = this.options().inactivityTimeout;
                a > 0 && (g = this.setTimeout(function() {
                    this.userActivity_ || this.userActive(!1)
                }, a))
            }
        }, 250)
    }, vjs.Player.prototype.playbackRate = function(a) {
        return void 0 !== a ? (this.techCall("setPlaybackRate", a), this) : this.tech && this.tech.featuresPlaybackRate ? this.techGet("playbackRate") : 1
    }, vjs.Player.prototype.isAudio_ = !1, vjs.Player.prototype.isAudio = function(a) {
        return void 0 !== a ? (this.isAudio_ = !!a, this) : this.isAudio_
    }, vjs.Player.prototype.networkState = function() {
        return this.techGet("networkState")
    }, vjs.Player.prototype.readyState = function() {
        return this.techGet("readyState")
    }, vjs.Player.prototype.textTracks = function() {
        return this.tech && this.tech.textTracks()
    }, vjs.Player.prototype.remoteTextTracks = function() {
        return this.tech && this.tech.remoteTextTracks()
    }, vjs.Player.prototype.addTextTrack = function(a, b, c) {
        return this.tech && this.tech.addTextTrack(a, b, c)
    }, vjs.Player.prototype.addRemoteTextTrack = function(a) {
        return this.tech && this.tech.addRemoteTextTrack(a)
    }, vjs.Player.prototype.removeRemoteTextTrack = function(a) {
        this.tech && this.tech.removeRemoteTextTrack(a)
    }, vjs.ControlBar = vjs.Component.extend(), vjs.ControlBar.prototype.options_ = {
        loadEvent: "play",
        children: {
            playToggle: {},
            currentTimeDisplay: {},
            timeDivider: {},
            durationDisplay: {},
            remainingTimeDisplay: {},
            liveDisplay: {},
            progressControl: {},
            fullscreenToggle: {},
            volumeControl: {},
            muteToggle: {},
            playbackRateMenuButton: {},
            subtitlesButton: {},
            captionsButton: {},
            chaptersButton: {}
        }
    }, vjs.ControlBar.prototype.createEl = function() {
        return vjs.createEl("div", {
            className: "vjs-control-bar"
        })
    }, vjs.LiveDisplay = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b)
        }
    }), vjs.LiveDisplay.prototype.createEl = function() {
        var a = vjs.Component.prototype.createEl.call(this, "div", {
            className: "vjs-live-controls vjs-control"
        });
        return this.contentEl_ = vjs.createEl("div", {
            className: "vjs-live-display",
            innerHTML: '<span class="vjs-control-text">' + this.localize("Stream Type") + "</span>" + this.localize("LIVE"),
            "aria-live": "off"
        }), a.appendChild(this.contentEl_), a
    }, vjs.PlayToggle = vjs.Button.extend({
        init: function(a, b) {
            vjs.Button.call(this, a, b), this.on(a, "play", this.onPlay), this.on(a, "pause", this.onPause)
        }
    }), vjs.PlayToggle.prototype.buttonText = "Play", vjs.PlayToggle.prototype.buildCSSClass = function() {
        return "vjs-play-control " + vjs.Button.prototype.buildCSSClass.call(this)
    }, vjs.PlayToggle.prototype.onClick = function() {
        this.player_.paused() ? this.player_.play() : this.player_.pause()
    }, vjs.PlayToggle.prototype.onPlay = function() {
        this.removeClass("vjs-paused"), this.addClass("vjs-playing"), this.el_.children[0].children[0].innerHTML = this.localize("Pause")
    }, vjs.PlayToggle.prototype.onPause = function() {
        this.removeClass("vjs-playing"), this.addClass("vjs-paused"), this.el_.children[0].children[0].innerHTML = this.localize("Play")
    }, vjs.CurrentTimeDisplay = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b), this.on(a, "timeupdate", this.updateContent)
        }
    }), vjs.CurrentTimeDisplay.prototype.createEl = function() {
        var a = vjs.Component.prototype.createEl.call(this, "div", {
            className: "vjs-current-time vjs-time-controls vjs-control"
        });
        return this.contentEl_ = vjs.createEl("div", {
            className: "vjs-current-time-display",
            innerHTML: '<span class="vjs-control-text">Current Time </span>0:00',
            "aria-live": "off"
        }), a.appendChild(this.contentEl_), a
    }, vjs.CurrentTimeDisplay.prototype.updateContent = function() {
        var a = this.player_.scrubbing ? this.player_.getCache().currentTime : this.player_.currentTime();
        this.contentEl_.innerHTML = '<span class="vjs-control-text">' + this.localize("Current Time") + "</span> " + vjs.formatTime(a, this.player_.duration())
    }, vjs.DurationDisplay = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b), this.on(a, "timeupdate", this.updateContent), this.on(a, "loadedmetadata", this.updateContent)
        }
    }), vjs.DurationDisplay.prototype.createEl = function() {
        var a = vjs.Component.prototype.createEl.call(this, "div", {
            className: "vjs-duration vjs-time-controls vjs-control"
        });
        return this.contentEl_ = vjs.createEl("div", {
            className: "vjs-duration-display",
            innerHTML: '<span class="vjs-control-text">' + this.localize("Duration Time") + "</span> 0:00",
            "aria-live": "off"
        }), a.appendChild(this.contentEl_), a
    }, vjs.DurationDisplay.prototype.updateContent = function() {
        var a = this.player_.duration();
        a && (this.contentEl_.innerHTML = '<span class="vjs-control-text">' + this.localize("Duration Time") + "</span> " + vjs.formatTime(a))
    }, vjs.TimeDivider = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b)
        }
    }), vjs.TimeDivider.prototype.createEl = function() {
        return vjs.Component.prototype.createEl.call(this, "div", {
            className: "vjs-time-divider",
            innerHTML: "<div><span>/</span></div>"
        })
    }, vjs.RemainingTimeDisplay = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b), this.on(a, "timeupdate", this.updateContent)
        }
    }), vjs.RemainingTimeDisplay.prototype.createEl = function() {
        var a = vjs.Component.prototype.createEl.call(this, "div", {
            className: "vjs-remaining-time vjs-time-controls vjs-control"
        });
        return this.contentEl_ = vjs.createEl("div", {
            className: "vjs-remaining-time-display",
            innerHTML: '<span class="vjs-control-text">' + this.localize("Remaining Time") + "</span> -0:00",
            "aria-live": "off"
        }), a.appendChild(this.contentEl_), a
    }, vjs.RemainingTimeDisplay.prototype.updateContent = function() {
        this.player_.duration() && (this.contentEl_.innerHTML = '<span class="vjs-control-text">' + this.localize("Remaining Time") + "</span> -" + vjs.formatTime(this.player_.remainingTime()))
    }, vjs.FullscreenToggle = vjs.Button.extend({
        init: function(a, b) {
            vjs.Button.call(this, a, b)
        }
    }), vjs.FullscreenToggle.prototype.buttonText = "Fullscreen", vjs.FullscreenToggle.prototype.buildCSSClass = function() {
        return "vjs-fullscreen-control " + vjs.Button.prototype.buildCSSClass.call(this)
    }, vjs.FullscreenToggle.prototype.onClick = function() {
        this.player_.isFullscreen() ? (this.player_.exitFullscreen(), this.controlText_.innerHTML = this.localize("Fullscreen")) : (this.player_.requestFullscreen(), this.controlText_.innerHTML = this.localize("Non-Fullscreen"))
    }, vjs.ProgressControl = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b)
        }
    }), vjs.ProgressControl.prototype.options_ = {
        children: {
            seekBar: {}
        }
    }, vjs.ProgressControl.prototype.createEl = function() {
        return vjs.Component.prototype.createEl.call(this, "div", {
            className: "vjs-progress-control vjs-control"
        })
    }, vjs.SeekBar = vjs.Slider.extend({
        init: function(a, b) {
            vjs.Slider.call(this, a, b), this.on(a, "timeupdate", this.updateARIAAttributes), a.ready(vjs.bind(this, this.updateARIAAttributes))
        }
    }), vjs.SeekBar.prototype.options_ = {
        children: {
            loadProgressBar: {},
            playProgressBar: {},
            seekHandle: {}
        },
        barName: "playProgressBar",
        handleName: "seekHandle"
    }, vjs.SeekBar.prototype.playerEvent = "timeupdate", vjs.SeekBar.prototype.createEl = function() {
        return vjs.Slider.prototype.createEl.call(this, "div", {
            className: "vjs-progress-holder",
            "aria-label": "video progress bar"
        })
    }, vjs.SeekBar.prototype.updateARIAAttributes = function() {
        var a = this.player_.scrubbing ? this.player_.getCache().currentTime : this.player_.currentTime();
        this.el_.setAttribute("aria-valuenow", vjs.round(100 * this.getPercent(), 2)), this.el_.setAttribute("aria-valuetext", vjs.formatTime(a, this.player_.duration()))
    }, vjs.SeekBar.prototype.getPercent = function() {
        return this.player_.currentTime() / this.player_.duration()
    }, vjs.SeekBar.prototype.onMouseDown = function(a) {
        vjs.Slider.prototype.onMouseDown.call(this, a), this.player_.scrubbing = !0, this.player_.addClass("vjs-scrubbing"), this.videoWasPlaying = !this.player_.paused(), this.player_.pause()
    }, vjs.SeekBar.prototype.onMouseMove = function(a) {
        var b = this.calculateDistance(a) * this.player_.duration();
        b == this.player_.duration() && (b -= .1), this.player_.currentTime(b)
    }, vjs.SeekBar.prototype.onMouseUp = function(a) {
        vjs.Slider.prototype.onMouseUp.call(this, a), this.player_.scrubbing = !1, this.player_.removeClass("vjs-scrubbing"), this.videoWasPlaying && this.player_.play()
    }, vjs.SeekBar.prototype.stepForward = function() {
        this.player_.currentTime(this.player_.currentTime() + 5)
    }, vjs.SeekBar.prototype.stepBack = function() {
        this.player_.currentTime(this.player_.currentTime() - 5)
    }, vjs.LoadProgressBar = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b), this.on(a, "progress", this.update)
        }
    }), vjs.LoadProgressBar.prototype.createEl = function() {
        return vjs.Component.prototype.createEl.call(this, "div", {
            className: "vjs-load-progress",
            innerHTML: '<span class="vjs-control-text"><span>' + this.localize("Loaded") + "</span>: 0%</span>"
        })
    }, vjs.LoadProgressBar.prototype.update = function() {
        var a, b, c, d, e = this.player_.buffered(),
            f = this.player_.duration(),
            g = this.player_.bufferedEnd(),
            h = this.el_.children,
            i = function(a, b) {
                var c = a / b || 0;
                return 100 * c + "%"
            };
        for (this.el_.style.width = i(g, f), a = 0; a < e.length; a++) b = e.start(a), c = e.end(a), d = h[a], d || (d = this.el_.appendChild(vjs.createEl())), d.style.left = i(b, g), d.style.width = i(c - b, g);
        for (a = h.length; a > e.length; a--) this.el_.removeChild(h[a - 1])
    }, vjs.PlayProgressBar = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b)
        }
    }), vjs.PlayProgressBar.prototype.createEl = function() {
        return vjs.Component.prototype.createEl.call(this, "div", {
            className: "vjs-play-progress",
            innerHTML: '<span class="vjs-control-text"><span>' + this.localize("Progress") + "</span>: 0%</span>"
        })
    }, vjs.SeekHandle = vjs.SliderHandle.extend({
        init: function(a, b) {
            vjs.SliderHandle.call(this, a, b), this.on(a, "timeupdate", this.updateContent)
        }
    }), vjs.SeekHandle.prototype.defaultValue = "00:00", vjs.SeekHandle.prototype.createEl = function() {
        return vjs.SliderHandle.prototype.createEl.call(this, "div", {
            className: "vjs-seek-handle",
            "aria-live": "off"
        })
    }, vjs.SeekHandle.prototype.updateContent = function() {
        var a = this.player_.scrubbing ? this.player_.getCache().currentTime : this.player_.currentTime();
        this.el_.innerHTML = '<span class="vjs-control-text">' + vjs.formatTime(a, this.player_.duration()) + "</span>"
    }, vjs.VolumeControl = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b), a.tech && a.tech.featuresVolumeControl === !1 && this.addClass("vjs-hidden"), this.on(a, "loadstart", function() {
                a.tech.featuresVolumeControl === !1 ? this.addClass("vjs-hidden") : this.removeClass("vjs-hidden")
            })
        }
    }), vjs.VolumeControl.prototype.options_ = {
        children: {
            volumeBar: {}
        }
    }, vjs.VolumeControl.prototype.createEl = function() {
        return vjs.Component.prototype.createEl.call(this, "div", {
            className: "vjs-volume-control vjs-control"
        })
    }, vjs.VolumeBar = vjs.Slider.extend({
        init: function(a, b) {
            vjs.Slider.call(this, a, b), this.on(a, "volumechange", this.updateARIAAttributes), a.ready(vjs.bind(this, this.updateARIAAttributes))
        }
    }), vjs.VolumeBar.prototype.updateARIAAttributes = function() {
        this.el_.setAttribute("aria-valuenow", vjs.round(100 * this.player_.volume(), 2)), this.el_.setAttribute("aria-valuetext", vjs.round(100 * this.player_.volume(), 2) + "%")
    }, vjs.VolumeBar.prototype.options_ = {
        children: {
            volumeLevel: {},
            volumeHandle: {}
        },
        barName: "volumeLevel",
        handleName: "volumeHandle"
    }, vjs.VolumeBar.prototype.playerEvent = "volumechange", vjs.VolumeBar.prototype.createEl = function() {
        return vjs.Slider.prototype.createEl.call(this, "div", {
            className: "vjs-volume-bar",
            "aria-label": "volume level"
        })
    }, vjs.VolumeBar.prototype.onMouseMove = function(a) {
        this.player_.muted() && this.player_.muted(!1), this.player_.volume(this.calculateDistance(a))
    }, vjs.VolumeBar.prototype.getPercent = function() {
        return this.player_.muted() ? 0 : this.player_.volume()
    }, vjs.VolumeBar.prototype.stepForward = function() {
        this.player_.volume(this.player_.volume() + .1)
    }, vjs.VolumeBar.prototype.stepBack = function() {
        this.player_.volume(this.player_.volume() - .1)
    }, vjs.VolumeLevel = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b)
        }
    }), vjs.VolumeLevel.prototype.createEl = function() {
        return vjs.Component.prototype.createEl.call(this, "div", {
            className: "vjs-volume-level",
            innerHTML: '<span class="vjs-control-text"></span>'
        })
    }, vjs.VolumeHandle = vjs.SliderHandle.extend(), vjs.VolumeHandle.prototype.defaultValue = "00:00", vjs.VolumeHandle.prototype.createEl = function() {
        return vjs.SliderHandle.prototype.createEl.call(this, "div", {
            className: "vjs-volume-handle"
        })
    }, vjs.MuteToggle = vjs.Button.extend({
        init: function(a, b) {
            vjs.Button.call(this, a, b), this.on(a, "volumechange", this.update), a.tech && a.tech.featuresVolumeControl === !1 && this.addClass("vjs-hidden"), this.on(a, "loadstart", function() {
                a.tech.featuresVolumeControl === !1 ? this.addClass("vjs-hidden") : this.removeClass("vjs-hidden")
            })
        }
    }), vjs.MuteToggle.prototype.createEl = function() {
        return vjs.Button.prototype.createEl.call(this, "div", {
            className: "vjs-mute-control vjs-control",
            innerHTML: '<div><span class="vjs-control-text">' + this.localize("Mute") + "</span></div>"
        })
    }, vjs.MuteToggle.prototype.onClick = function() {
        this.player_.muted(this.player_.muted() ? !1 : !0)
    }, vjs.MuteToggle.prototype.update = function() {
        var a = this.player_.volume(),
            b = 3;
        0 === a || this.player_.muted() ? b = 0 : .33 > a ? b = 1 : .67 > a && (b = 2), this.player_.muted() ? this.el_.children[0].children[0].innerHTML != this.localize("Unmute") && (this.el_.children[0].children[0].innerHTML = this.localize("Unmute")) : this.el_.children[0].children[0].innerHTML != this.localize("Mute") && (this.el_.children[0].children[0].innerHTML = this.localize("Mute"));
        for (var c = 0; 4 > c; c++) vjs.removeClass(this.el_, "vjs-vol-" + c);
        vjs.addClass(this.el_, "vjs-vol-" + b)
    }, vjs.VolumeMenuButton = vjs.MenuButton.extend({
        init: function(a, b) {
            vjs.MenuButton.call(this, a, b), this.on(a, "volumechange", this.volumeUpdate), a.tech && a.tech.featuresVolumeControl === !1 && this.addClass("vjs-hidden"), this.on(a, "loadstart", function() {
                a.tech.featuresVolumeControl === !1 ? this.addClass("vjs-hidden") : this.removeClass("vjs-hidden")
            }), this.addClass("vjs-menu-button")
        }
    }), vjs.VolumeMenuButton.prototype.createMenu = function() {
        var a = new vjs.Menu(this.player_, {
                contentElType: "div"
            }),
            b = new vjs.VolumeBar(this.player_, this.options_.volumeBar);
        return b.on("focus", function() {
            a.lockShowing()
        }), b.on("blur", function() {
            a.unlockShowing()
        }), a.addChild(b), a
    }, vjs.VolumeMenuButton.prototype.onClick = function() {
        vjs.MuteToggle.prototype.onClick.call(this), vjs.MenuButton.prototype.onClick.call(this)
    }, vjs.VolumeMenuButton.prototype.createEl = function() {
        return vjs.Button.prototype.createEl.call(this, "div", {
            className: "vjs-volume-menu-button vjs-menu-button vjs-control",
            innerHTML: '<div><span class="vjs-control-text">' + this.localize("Mute") + "</span></div>"
        })
    }, vjs.VolumeMenuButton.prototype.volumeUpdate = vjs.MuteToggle.prototype.update, vjs.PlaybackRateMenuButton = vjs.MenuButton.extend({
        init: function(a, b) {
            vjs.MenuButton.call(this, a, b), this.updateVisibility(), this.updateLabel(), this.on(a, "loadstart", this.updateVisibility), this.on(a, "ratechange", this.updateLabel)
        }
    }), vjs.PlaybackRateMenuButton.prototype.buttonText = "Playback Rate", vjs.PlaybackRateMenuButton.prototype.className = "vjs-playback-rate", vjs.PlaybackRateMenuButton.prototype.createEl = function() {
        var a = vjs.MenuButton.prototype.createEl.call(this);
        return this.labelEl_ = vjs.createEl("div", {
            className: "vjs-playback-rate-value",
            innerHTML: 1
        }), a.appendChild(this.labelEl_), a
    }, vjs.PlaybackRateMenuButton.prototype.createMenu = function() {
        var a = new vjs.Menu(this.player()),
            b = this.player().options().playbackRates;
        if (b)
            for (var c = b.length - 1; c >= 0; c--) a.addChild(new vjs.PlaybackRateMenuItem(this.player(), {
                rate: b[c] + "x"
            }));
        return a
    }, vjs.PlaybackRateMenuButton.prototype.updateARIAAttributes = function() {
        this.el().setAttribute("aria-valuenow", this.player().playbackRate())
    }, vjs.PlaybackRateMenuButton.prototype.onClick = function() {
        for (var a = this.player().playbackRate(), b = this.player().options().playbackRates, c = b[0], d = 0; d < b.length; d++)
            if (b[d] > a) {
                c = b[d];
                break
            }
        this.player().playbackRate(c)
    }, vjs.PlaybackRateMenuButton.prototype.playbackRateSupported = function() {
        return this.player().tech && this.player().tech.featuresPlaybackRate && this.player().options().playbackRates && this.player().options().playbackRates.length > 0
    }, vjs.PlaybackRateMenuButton.prototype.updateVisibility = function() {
        this.playbackRateSupported() ? this.removeClass("vjs-hidden") : this.addClass("vjs-hidden")
    }, vjs.PlaybackRateMenuButton.prototype.updateLabel = function() {
        this.playbackRateSupported() && (this.labelEl_.innerHTML = this.player().playbackRate() + "x")
    }, vjs.PlaybackRateMenuItem = vjs.MenuItem.extend({
        contentElType: "button",
        init: function(a, b) {
            var c = this.label = b.rate,
                d = this.rate = parseFloat(c, 10);
            b.label = c, b.selected = 1 === d, vjs.MenuItem.call(this, a, b), this.on(a, "ratechange", this.update)
        }
    }), vjs.PlaybackRateMenuItem.prototype.onClick = function() {
        vjs.MenuItem.prototype.onClick.call(this), this.player().playbackRate(this.rate)
    }, vjs.PlaybackRateMenuItem.prototype.update = function() {
        this.selected(this.player().playbackRate() == this.rate)
    }, vjs.PosterImage = vjs.Button.extend({
        init: function(a, b) {
            vjs.Button.call(this, a, b), this.update(), a.on("posterchange", vjs.bind(this, this.update))
        }
    }), vjs.PosterImage.prototype.dispose = function() {
        this.player().off("posterchange", this.update), vjs.Button.prototype.dispose.call(this)
    }, vjs.PosterImage.prototype.createEl = function() {
        var a = vjs.createEl("div", {
            className: "vjs-poster",
            tabIndex: -1
        });
        return vjs.BACKGROUND_SIZE_SUPPORTED || (this.fallbackImg_ = vjs.createEl("img"), a.appendChild(this.fallbackImg_)), a
    }, vjs.PosterImage.prototype.update = function() {
        var a = this.player().poster();
        this.setSrc(a), a ? this.show() : this.hide()
    }, vjs.PosterImage.prototype.setSrc = function(a) {
        var b;
        this.fallbackImg_ ? this.fallbackImg_.src = a : (b = "", a && (b = 'url("' + a + '")'), this.el_.style.backgroundImage = b)
    }, vjs.PosterImage.prototype.onClick = function() {
        this.player_.play()
    }, vjs.LoadingSpinner = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b)
        }
    }), vjs.LoadingSpinner.prototype.createEl = function() {
        return vjs.Component.prototype.createEl.call(this, "div", {
            className: "vjs-loading-spinner"
        })
    }, vjs.BigPlayButton = vjs.Button.extend(), vjs.BigPlayButton.prototype.createEl = function() {
        return vjs.Button.prototype.createEl.call(this, "div", {
            className: "vjs-big-play-button",
            innerHTML: '<span aria-hidden="true"></span>',
            "aria-label": "play video"
        })
    }, vjs.BigPlayButton.prototype.onClick = function() {
        this.player_.play()
    }, vjs.ErrorDisplay = vjs.Component.extend({
        init: function(a, b) {
            vjs.Component.call(this, a, b), this.update(), this.on(a, "error", this.update)
        }
    }), vjs.ErrorDisplay.prototype.createEl = function() {
        var a = vjs.Component.prototype.createEl.call(this, "div", {
            className: "vjs-error-display"
        });
        return this.contentEl_ = vjs.createEl("div"), a.appendChild(this.contentEl_), a
    }, vjs.ErrorDisplay.prototype.update = function() {
        this.player().error() && (this.contentEl_.innerHTML = this.localize(this.player().error().message))
    }, function() {
        var a;
        vjs.MediaTechController = vjs.Component.extend({
            init: function(a, b, c) {
                b = b || {}, b.reportTouchActivity = !1, vjs.Component.call(this, a, b, c), this.featuresProgressEvents || this.manualProgressOn(), this.featuresTimeupdateEvents || this.manualTimeUpdatesOn(), this.initControlsListeners(), this.featuresNativeTextTracks || this.emulateTextTracks(), this.initTextTrackListeners()
            }
        }), vjs.MediaTechController.prototype.initControlsListeners = function() {
            var a, b;
            a = this.player(), b = function() {
                a.controls() && !a.usingNativeControls() && this.addControlsListeners()
            }, this.ready(b), this.on(a, "controlsenabled", b), this.on(a, "controlsdisabled", this.removeControlsListeners), this.ready(function() {
                this.networkState && this.networkState() > 0 && this.player().trigger("loadstart")
            })
        }, vjs.MediaTechController.prototype.addControlsListeners = function() {
            var a;
            this.on("mousedown", this.onClick), this.on("touchstart", function() {
                a = this.player_.userActive()
            }), this.on("touchmove", function() {
                a && this.player().reportUserActivity()
            }), this.on("touchend", function(a) {
                a.preventDefault()
            }), this.emitTapEvents(), this.on("tap", this.onTap)
        }, vjs.MediaTechController.prototype.removeControlsListeners = function() {
            this.off("tap"), this.off("touchstart"), this.off("touchmove"), this.off("touchleave"), this.off("touchcancel"), this.off("touchend"), this.off("click"), this.off("mousedown")
        }, vjs.MediaTechController.prototype.onClick = function(a) {
            0 === a.button && this.player().controls() && (this.player().paused() ? this.player().play() : this.player().pause())
        }, vjs.MediaTechController.prototype.onTap = function() {
            this.player().userActive(!this.player().userActive())
        }, vjs.MediaTechController.prototype.manualProgressOn = function() {
            this.manualProgress = !0, this.trackProgress()
        }, vjs.MediaTechController.prototype.manualProgressOff = function() {
            this.manualProgress = !1, this.stopTrackingProgress()
        }, vjs.MediaTechController.prototype.trackProgress = function() {
            this.progressInterval = this.setInterval(function() {
                var a = this.player().bufferedPercent();
                this.bufferedPercent_ != a && this.player().trigger("progress"), this.bufferedPercent_ = a, 1 === a && this.stopTrackingProgress()
            }, 500)
        }, vjs.MediaTechController.prototype.stopTrackingProgress = function() {
            this.clearInterval(this.progressInterval)
        }, vjs.MediaTechController.prototype.manualTimeUpdatesOn = function() {
            var a = this.player_;
            this.manualTimeUpdates = !0, this.on(a, "play", this.trackCurrentTime), this.on(a, "pause", this.stopTrackingCurrentTime), this.one("timeupdate", function() {
                this.featuresTimeupdateEvents = !0, this.manualTimeUpdatesOff()
            })
        }, vjs.MediaTechController.prototype.manualTimeUpdatesOff = function() {
            var a = this.player_;
            this.manualTimeUpdates = !1, this.stopTrackingCurrentTime(), this.off(a, "play", this.trackCurrentTime), this.off(a, "pause", this.stopTrackingCurrentTime)
        }, vjs.MediaTechController.prototype.trackCurrentTime = function() {
            this.currentTimeInterval && this.stopTrackingCurrentTime(), this.currentTimeInterval = this.setInterval(function() {
                this.player().trigger("timeupdate")
            }, 250)
        }, vjs.MediaTechController.prototype.stopTrackingCurrentTime = function() {
            this.clearInterval(this.currentTimeInterval), this.player().trigger("timeupdate")
        }, vjs.MediaTechController.prototype.dispose = function() {
            this.manualProgress && this.manualProgressOff(), this.manualTimeUpdates && this.manualTimeUpdatesOff(), vjs.Component.prototype.dispose.call(this)
        }, vjs.MediaTechController.prototype.setCurrentTime = function() {
            this.manualTimeUpdates && this.player().trigger("timeupdate")
        }, vjs.MediaTechController.prototype.initTextTrackListeners = function() {
            var a, b = this.player_,
                c = function() {
                    var a = b.getChild("textTrackDisplay");
                    a && a.updateDisplay()
                };
            a = this.textTracks(), a && (a.addEventListener("removetrack", c), a.addEventListener("addtrack", c), this.on("dispose", vjs.bind(this, function() {
                a.removeEventListener("removetrack", c), a.removeEventListener("addtrack", c)
            })))
        }, vjs.MediaTechController.prototype.emulateTextTracks = function() {
            var a, b, c, d = this.player_;
            window.WebVTT || (c = document.createElement("script"), c.src = d.options()["vtt.js"] || "../node_modules/vtt.js/dist/vtt.js", d.el().appendChild(c), window.WebVTT = !0), b = this.textTracks(), b && (a = function() {
                var a, b, c;
                for (c = d.getChild("textTrackDisplay"), c.updateDisplay(), a = 0; a < this.length; a++) b = this[a], b.removeEventListener("cuechange", vjs.bind(c, c.updateDisplay)), "showing" === b.mode && b.addEventListener("cuechange", vjs.bind(c, c.updateDisplay))
            }, b.addEventListener("change", a), this.on("dispose", vjs.bind(this, function() {
                b.removeEventListener("change", a)
            })))
        }, vjs.MediaTechController.prototype.textTracks_, vjs.MediaTechController.prototype.textTracks = function() {
            return this.player_.textTracks_ = this.player_.textTracks_ || new vjs.TextTrackList, this.player_.textTracks_
        }, vjs.MediaTechController.prototype.remoteTextTracks = function() {
            return this.player_.remoteTextTracks_ = this.player_.remoteTextTracks_ || new vjs.TextTrackList, this.player_.remoteTextTracks_
        }, a = function(a, b, c, d, e) {
            var f, g = a.textTracks();
            return e = e || {}, e.kind = b, c && (e.label = c), d && (e.language = d), e.player = a.player_, f = new vjs.TextTrack(e), g.addTrack_(f), f
        }, vjs.MediaTechController.prototype.addTextTrack = function(b, c, d) {
            if (!b) throw new Error("TextTrack kind is required but was not provided");
            return a(this, b, c, d)
        }, vjs.MediaTechController.prototype.addRemoteTextTrack = function(b) {
            var c = a(this, b.kind, b.label, b.language, b);
            return this.remoteTextTracks().addTrack_(c), {
                track: c
            }
        }, vjs.MediaTechController.prototype.removeRemoteTextTrack = function(a) {
            this.textTracks().removeTrack_(a), this.remoteTextTracks().removeTrack_(a)
        }, vjs.MediaTechController.prototype.setPoster = function() {}, vjs.MediaTechController.prototype.featuresVolumeControl = !0, vjs.MediaTechController.prototype.featuresFullscreenResize = !1, vjs.MediaTechController.prototype.featuresPlaybackRate = !1, vjs.MediaTechController.prototype.featuresProgressEvents = !1, vjs.MediaTechController.prototype.featuresTimeupdateEvents = !1, vjs.MediaTechController.prototype.featuresNativeTextTracks = !1, vjs.MediaTechController.withSourceHandlers = function(a) {
            a.registerSourceHandler = function(b, c) {
                var d = a.sourceHandlers;
                d || (d = a.sourceHandlers = []), void 0 === c && (c = d.length), d.splice(c, 0, b)
            }, a.selectSourceHandler = function(b) {
                for (var c, d = a.sourceHandlers || [], e = 0; e < d.length; e++)
                    if (c = d[e].canHandleSource(b)) return d[e];
                return null
            }, a.canPlaySource = function(b) {
                var c = a.selectSourceHandler(b);
                return c ? c.canHandleSource(b) : ""
            }, a.prototype.setSource = function(b) {
                var c = a.selectSourceHandler(b);
                return c || (a.nativeSourceHandler ? c = a.nativeSourceHandler : vjs.log.error("No source hander found for the current source.")), this.disposeSourceHandler(), this.off("dispose", this.disposeSourceHandler), this.currentSource_ = b, this.sourceHandler_ = c.handleSource(b, this), this.on("dispose", this.disposeSourceHandler), this
            }, a.prototype.disposeSourceHandler = function() {
                this.sourceHandler_ && this.sourceHandler_.dispose && this.sourceHandler_.dispose()
            }
        }, vjs.media = {}
    }(), vjs.Html5 = vjs.MediaTechController.extend({
        init: function(a, b, c) {
            var d, e, f, g, h, i;
            (b.nativeCaptions === !1 || b.nativeTextTracks === !1) && (this.featuresNativeTextTracks = !1), vjs.MediaTechController.call(this, a, b, c), this.setupTriggers();
            var j = b.source;
            if (j && (this.el_.currentSrc !== j.src || a.tag && 3 === a.tag.initNetworkState_) && this.setSource(j), this.el_.hasChildNodes()) {
                for (d = this.el_.childNodes, e = d.length, i = []; e--;) g = d[e], h = g.nodeName.toLowerCase(), "track" === h && (this.featuresNativeTextTracks ? this.remoteTextTracks().addTrack_(g.track) : i.push(g));
                for (f = 0; f < i.length; f++) this.el_.removeChild(i[f])
            }
            this.featuresNativeTextTracks && this.on("loadstart", vjs.bind(this, this.hideCaptions)), vjs.TOUCH_ENABLED && a.options().nativeControlsForTouch === !0 && this.useNativeControls(), a.ready(function() {
                this.src() && this.tag && this.options_.autoplay && this.paused() && (delete this.tag.poster, this.play())
            }), this.triggerReady()
        }
    }), vjs.Html5.prototype.dispose = function() {
        vjs.Html5.disposeMediaElement(this.el_), vjs.MediaTechController.prototype.dispose.call(this)
    }, vjs.Html5.prototype.createEl = function() {
        var a, b, c, d, e, f = this.player_,
            g = f.tag;
        if (!g || this.movingMediaElementInDOM === !1) {
            if (g ? (e = g.cloneNode(!1), vjs.Html5.disposeMediaElement(g), g = e, f.tag = null) : (g = vjs.createEl("video"), d = videojs.util.mergeOptions({}, f.tagAttributes), vjs.TOUCH_ENABLED && f.options().nativeControlsForTouch === !0 || delete d.controls, vjs.setElementAttributes(g, vjs.obj.merge(d, {
                    id: f.id() + "_html5_api",
                    "class": "vjs-tech"
                }))), g.player = f, f.options_.tracks)
                for (c = 0; c < f.options_.tracks.length; c++) a = f.options_.tracks[c], b = document.createElement("track"), b.kind = a.kind, b.label = a.label, b.srclang = a.srclang, b.src = a.src, "default" in a && b.setAttribute("default", "default"), g.appendChild(b);
            vjs.insertFirst(g, f.el())
        }
        var h = ["autoplay", "preload", "loop", "muted"];
        for (c = h.length - 1; c >= 0; c--) {
            var i = h[c],
                j = {};
            "undefined" != typeof f.options_[i] && (j[i] = f.options_[i]), vjs.setElementAttributes(g, j)
        }
        return g
    }, vjs.Html5.prototype.hideCaptions = function() {
        for (var a, b = this.el_.querySelectorAll("track"), c = b.length, d = {
                captions: 1,
                subtitles: 1
            }; c--;) a = b[c].track, a && a.kind in d && !b[c]["default"] && (a.mode = "disabled")
    }, vjs.Html5.prototype.setupTriggers = function() {
        for (var a = vjs.Html5.Events.length - 1; a >= 0; a--) this.on(vjs.Html5.Events[a], this.eventHandler)
    }, vjs.Html5.prototype.eventHandler = function(a) {
        "error" == a.type && this.error() ? this.player().error(this.error().code) : (a.bubbles = !1, this.player().trigger(a))
    }, vjs.Html5.prototype.useNativeControls = function() {
        var a, b, c, d, e;
        a = this, b = this.player(), a.setControls(b.controls()), c = function() {
            a.setControls(!0)
        }, d = function() {
            a.setControls(!1)
        }, b.on("controlsenabled", c), b.on("controlsdisabled", d), e = function() {
            b.off("controlsenabled", c), b.off("controlsdisabled", d)
        }, a.on("dispose", e), b.on("usingcustomcontrols", e), b.usingNativeControls(!0)
    }, vjs.Html5.prototype.play = function() {
        this.el_.play()
    }, vjs.Html5.prototype.pause = function() {
        this.el_.pause()
    }, vjs.Html5.prototype.paused = function() {
        return this.el_.paused
    }, vjs.Html5.prototype.currentTime = function() {
        return this.el_.currentTime
    }, vjs.Html5.prototype.setCurrentTime = function(a) {
        try {
            this.el_.currentTime = a
        } catch (b) {
            vjs.log(b, "Video is not ready. (Video.js)")
        }
    }, vjs.Html5.prototype.duration = function() {
        return this.el_.duration || 0
    }, vjs.Html5.prototype.buffered = function() {
        return this.el_.buffered
    }, vjs.Html5.prototype.volume = function() {
        return this.el_.volume
    }, vjs.Html5.prototype.setVolume = function(a) {
        this.el_.volume = a
    }, vjs.Html5.prototype.muted = function() {
        return this.el_.muted
    }, vjs.Html5.prototype.setMuted = function(a) {
        this.el_.muted = a
    }, vjs.Html5.prototype.width = function() {
        return this.el_.offsetWidth
    }, vjs.Html5.prototype.height = function() {
        return this.el_.offsetHeight
    }, vjs.Html5.prototype.supportsFullScreen = function() {
        return "function" != typeof this.el_.webkitEnterFullScreen || !/Android/.test(vjs.USER_AGENT) && /Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT) ? !1 : !0
    }, vjs.Html5.prototype.enterFullScreen = function() {
        var a = this.el_;
        "webkitDisplayingFullscreen" in a && this.one("webkitbeginfullscreen", function() {
            this.player_.isFullscreen(!0), this.one("webkitendfullscreen", function() {
                this.player_.isFullscreen(!1), this.player_.trigger("fullscreenchange")
            }), this.player_.trigger("fullscreenchange")
        }), a.paused && a.networkState <= a.HAVE_METADATA ? (this.el_.play(), this.setTimeout(function() {
            a.pause(), a.webkitEnterFullScreen()
        }, 0)) : a.webkitEnterFullScreen()
    }, vjs.Html5.prototype.exitFullScreen = function() {
        this.el_.webkitExitFullScreen()
    }, vjs.Html5.prototype.src = function(a) {
        return void 0 === a ? this.el_.src : void this.setSrc(a)
    }, vjs.Html5.prototype.setSrc = function(a) {
        this.el_.src = a
    }, vjs.Html5.prototype.load = function() {
        this.el_.load()
    }, vjs.Html5.prototype.currentSrc = function() {
        return this.el_.currentSrc
    }, vjs.Html5.prototype.poster = function() {
        return this.el_.poster
    }, vjs.Html5.prototype.setPoster = function(a) {
        this.el_.poster = a
    }, vjs.Html5.prototype.preload = function() {
        return this.el_.preload
    }, vjs.Html5.prototype.setPreload = function(a) {
        this.el_.preload = a
    }, vjs.Html5.prototype.autoplay = function() {
        return this.el_.autoplay
    }, vjs.Html5.prototype.setAutoplay = function(a) {
        this.el_.autoplay = a
    }, vjs.Html5.prototype.controls = function() {
        return this.el_.controls
    }, vjs.Html5.prototype.setControls = function(a) {
        this.el_.controls = !!a
    }, vjs.Html5.prototype.loop = function() {
        return this.el_.loop
    }, vjs.Html5.prototype.setLoop = function(a) {
        this.el_.loop = a
    }, vjs.Html5.prototype.error = function() {
        return this.el_.error
    }, vjs.Html5.prototype.seeking = function() {
        return this.el_.seeking
    }, vjs.Html5.prototype.ended = function() {
        return this.el_.ended
    }, vjs.Html5.prototype.defaultMuted = function() {
        return this.el_.defaultMuted
    }, vjs.Html5.prototype.playbackRate = function() {
        return this.el_.playbackRate
    }, vjs.Html5.prototype.setPlaybackRate = function(a) {
        this.el_.playbackRate = a
    }, vjs.Html5.prototype.networkState = function() {
        return this.el_.networkState
    }, vjs.Html5.prototype.readyState = function() {
        return this.el_.readyState
    }, vjs.Html5.prototype.textTracks = function() {
        return this.featuresNativeTextTracks ? this.el_.textTracks : vjs.MediaTechController.prototype.textTracks.call(this)
    }, vjs.Html5.prototype.addTextTrack = function(a, b, c) {
        return this.featuresNativeTextTracks ? this.el_.addTextTrack(a, b, c) : vjs.MediaTechController.prototype.addTextTrack.call(this, a, b, c)
    }, vjs.Html5.prototype.addRemoteTextTrack = function(a) {
        if (!this.featuresNativeTextTracks) return vjs.MediaTechController.prototype.addRemoteTextTrack.call(this, a);
        var b = document.createElement("track");
        return a = a || {}, a.kind && (b.kind = a.kind), a.label && (b.label = a.label), (a.language || a.srclang) && (b.srclang = a.language || a.srclang), a["default"] && (b["default"] = a["default"]), a.id && (b.id = a.id), a.src && (b.src = a.src), this.el().appendChild(b), b.track.mode = "metadata" === b.track.kind ? "hidden" : "disabled", b.onload = function() {
            var a = b.track;
            b.readyState >= 2 && ("metadata" === a.kind && "hidden" !== a.mode ? a.mode = "hidden" : "metadata" !== a.kind && "disabled" !== a.mode && (a.mode = "disabled"), b.onload = null)
        }, this.remoteTextTracks().addTrack_(b.track), b
    }, vjs.Html5.prototype.removeRemoteTextTrack = function(a) {
        if (!this.featuresNativeTextTracks) return vjs.MediaTechController.prototype.removeRemoteTextTrack.call(this, a);
        var b, c;
        for (this.remoteTextTracks().removeTrack_(a), b = this.el().querySelectorAll("track"), c = 0; c < b.length; c++)
            if (b[c] === a || b[c].track === a) {
                b[c].parentNode.removeChild(b[c]);
                break
            }
    }, vjs.Html5.isSupported = function() {
        try {
            vjs.TEST_VID.volume = .5
        } catch (a) {
            return !1
        }
        return !!vjs.TEST_VID.canPlayType
    }, vjs.MediaTechController.withSourceHandlers(vjs.Html5), vjs.Html5.nativeSourceHandler = {}, vjs.Html5.nativeSourceHandler.canHandleSource = function(a) {
        function b(a) {
            try {
                return vjs.TEST_VID.canPlayType(a)
            } catch (b) {
                return ""
            }
        }
        var c, d;
        return a.type ? b(a.type) : a.src ? (c = a.src.match(/\.([^.\/\?]+)(\?[^\/]+)?$/i), d = c && c[1], b("video/" + d)) : ""
    }, vjs.Html5.nativeSourceHandler.handleSource = function(a, b) {
        b.setSrc(a.src)
    }, vjs.Html5.nativeSourceHandler.dispose = function() {}, vjs.Html5.registerSourceHandler(vjs.Html5.nativeSourceHandler), vjs.Html5.canControlVolume = function() {
        var a = vjs.TEST_VID.volume;
        return vjs.TEST_VID.volume = a / 2 + .1, a !== vjs.TEST_VID.volume
    }, vjs.Html5.canControlPlaybackRate = function() {
        var a = vjs.TEST_VID.playbackRate;
        return vjs.TEST_VID.playbackRate = a / 2 + .1, a !== vjs.TEST_VID.playbackRate
    }, vjs.Html5.supportsNativeTextTracks = function() {
        var a;
        return a = !!vjs.TEST_VID.textTracks, a && vjs.TEST_VID.textTracks.length > 0 && (a = "number" != typeof vjs.TEST_VID.textTracks[0].mode), a && vjs.IS_FIREFOX && (a = !1), a
    }, vjs.Html5.prototype.featuresVolumeControl = vjs.Html5.canControlVolume(), vjs.Html5.prototype.featuresPlaybackRate = vjs.Html5.canControlPlaybackRate(), vjs.Html5.prototype.movingMediaElementInDOM = !vjs.IS_IOS, vjs.Html5.prototype.featuresFullscreenResize = !0, vjs.Html5.prototype.featuresProgressEvents = !0, vjs.Html5.prototype.featuresNativeTextTracks = vjs.Html5.supportsNativeTextTracks(), function() {
        var a, b = /^application\/(?:x-|vnd\.apple\.)mpegurl/i,
            c = /^video\/mp4/i;
        vjs.Html5.patchCanPlayType = function() {
            vjs.ANDROID_VERSION >= 4 && (a || (a = vjs.TEST_VID.constructor.prototype.canPlayType), vjs.TEST_VID.constructor.prototype.canPlayType = function(c) {
                return c && b.test(c) ? "maybe" : a.call(this, c)
            }), vjs.IS_OLD_ANDROID && (a || (a = vjs.TEST_VID.constructor.prototype.canPlayType), vjs.TEST_VID.constructor.prototype.canPlayType = function(b) {
                return b && c.test(b) ? "maybe" : a.call(this, b)
            })
        }, vjs.Html5.unpatchCanPlayType = function() {
            var b = vjs.TEST_VID.constructor.prototype.canPlayType;
            return vjs.TEST_VID.constructor.prototype.canPlayType = a, a = null, b
        }, vjs.Html5.patchCanPlayType()
    }(), vjs.Html5.Events = "loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(","), vjs.Html5.disposeMediaElement = function(a) {
        if (a) {
            for (a.player = null, a.parentNode && a.parentNode.removeChild(a); a.hasChildNodes();) a.removeChild(a.firstChild);
            a.removeAttribute("src"), "function" == typeof a.load && ! function() {
                try {
                    a.load()
                } catch (b) {}
            }()
        }
    }, vjs.Flash = vjs.MediaTechController.extend({
        init: function(a, b, c) {
            vjs.MediaTechController.call(this, a, b, c);
            var d = b.source,
                e = a.id() + "_flash_api",
                f = a.options_,
                g = vjs.obj.merge({
                    readyFunction: "videojs.Flash.onReady",
                    eventProxyFunction: "videojs.Flash.onEvent",
                    errorEventProxyFunction: "videojs.Flash.onError",
                    autoplay: f.autoplay,
                    preload: f.preload,
                    loop: f.loop,
                    muted: f.muted
                }, b.flashVars),
                h = vjs.obj.merge({
                    wmode: "opaque",
                    bgcolor: "#000000"
                }, b.params),
                i = vjs.obj.merge({
                    id: e,
                    name: e,
                    "class": "vjs-tech"
                }, b.attributes);
            d && this.ready(function() {
                this.setSource(d)
            }), vjs.insertFirst(this.el_, b.parentEl), b.startTime && this.ready(function() {
                this.load(), this.play(), this.currentTime(b.startTime)
            }), vjs.IS_FIREFOX && this.ready(function() {
                this.on("mousemove", function() {
                    this.player().trigger({
                        type: "mousemove",
                        bubbles: !1
                    })
                })
            }), a.on("stageclick", a.reportUserActivity), this.el_ = vjs.Flash.embed(b.swf, this.el_, g, h, i)
        }
    }), vjs.Flash.prototype.dispose = function() {
        vjs.MediaTechController.prototype.dispose.call(this)
    }, vjs.Flash.prototype.play = function() {
        this.el_.vjs_play()
    }, vjs.Flash.prototype.pause = function() {
        this.el_.vjs_pause()
    }, vjs.Flash.prototype.src = function(a) {
        return void 0 === a ? this.currentSrc() : this.setSrc(a)
    }, vjs.Flash.prototype.setSrc = function(a) {
        if (a = vjs.getAbsoluteURL(a), this.el_.vjs_src(a), this.player_.autoplay()) {
            var b = this;
            this.setTimeout(function() {
                b.play()
            }, 0)
        }
    }, vjs.Flash.prototype.setCurrentTime = function(a) {
        this.lastSeekTarget_ = a, this.el_.vjs_setProperty("currentTime", a), vjs.MediaTechController.prototype.setCurrentTime.call(this)
    }, vjs.Flash.prototype.currentTime = function() {
        return this.seeking() ? this.lastSeekTarget_ || 0 : this.el_.vjs_getProperty("currentTime")
    }, vjs.Flash.prototype.currentSrc = function() {
        return this.currentSource_ ? this.currentSource_.src : this.el_.vjs_getProperty("currentSrc")
    }, vjs.Flash.prototype.load = function() {
        this.el_.vjs_load()
    }, vjs.Flash.prototype.poster = function() {
        this.el_.vjs_getProperty("poster")
    }, vjs.Flash.prototype.setPoster = function() {}, vjs.Flash.prototype.buffered = function() {
        return vjs.createTimeRange(0, this.el_.vjs_getProperty("buffered"))
    }, vjs.Flash.prototype.supportsFullScreen = function() {
        return !1
    }, vjs.Flash.prototype.enterFullScreen = function() {
        return !1
    }, function() {
        function a(a) {
            var b = a.charAt(0).toUpperCase() + a.slice(1);
            d["set" + b] = function(b) {
                return this.el_.vjs_setProperty(a, b)
            }
        }

        function b(a) {
            d[a] = function() {
                return this.el_.vjs_getProperty(a)
            }
        }
        var c, d = vjs.Flash.prototype,
            e = "rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),
            f = "error,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight".split(",");
        for (c = 0; c < e.length; c++) b(e[c]), a(e[c]);
        for (c = 0; c < f.length; c++) b(f[c])
    }(), vjs.Flash.isSupported = function() {
        return vjs.Flash.version()[0] >= 10
    }, vjs.MediaTechController.withSourceHandlers(vjs.Flash), vjs.Flash.nativeSourceHandler = {}, vjs.Flash.nativeSourceHandler.canHandleSource = function(a) {
        var b;
        return a.type ? (b = a.type.replace(/;.*/, "").toLowerCase(), b in vjs.Flash.formats ? "maybe" : "") : ""
    }, vjs.Flash.nativeSourceHandler.handleSource = function(a, b) {
        b.setSrc(a.src)
    }, vjs.Flash.nativeSourceHandler.dispose = function() {}, vjs.Flash.registerSourceHandler(vjs.Flash.nativeSourceHandler), vjs.Flash.formats = {
        "video/flv": "FLV",
        "video/x-flv": "FLV",
        "video/mp4": "MP4",
        "video/m4v": "MP4"
    }, vjs.Flash.onReady = function(a) {
        var b, c;
        b = vjs.el(a), c = b && b.parentNode && b.parentNode.player, c && (b.player = c, vjs.Flash.checkReady(c.tech))
    }, vjs.Flash.checkReady = function(a) {
        a.el() && (a.el().vjs_getProperty ? a.triggerReady() : this.setTimeout(function() {
            vjs.Flash.checkReady(a)
        }, 50))
    }, vjs.Flash.onEvent = function(a, b) {
        var c = vjs.el(a).player;
        c.trigger(b)
    }, vjs.Flash.onError = function(a, b) {
        var c = vjs.el(a).player,
            d = "FLASH: " + b;
        c.error("srcnotfound" == b ? {
            code: 4,
            message: d
        } : d)
    }, vjs.Flash.version = function() {
        var a = "0,0,0";
        try {
            a = new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g, ",").match(/^,?(.+),?$/)[1]
        } catch (b) {
            try {
                navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin && (a = (navigator.plugins["Shockwave Flash 2.0"] || navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g, ",").match(/^,?(.+),?$/)[1])
            } catch (c) {}
        }
        return a.split(",")
    }, vjs.Flash.embed = function(a, b, c, d, e) {
        var f = vjs.Flash.getEmbedCode(a, c, d, e),
            g = vjs.createEl("div", {
                innerHTML: f
            }).childNodes[0],
            h = b.parentNode;
        b.parentNode.replaceChild(g, b), g[vjs.expando] = b[vjs.expando];
        var i = h.childNodes[0];
        return setTimeout(function() {
            i.style.display = "block"
        }, 1e3), g
    }, vjs.Flash.getEmbedCode = function(a, b, c, d) {
        var e = '<object type="application/x-shockwave-flash" ',
            f = "",
            g = "",
            h = "";
        return b && vjs.obj.each(b, function(a, b) {
            f += a + "=" + b + "&amp;"
        }), c = vjs.obj.merge({
            movie: a,
            flashvars: f,
            allowScriptAccess: "always",
            allowNetworking: "all"
        }, c), vjs.obj.each(c, function(a, b) {
            g += '<param name="' + a + '" value="' + b + '" />'
        }), d = vjs.obj.merge({
            data: a,
            width: "100%",
            height: "100%"
        }, d), vjs.obj.each(d, function(a, b) {
            h += a + '="' + b + '" '
        }), e + h + ">" + g + "</object>"
    }, vjs.Flash.streamingFormats = {
        "rtmp/mp4": "MP4",
        "rtmp/flv": "FLV"
    }, vjs.Flash.streamFromParts = function(a, b) {
        return a + "&" + b
    }, vjs.Flash.streamToParts = function(a) {
        var b = {
            connection: "",
            stream: ""
        };
        if (!a) return b;
        var c, d = a.indexOf("&");
        return -1 !== d ? c = d + 1 : (d = c = a.lastIndexOf("/") + 1, 0 === d && (d = c = a.length)), b.connection = a.substring(0, d), b.stream = a.substring(c, a.length), b
    }, vjs.Flash.isStreamingType = function(a) {
        return a in vjs.Flash.streamingFormats
    }, vjs.Flash.RTMP_RE = /^rtmp[set]?:\/\//i, vjs.Flash.isStreamingSrc = function(a) {
        return vjs.Flash.RTMP_RE.test(a)
    }, vjs.Flash.rtmpSourceHandler = {}, vjs.Flash.rtmpSourceHandler.canHandleSource = function(a) {
        return vjs.Flash.isStreamingType(a.type) || vjs.Flash.isStreamingSrc(a.src) ? "maybe" : ""
    }, vjs.Flash.rtmpSourceHandler.handleSource = function(a, b) {
        var c = vjs.Flash.streamToParts(a.src);
        b.setRtmpConnection(c.connection), b.setRtmpStream(c.stream)
    }, vjs.Flash.registerSourceHandler(vjs.Flash.rtmpSourceHandler), vjs.MediaLoader = vjs.Component.extend({
        init: function(a, b, c) {
            if (vjs.Component.call(this, a, b, c), a.options_.sources && 0 !== a.options_.sources.length) a.src(a.options_.sources);
            else
                for (var d = 0, e = a.options_.techOrder; d < e.length; d++) {
                    var f = vjs.capitalize(e[d]),
                        g = window.videojs[f];
                    if (g && g.isSupported()) {
                        a.loadTech(f);
                        break
                    }
                }
        }
    }), vjs.TextTrackMode = {
        disabled: "disabled",
        hidden: "hidden",
        showing: "showing"
    }, vjs.TextTrackKind = {
        subtitles: "subtitles",
        captions: "captions",
        descriptions: "descriptions",
        chapters: "chapters",
        metadata: "metadata"
    }, function() {
        vjs.TextTrack = function(b) {
            var d, e, f, g, h, i, j, k, l, m, n;
            if (b = b || {}, !b.player) throw new Error("A player was not provided.");
            if (d = this, vjs.IS_IE8) {
                d = document.createElement("custom");
                for (n in vjs.TextTrack.prototype) d[n] = vjs.TextTrack.prototype[n]
            }
            return d.player_ = b.player, f = vjs.TextTrackMode[b.mode] || "disabled", g = vjs.TextTrackKind[b.kind] || "subtitles", h = b.label || "", i = b.language || b.srclang || "", e = b.id || "vjs_text_track_" + vjs.guid++, ("metadata" === g || "chapters" === g) && (f = "hidden"), d.cues_ = [], d.activeCues_ = [], j = new vjs.TextTrackCueList(d.cues_), k = new vjs.TextTrackCueList(d.activeCues_), m = !1, l = vjs.bind(d, function() {
                this.activeCues, m && (this.trigger("cuechange"), m = !1)
            }), "disabled" !== f && d.player_.on("timeupdate", l), Object.defineProperty(d, "kind", {
                get: function() {
                    return g
                },
                set: Function.prototype
            }), Object.defineProperty(d, "label", {
                get: function() {
                    return h
                },
                set: Function.prototype
            }), Object.defineProperty(d, "language", {
                get: function() {
                    return i
                },
                set: Function.prototype
            }), Object.defineProperty(d, "id", {
                get: function() {
                    return e
                },
                set: Function.prototype
            }), Object.defineProperty(d, "mode", {
                get: function() {
                    return f
                },
                set: function(a) {
                    vjs.TextTrackMode[a] && (f = a, "showing" === f && this.player_.on("timeupdate", l), this.trigger("modechange"))
                }
            }), Object.defineProperty(d, "cues", {
                get: function() {
                    return this.loaded_ ? j : null
                },
                set: Function.prototype
            }), Object.defineProperty(d, "activeCues", {
                get: function() {
                    var a, b, d, e, f;
                    if (!this.loaded_) return null;
                    if (0 === this.cues.length) return k;
                    for (e = this.player_.currentTime(), a = 0, b = this.cues.length, d = []; b > a; a++) f = this.cues[a], f.startTime <= e && f.endTime >= e ? d.push(f) : f.startTime === f.endTime && f.startTime <= e && f.startTime + .5 >= e && d.push(f);
                    if (m = !1, d.length !== this.activeCues_.length) m = !0;
                    else
                        for (a = 0; a < d.length; a++) - 1 === c.call(this.activeCues_, d[a]) && (m = !0);
                    return this.activeCues_ = d, k.setCues_(this.activeCues_), k
                },
                set: Function.prototype
            }), b.src ? a(b.src, d) : d.loaded_ = !0, vjs.IS_IE8 ? d : void 0
        }, vjs.TextTrack.prototype = vjs.obj.create(vjs.EventEmitter.prototype), vjs.TextTrack.prototype.constructor = vjs.TextTrack, vjs.TextTrack.prototype.allowedEvents_ = {
            cuechange: "cuechange"
        }, vjs.TextTrack.prototype.addCue = function(a) {
            var b = this.player_.textTracks(),
                c = 0;
            if (b)
                for (; c < b.length; c++) b[c] !== this && b[c].removeCue(a);
            this.cues_.push(a), this.cues.setCues_(this.cues_)
        }, vjs.TextTrack.prototype.removeCue = function(a) {
            for (var b, c = 0, d = this.cues_.length, e = !1; d > c; c++) b = this.cues_[c], b === a && (this.cues_.splice(c, 1), e = !0);
            e && this.cues.setCues_(this.cues_)
        };
        var a, b, c;
        a = function(a, c) {
            vjs.xhr(a, vjs.bind(this, function(a, d, e) {
                return a ? vjs.log.error(a) : (c.loaded_ = !0, void b(e, c))
            }))
        }, b = function(a, c) {
            if ("function" != typeof window.WebVTT) return window.setTimeout(function() {
                b(a, c)
            }, 25);
            var d = new window.WebVTT.Parser(window, window.vttjs, window.WebVTT.StringDecoder());
            d.oncue = function(a) {
                c.addCue(a)
            }, d.onparsingerror = function(a) {
                vjs.log.error(a)
            }, d.parse(a), d.flush()
        }, c = function(a, b) {
            var c;
            if (null == this) throw new TypeError('"this" is null or not defined');
            var d = Object(this),
                e = d.length >>> 0;
            if (0 === e) return -1;
            var f = +b || 0;
            if (Math.abs(f) === 1 / 0 && (f = 0), f >= e) return -1;
            for (c = Math.max(f >= 0 ? f : e - Math.abs(f), 0); e > c;) {
                if (c in d && d[c] === a) return c;
                c++
            }
            return -1
        }
    }(), vjs.TextTrackList = function(a) {
        var b, c = this,
            d = 0;
        if (vjs.IS_IE8) {
            c = document.createElement("custom");
            for (b in vjs.TextTrackList.prototype) c[b] = vjs.TextTrackList.prototype[b]
        }
        for (a = a || [], c.tracks_ = [], Object.defineProperty(c, "length", {
                get: function() {
                    return this.tracks_.length
                }
            }); d < a.length; d++) c.addTrack_(a[d]);
        return vjs.IS_IE8 ? c : void 0
    }, vjs.TextTrackList.prototype = vjs.obj.create(vjs.EventEmitter.prototype), vjs.TextTrackList.prototype.constructor = vjs.TextTrackList, vjs.TextTrackList.prototype.allowedEvents_ = {
        change: "change",
        addtrack: "addtrack",
        removetrack: "removetrack"
    }, function() {
        var a;
        for (a in vjs.TextTrackList.prototype.allowedEvents_) vjs.TextTrackList.prototype["on" + a] = null
    }(), vjs.TextTrackList.prototype.addTrack_ = function(a) {
        var b = this.tracks_.length;
        "" + b in this || Object.defineProperty(this, b, {
            get: function() {
                return this.tracks_[b]
            }
        }), a.addEventListener("modechange", vjs.bind(this, function() {
            this.trigger("change")
        })), this.tracks_.push(a), this.trigger({
            type: "addtrack",
            track: a
        })
    }, vjs.TextTrackList.prototype.removeTrack_ = function(a) {
        for (var b, c = 0, d = this.length; d > c; c++)
            if (b = this[c], b === a) {
                this.tracks_.splice(c, 1);
                break
            }
        this.trigger({
            type: "removetrack",
            track: a
        })
    }, vjs.TextTrackList.prototype.getTrackById = function(a) {
        for (var b, c = 0, d = this.length, e = null; d > c; c++)
            if (b = this[c], b.id === a) {
                e = b;
                break
            }
        return e
    }, vjs.TextTrackCueList = function(a) {
        var b, c = this;
        if (vjs.IS_IE8) {
            c = document.createElement("custom");
            for (b in vjs.TextTrackCueList.prototype) c[b] = vjs.TextTrackCueList.prototype[b]
        }
        return vjs.TextTrackCueList.prototype.setCues_.call(c, a), Object.defineProperty(c, "length", {
            get: function() {
                return this.length_
            }
        }), vjs.IS_IE8 ? c : void 0
    }, vjs.TextTrackCueList.prototype.setCues_ = function(a) {
        var b, c = this.length || 0,
            d = 0,
            e = a.length;
        if (this.cues_ = a, this.length_ = a.length, b = function(a) {
                "" + a in this || Object.defineProperty(this, "" + a, {
                    get: function() {
                        return this.cues_[a]
                    }
                })
            }, e > c)
            for (d = c; e > d; d++) b.call(this, d)
    }, vjs.TextTrackCueList.prototype.getCueById = function(a) {
        for (var b, c = 0, d = this.length, e = null; d > c; c++)
            if (b = this[c], b.id === a) {
                e = b;
                break
            }
        return e
    }, function() {
        "use strict";
        vjs.TextTrackDisplay = vjs.Component.extend({
            init: function(a, b, c) {
                vjs.Component.call(this, a, b, c), a.on("loadstart", vjs.bind(this, this.toggleDisplay)), a.ready(vjs.bind(this, function() {
                    if (a.tech && a.tech.featuresNativeTextTracks) return void this.hide();
                    var b, c, d;
                    for (a.on("fullscreenchange", vjs.bind(this, this.updateDisplay)), c = a.options_.tracks || [], b = 0; b < c.length; b++) d = c[b], this.player_.addRemoteTextTrack(d)
                }))
            }
        }), vjs.TextTrackDisplay.prototype.toggleDisplay = function() {
            this.player_.tech && this.player_.tech.featuresNativeTextTracks ? this.hide() : this.show()
        }, vjs.TextTrackDisplay.prototype.createEl = function() {
            return vjs.Component.prototype.createEl.call(this, "div", {
                className: "vjs-text-track-display"
            })
        }, vjs.TextTrackDisplay.prototype.clearDisplay = function() {
            "function" == typeof window.WebVTT && window.WebVTT.processCues(window, [], this.el_)
        };
        var a = function(a, b) {
                return "rgba(" + parseInt(a[1] + a[1], 16) + "," + parseInt(a[2] + a[2], 16) + "," + parseInt(a[3] + a[3], 16) + "," + b + ")"
            },
            b = "#222",
            c = "#ccc",
            d = {
                monospace: "monospace",
                sansSerif: "sans-serif",
                serif: "serif",
                monospaceSansSerif: '"Andale Mono", "Lucida Console", monospace',
                monospaceSerif: '"Courier New", monospace',
                proportionalSansSerif: "sans-serif",
                proportionalSerif: "serif",
                casual: '"Comic Sans MS", Impact, fantasy',
                script: '"Monotype Corsiva", cursive',
                smallcaps: '"Andale Mono", "Lucida Console", monospace, sans-serif'
            },
            e = function(a, b, c) {
                try {
                    a.style[b] = c
                } catch (d) {}
            };
        vjs.TextTrackDisplay.prototype.updateDisplay = function() {
            var a, b = this.player_.textTracks(),
                c = 0;
            if (this.clearDisplay(), b)
                for (; c < b.length; c++) a = b[c], "showing" === a.mode && this.updateForTrack(a)
        }, vjs.TextTrackDisplay.prototype.updateForTrack = function(f) {
            if ("function" == typeof window.WebVTT && f.activeCues) {
                for (var g, h, i = 0, j = this.player_.textTrackSettings.getValues(), k = []; i < f.activeCues.length; i++) k.push(f.activeCues[i]);
                for (window.WebVTT.processCues(window, f.activeCues, this.el_), i = k.length; i--;) g = k[i].displayState, j.color && (g.firstChild.style.color = j.color), j.textOpacity && e(g.firstChild, "color", a(j.color || "#fff", j.textOpacity)), j.backgroundColor && (g.firstChild.style.backgroundColor = j.backgroundColor), j.backgroundOpacity && e(g.firstChild, "backgroundColor", a(j.backgroundColor || "#000", j.backgroundOpacity)), j.windowColor && (j.windowOpacity ? e(g, "backgroundColor", a(j.windowColor, j.windowOpacity)) : g.style.backgroundColor = j.windowColor), j.edgeStyle && ("dropshadow" === j.edgeStyle ? g.firstChild.style.textShadow = "2px 2px 3px " + b + ", 2px 2px 4px " + b + ", 2px 2px 5px " + b : "raised" === j.edgeStyle ? g.firstChild.style.textShadow = "1px 1px " + b + ", 2px 2px " + b + ", 3px 3px " + b : "depressed" === j.edgeStyle ? g.firstChild.style.textShadow = "1px 1px " + c + ", 0 1px " + c + ", -1px -1px " + b + ", 0 -1px " + b : "uniform" === j.edgeStyle && (g.firstChild.style.textShadow = "0 0 4px " + b + ", 0 0 4px " + b + ", 0 0 4px " + b + ", 0 0 4px " + b)), j.fontPercent && 1 !== j.fontPercent && (h = window.parseFloat(g.style.fontSize), g.style.fontSize = h * j.fontPercent + "px", g.style.height = "auto", g.style.top = "auto", g.style.bottom = "2px"), j.fontFamily && "default" !== j.fontFamily && ("small-caps" === j.fontFamily ? g.firstChild.style.fontVariant = "small-caps" : g.firstChild.style.fontFamily = d[j.fontFamily])
            }
        }, vjs.TextTrackMenuItem = vjs.MenuItem.extend({
            init: function(a, b) {
                var c, d, e = this.track = b.track,
                    f = a.textTracks();
                f && (c = vjs.bind(this, function() {
                    var a, b, c, d = "showing" === this.track.mode;
                    if (this instanceof vjs.OffTextTrackMenuItem)
                        for (d = !0, b = 0, c = f.length; c > b; b++)
                            if (a = f[b], a.kind === this.track.kind && "showing" === a.mode) {
                                d = !1;
                                break
                            }
                    this.selected(d)
                }), f.addEventListener("change", c), a.on("dispose", function() {
                    f.removeEventListener("change", c)
                })), b.label = e.label || e.language || "Unknown", b.selected = e["default"] || "showing" === e.mode, vjs.MenuItem.call(this, a, b), f && void 0 === f.onchange && this.on(["tap", "click"], function() {
                    if ("object" != typeof window.Event) try {
                        d = new window.Event("change")
                    } catch (a) {}
                    d || (d = document.createEvent("Event"), d.initEvent("change", !0, !0)), f.dispatchEvent(d)
                })
            }
        }), vjs.TextTrackMenuItem.prototype.onClick = function() {
            var a, b = this.track.kind,
                c = this.player_.textTracks(),
                d = 0;
            if (vjs.MenuItem.prototype.onClick.call(this), c)
                for (; d < c.length; d++) a = c[d], a.kind === b && (a.mode = a === this.track ? "showing" : "disabled")
        }, vjs.OffTextTrackMenuItem = vjs.TextTrackMenuItem.extend({
            init: function(a, b) {
                b.track = {
                    kind: b.kind,
                    player: a,
                    label: b.kind + " off",
                    "default": !1,
                    mode: "disabled"
                }, vjs.TextTrackMenuItem.call(this, a, b), this.selected(!0)
            }
        }), vjs.CaptionSettingsMenuItem = vjs.TextTrackMenuItem.extend({
            init: function(a, b) {
                b.track = {
                    kind: b.kind,
                    player: a,
                    label: b.kind + " settings",
                    "default": !1,
                    mode: "disabled"
                }, vjs.TextTrackMenuItem.call(this, a, b), this.addClass("vjs-texttrack-settings")
            }
        }), vjs.CaptionSettingsMenuItem.prototype.onClick = function() {
            this.player().getChild("textTrackSettings").show()
        }, vjs.TextTrackButton = vjs.MenuButton.extend({
            init: function(a, b) {
                var c, d;
                vjs.MenuButton.call(this, a, b), c = this.player_.textTracks(), this.items.length <= 1 && this.hide(), c && (d = vjs.bind(this, this.update), c.addEventListener("removetrack", d), c.addEventListener("addtrack", d), this.player_.on("dispose", function() {
                    c.removeEventListener("removetrack", d), c.removeEventListener("addtrack", d)
                }))
            }
        }), vjs.TextTrackButton.prototype.createItems = function() {
            var a, b, c = [];
            if (!(this instanceof vjs.CaptionsButton) || this.player().tech && this.player().tech.featuresNativeTextTracks || c.push(new vjs.CaptionSettingsMenuItem(this.player_, {
                    kind: this.kind_
                })), c.push(new vjs.OffTextTrackMenuItem(this.player_, {
                    kind: this.kind_
                })), b = this.player_.textTracks(), !b) return c;
            for (var d = 0; d < b.length; d++) a = b[d], a.kind === this.kind_ && c.push(new vjs.TextTrackMenuItem(this.player_, {
                track: a
            }));
            return c
        }, vjs.CaptionsButton = vjs.TextTrackButton.extend({
            init: function(a, b, c) {
                vjs.TextTrackButton.call(this, a, b, c), this.el_.setAttribute("aria-label", "Captions Menu")
            }
        }), vjs.CaptionsButton.prototype.kind_ = "captions", vjs.CaptionsButton.prototype.buttonText = "Captions", vjs.CaptionsButton.prototype.className = "vjs-captions-button", vjs.CaptionsButton.prototype.update = function() {
            var a = 2;
            vjs.TextTrackButton.prototype.update.call(this), this.player().tech && this.player().tech.featuresNativeTextTracks && (a = 1), this.items && this.items.length > a ? this.show() : this.hide()
        }, vjs.SubtitlesButton = vjs.TextTrackButton.extend({
            init: function(a, b, c) {
                vjs.TextTrackButton.call(this, a, b, c), this.el_.setAttribute("aria-label", "Subtitles Menu")
            }
        }), vjs.SubtitlesButton.prototype.kind_ = "subtitles", vjs.SubtitlesButton.prototype.buttonText = "Subtitles", vjs.SubtitlesButton.prototype.className = "vjs-subtitles-button", vjs.ChaptersButton = vjs.TextTrackButton.extend({
            init: function(a, b, c) {
                vjs.TextTrackButton.call(this, a, b, c), this.el_.setAttribute("aria-label", "Chapters Menu")
            }
        }), vjs.ChaptersButton.prototype.kind_ = "chapters", vjs.ChaptersButton.prototype.buttonText = "Chapters", vjs.ChaptersButton.prototype.className = "vjs-chapters-button", vjs.ChaptersButton.prototype.createItems = function() {
            var a, b, c = [];
            if (b = this.player_.textTracks(), !b) return c;
            for (var d = 0; d < b.length; d++) a = b[d], a.kind === this.kind_ && c.push(new vjs.TextTrackMenuItem(this.player_, {
                track: a
            }));
            return c
        }, vjs.ChaptersButton.prototype.createMenu = function() {
            for (var a, b, c = this.player_.textTracks() || [], d = 0, e = c.length, f = this.items = []; e > d; d++)
                if (a = c[d], a.kind == this.kind_) {
                    if (a.cues) {
                        b = a;
                        break
                    }
                    a.mode = "hidden", window.setTimeout(vjs.bind(this, function() {
                        this.createMenu()
                    }), 100)
                }
            var g = this.menu;
            if (void 0 === g && (g = new vjs.Menu(this.player_), g.contentEl().appendChild(vjs.createEl("li", {
                    className: "vjs-menu-title",
                    innerHTML: vjs.capitalize(this.kind_),
                    tabindex: -1
                }))), b) {
                var h, i, j = b.cues;
                for (d = 0, e = j.length; e > d; d++) h = j[d], i = new vjs.ChaptersTrackMenuItem(this.player_, {
                    track: b,
                    cue: h
                }), f.push(i), g.addChild(i);
                this.addChild(g)
            }
            return this.items.length > 0 && this.show(), g
        }, vjs.ChaptersTrackMenuItem = vjs.MenuItem.extend({
            init: function(a, b) {
                var c = this.track = b.track,
                    d = this.cue = b.cue,
                    e = a.currentTime();
                b.label = d.text, b.selected = d.startTime <= e && e < d.endTime, vjs.MenuItem.call(this, a, b), c.addEventListener("cuechange", vjs.bind(this, this.update))
            }
        }), vjs.ChaptersTrackMenuItem.prototype.onClick = function() {
            vjs.MenuItem.prototype.onClick.call(this), this.player_.currentTime(this.cue.startTime), this.update(this.cue.startTime)
        }, vjs.ChaptersTrackMenuItem.prototype.update = function() {
            var a = this.cue,
                b = this.player_.currentTime();
            this.selected(a.startTime <= b && b < a.endTime)
        }
    }(), function() {
        "use strict";

        function a(a) {
            var b;
            return a.selectedOptions ? b = a.selectedOptions[0] : a.options && (b = a.options[a.options.selectedIndex]), b.value
        }

        function b(a, b) {
            var c, d;
            if (b) {
                for (c = 0; c < a.options.length && (d = a.options[c], d.value !== b); c++);
                a.selectedIndex = c
            }
        }

        function c() {
            return '<div class="vjs-tracksettings"><div class="vjs-tracksettings-colors"><div class="vjs-fg-color vjs-tracksetting"><label class="vjs-label">Foreground</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-text-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Opaque</option></select></span></div><div class="vjs-bg-color vjs-tracksetting"><label class="vjs-label">Background</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-bg-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Transparent</option><option value="0">Transparent</option></select></span></div><div class="window-color vjs-tracksetting"><label class="vjs-label">Window</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-window-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Transparent</option><option value="0">Transparent</option></select></span></div></div><div class="vjs-tracksettings-font"><div class="vjs-font-percent vjs-tracksetting"><label class="vjs-label">Font Size</label><select><option value="0.50">50%</option><option value="0.75">75%</option><option value="1.00" selected>100%</option><option value="1.25">125%</option><option value="1.50">150%</option><option value="1.75">175%</option><option value="2.00">200%</option><option value="3.00">300%</option><option value="4.00">400%</option></select></div><div class="vjs-edge-style vjs-tracksetting"><label class="vjs-label">Text Edge Style</label><select><option value="none">None</option><option value="raised">Raised</option><option value="depressed">Depressed</option><option value="uniform">Uniform</option><option value="dropshadow">Dropshadow</option></select></div><div class="vjs-font-family vjs-tracksetting"><label class="vjs-label">Font Family</label><select><option value="">Default</option><option value="monospaceSerif">Monospace Serif</option><option value="proportionalSerif">Proportional Serif</option><option value="monospaceSansSerif">Monospace Sans-Serif</option><option value="proportionalSansSerif">Proportional Sans-Serif</option><option value="casual">Casual</option><option value="script">Script</option><option value="small-caps">Small Caps</option></select></div></div></div><div class="vjs-tracksettings-controls"><button class="vjs-default-button">Defaults</button><button class="vjs-done-button">Done</button></div>'
        }
        vjs.TextTrackSettings = vjs.Component.extend({
            init: function(a, b) {
                vjs.Component.call(this, a, b), this.hide(), vjs.on(this.el().querySelector(".vjs-done-button"), "click", vjs.bind(this, function() {
                    this.saveSettings(), this.hide()
                })), vjs.on(this.el().querySelector(".vjs-default-button"), "click", vjs.bind(this, function() {
                    this.el().querySelector(".vjs-fg-color > select").selectedIndex = 0, this.el().querySelector(".vjs-bg-color > select").selectedIndex = 0, this.el().querySelector(".window-color > select").selectedIndex = 0, this.el().querySelector(".vjs-text-opacity > select").selectedIndex = 0, this.el().querySelector(".vjs-bg-opacity > select").selectedIndex = 0, this.el().querySelector(".vjs-window-opacity > select").selectedIndex = 0, this.el().querySelector(".vjs-edge-style select").selectedIndex = 0, this.el().querySelector(".vjs-font-family select").selectedIndex = 0, this.el().querySelector(".vjs-font-percent select").selectedIndex = 2, this.updateDisplay()
                })), vjs.on(this.el().querySelector(".vjs-fg-color > select"), "change", vjs.bind(this, this.updateDisplay)), vjs.on(this.el().querySelector(".vjs-bg-color > select"), "change", vjs.bind(this, this.updateDisplay)), vjs.on(this.el().querySelector(".window-color > select"), "change", vjs.bind(this, this.updateDisplay)), vjs.on(this.el().querySelector(".vjs-text-opacity > select"), "change", vjs.bind(this, this.updateDisplay)), vjs.on(this.el().querySelector(".vjs-bg-opacity > select"), "change", vjs.bind(this, this.updateDisplay)), vjs.on(this.el().querySelector(".vjs-window-opacity > select"), "change", vjs.bind(this, this.updateDisplay)), vjs.on(this.el().querySelector(".vjs-font-percent select"), "change", vjs.bind(this, this.updateDisplay)), vjs.on(this.el().querySelector(".vjs-edge-style select"), "change", vjs.bind(this, this.updateDisplay)), vjs.on(this.el().querySelector(".vjs-font-family select"), "change", vjs.bind(this, this.updateDisplay)), a.options().persistTextTrackSettings && this.restoreSettings()
            }
        }), vjs.TextTrackSettings.prototype.createEl = function() {
            return vjs.Component.prototype.createEl.call(this, "div", {
                className: "vjs-caption-settings vjs-modal-overlay",
                innerHTML: c()
            })
        }, vjs.TextTrackSettings.prototype.getValues = function() {
            var b, c, d, e, f, g, h, i, j, k, l, m;
            b = this.el(), f = a(b.querySelector(".vjs-edge-style select")), g = a(b.querySelector(".vjs-font-family select")), h = a(b.querySelector(".vjs-fg-color > select")), d = a(b.querySelector(".vjs-text-opacity > select")), i = a(b.querySelector(".vjs-bg-color > select")), c = a(b.querySelector(".vjs-bg-opacity > select")), j = a(b.querySelector(".window-color > select")), e = a(b.querySelector(".vjs-window-opacity > select")), m = window.parseFloat(a(b.querySelector(".vjs-font-percent > select"))), k = {
                backgroundOpacity: c,
                textOpacity: d,
                windowOpacity: e,
                edgeStyle: f,
                fontFamily: g,
                color: h,
                backgroundColor: i,
                windowColor: j,
                fontPercent: m
            };
            for (l in k)("" === k[l] || "none" === k[l] || "fontPercent" === l && 1 === k[l]) && delete k[l];
            return k
        }, vjs.TextTrackSettings.prototype.setValues = function(a) {
            var c, d = this.el();
            b(d.querySelector(".vjs-edge-style select"), a.edgeStyle), b(d.querySelector(".vjs-font-family select"), a.fontFamily), b(d.querySelector(".vjs-fg-color > select"), a.color), b(d.querySelector(".vjs-text-opacity > select"), a.textOpacity), b(d.querySelector(".vjs-bg-color > select"), a.backgroundColor), b(d.querySelector(".vjs-bg-opacity > select"), a.backgroundOpacity), b(d.querySelector(".window-color > select"), a.windowColor), b(d.querySelector(".vjs-window-opacity > select"), a.windowOpacity), c = a.fontPercent, c && (c = c.toFixed(2)), b(d.querySelector(".vjs-font-percent > select"), c)
        }, vjs.TextTrackSettings.prototype.restoreSettings = function() {
            var a;
            try {
                a = JSON.parse(window.localStorage.getItem("vjs-text-track-settings"))
            } catch (b) {}
            a && this.setValues(a)
        }, vjs.TextTrackSettings.prototype.saveSettings = function() {
            var a;
            if (this.player_.options().persistTextTrackSettings) {
                a = this.getValues();
                try {
                    vjs.isEmpty(a) ? window.localStorage.removeItem("vjs-text-track-settings") : window.localStorage.setItem("vjs-text-track-settings", JSON.stringify(a))
                } catch (b) {}
            }
        }, vjs.TextTrackSettings.prototype.updateDisplay = function() {
            var a = this.player_.getChild("textTrackDisplay");
            a && a.updateDisplay()
        }
    }(), vjs.JSON, "undefined" != typeof window.JSON && "function" == typeof window.JSON.parse) vjs.JSON = window.JSON;
else {
    vjs.JSON = {};
    var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
    vjs.JSON.parse = function(text, reviver) {
        function walk(a, b) {
            var c, d, e = a[b];
            if (e && "object" == typeof e)
                for (c in e) Object.prototype.hasOwnProperty.call(e, c) && (d = walk(e, c), void 0 !== d ? e[c] = d : delete e[c]);
            return reviver.call(a, b, e)
        }
        var j;
        if (text = String(text), cx.lastIndex = 0, cx.test(text) && (text = text.replace(cx, function(a) {
                return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
            })), /^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return j = eval("(" + text + ")"), "function" == typeof reviver ? walk({
            "": j
        }, "") : j;
        throw new SyntaxError("JSON.parse(): invalid or malformed JSON data");

    }
}
vjs.autoSetup = function() {
        var a, b, c, d, e, f = document.getElementsByTagName("video"),
            g = document.getElementsByTagName("audio"),
            h = [];
        if (f && f.length > 0)
            for (d = 0, e = f.length; e > d; d++) h.push(f[d]);
        if (g && g.length > 0)
            for (d = 0, e = g.length; e > d; d++) h.push(g[d]);
        if (h && h.length > 0)
            for (d = 0, e = h.length; e > d; d++) {
                if (b = h[d], !b || !b.getAttribute) {
                    vjs.autoSetupTimeout(1);
                    break
                }
                void 0 === b.player && (a = b.getAttribute("data-setup"), null !== a && (c = videojs(b)))
            } else vjs.windowLoaded || vjs.autoSetupTimeout(1)
    }, vjs.autoSetupTimeout = function(a) {
        setTimeout(vjs.autoSetup, a)
    }, "complete" === document.readyState ? vjs.windowLoaded = !0 : vjs.one(window, "load", function() {
        vjs.windowLoaded = !0
    }), vjs.autoSetupTimeout(1), vjs.plugin = function(a, b) {
        vjs.Player.prototype[a] = b
    },
    function(a) {
        var b = a.vttjs = {},
            c = b.VTTCue,
            d = b.VTTRegion,
            e = a.VTTCue,
            f = a.VTTRegion;
        b.shim = function() {
            b.VTTCue = c, b.VTTRegion = d
        }, b.restore = function() {
            b.VTTCue = e, b.VTTRegion = f
        }
    }(this),
    function(a, b) {
        function c(a) {
            if ("string" != typeof a) return !1;
            var b = h[a.toLowerCase()];
            return b ? a.toLowerCase() : !1
        }

        function d(a) {
            if ("string" != typeof a) return !1;
            var b = i[a.toLowerCase()];
            return b ? a.toLowerCase() : !1
        }

        function e(a) {
            for (var b = 1; b < arguments.length; b++) {
                var c = arguments[b];
                for (var d in c) a[d] = c[d]
            }
            return a
        }

        function f(a, b, f) {
            var h = this,
                i = /MSIE\s8\.0/.test(navigator.userAgent),
                j = {};
            i ? h = document.createElement("custom") : j.enumerable = !0, h.hasBeenReset = !1;
            var k = "",
                l = !1,
                m = a,
                n = b,
                o = f,
                p = null,
                q = "",
                r = !0,
                s = "auto",
                t = "start",
                u = 50,
                v = "middle",
                w = 50,
                x = "middle";
            return Object.defineProperty(h, "id", e({}, j, {
                get: function() {
                    return k
                },
                set: function(a) {
                    k = "" + a
                }
            })), Object.defineProperty(h, "pauseOnExit", e({}, j, {
                get: function() {
                    return l
                },
                set: function(a) {
                    l = !!a
                }
            })), Object.defineProperty(h, "startTime", e({}, j, {
                get: function() {
                    return m
                },
                set: function(a) {
                    if ("number" != typeof a) throw new TypeError("Start time must be set to a number.");
                    m = a, this.hasBeenReset = !0
                }
            })), Object.defineProperty(h, "endTime", e({}, j, {
                get: function() {
                    return n
                },
                set: function(a) {
                    if ("number" != typeof a) throw new TypeError("End time must be set to a number.");
                    n = a, this.hasBeenReset = !0
                }
            })), Object.defineProperty(h, "text", e({}, j, {
                get: function() {
                    return o
                },
                set: function(a) {
                    o = "" + a, this.hasBeenReset = !0
                }
            })), Object.defineProperty(h, "region", e({}, j, {
                get: function() {
                    return p
                },
                set: function(a) {
                    p = a, this.hasBeenReset = !0
                }
            })), Object.defineProperty(h, "vertical", e({}, j, {
                get: function() {
                    return q
                },
                set: function(a) {
                    var b = c(a);
                    if (b === !1) throw new SyntaxError("An invalid or illegal string was specified.");
                    q = b, this.hasBeenReset = !0
                }
            })), Object.defineProperty(h, "snapToLines", e({}, j, {
                get: function() {
                    return r
                },
                set: function(a) {
                    r = !!a, this.hasBeenReset = !0
                }
            })), Object.defineProperty(h, "line", e({}, j, {
                get: function() {
                    return s
                },
                set: function(a) {
                    if ("number" != typeof a && a !== g) throw new SyntaxError("An invalid number or illegal string was specified.");
                    s = a, this.hasBeenReset = !0
                }
            })), Object.defineProperty(h, "lineAlign", e({}, j, {
                get: function() {
                    return t
                },
                set: function(a) {
                    var b = d(a);
                    if (!b) throw new SyntaxError("An invalid or illegal string was specified.");
                    t = b, this.hasBeenReset = !0
                }
            })), Object.defineProperty(h, "position", e({}, j, {
                get: function() {
                    return u
                },
                set: function(a) {
                    if (0 > a || a > 100) throw new Error("Position must be between 0 and 100.");
                    u = a, this.hasBeenReset = !0
                }
            })), Object.defineProperty(h, "positionAlign", e({}, j, {
                get: function() {
                    return v
                },
                set: function(a) {
                    var b = d(a);
                    if (!b) throw new SyntaxError("An invalid or illegal string was specified.");
                    v = b, this.hasBeenReset = !0
                }
            })), Object.defineProperty(h, "size", e({}, j, {
                get: function() {
                    return w
                },
                set: function(a) {
                    if (0 > a || a > 100) throw new Error("Size must be between 0 and 100.");
                    w = a, this.hasBeenReset = !0
                }
            })), Object.defineProperty(h, "align", e({}, j, {
                get: function() {
                    return x
                },
                set: function(a) {
                    var b = d(a);
                    if (!b) throw new SyntaxError("An invalid or illegal string was specified.");
                    x = b, this.hasBeenReset = !0
                }
            })), h.displayState = void 0, i ? h : void 0
        }
        var g = "auto",
            h = {
                "": !0,
                lr: !0,
                rl: !0
            },
            i = {
                start: !0,
                middle: !0,
                end: !0,
                left: !0,
                right: !0
            };
        f.prototype.getCueAsHTML = function() {
            return WebVTT.convertCueToDOMTree(window, this.text)
        }, a.VTTCue = a.VTTCue || f, b.VTTCue = f
    }(this, this.vttjs || {}),
    function(a, b) {
        function c(a) {
            if ("string" != typeof a) return !1;
            var b = f[a.toLowerCase()];
            return b ? a.toLowerCase() : !1
        }

        function d(a) {
            return "number" == typeof a && a >= 0 && 100 >= a
        }

        function e() {
            var a = 100,
                b = 3,
                e = 0,
                f = 100,
                g = 0,
                h = 100,
                i = "";
            Object.defineProperties(this, {
                width: {
                    enumerable: !0,
                    get: function() {
                        return a
                    },
                    set: function(b) {
                        if (!d(b)) throw new Error("Width must be between 0 and 100.");
                        a = b
                    }
                },
                lines: {
                    enumerable: !0,
                    get: function() {
                        return b
                    },
                    set: function(a) {
                        if ("number" != typeof a) throw new TypeError("Lines must be set to a number.");
                        b = a
                    }
                },
                regionAnchorY: {
                    enumerable: !0,
                    get: function() {
                        return f
                    },
                    set: function(a) {
                        if (!d(a)) throw new Error("RegionAnchorX must be between 0 and 100.");
                        f = a
                    }
                },
                regionAnchorX: {
                    enumerable: !0,
                    get: function() {
                        return e
                    },
                    set: function(a) {
                        if (!d(a)) throw new Error("RegionAnchorY must be between 0 and 100.");
                        e = a
                    }
                },
                viewportAnchorY: {
                    enumerable: !0,
                    get: function() {
                        return h
                    },
                    set: function(a) {
                        if (!d(a)) throw new Error("ViewportAnchorY must be between 0 and 100.");
                        h = a
                    }
                },
                viewportAnchorX: {
                    enumerable: !0,
                    get: function() {
                        return g
                    },
                    set: function(a) {
                        if (!d(a)) throw new Error("ViewportAnchorX must be between 0 and 100.");
                        g = a
                    }
                },
                scroll: {
                    enumerable: !0,
                    get: function() {
                        return i
                    },
                    set: function(a) {
                        var b = c(a);
                        if (b === !1) throw new SyntaxError("An invalid or illegal string was specified.");
                        i = b
                    }
                }
            })
        }
        var f = {
            "": !0,
            up: !0
        };
        a.VTTRegion = a.VTTRegion || e, b.VTTRegion = e
    }(this, this.vttjs || {}),
    function(a) {
        function b(a, b) {
            this.name = "ParsingError", this.code = a.code, this.message = b || a.message
        }

        function c(a) {
            function b(a, b, c, d) {
                return 3600 * (0 | a) + 60 * (0 | b) + (0 | c) + (0 | d) / 1e3
            }
            var c = a.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);
            return c ? c[3] ? b(c[1], c[2], c[3].replace(":", ""), c[4]) : c[1] > 59 ? b(c[1], c[2], 0, c[4]) : b(0, c[1], c[2], c[4]) : null
        }

        function d() {
            this.values = o(null)
        }

        function e(a, b, c, d) {
            var e = d ? a.split(d) : [a];
            for (var f in e)
                if ("string" == typeof e[f]) {
                    var g = e[f].split(c);
                    if (2 === g.length) {
                        var h = g[0],
                            i = g[1];
                        b(h, i)
                    }
                }
        }

        function f(a, f, g) {
            function h() {
                var d = c(a);
                if (null === d) throw new b(b.Errors.BadTimeStamp, "Malformed timestamp: " + k);
                return a = a.replace(/^[^\sa-zA-Z-]+/, ""), d
            }

            function i(a, b) {
                var c = new d;
                e(a, function(a, b) {
                    switch (a) {
                        case "region":
                            for (var d = g.length - 1; d >= 0; d--)
                                if (g[d].id === b) {
                                    c.set(a, g[d].region);
                                    break
                                }
                            break;
                        case "vertical":
                            c.alt(a, b, ["rl", "lr"]);
                            break;
                        case "line":
                            var e = b.split(","),
                                f = e[0];
                            c.integer(a, f), c.percent(a, f) ? c.set("snapToLines", !1) : null, c.alt(a, f, ["auto"]), 2 === e.length && c.alt("lineAlign", e[1], ["start", "middle", "end"]);
                            break;
                        case "position":
                            e = b.split(","), c.percent(a, e[0]), 2 === e.length && c.alt("positionAlign", e[1], ["start", "middle", "end"]);
                            break;
                        case "size":
                            c.percent(a, b);
                            break;
                        case "align":
                            c.alt(a, b, ["start", "middle", "end", "left", "right"])
                    }
                }, /:/, /\s/), b.region = c.get("region", null), b.vertical = c.get("vertical", ""), b.line = c.get("line", "auto"), b.lineAlign = c.get("lineAlign", "start"), b.snapToLines = c.get("snapToLines", !0), b.size = c.get("size", 100), b.align = c.get("align", "middle"), b.position = c.get("position", {
                    start: 0,
                    left: 0,
                    middle: 50,
                    end: 100,
                    right: 100
                }, b.align), b.positionAlign = c.get("positionAlign", {
                    start: "start",
                    left: "start",
                    middle: "middle",
                    end: "end",
                    right: "end"
                }, b.align)
            }

            function j() {
                a = a.replace(/^\s+/, "")
            }
            var k = a;
            if (j(), f.startTime = h(), j(), "-->" !== a.substr(0, 3)) throw new b(b.Errors.BadTimeStamp, "Malformed time stamp (time stamps must be separated by '-->'): " + k);
            a = a.substr(3), j(), f.endTime = h(), j(), i(a, f)
        }

        function g(a, b) {
            function d() {
                function a(a) {
                    return b = b.substr(a.length), a
                }
                if (!b) return null;
                var c = b.match(/^([^<]*)(<[^>]+>?)?/);
                return a(c[1] ? c[1] : c[2])
            }

            function e(a) {
                return p[a]
            }

            function f(a) {
                for (; o = a.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);) a = a.replace(o[0], e);
                return a
            }

            function g(a, b) {
                return !s[b.localName] || s[b.localName] === a.localName
            }

            function h(b, c) {
                var d = q[b];
                if (!d) return null;
                var e = a.document.createElement(d);
                e.localName = d;
                var f = r[b];
                return f && c && (e[f] = c.trim()), e
            }
            for (var i, j = a.document.createElement("div"), k = j, l = []; null !== (i = d());)
                if ("<" !== i[0]) k.appendChild(a.document.createTextNode(f(i)));
                else {
                    if ("/" === i[1]) {
                        l.length && l[l.length - 1] === i.substr(2).replace(">", "") && (l.pop(), k = k.parentNode);
                        continue
                    }
                    var m, n = c(i.substr(1, i.length - 2));
                    if (n) {
                        m = a.document.createProcessingInstruction("timestamp", n), k.appendChild(m);
                        continue
                    }
                    var o = i.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);
                    if (!o) continue;
                    if (m = h(o[1], o[3]), !m) continue;
                    if (!g(k, m)) continue;
                    o[2] && (m.className = o[2].substr(1).replace(".", " ")), l.push(o[1]), k.appendChild(m), k = m
                }
            return j
        }

        function h(a) {
            function b(a, b) {
                for (var c = b.childNodes.length - 1; c >= 0; c--) a.push(b.childNodes[c])
            }

            function c(a) {
                if (!a || !a.length) return null;
                var d = a.pop(),
                    e = d.textContent || d.innerText;
                if (e) {
                    var f = e.match(/^.*(\n|\r)/);
                    return f ? (a.length = 0, f[0]) : e
                }
                return "ruby" === d.tagName ? c(a) : d.childNodes ? (b(a, d), c(a)) : void 0
            }
            var d, e = [],
                f = "";
            if (!a || !a.childNodes) return "ltr";
            for (b(e, a); f = c(e);)
                for (var g = 0; g < f.length; g++) {
                    d = f.charCodeAt(g);
                    for (var h = 0; h < t.length; h++)
                        if (t[h] === d) return "rtl"
                }
            return "ltr"
        }

        function i(a) {
            if ("number" == typeof a.line && (a.snapToLines || a.line >= 0 && a.line <= 100)) return a.line;
            if (!a.track || !a.track.textTrackList || !a.track.textTrackList.mediaElement) return -1;
            for (var b = a.track, c = b.textTrackList, d = 0, e = 0; e < c.length && c[e] !== b; e++) "showing" === c[e].mode && d++;
            return -1 * ++d
        }

        function j() {}

        function k(a, b, c) {
            var d = /MSIE\s8\.0/.test(navigator.userAgent),
                e = "rgba(255, 255, 255, 1)",
                f = "rgba(0, 0, 0, 0.8)";
            d && (e = "rgb(255, 255, 255)", f = "rgb(0, 0, 0)"), j.call(this), this.cue = b, this.cueDiv = g(a, b.text);
            var i = {
                color: e,
                backgroundColor: f,
                position: "relative",
                left: 0,
                right: 0,
                top: 0,
                bottom: 0,
                display: "inline"
            };
            d || (i.writingMode = "" === b.vertical ? "horizontal-tb" : "lr" === b.vertical ? "vertical-lr" : "vertical-rl", i.unicodeBidi = "plaintext"), this.applyStyles(i, this.cueDiv), this.div = a.document.createElement("div"), i = {
                textAlign: "middle" === b.align ? "center" : b.align,
                font: c.font,
                whiteSpace: "pre-line",
                position: "absolute"
            }, d || (i.direction = h(this.cueDiv), i.writingMode = "" === b.vertical ? "horizontal-tb" : "lr" === b.vertical ? "vertical-lr" : "vertical-rl".stylesunicodeBidi = "plaintext"), this.applyStyles(i), this.div.appendChild(this.cueDiv);
            var k = 0;
            switch (b.positionAlign) {
                case "start":
                    k = b.position;
                    break;
                case "middle":
                    k = b.position - b.size / 2;
                    break;
                case "end":
                    k = b.position - b.size
            }
            this.applyStyles("" === b.vertical ? {
                left: this.formatStyle(k, "%"),
                width: this.formatStyle(b.size, "%")
            } : {
                top: this.formatStyle(k, "%"),
                height: this.formatStyle(b.size, "%")
            }), this.move = function(a) {
                this.applyStyles({
                    top: this.formatStyle(a.top, "px"),
                    bottom: this.formatStyle(a.bottom, "px"),
                    left: this.formatStyle(a.left, "px"),
                    right: this.formatStyle(a.right, "px"),
                    height: this.formatStyle(a.height, "px"),
                    width: this.formatStyle(a.width, "px")
                })
            }
        }

        function l(a) {
            var b, c, d, e, f = /MSIE\s8\.0/.test(navigator.userAgent);
            if (a.div) {
                c = a.div.offsetHeight, d = a.div.offsetWidth, e = a.div.offsetTop;
                var g = (g = a.div.childNodes) && (g = g[0]) && g.getClientRects && g.getClientRects();
                a = a.div.getBoundingClientRect(), b = g ? Math.max(g[0] && g[0].height || 0, a.height / g.length) : 0
            }
            this.left = a.left, this.right = a.right, this.top = a.top || e, this.height = a.height || c, this.bottom = a.bottom || e + (a.height || c), this.width = a.width || d, this.lineHeight = void 0 !== b ? b : a.lineHeight, f && !this.lineHeight && (this.lineHeight = 13)
        }

        function m(a, b, c, d) {
            function e(a, b) {
                for (var e, f = new l(a), g = 1, h = 0; h < b.length; h++) {
                    for (; a.overlapsOppositeAxis(c, b[h]) || a.within(c) && a.overlapsAny(d);) a.move(b[h]);
                    if (a.within(c)) return a;
                    var i = a.intersectPercentage(c);
                    g > i && (e = new l(a), g = i), a = new l(f)
                }
                return e || f
            }
            var f = new l(b),
                g = b.cue,
                h = i(g),
                j = [];
            if (g.snapToLines) {
                var k;
                switch (g.vertical) {
                    case "":
                        j = ["+y", "-y"], k = "height";
                        break;
                    case "rl":
                        j = ["+x", "-x"], k = "width";
                        break;
                    case "lr":
                        j = ["-x", "+x"], k = "width"
                }
                var m = f.lineHeight,
                    n = m * Math.round(h),
                    o = c[k] + m,
                    p = j[0];
                Math.abs(n) > o && (n = 0 > n ? -1 : 1, n *= Math.ceil(o / m) * m), 0 > h && (n += "" === g.vertical ? c.height : c.width, j = j.reverse()), f.move(p, n)
            } else {
                var q = f.lineHeight / c.height * 100;
                switch (g.lineAlign) {
                    case "middle":
                        h -= q / 2;
                        break;
                    case "end":
                        h -= q
                }
                switch (g.vertical) {
                    case "":
                        b.applyStyles({
                            top: b.formatStyle(h, "%")
                        });
                        break;
                    case "rl":
                        b.applyStyles({
                            left: b.formatStyle(h, "%")
                        });
                        break;
                    case "lr":
                        b.applyStyles({
                            right: b.formatStyle(h, "%")
                        })
                }
                j = ["+y", "-x", "+x", "-y"], f = new l(b)
            }
            var r = e(f, j);
            b.move(r.toCSSCompatValues(c))
        }

        function n() {}
        var o = Object.create || function() {
            function a() {}
            return function(b) {
                if (1 !== arguments.length) throw new Error("Object.create shim only accepts one parameter.");
                return a.prototype = b, new a
            }
        }();
        b.prototype = o(Error.prototype), b.prototype.constructor = b, b.Errors = {
            BadSignature: {
                code: 0,
                message: "Malformed WebVTT signature."
            },
            BadTimeStamp: {
                code: 1,
                message: "Malformed time stamp."
            }
        }, d.prototype = {
            set: function(a, b) {
                this.get(a) || "" === b || (this.values[a] = b)
            },
            get: function(a, b, c) {
                return c ? this.has(a) ? this.values[a] : b[c] : this.has(a) ? this.values[a] : b
            },
            has: function(a) {
                return a in this.values
            },
            alt: function(a, b, c) {
                for (var d = 0; d < c.length; ++d)
                    if (b === c[d]) {
                        this.set(a, b);
                        break
                    }
            },
            integer: function(a, b) {
                /^-?\d+$/.test(b) && this.set(a, parseInt(b, 10))
            },
            percent: function(a, b) {
                var c;
                return (c = b.match(/^([\d]{1,3})(\.[\d]*)?%$/)) && (b = parseFloat(b), b >= 0 && 100 >= b) ? (this.set(a, b), !0) : !1
            }
        };
        var p = {
                "&amp;": "&",
                "&lt;": "<",
                "&gt;": ">",
                "&lrm;": "‎",
                "&rlm;": "‏",
                "&nbsp;": " "
            },
            q = {
                c: "span",
                i: "i",
                b: "b",
                u: "u",
                ruby: "ruby",
                rt: "rt",
                v: "span",
                lang: "span"
            },
            r = {
                v: "title",
                lang: "lang"
            },
            s = {
                rt: "ruby"
            },
            t = [1470, 1472, 1475, 1478, 1488, 1489, 1490, 1491, 1492, 1493, 1494, 1495, 1496, 1497, 1498, 1499, 1500, 1501, 1502, 1503, 1504, 1505, 1506, 1507, 1508, 1509, 1510, 1511, 1512, 1513, 1514, 1520, 1521, 1522, 1523, 1524, 1544, 1547, 1549, 1563, 1566, 1567, 1568, 1569, 1570, 1571, 1572, 1573, 1574, 1575, 1576, 1577, 1578, 1579, 1580, 1581, 1582, 1583, 1584, 1585, 1586, 1587, 1588, 1589, 1590, 1591, 1592, 1593, 1594, 1595, 1596, 1597, 1598, 1599, 1600, 1601, 1602, 1603, 1604, 1605, 1606, 1607, 1608, 1609, 1610, 1645, 1646, 1647, 1649, 1650, 1651, 1652, 1653, 1654, 1655, 1656, 1657, 1658, 1659, 1660, 1661, 1662, 1663, 1664, 1665, 1666, 1667, 1668, 1669, 1670, 1671, 1672, 1673, 1674, 1675, 1676, 1677, 1678, 1679, 1680, 1681, 1682, 1683, 1684, 1685, 1686, 1687, 1688, 1689, 1690, 1691, 1692, 1693, 1694, 1695, 1696, 1697, 1698, 1699, 1700, 1701, 1702, 1703, 1704, 1705, 1706, 1707, 1708, 1709, 1710, 1711, 1712, 1713, 1714, 1715, 1716, 1717, 1718, 1719, 1720, 1721, 1722, 1723, 1724, 1725, 1726, 1727, 1728, 1729, 1730, 1731, 1732, 1733, 1734, 1735, 1736, 1737, 1738, 1739, 1740, 1741, 1742, 1743, 1744, 1745, 1746, 1747, 1748, 1749, 1765, 1766, 1774, 1775, 1786, 1787, 1788, 1789, 1790, 1791, 1792, 1793, 1794, 1795, 1796, 1797, 1798, 1799, 1800, 1801, 1802, 1803, 1804, 1805, 1807, 1808, 1810, 1811, 1812, 1813, 1814, 1815, 1816, 1817, 1818, 1819, 1820, 1821, 1822, 1823, 1824, 1825, 1826, 1827, 1828, 1829, 1830, 1831, 1832, 1833, 1834, 1835, 1836, 1837, 1838, 1839, 1869, 1870, 1871, 1872, 1873, 1874, 1875, 1876, 1877, 1878, 1879, 1880, 1881, 1882, 1883, 1884, 1885, 1886, 1887, 1888, 1889, 1890, 1891, 1892, 1893, 1894, 1895, 1896, 1897, 1898, 1899, 1900, 1901, 1902, 1903, 1904, 1905, 1906, 1907, 1908, 1909, 1910, 1911, 1912, 1913, 1914, 1915, 1916, 1917, 1918, 1919, 1920, 1921, 1922, 1923, 1924, 1925, 1926, 1927, 1928, 1929, 1930, 1931, 1932, 1933, 1934, 1935, 1936, 1937, 1938, 1939, 1940, 1941, 1942, 1943, 1944, 1945, 1946, 1947, 1948, 1949, 1950, 1951, 1952, 1953, 1954, 1955, 1956, 1957, 1969, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2e3, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025, 2026, 2036, 2037, 2042, 2048, 2049, 2050, 2051, 2052, 2053, 2054, 2055, 2056, 2057, 2058, 2059, 2060, 2061, 2062, 2063, 2064, 2065, 2066, 2067, 2068, 2069, 2074, 2084, 2088, 2096, 2097, 2098, 2099, 2100, 2101, 2102, 2103, 2104, 2105, 2106, 2107, 2108, 2109, 2110, 2112, 2113, 2114, 2115, 2116, 2117, 2118, 2119, 2120, 2121, 2122, 2123, 2124, 2125, 2126, 2127, 2128, 2129, 2130, 2131, 2132, 2133, 2134, 2135, 2136, 2142, 2208, 2210, 2211, 2212, 2213, 2214, 2215, 2216, 2217, 2218, 2219, 2220, 8207, 64285, 64287, 64288, 64289, 64290, 64291, 64292, 64293, 64294, 64295, 64296, 64298, 64299, 64300, 64301, 64302, 64303, 64304, 64305, 64306, 64307, 64308, 64309, 64310, 64312, 64313, 64314, 64315, 64316, 64318, 64320, 64321, 64323, 64324, 64326, 64327, 64328, 64329, 64330, 64331, 64332, 64333, 64334, 64335, 64336, 64337, 64338, 64339, 64340, 64341, 64342, 64343, 64344, 64345, 64346, 64347, 64348, 64349, 64350, 64351, 64352, 64353, 64354, 64355, 64356, 64357, 64358, 64359, 64360, 64361, 64362, 64363, 64364, 64365, 64366, 64367, 64368, 64369, 64370, 64371, 64372, 64373, 64374, 64375, 64376, 64377, 64378, 64379, 64380, 64381, 64382, 64383, 64384, 64385, 64386, 64387, 64388, 64389, 64390, 64391, 64392, 64393, 64394, 64395, 64396, 64397, 64398, 64399, 64400, 64401, 64402, 64403, 64404, 64405, 64406, 64407, 64408, 64409, 64410, 64411, 64412, 64413, 64414, 64415, 64416, 64417, 64418, 64419, 64420, 64421, 64422, 64423, 64424, 64425, 64426, 64427, 64428, 64429, 64430, 64431, 64432, 64433, 64434, 64435, 64436, 64437, 64438, 64439, 64440, 64441, 64442, 64443, 64444, 64445, 64446, 64447, 64448, 64449, 64467, 64468, 64469, 64470, 64471, 64472, 64473, 64474, 64475, 64476, 64477, 64478, 64479, 64480, 64481, 64482, 64483, 64484, 64485, 64486, 64487, 64488, 64489, 64490, 64491, 64492, 64493, 64494, 64495, 64496, 64497, 64498, 64499, 64500, 64501, 64502, 64503, 64504, 64505, 64506, 64507, 64508, 64509, 64510, 64511, 64512, 64513, 64514, 64515, 64516, 64517, 64518, 64519, 64520, 64521, 64522, 64523, 64524, 64525, 64526, 64527, 64528, 64529, 64530, 64531, 64532, 64533, 64534, 64535, 64536, 64537, 64538, 64539, 64540, 64541, 64542, 64543, 64544, 64545, 64546, 64547, 64548, 64549, 64550, 64551, 64552, 64553, 64554, 64555, 64556, 64557, 64558, 64559, 64560, 64561, 64562, 64563, 64564, 64565, 64566, 64567, 64568, 64569, 64570, 64571, 64572, 64573, 64574, 64575, 64576, 64577, 64578, 64579, 64580, 64581, 64582, 64583, 64584, 64585, 64586, 64587, 64588, 64589, 64590, 64591, 64592, 64593, 64594, 64595, 64596, 64597, 64598, 64599, 64600, 64601, 64602, 64603, 64604, 64605, 64606, 64607, 64608, 64609, 64610, 64611, 64612, 64613, 64614, 64615, 64616, 64617, 64618, 64619, 64620, 64621, 64622, 64623, 64624, 64625, 64626, 64627, 64628, 64629, 64630, 64631, 64632, 64633, 64634, 64635, 64636, 64637, 64638, 64639, 64640, 64641, 64642, 64643, 64644, 64645, 64646, 64647, 64648, 64649, 64650, 64651, 64652, 64653, 64654, 64655, 64656, 64657, 64658, 64659, 64660, 64661, 64662, 64663, 64664, 64665, 64666, 64667, 64668, 64669, 64670, 64671, 64672, 64673, 64674, 64675, 64676, 64677, 64678, 64679, 64680, 64681, 64682, 64683, 64684, 64685, 64686, 64687, 64688, 64689, 64690, 64691, 64692, 64693, 64694, 64695, 64696, 64697, 64698, 64699, 64700, 64701, 64702, 64703, 64704, 64705, 64706, 64707, 64708, 64709, 64710, 64711, 64712, 64713, 64714, 64715, 64716, 64717, 64718, 64719, 64720, 64721, 64722, 64723, 64724, 64725, 64726, 64727, 64728, 64729, 64730, 64731, 64732, 64733, 64734, 64735, 64736, 64737, 64738, 64739, 64740, 64741, 64742, 64743, 64744, 64745, 64746, 64747, 64748, 64749, 64750, 64751, 64752, 64753, 64754, 64755, 64756, 64757, 64758, 64759, 64760, 64761, 64762, 64763, 64764, 64765, 64766, 64767, 64768, 64769, 64770, 64771, 64772, 64773, 64774, 64775, 64776, 64777, 64778, 64779, 64780, 64781, 64782, 64783, 64784, 64785, 64786, 64787, 64788, 64789, 64790, 64791, 64792, 64793, 64794, 64795, 64796, 64797, 64798, 64799, 64800, 64801, 64802, 64803, 64804, 64805, 64806, 64807, 64808, 64809, 64810, 64811, 64812, 64813, 64814, 64815, 64816, 64817, 64818, 64819, 64820, 64821, 64822, 64823, 64824, 64825, 64826, 64827, 64828, 64829, 64848, 64849, 64850, 64851, 64852, 64853, 64854, 64855, 64856, 64857, 64858, 64859, 64860, 64861, 64862, 64863, 64864, 64865, 64866, 64867, 64868, 64869, 64870, 64871, 64872, 64873, 64874, 64875, 64876, 64877, 64878, 64879, 64880, 64881, 64882, 64883, 64884, 64885, 64886, 64887, 64888, 64889, 64890, 64891, 64892, 64893, 64894, 64895, 64896, 64897, 64898, 64899, 64900, 64901, 64902, 64903, 64904, 64905, 64906, 64907, 64908, 64909, 64910, 64911, 64914, 64915, 64916, 64917, 64918, 64919, 64920, 64921, 64922, 64923, 64924, 64925, 64926, 64927, 64928, 64929, 64930, 64931, 64932, 64933, 64934, 64935, 64936, 64937, 64938, 64939, 64940, 64941, 64942, 64943, 64944, 64945, 64946, 64947, 64948, 64949, 64950, 64951, 64952, 64953, 64954, 64955, 64956, 64957, 64958, 64959, 64960, 64961, 64962, 64963, 64964, 64965, 64966, 64967, 65008, 65009, 65010, 65011, 65012, 65013, 65014, 65015, 65016, 65017, 65018, 65019, 65020, 65136, 65137, 65138, 65139, 65140, 65142, 65143, 65144, 65145, 65146, 65147, 65148, 65149, 65150, 65151, 65152, 65153, 65154, 65155, 65156, 65157, 65158, 65159, 65160, 65161, 65162, 65163, 65164, 65165, 65166, 65167, 65168, 65169, 65170, 65171, 65172, 65173, 65174, 65175, 65176, 65177, 65178, 65179, 65180, 65181, 65182, 65183, 65184, 65185, 65186, 65187, 65188, 65189, 65190, 65191, 65192, 65193, 65194, 65195, 65196, 65197, 65198, 65199, 65200, 65201, 65202, 65203, 65204, 65205, 65206, 65207, 65208, 65209, 65210, 65211, 65212, 65213, 65214, 65215, 65216, 65217, 65218, 65219, 65220, 65221, 65222, 65223, 65224, 65225, 65226, 65227, 65228, 65229, 65230, 65231, 65232, 65233, 65234, 65235, 65236, 65237, 65238, 65239, 65240, 65241, 65242, 65243, 65244, 65245, 65246, 65247, 65248, 65249, 65250, 65251, 65252, 65253, 65254, 65255, 65256, 65257, 65258, 65259, 65260, 65261, 65262, 65263, 65264, 65265, 65266, 65267, 65268, 65269, 65270, 65271, 65272, 65273, 65274, 65275, 65276, 67584, 67585, 67586, 67587, 67588, 67589, 67592, 67594, 67595, 67596, 67597, 67598, 67599, 67600, 67601, 67602, 67603, 67604, 67605, 67606, 67607, 67608, 67609, 67610, 67611, 67612, 67613, 67614, 67615, 67616, 67617, 67618, 67619, 67620, 67621, 67622, 67623, 67624, 67625, 67626, 67627, 67628, 67629, 67630, 67631, 67632, 67633, 67634, 67635, 67636, 67637, 67639, 67640, 67644, 67647, 67648, 67649, 67650, 67651, 67652, 67653, 67654, 67655, 67656, 67657, 67658, 67659, 67660, 67661, 67662, 67663, 67664, 67665, 67666, 67667, 67668, 67669, 67671, 67672, 67673, 67674, 67675, 67676, 67677, 67678, 67679, 67840, 67841, 67842, 67843, 67844, 67845, 67846, 67847, 67848, 67849, 67850, 67851, 67852, 67853, 67854, 67855, 67856, 67857, 67858, 67859, 67860, 67861, 67862, 67863, 67864, 67865, 67866, 67867, 67872, 67873, 67874, 67875, 67876, 67877, 67878, 67879, 67880, 67881, 67882, 67883, 67884, 67885, 67886, 67887, 67888, 67889, 67890, 67891, 67892, 67893, 67894, 67895, 67896, 67897, 67903, 67968, 67969, 67970, 67971, 67972, 67973, 67974, 67975, 67976, 67977, 67978, 67979, 67980, 67981, 67982, 67983, 67984, 67985, 67986, 67987, 67988, 67989, 67990, 67991, 67992, 67993, 67994, 67995, 67996, 67997, 67998, 67999, 68e3, 68001, 68002, 68003, 68004, 68005, 68006, 68007, 68008, 68009, 68010, 68011, 68012, 68013, 68014, 68015, 68016, 68017, 68018, 68019, 68020, 68021, 68022, 68023, 68030, 68031, 68096, 68112, 68113, 68114, 68115, 68117, 68118, 68119, 68121, 68122, 68123, 68124, 68125, 68126, 68127, 68128, 68129, 68130, 68131, 68132, 68133, 68134, 68135, 68136, 68137, 68138, 68139, 68140, 68141, 68142, 68143, 68144, 68145, 68146, 68147, 68160, 68161, 68162, 68163, 68164, 68165, 68166, 68167, 68176, 68177, 68178, 68179, 68180, 68181, 68182, 68183, 68184, 68192, 68193, 68194, 68195, 68196, 68197, 68198, 68199, 68200, 68201, 68202, 68203, 68204, 68205, 68206, 68207, 68208, 68209, 68210, 68211, 68212, 68213, 68214, 68215, 68216, 68217, 68218, 68219, 68220, 68221, 68222, 68223, 68352, 68353, 68354, 68355, 68356, 68357, 68358, 68359, 68360, 68361, 68362, 68363, 68364, 68365, 68366, 68367, 68368, 68369, 68370, 68371, 68372, 68373, 68374, 68375, 68376, 68377, 68378, 68379, 68380, 68381, 68382, 68383, 68384, 68385, 68386, 68387, 68388, 68389, 68390, 68391, 68392, 68393, 68394, 68395, 68396, 68397, 68398, 68399, 68400, 68401, 68402, 68403, 68404, 68405, 68416, 68417, 68418, 68419, 68420, 68421, 68422, 68423, 68424, 68425, 68426, 68427, 68428, 68429, 68430, 68431, 68432, 68433, 68434, 68435, 68436, 68437, 68440, 68441, 68442, 68443, 68444, 68445, 68446, 68447, 68448, 68449, 68450, 68451, 68452, 68453, 68454, 68455, 68456, 68457, 68458, 68459, 68460, 68461, 68462, 68463, 68464, 68465, 68466, 68472, 68473, 68474, 68475, 68476, 68477, 68478, 68479, 68608, 68609, 68610, 68611, 68612, 68613, 68614, 68615, 68616, 68617, 68618, 68619, 68620, 68621, 68622, 68623, 68624, 68625, 68626, 68627, 68628, 68629, 68630, 68631, 68632, 68633, 68634, 68635, 68636, 68637, 68638, 68639, 68640, 68641, 68642, 68643, 68644, 68645, 68646, 68647, 68648, 68649, 68650, 68651, 68652, 68653, 68654, 68655, 68656, 68657, 68658, 68659, 68660, 68661, 68662, 68663, 68664, 68665, 68666, 68667, 68668, 68669, 68670, 68671, 68672, 68673, 68674, 68675, 68676, 68677, 68678, 68679, 68680, 126464, 126465, 126466, 126467, 126469, 126470, 126471, 126472, 126473, 126474, 126475, 126476, 126477, 126478, 126479, 126480, 126481, 126482, 126483, 126484, 126485, 126486, 126487, 126488, 126489, 126490, 126491, 126492, 126493, 126494, 126495, 126497, 126498, 126500, 126503, 126505, 126506, 126507, 126508, 126509, 126510, 126511, 126512, 126513, 126514, 126516, 126517, 126518, 126519, 126521, 126523, 126530, 126535, 126537, 126539, 126541, 126542, 126543, 126545, 126546, 126548, 126551, 126553, 126555, 126557, 126559, 126561, 126562, 126564, 126567, 126568, 126569, 126570, 126572, 126573, 126574, 126575, 126576, 126577, 126578, 126580, 126581, 126582, 126583, 126585, 126586, 126587, 126588, 126590, 126592, 126593, 126594, 126595, 126596, 126597, 126598, 126599, 126600, 126601, 126603, 126604, 126605, 126606, 126607, 126608, 126609, 126610, 126611, 126612, 126613, 126614, 126615, 126616, 126617, 126618, 126619, 126625, 126626, 126627, 126629, 126630, 126631, 126632, 126633, 126635, 126636, 126637, 126638, 126639, 126640, 126641, 126642, 126643, 126644, 126645, 126646, 126647, 126648, 126649, 126650, 126651, 1114109];
        j.prototype.applyStyles = function(a, b) {
            b = b || this.div;
            for (var c in a) a.hasOwnProperty(c) && (b.style[c] = a[c])
        }, j.prototype.formatStyle = function(a, b) {
            return 0 === a ? 0 : a + b
        }, k.prototype = o(j.prototype), k.prototype.constructor = k, l.prototype.move = function(a, b) {
            switch (b = void 0 !== b ? b : this.lineHeight, a) {
                case "+x":
                    this.left += b, this.right += b;
                    break;
                case "-x":
                    this.left -= b, this.right -= b;
                    break;
                case "+y":
                    this.top += b, this.bottom += b;
                    break;
                case "-y":
                    this.top -= b, this.bottom -= b
            }
        }, l.prototype.overlaps = function(a) {
            return this.left < a.right && this.right > a.left && this.top < a.bottom && this.bottom > a.top
        }, l.prototype.overlapsAny = function(a) {
            for (var b = 0; b < a.length; b++)
                if (this.overlaps(a[b])) return !0;
            return !1
        }, l.prototype.within = function(a) {
            return this.top >= a.top && this.bottom <= a.bottom && this.left >= a.left && this.right <= a.right
        }, l.prototype.overlapsOppositeAxis = function(a, b) {
            switch (b) {
                case "+x":
                    return this.left < a.left;
                case "-x":
                    return this.right > a.right;
                case "+y":
                    return this.top < a.top;
                case "-y":
                    return this.bottom > a.bottom
            }
        }, l.prototype.intersectPercentage = function(a) {
            var b = Math.max(0, Math.min(this.right, a.right) - Math.max(this.left, a.left)),
                c = Math.max(0, Math.min(this.bottom, a.bottom) - Math.max(this.top, a.top)),
                d = b * c;
            return d / (this.height * this.width)
        }, l.prototype.toCSSCompatValues = function(a) {
            return {
                top: this.top - a.top,
                bottom: a.bottom - this.bottom,
                left: this.left - a.left,
                right: a.right - this.right,
                height: this.height,
                width: this.width
            }
        }, l.getSimpleBoxPosition = function(a) {
            var b = a.div ? a.div.offsetHeight : a.tagName ? a.offsetHeight : 0,
                c = a.div ? a.div.offsetWidth : a.tagName ? a.offsetWidth : 0,
                d = a.div ? a.div.offsetTop : a.tagName ? a.offsetTop : 0;
            a = a.div ? a.div.getBoundingClientRect() : a.tagName ? a.getBoundingClientRect() : a;
            var e = {
                left: a.left,
                right: a.right,
                top: a.top || d,
                height: a.height || b,
                bottom: a.bottom || d + (a.height || b),
                width: a.width || c
            };
            return e
        }, n.StringDecoder = function() {
            return {
                decode: function(a) {
                    if (!a) return "";
                    if ("string" != typeof a) throw new Error("Error - expected string data.");
                    return decodeURIComponent(encodeURIComponent(a))
                }
            }
        }, n.convertCueToDOMTree = function(a, b) {
            return a && b ? g(a, b) : null
        };
        var u = .05,
            v = "sans-serif",
            w = "1.5%";
        n.processCues = function(a, b, c) {
            function d(a) {
                for (var b = 0; b < a.length; b++)
                    if (a[b].hasBeenReset || !a[b].displayState) return !0;
                return !1
            }
            if (!a || !b || !c) return null;
            for (; c.firstChild;) c.removeChild(c.firstChild);
            var e = a.document.createElement("div");
            if (e.style.position = "absolute", e.style.left = "0", e.style.right = "0", e.style.top = "0", e.style.bottom = "0", e.style.margin = w, c.appendChild(e), d(b)) {
                var f = [],
                    g = l.getSimpleBoxPosition(e),
                    h = Math.round(g.height * u * 100) / 100,
                    i = {
                        font: h + "px " + v
                    };
                ! function() {
                    for (var c, d, h = 0; h < b.length; h++) d = b[h], c = new k(a, d, i), e.appendChild(c.div), m(a, c, g, f), d.displayState = c.div, f.push(l.getSimpleBoxPosition(c))
                }()
            } else
                for (var j = 0; j < b.length; j++) e.appendChild(b[j].displayState)
        }, n.Parser = function(a, b, c) {
            c || (c = b, b = {}), b || (b = {}), this.window = a, this.vttjs = b, this.state = "INITIAL", this.buffer = "", this.decoder = c || new TextDecoder("utf8"), this.regionList = []
        }, n.Parser.prototype = {
            reportOrThrowError: function(a) {
                if (!(a instanceof b)) throw a;
                this.onparsingerror && this.onparsingerror(a)
            },
            parse: function(a) {
                function c() {
                    for (var a = i.buffer, b = 0; b < a.length && "\r" !== a[b] && "\n" !== a[b];) ++b;
                    var c = a.substr(0, b);
                    return "\r" === a[b] && ++b, "\n" === a[b] && ++b, i.buffer = a.substr(b), c
                }

                function g(a) {
                    var b = new d;
                    if (e(a, function(a, c) {
                            switch (a) {
                                case "id":
                                    b.set(a, c);
                                    break;
                                case "width":
                                    b.percent(a, c);
                                    break;
                                case "lines":
                                    b.integer(a, c);
                                    break;
                                case "regionanchor":
                                case "viewportanchor":
                                    var e = c.split(",");
                                    if (2 !== e.length) break;
                                    var f = new d;
                                    if (f.percent("x", e[0]), f.percent("y", e[1]), !f.has("x") || !f.has("y")) break;
                                    b.set(a + "X", f.get("x")), b.set(a + "Y", f.get("y"));
                                    break;
                                case "scroll":
                                    b.alt(a, c, ["up"])
                            }
                        }, /=/, /\s/), b.has("id")) {
                        var c = new(i.vttjs.VTTRegion || i.window.VTTRegion);
                        c.width = b.get("width", 100), c.lines = b.get("lines", 3), c.regionAnchorX = b.get("regionanchorX", 0), c.regionAnchorY = b.get("regionanchorY", 100), c.viewportAnchorX = b.get("viewportanchorX", 0), c.viewportAnchorY = b.get("viewportanchorY", 100), c.scroll = b.get("scroll", ""), i.onregion && i.onregion(c), i.regionList.push({
                            id: b.get("id"),
                            region: c
                        })
                    }
                }

                function h(a) {
                    e(a, function(a, b) {
                        switch (a) {
                            case "Region":
                                g(b)
                        }
                    }, /:/)
                }
                var i = this;
                a && (i.buffer += i.decoder.decode(a, {
                    stream: !0
                }));
                try {
                    var j;
                    if ("INITIAL" === i.state) {
                        if (!/\r\n|\n/.test(i.buffer)) return this;
                        j = c();
                        var k = j.match(/^WEBVTT([ \t].*)?$/);
                        if (!k || !k[0]) throw new b(b.Errors.BadSignature);
                        i.state = "HEADER"
                    }
                    for (var l = !1; i.buffer;) {
                        if (!/\r\n|\n/.test(i.buffer)) return this;
                        switch (l ? l = !1 : j = c(), i.state) {
                            case "HEADER":
                                /:/.test(j) ? h(j) : j || (i.state = "ID");
                                continue;
                            case "NOTE":
                                j || (i.state = "ID");
                                continue;
                            case "ID":
                                if (/^NOTE($|[ \t])/.test(j)) {
                                    i.state = "NOTE";
                                    break
                                }
                                if (!j) continue;
                                if (i.cue = new(i.vttjs.VTTCue || i.window.VTTCue)(0, 0, ""), i.state = "CUE", -1 === j.indexOf("-->")) {
                                    i.cue.id = j;
                                    continue
                                }
                            case "CUE":
                                try {
                                    f(j, i.cue, i.regionList)
                                } catch (m) {
                                    i.reportOrThrowError(m), i.cue = null, i.state = "BADCUE";
                                    continue
                                }
                                i.state = "CUETEXT";
                                continue;
                            case "CUETEXT":
                                var n = -1 !== j.indexOf("-->");
                                if (!j || n && (l = !0)) {
                                    i.oncue && i.oncue(i.cue), i.cue = null, i.state = "ID";
                                    continue
                                }
                                i.cue.text && (i.cue.text += "\n"), i.cue.text += j;
                                continue;
                            case "BADCUE":
                                j || (i.state = "ID");
                                continue
                        }
                    }
                } catch (m) {
                    i.reportOrThrowError(m), "CUETEXT" === i.state && i.cue && i.oncue && i.oncue(i.cue), i.cue = null, i.state = "INITIAL" === i.state ? "BADWEBVTT" : "BADCUE"
                }
                return this
            },
            flush: function() {
                var a = this;
                try {
                    if (a.buffer += a.decoder.decode(), (a.cue || "HEADER" === a.state) && (a.buffer += "\n\n", a.parse()), "INITIAL" === a.state) throw new b(b.Errors.BadSignature)
                } catch (c) {
                    a.reportOrThrowError(c)
                }
                return a.onflush && a.onflush(), this
            }
        }, a.WebVTT = n
    }(this, this.vttjs || {});
var luxanimals = window.luxanimals || {},
    STAGE_W = 960,
    STAGE_H = 640,
    FRAME_DELTA = 40,
    DEG_TO_RAD = Math.PI / 180,
    RAD_TO_DEG = 180 / Math.PI,
    log = !0,
    stage;
! function() {
    var a = [];
    luxanimals.buttons = {
        left: !1,
        right: !1,
        space: !1,
        mouseDown: !1,
        down: !1,
        up: !1,
        p: !1
    }, luxanimals.debug = luxanimals.debug || {
        physics: !1,
        fps: !1
    }, luxanimals.loadedAssets = {}, luxanimals.addObject = function(b, c) {
        0 === c ? a.unshift(b) : c ? a.splice(c, 0, b) : a.push(b)
    }, luxanimals.removeObject = function(b) {
        for (var c = a.length; c-- > 0;)
            if (a[c] === b) return a.splice(c, 1), !0;
        return !1
    }, luxanimals.removeAllObjects = function() {
        a.length = 0
    };
    var b = document.getElementById("canvas");
    stage = new createjs.Stage(b), stage.snapToPixelEnabled = !0, createjs.Ticker.useRAF = !0, createjs.Ticker.setInterval(0);
    var c = 1e3 / 15,
        d = FRAME_DELTA;
    luxanimals.tick = function(b, e) {
        b > c && (b = c), d += b;
        for (var f = a.slice(0), g = 0, h = f.length; h > g; g++) f[g].update(b, e);
        d > FRAME_DELTA ? (d -= FRAME_DELTA, stage.tickOnUpdate = !0) : stage.tickOnUpdate = !1, stage.update()
    }
}();
var _gaq = _gaq || [];
! function() {
    var a = function(a, b) {
        b = Array.prototype.slice.call(b), b.unshift(a), _gaq.push(b)
    };
    luxanimals.trackEvent = function() {
        a("_trackEvent", arguments)
    }, luxanimals.trackScreen = function() {
        a("_trackPageview", arguments)
    }, luxanimals.trackSocial = function() {
        a("_trackSocial", arguments)
    }
}();
var b2Vec2 = Box2D.Common.Math.b2Vec2,
    b2BodyDef = Box2D.Dynamics.b2BodyDef,
    b2Body = Box2D.Dynamics.b2Body,
    b2FixtureDef = Box2D.Dynamics.b2FixtureDef,
    b2Fixture = Box2D.Dynamics.b2Fixture,
    b2World = Box2D.Dynamics.b2World,
    b2MassData = Box2D.Collision.Shapes.b2MassData,
    b2PolygonShape = Box2D.Collision.Shapes.b2PolygonShape,
    b2CircleShape = Box2D.Collision.Shapes.b2CircleShape,
    b2DebugDraw = Box2D.Dynamics.b2DebugDraw,
    b2BuoyancyController = Box2D.Dynamics.Controllers.b2BuoyancyController,
    b2DistanceJointDef = Box2D.Dynamics.Joints.b2DistanceJointDef,
    b2RevoluteJointDef = Box2D.Dynamics.Joints.b2RevoluteJointDef,
    b2DistanceJoint = Box2D.Dynamics.Joints.b2DistanceJoint,
    b2WeldJointDef = Box2D.Dynamics.Joints.b2WeldJointDef,
    b2ContactListener = Box2D.Dynamics.b2ContactListener,
    b2FilterData = Box2D.Dynamics.b2FilterData,
    trace = window.trace || function() {
        log && window.console && console.log && console.log.apply(console, arguments)
    };
luxanimals.preloader = function(a) {
        var b, c = a.baseurl ? a.baseurl : "",
            d = a.onComplete;
        a = null;
        var e = function(a, e) {
                trace("[preloader] - init", a), e = e || [];
                var g = 0;
                b = new createjs.LoadQueue, b.installPlugin(createjs.Sound), b.setMaxConnections(8), b.addEventListener("progress", function(a) {
                    luxanimals.uiManager.preloader.progress(a)
                }), b.addEventListener("complete", function() {
                    g++ > 0 || (trace("[preloader] - load complete"), f(), d && (d(), d = null), a = null, b = null, luxanimals.uiManager.preloader.complete(),
                        luxanimals.uiManager.preloader.hide())
                }), luxanimals.uiManager.preloader.show();
                for (var h in a) e.push({
                    id: h,
                    src: c + a[h]
                });
                b.loadManifest(e)
            },
            f = function() {
                var a = b.getItems(!0);
                for (var c in a) {
                    var d = a[c];
                    "coinPic" == d.item.id && console.log(d), "image" == d.item.type && (luxanimals.loadedAssets[d.item.id] = {
                        img: d.result
                    })
                }
            };
        return {
            init: e,
            getLoader: function() {
                return b
            }
        }
    },
    function(a) {
        var b = function() {
                throw "Box2dHelper cannot be instantiated"
            },
            c = [],
            d = {
                density: 0
            };
        b.world = null, b.scale = 30, b.boundsFilter = 8, b.actors = c, b.bodiesToAdd = [], b.bodiesToRemove = [], b.jointsToRemove = [], b.densityChanges = [], b.filtersToChange = [], b.createBounds = function() {
            var a = function(a, c, d) {
                    var e = b.createFixture({
                            isSensor: !0,
                            filter: {
                                categoryBits: b.boundsFilter
                            }
                        }).rectangle(d, 20),
                        f = b.createBody(a, c, [e], {
                            type: "static"
                        });
                    f.SetUserData("bounds")
                },
                c = function(a, c, d) {
                    var e = b.createFixture({
                            isSensor: !0,
                            filter: {
                                categoryBits: b.boundsFilter
                            }
                        }).rectangle(20, d),
                        f = b.createBody(a, c, [e], {
                            type: "static"
                        });
                    f.SetUserData("bounds")
                };
            return {
                lower: a,
                side: c
            }
        }, b.disableCollision = function(a) {
            trace("[box2dHelper] - disable collision");
            var c = a.GetFixtureList(),
                d = c.GetFilterData();
            d.maskBits = b.boundsFilter, c.SetFilterData(d)
        }, b.tweenDensity = function(a, b, c, e) {
            d.density = b, $(d).delay(e.delay).animate({
                density: 5
            }, {
                step: function() {
                    a.m_fixtureList.SetDensity(5), a.ResetMassData(), e.actor.settings.xOffset = e.actorOffsetX
                },
                duration: e.speed,
                complete: function() {}
            })
        }, b.tweenKinematic = function(a, c, d, e, f) {
            var g = a.GetPosition().Copy();
            createjs.Tween.get(g).wait(e).to({
                x: c.x / b.scale,
                y: c.y / b.scale
            }, d, createjs.Ease.sineInOut).call(f).addEventListener("change", function(b) {
                a.SetPosition(b.target.target)
            })
        }, b.createFixture = function(a) {
            return new b.createdFixture(a)
        }, b.createdFixture = function(a) {
            var b = new b2FixtureDef;
            a && (b.density = a.density || 0, b.friction = a.friction || 0, b.restitution = a.restitution || 0, b.isSensor = a.isSensor === !0, a.filter && (b.filter.groupIndex = a.filter.groupIndex || 0, a.filter.categoryBits && (b.filter.categoryBits = a.filter.categoryBits), a.filter.maskBits && (b.filter.maskBits = a.filter.maskBits))), this.fixDef = b
        }, b.createdFixture.prototype = {
            fixDef: null,
            rectangle: function(a, c, d) {
                var e = this.fixDef;
                return this.fixDef = null, e.shape = new b2PolygonShape, e.shape.SetAsBox(.5 * a / b.scale, .5 * c / b.scale), d && (e.shape.m_centroid = new b2Vec2(d.x / b.scale, d.y / b.scale)), e
            },
            orientedRectangle: function(a, c, d, e, f) {
                var g = this.fixDef;
                return this.fixDef = null, g.shape = new b2PolygonShape, g.shape.SetAsOrientedBox(.5 * a / b.scale, .5 * c / b.scale, new b2Vec2(d.x / b.scale, d.y / b.scale), e * DEG_TO_RAD), f && (g.shape.m_centroid = new b2Vec2(f.x / b.scale, f.y / b.scale)), g
            },
            circle: function(a) {
                var c = this.fixDef;
                return this.fixDef = null, c.shape = new b2CircleShape(a / b.scale), c
            },
            polygon: function(a, c) {
                var d = this.fixDef;
                this.fixDef = null;
                var e = 0,
                    f = 0,
                    g = !1;
                d.shape = new b2PolygonShape, c && (e = c.xOffset ? c.xOffset : 0, f = c.yOffset ? c.yOffset : 0, g = c.xInv ? c.xInv : !1);
                var h = b.convertPolygonPoints(a, e, f, g);
                return d.shape.SetAsArray(h, h.length), d
            }
        }, b.convertPolygonPoints = function(a, b, c, d) {
            for (var e = [], f = 0; f < a.length; f++) {
                var g = new b2Vec2;
                d && (a[f].x *= -1), g.Set(a[f].x + b, a[f].y + c), e[f] = g
            }
            return e
        }, b.createBody = function(a, c, d, e) {
            trace("[Box2dHelper] - createBody");
            var f = new b2BodyDef;
            if (e) {
                if (e.type) switch (e.type) {
                    case "dynamic":
                        f.type = b2Body.b2_dynamicBody;
                        break;
                    case "static":
                        f.type = b2Body.b2_staticBody;
                        break;
                    case "kinematic":
                        f.type = b2Body.b2_kinematicBody
                } else f.type = b2Body.b2_dynamicBody;
                f.linearDamping = e.linearDamping || 0, f.angularDamping = e.angularDamping || 0, f.fixedRotation = e.fixedRotation || !1, f.bullet = e.inertiaScale || 1, f.inertiaScale = e.inertiaScale || 1, f.userData = e.userData || null, f.angle = e.angle ? e.angle * DEG_TO_RAD : 0, e.allowSleep === !1 && (f.allowSleep = !1), e.awake === !1 && (f.awake = !1), e.active === !1 && (f.active = !1)
            } else f.type = b2Body.b2_dynamicBody;
            f.position.x = a / b.scale, f.position.y = c / b.scale;
            for (var g = b.world.CreateBody(f), h = 0; h < d.length; h++) g.CreateFixture(d[h]);
            return g
        }, b.createJoint = function() {
            return this.createJointMethods
        }, b.createJointMethods = {
            distance: function(a, c, d, e, f) {
                var g = new b2DistanceJointDef;
                g.Initialize(a, c, d, e), f && (g.frequencyHz = f.frequencyHz || 0, g.dampingRatio = f.dampingRatio || 0, g.collideConnected = f.collideConnected || !1, f.length && (g.length = f.length), f.anchorA && (g.localAnchorA = new b2Vec2(f.anchorA[0], f.anchorA[1])), f.anchorB && (g.localAnchorB = new b2Vec2(f.anchorB[0], f.anchorB[1])));
                var h = b.world.CreateJoint(g);
                return h
            },
            revolute: function(a, c, d, e) {
                var f = new b2RevoluteJointDef;
                f.Initialize(a, c, d), e && (f.enableMotor = e.enableMotor || !1, f.maxMotorTorque = e.maxTorque || 0, f.referenceAngle = e.referenceAngle ? e.referenceAngle * DEG_TO_RAD : 0, e.anchorA && (f.localAnchorA = new b2Vec2(e.anchorA[0], e.anchorA[1])), e.anchorB && (f.localAnchorB = new b2Vec2(e.anchorB[0], e.anchorB[1])), e.collideConnected === !1 && (f.collideConnected = !1), e.angleLimits && (f.enableLimit = !0, f.lowerAngle = e.angleLimits[0] * DEG_TO_RAD, f.upperAngle = e.angleLimits[1] * DEG_TO_RAD));
                var g = b.world.CreateJoint(f);
                return g
            },
            weld: function(a, c, d) {
                var e = new b2WeldJointDef;
                e.Initialize(a, c, d);
                var f = b.world.CreateJoint(e);
                return f
            },
            prismatic: function() {},
            pulley: function() {},
            gear: function() {},
            line: function() {},
            mouse: function() {}
        }, b.actor = function(a, c, d, e) {
            this.body = a, this.skin = c, this.id = d, this.settings = $.extend({}, this.defaultSettings, e), this.skin && (this.parent = c.parent, b.addActor(this))
        }, b.actor.prototype = {
            body: null,
            skin: null,
            id: null,
            hits: 0,
            settings: null,
            defaultSettings: {
                xOffset: 0,
                yOffset: 0,
                rotOffset: 0,
                noAngle: !1,
                noX: !1,
                noY: !1
            },
            onHit: null,
            onEnd: null,
            onRemove: null,
            onUpdate: null,
            hitActive: !0,
            boundsFilter: !1,
            onOutOfBounds: function() {
                this.boundsFilter || (this.skin && this.skin.parent ? this.skin.parent.removeChild(this.skin) : trace("-----------------> SKIN " + this.id + " HAS NO PARENT <----------------"), b.removeActor(this), b.bodiesToRemove.push(this.body), this.onRemove && this.onRemove(), this.boundsFilter = !0)
            },
            update: function(a, c) {
                var d = this.settings,
                    e = this.body.GetWorldCenter();
                d.noAngle || (this.skin.rotation = this.body.GetAngle() * RAD_TO_DEG + d.rotOffset), d.noX || (this.skin.x = e.x * b.scale + d.xOffset), d.noY || (this.skin.y = e.y * b.scale + d.yOffset), this.onUpdate && this.onUpdate(a, c)
            }
        }, b.addActor = function(a) {
            trace("[Box2dHelper] - addActor"), c.push(a)
        }, b.removeActor = function(a) {
            trace("[Box2dHelper] - removeActor"), c.splice(c.indexOf(a), 1)
        }, b.updateActors = function(a, b) {
            for (var d = 0; d < c.length; d++) c[d].update(a, b)
        }, b.tick = function() {
            for (var a, c = b.world, d = b.bodiesToRemove, e = b.jointsToRemove, f = b.densityChanges; d.length;) a = d.pop(), a.SetUserData(null), c.DestroyBody(a);
            for (; e.length;) a = e.pop(), c.DestroyJoint(a);
            for (; f.length;) a = f.pop(), a.body.m_fixtureList.SetDensity(a.density), a.body.ResetMassData()
        }, b.clearAll = function() {
            trace("[Box2dHelper] - clearAll"), b.world = null, c.length = 0, b.bodiesToAdd.length = 0, b.bodiesToRemove.length = 0, b.jointsToRemove.length = 0, b.densityChanges.length = 0, b.filtersToChange.length = 0
        }, a.Box2dHelper = b
    }(window), luxanimals.Physics = function() {
        trace("[physics] - init");
        var a, b, c, d, e, f = 30,
            g = 24,
            h = 1 / g,
            i = {
                ships: -2,
                projectiles: -3,
                scenery: -4,
                level: -5
            },
            j = {
                ships: 2,
                projectiles: 3,
                scenery: 4
            },
            k = !1,
            l = [],
            m = [],
            n = [],
            o = [],
            p = [],
            q = 0,
            r = !1,
            s = (Math.round(500 * Math.random()), []),
            t = null,
            u = 0,
            v = -1.5,
            w = 1.5,
            x = new b2Vec2(0, 10),
            y = function() {
                trace("[physics] - init"), a = new b2World(x, !0), Box2dHelper.scale = f, Box2dHelper.world = a, c = new b2ContactListener, Box2dHelper.createBounds().side(-100, .5 * STAGE_H, STAGE_H + 200), Box2dHelper.createBounds().side(STAGE_W + 100, .5 * STAGE_H, STAGE_H + 200), Box2dHelper.createBounds().lower(.5 * STAGE_W, STAGE_H + 100, STAGE_W + 200), a.SetContactListener(c), c.BeginContact = Y, c.EndContact = Z, z(), luxanimals.debug.physics && T(), luxanimals.addObject(X), luxanimals.debug, luxanimals.addObject(luxanimals.physics)
            },
            z = function() {
                b = new b2BuoyancyController, b.gravity = new b2Vec2(0, 10), b.useWorldGravity = !1, b.normal.Set(0, -1), b.offset = -550 / f, b.density = 2.5, b.linearDrag = 5, b.angularDrag = 3
            },
            A = function(a) {
                b.offset = -a / f;
                for (var c = 0, d = m.length; d > c; c++) m[c].anchorJoint.SetLength((STAGE_H - a - 35) / f)
            },
            B = function() {
                clearInterval(t), t = null;
                for (var a = 0, b = p.length; b > a; a++) p[a].hitActive = !0;
                for (p = [], a = 0; a < m.length; a++) m[a].body.GetUserData().alreadyHit = !1
            },
            C = function(a) {
                clearInterval(t), t = null, m[a].body.SetAngularDamping(4.5), m[a].body.SetLinearDamping(1), Box2dHelper.jointsToRemove.push(m[a].anchorJoint);
                var b;
                b = m[a].left ? 50 : -50, Box2dHelper.tweenDensity(m[a].body, .6, 8, {
                    delay: 400,
                    speed: 2e3,
                    actor: m[a].body.GetUserData(),
                    actorOffsetX: b,
                    actorOffsetY: 20
                })
            },
            D = function(a, b, c) {
                var d = Box2dHelper.createFixture({
                        isSensor: !0
                    }).circle(11),
                    e = Box2dHelper.createBody(a, b, [d], {
                        type: "static"
                    }),
                    f = new Box2dHelper.actor(e, null, "coin", {});
                f.num = c, f.onHit = E, e.SetUserData(f)
            },
            E = function(a) {
                a && "cannonball" === a.id && (luxanimals.coins.collected(this.num), Box2dHelper.bodiesToRemove.push(this.body))
            },
            F = function(a, b, c, d, e, g, h) {
                var k = "cloud";
                h && (k = "sun");
                var l = Box2dHelper.createFixture({
                        density: .1,
                        filter: {
                            groupIndex: i.scenery,
                            categoryBits: j.scenery
                        }
                    }).circle(.8 * c),
                    m = Box2dHelper.createBody(a, b, [l], {
                        linearDamping: .2,
                        fixedRotation: !0,
                        allowSleep: !1
                    }),
                    n = Box2dHelper.createFixture({
                        isSensor: !0
                    }).rectangle(5, 5),
                    o = Box2dHelper.createBody(a, 0, [n], {
                        type: "static"
                    }),
                    p = Box2dHelper.createJoint().distance(m, o, m.GetWorldCenter(), o.GetWorldCenter(), {
                        length: b / f
                    }),
                    q = new Box2dHelper.actor(m, e, k, {
                        noAngle: !0
                    });
                return q.boundsFilter = !0, q.joint = p, q.rope = g, m.SetUserData(q), m
            },
            G = function(a, b, c, f, g, h, i) {
                trace("[physics] createCannonball");
                var k = Box2dHelper.createFixture({
                        density: 2.8,
                        friction: .5,
                        restitution: .2,
                        filter: {
                            categoryBits: j.projectiles
                        }
                    }).circle(11.5),
                    l = Box2dHelper.createBody(a, b, [k], {}),
                    m = new Box2dHelper.actor(l, c, "cannonball", {});
                return h ? (m.onHit = P, m.onUpdate = h, m.onRemove = i, l.ApplyImpulse(new b2Vec2(Math.cos(f * DEG_TO_RAD) * -g, Math.sin(f * DEG_TO_RAD) * -g), new b2Vec2(a / 30, b / 30)), clearInterval(t), t = setInterval(M, 6e3), d = l) : e = l, l.SetUserData(m), m
            },
            H = function(a) {
                var c = 0,
                    d = 0,
                    e = -200,
                    f = !1,
                    g = "shipL";
                a.left || (c = 7.5, f = !0, g = "shipR", e = STAGE_W + 200);
                var h = [{
                        x: .4,
                        y: 5.2
                    }, {
                        x: 6.5,
                        y: 5.4
                    }, {
                        x: 5.3,
                        y: 6.3
                    }, {
                        x: 1,
                        y: 6.3
                    }],
                    k = [{
                        x: .1,
                        y: 4.5
                    }, {
                        x: 2.33,
                        y: 4.5
                    }, {
                        x: 3,
                        y: 5.3
                    }, {
                        x: .4,
                        y: 5.3
                    }];
                a.left || (h.reverse(), k.reverse());
                var n = Box2dHelper.createFixture({
                        density: 1.25,
                        friction: .4,
                        restitution: .6,
                        filter: {
                            groupIndex: i.ships,
                            categoryBits: j.ships
                        }
                    }).polygon(h, {
                        offsetX: c,
                        offsetY: d,
                        xInv: f
                    }),
                    o = Box2dHelper.createFixture({
                        density: .09,
                        friction: .4,
                        restitution: .6,
                        filter: {
                            groupIndex: i.ships,
                            categoryBits: j.ships
                        }
                    }).polygon(k, {
                        offsetX: c,
                        offsetY: d,
                        xInv: f
                    }),
                    p = Box2dHelper.createBody(e, a.y + 50, [n, o], {
                        allowSleep: !1
                    });
                p.CreateFixture(n), p.CreateFixture(o), p.SetAngularDamping(2);
                var q, r, s = Box2dHelper.createFixture({
                    isSensor: !0
                }).rectangle(5, 5);
                v = -.5, w = .5, a.left ? (q = Box2dHelper.createBody(e, STAGE_H - 10, [s], {
                    type: "kinematic"
                }), t = new Box2dHelper.actor(p, a.skin, g, {
                    xOffset: 20
                }), Box2dHelper.tweenKinematic(q, {
                    x: a.x + 100,
                    y: STAGE_H - 10
                }, 2700, 4e3, I), r = Box2dHelper.createJoint().distance(p, q, p.GetWorldCenter(), q.GetWorldCenter(), {
                    anchorA: [2.4, 5.7],
                    length: .5,
                    frequencyHz: .3,
                    dampingRatio: .1
                })) : (q = Box2dHelper.createBody(e, STAGE_H - 10, [s], {
                    type: "kinematic"
                }), t = new Box2dHelper.actor(p, a.skin, g, {
                    xOffset: -20
                }), Box2dHelper.tweenKinematic(q, {
                    x: a.x + 120,
                    y: STAGE_H - 10
                }, 2700, 4e3, I), r = Box2dHelper.createJoint().distance(p, q, p.GetWorldCenter(), q.GetWorldCenter(), {
                    anchorA: [-2.4, 5.7],
                    length: .5,
                    frequencyHz: .3,
                    dampingRatio: .1
                })), b.AddBody(p), l.push(p);
                var t;
                return t.onHit = N, t.boundsFilter = !0, t.alreadyHit = !1, p.SetUserData(t), m.push({
                    body: p,
                    anchorJoint: r,
                    anchor: q,
                    left: a.left
                }), p
            },
            I = function() {
                for (var a = 0; a < m.length; a++) v = -1.1, w = 1.1, $(b).animate({
                    density: 1.5
                }, 1e3), m[a].body.SetAngularDamping(0)
            },
            J = function() {
                for (var a = 0; a < m.length; a++) {
                    var b = m[a].body.GetAngle();
                    v > b ? m[a].body.SetAngle(v) : b > w && m[a].body.SetAngle(w)
                }
            },
            K = function(a, b, c) {
                r = !1;
                var d = m[a],
                    e = 5 * c / -86 * (b / 20),
                    f = 80 * b / 25 - (-c + 1) / 2;
                0 === a && (e *= -1, f *= -1), d.body.ApplyImpulse(new b2Vec2(f, 0), m[0].body.GetWorldCenter()), d.body.SetAngularVelocity(e)
            },
            L = function(a, b, c, d) {
                var e = Box2dHelper.createFixture({
                        density: .1,
                        friction: .2
                    }).rectangle(65, 35),
                    f = Box2dHelper.createBody(a.x, a.y, [e]),
                    g = Box2dHelper.createFixture({
                        density: .1,
                        friction: .2
                    }).rectangle(87, 16),
                    h = Box2dHelper.createBody(b.x, b.y, [g]),
                    i = Box2dHelper.createFixture({
                        density: .1,
                        friction: .2
                    }).rectangle(51, 17),
                    j = Box2dHelper.createBody(c.x, c.y, [i]),
                    k = new Box2dHelper.actor(f, a, "shipGold"),
                    m = new Box2dHelper.actor(h, b, "shipGold"),
                    n = new Box2dHelper.actor(j, c, "shipGold");
                f.SetUserData(k), h.SetUserData(m), j.SetUserData(n);
                var o = 3 * Math.random(),
                    p = 2 * Math.random(),
                    q = 1 * Math.random();
                d || (o *= -1, p *= -1, q *= -1), l.push(f), l.push(h), l.push(j), f.ApplyImpulse(new b2Vec2(o, 3 * Math.random() - 5), f.GetWorldCenter()), h.ApplyImpulse(new b2Vec2(p, 3 * Math.random() - 4), h.GetWorldCenter()), j.ApplyImpulse(new b2Vec2(q, 3 * Math.random() - 3), j.GetWorldCenter())
            },
            M = function() {
                if (d) {
                    var a = d.GetUserData();
                    a && a.onOutOfBounds(), clearInterval(t), t = null
                }
            },
            N = function(a, b) {
                if (trace("[physics] ship hit"), a)
                    if ("cannonball" !== a.id || this.alreadyHit) "cannonball" === a.id && b.FlagForFiltering();
                    else {
                        this.alreadyHit = !0;
                        var c = a.body.GetWorldCenter();
                        luxanimals.scene.smoke(c.x * f, c.y * f), luxanimals.gameManager.hitShip(this.id), "shipR" === this.id ? luxanimals.uiManager.message.score(15e3, this.skin.x, this.skin.y, "green") : luxanimals.uiManager.message.score(15e3, this.skin.x, this.skin.y, "pink"), Box2dHelper.disableCollision(a.body), b.FlagForFiltering()
                    }
            },
            O = function(a) {
                a.hits++, 1 === a.hits && luxanimals.clouds.crack(a), a.hits >= 2 && (a.boundsFilter = !1, a.rope.parent.removeChild(a.rope), Box2dHelper.disableCollision(a.body), Box2dHelper.jointsToRemove.push(a.joint), a.body.SetFixedRotation(!1))
            },
            P = function(a, b) {
                if (trace("[cannonball] - hit: " + a), b.IsTouching() && (this.hits++, this.hits >= 30 && this.onOutOfBounds()), a && a.hitActive) {
                    "volcano" !== a.id && "coin" !== a.id && ("spout" !== a.id && (a.hitActive = !1, p.push(a)), luxanimals.scene.cannonballHit(this.skin.x, this.skin.y));
                    var c = 0;
                    switch (a.id) {
                        case "whale":
                        case "coconut":
                        case "tail":
                        case "spout":
                        case "tree":
                        case "lightning":
                            c = 1e3;
                            break;
                        case "cloud":
                            c = 1e3, O(a);
                            break;
                        case "volcanoClouds":
                            c = 1e3, luxanimals.soundManager.playSound("thunder");
                            break;
                        case "volcanoCenter":
                            c = 2400;
                            break;
                        case "goat":
                            c = 2400, luxanimals.soundManager.playSound("goat");
                            break;
                        case "goat":
                            c = 2400, luxanimals.soundManager.playSound("goat");
                            break;
                        case "door":
                            luxanimals.soundManager.playSound("doorclose");
                            break;
                        case "sun":
                            c = 2400, O(a);
                            break;
                        case "chest":
                            c = 5e3
                    }
                    0 !== c && (luxanimals.gameManager.score(c), luxanimals.uiManager.message.score(c, this.skin.x, this.skin.y))
                }
            },
            Q = function(a, c) {
                var d, e, f;
                "Health Crate" === a && (d = Box2dHelper.createFixture({
                    density: 1.2,
                    friction: 1
                }).rectangle(35, 35), e = Box2dHelper.createBody(Math.round(860 * Math.random() + 50), 0, [d]), f = new Box2dHelper.actor(e, c, "powerup"), e.SetUserData(f), b.AddBody(e))
            };
        o[0] = function() {
            var a, b = [],
                c = function() {
                    trace("[physics] level 1 init"), s = [];
                    var b = Box2dHelper.createFixture({
                        density: 1,
                        friction: .5,
                        filter: {
                            categoryBits: j.scenery
                        }
                    }).circle(100);
                    a = Box2dHelper.createBody(480, 525, [b], {
                        type: "static"
                    }), n.push(h)
                },
                d = function(c, d, e, f) {
                    var h, k, l, m, n, o, p = 5,
                        q = Modernizr.android || Modernizr.phone,
                        r = q ? 4 : 2,
                        s = q ? 32 : 2;
                    switch (c) {
                        case 1:
                            h = Box2dHelper.createFixture({
                                density: .02,
                                filter: {
                                    groupIndex: i.scenery,
                                    categoryBits: j.scenery
                                }
                            }).rectangle(20, 50), k = Box2dHelper.createFixture({
                                density: .02,
                                filter: {
                                    groupIndex: i.scenery,
                                    categoryBits: j.scenery
                                }
                            }).orientedRectangle(20, 50, {
                                x: 15,
                                y: -45
                            }, 40), l = Box2dHelper.createBody(d.x, d.y, [h, k], {
                                type: "dynamic",
                                asleep: !0,
                                angle: 0
                            }), m = Box2dHelper.createJoint().revolute(a, l, a.GetWorldCenter(), {
                                anchorA: [-2.4, -1.8],
                                anchorB: [0, 1.3],
                                referenceAngle: -35,
                                collideConnected: !1,
                                angleLimits: [-90, 60]
                            }), n = Box2dHelper.createJoint().distance(a, l, a.GetWorldCenter(), l.GetWorldCenter(), {
                                anchorA: [-7, 0],
                                anchorB: [1, -2],
                                dampingRatio: s,
                                frequencyHz: p,
                                length: 6
                            }), o = new Box2dHelper.actor(l, d, "tree", {
                                rotOffset: 45
                            });
                            break;
                        case 0:
                            h = Box2dHelper.createFixture({
                                density: .02,
                                filter: {
                                    groupIndex: i.scenery,
                                    categoryBits: j.scenery
                                }
                            }).rectangle(20, 130), l = Box2dHelper.createBody(d.x, d.y, [h], {
                                type: "dynamic",
                                asleep: !0,
                                angle: 0
                            }), m = Box2dHelper.createJoint().revolute(a, l, a.GetWorldCenter(), {
                                anchorA: [1, -3.1],
                                anchorB: [0, 2.2],
                                collideConnected: !1,
                                angleLimits: [-90, 50]
                            }), n = Box2dHelper.createJoint().distance(a, l, a.GetWorldCenter(), l.GetWorldCenter(), {
                                anchorA: [4.5, -5],
                                anchorB: [0, -2],
                                dampingRatio: r,
                                frequencyHz: p,
                                length: 4.8
                            }), o = new Box2dHelper.actor(l, d, "tree", {});
                            break;
                        case 2:
                            h = Box2dHelper.createFixture({
                                density: .02,
                                filter: {
                                    groupIndex: i.scenery,
                                    categoryBits: j.scenery
                                }
                            }).rectangle(20, 130), l = Box2dHelper.createBody(d.x, d.y, [h], {
                                type: "dynamic",
                                asleep: !0,
                                angle: 0
                            }), m = Box2dHelper.createJoint().revolute(a, l, a.GetWorldCenter(), {
                                anchorA: [3, -1.5],
                                anchorB: [0, 2.2],
                                collideConnected: !1,
                                angleLimits: [-30, 80]
                            }), n = Box2dHelper.createJoint().distance(a, l, a.GetWorldCenter(), l.GetWorldCenter(), {
                                anchorA: [7, 0],
                                anchorB: [0, -2],
                                dampingRatio: r,
                                frequencyHz: p,
                                length: 7
                            }), o = new Box2dHelper.actor(l, d, "tree", {})
                    }
                    for (var t = [], u = 0, v = f.length; v > u; u++) {
                        var w = Box2dHelper.createFixture({
                                density: .4,
                                friction: 1,
                                restitution: .3
                            }).circle(13),
                            x = Box2dHelper.createBody(f[u].x, f[u].y, [w], {
                                angularDamping: .1,
                                type: "dynamic",
                                asleep: !0
                            }),
                            y = new Box2dHelper.actor(x, f[u], "coconut", {});
                        x.SetUserData(y);
                        var z = Box2dHelper.createJoint().weld(x, l, x.GetWorldCenter());
                        t.push(z)
                    }
                    o.onHit = g, o.joints = [m, n], o.coconutJoints = t, o.leafs = e, l.SetUserData(o), b.push(o)
                },
                e = function(a) {
                    var b = Box2dHelper.createFixture({
                            friction: 1,
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).rectangle(60, 50),
                        c = Box2dHelper.createBody(a.x - 70, a.y + 85, [b], {
                            type: "static"
                        }),
                        d = new Box2dHelper.actor(c, null, "chest", {});
                    d.onHit = f, c.SetUserData(d)
                },
                f = function(a) {
                    a && "cannonball" === a.id && (this.hitActive = !1, luxanimals.levels.getCurrentLevel().chestHit())
                },
                g = function(a) {
                    a && "cannonball" === a.id && (this.hits++, luxanimals.levels.getCurrentLevel().detachLeafs(this.leafs, this.hits), this.coconutJoints.length >= 1 && (Box2dHelper.jointsToRemove = Box2dHelper.jointsToRemove.concat(this.coconutJoints[0]), this.coconutJoints.splice(0, 1)), this.hits >= 2 && (Box2dHelper.jointsToRemove = Box2dHelper.jointsToRemove.concat(this.joints), this.body.m_fixtureList.SetDensity(1), this.body.ResetMassData()))
                },
                h = function() {
                    for (var a = 0; a < b.length; a++) b[a].body.GetUserData() ? b[a].body.GetUserData().hitActive = !0 : b.splice(a, 1)
                };
            return {
                init: c,
                createTree: d,
                createChest: e,
                endTurn: h
            }
        }(), o[1] = function() {
            var a, b = function(a) {
                    var b = {
                            density: 1,
                            friction: .4,
                            restitution: .5,
                            filter: {
                                categoryBits: j.scenery
                            }
                        },
                        e = [{
                            x: -5.3,
                            y: 2.4
                        }, {
                            x: -4.4,
                            y: -.6
                        }, {
                            x: -1.1,
                            y: -2.3
                        }, {
                            x: 2.5,
                            y: 0
                        }, {
                            x: 3,
                            y: 3
                        }, {
                            x: 1,
                            y: 5
                        }, {
                            x: -4,
                            y: 5
                        }],
                        f = Box2dHelper.createFixture(b).circle(78),
                        g = Box2dHelper.createFixture(b).polygon(e, {}),
                        h = Box2dHelper.createBody(570, 420, [g, f], {
                            type: "static"
                        }),
                        i = {
                            density: .08,
                            friction: .4,
                            restitution: .5,
                            filter: {
                                categoryBits: j.scenery
                            }
                        },
                        k = Box2dHelper.createFixture(i).rectangle(125, 22),
                        l = Box2dHelper.createFixture(i).orientedRectangle(70, 20, {
                            x: -100,
                            y: -10
                        }, 10),
                        m = Box2dHelper.createFixture(i).orientedRectangle(75, 20, {
                            x: -30,
                            y: -35
                        }, -50),
                        n = Box2dHelper.createBody(355, 500, [k, l, m], {
                            type: "dynamic"
                        }),
                        o = (Box2dHelper.createJoint().revolute(h, n, h.GetWorldCenter(), {
                            anchorA: [-5, 2.6],
                            anchorB: [2, 0],
                            collideConnected: !1,
                            angleLimits: [-20, 80]
                        }), Box2dHelper.createJoint().distance(h, n, h.GetWorldCenter(), n.GetWorldCenter(), {
                            anchorA: [-9, -4],
                            anchorB: [-2, 0],
                            dampingRatio: 0,
                            frequencyHz: 2,
                            length: 6
                        }));
                    c(o);
                    var p = new Box2dHelper.actor(n, a, "tail", {
                            noX: !0,
                            noY: !0,
                            rotOffset: -10
                        }),
                        q = new Box2dHelper.actor(h, null, "whale");
                    q.onHit = p.onHit = d, h.SetUserData(q), n.SetUserData(p)
                },
                c = function(a) {
                    $(a).animate({
                        m_length: 5.8
                    }, 700, function() {
                        $(a).animate({
                            m_length: 6.8
                        }, 700, function() {
                            c(a)
                        })
                    })
                },
                d = function(a) {
                    a && "cannonball" === a.id && luxanimals.levels.getCurrentLevel().whaleHit()
                },
                e = function() {
                    trace("[physics] - createSpout"), a && h();
                    var b = Box2dHelper.createFixture({
                        isSensor: !0
                    }).rectangle(25, 222);
                    a = Box2dHelper.createBody(575, 454, [b], {
                        type: "static"
                    });
                    var c = new Box2dHelper.actor(a, null, "spout", {});
                    c.onHit = i, a.SetUserData(c)
                },
                g = function(b) {
                    a && a.SetPosition(new b2Vec2(a.GetPosition().x, (b + 111) / f))
                },
                h = function() {
                    a && Box2dHelper.bodiesToRemove.push(a)
                },
                i = function(a) {
                    if (a && "cannonball" === a.id) {
                        var b = a.body.GetLinearVelocity();
                        a.body.ApplyImpulse(new b2Vec2(-b.x, -15), a.body.GetWorldCenter())
                    }
                };
            return {
                createSpout: e,
                moveSpout: g,
                removeSpout: h,
                createWhale: b
            }
        }(), o[2] = function() {
            var a = function() {
                    {
                        var a = Box2dHelper.createFixture({
                                density: .2,
                                friction: .5,
                                filter: {
                                    categoryBits: j.scenery
                                }
                            }).rectangle(250, 20),
                            d = Box2dHelper.createBody(480, 590, [a]),
                            e = Box2dHelper.createFixture({
                                isSensor: !0
                            }).rectangle(5, 5),
                            f = Box2dHelper.createBody(480, 640, [e], {
                                type: "static"
                            });
                        Box2dHelper.createJoint().distance(d, f, d.GetWorldCenter(), f.GetWorldCenter(), {
                            length: 3,
                            frequencyHz: 1,
                            dampingRatio: 1
                        })
                    }
                    b.AddBody(d), l.push(d), c()
                },
                c = function() {
                    for (var a = [
                            [405, 550],
                            [455, 550],
                            [505, 550],
                            [555, 550],
                            [430, 469],
                            [480, 469],
                            [530, 469],
                            [455, 388],
                            [505, 388],
                            [480, 307]
                        ], c = 0, d = a.length; d > c; c++) {
                        var e = Box2dHelper.createFixture({
                                density: .1,
                                friction: .3,
                                filter: {
                                    categoryBits: j.scenery
                                }
                            }).rectangle(50, 80),
                            f = Box2dHelper.createBody(a[c][0], a[c][1], [e], {
                                awake: !1
                            });
                        b.AddBody(f)
                    }
                };
            return {
                init: a
            }
        }(), o[3] = function() {
            var a, b, c, d = function() {
                    var d = Box2dHelper.createFixture({
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).orientedRectangle(10, 140, {
                            x: -10,
                            y: 20
                        }, 20),
                        e = Box2dHelper.createFixture({
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).orientedRectangle(10, 45, {
                            x: 84,
                            y: -30
                        }, -20),
                        f = Box2dHelper.createFixture({
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).orientedRectangle(10, 10, {
                            x: -30,
                            y: 50
                        }, 0),
                        g = Box2dHelper.createFixture({
                            restitution: .3,
                            friction: .5,
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).orientedRectangle(80, 10, {
                            x: 43,
                            y: -15
                        }, 0),
                        l = (Box2dHelper.createBody(335, 415, [d, e, f], {
                            type: "static"
                        }), Box2dHelper.createBody(335, 415, [g], {
                            type: "static"
                        })),
                        q = new Box2dHelper.actor(l, null, "volcano", {});
                    q.onHit = p, l.SetUserData(q);
                    var r = Box2dHelper.createFixture({
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).orientedRectangle(10, 190, {
                            x: 124,
                            y: 32
                        }, -25),
                        s = Box2dHelper.createFixture({
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).orientedRectangle(10, 80, {
                            x: 0,
                            y: -15
                        }, 19),
                        t = Box2dHelper.createFixture({
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).orientedRectangle(10, 10, {
                            x: 150,
                            y: 65
                        }, 0),
                        u = Box2dHelper.createFixture({
                            restitution: .3,
                            friction: .5,
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).orientedRectangle(90, 10, {
                            x: 50,
                            y: -10
                        }, 0),
                        v = (Box2dHelper.createBody(480, 380, [r, s, t], {
                            type: "static"
                        }), Box2dHelper.createBody(480, 380, [u], {
                            type: "static"
                        })),
                        w = new Box2dHelper.actor(l, null, "volcano", {});
                    w.onHit = p, v.SetUserData(w);
                    var x = Box2dHelper.createFixture({
                            isSensor: !0
                        }).rectangle(50, 50),
                        y = Box2dHelper.createBody(450, 390, [x], {
                            type: "static"
                        }),
                        z = new Box2dHelper.actor(y, null, "volcanoCenter", {});
                    z.onHit = k, z.onEnd = m, y.SetUserData(z);
                    var A = [{
                            x: 0,
                            y: 4
                        }, {
                            x: 1.5,
                            y: 0
                        }, {
                            x: 3,
                            y: 4
                        }],
                        B = Box2dHelper.createFixture({
                            density: 1,
                            friction: 10,
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).polygon(A, {});
                    a = Box2dHelper.createBody(383, 384, [B], {
                        type: "static"
                    });
                    var C = Box2dHelper.createFixture({
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).rectangle(960, 100),
                        D = Box2dHelper.createBody(480, 90, [C], {
                            type: "static"
                        }),
                        E = new Box2dHelper.actor(D, null, "volcanoClouds");
                    E.onHit = h, D.SetUserData(E);
                    for (var F = [], G = 0; 3 > G; G++) switch (G) {
                        case 0:
                            F[G] = Box2dHelper.createFixture({
                                density: 1,
                                filter: {
                                    groupIndex: i.scenery,
                                    categoryBits: j.scenery
                                }
                            }).orientedRectangle(90, 30, {
                                x: 55,
                                y: 5
                            }, 6);
                            break;
                        case 1:
                            F[G] = Box2dHelper.createFixture({
                                density: 1,
                                filter: {
                                    groupIndex: i.scenery,
                                    categoryBits: j.scenery
                                }
                            }).orientedRectangle(90, 10, {
                                x: 120,
                                y: -20
                            }, -25)
                    }
                    for (b = Box2dHelper.createBody(277, 550, F, {
                            type: "static"
                        }), F = [], G = 0; 3 > G; G++) switch (G) {
                        case 0:
                            F[G] = Box2dHelper.createFixture({
                                density: 1,
                                filter: {
                                    groupIndex: i.scenery,
                                    categoryBits: j.scenery
                                }
                            }).orientedRectangle(120, 10, {
                                x: 50,
                                y: 5
                            }, 28);
                            break;
                        case 1:
                            F[G] = Box2dHelper.createFixture({
                                density: 1,
                                filter: {
                                    groupIndex: i.scenery,
                                    categoryBits: j.scenery
                                }
                            }).orientedRectangle(100, 30, {
                                x: 140,
                                y: 40
                            }, -5)
                    }
                    c = Box2dHelper.createBody(470, 520, F, {
                        type: "static"
                    });
                    var H = Box2dHelper.createFixture({
                            isSensor: !0
                        }).rectangle(100, 40),
                        I = Box2dHelper.createBody(590, 530, [H], {
                            type: "static"
                        }),
                        J = new Box2dHelper.actor(I, null, "boostRight", {});
                    J.onHit = n, J.onEnd = o, I.SetUserData(J);
                    var K = Box2dHelper.createBody(350, 530, [H], {
                            type: "static"
                        }),
                        L = new Box2dHelper.actor(K, null, "boostLeft", {});
                    L.onHit = n, L.onEnd = o, K.SetUserData(L)
                },
                e = function(a, d) {
                    var e = Box2dHelper.createFixture({
                            density: .1,
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).rectangle(12, 51),
                        f = Box2dHelper.createBody(292, 520, [e], {
                            angularDamping: 3
                        }),
                        g = new Box2dHelper.actor(f, a, "door");
                    f.SetUserData(g);
                    var h = (Box2dHelper.createJoint().revolute(b, f, b.GetWorldCenter(), {
                            anchorA: [-.1, -.2],
                            anchorB: [0, .8],
                            referenceAngle: 10,
                            collideConnected: !1,
                            angleLimits: [-90, 10]
                        }), Box2dHelper.createJoint().distance(f, b, f.GetWorldCenter(), b.GetWorldCenter(), {
                            anchorA: [0, -.5],
                            anchorB: [4, -2],
                            dampingRatio: .5,
                            frequencyHz: .5,
                            length: 3.2
                        }), Box2dHelper.createBody(665, 520, [e], {
                            angularDamping: 3
                        })),
                        k = new Box2dHelper.actor(h, d, "door");
                    h.SetUserData(k);
                    Box2dHelper.createJoint().revolute(c, h, c.GetWorldCenter(), {
                        anchorA: [6.8, 1],
                        anchorB: [0, 1],
                        referenceAngle: -10,
                        collideConnected: !1,
                        angleLimits: [-10, 90]
                    }), Box2dHelper.createJoint().distance(h, c, h.GetWorldCenter(), c.GetWorldCenter(), {
                        anchorA: [.2, -.5],
                        anchorB: [.2, -1],
                        dampingRatio: .5,
                        frequencyHz: .5,
                        length: 5.5
                    })
                },
                g = function(a) {
                    var b = Box2dHelper.createFixture({
                            density: .4,
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).rectangle(83, 100),
                        c = Box2dHelper.createBody(a.x, a.y, [b], {
                            awake: !1
                        }),
                        d = new Box2dHelper.actor(c, a, "bolt", {});
                    c.SetUserData(d)
                },
                h = function(a) {
                    a && "cannonball" === a.id && luxanimals.levels.getCurrentLevel().cloudHit(a.skin.x)
                },
                k = function(a) {
                    a && ("cannonball" === a.id ? (luxanimals.levels.getCurrentLevel().showTunnels(), a.body.SetLinearDamping(4.3), a.body.SetAngularDamping(4.3)) : "shipGold" === a.id && a.onOutOfBounds())
                },
                m = function(a) {
                    a && "cannonball" === a.id && (a.body.SetLinearDamping(0), a.body.SetAngularDamping(0))
                },
                n = function(a) {
                    a && ("cannonball" === a.id ? "boostRight" === this.id ? a.body.ApplyImpulse(new b2Vec2(10, 0), a.body.GetWorldCenter()) : a.body.ApplyImpulse(new b2Vec2(-8, 0), a.body.GetWorldCenter()) : "shipGold" === a.id && a.onOutOfBounds())
                },
                o = function(a) {
                    a && "cannonball" === a.id && luxanimals.levels.getCurrentLevel().hideTunnels()
                },
                p = function(a) {
                    a && ("cannonball" === a.id ? M() : "shipGold" === a.id && a.onOutOfBounds())
                },
                q = function(a) {
                    var b = Box2dHelper.createFixture({
                            density: .5,
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).rectangle(47, 66),
                        c = Box2dHelper.createBody(303, 427, [b], {
                            awake: !1
                        }),
                        d = new Box2dHelper.actor(c, a, "goat");
                    c.SetUserData(d)
                },
                r = function(a) {
                    var b = Box2dHelper.createFixture({
                            density: .5,
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).rectangle(47, 66),
                        c = Box2dHelper.createBody(630, 406, [b], {
                            awake: !1
                        }),
                        d = new Box2dHelper.actor(c, a, "goat");
                    c.SetUserData(d)
                },
                s = function(a, b, c) {
                    var d, e, f = Box2dHelper.createFixture({
                            density: 4,
                            friction: 1,
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).circle(25),
                        g = Box2dHelper.createFixture({
                            density: 4,
                            friction: 1,
                            filter: {
                                groupIndex: i.scenery,
                                categoryBits: j.scenery
                            }
                        }).orientedRectangle(20, 95, {
                            x: 0,
                            y: -70
                        }, 0);
                    switch (a) {
                        case "left":
                            d = Box2dHelper.createBody(385, 310, [f]), e = Box2dHelper.createBody(385, 310, [g], {
                                fixedRotation: !0
                            }), d.ApplyImpulse(new b2Vec2(0, -100), d.GetWorldCenter());
                            break;
                        case "right":
                            d = Box2dHelper.createBody(525, 310, [f]), e = Box2dHelper.createBody(525, 310, [g], {
                                fixedRotation: !0
                            }), d.ApplyImpulse(new b2Vec2(0, -100), d.GetWorldCenter())
                    }
                    l.push(d), l.push(e);
                    var h = new Box2dHelper.actor(d, b, "fireball", {}),
                        k = new Box2dHelper.actor(e, c, "fireball");
                    h.onUpdate = t, h.tailActor = k, d.SetUserData(h), e.SetUserData(k)
                },
                t = function() {
                    var a = this.body.GetWorldCenter(),
                        b = this.body.GetLinearVelocity().y,
                        c = 2.5 - 5 * b / 25;
                    b > 0 && (this.tailActor.skin.scaleY = -1, c -= .2), this.tailActor.body.SetPosition(new b2Vec2(a.x, a.y + c)), a.y > 14 && this.hitActive && (this.skin.parent.removeChild(this.skin), this.tailActor.skin.parent.removeChild(this.tailActor.skin), Box2dHelper.bodiesToRemove.push(this.body), Box2dHelper.bodiesToRemove.push(this.tailActor.body), Box2dHelper.removeActor(this), Box2dHelper.removeActor(this.tailActor))
                },
                u = function(b) {
                    a.SetPosition(0 === b ? new b2Vec2(383 / f, 384 / f) : new b2Vec2(430 / f, 384 / f))
                };
            return {
                init: d,
                erupt: s,
                doors: e,
                goatLeft: q,
                goatRight: r,
                setTurn: u,
                lightning: g
            }
        }();
        var R = function(a) {
                a ? (h = 0, null !== t && clearInterval(t)) : (h = 1 / g, null !== t && (clearInterval(t), t = setInterval(M, 7e3)))
            },
            S = function(a) {
                Box2dHelper.bodiesToRemove.push(a)
            },
            T = function(b) {
                if (k || b === !1) b === !1 && ($("#debugCanvas").hide(), a.m_debugDraw.m_sprite.graphics.clear(), k = !1);
                else {
                    trace("[physics] - debug");
                    var c = $("#debugCanvas").show().get(0).getContext("2d"),
                        d = new b2DebugDraw;
                    d.SetSprite(c), d.SetDrawScale(f), d.SetFillAlpha(.7), d.SetLineThickness(1), d.SetFlags(b2DebugDraw.e_shapeBit | b2DebugDraw.e_jointBit), a.SetDebugDraw(d), k = !0
                }
            },
            U = {
                update: function() {
                    if (luxanimals.buttons.space) {
                        if (u++, u % 50 === 0) {
                            if (e) {
                                var a = e.GetUserData();
                                try {
                                    a.onOutOfBounds()
                                } catch (b) {}
                                e = null
                            }
                            var c = new createjs.Bitmap(luxanimals.loadedAssets.cannonball.img);
                            c.mouseEnabled = !1, c.regX = 11, c.regY = 11, luxanimals.scene.getCannonballHolder().addChild(c), G(stage.mouseX, stage.mouseY, c, 0, 0, null, null)
                        }
                    } else u = 49
                }
            },
            V = {
                x: 0,
                y: 0
            },
            W = function(c, d) {
                var e = createjs.Ticker.getMeasuredFPS(10);
                for (g = Math.min(Math.max(10, Math.round(e)), 24), 0 !== h && (h = 1 / g, 0 === h && (h = .041666667)), q += c; q > 0;) {
                    if (0 !== x.x)
                        for (var f = l.length; f-- > 0;) V.x = -l[f].GetMass() * x.x, l[f].ApplyForce(V, l[f].GetWorldCenter());
                    b.Step(h), a.Step(h, 6, 3), a.ClearForces(), Box2dHelper.tick(), q -= 10 * FRAME_DELTA / g
                }
                J(), Box2dHelper.updateActors(c, d), luxanimals.debug.physics && a.DrawDebugData()
            },
            X = function() {
                var a, b = {
                        min: -2,
                        max: 2
                    },
                    c = 0,
                    d = 0,
                    e = .05,
                    f = 0,
                    g = !1,
                    h = function() {
                        trace("[physics] - change wind"), d = b.min + Math.random() * (b.max - b.min), luxanimals.uiManager.setWindMeter(d), a = Math.round(200 * Math.random()) + 200, f = 0, g = !1
                    },
                    i = function(b) {
                        if (g) {
                            if (f += b / FRAME_DELTA, ~~f % a === 0) {
                                trace("[physics] wind apply turbulence");
                                var h = c - 1 + Math.random() * (c + 1 - (c - 1));
                                x.Set(h, 10), luxanimals.scene.setWind(c)
                            }
                        } else d > c ? (c += e, c >= d && (g = !0, c = d)) : (c -= e, d >= c && (g = !0, c = d)), x.Set(c, 10), luxanimals.scene.setWind(c)
                    };
                return {
                    change: h,
                    update: i,
                    getWind: function() {
                        return c
                    }
                }
            }(),
            Y = function(a) {
                var b = a.GetFixtureA().GetBody(),
                    c = a.GetFixtureB().GetBody(),
                    d = b.GetUserData(),
                    e = c.GetUserData();
                d && ("bounds" === d ? e ? e.onOutOfBounds() : Box2dHelper.bodiesToRemove.push(c) : d.onHit && d.hitActive && d.onHit(e, a)), e && ("bounds" === e ? d ? d.onOutOfBounds() : Box2dHelper.bodiesToRemove.push(b) : e.onHit && e.hitActive && e.onHit(d, a))
            },
            Z = function(a) {
                var b = a.GetFixtureA().GetBody(),
                    c = a.GetFixtureB().GetBody(),
                    d = b.GetUserData(),
                    e = c.GetUserData();
                d && d.onEnd && d.onEnd(e, a), e && e.onEnd && e.onEnd(d, a)
            },
            _ = function() {
                trace("[physics] - clearAll"), clearInterval(t), t = null, luxanimals.removeObject(luxanimals.physics), luxanimals.removeObject(X), luxanimals.removeObject(U), a.ClearForces(), k && T(!1), Box2dHelper.clearAll()
            };
        return {
            init: y,
            createCoin: D,
            createPowerup: Q,
            windManager: X,
            createShip: H,
            createCannonball: G,
            createCloud: F,
            shipFire: K,
            shipGoldDamage: L,
            removeBody: S,
            waves: A,
            levels: o,
            update: W,
            pauseResume: R,
            debugScene: T,
            endTurn: B,
            clearAll: _,
            gameOver: C
        }
    }, luxanimals.Particles = function() {
        function a() {}
        var b = [],
            c = 6,
            d = 4,
            e = 0,
            f = [],
            g = 11,
            h = .97,
            i = new createjs.Container;
        i.name = "wind", stage.addChild(i), a.prototype.x = 0, a.prototype.y = 0, a.prototype.bmp = null, a.prototype.velocityY = 0, a.prototype.velocityX = 0, a.prototype.angularVelocity = 0, a.prototype.lifeSpan = 1, a.prototype.shapeArray = null, a.prototype.color = null;
        var j = function() {
                for (var a = 0; c > a; a++) {
                    var d = new createjs.Bitmap(luxanimals.loadedAssets.wind.img);
                    d.snapToPixel = !0, d.mouseEnabled = !1, d.x = Math.random() * STAGE_W, d.y = 500 * Math.random(), i.addChild(d), b.push({
                        bmp: d,
                        velocity: [0, Math.round(2 * Math.random())]
                    })
                }
            },
            k = function(b) {
                trace("[particles] - shipDamage");
                for (var c = 0; g > c; c++) {
                    var d, e = (Math.round(6 * Math.random()), c);
                    switch (e > 6 && (e -= 7), e) {
                        case 0:
                            d = new createjs.Bitmap(luxanimals.loadedAssets.debris1.img);
                            break;
                        case 1:
                            d = new createjs.Bitmap(luxanimals.loadedAssets.debris2.img);
                            break;
                        case 2:
                            d = new createjs.Bitmap(luxanimals.loadedAssets.debris3.img);
                            break;
                        case 3:
                            d = new createjs.Bitmap(luxanimals.loadedAssets.debris4.img);
                            break;
                        case 4:
                            d = new createjs.Bitmap(luxanimals.loadedAssets.debris5.img);
                            break;
                        case 5:
                            d = new createjs.Bitmap(luxanimals.loadedAssets.debris6.img);
                            break;
                        case 6:
                            d = new createjs.Bitmap(luxanimals.loadedAssets.debris7.img)
                    }
                    d.x = b.x, d.y = b.y, d.mouseEnabled = !1;
                    var h = new a;
                    h.bmp = d, h.velocityX = 50 * Math.random() - 25, h.velocityY = 40 * Math.random() + 20, h.angularVelocity = 50 * Math.random() - 25, f.push(h), stage.addChild(d)
                }
            },
            l = function(a) {
                for (var g, i = a / FRAME_DELTA, j = 0; c > j; j++) g = b[j], g.bmp.y += g.velocity[1] * i, g.bmp.x += 7 * e * i, g.bmp.y >= 500 && (g.bmp.y = 0),
                    g.bmp.x >= STAGE_W ? g.bmp.x = 0 : g.bmp.x <= 0 && (g.bmp.x = STAGE_W), g.scaleX = g.scaleY = e;
                for (var k, l = 0, m = f.length; m > l; l++) k = f[l], k && (k.bmp.x -= k.velocityX * i, k.bmp.y -= k.velocityY * i, k.bmp.rotation += k.angularVelocity * i, k.velocityX += (k.velocityX * h - k.velocityX) * i, k.velocityY += (k.velocityY * h - k.velocityY) * i, k.velocityY -= d * i, k.lifeSpan -= .03 * i, k.lifeSpan < 0 && (stage.removeChild(k.bmp), f.splice(l, 1)))
            },
            m = function() {
                for (var a = 0; a < f.length; a++) stage.removeChild(f[a].bmp);
                f.length = 0
            };
        return {
            update: l,
            clear: m,
            initWeatherParticles: j,
            shipDamage: k,
            setWind: function(a) {
                e = a
            }
        }
    }, luxanimals.Scene = function() {
        var a = [{
            bmp: $("#wavesForeground"),
            top: 0,
            x: -10,
            y: 550,
            angle: 0,
            speed: .07,
            radius: 10
        }, {
            bmp: $("#wavesMiddleground"),
            top: 0,
            x: -40,
            y: 525,
            angle: 20,
            speed: .06,
            radius: 7
        }, {
            bmp: $("#wavesBackground"),
            top: 0,
            x: -10,
            y: 515,
            angle: 10,
            speed: .05,
            radius: 5
        }];
        a[0].style = a[0].bmp.get(0).style, a[1].style = a[1].bmp.get(0).style, a[2].style = a[2].bmp.get(0).style;
        var b = [],
            c = new createjs.SpriteSheet({
                images: [luxanimals.loadedAssets.splash.img],
                animations: {
                    all: {
                        frames: [0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                        next: !1
                    }
                },
                frames: [
                    [0, 0, 186, 88, 0, 186, 0],
                    [186, 0, 186, 88, 0, 186, 0],
                    [372, 0, 186, 88, 0, 186, 0],
                    [558, 0, 186, 88, 0, 186, 0],
                    [744, 0, 186, 88, 0, 186, 0],
                    [930, 0, 186, 88, 0, 186, 0],
                    [1116, 0, 186, 88, 0, 186, 0],
                    [1302, 0, 186, 88, 0, 186, 0],
                    [1488, 0, 186, 88, 0, 186, 0],
                    [1674, 0, 186, 88, 0, 186, 0],
                    [1860, 0, 186, 88, 0, 186, 0],
                    [0, 88, 186, 88, 0, 186, 0]
                ]
            }),
            d = new createjs.SpriteSheet({
                images: [luxanimals.loadedAssets.cannonball_hit.img],
                animations: {
                    all: {
                        frames: [0, 0, 1, 1, 2, 2, 3, 3],
                        next: !1
                    }
                },
                frames: [
                    [0, 0, 53, 36, 0, 53, 0],
                    [53, 0, 53, 36, 0, 53, 0],
                    [106, 0, 53, 36, 0, 53, 0],
                    [159, 0, 53, 36, 0, 53, 0]
                ]
            }),
            e = new createjs.SpriteSheet({
                images: [luxanimals.loadedAssets.smoke.img],
                animations: {
                    all: {
                        frames: [0, 1, 2, 3, 4, 5, 6, 7, 8],
                        next: !1
                    }
                },
                frames: [
                    [0, 0, 148, 150, 0, 148, 0],
                    [148, 0, 148, 150, 0, 148, 0],
                    [296, 0, 148, 150, 0, 148, 0],
                    [444, 0, 148, 150, 0, 148, 0],
                    [592, 0, 148, 150, 0, 148, 0],
                    [740, 0, 148, 150, 0, 148, 0],
                    [888, 0, 148, 150, 0, 148, 0],
                    [1036, 0, 148, 150, 0, 148, 0],
                    [1184, 0, 148, 150, 0, 148, 0],
                    [1332, 0, 148, 150, 0, 148, 0]
                ]
            }),
            f = new createjs.Container,
            g = new createjs.Container,
            h = new createjs.Container,
            i = new createjs.Container,
            j = new createjs.Container,
            k = new createjs.Container,
            l = new createjs.Container,
            m = new createjs.Container;
        f.name = "cloudsbg", g.name = "level", h.name = "coins", i.name = "cloudsfg", k.name = "cannonball", l.name = "level", m.name = "ship";
        var n = function(a) {
                trace("[scene] - init"), luxanimals.physics.init(), b[0] = new luxanimals.ship({
                    x: 0,
                    y: 520,
                    holder: m,
                    cannonballHolder: k,
                    ai: a[0].ai
                }), b[1] = new luxanimals.ship({
                    x: 740,
                    y: 520,
                    holder: m,
                    cannonballHolder: k,
                    ai: a[1].ai
                }), luxanimals.clouds.setBackgroundHolder(f), luxanimals.clouds.setForegroundHolder(i), luxanimals.addObject(b[0]), luxanimals.addObject(b[1]), luxanimals.particles.initWeatherParticles(), luxanimals.addObject(luxanimals.particles), luxanimals.levels.setBackgroundHolder(g), luxanimals.levels.setForegroundHolder(l), luxanimals.levels.init(), luxanimals.coins.setHolder(h), luxanimals.coins.init(), luxanimals.powerups.setHolder(j), luxanimals.powerups.init(), stage.addChild(f), stage.addChild(g), stage.addChild(h), stage.addChild(i), stage.addChild(j), stage.addChild(k), stage.addChild(l), stage.addChild(m)
            },
            o = function() {},
            p = function() {
                trace("[scene] restart"), q(), b = []
            },
            q = function() {
                trace("[scene] clear"), b[0].deactivate(), b[1].deactivate(), g.removeAllChildren(), stage.removeChild(g), luxanimals.removeObject(b[0]), luxanimals.removeObject(b[1]), luxanimals.particles.clear(), luxanimals.removeObject(luxanimals.particles), a = null
            },
            r = {
                update: function() {
                    luxanimals.removeObject(this);
                    var a = luxanimals.gameManager.getTurn();
                    trace("[scene] - startTurn", a), b[a].activate(), luxanimals.levels.getCurrentLevel().startTurn && luxanimals.levels.getCurrentLevel().startTurn(a)
                }
            },
            s = function(a, c) {
                b[a].animate(c)
            },
            t = function(a) {
                b[a].deactivate()
            },
            u = function(a, c) {
                b[a].damage(c), luxanimals.particles.shipDamage(b[a].getPosition())
            },
            v = function(b) {
                var d = new createjs.BitmapAnimation(c);
                d.snapToPixel = !0, d.mouseEnabled = !1, d.x = b + 100, d.y = a[0].top - 45, g.addChild(d), d.onAnimationEnd = y, d.gotoAndPlay("all"), luxanimals.soundManager.playRandomSound(["splash1", "splash2"])
            },
            w = function(a, b) {
                var c = new createjs.BitmapAnimation(d);
                c.snapToPixel = !0, c.mouseEnabled = !1, c.x = a + 20, c.y = b, stage.addChild(c), c.onAnimationEnd = y, c.gotoAndPlay("all")
            },
            x = function(a, b) {
                trace("[scene] - smoke " + a + " " + b);
                var c = new createjs.BitmapAnimation(e);
                c.snapToPixel = !0, c.mouseEnabled = !1, c.x = a + 45, c.y = b - 90, stage.addChild(c), c.onAnimationEnd = y, c.gotoAndPlay("all")
            },
            y = function(a) {
                a.stop(), a.parent.removeChild(a), a = null
            },
            z = Modernizr.prefixed("transform"),
            A = Modernizr.csstransforms3d ? "translate3d(" : "translate(",
            B = Modernizr.csstransforms3d ? "px, 0)" : "px)",
            C = function(a, b) {
                a.top = a.y + Math.sin(a.angle) * a.radius, a.style[z] = A + (a.x + Math.cos(a.angle) * a.radius) + "px," + a.top + B, a.angle += a.speed * b
            },
            D = function(b) {
                for (var c = a.length, d = b / FRAME_DELTA; c--;) C(a[c], d);
                luxanimals.physics.waves(a[0].top)
            };
        return {
            init: n,
            restart: p,
            gameOver: o,
            update: D,
            animateCharacter: s,
            endTurn: t,
            splash: v,
            smoke: x,
            cannonballHit: w,
            shipDamage: u,
            setWind: function(a) {
                luxanimals.particles.setWind(a), b[0].setWind(a), b[1].setWind(a)
            },
            setStartNextTurn: function() {
                luxanimals.addObject(r)
            },
            getCannonballHolder: function() {
                return k
            }
        }
    }, luxanimals.ship = function(a) {
        trace("[ship] - init");
        var b = !0,
            c = (a.x, new createjs.Container),
            d = null,
            e = !1,
            f = !1,
            g = 20,
            h = 2,
            i = 0;
        a.x > STAGE_W / 2 && (b = !1);
        var j, k, l, m = new createjs.Bitmap(luxanimals.loadedAssets.ship_hull.img),
            n = new createjs.Bitmap(luxanimals.loadedAssets.ship_goldtrim.img),
            o = new createjs.Bitmap(luxanimals.loadedAssets.ship_sails.img),
            p = new createjs.SpriteSheet({
                images: [luxanimals.loadedAssets.ship_flag.img],
                animations: {
                    all: {
                        frames: [0, 0, 1, 1, 2, 2, 3],
                        next: "all"
                    }
                },
                frames: [
                    [0, 0, 56, 17, 0, 56, 0],
                    [56, 0, 56, 17, 0, 56, 0],
                    [112, 0, 56, 17, 0, 56, 0],
                    [168, 0, 56, 17, 0, 56, 0]
                ]
            }),
            q = new createjs.SpriteSheet({
                images: [luxanimals.loadedAssets.fire.img],
                animations: {
                    all: {
                        frames: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],
                        next: "all"
                    }
                },
                frames: [
                    [0, 0, 48, 67, 0, 48, 0],
                    [48, 0, 48, 67, 0, 48, 0],
                    [96, 0, 48, 67, 0, 48, 0],
                    [144, 0, 48, 67, 0, 48, 0],
                    [192, 0, 48, 67, 0, 48, 0],
                    [240, 0, 48, 67, 0, 48, 0],
                    [288, 0, 48, 67, 0, 48, 0],
                    [336, 0, 48, 67, 0, 48, 0],
                    [384, 0, 48, 67, 0, 48, 0],
                    [432, 0, 48, 67, 0, 48, 0],
                    [480, 0, 48, 67, 0, 48, 0],
                    [528, 0, 48, 67, 0, 48, 0],
                    [576, 0, 48, 67, 0, 48, 0],
                    [624, 0, 48, 67, 0, 48, 0],
                    [672, 0, 48, 67, 0, 48, 0],
                    [720, 0, 48, 67, 0, 48, 0],
                    [768, 0, 48, 67, 0, 48, 0]
                ]
            }),
            r = new createjs.BitmapAnimation(p),
            s = {
                scaleX: 1,
                scaleY: 1,
                holder: c
            };
        b ? (s.c = "lux", s.x = 230, s.y = 32, r.scaleX = 1, r.x = 166) : (c.scaleX = r.scaleX = -1, s.c = "trunk", s.x = 60, s.y = 28, r.scaleX = -1, r.x = 55), m.y = 100, n.y = 100, o.x = 38, o.y = r.y = -3, c.regX = 115, c.regY = 142, c.x = a.x, c.y = a.y, a.holder.addChild(c), c.addChild(o), c.addChild(r), r.gotoAndPlay("all"), c.mouseEnabled = r.mouseEnabled = m.mouseEnabled = o.mouseEnabled = !1;
        var t = new luxanimals.cannon({
                x: 12,
                y: 70,
                holder: c,
                actionHolder: a.cannonballHolder,
                left: b,
                ai: a.ai
            }),
            u = new luxanimals.character(s);
        c.addChild(m), c.addChild(n);
        var v = (luxanimals.physics.createShip({
                skin: c,
                x: a.x,
                y: a.y,
                left: b
            }), function(a) {
                u.animate(a)
            }),
            w = function(a) {
                i = a, 0 >= i && "left" != d ? (d = "left", b ? (r.scaleX = -1, r.x = 55) : (r.scaleX = 1, r.x = 166)) : i > 0 && "right" != d && (d = "right", b ? (r.scaleX = 1, r.x = 166) : (r.scaleX = -1, r.x = 55))
            },
            x = function(d) {
                switch (d) {
                    case 1:
                        c.removeChild(o), c.removeChild(r), o.regX = 76, o.regY = 73, o.x = c.x - 24, o.y = c.y - 77, a.holder.addChild(o), f = !0;
                        break;
                    case 2:
                        c.removeChild(n), j = new createjs.Bitmap(luxanimals.loadedAssets.gold_damage_back.img), k = new createjs.Bitmap(luxanimals.loadedAssets.gold_damage_mid.img), l = new createjs.Bitmap(luxanimals.loadedAssets.gold_damage_front.img), a.cannonballHolder.addChild(j), a.cannonballHolder.addChild(k), a.cannonballHolder.addChild(l), b || (j.scaleX = -1, k.scaleX = -1, l.scaleX = -1), j.regX = 37, j.regY = 22, k.regX = 48, k.regY = 13, l.regX = 30, l.regY = 13, j.x = c.x - 85, j.y = c.y - 38, k.x = c.x, k.y = c.y - 29, l.x = c.x + 80, l.y = c.y - 38, e = !0;
                        var g = new createjs.BitmapAnimation(q);
                        g.mouseEnabled = !1, g.x = 82, g.y = 67, c.addChild(g), g.gotoAndPlay("all")
                }
            },
            y = function(c) {
                if (e && (e = !1, luxanimals.physics.shipGoldDamage(j, k, l, b)), f) {
                    var d = c / FRAME_DELTA;
                    o.y -= g * d, o.x += 6 * i * d, o.rotation += 2 * i * d, g -= h * d, o.y >= 550 && (f = !1, luxanimals.scene.splash(o.x), a.holder.removeChild(o))
                }
            },
            z = function() {
                if (luxanimals.addObject(t, 0), a.ai) {
                    var b, c, d = luxanimals.levels.getAIRanges(),
                        e = d.stupid,
                        f = luxanimals.gameManager.getPlayers();
                    f[1].ai ? (b = f[1], c = f[0]) : (b = f[0], c = f[1]), e = b.hits > c.hits ? d.hard : b.hits < c.hits ? d.stupid : d.normal, t.autoPilot({
                        min: e[0],
                        max: e[1]
                    }, {
                        min: e[2],
                        max: e[3]
                    })
                }
            },
            A = function() {
                t.reset(), luxanimals.removeObject(t)
            };
        return {
            update: y,
            activate: z,
            deactivate: A,
            animate: v,
            damage: x,
            setWind: w,
            getPosition: function() {
                return {
                    x: c.x,
                    y: c.y
                }
            }
        }
    }, luxanimals.cannon = function(a) {
        trace("[cannon] - init ai: " + a.ai);
        var b, c, d, e, f, g = -86,
            h = 0,
            i = 25,
            j = 5,
            k = i - j,
            l = 0,
            m = j,
            n = 0,
            o = !1,
            p = !1,
            q = new createjs.Container({
                name: "cannon"
            }),
            r = ($(q), a.ai),
            s = !1,
            t = !0,
            u = !1;
        c = new createjs.SpriteSheet({
            images: [luxanimals.loadedAssets.cannonFlash.img],
            animations: {
                all: {
                    frames: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 0],
                    next: !1
                }
            },
            frames: [
                [0, 0, 174, 155, 0, 174, 0],
                [174, 0, 174, 155, 0, 174, 0],
                [348, 0, 174, 155, 0, 174, 0],
                [522, 0, 174, 155, 0, 174, 0],
                [696, 0, 174, 155, 0, 174, 0],
                [870, 0, 174, 155, 0, 174, 0],
                [1044, 0, 174, 155, 0, 174, 0],
                [1218, 0, 174, 155, 0, 174, 0],
                [1392, 0, 174, 155, 0, 174, 0],
                [1566, 0, 174, 155, 0, 174, 0],
                [1740, 0, 174, 155, 0, 174, 0],
                [0, 155, 174, 155, 0, 174, 0],
                [174, 155, 174, 155, 0, 174, 0],
                [348, 155, 174, 155, 0, 174, 0]
            ]
        }), d = new createjs.BitmapAnimation(c), b = new createjs.SpriteSheet({
            images: [luxanimals.loadedAssets.cannon.img],
            frames: [
                [0, 0, 93, 59, 0, 93, 0],
                [93, 0, 93, 59, 0, 93, 0],
                [186, 0, 93, 59, 0, 93, 0],
                [279, 0, 93, 59, 0, 93, 0],
                [372, 0, 93, 59, 0, 93, 0],
                [465, 0, 93, 59, 0, 93, 0],
                [558, 0, 93, 59, 0, 93, 0],
                [651, 0, 93, 59, 0, 93, 0],
                [744, 0, 93, 59, 0, 93, 0],
                [837, 0, 93, 59, 0, 93, 0],
                [930, 0, 93, 59, 0, 93, 0],
                [1023, 0, 93, 59, 0, 93, 0],
                [1116, 0, 93, 59, 0, 93, 0],
                [1209, 0, 93, 59, 0, 93, 0],
                [1302, 0, 93, 59, 0, 93, 0],
                [1395, 0, 93, 59, 0, 93, 0],
                [1488, 0, 93, 59, 0, 93, 0],
                [1581, 0, 93, 59, 0, 93, 0],
                [1674, 0, 93, 59, 0, 93, 0],
                [1767, 0, 93, 59, 0, 93, 0],
                [1860, 0, 93, 59, 0, 93, 0],
                [1953, 0, 93, 59, 0, 93, 0],
                [0, 59, 93, 59, 0, 93, 0],
                [93, 59, 93, 59, 0, 93, 0],
                [186, 59, 93, 59, 0, 93, 0],
                [279, 59, 93, 59, 0, 93, 0],
                [372, 59, 93, 59, 0, 93, 0],
                [465, 59, 93, 59, 0, 93, 0],
                [558, 59, 93, 59, 0, 93, 0],
                [651, 59, 93, 59, 0, 93, 0]
            ]
        }), e = new createjs.BitmapAnimation(b), f = new createjs.Bitmap(luxanimals.loadedAssets.cannonMount.img), h = -86, g = 0, q.regX = -70, q.regY = 29, q.x = f.x = a.x, q.y = f.y = a.y, q.rotation = 0, f.mouseEnabled = q.mouseEnabled = e.mouseEnabled = !1, a.holder.addChild(q), q.addChild(e), a.holder.addChild(f), e.gotoAndStop(1);
        var v = 1,
            w = .001,
            x = 3 / 21,
            y = function(b) {
                if (1 > l)
                    if (o && (p || (luxanimals.buttons.mouseUp && !r || t && r) && (p = !0, u || (w = 24 - ~~(w * x), u = !0)), p && (29 === v ? (w = .001, v = 1, o = !1, p = !1, l++) : (w += b / FRAME_DELTA, v = Math.ceil(w), v >= 29 && (z(), v = 29), e.gotoAndStop(v)))), (luxanimals.buttons.mouseDown && !r && !p || s && r) && (o = !0, m += b / FRAME_DELTA, r && m >= n ? (trace("[cannon] AI Force"), s = !1, t = !0) : m = Math.min(m, i), w = 18 * (m - j) / k, v = Math.ceil(w), e.gotoAndStop(v), q.x = Math.random() * m / 5 + a.x, q.y = Math.random() * m / 5 + a.y), isNaN(stage.mouseX) || isNaN(stage.mouseY)) q.rotation = g;
                    else if (!r && !p) {
                    var c, d, f = q.localToGlobal(-70, 29);
                    a.left ? (d = stage.mouseY - f.y, c = stage.mouseX - f.x) : (d = stage.mouseY - f.y, c = -1 * (stage.mouseX - f.x)), q.rotation = Math.min(Math.max(57.2957795 * Math.atan2(d, c), h), g)
                }
            },
            z = function() {
                var b = -60;
                luxanimals.gameManager.fire();
                var c = a.holder.x + q.x - a.holder.regX - Math.cos(q.rotation * DEG_TO_RAD) * b,
                    e = a.holder.y + q.y - a.holder.regY - Math.sin(q.rotation * DEG_TO_RAD) * b;
                a.left || (c = a.holder.x - q.x + a.holder.regX - 60 * Math.cos(q.rotation * DEG_TO_RAD));
                var f = new luxanimals.cannonball({
                    x: c,
                    y: e,
                    holder: a.actionHolder,
                    left: a.left,
                    angle: q.rotation,
                    force: m
                });
                f.init(), d.x = 135, d.rotation = 31, q.addChild(d), d.gotoAndPlay("all"), d.onAnimationEnd = B, luxanimals.physics.shipFire(luxanimals.gameManager.getTurn(), m, q.rotation), m = j, luxanimals.soundManager.playSound("fire", {
                    interrupt: createjs.Sound.INTERRUPT_ANY
                })
            },
            A = function(a, b) {
                var c = a.min + Math.random() * (a.max - a.min);
                n = b.min + Math.random() * (b.max - b.min), createjs.Tween.get(q).wait(200).to({
                    rotation: c
                }, ~~(500 * Math.random()) + 500, createjs.Ease.quadOut).call(function() {
                    t = !1, s = !0
                })
            },
            B = function() {
                q.removeChild(d)
            },
            C = function() {
                p || (e.gotoAndStop(1), m = j), p = !1, l = 0, o = !1, u = !1
            };
        return {
            update: y,
            reset: C,
            autoPilot: A
        }
    },
    function() {
        var a, b, c = function() {
            a = new createjs.Bitmap(luxanimals.loadedAssets.cannonball.img), b = [new createjs.Bitmap(luxanimals.loadedAssets.cTrail1.img), new createjs.Bitmap(luxanimals.loadedAssets.cTrail2.img), new createjs.Bitmap(luxanimals.loadedAssets.cTrail3.img), new createjs.Bitmap(luxanimals.loadedAssets.cTrail4.img), new createjs.Bitmap(luxanimals.loadedAssets.cTrail5.img), new createjs.Bitmap(luxanimals.loadedAssets.cTrail6.img), new createjs.Bitmap(luxanimals.loadedAssets.cTrail7.img), new createjs.Bitmap(luxanimals.loadedAssets.cTrail8.img)], a.set({
                mouseEnabled: !1,
                regX: 11,
                regY: 11
            }), b.forEach(function(a) {
                a.set({
                    regX: 13,
                    regY: 13
                })
            })
        };
        luxanimals.cannonball = function(d) {
            a || c(), trace("[cannonball]");
            var e;
            d.left ? d.force = -d.force : d.angle = -d.angle;
            var f = [],
                g = function() {
                    e = luxanimals.physics.createCannonball(d.x, d.y, a, d.angle, d.force, j, k), b.forEach(function(a) {
                        a.visible = !1
                    }), d.holder.addChild.apply(d.holder, b), d.holder.addChild(a)
                },
                h = 0,
                i = .75,
                j = function(a) {
                    var c = a / FRAME_DELTA,
                        d = 5 * c;
                    if (h += c, h > i) {
                        h -= i;
                        var e = this.body.GetLinearVelocity(),
                            g = e.x + e.y;
                        0 > g && (g = -g), f.unshift({
                            x: this.skin.x,
                            y: this.skin.y
                        }), f.length > b.length && (f.length -= 1);
                        for (var j = 0, k = f.length; k > j; j++) b[j].set({
                            visible: !0,
                            alpha: Math.min(g / 3, 1),
                            x: ~~f[j].x,
                            y: ~~f[j].y,
                            rotation: b[j].rotation + d
                        })
                    }
                },
                k = function() {
                    trace("CANNONBALL KILL"), a.y > 580 && luxanimals.scene.splash(a.x), d.holder.removeChild.apply(d.holder, b), luxanimals.gameManager.turnComplete()
                };
            return {
                init: g,
                update: j,
                kill: k
            }
        }
    }(), luxanimals.character = function(a) {
        trace("[character] - init");
        var b, c, d = 0,
            e = 8,
            f = "idle",
            g = Math.round(200 * Math.random()) + 60;
        b = new createjs.SpriteSheet("trunk" === a.c ? {
            images: [luxanimals.loadedAssets.trunkford.img],
            animations: {
                win: {
                    frames: [40, 41, 42, 43, 44, 45, 46],
                    next: "WinLoop"
                },
                lose: {
                    frames: [40, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63],
                    next: "LoseLoop"
                },
                LoseLoop: {
                    frames: [59, 59, 60, 60, 61, 61, 62, 62, 63, 63, 64, 64, 65, 65, 66, 66, 67, 67],
                    next: "LoseLoop"
                },
                fire: {
                    frames: [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 20, 20, 20, 21, 22, 23, 24, 25, 26, 27],
                    next: !1
                },
                idle: {
                    frames: [0, 0, 1, 1, 0, 0],
                    next: !1
                },
                WinLoop: {
                    frames: [48, 49, 50, 51, 52, 53, 50, 51],
                    next: "WinLoop"
                },
                intro: {
                    frames: [40, 72, 73, 74, 75, 76, 77, 78, 79, 80, 80, 80, 80, 77, 77, 77, 77, 77, 77, 77, 77, 77, 77, 77, 77, 81, 82, 83, 84, 85, 86, 86, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40],
                    next: !1
                },
                hit: {
                    frames: [0, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39],
                    next: !1
                }
            },
            frames: [
                [0, 0, 188, 110, 0, 188, 0],
                [188, 0, 188, 110, 0, 188, 0],
                [376, 0, 188, 110, 0, 188, 0],
                [564, 0, 188, 110, 0, 188, 0],
                [752, 0, 188, 110, 0, 188, 0],
                [940, 0, 188, 110, 0, 188, 0],
                [1128, 0, 188, 110, 0, 188, 0],
                [1316, 0, 188, 110, 0, 188, 0],
                [1504, 0, 188, 110, 0, 188, 0],
                [1692, 0, 188, 110, 0, 188, 0],
                [0, 110, 188, 110, 0, 188, 0],
                [188, 110, 188, 110, 0, 188, 0],
                [376, 110, 188, 110, 0, 188, 0],
                [564, 110, 188, 110, 0, 188, 0],
                [752, 110, 188, 110, 0, 188, 0],
                [940, 110, 188, 110, 0, 188, 0],
                [1128, 110, 188, 110, 0, 188, 0],
                [1316, 110, 188, 110, 0, 188, 0],
                [1504, 110, 188, 110, 0, 188, 0],
                [1692, 110, 188, 110, 0, 188, 0],
                [0, 220, 188, 110, 0, 188, 0],
                [188, 220, 188, 110, 0, 188, 0],
                [376, 220, 188, 110, 0, 188, 0],
                [564, 220, 188, 110, 0, 188, 0],
                [752, 220, 188, 110, 0, 188, 0],
                [940, 220, 188, 110, 0, 188, 0],
                [1128, 220, 188, 110, 0, 188, 0],
                [1316, 220, 188, 110, 0, 188, 0],
                [1504, 220, 188, 110, 0, 188, 0],
                [1692, 220, 188, 110, 0, 188, 0],
                [0, 330, 188, 110, 0, 188, 0],
                [188, 330, 188, 110, 0, 188, 0],
                [376, 330, 188, 110, 0, 188, 0],
                [564, 330, 188, 110, 0, 188, 0],
                [752, 330, 188, 110, 0, 188, 0],
                [940, 330, 188, 110, 0, 188, 0],
                [1128, 330, 188, 110, 0, 188, 0],
                [1316, 330, 188, 110, 0, 188, 0],
                [1504, 330, 188, 110, 0, 188, 0],
                [1692, 330, 188, 110, 0, 188, 0],
                [0, 440, 188, 110, 0, 188, 0],
                [188, 440, 188, 110, 0, 188, 0],
                [376, 440, 188, 110, 0, 188, 0],
                [564, 440, 188, 110, 0, 188, 0],
                [752, 440, 188, 110, 0, 188, 0],
                [940, 440, 188, 110, 0, 188, 0],
                [1128, 440, 188, 110, 0, 188, 0],
                [1316, 440, 188, 110, 0, 188, 0],
                [1504, 440, 188, 110, 0, 188, 0],
                [1692, 440, 188, 110, 0, 188, 0],
                [0, 550, 188, 110, 0, 188, 0],
                [188, 550, 188, 110, 0, 188, 0],
                [376, 550, 188, 110, 0, 188, 0],
                [564, 550, 188, 110, 0, 188, 0],
                [752, 550, 188, 110, 0, 188, 0],
                [940, 550, 188, 110, 0, 188, 0],
                [1128, 550, 188, 110, 0, 188, 0],
                [1316, 550, 188, 110, 0, 188, 0],
                [1504, 550, 188, 110, 0, 188, 0],
                [1692, 550, 188, 110, 0, 188, 0],
                [0, 660, 188, 110, 0, 188, 0],
                [188, 660, 188, 110, 0, 188, 0],
                [376, 660, 188, 110, 0, 188, 0],
                [564, 660, 188, 110, 0, 188, 0],
                [752, 660, 188, 110, 0, 188, 0],
                [940, 660, 188, 110, 0, 188, 0],
                [1128, 660, 188, 110, 0, 188, 0],
                [1316, 660, 188, 110, 0, 188, 0],
                [1504, 660, 188, 110, 0, 188, 0],
                [1692, 660, 188, 110, 0, 188, 0],
                [0, 770, 188, 110, 0, 188, 0],
                [188, 770, 188, 110, 0, 188, 0],
                [376, 770, 188, 110, 0, 188, 0],
                [564, 770, 188, 110, 0, 188, 0],
                [752, 770, 188, 110, 0, 188, 0],
                [940, 770, 188, 110, 0, 188, 0],
                [1128, 770, 188, 110, 0, 188, 0],
                [1316, 770, 188, 110, 0, 188, 0],
                [1504, 770, 188, 110, 0, 188, 0],
                [1692, 770, 188, 110, 0, 188, 0],
                [0, 880, 188, 110, 0, 188, 0],
                [188, 880, 188, 110, 0, 188, 0],
                [376, 880, 188, 110, 0, 188, 0],
                [564, 880, 188, 110, 0, 188, 0],
                [752, 880, 188, 110, 0, 188, 0],
                [940, 880, 188, 110, 0, 188, 0],
                [1128, 880, 188, 110, 0, 188, 0]
            ]
        } : {
            images: [luxanimals.loadedAssets.lux.img],
            animations: {
                win: {
                    frames: [65, 66, 67, 68, 69, 70, 71],
                    next: "WinLoop"
                },
                lose: {
                    frames: [0, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107],
                    next: "loseLoop"
                },
                loseLoop: {
                    frames: [109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 123, 122, 121, 120, 119, 118, 117, 116, 115, 114, 113],
                    next: "loseLoop"
                },
                fire: {
                    frames: [0, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33],
                    next: !1
                },
                idle: {
                    frames: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    next: !1
                },
                WinLoop: {
                    frames: [73, 74, 75, 76, 76, 77, 78],
                    next: "WinLoop"
                },
                intro: {
                    frames: [0, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 139, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 141, 142, 143, 144, 0],
                    next: !1
                },
                hit: {
                    frames: [0, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 47, 48, 49, 50, 47, 48, 49, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64],
                    next: !1
                }
            },
            frames: [
                [0, 0, 141, 104, 0, 141, 0],
                [141, 0, 141, 104, 0, 141, 0],
                [282, 0, 141, 104, 0, 141, 0],
                [423, 0, 141, 104, 0, 141, 0],
                [564, 0, 141, 104, 0, 141, 0],
                [705, 0, 141, 104, 0, 141, 0],
                [846, 0, 141, 104, 0, 141, 0],
                [987, 0, 141, 104, 0, 141, 0],
                [1128, 0, 141, 104, 0, 141, 0],
                [1269, 0, 141, 104, 0, 141, 0],
                [1410, 0, 141, 104, 0, 141, 0],
                [1551, 0, 141, 104, 0, 141, 0],
                [1692, 0, 141, 104, 0, 141, 0],
                [1833, 0, 141, 104, 0, 141, 0],
                [0, 104, 141, 104, 0, 141, 0],
                [141, 104, 141, 104, 0, 141, 0],
                [282, 104, 141, 104, 0, 141, 0],
                [423, 104, 141, 104, 0, 141, 0],
                [564, 104, 141, 104, 0, 141, 0],
                [705, 104, 141, 104, 0, 141, 0],
                [846, 104, 141, 104, 0, 141, 0],
                [987, 104, 141, 104, 0, 141, 0],
                [1128, 104, 141, 104, 0, 141, 0],
                [1269, 104, 141, 104, 0, 141, 0],
                [1410, 104, 141, 104, 0, 141, 0],
                [1551, 104, 141, 104, 0, 141, 0],
                [1692, 104, 141, 104, 0, 141, 0],
                [1833, 104, 141, 104, 0, 141, 0],
                [0, 208, 141, 104, 0, 141, 0],
                [141, 208, 141, 104, 0, 141, 0],
                [282, 208, 141, 104, 0, 141, 0],
                [423, 208, 141, 104, 0, 141, 0],
                [564, 208, 141, 104, 0, 141, 0],
                [705, 208, 141, 104, 0, 141, 0],
                [846, 208, 141, 104, 0, 141, 0],
                [987, 208, 141, 104, 0, 141, 0],
                [1128, 208, 141, 104, 0, 141, 0],
                [1269, 208, 141, 104, 0, 141, 0],
                [1410, 208, 141, 104, 0, 141, 0],
                [1551, 208, 141, 104, 0, 141, 0],
                [1692, 208, 141, 104, 0, 141, 0],
                [1833, 208, 141, 104, 0, 141, 0],
                [0, 312, 141, 104, 0, 141, 0],
                [141, 312, 141, 104, 0, 141, 0],
                [282, 312, 141, 104, 0, 141, 0],
                [423, 312, 141, 104, 0, 141, 0],
                [564, 312, 141, 104, 0, 141, 0],
                [705, 312, 141, 104, 0, 141, 0],
                [846, 312, 141, 104, 0, 141, 0],
                [987, 312, 141, 104, 0, 141, 0],
                [1128, 312, 141, 104, 0, 141, 0],
                [1269, 312, 141, 104, 0, 141, 0],
                [1410, 312, 141, 104, 0, 141, 0],
                [1551, 312, 141, 104, 0, 141, 0],
                [1692, 312, 141, 104, 0, 141, 0],
                [1833, 312, 141, 104, 0, 141, 0],
                [0, 416, 141, 104, 0, 141, 0],
                [141, 416, 141, 104, 0, 141, 0],
                [282, 416, 141, 104, 0, 141, 0],
                [423, 416, 141, 104, 0, 141, 0],
                [564, 416, 141, 104, 0, 141, 0],
                [705, 416, 141, 104, 0, 141, 0],
                [846, 416, 141, 104, 0, 141, 0],
                [987, 416, 141, 104, 0, 141, 0],
                [1128, 416, 141, 104, 0, 141, 0],
                [1269, 416, 141, 104, 0, 141, 0],
                [1410, 416, 141, 104, 0, 141, 0],
                [1551, 416, 141, 104, 0, 141, 0],
                [1692, 416, 141, 104, 0, 141, 0],
                [1833, 416, 141, 104, 0, 141, 0],
                [0, 520, 141, 104, 0, 141, 0],
                [141, 520, 141, 104, 0, 141, 0],
                [282, 520, 141, 104, 0, 141, 0],
                [423, 520, 141, 104, 0, 141, 0],
                [564, 520, 141, 104, 0, 141, 0],
                [705, 520, 141, 104, 0, 141, 0],
                [846, 520, 141, 104, 0, 141, 0],
                [987, 520, 141, 104, 0, 141, 0],
                [1128, 520, 141, 104, 0, 141, 0],
                [1269, 520, 141, 104, 0, 141, 0],
                [1410, 520, 141, 104, 0, 141, 0],
                [1551, 520, 141, 104, 0, 141, 0],
                [1692, 520, 141, 104, 0, 141, 0],
                [1833, 520, 141, 104, 0, 141, 0],
                [0, 624, 141, 104, 0, 141, 0],
                [141, 624, 141, 104, 0, 141, 0],
                [282, 624, 141, 104, 0, 141, 0],
                [423, 624, 141, 104, 0, 141, 0],
                [564, 624, 141, 104, 0, 141, 0],
                [705, 624, 141, 104, 0, 141, 0],
                [846, 624, 141, 104, 0, 141, 0],
                [987, 624, 141, 104, 0, 141, 0],
                [1128, 624, 141, 104, 0, 141, 0],
                [1269, 624, 141, 104, 0, 141, 0],
                [1410, 624, 141, 104, 0, 141, 0],
                [1551, 624, 141, 104, 0, 141, 0],
                [1692, 624, 141, 104, 0, 141, 0],
                [1833, 624, 141, 104, 0, 141, 0],
                [0, 728, 141, 104, 0, 141, 0],
                [141, 728, 141, 104, 0, 141, 0],
                [282, 728, 141, 104, 0, 141, 0],
                [423, 728, 141, 104, 0, 141, 0],
                [564, 728, 141, 104, 0, 141, 0],
                [705, 728, 141, 104, 0, 141, 0],
                [846, 728, 141, 104, 0, 141, 0],
                [987, 728, 141, 104, 0, 141, 0],
                [1128, 728, 141, 104, 0, 141, 0],
                [1269, 728, 141, 104, 0, 141, 0],
                [1410, 728, 141, 104, 0, 141, 0],
                [1551, 728, 141, 104, 0, 141, 0],
                [1692, 728, 141, 104, 0, 141, 0],
                [1833, 728, 141, 104, 0, 141, 0],
                [0, 832, 141, 104, 0, 141, 0],
                [141, 832, 141, 104, 0, 141, 0],
                [282, 832, 141, 104, 0, 141, 0],
                [423, 832, 141, 104, 0, 141, 0],
                [564, 832, 141, 104, 0, 141, 0],
                [705, 832, 141, 104, 0, 141, 0],
                [846, 832, 141, 104, 0, 141, 0],
                [987, 832, 141, 104, 0, 141, 0],
                [1128, 832, 141, 104, 0, 141, 0],
                [1269, 832, 141, 104, 0, 141, 0],
                [1410, 832, 141, 104, 0, 141, 0],
                [1551, 832, 141, 104, 0, 141, 0],
                [1692, 832, 141, 104, 0, 141, 0],
                [1833, 832, 141, 104, 0, 141, 0],
                [0, 936, 141, 104, 0, 141, 0],
                [141, 936, 141, 104, 0, 141, 0],
                [282, 936, 141, 104, 0, 141, 0],
                [423, 936, 141, 104, 0, 141, 0],
                [564, 936, 141, 104, 0, 141, 0],
                [705, 936, 141, 104, 0, 141, 0],
                [846, 936, 141, 104, 0, 141, 0],
                [987, 936, 141, 104, 0, 141, 0],
                [1128, 936, 141, 104, 0, 141, 0],
                [1269, 936, 141, 104, 0, 141, 0],
                [1410, 936, 141, 104, 0, 141, 0],
                [1551, 936, 141, 104, 0, 141, 0],
                [1692, 936, 141, 104, 0, 141, 0],
                [1833, 936, 141, 104, 0, 141, 0],
                [0, 1040, 141, 104, 0, 141, 0],
                [141, 1040, 141, 104, 0, 141, 0],
                [282, 1040, 141, 104, 0, 141, 0],
                [423, 1040, 141, 104, 0, 141, 0],
                [564, 1040, 141, 104, 0, 141, 0]
            ]
        }), c = new createjs.BitmapAnimation(b), "trunk" === a.c && (c.scaleX = -1), c.x = a.x, c.y = a.y, a.holder.addChild(c), c.gotoAndStop(0);
        var h = function(a) {
                trace("[character] - animate: " + a), c.gotoAndPlay(a), f = "animating", "lose" != a && "win" != a ? c.onAnimationEnd = i : delete c.onAnimationEnd
            },
            i = function() {
                trace("[character] resetCurrentState"), f = "idle", g = ~~(160 * Math.random()) + 30, c.gotoAndStop(0)
            },
            j = function(a) {
                "idle" === f && (e > 0 && (e -= a / FRAME_DELTA), 0 >= e && (d += a / FRAME_DELTA, 0 !== c.currentFrame && c.gotoAndStop(0)), ~~d % g === 0 && (d = 1, e = 5, c.gotoAndStop(1), g = ~~(160 * Math.random()) + 30))
            };
        return {
            update: j,
            animate: h
        }
    }, luxanimals.soundManager = function() {
        var a = "assets/sound/",
            b = (Modernizr.ios, Modernizr.mobile, !1),
            c = null,
            d = new createjs.LoadQueue,
            e = {};
        if (d.installPlugin(createjs.Sound), d.addEventListener("error", function(a) {
                console.error("SOUND LOAD ERROR", a)
            }), createjs.Sound.initializeDefaultPlugins()) {
            createjs.Sound.alternateExtensions = ["mp3"];
            var f = function(b, c, e) {
                    e = e || d;
                    var f = [];
                    for (e.removeEventListener("complete", c), c && e.addEventListener("complete", c), b = b.split(" "); b.length;) {
                        var g = b.shift();
                        f.push({
                            id: g,
                            src: a + g + ".ogg"
                        })
                    }
                    e.loadManifest(f, !0)
                },
                g = function(a, d) {
                    return d = d || {}, console.log("[soundManager] playSound", a, d), b ? -1 : (e[a] = createjs.Sound.play(a, d), void(d.loop && (c = e[a])))
                },
                h = function(a) {
                    e[a] && e[a].stop()
                },
                i = function(a) {
                    e[a] && (e[a].paused = !0)
                },
                j = function(a) {
                    e[a] && (e[a].paused = !1)
                },
                k = function(a) {
                    if (console.log("[soundManager] playLoop ", a, c), c)
                        if (e[a] == c) {
                            if (c.playState != createjs.Sound.PLAY_FAILED) return;
                            c = null
                        } else c.stop();
                    e[a] || (e[a] = createjs.Sound.createInstance(a)), e[a].loop = -1, e[a].play(createjs.Sound.INTERRUPT_ANY), c = e[a]
                },
                l = function(a, c) {
                    if (b) return -1;
                    var d = Math.round(Math.random() * (a.length - 1));
                    return g(a[d], c)
                },
                m = function(a) {
                    return b = a === !0 || a === !1 ? a === !0 : !b, createjs.Sound.setMute(b), b
                },
                n = function() {
                    return b
                };
            return {
                load: f,
                playSound: g,
                stopSound: h,
                pauseSound: i,
                resumeSound: j,
                playLoop: k,
                playRandomSound: l,
                muteUnmute: m,
                isMuted: n
            }
        }
    }, luxanimals.uiManager = function() {
        function a(a) {
            var b;
            return a.match(/^https?:\/\//) ? a : (b = location.host, location.port.length > 0 && (b += ":" + location.port), a.match(/^\/[^\/]/) ? [location.protocol, "//", b, a].join("") : [location.protocol, "//", b, location.pathname.replace(/\/([^\/]+)$/, "/"), a].join(""))
        }
        var b, c, d, e = "assets/images/",
            f = !1,
            g = !1,
            h = Modernizr.ios,
            i = Modernizr.android,
            j = $("#mute-button"),
            k = $("body"),
            l = createjs.Tween,
            m = (createjs.Ease, Class.extend({
                toLoad: [],
                holder: null,
                load: function() {
                    trace('[uiManager] screen "' + this.id + '" loading');
                    var a = [],
                        b = new createjs.LoadQueue;
                    b.setMaxConnections(5), b.addEventListener("complete", function() {
                        trace("[preloader] - screen loading complete"), t(), U.complete()
                    }), b.addEventListener("progress", function(a) {
                        U.progress(a)
                    });
                    for (var c = 0; c < this.toLoad.length; c++) a.push({
                        id: this.toLoad[c],
                        src: e + this.toLoad[c]
                    });
                    b.loadManifest(a)
                },
                initScreen: function() {
                    this.animateIn()
                },
                animateIn: function() {
                    this.holder.css({
                        "pointer-events": "auto"
                    })
                },
                animateOut: function() {
                    this.holder.css({
                        "pointer-events": "none"
                    })
                },
                name: function() {
                    return this.id
                }
            })),
            n = !1,
            o = function(a, b) {
                b || luxanimals.soundManager.playLoop(a)
            },
            p = function(a) {
                luxanimals.soundManager.playSound(a, {
                    interrupt: createjs.Sound.INTERRUPT_ANY
                })
            },
            q = function(a, b) {
                return f && b || (a || !g || b) && (a = luxanimals.soundManager.muteUnmute(a), b && (g = a), I.resultVideo.mute(a), G.mute(a), j.toggleClass("on", a)), a
            };
        h && (window.addEventListener("pagehide", function(a) {
            q(!0), "startGame" === d && luxanimals.gameManager.pause(), luxanimals.trackEvent("Mobile", "Blur", a.type)
        }, !1), window.addEventListener("pagehide", function(a) {
            luxanimals.trackEvent("Mobile", "Focus", a.type)
        }, !1)), i && k.on("click", ".simple-button, .select-portrait, .back-button", function() {
            window.setupScroll()
        }), k.on("mouseover", ".simple-button, .back-button, .select-portrait", function() {
            p("hover")
        }).on("click", ".simple-button, .back-button, .select-portrait", function() {
            p("click")
        }), j.on("click", function() {
            var a = $(this).hasClass("on");
            a = q(!a, !0), luxanimals.trackEvent("Button", "Click", "Mute", f ? 2 : a ? 1 : 0)
        });
        var r = function(b, c) {
                var d = document,
                    e = d.location,
                    f = encodeURIComponent,
                    g = ["//www.facebook.com/dialog/feed", "?app_id=#&link=", f(e.href), "&picture=", f(a(b.picture)), "&name=", f(b.name), "&caption=Lux Ahoy", "&description=", f(b.description), "&redirect_uri=", f(a("closewin.html"))],
                    h = function() {
                        window.open(g.join(""), "sharer", "toolbar=0,status=0,resizable=1,width=1024,height=436") || (g[g.length - 1] = f(a("")), e.href = g.join(""))
                    };
                /Firefox/.test(navigator.userAgent) ? setTimeout(h, 0) : h(), luxanimals.trackSocial("facebook", "feed dialog", e.href, c)
            },
            s = function(a, b) {
                window.twttr = window.twttr || {};
                var c, d = 550,
                    e = 450,
                    f = screen.height,
                    g = screen.width,
                    h = Math.round(g / 2 - d / 2),
                    i = 0,
                    j = document;
                f > e && (i = Math.round(f / 2 - e / 2)), document.title = a, window.twttr.shareWin = window.open("http://twitter.com/share", "", "left=" + h + ",top=" + i + ",width=" + d + ",height=" + e + ",personalbar=0,toolbar=0,scrollbars=1,resizable=1"), c = j.createElement("script"), c.src = "http://platform.twitter.com/bookmarklets/share.js?v=1", j.getElementsByTagName("head")[0].appendChild(c), luxanimals.trackSocial("twitter", "share dialog", j.location.href, b)
            },
            t = function() {
                console.log("[uiManager] nextScreenLoaded - " + d), U.hide(), b ? b.animateOut() : w(), u(d)
            },
            u = function(a) {
                globalNoLoop || ("startGame" == a ? o("battleLoop") : "videoObject" != a && o("menuLoop"))
            },
            v = function(a) {
                switch (trace("[uiManager] loadNextScreen - " + a), console.log("[uiManager] loadNextScreen - " + a), U.show(), d = a, a) {
                    case "home":
                        c = A;
                        break;
                    case "characterSelection":
                        c = C;
                        break;
                    case "levelSelection":
                        c = E;
                        break;
                    case "instructionsObject":
                        c = F;
                        break;
                    case "videoObject":
                        c = G;
                        break;
                    case "leaderboardObject":
                        c = H
                }
                "startGame" == a ? (trace("IE seems happier with this trace statement present."), luxanimals.main.game.preloadStart(), u(a)) : (c.load(), n || globalNoLoop || (n = !0, luxanimals.soundManager.load("menuLoop hover click", function() {
                    u(d)
                }))), luxanimals.user.screen = a
            },
            w = function() {
                trace("[uiManager] - switchScreen: " + d), b = c, j.show(), "startGame" !== d ? ($("#canvasHolder").hide(), $("#main").show(), b.initScreen()) : K.animateIn()
            },
            x = function() {
                $.jStorage.set("user.screen", luxanimals.user.screen), $.jStorage.set("user.level", luxanimals.user.level), $.jStorage.set("user.character", luxanimals.user.character)
            },
            y = function() {
                $.jStorage.set("user.characters", luxanimals.user.characters), $.jStorage.set("user.scores", luxanimals.user.scores)
            },
            z = m.extend({
                holder: $("#main-screen"),
                arm: $("#main-menu-lux-arm"),
                footer: $("#footer"),
                abTestLetter: null,
                load: function() {
                    trace("[uiManager] - home: load"), this.id = "home", this.toLoad = ["main-screen-background.jpg", "simple-button.png", "back-button.png", "mute-button.png", "main-menu-lux.png", "main-menu-lux-arm.png", "fwa_badge.png"], this._super()
                },
                initScreen: function() {
                    var a = this;
                    trace("[uiManager] - home: init"), Modernizr.cutscenes || $("#video-button").hide(), this._super();
                    var a = this;
                    this.arm.css({
                        transformOrigin: "0 50%",
                        rotate: -28
                    }), this.holder.on("click", "#fight-button", function() {
                        a.holder.off(), luxanimals.trackEvent("Button", "Click", "Fight"), v("characterSelection")
                    }).on("click", "#instructions-button", function() {
                        a.holder.off(), luxanimals.trackEvent("Button", "Click", "Instructions"), v("instructionsObject")
                    }).on("click", "#video-button", function() {
                        a.holder.off(), luxanimals.trackEvent("Button", "Click", "Video"), v("videoObject")
                    }).on("click", "#leaderboard-button", function() {
                        a.holder.off(), luxanimals.trackEvent("Button", "Click", "Leaderboard"), v("leaderboardObject")
                    }).on("mouseover", "#fight-button", function() {
                        a.arm.stop().transition({
                            x: 0,
                            rotate: -28
                        }, 300)
                    }).on("mouseover", "#instructions-button", function() {
                        a.arm.stop().transition({
                            x: 0,
                            rotate: 0
                        }, 300)
                    }).on("mouseover", "#leaderboard-button", function() {
                        a.arm.stop().transition({
                            x: 0,
                            rotate: 10
                        }, 300)
                    }).on("mouseover", "#video-button", function() {
                        a.arm.stop().transition({
                            x: 0,
                            rotate: -16
                        }, 300)
                    }), this.footer.on("click", ".footer-download-amazon", function() {
                        luxanimals.trackEvent("Button", "Click", "Download Amazon " + a.abTestLetter), console.log("Button", "Click", "Download Amazon " + a.abTestLetter)
                    }).on("click", ".footer-download-googleplay", function() {
                        luxanimals.trackEvent("Button", "Click", "Download Google Play " + a.abTestLetter), console.log("Button", "Click", "Download Google Play " + a.abTestLetter)
                    })
                },
                initOnce: function() {
                    this.getAbTestLetter(), this.footer.find(".footer-message-" + this.abTestLetter).css("display", "inline-block")
                },
                animateIn: function() {
                    trace("[uiManager] - home: animateIn"), this._super(), this.holder.stop().css({
                        opacity: 0,
                        display: "block"
                    }).transition({
                        opacity: 1
                    }, 500, x), luxanimals.trackScreen("/home")
                },
                animateOut: function() {
                    var a = this;
                    trace("[uiManager] - home: animateOut"), this._super(), this.holder.stop().transition({
                        opacity: 0
                    }, 500, function() {
                        a.holder.hide(), w()
                    })
                },
                name: function() {
                    this._super()
                },
                getAbTestLetter: function() {
                    var a = Math.floor(2 * Math.random());
                    this.abTestLetter = 0 === a ? "a" : "b"
                }
            }),
            A = new z;
        A.initOnce();
        var B = m.extend({
                holder: $("#select-screen"),
                load: function() {
                    trace("[uiManager] - characterSelection: load"), this.toLoad = ["select-screen-background.jpg", "select-screen-title.png", "screen-underline.png", "select-frame.png", "select-luxamillion.jpg", "select-trunkford.jpg", "simple-button.png", "back-button.png", "mute-button.png", "fwa_badge.png"], this._super()
                },
                initScreen: function() {
                    var a = this;
                    trace("[uiManager] - characterSelection: init");
                    this.holder.find(".select-portrait");
                    this._super(), this.holder.on("click", "#select-luxamillion, #select-trunkford", function(b) {
                        var c = /luxamillion/i.test(b.currentTarget.id) ? "luxamillion" : "trunkford";
                        a.holder.off(), luxanimals.gameManager.selectCharacter(c), luxanimals.user.character = c, luxanimals.trackEvent("Button", "Click", "Select " + c), v("levelSelection"), p("click")
                    }).on("click", "#select-screen-back-button", function() {
                        a.holder.off(), luxanimals.trackEvent("Button", "Click", "Back /select-character"), v("home")
                    }).on("mouseover", ".portrait", function() {
                        $(this).transition({
                            x: "-471px"
                        }, 250)
                    }).on("mouseout", ".portrait", function() {
                        $(this).transition({
                            x: 0
                        }, 250)
                    }).find(".portrait").css({
                        x: 0
                    })
                },
                animateIn: function() {
                    trace("[uiManager] - characterSelection: animateIn"), this._super(), this.holder.stop().css({
                        opacity: 0,
                        display: "block"
                    }).transition({
                        opacity: 1
                    }, 500, x), luxanimals.trackScreen("/select-character")
                },
                animateOut: function() {
                    var a = this;
                    trace("[uiManager] - characterSelection: animateOut"), this._super(), this.holder.stop().transition({
                        opacity: 0
                    }, 500, function() {
                        a.holder.hide(), w()
                    })
                }
            }),
            C = new B,
            D = function(a) {
                var b = luxanimals.user || {};
                if (b.character && b.characters) {
                    var c = b.characters[b.character];
                    if (c && c.levels) {
                        var d = c.levels[a];
                        if (d && d.wins) return !0
                    }
                }
                return !1
            },
            E = m.extend({
                holder: $("#level-screen"),
                load: function() {
                    trace("[uiManager] - levelSelection: load"), this.toLoad = ["select-screen-background.jpg", "title_selectyerbattle.png", "screen-underline.png", "level-frame.png", "isle-of-coconuts.jpg", "simple-button.png", "back-button.png", "mute-button.png", "fwa_badge.png"], this.toLoad.push(D("isle-of-coconuts") ? "spout-belly-bay.jpg" : "spout-belly-bay-locked.jpg"), this.toLoad.push(D("spout-belly-bay") ? "fire-n-goats.jpg" : "fire-n-goats-locked.jpg"),
                        this._super()
                },
                initScreen: function() {
                    var a = this,
                        b = !0;
                    trace("[uiManager] - levelSelection: init"), this._super(), this.holder.on("click", "#level-screen-back-button", function() {
                        a.holder.off(), luxanimals.trackEvent("Button", "Click", "Back /select-level"), v("characterSelection")
                    }).on("click", ".level-unlocked", function() {
                        var b = this.id.replace(/^select-/, "");
                        a.holder.off(), luxanimals.levels.selectLevel(b), luxanimals.user.level = b, luxanimals.trackEvent("Button", "Click", "Level " + b), v("startGame"), p("click")
                    }).on("mouseover", ".level-unlocked", function() {
                        $(this).css({
                            backgroundPosition: "0 0"
                        }).transition({
                            backgroundPosition: "-165px 0"
                        }, 250), p("hover")
                    }).on("mouseout", ".level-unlocked", function() {
                        $(this).transition({
                            backgroundPosition: "0 0"
                        }, 250)
                    }).find(".level-portrait").css({
                        backgroundPosition: "0 0"
                    }).each(function() {
                        var a = this.id.replace(/^select-/, "");
                        $(this).toggleClass("level-unlocked", b).toggleClass("level-locked", !b), b = D(a)
                    })
                },
                animateIn: function() {
                    trace("[uiManager] - levelSelection: animateIn"), this._super(), this.holder.stop().css({
                        opacity: 0,
                        display: "block"
                    }).transition({
                        opacity: 1
                    }, 500, x), luxanimals.trackScreen("/select-level")
                },
                animateOut: function() {
                    var a = this;
                    trace("[uiManager] - levelSelection: animateOut"), this._super(), this.holder.stop().transition({
                        opacity: 0
                    }, 500, function() {
                        a.holder.hide(), w()
                    })
                }
            });
        E = new E;
        var F = m.extend({
            holder: $("#instructions-screen"),
            load: function() {
                trace("[uiManager] - instructions: load"), this.toLoad = ["instructions-screen-background.jpg", "back-button.png", "mute-button.png", "fwa_badge.png"], this._super()
            },
            initScreen: function() {
                trace("[uiManager] - instructions: init"), this._super(), $("#instructions-screen-back-button").on("click", function() {
                    $(this).off(), luxanimals.trackEvent("Button", "Click", "Back /instructions"), v("home")
                })
            },
            animateIn: function() {
                trace("[uiManager] - instructions: animateIn"), this._super(), this.holder.stop().css({
                    opacity: 0
                }).show().transition({
                    opacity: 1
                }, 500), luxanimals.trackScreen("/instructions")
            },
            animateOut: function() {
                trace("[uiManager] - instructions: animateOut"), this._super(), this.holder.stop().transition({
                    opacity: 0
                }, 500, function() {
                    $(this).hide(), w()
                })
            }
        });
        F = new F;
        var G = m.extend({
            holder: $("#video-screen"),
            videoTag: $("#lux-ahoy-video").clone(),
            videoPlayer: null,
            load: function() {
                this.loadCount > 0 || (this.loadCount += 1, trace("[uiManager] - videoObject: load"), this.toLoad = ["back-button.png", "mute-button.png", "fwa_badge.png"], this._super())
            },
            initScreen: function() {
                trace("[uiManager] - video: init"), $("#video-screen-back-button").after('<video id="lux-ahoy-video" class="video-js vjs-default-skin vjs-big-play-centered"></video>'), this.videoPlayer && (this.videoPlayer.dispose(), this.videoPlayer = null);
                var a, b;
                Modernizr.dolbyaudio ? (a = "assets/video/intro_dolby.mp4", b = "assets/images/intro_dolby.jpg") : (a = "assets/video/intro.mp4", b = "assets/images/intro.jpg");
                var c = {
                    controls: !0,
                    autoplay: !1,
                    preload: "auto",
                    width: 1200,
                    height: 640
                };
                Modernizr.phone && (c.poster = b), this.videoPlayer = videojs("lux-ahoy-video", c), this.mute(luxanimals.soundManager.isMuted()), this.videoPlayer.src({
                    type: "video/mp4",
                    src: a
                }).ready(function() {
                    this.currentTime(0), this.play()
                }), this.videoPlayer.on("ended", function() {
                    $(this).off(), $("#video-screen-back-button").off(), v("home")
                }), this._super(), $("#video-screen-back-button").on("click", function() {
                    $(this).off(), luxanimals.trackEvent("Button", "Click", "Back /videos"), v("home")
                })
            },
            animateIn: function() {
                trace("[uiManager] - video: animateIn"), this._super(), luxanimals.soundManager.pauseSound("menuLoop"), this.holder.stop().css({
                    opacity: 0
                }).show().transition({
                    opacity: 1
                }, 500), luxanimals.trackScreen("/video"), this.loadCount = 0
            },
            animateOut: function() {
                trace("[uiManager] - video: animateOut");
                luxanimals.soundManager.resumeSound("menuLoop"), this.videoPlayer.pause(), this._super(), this.holder.stop().transition({
                    opacity: 0
                }, 500, function() {
                    $(this).hide(), w()
                }), this.videoPlayer.dispose(), this.videoPlayer = null
            },
            mute: function(a) {
                this.videoPlayer && this.videoPlayer.muted(a)
            }
        });
        G = new G;
        var H = m.extend({
                load: function() {
                    trace("[uiManager] - leaderboard: load"), this.toLoad = ["leaderboard-screen-background.jpg"], this._super()
                },
                initScreen: function() {
                    trace("[uiManager] - leaderboard: init"), this.holder = $("#leaderboard-screen"), this._super();
                    var a = [{
                        pirate: "James",
                        wins: 112,
                        losses: 56,
                        loot: 302930
                    }, {
                        pirate: "Sam",
                        wins: 100,
                        losses: 65,
                        loot: 301165
                    }, {
                        pirate: "Phil",
                        wins: 93,
                        losses: 43,
                        loot: 296012
                    }, {
                        pirate: "Dave",
                        wins: 90,
                        losses: 22,
                        loot: 29e4
                    }, {
                        pirate: "Davis",
                        wins: 89,
                        losses: 75,
                        loot: 269821
                    }, {
                        pirate: "Charlie",
                        wins: 86,
                        losses: 56,
                        loot: 255e3
                    }, {
                        pirate: "Nick",
                        wins: 84,
                        losses: 70,
                        loot: 24e4
                    }, {
                        pirate: "Siri",
                        wins: 82,
                        losses: 14,
                        loot: 200100
                    }, {
                        pirate: "Alex",
                        wins: 80,
                        losses: 50,
                        loot: 198200
                    }, {
                        pirate: "Ashley",
                        wins: 78,
                        losses: 56,
                        loot: 19e4
                    }, {
                        pirate: "Catherine",
                        wins: 72,
                        losses: 25,
                        loot: 185e3
                    }, {
                        pirate: "Bill",
                        wins: 70,
                        losses: 23,
                        loot: 178e3
                    }, {
                        pirate: "Kyle",
                        wins: 68,
                        losses: 32,
                        loot: 165e3
                    }, {
                        pirate: "Jessica",
                        wins: 56,
                        losses: 56,
                        loot: 15e4
                    }, {
                        pirate: "Frank",
                        wins: 50,
                        losses: 56,
                        loot: 14e4
                    }, {
                        pirate: "Rachael",
                        wins: 43,
                        losses: 32,
                        loot: 13e4
                    }, {
                        pirate: "James",
                        wins: 40,
                        losses: 24,
                        loot: 122e3
                    }, {
                        pirate: "Juan",
                        wins: 37,
                        losses: 31,
                        loot: 101e3
                    }, {
                        pirate: "Heather",
                        wins: 35,
                        losses: 20,
                        loot: 98e3
                    }, {
                        pirate: "Ted",
                        wins: 32,
                        losses: 12,
                        loot: 95e3
                    }];
                    $("#leaderboard-data").empty();
                    for (var b = 0, c = 20; c > b; b++) $("#leaderboard-data").append('<tr id="pirate-' + b + '" class="pirate-row"><td class="rank-col">' + (b + 1) + '</td><td class="pirate-col">' + a[b].pirate + '</td><td class="wins-col">' + a[b].wins + '</td><td class="losses-col">' + a[b].losses + '</td><td class="loot-col">' + a[b].loot + "</td></tr>");
                    $("#leaderboard-screen-back-button").on("click", function() {
                        $(this).off(), luxanimals.trackEvent("Button", "Click", "Back /leaderboard"), v("home")
                    }), $.getJSON("assets/php/get-scores.php", function(a) {
                        var b = 1;
                        $.each(a.results, function(a, c) {
                            $("#leaderboard-data").append('<tr id="pirate-' + c.id + '" class="pirate-row"><td class="rank-col">' + b + '</td><td class="pirate-col">' + a + '</td><td class="wins-col">' + c.wins + '</td><td class="losses-col">' + c.losses + '</td><td class="loot-col">' + c.loot + "</td></tr>"), b++
                        })
                    }), $("#leaderboard-screen-my-score-button").on("click", function() {
                        $(".pirate-row td").css({
                            color: "#FFFFFF"
                        });
                        var a = Math.floor(19 * Math.random()) + 1;
                        $("#pirate-" + a + " td").css({
                            color: "yellow"
                        }), luxanimals.trackEvent("Button", "Click", "My Score")
                    })
                },
                animateIn: function() {
                    trace("[uiManager] - leaderboard: animateIn"), this._super(), this.holder.stop().css({
                        opacity: 0
                    }).show().animate({
                        opacity: 1
                    }, 500), luxanimals.trackScreen("/leaderboard")
                },
                animateOut: function() {
                    trace("[uiManager] - leaderboard: animateOut"), this._super(), $("#leaderboard-screen-back-button, #leaderboard-screen-my-score-button").off(), this.holder.stop().animate({
                        opacity: 0
                    }, 500, function() {
                        $(this).hide(), w()
                    })
                }
            }),
            I = function() {
                var a = function(a) {
                        var b;
                        switch (a) {
                            case 0:
                                b = new createjs.Bitmap(luxanimals.loadedAssets.instructionsLeft.img), b.x = 20, b.y = 340;
                                break;
                            case 1:
                                b = new createjs.Bitmap(luxanimals.loadedAssets.instructionsRight.img), b.x = 770, b.y = 340
                        }
                        b.set({
                            snapToPixel: !0,
                            mouseEnabled: !1,
                            alpha: 0
                        }), stage.addChild(b), l.get(b).wait(2e3).to({
                            alpha: 1
                        }, 1e3).wait(2500).to({
                            alpha: 0
                        }, 1e3).call(function() {
                            stage.removeChild(b)
                        })
                    },
                    b = function() {
                        var a = $("#start-screen"),
                            b = $("#start-screen-title"),
                            c = $("#start-screen-sub-title").find("span"),
                            d = $("#start-screen-sub-title-holder"),
                            e = $("#start-screen-underline"),
                            f = $("#fwa-badge"),
                            g = function() {
                                f.animate({
                                    opacity: 0
                                }, 1e3), b.css({
                                    x: 960
                                }), e.css({
                                    opacity: 0
                                }), d.css({
                                    x: -960
                                }), c.html(luxanimals.levels.getLevelSubTitle()), a.css({
                                    x: 0,
                                    opacity: 0
                                }).show().animate({
                                    opacity: 1
                                }, 1e3, function() {
                                    e.transition({
                                        opacity: 1
                                    }, 1e3), b.transition({
                                        x: 0
                                    }, 250), d.transition({
                                        x: 0
                                    }, 250)
                                }), luxanimals.trackScreen("/game-start")
                            },
                            h = function() {
                                f.transition({
                                    opacity: 1
                                }, 1e3), a.transition({
                                    opacity: 0
                                }, 1e3, function() {
                                    a.hide()
                                })
                            };
                        return {
                            animateIn: g,
                            animateOut: h
                        }
                    }(),
                    c = function() {
                        var a = "/game-results",
                            b = "",
                            c = {
                                name: "Lux Ahoy HTML5 Game",
                                picture: "assets/images/main-screen-background-lores.png",
                                description: ""
                            },
                            d = !1,
                            e = $("#results-screen"),
                            f = $("#results-screen-title"),
                            g = $("#results-screen-title-line"),
                            h = $("#results-screen-sub-title").find("span"),
                            i = $("#results-screen-sub-title-holder"),
                            j = $("#loot-line");
                        e.on("click", "#results-screen-replay-button", function() {
                            d && (z(), luxanimals.trackEvent("Button", "Click", "Replay " + a), luxanimals.gameManager.restart())
                        }).on("click", "#results-screen-levels-button", function() {
                            d && (z(), K.animateOut(), luxanimals.gameManager.clearAll(), luxanimals.main.game.clearAll(), luxanimals.trackEvent("Button", "Click", "Levels " + a), v("levelSelection"))
                        }).on("click", "#results-screen-quit-button", function() {
                            d && (z(), K.animateOut(), luxanimals.gameManager.clearAll(), luxanimals.main.game.clearAll(), luxanimals.main.game.quit(), luxanimals.trackEvent("Button", "Click", "Quit " + a), v("home"))
                        }).on("click", "#twitter-share", function(c) {
                            c.preventDefault(), s(b, a), luxanimals.trackEvent("Button", "Click", "Twitter Share " + a)
                        }).on("click", "#facebook-share", function(b) {
                            b.preventDefault(), r(c, a), luxanimals.trackEvent("Button", "Click", "Facebook Share " + a)
                        }).on("click", "#results-screen-characters-button", function() {
                            z(), K.animateOut(), luxanimals.gameManager.clearAll(), luxanimals.main.game.clearAll(), v("characterSelection")
                        }).on("click", "#results-screen-next-button", function() {
                            luxanimals.levels.selectNextLevel(), luxanimals.user.level = luxanimals.levels.getLevelID(), z(), K.animateOut(), luxanimals.gameManager.clearAll(), luxanimals.main.game.clearAll(), v("startGame")
                        });
                        var k = function(a) {
                                var b = luxanimals.user.characters || {},
                                    c = b[luxanimals.user.character] || {},
                                    d = c.levels || {},
                                    e = d[luxanimals.user.level] || {};
                                a ? (e.wins = e.wins || 0, e.wins++) : (e.loses = e.loses || 0, e.loses++), d[luxanimals.user.level] = e, c.levels = d, b[luxanimals.user.character] = c, luxanimals.user.characters = b
                            },
                            l = function(a) {
                                var b = luxanimals.user.scores || {};
                                b.highest = Math.max(b.highest, a), b.career = b.career || 0, b.career += a, luxanimals.user.scores = b
                            },
                            m = $("#results-screen-next-button"),
                            n = $("#results-screen-characters-button"),
                            o = $("#results-victory-message"),
                            p = $(".share-button"),
                            q = $("#points"),
                            t = $("#results-screen-levels-button"),
                            u = $("#results-screen-replay-button"),
                            w = $("#results-screen-quit-button"),
                            x = function(r) {
                                var s = T(r.playerScore);
                                r.victory && "fire" != luxanimals.user.level ? (n.hide(), m.show().css({
                                    opacity: 0
                                }).delay(5e3).transition({
                                    opacity: 1
                                }, 1e3)) : "fire" === luxanimals.user.level && r.victory ? ($("#results-victory-message").html("luxamillion" === luxanimals.user.character ? "Congratulations! You conquered all 3 maritime battles.<br/>Now try your cannon skills as the Evil Trunkford." : "Congratulations! You conquered all 3 maritime battles.<br/>Now try your cannon skills as the Dashing Luxamillion."), o.show(), n.show(), m.hide()) : (m.hide(), n.hide(), o.hide()), d = !0, trace("[uiManager] - Overlays - gameOver - animateIn " + r.victory), b = r.victory ? "Me fine ship defeated the " + r.aiCharacter + " in the Lux Ahoy HTML5 Beta." : "Arrgh, I wound up at the bottom o’ the sea playin’ the Lux Ahoy HTML5 Beta.", c.description = b + " Are you pirate enough? Get ye cannons ready at luxahoy.com.", i.css({
                                    left: "250px"
                                }), p.css({
                                    opacity: 0
                                }), g.css({
                                    opacity: 0
                                }), f.toggleClass("lose", !r.victory).css({
                                    opacity: 0
                                }), h.html(r.subtitle), q.html(s), t.delay(4e3).transition({
                                    top: 100
                                }, 600, "easeOutBack"), u.delay(4500).transition({
                                    top: 100
                                }, 600, "easeOutBack"), w.delay(5e3).transition({
                                    top: 100
                                }, 600, "easeOutBack"), e.css({
                                    opacity: 0
                                }).show().delay(3e3).transition({
                                    opacity: 1
                                }, 1e3, function() {
                                    g.transition({
                                        opacity: 1
                                    }, 300), f.transition({
                                        opacity: 1
                                    }, 300, function() {
                                        p.transition({
                                            opacity: 1
                                        }, 550), i.transition({
                                            height: "180px"
                                        }, 600), j.transition({
                                            y: "180px"
                                        }, 1200, "easeOutElastic")
                                    })
                                }), k(r.victory), l(r.playerScore), y(), luxanimals.trackScreen(a)
                            },
                            z = function() {
                                d = !1, m.hide(), o.hide(), u.stop().css({
                                    top: "190px"
                                }), t.stop().css({
                                    top: "190px"
                                }), w.stop().css({
                                    top: "190px"
                                }), e.transition({
                                    opacity: 0
                                }, 500, function() {
                                    e.hide(), i.css({
                                        height: 0
                                    }), j.css({
                                        y: 0
                                    })
                                })
                            };
                        return {
                            animateIn: x,
                            animateOut: z
                        }
                    }(),
                    d = function() {
                        this.videoPlayer = null, $("#result-video-screen-back-button").on("click", function() {
                            I.resultVideo.animateOut()
                        });
                        var a = function(a) {
                                if (trace("[uiManager] - result video: animateIn"), console.log("[uiManager] - result video: animateIn"), luxanimals.soundManager.pauseSound("battleLoop"), this.holder = $("#result-video-screen"), $("#result-video-screen-back-button").after('<video id="lux-ahoy-result-video" class="video-js vjs-default-skin vjs-big-play-centered"></video>'), this.holder.stop().css({
                                        opacity: 0
                                    }).show().transition({
                                        opacity: 1
                                    }, 500), this.videoPlayer);
                                else {
                                    var b = {
                                        controls: !0,
                                        autoplay: !1,
                                        preload: "auto",
                                        width: 1200,
                                        height: 640
                                    };
                                    this.videoPlayer = videojs("lux-ahoy-result-video", b), this.videoPlayer.on("ended", function() {
                                        console.log("video ended!"), I.resultVideo.animateOut()
                                    })
                                }
                                this.mute(luxanimals.soundManager.isMuted());
                                var c;
                                c = Modernizr.dolbyaudio ? "_dolby" : "";
                                var d;
                                d = 0 === a ? "lux_win" : "trunk_win";
                                var e = "assets/video/" + d + c + ".mp4",
                                    f = "assets/images/" + d + c + ".jpg";
                                Modernizr.phone && (this.videoplayer.poster = f), this.videoPlayer.src({
                                    type: "video/mp4",
                                    src: e
                                }).ready(function() {
                                    this.currentTime(0), this.play()
                                }), this.loadCount = 0
                            },
                            b = function() {
                                trace("[uiManager] - video: animateOut");
                                luxanimals.soundManager.resumeSound("battleLoop"), this.videoPlayer.pause(), this.holder.stop().transition({
                                    opacity: 0
                                }, 500, function() {
                                    $(this).hide()
                                }), this.videoPlayer.dispose(), this.videoPlayer = null
                            },
                            c = function(a) {
                                this.videoPlayer && this.videoPlayer.muted(a)
                            };
                        return {
                            animateIn: a,
                            animateOut: b,
                            mute: c
                        }
                    }();
                return {
                    gameStart: b,
                    gameOver: c,
                    instructions: a,
                    resultVideo: d
                }
            }(),
            J = function() {
                var a = [],
                    b = !1,
                    c = function(a, b, c, d) {
                        var e;
                        switch (a) {
                            case 1e3:
                                e = new createjs.Bitmap(luxanimals.loadedAssets.points1000.img), e.regX = 47, e.regY = 11;
                                break;
                            case 2400:
                                e = new createjs.Bitmap(luxanimals.loadedAssets.points2400.img), e.regX = 48, e.regY = 14;
                                break;
                            case 5e3:
                                e = new createjs.Bitmap(luxanimals.loadedAssets.points5000.img), e.regX = 49, e.regY = 14;
                                break;
                            case 15e3:
                                e = new createjs.Bitmap("green" === d ? luxanimals.loadedAssets.points15000green.img : luxanimals.loadedAssets.points15000pink.img), e.regX = 74, e.regY = 18
                        }
                        e.x = b, e.y = c, e.scaleX = e.scaleY = .01, stage.addChild(e), l.get(e).to({
                            scaleX: .8,
                            scaleY: .8,
                            y: c - 75
                        }, 600).call(function() {
                            stage.removeChild(e)
                        })
                    },
                    d = function(b) {
                        a.push(b), g()
                    },
                    e = $('<div id="prompt-message"><div id="prompt-message-background"></div></div>').css({
                        x: "-50%"
                    }),
                    f = e.find("#prompt-message-background");
                $("#game-messages").append(e);
                var g = function() {
                    b || (b = !0, f.html(a.shift()), e.transition({
                        y: -80,
                        opacity: 1
                    }, 500).delay(1100).transition({
                        y: -20,
                        opacity: 0
                    }, 500, function() {
                        b = !1, a.length >= 1 && g()
                    }))
                };
                return {
                    score: c,
                    prompt: d
                }
            }(),
            K = function() {
                var a = $("#pause-button"),
                    b = $("#trunk-ui, #lux-ui, #center-ui-holder"),
                    c = $("#lux-ui"),
                    d = $("#trunk-ui"),
                    e = $("#center-ui-holder"),
                    f = $("#main"),
                    g = $("#canvasCover"),
                    h = $("#canvasHolder");
                a.on("click", function() {
                    luxanimals.trackEvent("Button", "Click", "Pause"), luxanimals.gameManager.pauseResume()
                });
                var i = function() {
                        a.show(), b.css({
                            y: -100
                        }), g.css({
                            opacity: 1
                        }).show().delay(1e3).transition({
                            opacity: 0
                        }, 1e3, k), h.show(), x(), luxanimals.trackScreen("/game")
                    },
                    j = function() {
                        a.hide()
                    },
                    k = function() {
                        g.hide(), f.hide(), c.transition({
                            y: 0
                        }, 500, "easeOutQuad"), d.delay(300).transition({
                            y: 0
                        }, 500, "easeOutQuad"), e.delay(600).transition({
                            y: 0
                        }, 500, "easeOutQuad")
                    };
                return {
                    animateIn: i,
                    animateOut: j
                }
            }(),
            L = $("#wind-meter-left"),
            M = $("#wind-meter-right"),
            N = function(a) {
                var b = a / 2;
                a > 0 ? (L.transition({
                    scale: [0, 1]
                }, 1e3), M.transition({
                    scale: [b, 1]
                }, 1e3)) : (M.transition({
                    scale: [0, 1]
                }, 1e3), L.transition({
                    scale: [-b, 1]
                }, 1e3))
            },
            O = function() {
                var a = "/game/paused",
                    b = "5deg,-3deg,4deg,-2deg".split(","),
                    c = $("#pause-screen"),
                    d = $("#pause-screen-actions-holder"),
                    e = $("#pause-screen-actions"),
                    g = $("#pause-screen-actions .simple-button");
                return e.on("click", "#pause-screen-resume-button", function() {
                        f && (luxanimals.trackEvent("Button", "Click", "Resume " + a), luxanimals.gameManager.resume())
                    }).on("click", "#pause-screen-restart-button", function() {
                        f && (I.gameOver.animateOut(), luxanimals.trackEvent("Button", "Click", "Restart " + a), luxanimals.gameManager.restart())
                    }).on("click", "#pause-screen-quit-button", function() {
                        f && (K.animateOut(), luxanimals.trackEvent("Button", "Click", "Quit " + a), luxanimals.gameManager.resume(), luxanimals.gameManager.clearAll(), luxanimals.main.game.clearAll(), luxanimals.main.game.quit(), v("home"))
                    }).on("click", "#pause-screen-levels-button", function() {
                        f && (K.animateOut(), luxanimals.trackEvent("Button", "Click", "Levels " + a), luxanimals.gameManager.resume(), luxanimals.gameManager.clearAll(), luxanimals.main.game.clearAll(), v("levelSelection"))
                    }),
                    function(h) {
                        luxanimals.uiManager.soundMute(h), f = h, f ? (c.show(), d.stop().css({
                            y: -640
                        }).transition({
                            y: 0
                        }, 1e3), e.stop().css({
                            skewX: 0,
                            x: 0
                        }).transition({
                            skewX: -5,
                            x: 50
                        }, 500).transition({
                            skewX: 3,
                            x: 30
                        }, 1e3).transition({
                            skewX: 0,
                            x: 0
                        }, 1e3), g.each(function(a) {
                            $(this).stop().css({
                                rotate: 0
                            }).transition({
                                rotate: b[a]
                            }, 500).transition({
                                rotate: "-" + b[a]
                            }, 1e3).transition({
                                rotate: 0
                            }, 1e3)
                        }), luxanimals.trackScreen(a)) : (c.hide(), luxanimals.trackScreen("/game"))
                    }
            }(),
            P = document.getElementById("lux-ui-title"),
            Q = document.getElementById("trunk-ui-title"),
            R = P.innerText ? "innerText" : "textContent",
            S = function(a, b) {
                b = T(b), 0 === a ? P[R] = b : Q[R] = b
            },
            T = function(a) {
                return a += "", (a + "").replace(/\B(?=(\d{3})+(?!\d))/g, ",")
            },
            U = function() {
                var a = $("#preloader"),
                    b = a.find("#bar").get(0),
                    c = 0,
                    d = Modernizr.prefixed("transform"),
                    e = function(a) {
                        var e = a.loaded / a.total;
                        Modernizr.csstransforms ? (b.style[d] = "scaleX(" + e + ")", c = e) : $(b).css({
                            width: Math.round(172 * e)
                        })
                    },
                    f = function() {
                        Modernizr.csstransforms ? (b.style[d] = "scaleX(1)", c = 1) : $(b).css({
                            width: 172
                        })
                    },
                    g = function() {
                        Modernizr.csstransforms ? (b.style[d] = "scaleX(0)", c = 0) : $(b).css({
                            width: 1
                        })
                    },
                    h = function() {
                        a.css({
                            x: 0
                        }).transition({
                            opacity: 0
                        }, 1e3, function() {
                            $(this).css({
                                x: -1e3
                            })
                        })
                    },
                    i = function() {
                        g(), a.stop().css({
                            x: 0,
                            opacity: 0
                        }).transition({
                            opacity: 1
                        }, 300)
                    };
                return {
                    progress: e,
                    complete: f,
                    hide: h,
                    show: i
                }
            }();
        return {
            preloader: U,
            switchScreen: w,
            nextScreenLoaded: t,
            loadNextScreen: v,
            pauseMenu: O,
            overlays: I,
            message: J,
            score: S,
            setWindMeter: N,
            soundMute: q
        }
    },
    function() {
        var a = !1,
            b = /xyz/.test(function() {
                xyz
            }) ? /\b_super\b/ : /.*/;
        this.Class = function() {}, Class.extend = function(c) {
            function d() {
                !a && this.init && this.init.apply(this, arguments)
            }
            var e = this.prototype;
            a = !0;
            var f = new this;
            a = !1;
            for (var g in c) f[g] = "function" == typeof c[g] && "function" == typeof e[g] && b.test(c[g]) ? function(a, b) {
                return function() {
                    var c = this._super;
                    this._super = e[a];
                    var d = b.apply(this, arguments);
                    return this._super = c, d
                }
            }(g, c[g]) : c[g];
            return d.prototype = f, d.prototype.constructor = d, d.extend = arguments.callee, d
        }
    }(), luxanimals.GameManager = function() {
        var a, b, c = [{
                ai: !1,
                score: 0,
                hits: 0
            }, {
                ai: !1,
                score: 0,
                hits: 0
            }],
            d = 0,
            e = !1,
            f = 0,
            g = 1,
            h = !1,
            i = $("#canvasHolder"),
            j = function(a) {
                return "trunkford" === a ? k({
                    ai: !0
                }, {
                    ai: !1
                }) : k({
                    ai: !1
                }, {
                    ai: !0
                })
            },
            k = function(a, b) {
                c[0].ai = a.ai, c[1].ai = b.ai, a.ai && !b.ai && (d = f = 1, g = 0)
            },
            l = function() {
                trace("[gameManager] - init"), C(), luxanimals.scene.init(c), luxanimals.physics.windManager.change(), luxanimals.uiManager.overlays.gameStart.animateIn(), t.init(), b = 0, luxanimals.addObject(m)
            },
            m = {
                update: function(a) {
                    b += a, b > 5500 && (trace("start turn with delay"), luxanimals.removeObject(m), h = !0, luxanimals.uiManager.message.prompt("Your Turn"), luxanimals.uiManager.overlays.gameStart.animateOut(), luxanimals.uiManager.overlays.instructions(d), luxanimals.scene.setStartNextTurn(), t.start(), n())
                }
            },
            n = function() {
                c[d].ai ? i.removeClass("reticule-pink reticule-green") : i.addClass(0 === d ? "reticule-pink" : "reticule-green")
            },
            o = function() {
                trace("[gameManager] - fire"), t.stop(), 0 === d ? luxanimals.scene.animateCharacter(d, "fire") : luxanimals.scene.animateCharacter(d, "fire"), luxanimals.soundManager.playRandomSound(["cannon1", "cannon2"], {
                    interrupt: createjs.Sound.INTERRUPT_ANY
                })
            },
            p = function(a) {
                trace("[gameManager] - hitShip " + a);
                var b = 0;
                "shipR" === a && (b = 1), b != d && (s(15e3), luxanimals.uiManager.message.prompt(c[b].ai ? "Nice Shot!" : "Ouch!")), c[b].hits++, luxanimals.scene.shipDamage(b, c[b].hits), luxanimals.scene.animateCharacter(b, "hit"), 0 === b ? $("#lux-hit-" + c[b].hits).show() : $("#trunk-hit-" + c[b].hits).show(), 3 != c[b].hits ? luxanimals.soundManager.playRandomSound(["hit1", "hit2"]) : (luxanimals.soundManager.playSound("hit3"), z())
            },
            q = function() {
                trace("[gameManager] - turnComplete " + d), 3 === c[0].hits || 3 === c[1].hits || r()
            },
            r = function() {
                trace("[gameManager] - nextTurn"), luxanimals.scene.endTurn(d), luxanimals.physics.endTurn(), d = 0 === d ? 1 : 0, n(), luxanimals.scene.setStartNextTurn(), luxanimals.physics.windManager.change(), t.clear(), t.start(), luxanimals.uiManager.message.prompt(c[d].ai ? "Opponent's Turn" : "Your Turn")
            },
            s = function(a, b) {
                b ? c[b].score += a : c[d].score += a, luxanimals.uiManager.score(d, c[d].score)
            },
            t = function() {
                var a = $("#timer-canvas-holder").pietimer(),
                    b = 0,
                    c = function() {
                        return 0 === d ? "#CF208B" : "#39bc36"
                    },
                    e = function() {
                        a.init({
                            seconds: 25,
                            colour: c(),
                            height: 60,
                            width: 60
                        }, h), b = 0, luxanimals.addObject(t)
                    },
                    f = function() {
                        a.setColor(c()), a.start()
                    },
                    g = function(c) {
                        b += c, b > 1e3 && (b -= 1e3, a.timer())
                    },
                    h = function() {
                        luxanimals.uiManager.message.prompt("You Snooze You Lose!"), q()
                    };
                return {
                    init: e,
                    start: f,
                    update: g,
                    stop: a.pause,
                    clear: a.clear
                }
            }(),
            u = function() {
                return e ? w() : v()
            },
            v = function() {
                return e || (trace("[gameManager] - pause"), h && (e = !0, createjs.Ticker.setPaused(e), t.stop(), luxanimals.uiManager.pauseMenu(e), luxanimals.physics.pauseResume(e)), luxanimals.levels.getCurrentLevel().pauseResume && luxanimals.levels.getCurrentLevel().pauseResume(e)), e
            },
            w = function() {
                return e && (trace("[gameManager] - resume"), e = !1, createjs.Ticker.setPaused(e), t.start(), luxanimals.uiManager.pauseMenu(e), luxanimals.physics.pauseResume(e), luxanimals.levels.getCurrentLevel().pauseResume && luxanimals.levels.getCurrentLevel().pauseResume(e)), e
            },
            x = function(a) {
                return 0 === a ? "Dashing Luxamillion" : "Evil Trunkford"
            },
            y = function(a) {
                return a ? "YOU CONQUERED " + luxanimals.levels.getLevelName().toUpperCase() : "YOU WERE SUNK BY A SCURVY BUGGER"
            },
            z = function() {
                trace("[gameManager] - gameOver"), h = !1, luxanimals.levels.getCurrentLevel().gameOver && luxanimals.levels.getCurrentLevel().gameOver(), t.clear(), 3 === c[0].hits ? (a = c[1], luxanimals.physics.gameOver(0), luxanimals.scene.animateCharacter(0, "lose"), luxanimals.scene.animateCharacter(1, "win")) : (a = c[0], luxanimals.physics.gameOver(1), luxanimals.scene.animateCharacter(0, "win"), luxanimals.scene.animateCharacter(1, "lose")), a.ai ? (trace("[gameManager] - gameOver: loser"), luxanimals.uiManager.message.prompt("Defeat!"), s(5e4, g)) : (trace("[gameManager] - gameOver: winner"), luxanimals.uiManager.message.prompt("Victory!"), s(5e4, f));
                var b = {
                        victory: !a.ai,
                        playerScore: c[f].score,
                        aiScore: c[g].score,
                        playerCharacter: x(f),
                        aiCharacter: x(g),
                        levelName: luxanimals.levels.getLevelName(),
                        subtitle: y(!a.ai)
                    },
                    d = c.indexOf(a);
                Modernizr.phone || luxanimals.uiManager.overlays.resultVideo.animateIn(d), luxanimals.uiManager.overlays.gameOver.animateIn(b), luxanimals.trackEvent("Game", "Player " + (a.ai ? "Lost" : "Won"), "Game Over", c[f].score), luxanimals.trackEvent("Game", "AI " + (a.ai ? "Won" : "Lost"), "Game Over", c[g].score), luxanimals.scene.gameOver()
            },
            A = function() {
                trace("[gameManager] - restart"), B(), luxanimals.main.game.restart(), e && w()
            },
            B = function() {
                h = !1, luxanimals.removeAllObjects(), luxanimals.levels.getCurrentLevel().clearAll && luxanimals.levels.getCurrentLevel().clearAll(), luxanimals.scene.restart(), G(), a = null, c[0].score = c[0].hits = 0, c[1].score = c[1].hits = 0, d = 0, c[0].ai && !c[1].ai && (d = 1);
                for (var b = 1; 3 >= b; b++) $("#lux-hit-" + b).hide(), $("#trunk-hit-" + b).hide();
                luxanimals.uiManager.score(0, 0), luxanimals.uiManager.score(1, 0), luxanimals.physics.clearAll(), t.clear(), stage.removeAllChildren()
            },
            C = function() {
                document.onkeydown = S, document.onkeyup = T, F(), H(), window.onfocus = J, window.onblur = I
            },
            D = function() {
                luxanimals.buttons.mouseDown = !0, luxanimals.buttons.mouseUp = !1
            },
            E = function() {
                luxanimals.buttons.mouseDown = !1, luxanimals.buttons.mouseUp = !0
            },
            F = function() {
                stage.addEventListener("stagemousedown", D), stage.addEventListener("stagemouseup", E), window.navigator.msPointerEnabled && ($("html").css("-ms-content-zooming", "none"), stage.canvas.addEventListener("MSPointerDown", function(a) {
                    a.preventDefault(), stage._handleMouseDown(a), stage._handleMouseMove(a)
                }), window.addEventListener("MSPointerUp", function(a) {
                    stage._handleMouseUp(a)
                }), window.addEventListener("MSPointerMove", function(a) {
                    stage._handleMouseMove(a)
                }))
            },
            G = function() {
                luxanimals.buttons.mouseUp = !0, luxanimals.buttons.mouseDown = !1, document.onkeydown = null, document.onkeyup = null, stage.removeEventListener("stagemousedown", D), stage.removeEventListener("stagemouseup", E), window.onfocus = null, window.onblur = null
            },
            H = function() {
                createjs.Touch.enable(stage)
            },
            I = function(a) {
                luxanimals.trackEvent("Window", "Blur", a.type), e || v()
            },
            J = function(a) {
                luxanimals.trackEvent("Window", "Focus", a.type)
            },
            K = 32,
            L = 38,
            M = 40,
            N = 37,
            O = 39,
            P = 80,
            Q = 77,
            R = 67,
            S = function(a) {
                switch (trace(a.keyCode), a.keyCode) {
                    case N:
                        luxanimals.buttons.left = !0;
                        break;
                    case O:
                        luxanimals.buttons.right = !0;
                        break;
                    case K:
                        luxanimals.buttons.space = !0;
                        break;
                    case L:
                        luxanimals.buttons.up = !0;
                        break;
                    case M:
                        luxanimals.buttons.down = !0
                }
            },
            T = function(a) {
                switch (a.keyCode) {
                    case N:
                        luxanimals.buttons.left = !1;
                        break;
                    case O:
                        luxanimals.buttons.right = !1;
                        break;
                    case K:
                        luxanimals.buttons.space = !1;
                        break;
                    case L:
                        luxanimals.buttons.up = !1;
                        break;
                    case M:
                        luxanimals.buttons.down = !1;
                        break;
                    case P:
                        u();
                        break;
                    case Q:
                        luxanimals.uiManager.soundMute(null, !0);
                        break;
                    case R:
                        luxanimals.debug && luxanimals.coins.placeCoin()
                }
            };
        return {
            init: l,
            pauseResume: u,
            pause: v,
            resume: w,
            fire: o,
            hitShip: p,
            turnComplete: q,
            score: s,
            restart: A,
            disableMouseEvents: G,
            enableMouseEvents: F,
            selectCharacter: j,
            setPlayers: k,
            clearAll: B,
            getTurn: function() {
                return d
            },
            getPlayers: function() {
                return c
            }
        }
    }, luxanimals.Clouds = function() {
        trace("[clouds] - init");
        var a, b, c = [],
            d = function(b) {
                c = [];
                for (var d = 0, e = b.length; e > d; d++) {
                    var f, g = !1;
                    "sun" !== b[d].type ? (f = new createjs.Bitmap(luxanimals.loadedAssets.cloud.img), f.regX = 144, f.regY = 68) : (f = new createjs.Bitmap(luxanimals.loadedAssets.sun_cloud.img), f.regX = 110, f.regY = 110, g = !0);
                    var h = b[d].scale;
                    f.scaleX = f.scaleY = h, f.y = b[d].y, f.x = b[d].x;
                    var i = new createjs.Bitmap(luxanimals.loadedAssets.rope.img);
                    f.snapToPixel = !0, f.mouseEnabled = !1, a.addChild(i), a.addChild(f);
                    var j;
                    j = 1 !== d ? luxanimals.physics.createCloud(f.x, f.y, 288 * b[d].scale / 3, 137 * b[d].scale / 3, f, i) : luxanimals.physics.createCloud(f.x, f.y, 100, 100, f, i, g), c.push({
                        bmp: f,
                        rope: i,
                        body: j,
                        anchor: f.x,
                        type: b[d].type
                    });
                    var k = c[d].anchor - c[d].bmp.x,
                        l = 0 - c[d].bmp.y,
                        m = Math.sqrt(k * k + l * l);
                    c[d].rope.scaleY = m / 171
                }
            },
            e = function() {
                var a = new createjs.Bitmap(luxanimals.loadedAssets.stormCloudFront.img),
                    c = new createjs.Bitmap(luxanimals.loadedAssets.stormCloudMid.img),
                    d = new createjs.Bitmap(luxanimals.loadedAssets.stormCloudBack.img);
                a.snapToPixel = !0, c.snapToPixel = !0, d.snapToPixel = !0, a.mouseEnabled = !1, c.mouseEnabled = !1, d.mouseEnabled = !1, c.y = 40, d.y = 90, b.addChild(d), b.addChild(c), b.addChild(a), b.cache(0, 0, 960, 205)
            },
            f = function(a) {
                b.uncache(), b.addChildAt(a, 2)
            },
            g = function(b) {
                for (var d = 0, e = c.length; e > d; d++)
                    if (c[d].bmp === b.skin) {
                        var f;
                        "sun" != c[d].type ? (f = new createjs.Bitmap(luxanimals.loadedAssets.cloudCracked.img), f.regX = 144, f.regY = 68) : (f = new createjs.Bitmap(luxanimals.loadedAssets.sun_cloudCracked.img), f.regX = 110, f.regY = 110), f.x = b.skin.x, f.y = b.skin.y, f.scaleX = f.scaleY = b.skin.scaleX, f.rotation = b.skin.rotation;
                        var g = a.getChildIndex(b.skin);
                        a.removeChild(b.skin), a.addChildAt(f, g), b.skin = f, a.removeChild(c[d].bmp), c[d].bmp = f
                    }
            },
            h = (Math.PI, function() {
                for (var a, b, d, e, f = c.length; f-- > 0;) e = c[f], a = e.bmp.x - e.anchor, b = e.bmp.y, 0 > b && (b = 0), d = Math.atan2(b, a) * RAD_TO_DEG - 90, e.rope.x = e.anchor, e.rope.rotation = d
            });
        return {
            populate: d,
            storm: e,
            update: h,
            crack: g,
            addLightning: f,
            setForegroundHolder: function(b) {
                a = b
            },
            setBackgroundHolder: function(a) {
                b = a
            }
        }
    }, luxanimals.Coins = function() {
        var a, b = [],
            c = [],
            d = [];
        b[0] = [{
            x: 453,
            y: 150
        }, {
            x: 426,
            y: 129
        }, {
            x: 477,
            y: 127
        }, {
            x: 477,
            y: 175
        }, {
            x: 427,
            y: 174
        }, {
            x: 637,
            y: 144
        }, {
            x: 542,
            y: 199
        }, {
            x: 400,
            y: 200
        }, {
            x: 301,
            y: 139
        }, {
            x: 367,
            y: 378
        }, {
            x: 487,
            y: 321
        }, {
            x: 580,
            y: 375
        }, {
            x: 360,
            y: 295
        }, {
            x: 416,
            y: 277
        }, {
            x: 475,
            y: 270
        }, {
            x: 543,
            y: 280
        }, {
            x: 595,
            y: 299
        }, {
            x: 306,
            y: 320
        }, {
            x: 639,
            y: 327
        }, {
            x: 409,
            y: 433
        }, {
            x: 542,
            y: 418
        }], b[1] = [{
            x: 254,
            y: 148
        }, {
            x: 273,
            y: 127
        }, {
            x: 235,
            y: 127
        }, {
            x: 235,
            y: 167
        }, {
            x: 273,
            y: 170
        }, {
            x: 383,
            y: 458
        }, {
            x: 282,
            y: 445
        }, {
            x: 574,
            y: 320
        }, {
            x: 574,
            y: 290
        }, {
            x: 574,
            y: 260
        }, {
            x: 574,
            y: 230
        }, {
            x: 574,
            y: 200
        }, {
            x: 574,
            y: 170
        }, {
            x: 777,
            y: 198
        }, {
            x: 692,
            y: 150
        }, {
            x: 190,
            y: 202
        }, {
            x: 86,
            y: 169
        }], b[2] = [{
            x: 433,
            y: 433
        }, {
            x: 413,
            y: 470
        }, {
            x: 383,
            y: 500
        }, {
            x: 345,
            y: 515
        }, {
            x: 310,
            y: 517
        }, {
            x: 470,
            y: 433
        }, {
            x: 497,
            y: 470
        }, {
            x: 533,
            y: 500
        }, {
            x: 580,
            y: 515
        }, {
            x: 625,
            y: 515
        }, {
            x: 450,
            y: 290
        }, {
            x: 450,
            y: 260
        }, {
            x: 450,
            y: 230
        }, {
            x: 450,
            y: 200
        }, {
            x: 450,
            y: 170
        }, {
            x: 474,
            y: 272
        }, {
            x: 492,
            y: 251
        }, {
            x: 426,
            y: 272
        }, {
            x: 408,
            y: 251
        }, {
            x: 449,
            y: 375
        }];
        var e = function() {
                trace("[coins] init " + luxanimals.levels.getLevel()), c = [];
                for (var a = b[luxanimals.levels.getLevel()], d = 0, e = a.length; e > d; d++) f(a[d].x, a[d].y, d)
            },
            f = function(b, d, e) {
                var f = new createjs.Bitmap(luxanimals.loadedAssets.coinPic.img);
                f.x = b, f.y = d, f.regX = 11, f.regY = 11, f.mouseEnabled = !1, f.snapToPixel = !0, a.addChild(f), c.push(f), luxanimals.physics.createCoin(f.x, f.y, e)
            },
            g = function() {
                if (luxanimals.debug) {
                    f(stage.mouseX, stage.mouseY, d.length), d.push({
                        x: stage.mouseX,
                        y: stage.mouseY
                    });
                    for (var a = "", b = 0, c = d.length; c > b; b++) a += "{x:" + d[b].x + ", y:" + d[b].y + "},";
                    trace(a)
                }
            },
            h = function(b) {
                var d = 0 === luxanimals.gameManager.getTurn() ? 30 : 930,
                    e = c[b];
                luxanimals.soundManager.playSound("coin"), createjs.Tween.get(e).to({
                    x: d,
                    y: 80
                }, 400, createjs.Ease.quadOut).call(function() {
                    a.removeChild(e)
                }), luxanimals.gameManager.score(2e3);
                var f = luxanimals.user.scores || {};
                f.coins = f.coins || 0, f.coins++, luxanimals.user.scores = f
            };
        return {
            init: e,
            collected: h,
            placeCoin: g,
            setHolder: function(b) {
                a = b
            }
        }
    }, luxanimals.Powerups = function() {
        var a, b, c = function() {
                trace("[powerups] init"), a = [e]
            },
            d = function(b) {
                if (!b) {
                    var c = Math.floor(Math.random() * a.length),
                        d = new a[c];
                    d.init()
                }
            },
            e = function() {
                var a = "Health Crate",
                    c = function() {
                        console.log("[powerups] healthCrate init");
                        var c = new createjs.Bitmap(luxanimals.loadedAssets.crate.img);
                        c.regX = 17, c.regY = 17, b.addChild(c), luxanimals.physics.createPowerup(a, c)
                    },
                    d = function() {},
                    e = function() {};
                return {
                    init: c,
                    onCollision: d,
                    remove: e,
                    id: function() {
                        return a
                    }
                }
            };
        return {
            init: c,
            spawn: d,
            setHolder: function(a) {
                b = a
            }
        }
    }, luxanimals.Levels = function() {
        var a, b, c, d, e = 0,
            f = [],
            g = $("#canvasHolder"),
            h = createjs.Tween,
            i = createjs.Ease,
            j = {
                overlay: "overlay.png",
                reticule_pink: "reticule_pink.png",
                reticule_green: "reticule_green.png",
                pause_screen_actions: "pause-screen-actions.png",
                simple_button: "simple-button.png",
                debugDot: "dot.png",
                coinPic: "coin.png",
                background: "background.jpg",
                lux: "lux_anims_zoe.png",
                cannon: "cannon.png",
                cannonMount: "cannonMountL.png",
                cannonFlash: "cannon_flash.png",
                trunkford: "trunkford_anims_zoe.png",
                cannonball: "cannonball.png",
                cannonball_hit: "cannonball_hit.png",
                sea: "sea.png",
                sea_mid: "sea_mid.png",
                sea_back: "sea_back.png",
                ship_hull: "ship_hull.png",
                ship_goldtrim: "ship_goldtrim.png",
                ship_flag: "ship_flag.png",
                ship_sails: "ship_sails.png",
                cloud: "cloud.png",
                cloudCracked: "cloud_cracked.png",
                sun_cloud: "sun.png",
                sun_cloudCracked: "sun_cracked.png",
                smoke: "smoke.png",
                rope: "rope.png",
                splash: "splash.png",
                cTrail1: "cannonball_trail_1.png",
                cTrail2: "cannonball_trail_2.png",
                cTrail3: "cannonball_trail_3.png",
                cTrail4: "cannonball_trail_4.png",
                cTrail5: "cannonball_trail_5.png",
                cTrail6: "cannonball_trail_6.png",
                cTrail7: "cannonball_trail_7.png",
                cTrail8: "cannonball_trail_8.png",
                debris1: "debris01.png",
                debris2: "debris02.png",
                debris3: "debris03.png",
                debris4: "debris04.png",
                debris5: "debris05.png",
                debris6: "debris06.png",
                debris7: "debris07.png",
                gold_damage_back: "gold_damage_back.png",
                gold_damage_mid: "gold_damage_mid.png",
                gold_damage_front: "gold_damage_front.png",
                fire: "fire.png",
                points1000: "points_1000.png",
                points2400: "points_2400.png",
                points5000: "points_5000.png",
                points15000green: "points_15000_green.png",
                points15000pink: "points_15000_pink.png",
                instructionsLeft: "instructions_in_game_left.png",
                instructionsRight: "instructions_in_game_right.png",
                wind: "wind.png",
                crate: "crate.png"
            },
            k = [],
            l = ["isle-of-coconuts", "spout-belly-bay", "fire"],
            m = function(a) {
                e = l.indexOf(a), trace("SELECT LEVEL " + e), 0 > e && (e = 0)
            },
            n = function() {
                e += 1
            },
            o = function() {
                c = new f[e], c.init(), luxanimals.addObject(c)
            };
        return k[0] = {
            island: "island_sand.png",
            leaf1: "island_leaf_1.png",
            leaf2: "island_leaf_2.png",
            trunk1: "island_trunk_1.png",
            trunk2: "island_trunk_2.png",
            trunk3: "island_trunk_3.png",
            coconut: "island_coconut.png",
            chest: "island_chest.png",
            crab: "island_crab.png"
        }, f[0] = function() {
            var a, c, e, f = [],
                j = [],
                k = [],
                l = function() {
                    g.attr("class", "default_background"), d = {
                        stupid: [-20, -80, 10, 25],
                        normal: [-28, -65, 16, 25],
                        hard: [-35, -48, 17, 23]
                    }, luxanimals.clouds.populate([{
                        x: 300,
                        y: 140,
                        scale: .6
                    }, {
                        x: 650,
                        y: 145,
                        scale: .7
                    }, {
                        x: 400,
                        y: 200,
                        scale: .8
                    }, {
                        type: "sun",
                        x: 450,
                        y: 150,
                        scale: 1
                    }, {
                        x: 550,
                        y: 200,
                        scale: 1
                    }]), luxanimals.addObject(luxanimals.clouds), a = new createjs.Bitmap(luxanimals.loadedAssets.island.img), a.x = 331, a.y = 424, luxanimals.physics.levels[0].init();
                    var b = new createjs.SpriteSheet({
                        images: [luxanimals.loadedAssets.chest.img],
                        animations: {
                            all: {
                                frames: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21],
                                next: !1
                            }
                        },
                        frames: [
                            [0, 0, 151, 117, 0, 151, 0],
                            [151, 0, 151, 117, 0, 151, 0],
                            [302, 0, 151, 117, 0, 151, 0],
                            [453, 0, 151, 117, 0, 151, 0],
                            [604, 0, 151, 117, 0, 151, 0],
                            [755, 0, 151, 117, 0, 151, 0],
                            [906, 0, 151, 117, 0, 151, 0],
                            [1057, 0, 151, 117, 0, 151, 0],
                            [1208, 0, 151, 117, 0, 151, 0],
                            [1359, 0, 151, 117, 0, 151, 0],
                            [1510, 0, 151, 117, 0, 151, 0],
                            [1661, 0, 151, 117, 0, 151, 0],
                            [1812, 0, 151, 117, 0, 151, 0],
                            [0, 117, 151, 117, 0, 151, 0],
                            [151, 117, 151, 117, 0, 151, 0],
                            [302, 117, 151, 117, 0, 151, 0],
                            [453, 117, 151, 117, 0, 151, 0],
                            [604, 117, 151, 117, 0, 151, 0],
                            [755, 117, 151, 117, 0, 151, 0],
                            [906, 117, 151, 117, 0, 151, 0],
                            [1057, 117, 151, 117, 0, 151, 0],
                            [1208, 117, 151, 117, 0, 151, 0],
                            [1359, 117, 151, 117, 0, 151, 0]
                        ]
                    });
                    c = new createjs.BitmapAnimation(b), c.x = 525, c.y = 340, c.gotoAndStop(0), m(), n(), luxanimals.physics.levels[0].createChest(c)
                },
                m = function() {
                    for (var d = 4, e = 0; 3 > e; e++) {
                        1 === e && (b.addChild(a), b.addChild(c));
                        var f, g = new createjs.Container,
                            h = [],
                            i = 0,
                            j = {
                                x: 0,
                                y: 0
                            },
                            l = [-20, 20],
                            m = [0, 0];
                        switch (e) {
                            case 0:
                                f = new createjs.Bitmap(luxanimals.loadedAssets.trunk2.img), g.regX = 20, g.regY = 65, g.x = 510, g.y = 440, j.y = -40;
                                break;
                            case 1:
                                f = new createjs.Bitmap(luxanimals.loadedAssets.trunk1.img), g.regX = 20, g.regY = 65, g.x = 400, g.y = 492, j.y = -45, l[0] = 8, l[1] = 40, m[0] = -25;
                                break;
                            case 2:
                                f = new createjs.Bitmap(luxanimals.loadedAssets.trunk3.img), g.regX = 20, g.regY = 65, g.x = 580, g.y = 440, i = 20, j.y = -35
                        }
                        g.addChild(f);
                        for (var n = Modernizr.androidbrowser ? 0 : 2, o = [], p = 0; n > p; p++) {
                            var q = new createjs.Bitmap(luxanimals.loadedAssets.coconut.img);
                            q.x = l[p] + g.x + j.x, q.y = m[p] + g.y + j.y, q.regX = 15, q.regY = 15, b.addChild(q), o.push(q)
                        }
                        for (b.addChild(g), p = 0; d >= p; p++) {
                            var s, t = {
                                x: .3 * Math.random() + .8,
                                y: .3 * Math.random() + .8
                            };
                            3 === p || 2 === p ? (s = new createjs.Bitmap(luxanimals.loadedAssets.leaf1.img), s.regX = 125, s.regY = 37, g.addChild(s)) : (s = new createjs.Bitmap(luxanimals.loadedAssets.leaf2.img), s.regX = 87, s.regY = 37, Math.random() < .33 ? g.addChild(s) : g.addChildAt(s, 0)), s.mouseEnabled = !1, s.rotation = p * (180 / (d + 1)) - 90, p > 2 ? (s.scaleX = -t.x, s.scaleY = t.y, s.x = 20 + i) : (s.scaleX = t.x, s.scaleY = t.y, s.x = 10 + i), h.push(s), k.push({
                                leaf: s,
                                rot: s.rotation,
                                angle: 180 * Math.random(),
                                radius: null,
                                speed: null,
                                rand: Math.random()
                            })
                        }
                        h = r(h), luxanimals.physics.levels[0].createTree(e, g, h, o)
                    }
                },
                n = function() {
                    e = new createjs.Bitmap(luxanimals.loadedAssets.crab.img).set({
                        x: 400,
                        y: 500
                    }), b.addChild(e), o()
                },
                o = function() {
                    h.get(e).to({
                        x: 170 * Math.random() + 370,
                        y: 170 * Math.random() + 420
                    }, ~~(4e3 * Math.random()) + 3e3, i.sineInOut).call(o)
                },
                p = function(a) {
                    var c, d = a / FRAME_DELTA,
                        e = luxanimals.physics.windManager.getWind();
                    if (!Modernizr.androidbrowser)
                        for (c = 0; c < k.length; c++) k[c].radius = 2 * e * k[c].rand, k[c].speed = e * (.08 + .1 * k[c].rand), k[c].leaf.rotation = k[c].rot + -6 * e + Math.cos(k[c].angle) * k[c].radius, k[c].angle += k[c].speed * d;
                    for (c = 0; c < j.length; c++) j[c].leaf.y += j[c].ySpeed * d, j[c].leaf.rotation = Math.cos(j[c].angle) * j[c].radius * -.3, j[c].leaf.x = j[c].xOrigin + Math.cos(j[c].angle) * j[c].radius, j[c].angle += j[c].speed * d, j[c].leaf.y > 600 && (b.removeChild(j[c].leaf), j.splice(c, 1))
                },
                q = function(a) {
                    trace("[levels] level 1 - detachLeafs");
                    for (var c = 2, d = 0; c > d; d++)
                        if (a[d]) {
                            a[d].x += a[d].parent.x + 50, a[d].y += a[d].parent.y - 50, a[d].rotation += a[d].parent.rotation, a[d].parent.removeChild(a[d]), b.addChild(a[d]), j.push({
                                leaf: a[d],
                                xOrigin: a[d].x,
                                ySpeed: 4 * Math.random() + 4,
                                angle: 180 * Math.random(),
                                radius: 50,
                                speed: .3 * Math.random()
                            });
                            for (var e = 0; e < k.length; e++)
                                if (k[e].leaf === a[d]) {
                                    k.splice(e, 1);
                                    break
                                }
                            a.splice(d, 1)
                        }
                },
                r = function(a, b) {
                    var c, d, e = a.length;
                    for (b || (b = Math); --e;) c = b.random() * (e + 1) | 0, d = a[e], a[e] = a[c], a[c] = d;
                    return a
                },
                s = function() {
                    c.gotoAndPlay("all")
                },
                t = function() {
                    h.removeTweens(e), f.length = j.length = k.length = 0, a = c = e = f = j = k = null
                };
            return {
                name: "The Isle of Coconuts",
                subtitle: "DAY ONE: BATTLE FOR THE ISLE OF COCONUTS",
                init: l,
                update: p,
                detachLeafs: q,
                chestHit: s,
                clearAll: t
            }
        }, k[1] = {
            whale: "spout_belly_whale_and_rock.png",
            whaleTail: "spout_belly_whale_tail.png",
            stream: "spout_belly_stream.png",
            foam: "spout_belly_foam.png",
            whaleEyes: "whale_eyes.png"
        }, f[1] = function() {
            g.attr("class", "default_background"), d = {
                stupid: [-30, -60, 10, 25],
                normal: [-35, -55, 16, 25],
                hard: [-40, -50, 18, 22]
            };
            var c = null,
                e = 0,
                f = [],
                h = null,
                i = null,
                j = null,
                k = null,
                l = null,
                m = null,
                n = "idle",
                o = 0,
                p = ~~(40 * Math.random()) + 60,
                q = !1,
                r = {
                    regX: 209,
                    regY: 104,
                    x: 435,
                    y: 508
                },
                s = {
                    x: 410,
                    y: 340
                },
                t = {
                    x: 653,
                    y: 465
                },
                u = {
                    x: 580,
                    y: 345,
                    regX: -40,
                    regY: 10,
                    scaleX: 0,
                    scaleY: 0
                },
                v = {
                    x: 580,
                    y: 360,
                    regY: 222,
                    scaleY: 0
                },
                w = new createjs.SpriteSheet({
                    images: [luxanimals.loadedAssets.stream.img],
                    animations: {
                        all: {
                            frames: [0, 1, 1, 2, 2],
                            next: "all"
                        }
                    },
                    frames: [
                        [0, 0, 12, 222, 0, 12, 0],
                        [12, 0, 12, 222, 0, 12, 0],
                        [24, 0, 12, 222, 0, 12, 0]
                    ]
                }),
                x = new createjs.SpriteSheet({
                    images: [luxanimals.loadedAssets.foam.img],
                    animations: {
                        all: {
                            frames: [0, 1, 1, 2, 2],
                            next: "all"
                        }
                    },
                    frames: [
                        [0, 0, 91, 45, 0, 91, 0],
                        [91, 0, 91, 45, 0, 91, 0],
                        [182, 0, 91, 45, 0, 91, 0]
                    ]
                }),
                y = new createjs.SpriteSheet({
                    images: [luxanimals.loadedAssets.whaleEyes.img],
                    animations: {
                        spout: {
                            frames: [3, 4, 5, 6, 6, 7, 7, 8, 8, 7, 7, 8, 8, 7, 7, 8, 8, 7, 7, 8, 8, 7, 7, 8, 8, 7, 7, 6, 9, 10],
                            next: !1
                        },
                        blink: {
                            frames: [0, 1, 2, 2, 2, 2, 1, 0],
                            next: !1
                        },
                        hit: {
                            frames: [0, 0, 11, 11, 12, 12, 13, 13, 14, 14, 15, 15, 16, 16, 0],
                            next: !1
                        }
                    },
                    frames: [
                        [0, 0, 125, 34, 0, 125, 0],
                        [125, 0, 125, 34, 0, 125, 0],
                        [250, 0, 125, 34, 0, 125, 0],
                        [375, 0, 125, 34, 0, 125, 0],
                        [500, 0, 125, 34, 0, 125, 0],
                        [625, 0, 125, 34, 0, 125, 0],
                        [750, 0, 125, 34, 0, 125, 0],
                        [875, 0, 125, 34, 0, 125, 0],
                        [1e3, 0, 125, 34, 0, 125, 0],
                        [1125, 0, 125, 34, 0, 125, 0],
                        [1250, 0, 125, 34, 0, 125, 0],
                        [1375, 0, 125, 34, 0, 125, 0],
                        [1500, 0, 125, 34, 0, 125, 0],
                        [1625, 0, 125, 34, 0, 125, 0],
                        [1750, 0, 125, 34, 0, 125, 0],
                        [1875, 0, 125, 34, 0, 125, 0],
                        [0, 34, 125, 34, 0, 125, 0]
                    ]
                }),
                z = function() {
                    var a, d;
                    luxanimals.clouds.populate([{
                        x: 100,
                        y: 170,
                        scale: .6
                    }, {
                        type: "sun",
                        x: 250,
                        y: 150,
                        scale: 1
                    }, {
                        x: 200,
                        y: 200,
                        scale: 1
                    }, {
                        x: 700,
                        y: 150,
                        scale: .7
                    }, {
                        x: 780,
                        y: 200,
                        scale: 1
                    }]), luxanimals.addObject(luxanimals.clouds), a = new createjs.Bitmap(luxanimals.loadedAssets.whaleTail.img).set(r), d = new createjs.Bitmap(luxanimals.loadedAssets.whale.img).set(s), m = new createjs.BitmapAnimation(y).set(t), m.gotoAndStop(0), b.addChild(a, d, m), F(), clearInterval(c), c = window.setInterval(A, 4200), q = !1, luxanimals.physics.levels[1].createWhale(a)
                },
                A = function() {
                    window.clearInterval(c), c = null, null === j && 0 === e && (e = 0, luxanimals.physics && luxanimals.physics.levels[1].removeSpout(), i = new createjs.BitmapAnimation(w).set(v), j = new createjs.BitmapAnimation(x).set(u), k = $(i), l = $(j), i.gotoAndPlay("all"), j.gotoAndPlay("all"), m.gotoAndPlay("spout"), b.addChild(i, j), n = "spout", C())
                },
                B = function() {
                    luxanimals.physics && luxanimals.physics.levels[1].moveSpout(this.y)
                },
                C = function() {
                    l.animate({
                        scaleX: 1,
                        scaleY: 1
                    }, 250, function() {
                        luxanimals.physics.levels[1].createSpout(), k.animate({
                            scaleY: 1
                        }, 700), l.animate({
                            y: 123
                        }, {
                            duration: 700,
                            step: B,
                            complete: function() {
                                for (var a = 0, b = Math.round(4 * Math.random()) + 1; b > a; a++) f.push(Math.random());
                                h = window.setTimeout(D, 2e3)
                            }
                        })
                    })
                },
                D = function() {
                    if (h && (clearTimeout(h), h = null), !j) return E();
                    if (!i) return E();
                    e = 1;
                    var a = ~~(1e3 * Math.random()) + 1e3;
                    k.animate({
                        scaleY: f[0]
                    }, a, "easeInOutBack"), l.animate({
                        y: 222 * (1 - f[0]) + 123
                    }, {
                        duration: a,
                        easing: "easeInOutBack",
                        step: B,
                        complete: function() {
                            f.splice(0, 1), f.length >= 1 ? D() : (f = [], E())
                        }
                    })
                },
                E = function() {
                    return e = 2, j ? (l.animate({
                        y: 345
                    }, {
                        duration: 1e3,
                        step: B,
                        complete: function() {
                            luxanimals.physics && luxanimals.physics.levels[1].removeSpout(), l.animate({
                                scaleX: 0,
                                scaleY: 0
                            }, 200, function() {
                                e = 0, null !== c || q || (c = window.setInterval(A, ~~(4e3 * Math.random()) + 3e3)), a.removeChild(this), a.removeChild(i), i = k = null, j = l = null, m.gotoAndPlay("blink"), n = "idle"
                            })
                        }
                    }), void(i && k.animate({
                        scaleY: 0
                    }, 1e3))) : void(luxanimals.physics && luxanimals.physics.levels[1].removeSpout())
                },
                F = function() {
                    k && k.stop(!0, !0).clearQueue(), l && l.stop(!0, !0).clearQueue()
                },
                G = function(a) {
                    if (a) j ? F() : c && (window.clearInterval(c), c = null), null !== h && window.clearTimeout(h);
                    else {
                        if (j) switch (e) {
                            case 0:
                                C();
                                break;
                            case 1:
                                D();
                                break;
                            case 2:
                                E()
                        } else null === c && (c = window.setInterval(A, ~~(5e3 * Math.random()) + 5e3));
                        null !== h && (h = window.setTimeout(D, 2e3))
                    }
                },
                H = function(a) {
                    "idle" === n && (o += a / FRAME_DELTA, ~~o % p === 0 && (m.gotoAndPlay("blink"), p = ~~(100 * Math.random()) + 460))
                },
                I = function() {
                    F(), window.clearInterval(c), luxanimals.physics && luxanimals.physics.levels[1].removeSpout(), null !== j && (a.removeChild(j), a.removeChild(i)), null !== h && window.clearTimeout(h), f.length = 0, whaleTailBMP = whaleBMP = m = c = h = i = k = j = l = null
                },
                J = function() {
                    m.gotoAndPlay("hit"), m.onAnimationEnd = K
                },
                K = function() {
                    m.gotoAndPlay("blink"), n = "idle", m.onAnimationEnd = null
                },
                L = function() {
                    E(), q = !0
                };
            return {
                name: "The Battle of Spout Belly Bay",
                subtitle: "DAY TWO: BATTLE OF SPOUT BELLY BAY",
                init: z,
                update: H,
                pauseResume: G,
                clearAll: I,
                whaleHit: J,
                gameOver: L
            }
        }, k[2] = {
            volcano: "volcano.png",
            volcanoLeft: "volcano_left.png",
            volcanoRight: "volcano_right.png",
            volcanoTunnels: "volcano_tunnels.png",
            fireball: "volcano_fireball.png",
            goatL: "volcano_goat_left.png",
            goatR: "volcano_goat_right.png",
            tail: "volcano_tail.png",
            stormCloudFront: "storm_cloud_front.png",
            stormCloudMid: "storm_cloud_middle.png",
            stormCloudBack: "storm_cloud_back.png",
            wood: "volcano_wood_door.png",
            lightning: "lightningbolt.png"
        }, f[2] = function() {
            var c, e, f, i = 0,
                j = "left",
                k = function() {
                    g.attr("class", "volcano_background"), d = {
                        stupid: [-35, -60, 12, 25],
                        normal: [-42, -55, 15, 22],
                        hard: [-46, -50, 19, 23]
                    }, luxanimals.clouds.storm(), f = new createjs.Bitmap(luxanimals.loadedAssets.volcanoTunnels.img), e = new createjs.Bitmap(luxanimals.loadedAssets.volcanoLeft.img), c = new createjs.Bitmap(luxanimals.loadedAssets.volcanoRight.img);
                    var h = new createjs.Bitmap(luxanimals.loadedAssets.goatL.img),
                        i = new createjs.Bitmap(luxanimals.loadedAssets.goatR.img),
                        j = new createjs.Bitmap(luxanimals.loadedAssets.wood.img),
                        k = new createjs.Bitmap(luxanimals.loadedAssets.wood.img);
                    e.x = 270, e.y = 364, c.x = 452, c.y = 320, k.regX = k.regX = 6, k.regY = j.regY = 25, f.x = 270, f.y = 320, f.visible = !1, h.regX = i.regX = 23, h.regY = i.regY = 33, a.addChild(f), a.addChild(j), a.addChild(k), b.addChild(e), b.addChild(c), b.addChild(i), b.addChild(h), luxanimals.physics.levels[3].init(), luxanimals.physics.levels[3].goatRight(i), luxanimals.physics.levels[3].goatLeft(h), luxanimals.physics.levels[3].doors(j, k)
                },
                l = function(b) {
                    if (i += b / FRAME_DELTA, Math.floor(i) >= 35) {
                        i = 0;
                        var c = new createjs.Bitmap(luxanimals.loadedAssets.fireball.img),
                            d = new createjs.Bitmap(luxanimals.loadedAssets.tail.img);
                        c.regX = 27, c.regY = 22, d.regX = 17, d.regY = 46, c.x = c.y = d.x = d.y = -100, a.addChildAt(d, 0), a.addChildAt(c, 1), j = "left" === j ? "right" : "left", luxanimals.physics.levels[3].erupt(j, c, d)
                    }
                },
                m = function(a) {
                    var b = new createjs.Bitmap(luxanimals.loadedAssets.lightning.img);
                    b.mouseEnabled = !1, b.snapToPixel = !0, b.regX = 59, b.regY = 67, b.x = ~~a, b.y = 0, luxanimals.clouds.addLightning(b), $(b).animate({
                        y: 20 * Math.random() + 130
                    }, 500, "easeOutBack", function() {
                        luxanimals.physics.levels[3].lightning(b)
                    })
                },
                n = function() {
                    var a = luxanimals.gameManager.getTurn();
                    f.visible = !0, 0 === a ? h.get(c).to({
                        alpha: 0
                    }, 300).set({
                        visible: !1
                    }) : h.get(e).to({
                        alpha: 0
                    }, 300).set({
                        visible: !1
                    })
                },
                o = function() {
                    var a = luxanimals.gameManager.getTurn();
                    0 === a ? h.get(c).set({
                        visible: !0
                    }).to({
                        alpha: 1
                    }, 300).set({
                        visible: !1
                    }, f) : h.get(e).set({
                        visible: !0
                    }).to({
                        alpha: 1
                    }, 300).set({
                        visible: !1
                    }, f)
                },
                p = function(a) {
                    trace("levels startTurn() " + a), luxanimals.physics.levels[3].setTurn(a)
                };
            return {
                name: "The Battle Of Fire N' Goats",
                subtitle: "DAY THREE: BATTLE OF FIRE N' GOATS",
                init: k,
                showTunnels: n,
                hideTunnels: o,
                update: l,
                startTurn: p,
                cloudHit: m
            }
        }, {
            init: o,
            selectLevel: m,
            selectNextLevel: n,
            setBackgroundHolder: function(b) {
                a = b
            },
            setForegroundHolder: function(a) {
                b = a
            },
            getLevel: function() {
                return e
            },
            getLevelAssets: function() {
                return $.extend({}, j, k[e])
            },
            getCurrentLevel: function() {
                return c
            },
            getLevelName: function() {
                return c.name
            },
            getLevelSubTitle: function() {
                return c.subtitle
            },
            getLevelID: function() {
                return l[e]
            },
            getTotalLevels: function() {
                return l.length
            },
            getAIRanges: function() {
                return d
            }
        }
    }, this.clickWrap = this.clickWrap || {}, clickWrap.init = function() {
        $("#click-to-start").remove(), $("#container").off(), luxanimals.main = function() {
            var a;
            globalNoLoop = window.globalNoLoop || !1, $.support.transition || ($.fn.transition = $.fn.animate);
            var b, c = {};
            $.jStorage.deleteKey("user"), c.screen = $.jStorage.get("user.screen", Modernizr.phone ? "home" : "videoObject"), c.visits = $.jStorage.get("user.visits", 0), c.level = $.jStorage.get("user.level"), c.character = $.jStorage.get("user.character"), c.characters = $.jStorage.get("user.characters", {}), c.scores = $.jStorage.get("user.scores"), c.visits++, $.jStorage.set("user.visits", c.visits), luxanimals.user = c;
            var d = function() {
                var b = function() {
                        trace("[main] - preload game"), a = new luxanimals.preloader({
                            onComplete: c,
                            baseurl: "assets/images/"
                        }), a.init(luxanimals.levels.getLevelAssets());
                        var b = a.getLoader();
                        luxanimals.soundManager.load("battleLoop cannon1 cannon2 hit1 hit2 hit3 splash1 splash2 doorclose goat thunder coin", !1, b)
                    },
                    c = function() {
                        trace("[main] - assets loaded"), a = null, luxanimals.uiManager.nextScreenLoaded(), d()
                    },
                    d = function() {
                        trace("[main] - start"), luxanimals.physics = new luxanimals.Physics, luxanimals.particles = new luxanimals.Particles, luxanimals.coins = new luxanimals.Coins, luxanimals.powerups = new luxanimals.Powerups, luxanimals.scene = new luxanimals.Scene, luxanimals.gameManager.init(), luxanimals.addObject(luxanimals.scene), createjs.Ticker.addListener(luxanimals)
                    },
                    e = function() {
                        trace("[main] - restart"), f(), d()
                    },
                    f = function() {
                        createjs.Ticker.removeListener(luxanimals), luxanimals.physics = luxanimals.particles = luxanimals.scene = luxanimals.coins = null
                    },
                    g = function() {
                        luxanimals.gameManager = null, luxanimals.gameManager = new luxanimals.GameManager
                    };
                return {
                    start: d,
                    restart: e,
                    clearAll: f,
                    quit: g,
                    preloadStart: b
                }
            }();
            return {
                game: d,
                init: b
            }
        }(), Modernizr.canvas && (luxanimals.soundManager = new luxanimals.soundManager, luxanimals.gameManager = new luxanimals.GameManager, luxanimals.clouds = new luxanimals.Clouds, luxanimals.levels = new luxanimals.Levels, luxanimals.uiManager = new luxanimals.uiManager, luxanimals.user.character && luxanimals.gameManager.selectCharacter(luxanimals.user.character), luxanimals.user.level && luxanimals.levels.selectLevel(luxanimals.user.level), luxanimals.uiManager.loadNextScreen(luxanimals.user.screen, !0))
    }, $(document).ready(function() {
        Modernizr.mobile ? $("#container").on("click", clickWrap.init) : clickWrap.init()
    });